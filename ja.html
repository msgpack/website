<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="keywords" content="MessagePack,msgpack,JSON,alternative,better json,faster json,serializer">
  <link href='favicon.ico' rel='icon' type='image/x-icon'>

  <link rel="alternate" hreflang="en" href="index.html">
  <link rel="alternate" hreflang="ja" href="ja.html">


  <title>MessagePack: JSONをもっと速く、小さく。</title>

  <link media="all" rel="stylesheet" href="css/yuibase.css">
  <link media="all" rel="stylesheet" href="js/prettify/prettify.css">
  <link media="all" rel="stylesheet" href="css/all.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web:400,200">
  <script src="js/all.js"></script>
  <script src="js/prettify/prettify.js"></script>
  <script src="js/prettify/run_prettify.js"></script>
  <script src="js/jquery-2.1.4.min.js"></script>
  <script src="js/jquery.leanModal.min.js" ></script>
  <script src="js/msgpack.js" ></script>

  <style>
  .i18n { font-family: sans-serif; }
.i18n_nav { font-family: sans-serif; font-size: 170%; }
.i18n_head { font-family: sans-serif; }
.i18n_next { font-family:&#39;Avenir Next&#39;, &#39;Titillium Web&#39;, &#39;Myriad Web Pro&#39;, &#39;Helvetica&#39;, sans-serif; }
  </style>

  <script type="text/javascript">
  // select initially-selected quick start randomly
  $(function(){
    var index = Math.floor(Math.random()*(document.getElementsByClassName('qs').length-1));
    changeQuickStart(document.getElementsByClassName('qs')[index].id,document.getElementsByClassName('qs-a')[index])}
  );

  $(function() {
    $('pre > code').addClass('prettyprint');
    prettyPrint();
  });

  $(function() {
    $('a[rel*=leanModal]').leanModal({
      top: 100,
      overlay : 0.5,
      closeButton: ".modal_close"
    });
    $(document).keydown(function(e) {
      if (e.keyCode == 27) {
        $('#lean_overlay').fadeOut(200);
        $('#json-to-msgpack').css({'display':'none'});
      }
    });
  });
  </script>

  <script type="text/javascript">
  $(function() {
    $("#json-text").keyup(function(event) {
      var text = $("#json-text").val();
      var obj;
      try {
         obj = JSON.parse(text);
      } catch (e) {
         return;
      }
      var msg = msgpack.pack(obj);
      var hex = jQuery.map(msg, function(e,i) {
        return ("0" + e.toString(16)).slice(-2);
      }).join(" ");
      $("#msgpack-text").text(hex);
      var textLength = encodeURIComponent(text).replace(/%../g,"%").length;
      $("#json-bytes").text(textLength.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, '$1,') + " bytes");
      $("#msgpack-bytes").text(msg.length.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, '$1,') + " bytes");
      $("#msgpack-percent").text(Math.round(msg.length / textLength * 100).toString() + " %");
    }).keyup();
    $("#msgpack-text").keyup(function(event) {
      var hex = $("#msgpack-text").val().replace(/ +/g,'');
      var msgbytes = [];
      for(var i=0; i< hex.length-1; i+=2){
        msgbytes.push(parseInt(hex.substr(i, 2), 16));
      }
      var msg = String.fromCharCode.apply(String, msgbytes);
      var obj=msgpack.unpack(msg);
      var text=JSON.stringify(obj);
      $("#json-text").text(text);
      var textLength = encodeURIComponent(text).replace(/%../g,"%").length;
      $("#json-bytes").text(textLength.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, '$1,') + " bytes");
      $("#msgpack-bytes").text(msg.length.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, '$1,') + " bytes");
      $("#msgpack-percent").text(Math.round(msg.length / textLength * 100).toString() + " %");
    });
  });
  </script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-17125377-1', 'auto', {'allowLinker': true});
    ga('set', 'anonymizeIp', true);
    ga('send', 'pageview');
  </script>
</head>
<body>
  <header>
    <div>
      <h1><a href="/">MessagePack</a></h1>
      <nav id="topnav">
        <ul>
          <li><a rel="leanModal" href="#json-to-msgpack" class="i18n_nav">Try!</a></li>
          <li><a href="https://github.com/msgpack/msgpack/blob/master/spec.md" class="i18n_nav">フォーマット仕様</a></li>
          <li><a href="https://twitter.com/search/MessagePack%20OR%20msgpack" class="i18n_nav">#msgpack</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main>
    <section id="introduction">
      <div id="description">
        <h2 class="i18n">もっと速く、小さく。</h2>
        <p class="i18n">MessagePackは、効率の良いバイナリ形式のオブジェクト･シリアライズ フォーマットです。JSONの置き換えとして使うことができ、様々なプログラミング言語をまたいでデータを交換することが可能です。しかも、JSONよりも速くてコンパクトです。例えば、小さな整数値はたった1バイト、短い文字列は文字列自体の長さ＋1バイトでシリアライズできます。</p>
      </div>

      <div id="next">
        <h3 class="i18n_head i18n_next">Next:</h3>
        <p class="i18n">MessagePackは <a href="#languages">50を超えるプログラミング環境</a> で使えるようになりました。</p>
      </div>
    </section>

    <!--
    <section id="usecases">
      <div id="testimonials">
        <div class="tmset">
          <div class="tm">
            <a class="tmlogo" href="https://redis.io/"><img src="images/redis.png" alt="Redis" width="150" height="50" /></a>
            <p class="tmtext">Redis scripting has support for MessagePack because it is a fast and compact serialization format with a simple to implement specification. I liked it so much that I implemented a MessagePack C extension for Lua just to include it into Redis.</p>
            <p class="tmauthor">Salvatore Sanfilippo, creator of Redis</p>
          </div>

          <div class="tm">
            <a class="tmlogo" href="https://fluentd.org/" style="height:100px;margin-top:-35px;"><img src="images/fluentd.png" alt="Fluentd" width="245" height="85" /></a>
            <p class="tmtext">Fluentd uses MessagePack for all internal data representation. It's crazy fast because of zero-copy optimization of msgpack-ruby. Now MessagePack is an essential component of Fluentd to achieve high performance and flexibility at the same time.</p>
            <p class="tmauthor">Sadayuki Furuhashi, creator of Fluentd</p>
          </div>
        </div>

        <div class="tmset">
          <div class="tm">
            <a class="tmlogo" href="https://www.treasuredata.com/"><img src="images/treasuredata.png" alt="Treasure Data" width="242" height="52" /></a>
            <p class="tmtext">Treasure Data built a multi-tenant database optimized for analytical queries using MessagePack. The schemaless database is growing by billions of records every month. We also use MessagePack as a glue between components. Actually we just wanted a fast replacement of JSON, and MessagePack is simply useful.</p>
            <p class="tmauthor">Kazuki Ohta, CTO</p>
          </div>

          <div class="tm">
            <a class="tmlogo" href="https://www.pinterest.com/pinterest/"><img src="images/pinterest.png" alt="Pinterest" width="197" height="50" /></a>
            <p class="tmtext">MessagePack has been simply invaluable to us. We use MessagePack + Memcache to cache many of our feeds on Pinterest. These feeds are compressed and very quick to unpack thanks to MessagePack while Memcache gives us fast atomic pushes.</p>
            <p class="tmauthor">Marty Weiner, Software Engineer</p>

            <p class="tmcontribute">Also use MessagePack? <a href="https://github.com/msgpack/website">Waiting for your testimonial!</a></p>
          </div>
        </div>
      </div>

      <div id="twitter">
        <a class="twitter-timeline" data-dnt="true" href="https://twitter.com/search?q=msgpack+OR+MessagePack+lang%3Aen" data-widget-id="343624208380735490" width="350" height="500">Tweets about "msgpack OR MessagePack"</a>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
      </div>
    </section>
    -->

    <section id="usage">
      <div id="languages">
        <h3 class="i18n_head">動作環境</h3>

        <ul class="qslist">
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-st3v0-msgpack-as3',this)">ActionScript3 <span class="qs-sub">st3v0</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-hideakitai-MsgPack',this)">Arduino <span class="qs-sub">hideakitai</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-pkcsecurity-msgpack-cljs',this)">ClojureScript <span class="qs-sub">pkcsecurity</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-jpf91-msgpack-ll',this)">D <span class="qs-sub">jpf91</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-ymofen-thealchemist',this)">Elixir <span class="qs-sub">ymofen</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-xtpor-godot-msgpack',this)">GDScript <span class="qs-sub">xtpor</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-dchenk-msgp',this)">Go <span class="qs-sub">dchenk</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-shamaton-msgpackgen',this)">Go <span class="qs-sub">shamaton</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-nnabeyang-go-msgpack',this)">Go <span class="qs-sub">nnabeyang</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-jonghough-msgpack-j',this)">J <span class="qs-sub">jonghough</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-textbook-express-msgpack',this)">JavaScript <span class="qs-sub">textbook</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-kropp-kotlinx-serialization-msgpack',this)">Kotlin Serialization <span class="qs-sub">kropp</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-mradziwo-MsgPack_LabVIEW',this)">LabVIEW <span class="qs-sub">mradziwo</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-forzafootball-msgpack-objc',this)">Objective-C <span class="qs-sub">forzafootball</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-CodeSmith32-msgpack-php-micro',this)">PHP <span class="qs-sub">CodeSmith32</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-polyglotted-msgpack-python',this)">Python <span class="qs-sub">polyglotted</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-lekma-mood-msgpack',this)">Python <span class="qs-sub">lekma</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-crowding-msgpack-r',this)">R <span class="qs-sub">crowding</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-tkob-mlmsgpack',this)">SML <span class="qs-sub">tkob</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-couchdeveloper-messagepack',this)">Swift <span class="qs-sub">couchdeveloper</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-cherrywoods-swift-msgpack-serialization',this)">Swift, java compatibel <span class="qs-sub">cherrywoods</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-samclaus-msgpack-ts',this)">TypeScript/JavaScript <span class="qs-sub">samclaus</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-tihannalouise-https-github-com-msgpack-msgpack-java',this)">expert-carnival <span class="qs-sub">tihannalouise</span></a></li>
          
        </ul>
      </div>

      <div id="api">
        <h3 class="i18n_head">使い方</h3>
        <h4 id="language">&nbsp;</h4>
        <div id="quickstart" class="qsholder"></div>
        <p id="quickstart-guide"><a href="https://github.com/msgpack/website/blob/master/README.md#how-to-list-up-your-project-on-msgpackorg">List your implementation here!</a></p>

        
        <div id="qs-st3v0-msgpack-as3" class="qs"><h4><a href="https://github.com/st3v0/msgpack-as3" target="_blank">st3v0/msgpack-as3 <span class="qs-url">https://github.com/st3v0/msgpack-as3</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container js-search-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack-for-actionscript3" class="anchor" aria-hidden="true" href="#messagepack-for-actionscript3"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack for ActionScript3</h5>
<p dir="auto">msgpack-as3 is an implementation of the latest MessagePack specification for ActionScript3 language (Flash, Flex and AIR).</p>
<ul dir="auto">
<li>Message Pack specification (Dec 22, 2015): <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">https://github.com/msgpack/msgpack/blob/master/spec.md</a>
</li>
</ul>
<h6 dir="auto">
<a id="user-content-basic-usage" class="anchor" aria-hidden="true" href="#basic-usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Basic Usage</h6>
<h7 dir="auto">
<a id="user-content-serialize-and-deserialize" class="anchor" aria-hidden="true" href="#serialize-and-deserialize"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Serialize and Deserialize</h7>
<p dir="auto">The usage of MsgPack class is very simple. You need create an object and call read and write methods.</p>
```actionscript
// message pack object created
var msgpack:MsgPack = new MsgPack();
<p dir="auto">// encode an array
var bytes:ByteArray = msgpack.write([1, 2, 3, 4, 5]);</p>
<p dir="auto">// rewind the buffer
bytes.position = 0;</p>
<p dir="auto">// print the decoded object
trace(msgpack.read(bytes));</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="
### Flags
&lt;p&gt;Currently there are three flags which you may use to initialize a MsgPack object:&lt;/p&gt;
* &lt;code&gt;MsgPackFlags.READ_STRING_AS_BYTE_ARRAY&lt;/code&gt;: message pack string data is read as byte array instead of string;
* &lt;code&gt;MsgPackFlags.ACCEPT_LITTLE_ENDIAN&lt;/code&gt;: MsgPack objects will work with little endian buffers (message pack specification defines big endian as default).
* &lt;code&gt;MsgPackFlags.SPEC2013_COMPATIBILITY&lt;/code&gt;: MsgPack will run in backwards compatibility mode.

```actionscript
var msg:MsgPack;

// use logical operator OR to set the flags.
msgpack = new MsgPack(MsgPackFlags.READ_STRING_AS_BYTE_ARRAY | MsgPackFlags.ACCEPT_LITTLE_ENDIAN);"><pre class="notranslate"><code>
### Flags
&lt;p&gt;Currently there are three flags which you may use to initialize a MsgPack object:&lt;/p&gt;
* &lt;code&gt;MsgPackFlags.READ_STRING_AS_BYTE_ARRAY&lt;/code&gt;: message pack string data is read as byte array instead of string;
* &lt;code&gt;MsgPackFlags.ACCEPT_LITTLE_ENDIAN&lt;/code&gt;: MsgPack objects will work with little endian buffers (message pack specification defines big endian as default).
* &lt;code&gt;MsgPackFlags.SPEC2013_COMPATIBILITY&lt;/code&gt;: MsgPack will run in backwards compatibility mode.

```actionscript
var msg:MsgPack;

// use logical operator OR to set the flags.
msgpack = new MsgPack(MsgPackFlags.READ_STRING_AS_BYTE_ARRAY | MsgPackFlags.ACCEPT_LITTLE_ENDIAN);
</code></pre></div>
<h6 dir="auto">
<a id="user-content-advanced-usage" class="anchor" aria-hidden="true" href="#advanced-usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Advanced Usage</h6>
<h7 dir="auto">
<a id="user-content-extensions" class="anchor" aria-hidden="true" href="#extensions"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Extensions</h7>
<p dir="auto">You can create your own Extension Workers by extending the <code>ExtensionWorker</code> Class and then assigning it to the MsgPack Factory.</p>
<p dir="auto">The following example assigns a custom worker which extends the <code>ExtensionWorker</code> Class.</p>
```actionscript
var msgpack:MsgPack = new MsgPack();
<p dir="auto">// Assign the new worker to the factory.
msgpack.factory.assign(new CustomWorker());</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="
&lt;p&gt;For more information regarding Extensions refer to the MessagePack specification.&lt;/p&gt;

### Priorities
&lt;p&gt;Worker priority behaves similar to how the Adobe Event Dispatcher priorities work. In MessagePack, deciding which worker will be use for serializing/deserializing depends on two(2) factors.&lt;/p&gt;
1. The order in which the worker was assigned to the factory.
2. The priority of the worker. Higher values take precedence.

All workers have a default priority of 0.

&lt;p&gt;In the following example &lt;code&gt;workerB&lt;/code&gt; will never be used because it's assign after &lt;code&gt;workerA&lt;/code&gt;&lt;/p&gt;
```actionscript
var msgpack:MsgPack = new MsgPack();

var workerA:StringWorker = new StringWorker();
var workerB:DifferentStringWorker = new DifferentStringWorker();

msgpack.factory.assign(workerA);
msgpack.factory.assign(workerB);"><pre class="notranslate"><code>
&lt;p&gt;For more information regarding Extensions refer to the MessagePack specification.&lt;/p&gt;

### Priorities
&lt;p&gt;Worker priority behaves similar to how the Adobe Event Dispatcher priorities work. In MessagePack, deciding which worker will be use for serializing/deserializing depends on two(2) factors.&lt;/p&gt;
1. The order in which the worker was assigned to the factory.
2. The priority of the worker. Higher values take precedence.

All workers have a default priority of 0.

&lt;p&gt;In the following example &lt;code&gt;workerB&lt;/code&gt; will never be used because it's assign after &lt;code&gt;workerA&lt;/code&gt;&lt;/p&gt;
```actionscript
var msgpack:MsgPack = new MsgPack();

var workerA:StringWorker = new StringWorker();
var workerB:DifferentStringWorker = new DifferentStringWorker();

msgpack.factory.assign(workerA);
msgpack.factory.assign(workerB);
</code></pre></div>
<p dir="auto">However if we adjust the priority of <code>workerB</code>, then <code>workerA</code> will never be used.</p>
```actionscript
var msgpack:MsgPack = new MsgPack();
<p dir="auto">var workerA:StringWorker = new StringWorker();
var workerB:DifferentStringWorker = new DifferentStringWorker(null, 1);</p>
<p dir="auto">msgpack.factory.assign(workerA);
msgpack.factory.assign(workerB);</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="
## Credits
This application uses Open Source components. You can find the source code of their open source projects along with license information below. We acknowledge and are grateful to these developers for their contributions to open source.

Project: as3-msgpack https://github.com/loteixeira/as3-msgpack  
Copyright (C) 2013 Lucas Teixeira  
License (Apache V2.0) http://www.apache.org/licenses/LICENSE-2.0  "><pre class="notranslate"><code>
## Credits
This application uses Open Source components. You can find the source code of their open source projects along with license information below. We acknowledge and are grateful to these developers for their contributions to open source.

Project: as3-msgpack https://github.com/loteixeira/as3-msgpack  
Copyright (C) 2013 Lucas Teixeira  
License (Apache V2.0) http://www.apache.org/licenses/LICENSE-2.0  
</code></pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-hideakitai-MsgPack" class="qs"><h4><a href="https://github.com/hideakitai/MsgPack" target="_blank">hideakitai/MsgPack <span class="qs-url">https://github.com/hideakitai/MsgPack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container js-search-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack" class="anchor" aria-hidden="true" href="#msgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MsgPack</h5>
<p dir="auto">MessagePack implementation for Arduino (compatible with other C++ apps)</p>
<h6 dir="auto">
<a id="user-content-feature" class="anchor" aria-hidden="true" href="#feature"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Feature</h6>
<ul dir="auto">
<li>one-line [serialize / deserialize] for almost all standard type of C++ same as <a href="https://github.com/msgpack/msgpack-c">msgpack-c</a>
</li>
<li>support custom class [serialization / deserialization]</li>
<li>support working with <a href="https://github.com/bblanchon/ArduinoJson">ArduinoJSON</a>
</li>
<li>one-line [save / load] between custom serializable MsgPack class and JSON file</li>
<li>one-line [save / load] custom serializable MsgPack class [to / from] EEPROM</li>
</ul>
<h6 dir="auto">
<a id="user-content-typical-usage" class="anchor" aria-hidden="true" href="#typical-usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Typical Usage</h6>
<p dir="auto">This library is only for serialize / deserialize.
To send / receive serialized data with <code>Stream</code> class, please use <a href="https://github.com/hideakitai/MsgPacketizer">MsgPacketizer</a>.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='#include &lt;MsgPack.h&gt;

// input to msgpack
int i = 123;
float f = 1.23;
MsgPack::str_t s = "str"; // std::string or String
MsgPack::arr_t&lt;int&gt; v {1, 2, 3}; // std::vector or arx::vector
MsgPack::map_t&lt;String, float&gt; m {{"one", 1.1}, {"two", 2.2}, {"three", 3.3}}; // std::map or arx::map

// output from msgpack
int ri;
float rf;
MsgPack::str_t rs;
MsgPack::arr_t&lt;int&gt; rv;
MsgPack::map_t&lt;String, float&gt; rm;

void setup() {
    delay(2000);
    Serial.begin(115200);
    Serial.println("msgpack test start");

    // serialize to msgpack
    MsgPack::Packer packer;
    packer.serialize(i, f, s, v, m);

    // deserialize from msgpack
    MsgPack::Unpacker unpacker;
    unpacker.feed(packer.data(), packer.size());
    unpacker.deserialize(ri, rf, rs, rv, rm);

    if (i != ri) Serial.println("failed: int");
    if (f != rf) Serial.println("failed: float");
    if (s != rs) Serial.println("failed: string");
    if (v != rv) Serial.println("failed: vector&lt;int&gt;");
    if (m != rm) Serial.println("failed: map&lt;string, int&gt;");

    Serial.println("msgpack test success");
}

void loop() {}'><pre>#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>MsgPack.h<span class="pl-pds">&gt;</span></span>

<span class="pl-c"><span class="pl-c">//</span> input to msgpack</span>
<span class="pl-k">int</span> i = <span class="pl-c1">123</span>;
<span class="pl-k">float</span> f = <span class="pl-c1">1.23</span>;
MsgPack::<span class="pl-c1">str_t</span> s = <span class="pl-s"><span class="pl-pds">"</span>str<span class="pl-pds">"</span></span>; <span class="pl-c"><span class="pl-c">//</span> std::string or String</span>
MsgPack::<span class="pl-c1">arr_t</span>&lt;<span class="pl-k">int</span>&gt; v {<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>}; <span class="pl-c"><span class="pl-c">//</span> std::vector or arx::vector</span>
MsgPack::<span class="pl-c1">map_t</span>&lt;String, <span class="pl-k">float</span>&gt; m {{<span class="pl-s"><span class="pl-pds">"</span>one<span class="pl-pds">"</span></span>, <span class="pl-c1">1.1</span>}, {<span class="pl-s"><span class="pl-pds">"</span>two<span class="pl-pds">"</span></span>, <span class="pl-c1">2.2</span>}, {<span class="pl-s"><span class="pl-pds">"</span>three<span class="pl-pds">"</span></span>, <span class="pl-c1">3.3</span>}}; <span class="pl-c"><span class="pl-c">//</span> std::map or arx::map</span>

<span class="pl-c"><span class="pl-c">//</span> output from msgpack</span>
<span class="pl-k">int</span> ri;
<span class="pl-k">float</span> rf;
MsgPack::<span class="pl-c1">str_t</span> rs;
MsgPack::<span class="pl-c1">arr_t</span>&lt;<span class="pl-k">int</span>&gt; rv;
MsgPack::<span class="pl-c1">map_t</span>&lt;String, <span class="pl-k">float</span>&gt; rm;

<span class="pl-k">void</span> <span class="pl-en">setup</span>() {
    <span class="pl-c1">delay</span>(<span class="pl-c1">2000</span>);
    Serial.<span class="pl-c1">begin</span>(<span class="pl-c1">115200</span>);
    Serial.<span class="pl-c1">println</span>(<span class="pl-s"><span class="pl-pds">"</span>msgpack test start<span class="pl-pds">"</span></span>);

    <span class="pl-c"><span class="pl-c">//</span> serialize to msgpack</span>
    MsgPack::Packer packer;
    packer.<span class="pl-c1">serialize</span>(i, f, s, v, m);

    <span class="pl-c"><span class="pl-c">//</span> deserialize from msgpack</span>
    MsgPack::Unpacker unpacker;
    unpacker.<span class="pl-c1">feed</span>(packer.<span class="pl-c1">data</span>(), packer.<span class="pl-c1">size</span>());
    unpacker.<span class="pl-c1">deserialize</span>(ri, rf, rs, rv, rm);

    <span class="pl-k">if</span> (i != ri) Serial.<span class="pl-c1">println</span>(<span class="pl-s"><span class="pl-pds">"</span>failed: int<span class="pl-pds">"</span></span>);
    <span class="pl-k">if</span> (f != rf) Serial.<span class="pl-c1">println</span>(<span class="pl-s"><span class="pl-pds">"</span>failed: float<span class="pl-pds">"</span></span>);
    <span class="pl-k">if</span> (s != rs) Serial.<span class="pl-c1">println</span>(<span class="pl-s"><span class="pl-pds">"</span>failed: string<span class="pl-pds">"</span></span>);
    <span class="pl-k">if</span> (v != rv) Serial.<span class="pl-c1">println</span>(<span class="pl-s"><span class="pl-pds">"</span>failed: vector&lt;int&gt;<span class="pl-pds">"</span></span>);
    <span class="pl-k">if</span> (m != rm) Serial.<span class="pl-c1">println</span>(<span class="pl-s"><span class="pl-pds">"</span>failed: map&lt;string, int&gt;<span class="pl-pds">"</span></span>);

    Serial.<span class="pl-c1">println</span>(<span class="pl-s"><span class="pl-pds">"</span>msgpack test success<span class="pl-pds">"</span></span>);
}

<span class="pl-k">void</span> <span class="pl-en">loop</span>() {}</pre></div>
<h6 dir="auto">
<a id="user-content-encode--decode-to-collections-without-container" class="anchor" aria-hidden="true" href="#encode--decode-to-collections-without-container"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Encode / Decode to Collections without Container</h6>
<p dir="auto">In msgpack, there are two collection types: <code>Array</code> and <code>Map</code>.
C++ containers will be converted to one of them but you can do that from individual parameters.
To <code>pack</code> / <code>unpack</code> values as such collections in a simple way, please use these functions.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='packer.to_array(i, f, s); // becoms array format [i, f, s];
unpacker.from_array(ii, ff, ss); // unpack from array format to ii, ff, ss

packer.to_map("i", i, "f", f); // becoms {"i":i, "f":f}
unpacker.from_map(ki, ii, kf, ff); // unpack from map to ii, ff, ss'><pre>packer.to_array(i, f, s); <span class="pl-c"><span class="pl-c">//</span> becoms array format [i, f, s];</span>
unpacker.from_array(ii, ff, ss); <span class="pl-c"><span class="pl-c">//</span> unpack from array format to ii, ff, ss</span>

packer.to_map(<span class="pl-s"><span class="pl-pds">"</span>i<span class="pl-pds">"</span></span>, i, <span class="pl-s"><span class="pl-pds">"</span>f<span class="pl-pds">"</span></span>, f); <span class="pl-c"><span class="pl-c">//</span> becoms {"i":i, "f":f}</span>
unpacker.from_map(ki, ii, kf, ff); <span class="pl-c"><span class="pl-c">//</span> unpack from map to ii, ff, ss</span></pre></div>
<p dir="auto">The same conversion can be achieved using <code>serialize</code> and <code>deserialize</code>.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='packer.serialize(MsgPack::arr_size_t(3), i, f, s); // [i, f, s]
unpacker.deserialize(MsgPack::arr_size_t(3), ii, ff, ss);

packer.serialize(MsgPack::map_size_t(2), "i", i, "f", f); // {"i":i, "f":f}
unpacker.deserialize(MsgPack::map_size_t(2), ki, ii, kf, ff);'><pre>packer.serialize(MsgPack::<span class="pl-c1">arr_size_t</span>(<span class="pl-c1">3</span>), i, f, s); <span class="pl-c"><span class="pl-c">//</span> [i, f, s]</span>
unpacker.deserialize(MsgPack::<span class="pl-c1">arr_size_t</span>(<span class="pl-c1">3</span>), ii, ff, ss);

packer.serialize(MsgPack::<span class="pl-c1">map_size_t</span>(<span class="pl-c1">2</span>), <span class="pl-s"><span class="pl-pds">"</span>i<span class="pl-pds">"</span></span>, i, <span class="pl-s"><span class="pl-pds">"</span>f<span class="pl-pds">"</span></span>, f); <span class="pl-c"><span class="pl-c">//</span> {"i":i, "f":f}</span>
unpacker.deserialize(MsgPack::<span class="pl-c1">map_size_t</span>(<span class="pl-c1">2</span>), ki, ii, kf, ff);</pre></div>
<p dir="auto">Here, <code>MsgPack::arr_size_t</code> and <code>MsgPack::map_size_t</code> are used to identify the size of <code>Array</code> and <code>Map</code> format in <code>serialize</code> or <code>deserialize</code>.
This way is expandable to <code>pack</code> and <code>unpack</code> complex data structure because it can be nested.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='// {"i":i, "arr":[ii, iii]}
packer.serialize(MsgPack::map_size_t(2), "i", i, "arr", MsgPack::arr_size_t(2), ii, iii);
unpacker.deserialize(MsgPack::map_size_t(2), ki, i, karr, MsgPack::arr_size_t(2), ii, iii);'><pre><span class="pl-c"><span class="pl-c">//</span> {"i":i, "arr":[ii, iii]}</span>
packer.serialize(MsgPack::<span class="pl-c1">map_size_t</span>(<span class="pl-c1">2</span>), <span class="pl-s"><span class="pl-pds">"</span>i<span class="pl-pds">"</span></span>, i, <span class="pl-s"><span class="pl-pds">"</span>arr<span class="pl-pds">"</span></span>, MsgPack::<span class="pl-c1">arr_size_t</span>(<span class="pl-c1">2</span>), ii, iii);
unpacker.deserialize(MsgPack::<span class="pl-c1">map_size_t</span>(<span class="pl-c1">2</span>), ki, i, karr, MsgPack::<span class="pl-c1">arr_size_t</span>(<span class="pl-c1">2</span>), ii, iii);</pre></div>
<h6 dir="auto">
<a id="user-content-custom-class-adaptation" class="anchor" aria-hidden="true" href="#custom-class-adaptation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Custom Class Adaptation</h6>
<p dir="auto">To serialize / deserialize custom type you defined, please use <code>MSGPACK_DEFINE()</code> macro inside of your class. This macro enables you to convert your custom class to <code>Array</code> format.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="struct CustomClass {
    int i;
    float f;
    MsgPack::str_t s;
    MSGPACK_DEFINE(i, f, s); // -&gt; [i, f, s]
};"><pre><span class="pl-k">struct</span> <span class="pl-en">CustomClass</span> {
    <span class="pl-k">int</span> i;
    <span class="pl-k">float</span> f;
    MsgPack::<span class="pl-c1">str_t</span> s;
    <span class="pl-en">MSGPACK_DEFINE</span>(i, f, s); <span class="pl-c"><span class="pl-c">//</span> -&gt; [i, f, s]</span>
};</pre></div>
<p dir="auto">After that, you can <code>serialize</code> your class completely same as other types.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="int i;
float f;
MsgPack::str_t s;
CustomClass c;

MsgPack::Packer packer;
packer.serialize(i, f, s, c);
// -&gt; packer.serialize(i, f, s, arr_size_t(3), c.i, c.f, c.s)

int ii;
float ff;
MsgPack::str_t ss;
CustomClass cc;

MsgPack::Unpacker unpacker;
unpacker.feed(packer.data(), packer.size());
unpacker.deserialize(ii, ff, ss, cc);"><pre><span class="pl-k">int</span> i;
<span class="pl-k">float</span> f;
MsgPack::<span class="pl-c1">str_t</span> s;
CustomClass c;

MsgPack::Packer packer;
packer.serialize(i, f, s, c);
<span class="pl-c"><span class="pl-c">//</span> -&gt; packer.serialize(i, f, s, arr_size_t(3), c.i, c.f, c.s)</span>

<span class="pl-k">int</span> ii;
<span class="pl-k">float</span> ff;
MsgPack::<span class="pl-c1">str_t</span> ss;
CustomClass cc;

MsgPack::Unpacker unpacker;
unpacker.feed(packer.data(), packer.size());
unpacker.deserialize(ii, ff, ss, cc);</pre></div>
<p dir="auto">You can also wrap your custom class to <code>Map</code> format by using <code>MSGPACK_DEFINE_MAP</code> macro.
Please note that you need "key" string for <code>Map</code> format.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='struct CustomClass {
    MsgPack::str_t key_i {"i"}; int i;
    MsgPack::str_t key_f {"f"}; float f;
    MSGPACK_DEFINE_MAP(key_i, i, key_f, f); // -&gt; {"i":i, "f":f}
};

CustomClass c;
MsgPack::Packer packer;
packer.serialize(c);
// -&gt; packer.serialize(map_size_t(2), c.key_i, c.i, c.key_f, c.f)

CustomClass cc;
MsgPack::Unpacker unpacker;
unpacker.feed(packer.data(), packer.size());
unpacker.deserialize(cc);'><pre><span class="pl-k">struct</span> <span class="pl-en">CustomClass</span> {
    MsgPack::<span class="pl-c1">str_t</span> key_i {<span class="pl-s"><span class="pl-pds">"</span>i<span class="pl-pds">"</span></span>}; <span class="pl-k">int</span> i;
    MsgPack::<span class="pl-c1">str_t</span> key_f {<span class="pl-s"><span class="pl-pds">"</span>f<span class="pl-pds">"</span></span>}; <span class="pl-k">float</span> f;
    <span class="pl-en">MSGPACK_DEFINE_MAP</span>(key_i, i, key_f, f); <span class="pl-c"><span class="pl-c">//</span> -&gt; {"i":i, "f":f}</span>
};

CustomClass c;
MsgPack::Packer packer;
packer.serialize(c);
<span class="pl-c"><span class="pl-c">//</span> -&gt; packer.serialize(map_size_t(2), c.key_i, c.i, c.key_f, c.f)</span>

CustomClass cc;
MsgPack::Unpacker unpacker;
unpacker.feed(packer.data(), packer.size());
unpacker.deserialize(cc);</pre></div>
<h7 dir="auto">
<a id="user-content-custom-class-with-inheritance" class="anchor" aria-hidden="true" href="#custom-class-with-inheritance"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Custom Class with Inheritance</h7>
<p dir="auto">Also you can use <code>MSGPACK_BASE()</code> macro to pack values of base class.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="struct Base {
    int i;
    float f;
    MSGPACK_DEFINE(i, f);
};

struct Derived : public Base {
    MsgPack::str_t s;
    MSGPACK_DEFINE(s, MSGPACK_BASE(Base));
    // -&gt; packer.serialize(arr_size_t(2), s, arr_size_t(2), Base::i, Base::f)
};"><pre><span class="pl-k">struct</span> <span class="pl-en">Base</span> {
    <span class="pl-k">int</span> i;
    <span class="pl-k">float</span> f;
    <span class="pl-en">MSGPACK_DEFINE</span>(i, f);
};

<span class="pl-k">struct</span> <span class="pl-en">Derived</span> : <span class="pl-k">public</span> <span class="pl-en">Base</span> {
    MsgPack::<span class="pl-c1">str_t</span> s;
    <span class="pl-en">MSGPACK_DEFINE</span>(s, MSGPACK_BASE(Base));
    <span class="pl-c"><span class="pl-c">//</span> -&gt; packer.serialize(arr_size_t(2), s, arr_size_t(2), Base::i, Base::f)</span>
};</pre></div>
<p dir="auto">If you wamt to use <code>Map</code> format in derived class, add "key" for your <code>MSGPACK_BASE</code>.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="struct Derived : public Base {
    MsgPack::str_t key_s; MsgPack::str_t s;
    MsgPack::str_t key_b; // key for base class
    MSGPACK_DEFINE_MAP(key_s, s, key_b, MSGPACK_BASE(Base));
    // -&gt; packer.serialize(map_size_t(2), key_s, s, key_b, arr_size_t(2), Base::i, Base::f)
};"><pre><span class="pl-k">struct</span> <span class="pl-en">Derived</span> : <span class="pl-k">public</span> <span class="pl-en">Base</span> {
    MsgPack::<span class="pl-c1">str_t</span> key_s; MsgPack::<span class="pl-c1">str_t</span> s;
    MsgPack::<span class="pl-c1">str_t</span> key_b; <span class="pl-c"><span class="pl-c">//</span> key for base class</span>
    <span class="pl-en">MSGPACK_DEFINE_MAP</span>(key_s, s, key_b, MSGPACK_BASE(Base));
    <span class="pl-c"><span class="pl-c">//</span> -&gt; packer.serialize(map_size_t(2), key_s, s, key_b, arr_size_t(2), Base::i, Base::f)</span>
};</pre></div>
<h7 dir="auto">
<a id="user-content-nested-custom-class" class="anchor" aria-hidden="true" href="#nested-custom-class"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Nested Custom Class</h7>
<p dir="auto">You can nest custom classes to express complex data structure.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='// serialize and deserialize nested structure
// {"i":i, "f":f, "a":["str", {"first":1, "second":"two"}]}

// {"first":1, "second":"two"}
struct MyMap {
    MsgPack::str_t key_first; int i;
    MsgPack::str_t key_second; MsgPack::str_t s;
    MSGPACK_DEFINE_MAP(key_first, i, key_second, s);
};

// ["str", {"first":1, "second":"two"}]
struct MyArr {
    MsgPack::str_t s;
    MyMap m;
    MSGPACK_DEFINE(s, m):
};

// {"i":i, "f":f, "a":["str", {"first":1, "second":"two"}]}
struct MyNestedClass {
    MsgPack::str_t key_i; int i;
    MsgPack::str_t key_f; int f;
    MsgPack::str_t key_a;
    MyArr arr;
    MSGPACK_DEFINE_MAP(key_i, i, key_f, f, key_a, arr);
};'><pre><span class="pl-c"><span class="pl-c">//</span> serialize and deserialize nested structure</span>
<span class="pl-c"><span class="pl-c">//</span> {"i":i, "f":f, "a":["str", {"first":1, "second":"two"}]}</span>

<span class="pl-c"><span class="pl-c">//</span> {"first":1, "second":"two"}</span>
<span class="pl-k">struct</span> <span class="pl-en">MyMap</span> {
    MsgPack::<span class="pl-c1">str_t</span> key_first; <span class="pl-k">int</span> i;
    MsgPack::<span class="pl-c1">str_t</span> key_second; MsgPack::<span class="pl-c1">str_t</span> s;
    <span class="pl-en">MSGPACK_DEFINE_MAP</span>(key_first, i, key_second, s);
};

<span class="pl-c"><span class="pl-c">//</span> ["str", {"first":1, "second":"two"}]</span>
<span class="pl-k">struct</span> <span class="pl-en">MyArr</span> {
    MsgPack::<span class="pl-c1">str_t</span> s;
    MyMap m;
    <span class="pl-en">MSGPACK_DEFINE</span>(s, m):
};

<span class="pl-c"><span class="pl-c">//</span> {"i":i, "f":f, "a":["str", {"first":1, "second":"two"}]}</span>
<span class="pl-k">struct</span> <span class="pl-en">MyNestedClass</span> {
    MsgPack::<span class="pl-c1">str_t</span> key_i; <span class="pl-k">int</span> i;
    MsgPack::<span class="pl-c1">str_t</span> key_f; <span class="pl-k">int</span> f;
    MsgPack::<span class="pl-c1">str_t</span> key_a;
    MyArr arr;
    <span class="pl-en">MSGPACK_DEFINE_MAP</span>(key_i, i, key_f, f, key_a, arr);
};</pre></div>
<p dir="auto">And you can <code>serialize</code> / <code>deserialize</code> as same as other types.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="MyNestedClass c;
MsgPack::Packer packer;
packer.serialize(c);

MyNestedClass cc;
MsgPack::Unpacker unpacker;
unpacker.feed(packer.data(), packer.size());
unpacker.deserialize(cc);"><pre>MyNestedClass c;
MsgPack::Packer packer;
packer.serialize(c);

MyNestedClass cc;
MsgPack::Unpacker unpacker;
unpacker.feed(packer.data(), packer.size());
unpacker.deserialize(cc);</pre></div>
<h6 dir="auto">
<a id="user-content-json-and-other-languages-msgpack-compatibility" class="anchor" aria-hidden="true" href="#json-and-other-languages-msgpack-compatibility"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>JSON and Other language's msgpack compatibility</h6>
<p dir="auto">In other languages like JavaScript, Python and etc. has also library for msgpack.
But some libraries can NOT convert msgpack in "plain" style.
They always wrap them into collections like <code>Array</code> or <code>Map</code> by default.
For example, you can't convert "plain" format in other languages.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='packer.serialize(i, f, s);                // "plain" format is NOT unpackable
packer.serialize(arr_size_t(3), i, f, s); // unpackable if you wrap that into Array'><pre>packer.serialize(i, f, s);                <span class="pl-c"><span class="pl-c">//</span> "plain" format is NOT unpackable</span>
packer.serialize(<span class="pl-c1">arr_size_t</span>(<span class="pl-c1">3</span>), i, f, s); <span class="pl-c"><span class="pl-c">//</span> unpackable if you wrap that into Array</span></pre></div>
<p dir="auto">It is because the msgpack is used as based on JSON (I think).
So you need to use <code>Array</code> format for JSON array, and <code>Map</code> for Json Object.
To achieve that, there are several ways.</p>
<ul dir="auto">
<li>use <code>to_array</code> or <code>to_map</code> to convert to simple structure</li>
<li>use <code>serialize()</code> or <code>deserialize()</code> with <code>arr_size_t</code> / <code>map_size_t</code> for complex structure</li>
<li>use custom class as JSON array / object which is wrapped into <code>Array</code> / <code>Map</code>
</li>
<li>use custom class nest recursively for more complex structure</li>
<li>use <code>ArduinoJson</code> for more flexible handling of JSON</li>
</ul>
<h7 dir="auto">
<a id="user-content-use-msgpack-with-arduinojson" class="anchor" aria-hidden="true" href="#use-msgpack-with-arduinojson"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Use MsgPack with ArduinoJson</h7>
<ul dir="auto">
<li>you can [serialize / deserialize] <code>StaticJsonDocument&lt;N&gt;</code> and <code>DynamicJsonDocument</code> directly</li>
</ul>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="#include &lt;ArduinoJson.h&gt;  // include before MsgPack.h
#include &lt;MsgPack.h&gt;

void setup() {
    StaticJsonDocument&lt;200&gt; doc_in;
    MsgPack::Packer packer;
    packer.serialize(doc_in); // serialize directly

    StaticJsonDocument&lt;200&gt; doc;
    MsgPack::Unpacker unpacker;
    unpacker.feed(packer.data(), packer.size());
    unpacker.deserialize(doc); // deserialize directly
}"><pre>#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>ArduinoJson.h<span class="pl-pds">&gt;</span></span>  <span class="pl-c"><span class="pl-c">//</span> include before MsgPack.h</span>
#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>MsgPack.h<span class="pl-pds">&gt;</span></span>

<span class="pl-k">void</span> <span class="pl-en">setup</span>() {
    StaticJsonDocument&lt;<span class="pl-c1">200</span>&gt; doc_in;
    MsgPack::Packer packer;
    packer.<span class="pl-c1">serialize</span>(doc_in); <span class="pl-c"><span class="pl-c">//</span> serialize directly</span>

    StaticJsonDocument&lt;<span class="pl-c1">200</span>&gt; doc;
    MsgPack::Unpacker unpacker;
    unpacker.<span class="pl-c1">feed</span>(packer.<span class="pl-c1">data</span>(), packer.<span class="pl-c1">size</span>());
    unpacker.<span class="pl-c1">deserialize</span>(doc); <span class="pl-c"><span class="pl-c">//</span> deserialize directly</span>
}</pre></div>
<h6 dir="auto">
<a id="user-content-utilities" class="anchor" aria-hidden="true" href="#utilities"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Utilities</h6>
<h7 dir="auto">
<a id="user-content-saveload-tofrom-json-file-directly-fromto-msgpack" class="anchor" aria-hidden="true" href="#saveload-tofrom-json-file-directly-fromto-msgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Save/Load to/from JSON file directly from/to MsgPack</h7>
<p dir="auto">You can directly save/load to/from JSON file with this library. <code>SD</code>, <code>SdFat</code>, <code>SD_MMC</code>, <code>SPIFFS</code>, etc. are available for the target file system. Please see <code>save_load_as_json_file</code> example for more details.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='#include &lt;SD.h&gt;
#include &lt;MsgPack.h&gt;

struct MyConfig {
    Meta meta;
    Data data;
    MSGPACK_DEFINE(meta, data);
};

MyConfig config;

void setup() {
    SD.begin();

    // load json data from /config.txt to config struct directly
    MsgPack::file::load_from_json_static&lt;256&gt;(SD, "/config.txt", config);

    // change your configuration...

    // save config data from config struct to /config.txt as json directly
    MsgPack::file::save_as_json_static&lt;256&gt;(SD, "/config.txt", config);
}'><pre>#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>SD.h<span class="pl-pds">&gt;</span></span>
#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>MsgPack.h<span class="pl-pds">&gt;</span></span>

<span class="pl-k">struct</span> <span class="pl-en">MyConfig</span> {
    Meta meta;
    Data data;
    <span class="pl-en">MSGPACK_DEFINE</span>(meta, data);
};

MyConfig config;

<span class="pl-k">void</span> <span class="pl-en">setup</span>() {
    SD.<span class="pl-c1">begin</span>();

    <span class="pl-c"><span class="pl-c">//</span> load json data from /config.txt to config struct directly</span>
    MsgPack::file::load_from_json_static&lt;<span class="pl-c1">256</span>&gt;(SD, <span class="pl-s"><span class="pl-pds">"</span>/config.txt<span class="pl-pds">"</span></span>, config);

    <span class="pl-c"><span class="pl-c">//</span> change your configuration...</span>

    <span class="pl-c"><span class="pl-c">//</span> save config data from config struct to /config.txt as json directly</span>
    MsgPack::file::save_as_json_static&lt;<span class="pl-c1">256</span>&gt;(SD, <span class="pl-s"><span class="pl-pds">"</span>/config.txt<span class="pl-pds">"</span></span>, config);
}</pre></div>
<h7 dir="auto">
<a id="user-content-saveload-tofrom-eeprom-with-msgpack" class="anchor" aria-hidden="true" href="#saveload-tofrom-eeprom-with-msgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Save/Load to/from EEPROM with MsgPack</h7>
<p dir="auto">In Arduino, you can use the MsgPack utility to save/load to/from EEPROM. Following code shows how to use them. Please see <code>save_load_eeprom</code> example for more details.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="struct MyConfig {
    Meta meta;
    Data data;
    MSGPACK_DEFINE(meta, data);
};

MyConfig config;

void setup() {
    EEPROM.begin();

    // load current config
    MsgPack::eeprom::load(config);

    // change your configuration...

    // save
    MsgPack::eeprom::save(config);

    EEPROM.end();
}"><pre><span class="pl-k">struct</span> <span class="pl-en">MyConfig</span> {
    Meta meta;
    Data data;
    <span class="pl-en">MSGPACK_DEFINE</span>(meta, data);
};

MyConfig config;

<span class="pl-k">void</span> <span class="pl-en">setup</span>() {
    EEPROM.<span class="pl-c1">begin</span>();

    <span class="pl-c"><span class="pl-c">//</span> load current config</span>
    <span class="pl-c1">MsgPack::eeprom::load</span>(config);

    <span class="pl-c"><span class="pl-c">//</span> change your configuration...</span>

    <span class="pl-c"><span class="pl-c">//</span> save</span>
    <span class="pl-c1">MsgPack::eeprom::save</span>(config);

    EEPROM.<span class="pl-c1">end</span>();
}</pre></div>
<h6 dir="auto">
<a id="user-content-supported-type-adaptors" class="anchor" aria-hidden="true" href="#supported-type-adaptors"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Supported Type Adaptors</h6>
<p dir="auto">These are the lists of types which can be <code>serialize</code> and <code>deserialize</code>.
You can also <code>pack()</code> or <code>unpack()</code> variable one by one.</p>
<h7 dir="auto">
<a id="user-content-nil" class="anchor" aria-hidden="true" href="#nil"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>NIL</h7>
<ul dir="auto">
<li><code>MsgPack::object::nil_t</code></li>
</ul>
<h7 dir="auto">
<a id="user-content-bool" class="anchor" aria-hidden="true" href="#bool"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Bool</h7>
<ul dir="auto">
<li><code>bool</code></li>
</ul>
<h7 dir="auto">
<a id="user-content-integer" class="anchor" aria-hidden="true" href="#integer"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Integer</h7>
<ul dir="auto">
<li><code>char (signed/unsigned)</code></li>
<li><code>ints (signed/unsigned)</code></li>
</ul>
<h7 dir="auto">
<a id="user-content-float" class="anchor" aria-hidden="true" href="#float"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Float</h7>
<ul dir="auto">
<li><code>float</code></li>
<li><code>double</code></li>
</ul>
<h7 dir="auto">
<a id="user-content-str" class="anchor" aria-hidden="true" href="#str"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Str</h7>
<ul dir="auto">
<li><code>char*</code></li>
<li><code>char[]</code></li>
<li>
<code>std::string</code> or <code>String(Arduino)</code> (<code>MsgPack::str_t</code>)</li>
</ul>
<h7 dir="auto">
<a id="user-content-bin" class="anchor" aria-hidden="true" href="#bin"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Bin</h7>
<ul dir="auto">
<li>
<code>unsigned char*</code> (need to <code>serialize(ptr, size)</code> or <code>pack(ptr, size)</code>)</li>
<li>
<code>unsigned char[]</code> (need to <code>serialize(ptr, size)</code> or <code>pack(ptr, size)</code>)</li>
<li>
<code>std::vector&lt;char&gt;</code> (<code>MsgPack::bin_t&lt;char&gt;</code>)</li>
<li>
<code>std::vector&lt;unsigned char&gt;</code> (<code>MsgPack::bin_t&lt;unsigned char&gt;</code>)</li>
<li><code>std::array&lt;char&gt;</code></li>
<li><code>std::array&lt;unsigned char&gt;</code></li>
</ul>
<h7 dir="auto">
<a id="user-content-array" class="anchor" aria-hidden="true" href="#array"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Array</h7>
<ul dir="auto">
<li>
<code>T[]</code> (need to <code>serialize(ptr, size)</code> or <code>pack(ptr, size)</code>)</li>
<li>
<code>std::vector</code> (<code>MsgPack::arr_t&lt;T&gt;</code>)</li>
<li>
<code>std::array</code> (<code>MsgPack::fix_arr_t&lt;T, N&gt;</code>)</li>
<li><code>std::deque</code></li>
<li><code>std::pair</code></li>
<li><code>std::tuple</code></li>
<li><code>std::list</code></li>
<li><code>std::forward_list</code></li>
<li><code>std::set</code></li>
<li><code>std::multiset</code></li>
<li><code>std::unordered_set</code></li>
<li><code>std::unordered_multiset</code></li>
</ul>
<h7 dir="auto">
<a id="user-content-map" class="anchor" aria-hidden="true" href="#map"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Map</h7>
<ul dir="auto">
<li>
<code>std::map</code> (<code>MsgPack::map_t&lt;T&gt;</code>)</li>
<li><code>std::multimap</code></li>
<li><code>std::unordered_map</code></li>
<li><code>std::unordered_multimap</code></li>
</ul>
<h7 dir="auto">
<a id="user-content-ext" class="anchor" aria-hidden="true" href="#ext"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Ext</h7>
<ul dir="auto">
<li><code>MsgPack::object::ext</code></li>
</ul>
<h7 dir="auto">
<a id="user-content-timestamp" class="anchor" aria-hidden="true" href="#timestamp"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>TimeStamp</h7>
<ul dir="auto">
<li><code>MsgPack::object::timespec</code></li>
</ul>
<h7 dir="auto">
<a id="user-content-na" class="anchor" aria-hidden="true" href="#na"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>N/A</h7>
<ul dir="auto">
<li><code>std::queue</code></li>
<li><code>std::priority_queue</code></li>
<li><code>std::bitset</code></li>
<li><code>std::stack</code></li>
</ul>
<h7 dir="auto">
<a id="user-content-note" class="anchor" aria-hidden="true" href="#note"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Note</h7>
<ul dir="auto">
<li>
<code>unordered_xxx</code> cannot be used in all Arduino</li>
<li>C-style array and pointers are supported only packing.</li>
<li>for NO-STL Arduino, following types can be used
<ul dir="auto">
<li>all types of NIL, Bool, Integer, Float, Str, Bin</li>
<li>for Array, only <code>T[]</code>, <code>MsgPack::arr_t&lt;T&gt;</code> (<code>arx::vector&lt;T&gt;</code>), and <code>MsgPack::fix_arr_t&lt;T, N&gt;</code> (<code>arx::array&lt;T, N&gt;</code>) can be used</li>
<li>for Map, only <code>MsgPack::map_t&lt;T, U&gt;</code> (<code>arx::map&lt;T, U&gt;</code>) can be used</li>
<li>for the detail of <code>arx::xxx</code>, see <a href="https://github.com/hideakitai/ArxContainer">ArxContainer</a>
</li>
</ul>
</li>
</ul>
<h7 dir="auto">
<a id="user-content-additional-types-for-msgpack" class="anchor" aria-hidden="true" href="#additional-types-for-msgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Additional Types for MsgPack</h7>
<p dir="auto">There are some additional types are defined to express msgpack formats easily.</p>
<h8 dir="auto">
<a id="user-content-type-aliases-for-str--bin--array--map" class="anchor" aria-hidden="true" href="#type-aliases-for-str--bin--array--map"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Type Aliases for Str / Bin / Array / Map</h8>
<p dir="auto">These types have type aliases like this:</p>
<ul dir="auto">
<li>
<code>MsgPack::str_t</code> = <code>String</code> (Arduino only)</li>
<li>
<code>MsgPack::bin_t&lt;T&gt;</code> = <code>std::vector&lt;T&gt;</code>
</li>
<li>
<code>MsgPack::arr_t&lt;T&gt;</code> = <code>std::vector&lt;T&gt;</code>
</li>
<li>
<code>MsgPack::fix_arr_t&lt;T, N&gt;</code> = <code>std::array&lt;T, N&gt;</code>
</li>
<li>
<code>MsgPack::map_t&lt;T, U&gt;</code> = <code>std::map&lt;T, U&gt;</code>
</li>
</ul>
<p dir="auto">For general C++ apps (not Arduino), <code>str_t</code> is defined as:</p>
<ul dir="auto">
<li>
<code>MsgPack::str_t</code> = <code>std::string</code>
</li>
</ul>
<h8 dir="auto">
<a id="user-content-msgpackobejectnil_t" class="anchor" aria-hidden="true" href="#msgpackobejectnil_t"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MsgPack::obeject::nil_t</h8>
<p dir="auto"><code>MsgPack::object::nil_t</code> is used to <code>pack</code> and <code>unpack</code> Nil type.
This object is just a dummy and do nothing.</p>
<h8 dir="auto">
<a id="user-content-msgpackobejectext" class="anchor" aria-hidden="true" href="#msgpackobejectext"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MsgPack::obeject::ext</h8>
<p dir="auto"><code>MsgPack::object::ext</code> holds binary data of Ext type.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="// create ext type with args: int8_t, const uint8_t*, uint32_t
MsgPack::object::ext e(type, bin_ptr, size);
MsgPack::Packer packer;
packer.serialize(e); // serialize ext type

MsgPack::object::ext r;
msgPack::Unpacker unpacker;
unpacker.feed(packer.data(), packer.size());
unpacker.deserialize(r); // deserialize ext type"><pre><span class="pl-c"><span class="pl-c">//</span> create ext type with args: int8_t, const uint8_t*, uint32_t</span>
MsgPack::object::ext <span class="pl-en">e</span>(type, bin_ptr, size);
MsgPack::Packer packer;
packer.serialize(e); <span class="pl-c"><span class="pl-c">//</span> serialize ext type</span>

MsgPack::object::ext r;
msgPack::Unpacker unpacker;
unpacker.feed(packer.data(), packer.size());
unpacker.deserialize(r); <span class="pl-c"><span class="pl-c">//</span> deserialize ext type</span></pre></div>
<h8 dir="auto">
<a id="user-content-msgpackobejecttimespec" class="anchor" aria-hidden="true" href="#msgpackobejecttimespec"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MsgPack::obeject::timespec</h8>
<p dir="auto"><code>MsgPack::object::timespec</code> is used to <code>pack</code> and <code>unpack</code> Timestamp type.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="MsgPack::object::timespec t = {
    .tv_sec  = 123456789, /* int64_t  */
    .tv_usec = 123456789  /* uint32_t */
};
MsgPack::Packer packer;
packer.serialize(t); // serialize timestamp type

MsgPack::object::timespec r;
msgPack::Unpacker unpacker;
unpacker.feed(packer.data(), packer.size());
unpacker.deserialize(r); // deserialize timestamp type"><pre>MsgPack::object::<span class="pl-c1">timespec</span> t = {
    .<span class="pl-smi">tv_sec</span>  = <span class="pl-c1">123456789</span>, <span class="pl-c"><span class="pl-c">/*</span> int64_t  <span class="pl-c">*/</span></span>
    .<span class="pl-smi">tv_usec</span> = <span class="pl-c1">123456789</span>  <span class="pl-c"><span class="pl-c">/*</span> uint32_t <span class="pl-c">*/</span></span>
};
MsgPack::Packer packer;
packer.serialize(t); <span class="pl-c"><span class="pl-c">//</span> serialize timestamp type</span>

MsgPack::object::<span class="pl-c1">timespec</span> r;
msgPack::Unpacker unpacker;
unpacker.feed(packer.data(), packer.size());
unpacker.deserialize(r); <span class="pl-c"><span class="pl-c">//</span> deserialize timestamp type</span></pre></div>
<h6 dir="auto">
<a id="user-content-other-options" class="anchor" aria-hidden="true" href="#other-options"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Other Options</h6>
<h7 dir="auto">
<a id="user-content-enable-error-info" class="anchor" aria-hidden="true" href="#enable-error-info"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Enable Error Info</h7>
<p dir="auto">Error information report is disabled by default. You can enable it by defining this macro.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="#define MSGPACK_DEBUGLOG_ENABLE"><pre>#<span class="pl-k">define</span> <span class="pl-en">MSGPACK_DEBUGLOG_ENABLE</span></pre></div>
<p dir="auto">Also you can change debug info stream by calling this macro (default: <code>Serial</code>).</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="DEBUG_LOG_ATTACH_STREAM(Serial1);"><pre><span class="pl-en">DEBUG_LOG_ATTACH_STREAM</span>(Serial1);</pre></div>
<p dir="auto">See <a href="https://github.com/hideakitai/DebugLog">DebugLog</a> for details.</p>
<h7 dir="auto">
<a id="user-content-packet-data-storage-class-inside" class="anchor" aria-hidden="true" href="#packet-data-storage-class-inside"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Packet Data Storage Class Inside</h7>
<p dir="auto">STL is used to handle packet data by default, but for following boards/architectures, <a href="https://github.com/hideakitai/ArxContainer">ArxContainer</a> is used to store the packet data because STL can not be used for such boards.
The storage size of such boards for max packet binary size and number of msgpack objects are limited.</p>
<ul dir="auto">
<li>AVR</li>
<li>megaAVR</li>
<li>SAMD</li>
</ul>
<h7 dir="auto">
<a id="user-content-memory-management-for-no-stl-boards" class="anchor" aria-hidden="true" href="#memory-management-for-no-stl-boards"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Memory Management (for NO-STL Boards)</h7>
<p dir="auto">As mentioned above, for such boards like Arduino Uno, the storage sizes are limited.
And of course you can manage them by defining following macros.
But these default values are optimized for such boards, please be careful not to excess your boards storage/memory.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="// msgpack serialized binary size
#define MSGPACK_MAX_PACKET_BYTE_SIZE  128
// max size of MsgPack::arr_t
#define MSGPACK_MAX_ARRAY_SIZE          8
// max size of MsgPack::map_t
#define MSGPACK_MAX_MAP_SIZE            8
// msgpack objects size in one packet
#define MSGPACK_MAX_OBJECT_SIZE        24"><pre><span class="pl-c"><span class="pl-c">//</span> msgpack serialized binary size</span>
#<span class="pl-k">define</span> <span class="pl-en">MSGPACK_MAX_PACKET_BYTE_SIZE</span>  <span class="pl-c1">128</span>
<span class="pl-c"><span class="pl-c">//</span> max size of MsgPack::arr_t</span>
#<span class="pl-k">define</span> <span class="pl-en">MSGPACK_MAX_ARRAY_SIZE</span>          <span class="pl-c1">8</span>
<span class="pl-c"><span class="pl-c">//</span> max size of MsgPack::map_t</span>
#<span class="pl-k">define</span> <span class="pl-en">MSGPACK_MAX_MAP_SIZE</span>            <span class="pl-c1">8</span>
<span class="pl-c"><span class="pl-c">//</span> msgpack objects size in one packet</span>
#<span class="pl-k">define</span> <span class="pl-en">MSGPACK_MAX_OBJECT_SIZE</span>        <span class="pl-c1">24</span></pre></div>
<p dir="auto">These macros have no effect for STL enabled boards.</p>
<p dir="auto">In addtion for such boards, type aliases for following types are different from others.</p>
<ul dir="auto">
<li>
<code>MsgPack::str_t</code> = <code>String</code>
</li>
<li>
<code>MsgPack::bin_t&lt;T&gt;</code> = <code>arx::vector&lt;T, N = MSGPACK_MAX_PACKET_BYTE_SIZE&gt;</code>
</li>
<li>
<code>MsgPack::arr_t&lt;T&gt;</code> = <code>arx::vector&lt;T, N = MSGPACK_MAX_ARRAY_SIZE&gt;</code>
</li>
<li>
<code>MsgPack::map_t&lt;T, U&gt;</code> = <code>arx::map&lt;T, U, N = MSGPACK_MAX_MAP_SIZE&gt;</code>
</li>
</ul>
<p dir="auto">Please see "Memory Management" section and <a href="https://github.com/hideakitai/ArxContainer">ArxContainer</a> for detail.</p>
<h7 dir="auto">
<a id="user-content-stl-library-for-arduino-support" class="anchor" aria-hidden="true" href="#stl-library-for-arduino-support"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>STL library for Arduino Support</h7>
<p dir="auto">For such boards, there are several STL libraries, like <a href="https://github.com/mike-matera/ArduinoSTL">ArduinoSTL</a>, <a href="https://github.com/maniacbug/StandardCplusplus">StandardCPlusPlus</a>, and so on.
But such libraries are mainly based on <a href="https://cxx.uclibc.org/" rel="nofollow">uClibc++</a> and it has many lack of function.
I considered to support them but I won't support them unless uClibc++ becomes much better compatibility to standard C++ library.
I reccomend to use low cost but much better performance chip like ESP series.</p>
<h6 dir="auto">
<a id="user-content-embedded-libraries" class="anchor" aria-hidden="true" href="#embedded-libraries"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Embedded Libraries</h6>
<ul dir="auto">
<li><a href="https://github.com/hideakitai/ArxTypeTraits">ArxTypeTraits v0.2.3</a></li>
<li><a href="https://github.com/hideakitai/ArxContainer">ArxContainer v0.4.0</a></li>
<li><a href="https://github.com/hideakitai/DebugLog">DebugLog v0.6.6</a></li>
<li><a href="https://github.com/hideakitai/TeensyDirtySTLErrorSolution">TeensyDirtySTLErrorSolution v0.1.0</a></li>
</ul>
<h6 dir="auto">
<a id="user-content-used-inside-of" class="anchor" aria-hidden="true" href="#used-inside-of"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Used Inside of</h6>
<ul dir="auto">
<li><a href="https://github.com/hideakitai/MsgPacketizer">MsgPacketizer</a></li>
</ul>
<h6 dir="auto">
<a id="user-content-apis" class="anchor" aria-hidden="true" href="#apis"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>APIs</h6>
<h7 dir="auto">
<a id="user-content-msgpackpacker" class="anchor" aria-hidden="true" href="#msgpackpacker"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MsgPack::Packer</h7>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="// reserve internal buffer
void reserve_buffer(const size_t size);

// variable sized serializer for any type
template &lt;typename First, typename ...Rest&gt;
void serialize(const First&amp; first, Rest&amp;&amp;... rest);
template &lt;typename T&gt;
void serialize(const arr_size_t&amp; arr_size, Args&amp;&amp;... args);
template &lt;typename ...Args&gt;
void serialize(const map_size_t&amp; map_size, Args&amp;&amp;... args);
template &lt;size_t N&gt;
void serialize(const StaticJsonDocument&lt;N&gt;&amp; doc, const size_t num_max_string_type = 32);
void serialize(const DynamicJsonDocument&amp; doc, const size_t num_max_string_type = 32);
void serialize_arduinojson(const JsonDocument&amp; doc, const size_t num_max_string_type = 32);

// variable sized serializer to array or map for any type
template &lt;typename ...Args&gt;
void to_array(Args&amp;&amp;... args);
template &lt;typename ...Args&gt;
void to_map(Args&amp;&amp;... args);

// single arg packer for any type
template &lt;typename T&gt;
void pack&lt;T&gt;(const T&amp; t);
template &lt;typename T&gt;
void pack&lt;T&gt;(const T* ptr, const size_t size); // only for pointer types

// accesor and utility for serialized binary data
const bin_t&lt;uint8_t&gt;&amp; packet() const;
const uint8_t* data() const;
size_t size() const;
size_t indices() const;
void clear();

// abstract serializer for msgpack formats
// serialize() and pack() are wrapper for these methods
void packInteger(const T&amp; value); // accept both uint and int
void packFloat(const T&amp; value);
void packString(const T&amp; str);
void packString(const T&amp; str, const size_t len);
void packBinary(const uint8_t* bin, const size_t size);
void packArraySize(const size_t size);
void packMapSize(const size_t size);
void packFixExt(const int8_t type, const T value);
void packFixExt(const int8_t type, const uint64_t value_h, const uint64_t value_l);
void packFixExt(const int8_t type, const uint8_t* ptr, const uint8_t size);
void packFixExt(const int8_t type, const uint16_t* ptr, const uint8_t size);
void packFixExt(const int8_t type, const uint32_t* ptr, const uint8_t size);
void packFixExt(const int8_t type, const uint64_t* ptr, const uint8_t size);
void packExt(const int8_t type, const T* ptr, const U size);
void packExt(const object::ext&amp; e);
void packTimestamp(const object::timespec&amp; time);

// serializer for detailed msgpack format
// serialize() and pack() are wrapper for these methods
void packNil();
void packNil(const object::nil_t&amp; n);
void packBool(const bool b);
void packUInt7(const uint8_t value);
void packUInt8(const uint8_t value);
void packUInt16(const uint16_t value);
void packUInt32(const uint32_t value);
void packUInt64(const uint64_t value);
void packInt5(const int8_t value);
void packInt8(const int8_t value);
void packInt16(const int16_t value);
void packInt32(const int32_t value);
void packInt64(const int64_t value);
void packFloat32(const float value);
void packFloat64(const double value);
void packString5(const str_t&amp; str);
void packString5(const str_t&amp; str, const size_t len);
void packString5(const char* value);
void packString5(const char* value, const size_t len);
void packString8(const str_t&amp; str);
void packString8(const str_t&amp; str, const size_t len);
void packString8(const char* value);
void packString8(const char* value, const size_t len);
void packString16(const str_t&amp; str);
void packString16(const str_t&amp; str, const size_t len);
void packString16(const char* value);
void packString16(const char* value, const size_t len);
void packString32(const str_t&amp; str);
void packString32(const str_t&amp; str, const size_t len);
void packString32(const char* value);
void packString32(const char* value, const size_t len);
void packString5(const __FlashStringHelper* str);
void packString5(const __FlashStringHelper* str, const size_t len);
void packString8(const __FlashStringHelper* str);
void packString8(const __FlashStringHelper* str, const size_t len);
void packString16(const __FlashStringHelper* str);
void packString16(const __FlashStringHelper* str, const size_t len);
void packString32(const __FlashStringHelper* str);
void packString32(const __FlashStringHelper* str, const size_t len);
void packBinary8(const uint8_t* value, const uint8_t size);
void packBinary16(const uint8_t* value, const uint16_t size);
void packBinary32(const uint8_t* value, const uint32_t size);
void packArraySize4(const uint8_t value);
void packArraySize16(const uint16_t value);
void packArraySize32(const uint32_t value);
void packMapSize4(const uint8_t value);
void packMapSize16(const uint16_t value);
void packMapSize32(const uint32_t value);
void packFixExt1(const int8_t type, const uint8_t value);
void packFixExt2(const int8_t type, const uint16_t value);
void packFixExt2(const int8_t type, const uint8_t* ptr);
void packFixExt2(const int8_t type, const uint16_t* ptr);
void packFixExt4(const int8_t type, const uint32_t value);
void packFixExt4(const int8_t type, const uint8_t* ptr);
void packFixExt4(const int8_t type, const uint32_t* ptr);
void packFixExt8(const int8_t type, const uint64_t value);
void packFixExt8(const int8_t type, const uint8_t* ptr);
void packFixExt8(const int8_t type, const uint64_t* ptr);
void packFixExt16(const int8_t type, const uint64_t value_h, const uint64_t value_l);
void packFixExt16(const int8_t type, const uint8_t* ptr);
void packFixExt16(const int8_t type, const uint64_t* ptr);
void packExtSize8(const int8_t type, const uint8_t size);
void packExtSize16(const int8_t type, const uint16_t size);
void packExtSize32(const int8_t type, const uint32_t size);
void packTimestamp32(const uint32_t unix_time_sec);
void packTimestamp64(const uint64_t unix_time);
void packTimestamp64(const uint64_t unix_time_sec, const uint32_t unix_time_nsec);
void packTimestamp96(const int64_t unix_time_sec, const uint32_t unix_time_nsec);"><pre><span class="pl-c"><span class="pl-c">//</span> reserve internal buffer</span>
<span class="pl-k">void</span> <span class="pl-en">reserve_buffer</span>(<span class="pl-k">const</span> <span class="pl-c1">size_t</span> size);

<span class="pl-c"><span class="pl-c">//</span> variable sized serializer for any type</span>
<span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> First, <span class="pl-k">typename</span> ...Rest&gt;
<span class="pl-k">void</span> <span class="pl-en">serialize</span>(<span class="pl-k">const</span> First&amp; first, Rest&amp;&amp;... rest);
<span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> T&gt;
<span class="pl-k">void</span> <span class="pl-en">serialize</span>(<span class="pl-k">const</span> <span class="pl-c1">arr_size_t</span>&amp; arr_size, Args&amp;&amp;... args);
<span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> ...Args&gt;
<span class="pl-k">void</span> <span class="pl-en">serialize</span>(<span class="pl-k">const</span> <span class="pl-c1">map_size_t</span>&amp; map_size, Args&amp;&amp;... args);
<span class="pl-k">template </span>&lt;<span class="pl-c1">size_t</span> N&gt;
<span class="pl-k">void</span> <span class="pl-en">serialize</span>(<span class="pl-k">const</span> StaticJsonDocument&lt;N&gt;&amp; doc, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> num_max_string_type = <span class="pl-c1">32</span>);
<span class="pl-k">void</span> <span class="pl-en">serialize</span>(<span class="pl-k">const</span> DynamicJsonDocument&amp; doc, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> num_max_string_type = <span class="pl-c1">32</span>);
<span class="pl-k">void</span> <span class="pl-en">serialize_arduinojson</span>(<span class="pl-k">const</span> JsonDocument&amp; doc, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> num_max_string_type = <span class="pl-c1">32</span>);

<span class="pl-c"><span class="pl-c">//</span> variable sized serializer to array or map for any type</span>
<span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> ...Args&gt;
<span class="pl-k">void</span> <span class="pl-en">to_array</span>(Args&amp;&amp;... args);
<span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> ...Args&gt;
<span class="pl-k">void</span> <span class="pl-en">to_map</span>(Args&amp;&amp;... args);

<span class="pl-c"><span class="pl-c">//</span> single arg packer for any type</span>
<span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> T&gt;
<span class="pl-k">void</span> pack&lt;T&gt;(<span class="pl-k">const</span> T&amp; t);
<span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> T&gt;
<span class="pl-k">void</span> pack&lt;T&gt;(<span class="pl-k">const</span> T* ptr, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> size); <span class="pl-c"><span class="pl-c">//</span> only for pointer types</span>

<span class="pl-c"><span class="pl-c">//</span> accesor and utility for serialized binary data</span>
<span class="pl-k">const</span> <span class="pl-c1">bin_t</span>&lt;<span class="pl-c1">uint8_t</span>&gt;&amp; <span class="pl-en">packet</span>() <span class="pl-k">const</span>;
<span class="pl-k">const</span> <span class="pl-c1">uint8_t</span>* <span class="pl-en">data</span>() <span class="pl-k">const</span>;
<span class="pl-c1">size_t</span> <span class="pl-en">size</span>() <span class="pl-k">const</span>;
<span class="pl-c1">size_t</span> <span class="pl-en">indices</span>() <span class="pl-k">const</span>;
<span class="pl-k">void</span> <span class="pl-en">clear</span>();

<span class="pl-c"><span class="pl-c">//</span> abstract serializer for msgpack formats</span>
<span class="pl-c"><span class="pl-c">//</span> serialize() and pack() are wrapper for these methods</span>
<span class="pl-k">void</span> <span class="pl-en">packInteger</span>(<span class="pl-k">const</span> T&amp; value); <span class="pl-c"><span class="pl-c">//</span> accept both uint and int</span>
<span class="pl-k">void</span> <span class="pl-en">packFloat</span>(<span class="pl-k">const</span> T&amp; value);
<span class="pl-k">void</span> <span class="pl-en">packString</span>(<span class="pl-k">const</span> T&amp; str);
<span class="pl-k">void</span> <span class="pl-en">packString</span>(<span class="pl-k">const</span> T&amp; str, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> len);
<span class="pl-k">void</span> <span class="pl-en">packBinary</span>(<span class="pl-k">const</span> <span class="pl-c1">uint8_t</span>* bin, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> size);
<span class="pl-k">void</span> <span class="pl-en">packArraySize</span>(<span class="pl-k">const</span> <span class="pl-c1">size_t</span> size);
<span class="pl-k">void</span> <span class="pl-en">packMapSize</span>(<span class="pl-k">const</span> <span class="pl-c1">size_t</span> size);
<span class="pl-k">void</span> <span class="pl-en">packFixExt</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> T value);
<span class="pl-k">void</span> <span class="pl-en">packFixExt</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint64_t</span> value_h, <span class="pl-k">const</span> <span class="pl-c1">uint64_t</span> value_l);
<span class="pl-k">void</span> <span class="pl-en">packFixExt</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint8_t</span>* ptr, <span class="pl-k">const</span> <span class="pl-c1">uint8_t</span> size);
<span class="pl-k">void</span> <span class="pl-en">packFixExt</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint16_t</span>* ptr, <span class="pl-k">const</span> <span class="pl-c1">uint8_t</span> size);
<span class="pl-k">void</span> <span class="pl-en">packFixExt</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint32_t</span>* ptr, <span class="pl-k">const</span> <span class="pl-c1">uint8_t</span> size);
<span class="pl-k">void</span> <span class="pl-en">packFixExt</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint64_t</span>* ptr, <span class="pl-k">const</span> <span class="pl-c1">uint8_t</span> size);
<span class="pl-k">void</span> <span class="pl-en">packExt</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> T* ptr, <span class="pl-k">const</span> U size);
<span class="pl-k">void</span> <span class="pl-en">packExt</span>(<span class="pl-k">const</span> object::ext&amp; e);
<span class="pl-k">void</span> <span class="pl-en">packTimestamp</span>(<span class="pl-k">const</span> object::<span class="pl-c1">timespec</span>&amp; time);

<span class="pl-c"><span class="pl-c">//</span> serializer for detailed msgpack format</span>
<span class="pl-c"><span class="pl-c">//</span> serialize() and pack() are wrapper for these methods</span>
<span class="pl-k">void</span> <span class="pl-en">packNil</span>();
<span class="pl-k">void</span> <span class="pl-en">packNil</span>(<span class="pl-k">const</span> object::<span class="pl-c1">nil_t</span>&amp; n);
<span class="pl-k">void</span> <span class="pl-en">packBool</span>(<span class="pl-k">const</span> <span class="pl-k">bool</span> b);
<span class="pl-k">void</span> <span class="pl-en">packUInt7</span>(<span class="pl-k">const</span> <span class="pl-c1">uint8_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packUInt8</span>(<span class="pl-k">const</span> <span class="pl-c1">uint8_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packUInt16</span>(<span class="pl-k">const</span> <span class="pl-c1">uint16_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packUInt32</span>(<span class="pl-k">const</span> <span class="pl-c1">uint32_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packUInt64</span>(<span class="pl-k">const</span> <span class="pl-c1">uint64_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packInt5</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packInt8</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packInt16</span>(<span class="pl-k">const</span> <span class="pl-c1">int16_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packInt32</span>(<span class="pl-k">const</span> <span class="pl-c1">int32_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packInt64</span>(<span class="pl-k">const</span> <span class="pl-c1">int64_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packFloat32</span>(<span class="pl-k">const</span> <span class="pl-k">float</span> value);
<span class="pl-k">void</span> <span class="pl-en">packFloat64</span>(<span class="pl-k">const</span> <span class="pl-k">double</span> value);
<span class="pl-k">void</span> <span class="pl-en">packString5</span>(<span class="pl-k">const</span> <span class="pl-c1">str_t</span>&amp; str);
<span class="pl-k">void</span> <span class="pl-en">packString5</span>(<span class="pl-k">const</span> <span class="pl-c1">str_t</span>&amp; str, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> len);
<span class="pl-k">void</span> <span class="pl-en">packString5</span>(<span class="pl-k">const</span> <span class="pl-k">char</span>* value);
<span class="pl-k">void</span> <span class="pl-en">packString5</span>(<span class="pl-k">const</span> <span class="pl-k">char</span>* value, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> len);
<span class="pl-k">void</span> <span class="pl-en">packString8</span>(<span class="pl-k">const</span> <span class="pl-c1">str_t</span>&amp; str);
<span class="pl-k">void</span> <span class="pl-en">packString8</span>(<span class="pl-k">const</span> <span class="pl-c1">str_t</span>&amp; str, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> len);
<span class="pl-k">void</span> <span class="pl-en">packString8</span>(<span class="pl-k">const</span> <span class="pl-k">char</span>* value);
<span class="pl-k">void</span> <span class="pl-en">packString8</span>(<span class="pl-k">const</span> <span class="pl-k">char</span>* value, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> len);
<span class="pl-k">void</span> <span class="pl-en">packString16</span>(<span class="pl-k">const</span> <span class="pl-c1">str_t</span>&amp; str);
<span class="pl-k">void</span> <span class="pl-en">packString16</span>(<span class="pl-k">const</span> <span class="pl-c1">str_t</span>&amp; str, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> len);
<span class="pl-k">void</span> <span class="pl-en">packString16</span>(<span class="pl-k">const</span> <span class="pl-k">char</span>* value);
<span class="pl-k">void</span> <span class="pl-en">packString16</span>(<span class="pl-k">const</span> <span class="pl-k">char</span>* value, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> len);
<span class="pl-k">void</span> <span class="pl-en">packString32</span>(<span class="pl-k">const</span> <span class="pl-c1">str_t</span>&amp; str);
<span class="pl-k">void</span> <span class="pl-en">packString32</span>(<span class="pl-k">const</span> <span class="pl-c1">str_t</span>&amp; str, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> len);
<span class="pl-k">void</span> <span class="pl-en">packString32</span>(<span class="pl-k">const</span> <span class="pl-k">char</span>* value);
<span class="pl-k">void</span> <span class="pl-en">packString32</span>(<span class="pl-k">const</span> <span class="pl-k">char</span>* value, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> len);
<span class="pl-k">void</span> <span class="pl-en">packString5</span>(<span class="pl-k">const</span> __FlashStringHelper* str);
<span class="pl-k">void</span> <span class="pl-en">packString5</span>(<span class="pl-k">const</span> __FlashStringHelper* str, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> len);
<span class="pl-k">void</span> <span class="pl-en">packString8</span>(<span class="pl-k">const</span> __FlashStringHelper* str);
<span class="pl-k">void</span> <span class="pl-en">packString8</span>(<span class="pl-k">const</span> __FlashStringHelper* str, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> len);
<span class="pl-k">void</span> <span class="pl-en">packString16</span>(<span class="pl-k">const</span> __FlashStringHelper* str);
<span class="pl-k">void</span> <span class="pl-en">packString16</span>(<span class="pl-k">const</span> __FlashStringHelper* str, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> len);
<span class="pl-k">void</span> <span class="pl-en">packString32</span>(<span class="pl-k">const</span> __FlashStringHelper* str);
<span class="pl-k">void</span> <span class="pl-en">packString32</span>(<span class="pl-k">const</span> __FlashStringHelper* str, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> len);
<span class="pl-k">void</span> <span class="pl-en">packBinary8</span>(<span class="pl-k">const</span> <span class="pl-c1">uint8_t</span>* value, <span class="pl-k">const</span> <span class="pl-c1">uint8_t</span> size);
<span class="pl-k">void</span> <span class="pl-en">packBinary16</span>(<span class="pl-k">const</span> <span class="pl-c1">uint8_t</span>* value, <span class="pl-k">const</span> <span class="pl-c1">uint16_t</span> size);
<span class="pl-k">void</span> <span class="pl-en">packBinary32</span>(<span class="pl-k">const</span> <span class="pl-c1">uint8_t</span>* value, <span class="pl-k">const</span> <span class="pl-c1">uint32_t</span> size);
<span class="pl-k">void</span> <span class="pl-en">packArraySize4</span>(<span class="pl-k">const</span> <span class="pl-c1">uint8_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packArraySize16</span>(<span class="pl-k">const</span> <span class="pl-c1">uint16_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packArraySize32</span>(<span class="pl-k">const</span> <span class="pl-c1">uint32_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packMapSize4</span>(<span class="pl-k">const</span> <span class="pl-c1">uint8_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packMapSize16</span>(<span class="pl-k">const</span> <span class="pl-c1">uint16_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packMapSize32</span>(<span class="pl-k">const</span> <span class="pl-c1">uint32_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packFixExt1</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint8_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packFixExt2</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint16_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packFixExt2</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint8_t</span>* ptr);
<span class="pl-k">void</span> <span class="pl-en">packFixExt2</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint16_t</span>* ptr);
<span class="pl-k">void</span> <span class="pl-en">packFixExt4</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint32_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packFixExt4</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint8_t</span>* ptr);
<span class="pl-k">void</span> <span class="pl-en">packFixExt4</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint32_t</span>* ptr);
<span class="pl-k">void</span> <span class="pl-en">packFixExt8</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint64_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packFixExt8</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint8_t</span>* ptr);
<span class="pl-k">void</span> <span class="pl-en">packFixExt8</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint64_t</span>* ptr);
<span class="pl-k">void</span> <span class="pl-en">packFixExt16</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint64_t</span> value_h, <span class="pl-k">const</span> <span class="pl-c1">uint64_t</span> value_l);
<span class="pl-k">void</span> <span class="pl-en">packFixExt16</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint8_t</span>* ptr);
<span class="pl-k">void</span> <span class="pl-en">packFixExt16</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint64_t</span>* ptr);
<span class="pl-k">void</span> <span class="pl-en">packExtSize8</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint8_t</span> size);
<span class="pl-k">void</span> <span class="pl-en">packExtSize16</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint16_t</span> size);
<span class="pl-k">void</span> <span class="pl-en">packExtSize32</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint32_t</span> size);
<span class="pl-k">void</span> <span class="pl-en">packTimestamp32</span>(<span class="pl-k">const</span> <span class="pl-c1">uint32_t</span> unix_time_sec);
<span class="pl-k">void</span> <span class="pl-en">packTimestamp64</span>(<span class="pl-k">const</span> <span class="pl-c1">uint64_t</span> unix_time);
<span class="pl-k">void</span> <span class="pl-en">packTimestamp64</span>(<span class="pl-k">const</span> <span class="pl-c1">uint64_t</span> unix_time_sec, <span class="pl-k">const</span> <span class="pl-c1">uint32_t</span> unix_time_nsec);
<span class="pl-k">void</span> <span class="pl-en">packTimestamp96</span>(<span class="pl-k">const</span> <span class="pl-c1">int64_t</span> unix_time_sec, <span class="pl-k">const</span> <span class="pl-c1">uint32_t</span> unix_time_nsec);</pre></div>
<h7 dir="auto">
<a id="user-content-msgpackunpacker" class="anchor" aria-hidden="true" href="#msgpackunpacker"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MsgPack::Unpacker</h7>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="// reserve internal buffer for indices
void reserve_indices(const size_t size);

// feed data to deserialize
bool feed(const uint8_t* data, size_t size);

// variable sized deserializer
template &lt;typename First, typename ...Rest&gt;
bool deserialize(First&amp; first, Rest&amp;&amp;... rest);
template &lt;size_t N&gt;
bool deserialize(StaticJsonDocument&lt;N&gt;&amp; doc);
bool deserialize(DynamicJsonDocument&amp; doc);

// varibale sized desrializer for array and map
template &lt;typename ...Args&gt;
bool from_array(Args&amp;&amp;... args);
template &lt;typename ...Args&gt;
bool from_map(Args&amp;&amp;... args);

// single arg deserializer
template &lt;typename T&gt;
bool unpack(T&amp; value);

// check if next arg can be deserialized to value
template &lt;typename T&gt;
bool unpackable(const T&amp; value) const;

// accesor and utility for deserialized msgpack data
bool decode_ready() const;
bool decoded() const;
size_t size() const;
void index(const size_t i);
size_t index() const;
void clear();

// abstract deserializer for msgpack formats
// deserialize() and unpack() are wrapper for these methods
T unpackUInt();
T unpackInt();
T unpackFloat();
str_t unpackString();
bin_t&lt;T&gt; unpackBinary();
bin_t&lt;T&gt; unpackBinary();
size_t unpackArraySize();
size_t unpackMapSize();
object::ext unpackExt();
object::timespec unpackTimestamp();

// deserializer for detailed msgpack format
// these methods check deserialize index overflow and type mismatch
// deserialize() and unpack() are wrapper for these methods
bool unpackNil();
bool unpackBool();
uint8_t unpackUInt7();
uint8_t unpackUInt8();
uint16_t unpackUInt16();
uint32_t unpackUInt32();
uint64_t unpackUInt64();
int8_t unpackInt5();
int8_t unpackInt8();
int16_t unpackInt16();
int32_t unpackInt32();
int64_t unpackInt64();
float unpackFloat32();
double unpackFloat64();
str_t unpackString5();
str_t unpackString8();
str_t unpackString16();
str_t unpackString32();
bin_t&lt;T&gt; unpackBinary8();
bin_t&lt;T&gt; unpackBinary16();
bin_t&lt;T&gt; unpackBinary32();
std::array&lt;T, N&gt; unpackBinary8();
std::array&lt;T, N&gt; unpackBinary16();
std::array&lt;T, N&gt; unpackBinary32();
size_t unpackArraySize4();
size_t unpackArraySize16();
size_t unpackArraySize32();
size_t unpackMapSize4();
size_t unpackMapSize16();
size_t unpackMapSize32();
object::ext unpackFixExt1();
object::ext unpackFixExt2();
object::ext unpackFixExt4();
object::ext unpackFixExt8();
object::ext unpackFixExt16();
object::ext unpackExt8();
object::ext unpackExt16();
object::ext unpackExt32();
object::timespec unpackTimestamp32();
object::timespec unpackTimestamp64();
object::timespec unpackTimestamp96();

// deserializer for detailed msgpack format
// these methods does NOT check index overflow and type mismatch
bool unpackNilUnchecked();
bool unpackBoolUnchecked();
uint8_t unpackUIntUnchecked7();
uint8_t unpackUIntUnchecked8();
uint16_t unpackUIntUnchecked16();
uint32_t unpackUIntUnchecked32();
uint64_t unpackUIntUnchecked64();
int8_t unpackIntUnchecked5();
int8_t unpackIntUnchecked8();
int16_t unpackIntUnchecked16();
int32_t unpackIntUnchecked32();
int64_t unpackIntUnchecked64();
float unpackFloatUnchecked32();
double unpackFloatUnchecked64();
str_t unpackStringUnchecked5();
str_t unpackStringUnchecked8();
str_t unpackStringUnchecked16();
str_t unpackStringUnchecked32();
bin_t&lt;T&gt; unpackBinaryUnchecked8();
bin_t&lt;T&gt; unpackBinaryUnchecked16();
bin_t&lt;T&gt; unpackBinaryUnchecked32();
std::array&lt;T, N&gt; unpackBinaryUnchecked8();
std::array&lt;T, N&gt; unpackBinaryUnchecked16();
std::array&lt;T, N&gt; unpackBinaryUnchecked32();
size_t unpackArraySizeUnchecked4();
size_t unpackArraySizeUnchecked16();
size_t unpackArraySizeUnchecked32();
size_t unpackMapSizeUnchecked4();
size_t unpackMapSizeUnchecked16();
size_t unpackMapSizeUnchecked32();
object::ext unpackFixExtUnchecked1();
object::ext unpackFixExtUnchecked2();
object::ext unpackFixExtUnchecked4();
object::ext unpackFixExtUnchecked8();
object::ext unpackFixExtUnchecked16();
object::ext unpackExtUnchecked8();
object::ext unpackExtUnchecked16();
object::ext unpackExtUnchecked32();
object::timespec unpackTimestampUnchecked32();
object::timespec unpackTimestampUnchecked64();
object::timespec unpackTimestampUnchecked96();

// checks types of next msgpack object
bool isNil() const;
bool isBool() const;
bool isUInt7() const;
bool isUInt8() const;
bool isUInt16() const;
bool isUInt32() const;
bool isUInt64() const;
bool isUInt() const;
bool isInt5() const;
bool isInt8() const;
bool isInt16() const;
bool isInt32() const;
bool isInt64() const;
bool isInt() const;
bool isFloat32() const;
bool isFloat64() const;
bool isFloat() const;
bool isStr5() const;
bool isStr8() const;
bool isStr16() const;
bool isStr32() const;
bool isStr() const;
bool isBin8() const;
bool isBin16() const;
bool isBin32() const;
bool isBin() const;
bool isArray4() const;
bool isArray16() const;
bool isArray32() const;
bool isArray() const;
bool isMap4() const;
bool isMap16() const;
bool isMap32() const;
bool isMap() const;
bool isFixExt1() const;
bool isFixExt2() const;
bool isFixExt4() const;
bool isFixExt8() const;
bool isFixExt16() const;
bool isFixExt() const;
bool isExt8() const;
bool isExt16() const;
bool isExt32() const;
bool isExt() const;
bool isTimestamp32() const;
bool isTimestamp64() const;
bool isTimestamp96() const;
bool isTimestamp() const;
MsgPack::Type getType() const"><pre><span class="pl-c"><span class="pl-c">//</span> reserve internal buffer for indices</span>
<span class="pl-k">void</span> <span class="pl-en">reserve_indices</span>(<span class="pl-k">const</span> <span class="pl-c1">size_t</span> size);

<span class="pl-c"><span class="pl-c">//</span> feed data to deserialize</span>
<span class="pl-k">bool</span> <span class="pl-en">feed</span>(<span class="pl-k">const</span> <span class="pl-c1">uint8_t</span>* data, <span class="pl-c1">size_t</span> size);

<span class="pl-c"><span class="pl-c">//</span> variable sized deserializer</span>
<span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> First, <span class="pl-k">typename</span> ...Rest&gt;
<span class="pl-k">bool</span> <span class="pl-en">deserialize</span>(First&amp; first, Rest&amp;&amp;... rest);
<span class="pl-k">template </span>&lt;<span class="pl-c1">size_t</span> N&gt;
<span class="pl-k">bool</span> <span class="pl-en">deserialize</span>(StaticJsonDocument&lt;N&gt;&amp; doc);
<span class="pl-k">bool</span> <span class="pl-en">deserialize</span>(DynamicJsonDocument&amp; doc);

<span class="pl-c"><span class="pl-c">//</span> varibale sized desrializer for array and map</span>
<span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> ...Args&gt;
<span class="pl-k">bool</span> <span class="pl-en">from_array</span>(Args&amp;&amp;... args);
<span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> ...Args&gt;
<span class="pl-k">bool</span> <span class="pl-en">from_map</span>(Args&amp;&amp;... args);

<span class="pl-c"><span class="pl-c">//</span> single arg deserializer</span>
<span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> T&gt;
<span class="pl-k">bool</span> <span class="pl-en">unpack</span>(T&amp; value);

<span class="pl-c"><span class="pl-c">//</span> check if next arg can be deserialized to value</span>
<span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> T&gt;
<span class="pl-k">bool</span> <span class="pl-en">unpackable</span>(<span class="pl-k">const</span> T&amp; value) <span class="pl-k">const</span>;

<span class="pl-c"><span class="pl-c">//</span> accesor and utility for deserialized msgpack data</span>
<span class="pl-k">bool</span> <span class="pl-en">decode_ready</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">decoded</span>() <span class="pl-k">const</span>;
<span class="pl-c1">size_t</span> <span class="pl-en">size</span>() <span class="pl-k">const</span>;
<span class="pl-k">void</span> <span class="pl-en">index</span>(<span class="pl-k">const</span> <span class="pl-c1">size_t</span> i);
<span class="pl-c1">size_t</span> <span class="pl-en">index</span>() <span class="pl-k">const</span>;
<span class="pl-k">void</span> <span class="pl-en">clear</span>();

<span class="pl-c"><span class="pl-c">//</span> abstract deserializer for msgpack formats</span>
<span class="pl-c"><span class="pl-c">//</span> deserialize() and unpack() are wrapper for these methods</span>
T <span class="pl-en">unpackUInt</span>();
T <span class="pl-en">unpackInt</span>();
T <span class="pl-en">unpackFloat</span>();
<span class="pl-c1">str_t</span> <span class="pl-en">unpackString</span>();
<span class="pl-c1">bin_t</span>&lt;T&gt; <span class="pl-en">unpackBinary</span>();
<span class="pl-c1">bin_t</span>&lt;T&gt; <span class="pl-en">unpackBinary</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackArraySize</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackMapSize</span>();
object::ext <span class="pl-en">unpackExt</span>();
object::<span class="pl-c1">timespec</span> <span class="pl-en">unpackTimestamp</span>();

<span class="pl-c"><span class="pl-c">//</span> deserializer for detailed msgpack format</span>
<span class="pl-c"><span class="pl-c">//</span> these methods check deserialize index overflow and type mismatch</span>
<span class="pl-c"><span class="pl-c">//</span> deserialize() and unpack() are wrapper for these methods</span>
<span class="pl-k">bool</span> <span class="pl-en">unpackNil</span>();
<span class="pl-k">bool</span> <span class="pl-en">unpackBool</span>();
<span class="pl-c1">uint8_t</span> <span class="pl-en">unpackUInt7</span>();
<span class="pl-c1">uint8_t</span> <span class="pl-en">unpackUInt8</span>();
<span class="pl-c1">uint16_t</span> <span class="pl-en">unpackUInt16</span>();
<span class="pl-c1">uint32_t</span> <span class="pl-en">unpackUInt32</span>();
<span class="pl-c1">uint64_t</span> <span class="pl-en">unpackUInt64</span>();
<span class="pl-c1">int8_t</span> <span class="pl-en">unpackInt5</span>();
<span class="pl-c1">int8_t</span> <span class="pl-en">unpackInt8</span>();
<span class="pl-c1">int16_t</span> <span class="pl-en">unpackInt16</span>();
<span class="pl-c1">int32_t</span> <span class="pl-en">unpackInt32</span>();
<span class="pl-c1">int64_t</span> <span class="pl-en">unpackInt64</span>();
<span class="pl-k">float</span> <span class="pl-en">unpackFloat32</span>();
<span class="pl-k">double</span> <span class="pl-en">unpackFloat64</span>();
<span class="pl-c1">str_t</span> <span class="pl-en">unpackString5</span>();
<span class="pl-c1">str_t</span> <span class="pl-en">unpackString8</span>();
<span class="pl-c1">str_t</span> <span class="pl-en">unpackString16</span>();
<span class="pl-c1">str_t</span> <span class="pl-en">unpackString32</span>();
<span class="pl-c1">bin_t</span>&lt;T&gt; <span class="pl-en">unpackBinary8</span>();
<span class="pl-c1">bin_t</span>&lt;T&gt; <span class="pl-en">unpackBinary16</span>();
<span class="pl-c1">bin_t</span>&lt;T&gt; <span class="pl-en">unpackBinary32</span>();
std::array&lt;T, N&gt; <span class="pl-en">unpackBinary8</span>();
std::array&lt;T, N&gt; <span class="pl-en">unpackBinary16</span>();
std::array&lt;T, N&gt; <span class="pl-en">unpackBinary32</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackArraySize4</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackArraySize16</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackArraySize32</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackMapSize4</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackMapSize16</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackMapSize32</span>();
object::ext <span class="pl-en">unpackFixExt1</span>();
object::ext <span class="pl-en">unpackFixExt2</span>();
object::ext <span class="pl-en">unpackFixExt4</span>();
object::ext <span class="pl-en">unpackFixExt8</span>();
object::ext <span class="pl-en">unpackFixExt16</span>();
object::ext <span class="pl-en">unpackExt8</span>();
object::ext <span class="pl-en">unpackExt16</span>();
object::ext <span class="pl-en">unpackExt32</span>();
object::<span class="pl-c1">timespec</span> <span class="pl-en">unpackTimestamp32</span>();
object::<span class="pl-c1">timespec</span> <span class="pl-en">unpackTimestamp64</span>();
object::<span class="pl-c1">timespec</span> <span class="pl-en">unpackTimestamp96</span>();

<span class="pl-c"><span class="pl-c">//</span> deserializer for detailed msgpack format</span>
<span class="pl-c"><span class="pl-c">//</span> these methods does NOT check index overflow and type mismatch</span>
<span class="pl-k">bool</span> <span class="pl-en">unpackNilUnchecked</span>();
<span class="pl-k">bool</span> <span class="pl-en">unpackBoolUnchecked</span>();
<span class="pl-c1">uint8_t</span> <span class="pl-en">unpackUIntUnchecked7</span>();
<span class="pl-c1">uint8_t</span> <span class="pl-en">unpackUIntUnchecked8</span>();
<span class="pl-c1">uint16_t</span> <span class="pl-en">unpackUIntUnchecked16</span>();
<span class="pl-c1">uint32_t</span> <span class="pl-en">unpackUIntUnchecked32</span>();
<span class="pl-c1">uint64_t</span> <span class="pl-en">unpackUIntUnchecked64</span>();
<span class="pl-c1">int8_t</span> <span class="pl-en">unpackIntUnchecked5</span>();
<span class="pl-c1">int8_t</span> <span class="pl-en">unpackIntUnchecked8</span>();
<span class="pl-c1">int16_t</span> <span class="pl-en">unpackIntUnchecked16</span>();
<span class="pl-c1">int32_t</span> <span class="pl-en">unpackIntUnchecked32</span>();
<span class="pl-c1">int64_t</span> <span class="pl-en">unpackIntUnchecked64</span>();
<span class="pl-k">float</span> <span class="pl-en">unpackFloatUnchecked32</span>();
<span class="pl-k">double</span> <span class="pl-en">unpackFloatUnchecked64</span>();
<span class="pl-c1">str_t</span> <span class="pl-en">unpackStringUnchecked5</span>();
<span class="pl-c1">str_t</span> <span class="pl-en">unpackStringUnchecked8</span>();
<span class="pl-c1">str_t</span> <span class="pl-en">unpackStringUnchecked16</span>();
<span class="pl-c1">str_t</span> <span class="pl-en">unpackStringUnchecked32</span>();
<span class="pl-c1">bin_t</span>&lt;T&gt; <span class="pl-en">unpackBinaryUnchecked8</span>();
<span class="pl-c1">bin_t</span>&lt;T&gt; <span class="pl-en">unpackBinaryUnchecked16</span>();
<span class="pl-c1">bin_t</span>&lt;T&gt; <span class="pl-en">unpackBinaryUnchecked32</span>();
std::array&lt;T, N&gt; <span class="pl-en">unpackBinaryUnchecked8</span>();
std::array&lt;T, N&gt; <span class="pl-en">unpackBinaryUnchecked16</span>();
std::array&lt;T, N&gt; <span class="pl-en">unpackBinaryUnchecked32</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackArraySizeUnchecked4</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackArraySizeUnchecked16</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackArraySizeUnchecked32</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackMapSizeUnchecked4</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackMapSizeUnchecked16</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackMapSizeUnchecked32</span>();
object::ext <span class="pl-en">unpackFixExtUnchecked1</span>();
object::ext <span class="pl-en">unpackFixExtUnchecked2</span>();
object::ext <span class="pl-en">unpackFixExtUnchecked4</span>();
object::ext <span class="pl-en">unpackFixExtUnchecked8</span>();
object::ext <span class="pl-en">unpackFixExtUnchecked16</span>();
object::ext <span class="pl-en">unpackExtUnchecked8</span>();
object::ext <span class="pl-en">unpackExtUnchecked16</span>();
object::ext <span class="pl-en">unpackExtUnchecked32</span>();
object::<span class="pl-c1">timespec</span> <span class="pl-en">unpackTimestampUnchecked32</span>();
object::<span class="pl-c1">timespec</span> <span class="pl-en">unpackTimestampUnchecked64</span>();
object::<span class="pl-c1">timespec</span> <span class="pl-en">unpackTimestampUnchecked96</span>();

<span class="pl-c"><span class="pl-c">//</span> checks types of next msgpack object</span>
<span class="pl-k">bool</span> <span class="pl-en">isNil</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isBool</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isUInt7</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isUInt8</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isUInt16</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isUInt32</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isUInt64</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isUInt</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isInt5</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isInt8</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isInt16</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isInt32</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isInt64</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isInt</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isFloat32</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isFloat64</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isFloat</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isStr5</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isStr8</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isStr16</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isStr32</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isStr</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isBin8</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isBin16</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isBin32</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isBin</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isArray4</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isArray16</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isArray32</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isArray</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isMap4</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isMap16</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isMap32</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isMap</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isFixExt1</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isFixExt2</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isFixExt4</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isFixExt8</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isFixExt16</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isFixExt</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isExt8</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isExt16</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isExt32</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isExt</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isTimestamp32</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isTimestamp64</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isTimestamp96</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isTimestamp</span>() <span class="pl-k">const</span>;
MsgPack::Type <span class="pl-en">getType</span>() <span class="pl-k">const</span></pre></div>
<h7 dir="auto">
<a id="user-content-msgpack-utilities" class="anchor" aria-hidden="true" href="#msgpack-utilities"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MsgPack Utilities</h7>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="template &lt;typename T&gt;
inline size_t estimate_size(const T&amp; msg);

namespace file {
    template &lt;typename FsType, typename T&gt;
    inline bool save_as_json(FsType&amp; fs, const String&amp; path, const T&amp; value, JsonDocument&amp; doc);
    template &lt;size_t N, typename FsType, typename T&gt;
    inline bool save_as_json_static(FsType&amp; fs, const String&amp; path, const T&amp; value);
    template &lt;typename FsType, typename T&gt;
    inline bool save_as_json_dynamic(FsType&amp; fs, const String&amp; path, const T&amp; value, const size_t json_size = 512);

    template &lt;typename FsType, typename T&gt;
    inline bool load_from_json(FsType&amp; fs, const String&amp; path, T&amp; value, JsonDocument&amp; doc, const size_t num_max_string_type = 32);
    template &lt;size_t N, typename FsType, typename T&gt;
    inline bool load_from_json_static(FsType&amp; fs, const String&amp; path, T&amp; value);
    template &lt;typename FsType, typename T&gt;
    inline bool load_from_json_dynamic(FsType&amp; fs, const String&amp; path, T&amp; value, const size_t json_size = 512);
}

namespace eeprom {
    template &lt;typename T&gt;
    inline bool save(const T&amp; value, const size_t index_offset = 0);
    template &lt;typename T&gt;
    inline bool load(T&amp; value, const size_t index_offset = 0);
    template &lt;typename T&gt;
    inline void clear(const T&amp; value, const size_t index_offset = 0);
    inline void clear_size(const size_t size, const size_t index_offset = 0);
}"><pre><span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> T&gt;
<span class="pl-k">inline</span> <span class="pl-c1">size_t</span> <span class="pl-en">estimate_size</span>(<span class="pl-k">const</span> T&amp; msg);

<span class="pl-k">namespace</span> <span class="pl-en">file</span> {
    <span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> FsType, <span class="pl-k">typename</span> T&gt;
    <span class="pl-k">inline</span> <span class="pl-k">bool</span> <span class="pl-en">save_as_json</span>(FsType&amp; fs, <span class="pl-k">const</span> String&amp; path, <span class="pl-k">const</span> T&amp; value, JsonDocument&amp; doc);
    <span class="pl-k">template </span>&lt;<span class="pl-c1">size_t</span> N, <span class="pl-k">typename</span> FsType, <span class="pl-k">typename</span> T&gt;
    <span class="pl-k">inline</span> <span class="pl-k">bool</span> <span class="pl-en">save_as_json_static</span>(FsType&amp; fs, <span class="pl-k">const</span> String&amp; path, <span class="pl-k">const</span> T&amp; value);
    <span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> FsType, <span class="pl-k">typename</span> T&gt;
    <span class="pl-k">inline</span> <span class="pl-k">bool</span> <span class="pl-en">save_as_json_dynamic</span>(FsType&amp; fs, <span class="pl-k">const</span> String&amp; path, <span class="pl-k">const</span> T&amp; value, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> json_size = <span class="pl-c1">512</span>);

    <span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> FsType, <span class="pl-k">typename</span> T&gt;
    <span class="pl-k">inline</span> <span class="pl-k">bool</span> <span class="pl-en">load_from_json</span>(FsType&amp; fs, <span class="pl-k">const</span> String&amp; path, T&amp; value, JsonDocument&amp; doc, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> num_max_string_type = <span class="pl-c1">32</span>);
    <span class="pl-k">template </span>&lt;<span class="pl-c1">size_t</span> N, <span class="pl-k">typename</span> FsType, <span class="pl-k">typename</span> T&gt;
    <span class="pl-k">inline</span> <span class="pl-k">bool</span> <span class="pl-en">load_from_json_static</span>(FsType&amp; fs, <span class="pl-k">const</span> String&amp; path, T&amp; value);
    <span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> FsType, <span class="pl-k">typename</span> T&gt;
    <span class="pl-k">inline</span> <span class="pl-k">bool</span> <span class="pl-en">load_from_json_dynamic</span>(FsType&amp; fs, <span class="pl-k">const</span> String&amp; path, T&amp; value, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> json_size = <span class="pl-c1">512</span>);
}

<span class="pl-k">namespace</span> <span class="pl-en">eeprom</span> {
    <span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> T&gt;
    <span class="pl-k">inline</span> <span class="pl-k">bool</span> <span class="pl-en">save</span>(<span class="pl-k">const</span> T&amp; value, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> index_offset = <span class="pl-c1">0</span>);
    <span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> T&gt;
    <span class="pl-k">inline</span> <span class="pl-k">bool</span> <span class="pl-en">load</span>(T&amp; value, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> index_offset = <span class="pl-c1">0</span>);
    <span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> T&gt;
    <span class="pl-k">inline</span> <span class="pl-k">void</span> <span class="pl-en">clear</span>(<span class="pl-k">const</span> T&amp; value, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> index_offset = <span class="pl-c1">0</span>);
    <span class="pl-k">inline</span> <span class="pl-k">void</span> <span class="pl-en">clear_size</span>(<span class="pl-k">const</span> <span class="pl-c1">size_t</span> size, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> index_offset = <span class="pl-c1">0</span>);
}</pre></div>
<h7 dir="auto">
<a id="user-content-msgpacktype" class="anchor" aria-hidden="true" href="#msgpacktype"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MsgPack::Type</h7>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="enum class Type : uint8_t {
    NA          = 0xC1, // never used
    NIL         = 0xC0,
    BOOL        = 0xC2,
    UINT7       = 0x00, // same as POSITIVE_FIXINT
    UINT8       = 0xCC,
    UINT16      = 0xCD,
    UINT32      = 0xCE,
    UINT64      = 0xCF,
    INT5        = 0xE0, // same as NEGATIVE_FIXINT
    INT8        = 0xD0,
    INT16       = 0xD1,
    INT32       = 0xD2,
    INT64       = 0xD3,
    FLOAT32     = 0xCA,
    FLOAT64     = 0xCB,
    STR5        = 0xA0, // same as FIXSTR
    STR8        = 0xD9,
    STR16       = 0xDA,
    STR32       = 0xDB,
    BIN8        = 0xC4,
    BIN16       = 0xC5,
    BIN32       = 0xC6,
    ARRAY4      = 0x90, // same as FIXARRAY
    ARRAY16     = 0xDC,
    ARRAY32     = 0xDD,
    MAP4        = 0x80, // same as FIXMAP
    MAP16       = 0xDE,
    MAP32       = 0xDF,
    FIXEXT1     = 0xD4,
    FIXEXT2     = 0xD5,
    FIXEXT4     = 0xD6,
    FIXEXT8     = 0xD7,
    FIXEXT16    = 0xD8,
    EXT8        = 0xC7,
    EXT16       = 0xC8,
    EXT32       = 0xC9,
    TIMESTAMP32 = 0xD6,
    TIMESTAMP64 = 0xD7,
    TIMESTAMP96 = 0xC7,

    POSITIVE_FIXINT = 0x00,
    NEGATIVE_FIXINT = 0xE0,
    FIXSTR          = 0xA0,
    FIXARRAY        = 0x90,
    FIXMAP          = 0x80,
};"><pre><span class="pl-k">enum</span> <span class="pl-k">class</span> <span class="pl-en">Type</span> : <span class="pl-c1">uint8_t</span> {
    NA          = <span class="pl-c1">0xC1</span>, <span class="pl-c"><span class="pl-c">//</span> never used</span>
    NIL         = <span class="pl-c1">0xC0</span>,
    BOOL        = <span class="pl-c1">0xC2</span>,
    UINT7       = <span class="pl-c1">0x00</span>, <span class="pl-c"><span class="pl-c">//</span> same as POSITIVE_FIXINT</span>
    UINT8       = <span class="pl-c1">0xCC</span>,
    UINT16      = <span class="pl-c1">0xCD</span>,
    UINT32      = <span class="pl-c1">0xCE</span>,
    UINT64      = <span class="pl-c1">0xCF</span>,
    INT5        = <span class="pl-c1">0xE0</span>, <span class="pl-c"><span class="pl-c">//</span> same as NEGATIVE_FIXINT</span>
    INT8        = <span class="pl-c1">0xD0</span>,
    INT16       = <span class="pl-c1">0xD1</span>,
    INT32       = <span class="pl-c1">0xD2</span>,
    INT64       = <span class="pl-c1">0xD3</span>,
    FLOAT32     = <span class="pl-c1">0xCA</span>,
    FLOAT64     = <span class="pl-c1">0xCB</span>,
    STR5        = <span class="pl-c1">0xA0</span>, <span class="pl-c"><span class="pl-c">//</span> same as FIXSTR</span>
    STR8        = <span class="pl-c1">0xD9</span>,
    STR16       = <span class="pl-c1">0xDA</span>,
    STR32       = <span class="pl-c1">0xDB</span>,
    BIN8        = <span class="pl-c1">0xC4</span>,
    BIN16       = <span class="pl-c1">0xC5</span>,
    BIN32       = <span class="pl-c1">0xC6</span>,
    ARRAY4      = <span class="pl-c1">0x90</span>, <span class="pl-c"><span class="pl-c">//</span> same as FIXARRAY</span>
    ARRAY16     = <span class="pl-c1">0xDC</span>,
    ARRAY32     = <span class="pl-c1">0xDD</span>,
    MAP4        = <span class="pl-c1">0x80</span>, <span class="pl-c"><span class="pl-c">//</span> same as FIXMAP</span>
    MAP16       = <span class="pl-c1">0xDE</span>,
    MAP32       = <span class="pl-c1">0xDF</span>,
    FIXEXT1     = <span class="pl-c1">0xD4</span>,
    FIXEXT2     = <span class="pl-c1">0xD5</span>,
    FIXEXT4     = <span class="pl-c1">0xD6</span>,
    FIXEXT8     = <span class="pl-c1">0xD7</span>,
    FIXEXT16    = <span class="pl-c1">0xD8</span>,
    EXT8        = <span class="pl-c1">0xC7</span>,
    EXT16       = <span class="pl-c1">0xC8</span>,
    EXT32       = <span class="pl-c1">0xC9</span>,
    TIMESTAMP32 = <span class="pl-c1">0xD6</span>,
    TIMESTAMP64 = <span class="pl-c1">0xD7</span>,
    TIMESTAMP96 = <span class="pl-c1">0xC7</span>,

    POSITIVE_FIXINT = <span class="pl-c1">0x00</span>,
    NEGATIVE_FIXINT = <span class="pl-c1">0xE0</span>,
    FIXSTR          = <span class="pl-c1">0xA0</span>,
    FIXARRAY        = <span class="pl-c1">0x90</span>,
    FIXMAP          = <span class="pl-c1">0x80</span>,
};</pre></div>
<h6 dir="auto">
<a id="user-content-reference" class="anchor" aria-hidden="true" href="#reference"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Reference</h6>
<ul dir="auto">
<li><a href="https://github.com/msgpack/msgpack/blob/master/spec.md">MessagePack Specification</a></li>
<li><a href="https://github.com/msgpack/msgpack-c/wiki/v2_0_cpp_adaptor">msgpack adaptor</a></li>
<li><a href="https://github.com/msgpack/msgpack-c/wiki/v2_0_cpp_object">msgpack object</a></li>
<li><a href="https://github.com/msgpack/msgpack-c/wiki">msgpack-c wiki</a></li>
</ul>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<p dir="auto">MIT</p>
</article>
  </div>
        </div>
        
        <div id="qs-pkcsecurity-msgpack-cljs" class="qs"><h4><a href="https://github.com/pkcsecurity/msgpack-cljs" target="_blank">pkcsecurity/msgpack-cljs <span class="qs-url">https://github.com/pkcsecurity/msgpack-cljs</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container js-search-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack-cljs" class="anchor" aria-hidden="true" href="#msgpack-cljs"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack-cljs</h5>
<p dir="auto">A Clojurescript implementation of msgpack. This library's structure is <em>heavily</em> adapted from the great work done on <a href="https://github.com/edma2/clojure-msgpack">clojure-msgpack</a>. Support for Clojure <code>keyword</code>, <code>symbol</code>, <code>char</code>, <code>ratio</code>, and <code>set</code> are all included by default as Extension types for convenience and to be compatible with <code>clojure-msgpack</code>.</p>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<p dir="auto"><code>pack</code> takes an arbitrary object and converts it into a <code>Uint8Array</code>.</p>
<p dir="auto"><code>unpack</code> takes a <code>Uint8Array</code> and converts it back into an arbitrary object.</p>
<h6 dir="auto">
<a id="user-content-improvements" class="anchor" aria-hidden="true" href="#improvements"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Improvements</h6>
<p dir="auto">This library could stand to be refactored. We just use this internally at <a href="https://pkc.io" rel="nofollow">PKC</a>, so, if there is demand (or interest) in making this more feature-rich, we are open to making improvements. Just be vocal, otherwise we'll keep it simple.</p>
<h6 dir="auto">
<a id="user-content-copyright" class="anchor" aria-hidden="true" href="#copyright"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Copyright</h6>
<p dir="auto">Copyright 2018 PKC</p>
<p dir="auto">Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at:</p>
<p dir="auto"><a href="http://www.apache.org/licenses/LICENSE-2.0" rel="nofollow">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p dir="auto">Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
</article>
  </div>
        </div>
        
        <div id="qs-jpf91-msgpack-ll" class="qs"><h4><a href="https://github.com/jpf91/msgpack-ll" target="_blank">jpf91/msgpack-ll <span class="qs-url">https://github.com/jpf91/msgpack-ll</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container js-search-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack-ll" class="anchor" aria-hidden="true" href="#msgpack-ll"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack-ll</h5>
<p dir="auto"><a href="https://coveralls.io/github/jpf91/msgpack-ll?branch=master" rel="nofollow"><img src="https://camo.githubusercontent.com/895f06e5f92c1da6808be4ae881010eca89c3371c9eea3ebdc550fb1ccad0193/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6769746875622f6a706639312f6d73677061636b2d6c6c2f62616467652e7376673f6272616e63683d6d6173746572" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/github/jpf91/msgpack-ll/badge.svg?branch=master" style="max-width: 100%;"></a>
<a href="https://travis-ci.org/jpf91/msgpack-ll" rel="nofollow"><img src="https://camo.githubusercontent.com/fbcf7bc6f3cd1031febc094f195e550270b6317c2d6df6c0a5043efbedbfa4cc/68747470733a2f2f7472617669732d63692e6f72672f6a706639312f6d73677061636b2d6c6c2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/jpf91/msgpack-ll.svg?branch=master" style="max-width: 100%;"></a></p>
<p dir="auto">This is a low-level <code>@nogc</code>, <code>nothrow</code>, <code>@safe</code>, <code>pure</code> and <code>betterC</code> compatible
<a href="http://msgpack.org/" rel="nofollow">MessagePack</a> serializer and deserializer. The
library was designed to avoid any external dependencies and handle the low-level protocol
details only. As a result the library doesn't have to do any error handling or
buffer management. This library does never dynamically allocate memory.</p>
<p dir="auto">The API documentation is available <a href="https://jpf91.github.io/msgpack-ll/msgpack_ll.html" rel="nofollow">here</a>.</p>
<h6 dir="auto">
<a id="user-content-a-simple-example-showing-the-complete-api" class="anchor" aria-hidden="true" href="#a-simple-example-showing-the-complete-api"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>A simple example showing the complete API</h6>
<div class="highlight highlight-source-d notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="import msgpack_ll;

// Buffer allocation is not handled by the library
ubyte[128] buffer;


// The MsgpackType enum contains all low-level MessagePack types
enum type = MsgpackType.uint8;

// The DataSize!(MsgpackType) function returns the size of serialized data
// for a certain type.

// The formatter and parser use ref ubyte[DataSize!type] types. This
// forces the compiler to do array length checks at compile time and avoid
// any runtime bounds checking.

// Format the number 42 as a uint8 type. This will require
// DataSize!(MsgpackType.uint8) == 2 bytes storage.
formatType!(type)(42, buffer[0..DataSize!type]);

// To deserialize we have to somehow get the data type at runtime
// Then verify the type is as expected.
assert(getType(buffer[0]) == type);

// Now deserialize. Here we have to specify the MsgpackType
// as a compile time value.
const result = parseType!type(buffer[0..DataSize!type]);
assert(result == 42);"><pre><span class="pl-k">import</span> msgpack_ll;

<span class="pl-c"><span class="pl-c">//</span> Buffer allocation is not handled by the library</span>
<span class="pl-k">ubyte</span>[<span class="pl-c1">128</span>] buffer;


<span class="pl-c"><span class="pl-c">//</span> The MsgpackType enum contains all low-level MessagePack types</span>
<span class="pl-k">enum</span> type = MsgpackType.uint8;

<span class="pl-c"><span class="pl-c">//</span> The DataSize!(MsgpackType) function returns the size of serialized data</span>
<span class="pl-c"><span class="pl-c">//</span> for a certain type.</span>

<span class="pl-c"><span class="pl-c">//</span> The formatter and parser use ref ubyte[DataSize!type] types. This</span>
<span class="pl-c"><span class="pl-c">//</span> forces the compiler to do array length checks at compile time and avoid</span>
<span class="pl-c"><span class="pl-c">//</span> any runtime bounds checking.</span>

<span class="pl-c"><span class="pl-c">//</span> Format the number 42 as a uint8 type. This will require</span>
<span class="pl-c"><span class="pl-c">//</span> DataSize!(MsgpackType.uint8) == 2 bytes storage.</span>
formatType<span class="pl-k">!</span>(type)(<span class="pl-c1">42</span>, buffer[<span class="pl-c1">0</span><span class="pl-k">..</span>DataSize<span class="pl-k">!</span>type]);

<span class="pl-c"><span class="pl-c">//</span> To deserialize we have to somehow get the data type at runtime</span>
<span class="pl-c"><span class="pl-c">//</span> Then verify the type is as expected.</span>
<span class="pl-k">assert</span>(getType(buffer[<span class="pl-c1">0</span>]) <span class="pl-k">==</span> type);

<span class="pl-c"><span class="pl-c">//</span> Now deserialize. Here we have to specify the MsgpackType</span>
<span class="pl-c"><span class="pl-c">//</span> as a compile time value.</span>
<span class="pl-k">const</span> result = parseType<span class="pl-k">!</span>type(buffer[<span class="pl-c1">0</span><span class="pl-k">..</span>DataSize<span class="pl-k">!</span>type]);
<span class="pl-k">assert</span>(result <span class="pl-k">==</span> <span class="pl-c1">42</span>);</pre></div>
<h6 dir="auto">
<a id="user-content-a-quick-view-at-the-generated-code-for-this-library" class="anchor" aria-hidden="true" href="#a-quick-view-at-the-generated-code-for-this-library"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>A quick view at the generated code for this library</h6>
<h7 dir="auto">
<a id="user-content-serializing-an-8-bit-integer" class="anchor" aria-hidden="true" href="#serializing-an-8-bit-integer"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Serializing an 8 bit integer</h7>
<div class="highlight highlight-source-d notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="void format(ref ubyte[128] buffer)
{
    enum type = MsgpackType.uint8;
    formatType!(type)(42, buffer[0..DataSize!type]);
}"><pre><span class="pl-k">void</span> <span class="pl-en">format</span>(<span class="pl-k">ref</span> <span class="pl-k">ubyte</span>[<span class="pl-c1">128</span>] buffer)
{
    <span class="pl-k">enum</span> type = MsgpackType.uint8;
    formatType<span class="pl-k">!</span>(type)(<span class="pl-c1">42</span>, buffer[<span class="pl-c1">0</span><span class="pl-k">..</span>DataSize<span class="pl-k">!</span>type]);
}</pre></div>
<p dir="auto">Because of clever typing there's no runtime bounds checking but all bounds
checks are performed at compile time by type checking.</p>
<div class="highlight highlight-source-assembly notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="pure nothrow @nogc @safe void msgpack_ll.format(ref ubyte[128]):
        mov     BYTE PTR [rdi], -52
        mov     BYTE PTR [rdi+1], 42
        ret"><pre><span class="pl-en">pure nothrow @nogc @safe void msgpack_ll.form</span><span class="pl-c1">at</span><span class="pl-en">(ref ubyte</span><span class="pl-s1">[</span><span class="pl-c1">128</span><span class="pl-s1">]</span><span class="pl-en">):</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">     BYTE PTR </span><span class="pl-s1">[</span><span class="pl-v">rdi</span><span class="pl-s1">],</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-c1">52</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">     BYTE PTR </span><span class="pl-s1">[</span><span class="pl-v">rdi</span><span class="pl-s1">+</span><span class="pl-c1">1</span><span class="pl-s1">],</span><span class="pl-en"> </span><span class="pl-c1">42</span>
<span class="pl-en">        </span><span class="pl-k">ret</span></pre></div>
<h7 dir="auto">
<a id="user-content-serializing-a-small-negative-integer-into-one-byte" class="anchor" aria-hidden="true" href="#serializing-a-small-negative-integer-into-one-byte"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Serializing a small negative integer into one byte</h7>
<div class="highlight highlight-source-d notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="void format(ref ubyte[128] buffer)
{
    enum type = MsgpackType.negFixInt;
    formatType!(type)(-11, buffer[0..DataSize!type]);
}"><pre><span class="pl-k">void</span> <span class="pl-en">format</span>(<span class="pl-k">ref</span> <span class="pl-k">ubyte</span>[<span class="pl-c1">128</span>] buffer)
{
    <span class="pl-k">enum</span> type = MsgpackType.negFixInt;
    formatType<span class="pl-k">!</span>(type)(<span class="pl-k">-</span><span class="pl-c1">11</span>, buffer[<span class="pl-c1">0</span><span class="pl-k">..</span>DataSize<span class="pl-k">!</span>type]);
}</pre></div>
<p dir="auto">The MessagePack format is cleverly designed, so encoding the type is actually free
in this case.</p>
<div class="highlight highlight-source-assembly notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="pure nothrow @nogc @safe void msgpack_ll.format(ref ubyte[128]):
        mov     BYTE PTR [rdi], -11
        ret"><pre><span class="pl-en">pure nothrow @nogc @safe void msgpack_ll.form</span><span class="pl-c1">at</span><span class="pl-en">(ref ubyte</span><span class="pl-s1">[</span><span class="pl-c1">128</span><span class="pl-s1">]</span><span class="pl-en">):</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">     BYTE PTR </span><span class="pl-s1">[</span><span class="pl-v">rdi</span><span class="pl-s1">],</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-c1">11</span>
<span class="pl-en">        </span><span class="pl-k">ret</span></pre></div>
<h7 dir="auto">
<a id="user-content-deserializing-an-expected-type" class="anchor" aria-hidden="true" href="#deserializing-an-expected-type"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Deserializing an expected type</h7>
<div class="highlight highlight-source-d notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="bool parse(ref ubyte[128] buffer, ref byte value)
{
    enum type = MsgpackType.negFixInt;
    auto rtType = getType(buffer[0]);
    if(rtType != type)
        return false;

    value = parseType!type(buffer[0..DataSize!type]);
    return true;
}"><pre><span class="pl-k">bool</span> <span class="pl-en">parse</span>(<span class="pl-k">ref</span> <span class="pl-k">ubyte</span>[<span class="pl-c1">128</span>] buffer, <span class="pl-k">ref</span> <span class="pl-k">byte</span> value)
{
    <span class="pl-k">enum</span> type = MsgpackType.negFixInt;
    <span class="pl-k">auto</span> rtType = getType(buffer[<span class="pl-c1">0</span>]);
    <span class="pl-k">if</span>(rtType <span class="pl-k">!=</span> type)
        <span class="pl-k">return</span> <span class="pl-c1">false</span>;

    value = parseType<span class="pl-k">!</span>type(buffer[<span class="pl-c1">0</span><span class="pl-k">..</span>DataSize<span class="pl-k">!</span>type]);
    <span class="pl-k">return</span> <span class="pl-c1">true</span>;
}</pre></div>
<p dir="auto">The compiler will inline functions and can see through the switch block in
<code>getType</code>. If you explicitly ask for one type, the compiler will reduce the
code to a simple explicit <code>if</code> check for this type!</p>
<div class="highlight highlight-source-assembly notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="pure nothrow @nogc @safe bool msgpack_ll.parse(ref ubyte[128], ref byte):
        movzx   edx, BYTE PTR [rdi]
        cmp     edx, 223
        jle     .L58
        mov     BYTE PTR [rsi], dl
        mov     eax, 1
        ret
.L58:
        xor     eax, eax
        ret"><pre><span class="pl-en">pure nothrow @nogc @safe bool msgpack_ll.parse(ref ubyte</span><span class="pl-s1">[</span><span class="pl-c1">128</span><span class="pl-s1">],</span><span class="pl-en"> ref byte):</span>
<span class="pl-en">        </span><span class="pl-k">movzx</span><span class="pl-en">   </span><span class="pl-v">edx</span><span class="pl-s1">,</span><span class="pl-en"> BYTE PTR </span><span class="pl-s1">[</span><span class="pl-v">rdi</span><span class="pl-s1">]</span>
<span class="pl-en">        </span><span class="pl-k">cmp</span><span class="pl-en">     </span><span class="pl-v">edx</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">223</span>
<span class="pl-en">        </span><span class="pl-k">jle</span><span class="pl-en">     .L58</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">     BYTE PTR </span><span class="pl-s1">[</span><span class="pl-v">rsi</span><span class="pl-s1">],</span><span class="pl-en"> </span><span class="pl-v">dl</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">     </span><span class="pl-v">eax</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">1</span>
<span class="pl-en">        </span><span class="pl-k">ret</span>
<span class="pl-en">.L58:</span>
<span class="pl-en">        </span><span class="pl-k">xor</span><span class="pl-en">     </span><span class="pl-v">eax</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">eax</span>
<span class="pl-en">        </span><span class="pl-k">ret</span></pre></div>
<h7 dir="auto">
<a id="user-content-deserializing-one-of-multiple-types" class="anchor" aria-hidden="true" href="#deserializing-one-of-multiple-types"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Deserializing one of multiple types</h7>
<div class="highlight highlight-source-d notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="bool parse(ref ubyte[128] buffer, ref byte value)
{
    auto rtType = getType(buffer[0]);
    switch(rtType)
    {
        case MsgpackType.negFixInt:
            value = parseType!(MsgpackType.negFixInt)(buffer[0..DataSize!(MsgpackType.negFixInt)]);
            return true;
        case MsgpackType.int8:
            value = parseType!(MsgpackType.int8)(buffer[0..DataSize!(MsgpackType.int8)]);
            return true;
        default:
            return false;
    }
}"><pre><span class="pl-k">bool</span> <span class="pl-en">parse</span>(<span class="pl-k">ref</span> <span class="pl-k">ubyte</span>[<span class="pl-c1">128</span>] buffer, <span class="pl-k">ref</span> <span class="pl-k">byte</span> value)
{
    <span class="pl-k">auto</span> rtType = getType(buffer[<span class="pl-c1">0</span>]);
    <span class="pl-k">switch</span>(rtType)
    {
        <span class="pl-k">case</span> MsgpackType.negFixInt:
            value = parseType<span class="pl-k">!</span>(MsgpackType.negFixInt)(buffer[<span class="pl-c1">0</span><span class="pl-k">..</span>DataSize<span class="pl-k">!</span>(MsgpackType.negFixInt)]);
            <span class="pl-k">return</span> <span class="pl-c1">true</span>;
        <span class="pl-k">case</span> MsgpackType.int8:
            value = parseType<span class="pl-k">!</span>(MsgpackType.int8)(buffer[<span class="pl-c1">0</span><span class="pl-k">..</span>DataSize<span class="pl-k">!</span>(MsgpackType.int8)]);
            <span class="pl-k">return</span> <span class="pl-c1">true</span>;
        <span class="pl-k">default</span>:
            <span class="pl-k">return</span> <span class="pl-c1">false</span>;
    }
}</pre></div>
<p dir="auto">The generated code is obviously slighly more complex. The interesting part here
is that type checking is directly done using the raw type value and not the
enum values returned by <code>getType</code>. Even manually written ASM probably can't do
much better here.</p>
<div class="highlight highlight-source-assembly notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="pure nothrow @nogc @safe bool msgpack_ll.parse(ref ubyte[128], ref byte):
        movzx   ecx, BYTE PTR [rdi]
        xor     eax, eax
        cmp     ecx, 191
        jle     .L55
        cmp     ecx, 223
        jg      .L56
        cmp     ecx, 208
        jne     .L60
        movzx   eax, BYTE PTR [rdi+1]
        mov     BYTE PTR [rsi], al
        mov     eax, 1
.L55:
        rep; ret
.L56:
        mov     BYTE PTR [rsi], cl
        mov     eax, 1
        ret
.L60:
        ret"><pre><span class="pl-en">pure nothrow @nogc @safe bool msgpack_ll.parse(ref ubyte</span><span class="pl-s1">[</span><span class="pl-c1">128</span><span class="pl-s1">],</span><span class="pl-en"> ref byte):</span>
<span class="pl-en">        </span><span class="pl-k">movzx</span><span class="pl-en">   </span><span class="pl-v">ecx</span><span class="pl-s1">,</span><span class="pl-en"> BYTE PTR </span><span class="pl-s1">[</span><span class="pl-v">rdi</span><span class="pl-s1">]</span>
<span class="pl-en">        </span><span class="pl-k">xor</span><span class="pl-en">     </span><span class="pl-v">eax</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">eax</span>
<span class="pl-en">        </span><span class="pl-k">cmp</span><span class="pl-en">     </span><span class="pl-v">ecx</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">191</span>
<span class="pl-en">        </span><span class="pl-k">jle</span><span class="pl-en">     .L55</span>
<span class="pl-en">        </span><span class="pl-k">cmp</span><span class="pl-en">     </span><span class="pl-v">ecx</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">223</span>
<span class="pl-en">        </span><span class="pl-k">jg</span><span class="pl-en">      .L56</span>
<span class="pl-en">        </span><span class="pl-k">cmp</span><span class="pl-en">     </span><span class="pl-v">ecx</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">208</span>
<span class="pl-en">        </span><span class="pl-k">jne</span><span class="pl-en">     .L60</span>
<span class="pl-en">        </span><span class="pl-k">movzx</span><span class="pl-en">   </span><span class="pl-v">eax</span><span class="pl-s1">,</span><span class="pl-en"> BYTE PTR </span><span class="pl-s1">[</span><span class="pl-v">rdi</span><span class="pl-s1">+</span><span class="pl-c1">1</span><span class="pl-s1">]</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">     BYTE PTR </span><span class="pl-s1">[</span><span class="pl-v">rsi</span><span class="pl-s1">],</span><span class="pl-en"> </span><span class="pl-v">al</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">     </span><span class="pl-v">eax</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">1</span>
<span class="pl-en">.L55:</span>
<span class="pl-en">        </span><span class="pl-k">rep</span><span class="pl-c">; ret</span>
<span class="pl-en">.L56:</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">     BYTE PTR </span><span class="pl-s1">[</span><span class="pl-v">rsi</span><span class="pl-s1">],</span><span class="pl-en"> </span><span class="pl-v">cl</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">     </span><span class="pl-v">eax</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">1</span>
<span class="pl-en">        </span><span class="pl-k">ret</span>
<span class="pl-en">.L60:</span>
<span class="pl-en">        </span><span class="pl-k">ret</span></pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-ymofen-thealchemist" class="qs"><h4><a href="https://github.com/ymofen/thealchemist" target="_blank">ymofen/thealchemist <span class="qs-url">https://github.com/ymofen/thealchemist</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container js-search-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-the-alchemist" class="anchor" aria-hidden="true" href="#the-alchemist"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>The Alchemist</h5>
<p dir="auto"><a href="https://travis-ci.org/vertexclique/thealchemist" rel="nofollow"><img src="https://camo.githubusercontent.com/7590f18b873e5b11ff4eea482703edf326f8d438fa8e826c241a4773b4fbfd87/68747470733a2f2f7472617669732d63692e6f72672f766572746578636c697175652f746865616c6368656d6973742e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/vertexclique/thealchemist.svg?branch=master" style="max-width: 100%;"></a></p>
<p dir="auto">Elixir implementation bundle for MessagePack</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/686e22e62ba8fcb12ca9a97a2edd57c0e4ddaf87a22510c89bb36796ed37fd11/687474703a2f2f7777772e77686174732d796f75722d7369676e2e636f6d2f696d616765732f416c6368656d7953796d626f6c732e6a7067"><img src="https://camo.githubusercontent.com/686e22e62ba8fcb12ca9a97a2edd57c0e4ddaf87a22510c89bb36796ed37fd11/687474703a2f2f7777772e77686174732d796f75722d7369676e2e636f6d2f696d616765732f416c6368656d7953796d626f6c732e6a7067" alt="The Alchemist" style="width: 300px; max-width: 100%;" data-canonical-src="http://www.whats-your-sign.com/images/AlchemySymbols.jpg"></a></p>
<p dir="auto">Elixir implementation relies on <code>mururu/msgpack-elixir</code>
<a href="http://badge.fury.io/gh/mururu%2Fmsgpack-elixir" rel="nofollow"><img src="https://camo.githubusercontent.com/37af7fad55fc9f4ce33dfb562a45f39a3991ef87f83070d4be1676501e29b080/68747470733a2f2f62616467652e667572792e696f2f67682f6d75727572752532466d73677061636b2d656c697869722e737667" alt="GitHub version" data-canonical-src="https://badge.fury.io/gh/mururu%2Fmsgpack-elixir.svg" style="max-width: 100%;"></a></p>
<p dir="auto">Pure erlang implementation used with <code>msgpack/msgpack-erlang</code>
<a href="http://badge.fury.io/gh/msgpack%2Fmsgpack-erlang" rel="nofollow"><img src="https://camo.githubusercontent.com/36e34ae86d6a12d69adfdfc5f1fcea12cd132d7144076ba0aa90b1e4aa77b51e/68747470733a2f2f62616467652e667572792e696f2f67682f6d73677061636b2532466d73677061636b2d65726c616e672e737667" alt="GitHub version" data-canonical-src="https://badge.fury.io/gh/msgpack%2Fmsgpack-erlang.svg" style="max-width: 100%;"></a></p>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<p dir="auto">### In pure elixir:</p>
<div class="highlight highlight-source-elixir notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="# pack
TheAlchemist.pack([1,2,3]) #=&gt; { :ok, &lt;&lt;147,1,2,3&gt;&gt; }
TheAlchemist.pack!([1,2,3]) #=&gt; &lt;&lt;147,1,2,3&gt;&gt;

# unpack
TheAlchemist.unpack(&lt;&lt;147,1,2,3&gt;&gt;) #=&gt; { :ok, [1,2,3] }
TheAlchemist.unpack!(&lt;&lt;147,1,2,3&gt;&gt;) #=&gt; [1,2,3]

# unpack_once
TheAlchemist.unpack_once(&lt;&lt;147,1,2,3,4&gt;&gt;) #=&gt; {:ok, {[1, 2, 3], &lt;&lt;4&gt;&gt;}}
TheAlchemist.unpack_once!(&lt;&lt;147,1,2,3,4&gt;&gt;) #=&gt; {[1, 2, 3], &lt;&lt;4&gt;&gt;}
"><pre><span class="pl-c"># pack</span>
<span class="pl-v">TheAlchemist</span><span class="pl-c1">.</span><span class="pl-en">pack</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-c1">1</span><span class="pl-kos">,</span><span class="pl-c1">2</span><span class="pl-kos">,</span><span class="pl-c1">3</span><span class="pl-kos">]</span><span class="pl-kos">)</span> <span class="pl-c">#=&gt; { :ok, &lt;&lt;147,1,2,3&gt;&gt; }</span>
<span class="pl-v">TheAlchemist</span><span class="pl-c1">.</span><span class="pl-en">pack!</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-c1">1</span><span class="pl-kos">,</span><span class="pl-c1">2</span><span class="pl-kos">,</span><span class="pl-c1">3</span><span class="pl-kos">]</span><span class="pl-kos">)</span> <span class="pl-c">#=&gt; &lt;&lt;147,1,2,3&gt;&gt;</span>

<span class="pl-c"># unpack</span>
<span class="pl-v">TheAlchemist</span><span class="pl-c1">.</span><span class="pl-en">unpack</span><span class="pl-kos">(</span><span class="pl-kos">&lt;&lt;</span><span class="pl-c1">147</span><span class="pl-kos">,</span><span class="pl-c1">1</span><span class="pl-kos">,</span><span class="pl-c1">2</span><span class="pl-kos">,</span><span class="pl-c1">3</span><span class="pl-kos">&gt;&gt;</span><span class="pl-kos">)</span> <span class="pl-c">#=&gt; { :ok, [1,2,3] }</span>
<span class="pl-v">TheAlchemist</span><span class="pl-c1">.</span><span class="pl-en">unpack!</span><span class="pl-kos">(</span><span class="pl-kos">&lt;&lt;</span><span class="pl-c1">147</span><span class="pl-kos">,</span><span class="pl-c1">1</span><span class="pl-kos">,</span><span class="pl-c1">2</span><span class="pl-kos">,</span><span class="pl-c1">3</span><span class="pl-kos">&gt;&gt;</span><span class="pl-kos">)</span> <span class="pl-c">#=&gt; [1,2,3]</span>

<span class="pl-c"># unpack_once</span>
<span class="pl-v">TheAlchemist</span><span class="pl-c1">.</span><span class="pl-en">unpack_once</span><span class="pl-kos">(</span><span class="pl-kos">&lt;&lt;</span><span class="pl-c1">147</span><span class="pl-kos">,</span><span class="pl-c1">1</span><span class="pl-kos">,</span><span class="pl-c1">2</span><span class="pl-kos">,</span><span class="pl-c1">3</span><span class="pl-kos">,</span><span class="pl-c1">4</span><span class="pl-kos">&gt;&gt;</span><span class="pl-kos">)</span> <span class="pl-c">#=&gt; {:ok, {[1, 2, 3], &lt;&lt;4&gt;&gt;}}</span>
<span class="pl-v">TheAlchemist</span><span class="pl-c1">.</span><span class="pl-en">unpack_once!</span><span class="pl-kos">(</span><span class="pl-kos">&lt;&lt;</span><span class="pl-c1">147</span><span class="pl-kos">,</span><span class="pl-c1">1</span><span class="pl-kos">,</span><span class="pl-c1">2</span><span class="pl-kos">,</span><span class="pl-c1">3</span><span class="pl-kos">,</span><span class="pl-c1">4</span><span class="pl-kos">&gt;&gt;</span><span class="pl-kos">)</span> <span class="pl-c">#=&gt; {[1, 2, 3], &lt;&lt;4&gt;&gt;}</span></pre></div>
<p dir="auto">### With underlying erlang:</p>
<h8 dir="auto">
<a id="user-content-deserialization" class="anchor" aria-hidden="true" href="#deserialization"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Deserialization</h8>
<div class="highlight highlight-source-elixir notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="msgpacked = TheAlchemistErl.pack('{&quot;test&quot;:false}')
TheAlchemistErl.unpack(msgpacked)"><pre><span class="pl-s1">msgpacked</span> <span class="pl-c1">=</span> <span class="pl-v">TheAlchemistErl</span><span class="pl-c1">.</span><span class="pl-en">pack</span><span class="pl-kos">(</span><span class="pl-s">'{"test":false}'</span><span class="pl-kos">)</span>
<span class="pl-v">TheAlchemistErl</span><span class="pl-c1">.</span><span class="pl-en">unpack</span><span class="pl-kos">(</span><span class="pl-s1">msgpacked</span><span class="pl-kos">)</span></pre></div>
<h8 dir="auto">
<a id="user-content-stream-deserialization" class="anchor" aria-hidden="true" href="#stream-deserialization"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Stream deserialization</h8>
<div class="highlight highlight-source-elixir notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="mat = TheAlchemistErl.unpack_stream(data)
TheAlchemistErl.unpack_stream(elem(mat, 1)),"><pre><span class="pl-s1">mat</span> <span class="pl-c1">=</span> <span class="pl-v">TheAlchemistErl</span><span class="pl-c1">.</span><span class="pl-en">unpack_stream</span><span class="pl-kos">(</span><span class="pl-s1">data</span><span class="pl-kos">)</span>
<span class="pl-v">TheAlchemistErl</span><span class="pl-c1">.</span><span class="pl-en">unpack_stream</span><span class="pl-kos">(</span><span class="pl-en">elem</span><span class="pl-kos">(</span><span class="pl-s1">mat</span><span class="pl-kos">,</span> <span class="pl-c1">1</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">,</span></pre></div>
<h8 dir="auto">
<a id="user-content-string-type" class="anchor" aria-hidden="true" href="#string-type"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>String type</h8>
<p dir="auto">Now this supports string type!</p>
<div class="highlight highlight-source-elixir notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='opt = [{:enable_str, true}]
TheAlchemistErl.unpack(TheAlchemistErl.pack("埼玉kanji", opt), opt)
 =&gt; {:ok, "埼玉kanji"}'><pre><span class="pl-s1">opt</span> <span class="pl-c1">=</span> <span class="pl-kos">[</span><span class="pl-kos">{</span><span class="pl-pds">:enable_str</span><span class="pl-kos">,</span> <span class="pl-c1">true</span><span class="pl-kos">}</span><span class="pl-kos">]</span>
<span class="pl-v">TheAlchemistErl</span><span class="pl-c1">.</span><span class="pl-en">unpack</span><span class="pl-kos">(</span><span class="pl-v">TheAlchemistErl</span><span class="pl-c1">.</span><span class="pl-en">pack</span><span class="pl-kos">(</span><span class="pl-s">"埼玉kanji"</span><span class="pl-kos">,</span> <span class="pl-s1">opt</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-s1">opt</span><span class="pl-kos">)</span>
 <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span><span class="pl-pds">:ok</span><span class="pl-kos">,</span> <span class="pl-s">"埼玉kanji"</span><span class="pl-kos">}</span></pre></div>
<h8 dir="auto">
<a id="user-content-map-style" class="anchor" aria-hidden="true" href="#map-style"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Map Style</h8>
<p dir="auto">Since Erlang/OTP 17.0</p>
<div class="highlight highlight-source-erlang notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='msgpack:pack(#{ &lt;&lt;"key"&gt;&gt; =&gt; &lt;&lt;"value"&gt;&gt; }, [{format, map}]).'><pre><span class="pl-en">msgpack</span>:<span class="pl-en">pack</span>(#{ &lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>&gt;&gt; <span class="pl-k">=&gt;</span> &lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>&gt;&gt; }, [{<span class="pl-c1">format</span>, <span class="pl-c1">map</span>}]).</pre></div>
<p dir="auto">Or use old jiffy/jsx style</p>
<div class="highlight highlight-source-erlang notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='msgpack:pack({[{&lt;&lt;"key"&gt;&gt;, &lt;&lt;"value"&gt;&gt;}]}, [{format, jiffy}]),
msgpack:pack([{&lt;&lt;"key"&gt;&gt;, &lt;&lt;"value"&gt;&gt;}], [{format, jsx}]).'><pre><span class="pl-en">msgpack</span>:<span class="pl-en">pack</span>({[{&lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>&gt;&gt;, &lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>&gt;&gt;}]}, [{<span class="pl-c1">format</span>, <span class="pl-c1">jiffy</span>}]),
<span class="pl-en">msgpack</span>:<span class="pl-en">pack</span>([{&lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>&gt;&gt;, &lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>&gt;&gt;}], [{<span class="pl-c1">format</span>, <span class="pl-c1">jsx</span>}]).</pre></div>
<h6 dir="auto">
<a id="user-content-running-interactively" class="anchor" aria-hidden="true" href="#running-interactively"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Running interactively</h6>
<p dir="auto">Firstly <code>make all</code> to ensure all source files are compiled
after that you can bring the <code>ERL shell</code> with</p>
<p dir="auto"><code>make run</code></p>
<p dir="auto">If you want to bring the <code>IEX</code> you can type</p>
<p dir="auto"><code>make runex</code></p>
</article>
  </div>
        </div>
        
        <div id="qs-xtpor-godot-msgpack" class="qs"><h4><a href="https://github.com/xtpor/godot-msgpack" target="_blank">xtpor/godot-msgpack <span class="qs-url">https://github.com/xtpor/godot-msgpack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container js-search-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-godot-msgpack" class="anchor" aria-hidden="true" href="#godot-msgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>godot-msgpack</h5>
<p dir="auto">A MessagePack serializer implemented in pure GDScript</p>
<ul dir="auto">
<li>No dependency</li>
<li>No native binding required</li>
</ul>
<h5 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h5>
<p dir="auto">Copy the <code>msgpack.gd</code> at the root of the repository into your godot project</p>
<h5 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h5>
<div class="highlight highlight-source-gdscript notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='var Msgpack = preload("res://msgpack.gd")

func _myfunc():
    var data = {"type": "wizard", "attack": 10, "weapon": ["dagger", "staff"]}

    var res = Msgpack.encode(data)
    print(res.result) # A PoolByteArray of the data encoded MessagePack

    var res2 = Msgpack.decode(res.result)
    print(res2.result) # Get back the original data'><pre><span class="pl-k">var</span> <span class="pl-c1">Msgpack</span> <span class="pl-k">=</span> <span class="pl-k">preload</span>(<span class="pl-s">"res://msgpack.gd"</span>)

<span class="pl-k">func</span> <span class="pl-en">_myfunc</span>():
    <span class="pl-k">var</span> data <span class="pl-k">=</span> {<span class="pl-s">"type"</span>: <span class="pl-s">"wizard"</span>, <span class="pl-s">"attack"</span>: <span class="pl-c1">10</span>, <span class="pl-s">"weapon"</span>: [<span class="pl-s">"dagger"</span>, <span class="pl-s">"staff"</span>]}

    <span class="pl-k">var</span> res <span class="pl-k">=</span> <span class="pl-c1">Msgpack</span>.<span class="pl-c1">encode</span>(data)
    <span class="pl-c1">print</span>(res.result) <span class="pl-c"><span class="pl-c">#</span> A PoolByteArray of the data encoded MessagePack</span>

    <span class="pl-k">var</span> res2 <span class="pl-k">=</span> <span class="pl-c1">Msgpack</span>.<span class="pl-c1">decode</span>(res.result)
    <span class="pl-c1">print</span>(res2.result) <span class="pl-c"><span class="pl-c">#</span> Get back the original data</span></pre></div>
<h6 dir="auto">
<a id="user-content-class-msgpack" class="anchor" aria-hidden="true" href="#class-msgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>class <code>Msgpack</code>
</h6>
<h7 dir="auto">
<a id="user-content-static-dictionary-encodevariant-value" class="anchor" aria-hidden="true" href="#static-dictionary-encodevariant-value"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>static Dictionary encode(Variant value)</code>
</h7>
<p dir="auto">Convert a value (number, string, array and dictionary) into their
counterparts in messagepack. Returns dictionary with three fields:
<code>result</code> which is the packed data (a PoolByteArray); <code>error</code> which is the
error code; and <code>error_string</code> which is a human readable error message</p>
<h7 dir="auto">
<a id="user-content-static-dictionary-decodepoolbytearray-bytes" class="anchor" aria-hidden="true" href="#static-dictionary-decodepoolbytearray-bytes"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>static Dictionary decode(PoolByteArray bytes)</code>
</h7>
<p dir="auto">Convert a packed data (a PoolByteArray) back into a value, the reverse of the
encode function. The return value is similar to the one in the encode
method</p>
<h5 dir="auto">
<a id="user-content-limitation" class="anchor" aria-hidden="true" href="#limitation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Limitation</h5>
<ul dir="auto">
<li>Only support null, boolean, integer, float, PoolByteArray, string, array and
dictionary. No support for other data type like Vector2 and Vector3</li>
<li>No support for the ext datatype in MessagePack</li>
<li>Slow compare to the built-in binary serialization in godot</li>
</ul>
<h5 dir="auto">
<a id="user-content-testcases" class="anchor" aria-hidden="true" href="#testcases"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Testcases</h5>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="godot -s run_test.gd"><pre class="notranslate"><code>godot -s run_test.gd
</code></pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-dchenk-msgp" class="qs"><h4><a href="https://github.com/dchenk/msgp" target="_blank">dchenk/msgp <span class="qs-url">https://github.com/dchenk/msgp</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container js-search-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack-code-generator-and-library-for-go" class="anchor" aria-hidden="true" href="#messagepack-code-generator-and-library-for-go"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack Code Generator and Library for Go</h5>
<p dir="auto"><a href="https://travis-ci.org/dchenk/msgp" rel="nofollow"><img src="https://camo.githubusercontent.com/74396975b3d3402e91922c0657b7a6a63aa61efbf272fa34ad5541b6a6bc34d5/68747470733a2f2f7472617669732d63692e6f72672f646368656e6b2f6d7367702e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/dchenk/msgp.svg?branch=master" style="max-width: 100%;"></a>
<a href="https://goreportcard.com/badge/github.com/dchenk/msgp" rel="nofollow"><img src="https://camo.githubusercontent.com/52395d0f6892da0300a0dd4546ec980c381bfad9261daf6dd9c539912732daac/68747470733a2f2f676f7265706f7274636172642e636f6d2f62616467652f6769746875622e636f6d2f646368656e6b2f6d736770" alt="Go Report Card" data-canonical-src="https://goreportcard.com/badge/github.com/dchenk/msgp" style="max-width: 100%;"></a>
<a href="https://godoc.org/github.com/dchenk/msgp/msgp" rel="nofollow"><img src="https://camo.githubusercontent.com/cb25a77e41c228e3ce5c39a742ed035ac4b49c9db5aa5e2a8481dbdfc1a71963/68747470733a2f2f676f646f632e6f72672f6769746875622e636f6d2f646368656e6b2f6d7367703f7374617475732e737667" alt="GoDoc" data-canonical-src="https://godoc.org/github.com/dchenk/msgp?status.svg" style="max-width: 100%;"></a></p>
<p dir="auto">This is a code generation tool and serialization library for MessagePack. You can read more about MessagePack <a href="https://github.com/dchenk/msgp/wiki">in the wiki</a>
or at <a href="https://msgpack.org" rel="nofollow">msgpack.org</a>.</p>
<p dir="auto"><strong>This library is no longer being maintained. You should be using <a href="https://developers.google.com/protocol-buffers/" rel="nofollow">Protocol Buffers</a> for binary data serialization</strong></p>
<h7 dir="auto">
<a id="user-content-top-features" class="anchor" aria-hidden="true" href="#top-features"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Top Features</h7>
<ul dir="auto">
<li>Use Go as your schema language</li>
<li>Performance is amazing</li>
<li>JSON <a href="https://godoc.org/github.com/dchenk/msgp/msgp#CopyToJSON" rel="nofollow">interoperability</a>
</li>
<li>Type safety</li>
<li>Support for complex type declarations</li>
<li>Define your own <a href="https://github.com/dchenk/msgp/wiki/Using-Extensions">MessagePack extensions</a>
</li>
<li>Automatic unit test and benchmark generation</li>
<li>Native support for Go’s <code>time.Time</code>, <code>complex64</code>, and <code>complex128</code> types</li>
<li><a href="https://github.com/dchenk/msgp/wiki/Using-the-Code-Generator">Preprocessor directives</a></li>
<li>Generation of both <code>[]byte</code>-oriented and <code>io.Reader/io.Writer</code>-oriented methods</li>
</ul>
<h7 dir="auto">
<a id="user-content-quickstart" class="anchor" aria-hidden="true" href="#quickstart"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Quickstart</h7>
<p dir="auto">In a Go code source file, include the following directive:</p>
<div class="highlight highlight-source-go notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="//go:generate msgp"><pre><span class="pl-c">//go:generate msgp</span></pre></div>
<p dir="auto">Within the directory with the file where you placed that directive, run <code>go generate</code>.</p>
<p dir="auto">The <code>msgp</code> command will tell the <code>go generate</code> tool to generate serialization and deserialization methods (functions) for all exported types in the file. These custom-built functions enable you to use package <a href="https://godoc.org/github.com/dchenk/msgp/msgp" rel="nofollow"><code>msgp</code></a> to efficiently encode objects to and from the MessagePack format.</p>
<p dir="auto">You can <a href="https://github.com/dchenk/msgp/wiki/Using-the-Code-Generator">read more about the code generation options here</a>.</p>
<h7 dir="auto">
<a id="user-content-use" class="anchor" aria-hidden="true" href="#use"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Use</h7>
<p dir="auto">Struct field names can be set the same way as with the <code>encoding/json</code> package. For example:</p>
<div class="highlight highlight-source-go notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='type Person struct {
    Name       string `msgp:"name"`
    Address    string `msgp:"address"`
    Age        int    `msgp:"age"`
    Hidden     string `msgp:"-"` // this field is ignored
    unexported bool              // this field is also ignored
}'><pre><span class="pl-k">type</span> <span class="pl-smi">Person</span> <span class="pl-k">struct</span> {
    <span class="pl-c1">Name</span>       <span class="pl-smi">string</span> <span class="pl-s">`msgp:"name"`</span>
    <span class="pl-c1">Address</span>    <span class="pl-smi">string</span> <span class="pl-s">`msgp:"address"`</span>
    <span class="pl-c1">Age</span>        <span class="pl-smi">int</span>    <span class="pl-s">`msgp:"age"`</span>
    <span class="pl-c1">Hidden</span>     <span class="pl-smi">string</span> <span class="pl-s">`msgp:"-"`</span> <span class="pl-c">// this field is ignored</span>
    <span class="pl-c1">unexported</span> <span class="pl-smi">bool</span>              <span class="pl-c">// this field is also ignored</span>
}</pre></div>
<p dir="auto">(The struct field tags are optional.)</p>
<p dir="auto">By default, the code generator will satisfy <code>msgp.Sizer</code>, <code>msgp.Encoder</code>, <code>msgp.Decoder</code>, <code>msgp.Marshaler</code>, and <code>msgp.Unmarshaler</code>.
You’ll often find that much marshalling and unmarshalling will be done with zero heap allocations.</p>
<p dir="auto">Although <code>msgp.Marshaler</code> and <code>msgp.Unmarshaler</code> are similar to the standard library’s <code>json.Marshaler</code> and <code>json.Unmarshaler</code>,
<code>msgp.Encoder</code> and <code>msgp.Decoder</code> are useful for stream serialization. (<code>*msgp.Writer</code> and <code>*msgp.Reader</code> are essentially
protocol-aware versions of <code>*bufio.Writer</code> and <code>*bufio.Reader</code>.)</p>
<p dir="auto">Consider the following:</p>
<div class="highlight highlight-source-go notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='const Eight = 8
type MyInt int
type Data []byte

type Struct struct {
    Which  map[string]*MyInt `msgp:"which"`
    Other  Data              `msgp:"other"`
    Nums   [Eight]float64    `msgp:"nums"`
}'><pre><span class="pl-k">const</span> <span class="pl-s1">Eight</span> <span class="pl-c1">=</span> <span class="pl-c1">8</span>
<span class="pl-k">type</span> <span class="pl-smi">MyInt</span> <span class="pl-smi">int</span>
<span class="pl-k">type</span> <span class="pl-smi">Data</span> []<span class="pl-smi">byte</span>

<span class="pl-k">type</span> <span class="pl-smi">Struct</span> <span class="pl-k">struct</span> {
    <span class="pl-c1">Which</span>  <span class="pl-k">map</span>[<span class="pl-smi">string</span>]<span class="pl-c1">*</span><span class="pl-smi">MyInt</span> <span class="pl-s">`msgp:"which"`</span>
    <span class="pl-c1">Other</span>  <span class="pl-smi">Data</span>              <span class="pl-s">`msgp:"other"`</span>
    <span class="pl-c1">Nums</span>   [<span class="pl-s1">Eight</span>]<span class="pl-smi">float64</span>    <span class="pl-s">`msgp:"nums"`</span>
}</pre></div>
<p dir="auto">As long as the declarations of <code>MyInt</code> and <code>Data</code> are in the same file as <code>Struct</code>, the parser will determine that the type information
for <code>MyInt</code> and <code>Data</code> can be passed into the definition of <code>Struct</code> before its methods are generated.</p>
<h8 dir="auto">
<a id="user-content-extensions" class="anchor" aria-hidden="true" href="#extensions"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Extensions</h8>
<p dir="auto">MessagePack supports defining your own types through "extensions," which are just a tuple of the data "type" (<code>int8</code>) and the raw binary.
You can see <a href="https://github.com/dchenk/msgp/wiki/Using-Extensions">a worked example in the wiki.</a></p>
<h7 dir="auto">
<a id="user-content-status" class="anchor" aria-hidden="true" href="#status"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Status</h7>
<p dir="auto">The code generator here and runtime library are both stable. Newer versions of the code may generate different code than older versions
for performance reasons.</p>
<p dir="auto">You can read more about how <code>msgp</code> maps MessagePack types onto Go types <a href="http://github.com/dchenk/msgp/wiki">in the wiki</a>.</p>
<p dir="auto">Here some of the known limitations/restrictions:</p>
<ul dir="auto">
<li>Identifiers from outside the processed source file are assumed to satisfy the generator's interfaces. If this isn't the case, your code
will fail to compile.</li>
<li>The <code>chan</code> and <code>func</code> fields and types are ignored as well as un-exported fields.</li>
<li>Encoding of <code>interface{}</code> is limited to built-ins or types that have explicit encoding methods.</li>
<li>Maps must have <code>string</code> keys. This is intentional (as it preserves JSON interoperability). Although non-string map keys are not forbidden
by the MessagePack standard, many serializers impose this restriction. (It also means <em>any</em> well-formed <code>struct</code> can be decoded into a
<code>map[string]interface{}</code>.) The only exception to this rule is that the decoders will allow you to read map keys encoded as <code>bin</code> types,
since some legacy encodings permitted this. (However, those values will still be cast to Go <code>string</code>s, and they will be converted to <code>str</code>
types when re-encoded. It is the responsibility of the user to ensure that map keys are UTF-8 safe in this case.) The same rules hold true
for JSON translation.</li>
</ul>
<p dir="auto">If the output compiles, then there's a pretty good chance things are fine. (Plus, we generate tests for you.) Please file an issue if you
think the generator is writing broken code.</p>
<h7 dir="auto">
<a id="user-content-performance" class="anchor" aria-hidden="true" href="#performance"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Performance</h7>
<p dir="auto">If you like benchmarks, see <a href="https://github.com/dchenk/messagepack-benchmarks">here</a>, <a href="http://bravenewgeek.com/so-you-wanna-go-fast/" rel="nofollow">here</a>,
and <a href="https://github.com/alecthomas/go_serialization_benchmarks">here</a>.</p>
<h6 dir="auto">
<a id="user-content-credits" class="anchor" aria-hidden="true" href="#credits"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Credits</h6>
<p dir="auto">This repository is a fork of github.com/tinylib/msgp.</p>
<p dir="auto">Differences between this tool and tinylib/msgp:</p>
<ul dir="auto">
<li>Here we have <a href="https://github.com/dchenk/msgp/wiki/Using-the-Code-Generator#matching-type-names">regular expression matching</a> for type
names in directives.</li>
<li>Here we do not use package <code>unsafe</code> for conversions from byte slices to strings: <code>[]byte</code> is converted quite efficiently to <code>string</code>
simply with the built-in <code>string()</code>.</li>
<li>This codebase is thoroughly refactored to be more Go-idiomatic and efficient.</li>
</ul>
<p dir="auto">You're welcome to contribute!</p>
</article>
  </div>
        </div>
        
        <div id="qs-shamaton-msgpackgen" class="qs"><h4><a href="https://github.com/shamaton/msgpackgen" target="_blank">shamaton/msgpackgen <span class="qs-url">https://github.com/shamaton/msgpackgen</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container js-search-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack-code-generator-for-go" class="anchor" aria-hidden="true" href="#messagepack-code-generator-for-go"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack Code Generator for Go</h5>
<p dir="auto"><a href="https://pkg.go.dev/github.com/shamaton/msgpackgen" rel="nofollow"><img src="https://camo.githubusercontent.com/10921201495956d2ae13555a57828121308eeafa6d3b3c9e4e90e95ee2cc28f4/68747470733a2f2f706b672e676f2e6465762f62616467652f6769746875622e636f6d2f7368616d61746f6e2f6d73677061636b67656e2e737667" alt="Go Reference" data-canonical-src="https://pkg.go.dev/badge/github.com/shamaton/msgpackgen.svg" style="max-width: 100%;"></a>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/shamaton/msgpackgen/workflows/test/badge.svg"><img src="https://github.com/shamaton/msgpackgen/workflows/test/badge.svg" alt="test" style="max-width: 100%;"></a>
<a href="https://goreportcard.com/report/github.com/shamaton/msgpackgen" rel="nofollow"><img src="https://camo.githubusercontent.com/a693d15dcdd5e6c22911cb0107e9b064be2bf195b88fccf760f3e6708f8589a5/68747470733a2f2f676f7265706f7274636172642e636f6d2f62616467652f6769746875622e636f6d2f7368616d61746f6e2f6d73677061636b67656e" alt="Go Report Card" data-canonical-src="https://goreportcard.com/badge/github.com/shamaton/msgpackgen" style="max-width: 100%;"></a>
<a href="https://codecov.io/gh/shamaton/msgpackgen" rel="nofollow"><img src="https://camo.githubusercontent.com/d9f93a215473ec655021a1e543ed31ce3018eaba58c4d69a75139a4a74bcfa34/68747470733a2f2f636f6465636f762e696f2f67682f7368616d61746f6e2f6d73677061636b67656e2f6272616e63682f6d61696e2f67726170682f62616467652e7376673f746f6b656e3d4b374d33373738583743" alt="codecov" data-canonical-src="https://codecov.io/gh/shamaton/msgpackgen/branch/main/graph/badge.svg?token=K7M3778X7C" style="max-width: 100%;"></a>
<a href="https://app.fossa.com/projects/git%2Bgithub.com%2Fshamaton%2Fmsgpackgen?ref=badge_shield" rel="nofollow"><img src="https://camo.githubusercontent.com/366c7a05179e0bfd43d6aaef746666996b9087200f84479887af5f92de13e2c6/68747470733a2f2f6170702e666f7373612e636f6d2f6170692f70726f6a656374732f6769742532426769746875622e636f6d2532467368616d61746f6e2532466d73677061636b67656e2e7376673f747970653d736869656c64" alt="FOSSA Status" data-canonical-src="https://app.fossa.com/api/projects/git%2Bgithub.com%2Fshamaton%2Fmsgpackgen.svg?type=shield" style="max-width: 100%;"></a></p>
<p dir="auto"><strong>msgpackgen</strong> provides a code generation tool and serialization library for <a href="http://msgpack.org/" rel="nofollow">MessagePack</a>.</p>
<ul dir="auto">
<li>
<g-emoji class="g-emoji" alias="rocket" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f680.png">🚀</g-emoji> Extremely Fast</li>
<li>
<g-emoji class="g-emoji" alias="recycle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/267b.png">♻️</g-emoji> Easy Maintenance</li>
<li>
<g-emoji class="g-emoji" alias="100" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4af.png">💯</g-emoji> Compliant with <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">specifications</a>
</li>
</ul>
<h6 dir="auto">
<a id="user-content-quickstart" class="anchor" aria-hidden="true" href="#quickstart"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Quickstart</h6>
<p dir="auto">Create go.mod file, if you still have not created.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="# example
go mod init github.com/user/awesome"><pre><span class="pl-c"><span class="pl-c">#</span> example</span>
go mod init github.com/user/awesome</pre></div>
<p dir="auto">In a source file(ex. main.go), include the following directive:</p>
<div class="highlight highlight-source-go notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="//go:generate msgpackgen
or
//go:generate go run github.com/shamaton/msgpackgen"><pre><span class="pl-c">//go:generate msgpackgen</span>
<span class="pl-s1">or</span>
<span class="pl-c">//go:generate go run github.com/shamaton/msgpackgen</span></pre></div>
<p dir="auto">And run the following command in your shell:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="go generate"><pre>go generate</pre></div>
<p dir="auto">It will generate one <code>.go</code> file for serialization, default is <code>resolver.msgpackgen.go</code>.
You can call one method to use generated code.</p>
<div class="highlight highlight-source-go notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="func main() {
	// this method is defined in resolver.msgpackgen.go
	RegisterGeneratedResolver()
	
	// ... your code ...
}"><pre><span class="pl-k">func</span> <span class="pl-en">main</span>() {
	<span class="pl-c">// this method is defined in resolver.msgpackgen.go</span>
	<span class="pl-en">RegisterGeneratedResolver</span>()
	
	<span class="pl-c">// ... your code ...</span>
}</pre></div>
<p dir="auto"><code>Marshal</code> and <code>Unmarshal</code> look like this:</p>
<div class="highlight highlight-source-go notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="    // import github.com/shamaton/msgpackgen/msgpack
    v := ResolvedStruct{}
    b, err := msgpack.Marshal(v)
    if err != nil {
        panic(err)
    }
    
    var vv ResolvedStruct
    err = msgpack.Unmarshal(b, &amp;vv)
    if err != nil {
        panic(err)
    }"><pre>    <span class="pl-c">// import github.com/shamaton/msgpackgen/msgpack</span>
    <span class="pl-s1">v</span> <span class="pl-c1">:=</span> <span class="pl-smi">ResolvedStruct</span>{}
    <span class="pl-s1">b</span>, <span class="pl-s1">err</span> <span class="pl-c1">:=</span> <span class="pl-s1">msgpack</span>.<span class="pl-en">Marshal</span>(<span class="pl-s1">v</span>)
    <span class="pl-k">if</span> <span class="pl-s1">err</span> <span class="pl-c1">!=</span> <span class="pl-c1">nil</span> {
        <span class="pl-en">panic</span>(<span class="pl-s1">err</span>)
    }
    
    <span class="pl-k">var</span> <span class="pl-s1">vv</span> <span class="pl-smi">ResolvedStruct</span>
    <span class="pl-s1">err</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span>.<span class="pl-en">Unmarshal</span>(<span class="pl-s1">b</span>, <span class="pl-c1">&amp;</span><span class="pl-s1">vv</span>)
    <span class="pl-k">if</span> <span class="pl-s1">err</span> <span class="pl-c1">!=</span> <span class="pl-c1">nil</span> {
        <span class="pl-en">panic</span>(<span class="pl-s1">err</span>)
    }</pre></div>
<h6 dir="auto">
<a id="user-content-serializer" class="anchor" aria-hidden="true" href="#serializer"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Serializer</h6>
<h7 dir="auto">
<a id="user-content-supported-types" class="anchor" aria-hidden="true" href="#supported-types"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Supported Types</h7>
<p dir="auto">primitive types:<br>
<code>int</code>, <code>int8</code>, <code>int16</code>, <code>int32</code>, <code>int64</code>,
<code>uint</code>, <code>uint8</code>, <code>uint16</code>, <code>uint32</code>, <code>uint64</code>,
<code>float32</code>, <code>float64</code>, <code>string</code>, <code>bool</code>, <code>byte</code>, <code>rune</code>,
<code>complex64</code>, <code>complex128</code></p>
<p dir="auto">slice, array: <code>[]</code>, <code>[cap]</code></p>
<p dir="auto">map: <code>map[key]value</code></p>
<p dir="auto">struct: <code>time.Time</code> and structures you defined</p>
<h7 dir="auto">
<a id="user-content-tags" class="anchor" aria-hidden="true" href="#tags"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Tags</h7>
<p dir="auto">Renaming or omitting are available.</p>
<ul dir="auto">
<li>Renaming fields via <code>msgpack:"field_name"</code>
</li>
<li>Omitting fields via <code>msgpack:"-"</code>
</li>
</ul>
<h7 dir="auto">
<a id="user-content-switch-default-behaviour" class="anchor" aria-hidden="true" href="#switch-default-behaviour"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Switch Default Behaviour</h7>
<p dir="auto">Default serialization behaviour is map type. But the performance of array type is better.
If you want to switch array type as default, use <code>SetStructAsArray</code>.</p>
<p dir="auto">Also, you can use <code>MarshalAsArray</code>, <code>UnmarshalAsArray</code>.</p>
<h6 dir="auto">
<a id="user-content-code-generator" class="anchor" aria-hidden="true" href="#code-generator"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Code Generator</h6>
<h7 dir="auto">
<a id="user-content-easy-maintenance" class="anchor" aria-hidden="true" href="#easy-maintenance"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Easy maintenance</h7>
<p dir="auto">This tool generates only one <code>.go</code> file.
All you have to delete is one generated <code>.go</code> file.</p>
<h7 dir="auto">
<a id="user-content-analyzing" class="anchor" aria-hidden="true" href="#analyzing"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Analyzing</h7>
<p dir="auto"><code>-input-dir</code> needs to be in $GOPATH.</p>
<p dir="auto">Resolver is generated by recursively searching directories,
but some directories and files are ignored.</p>
<ul dir="auto">
<li>Prefix <code>_</code> and <code>.</code> directory.</li>
<li>
<code>testdata</code> and <code>vendor</code> directory</li>
<li>
<code>_test.go</code> file</li>
</ul>
<p dir="auto">If you use <code>-input-file</code> option, it will work without considering the above conditions.</p>
<hr>
<p dir="auto">Compatible with various import rules.</p>
<div class="highlight highlight-source-go notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import ("
	"example.com/user/a/b"
	d "example.com/user/a/c"
	. "example.com/user/a/e"
)'><pre><span class="pl-k">import</span> (<span class="pl-s">"</span>
<span class="pl-s">	"</span><span class="pl-s1">example</span>.<span class="pl-s1">com</span><span class="pl-c1">/</span><span class="pl-s1">user</span><span class="pl-c1">/</span><span class="pl-s1">a</span><span class="pl-c1">/</span><span class="pl-s1">b</span>"
	d <span class="pl-s">"example.com/user/a/c"</span>
	. <span class="pl-s">"example.com/user/a/e"</span>
)</pre></div>
<h7 dir="auto">
<a id="user-content-not-generated-case" class="anchor" aria-hidden="true" href="#not-generated-case"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Not Generated Case</h7>
<p dir="auto">Not generated in the following cases:</p>
<div class="highlight highlight-source-go notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="// ex. a/example.go
type Example struct {
	// unsupported types
	Interface interface{}
	Uintptr uintptr
	Error error
	Chan chan
	Func func()
	
	// nested struct is also unsupported
	NestedStruct struct {}
	
	// because b.Example is not generated
	B b.Example
	
	// because bytes.Butffer is in outside package
	Buf bytes.Buffer
}

func (e Example) F() {
	// unsupported  struct defined in func
	type InFunction struct {}
}

// ex a/b/example.go
type Example struct {
	Interface interface{}
}"><pre><span class="pl-c">// ex. a/example.go</span>
<span class="pl-k">type</span> <span class="pl-smi">Example</span> <span class="pl-k">struct</span> {
	<span class="pl-c">// unsupported types</span>
	<span class="pl-c1">Interface</span> <span class="pl-k">interface</span>{}
	<span class="pl-c1">Uintptr</span> <span class="pl-smi">uintptr</span>
	<span class="pl-c1">Error</span> <span class="pl-smi">error</span>
	<span class="pl-c1">Chan</span> <span class="pl-k">chan</span>
	<span class="pl-s1">Func</span> <span class="pl-k">func</span>()
	
	<span class="pl-c">// nested struct is also unsupported</span>
	<span class="pl-c1">NestedStruct</span> <span class="pl-k">struct</span> {}
	
	<span class="pl-c">// because b.Example is not generated</span>
	<span class="pl-c1">B</span> b.<span class="pl-smi">Example</span>
	
	<span class="pl-c">// because bytes.Butffer is in outside package</span>
	<span class="pl-c1">Buf</span> bytes.<span class="pl-smi">Buffer</span>
}

<span class="pl-k">func</span> (<span class="pl-s1">e</span> <span class="pl-smi">Example</span>) <span class="pl-en">F</span>() {
	<span class="pl-c">// unsupported  struct defined in func</span>
	<span class="pl-k">type</span> <span class="pl-smi">InFunction</span> <span class="pl-k">struct</span> {}
}

<span class="pl-c">// ex a/b/example.go</span>
<span class="pl-k">type</span> <span class="pl-smi">Example</span> <span class="pl-k">struct</span> {
	<span class="pl-c1">Interface</span> <span class="pl-k">interface</span>{}
}</pre></div>
<p dir="auto">If you serialize a struct that wasn't code generated, it will be processed by <a href="https://github.com/shamaton/msgpack">shamaton/msgpack</a>.</p>
<h7 dir="auto">
<a id="user-content-strict-mode" class="anchor" aria-hidden="true" href="#strict-mode"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Strict Mode</h7>
<p dir="auto">If you use strict mode(option <code>-strict</code>), you will get an error if an unrecognized structure is passed.
In other words,  <a href="https://github.com/shamaton/msgpack">shamaton/msgpack</a> is not used.</p>
<hr>
<p dir="auto">See also <code>msgpackgen -h</code></p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='Usage of msgpackgen:
  -dry-run
        dry run mode
  -input-dir string
        input directory. input-file cannot be used at the same time (default ".")
  -input-file string
        input a specific file. input-dir cannot be used at the same time
  -output-dir string
        output directory (default ".")
  -output-file string
        name of generated file (default "resolver.msgpackgen.go")
  -pointer int
        pointer level to consider (default 1)
  -strict
        strict mode
  -use-gopath
        use GOPATH instead of go.mod
  -v    verbose diagnostics'><pre>Usage of msgpackgen:
  -dry-run
        dry run mode
  -input-dir string
        input directory. input-file cannot be used at the same <span class="pl-k">time</span> (default <span class="pl-s"><span class="pl-pds">"</span>.<span class="pl-pds">"</span></span>)
  -input-file string
        input a specific file. input-dir cannot be used at the same <span class="pl-k">time</span>
  -output-dir string
        output directory (default <span class="pl-s"><span class="pl-pds">"</span>.<span class="pl-pds">"</span></span>)
  -output-file string
        name of generated file (default <span class="pl-s"><span class="pl-pds">"</span>resolver.msgpackgen.go<span class="pl-pds">"</span></span>)
  -pointer int
        pointer level to consider (default 1)
  -strict
        strict mode
  -use-gopath
        use GOPATH instead of go.mod
  -v    verbose diagnostics</pre></div>
<h6 dir="auto">
<a id="user-content-benchmarks" class="anchor" aria-hidden="true" href="#benchmarks"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Benchmarks</h6>
<p dir="auto">These results are recorded by <a href="https://github.com/shamaton/msgpack_bench">msgpack_bench</a> at 2021/08.<br>
The result of this package is that the suffix has <code>ShamatonGen</code>.
<a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/4637556/128298988-0e3c96fd-6014-42a0-9050-36e2b58316b1.png"><img src="https://user-images.githubusercontent.com/4637556/128298988-0e3c96fd-6014-42a0-9050-36e2b58316b1.png" alt="msgpack_bench" style="max-width: 100%;"></a>
The result of <a href="https://github.com/alecthomas/go_serialization_benchmarks">go_serialization_benchmarks</a> is here.
<a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/4637556/128299037-06b3a645-2726-4205-848a-cccebb9a3d7f.png"><img src="https://user-images.githubusercontent.com/4637556/128299037-06b3a645-2726-4205-848a-cccebb9a3d7f.png" alt="go_serialization_benchmarks" style="max-width: 100%;"></a></p>
</article>
  </div>
        </div>
        
        <div id="qs-nnabeyang-go-msgpack" class="qs"><h4><a href="https://github.com/nnabeyang/go-msgpack" target="_blank">nnabeyang/go-msgpack <span class="qs-url">https://github.com/nnabeyang/go-msgpack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container js-search-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-go-msgpack" class="anchor" aria-hidden="true" href="#go-msgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>go-msgpack</h5>
<p dir="auto">go-msgpack is a package of MessagePack encoding for Go.</p>
<h6 dir="auto">
<a id="user-content-quick-start" class="anchor" aria-hidden="true" href="#quick-start"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Quick Start</h6>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='package main

import (
	gomsgpack "github.com/nnabeyang/go-msgpack"
)

type Pair struct {
	X int
	Y int
}

func main() {
	v := Pair{X: 1, Y: 2}
	data, err := gomsgpack.Marshal(v, false)
	if err != nil {
		panic(err)
	}
	var r Pair
	if err := gomsgpack.Unmarshal(data, &amp;r); err != nil {
		panic(err)
	}
}'><pre class="notranslate"><code>package main

import (
	gomsgpack "github.com/nnabeyang/go-msgpack"
)

type Pair struct {
	X int
	Y int
}

func main() {
	v := Pair{X: 1, Y: 2}
	data, err := gomsgpack.Marshal(v, false)
	if err != nil {
		panic(err)
	}
	var r Pair
	if err := gomsgpack.Unmarshal(data, &amp;r); err != nil {
		panic(err)
	}
}
</code></pre></div>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<p dir="auto">go-msgpack is published under the MIT License, see LICENSE.</p>
<h6 dir="auto">
<a id="user-content-author" class="anchor" aria-hidden="true" href="#author"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Author</h6>
<p dir="auto"><a href="https://twitter.com/nnabeyang" rel="nofollow">Noriaki Watanabe@nnabeyang</a></p>
</article>
  </div>
        </div>
        
        <div id="qs-jonghough-msgpack-j" class="qs"><h4><a href="https://github.com/jonghough/msgpack-j" target="_blank">jonghough/msgpack-j <span class="qs-url">https://github.com/jonghough/msgpack-j</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container js-search-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack-j" class="anchor" aria-hidden="true" href="#msgpack-j"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack-j</h5>
<p dir="auto">Implementation of the Message Pack serialization format in J.
###Usage
import into projects and open in jqt or other. It's very simple.</p>
<p dir="auto">###Examples
<code>pack</code> packs J types into a byte string. <code>unpack</code> reverses this.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  `pack 'hello world'`

     `�hello world`

  `unpack �hello world`

     `'hello world'`"><pre class="notranslate"><code>  `pack 'hello world'`

     `�hello world`

  `unpack �hello world`

     `'hello world'`
</code></pre></div>
<p dir="auto"><b><code>packObj</code></b> packs J types into a hex string (string literal). <b><code>unpackObj</code></b> reverses this.</p>
<p dir="auto">e.g.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="   `packObj 'Hello World'`

     `ab48656c6c6f20576f726c64`

  `unpackObj 'ab48656c6c6f20576f726c64'`

     `Hello World`"><pre class="notranslate"><code>   `packObj 'Hello World'`

     `ab48656c6c6f20576f726c64`

  `unpackObj 'ab48656c6c6f20576f726c64'`

     `Hello World`
</code></pre></div>
<p dir="auto">###More Usage
Example:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  `pack 2;4.67;'hello, world'`

     `���@┐�┼z�G��hello, world`

  `packObj 2;4.67;'hello, world'`

     `9302cb4012ae147ae147aeac68656c6c6f2c20776f726c64`"><pre class="notranslate"><code>  `pack 2;4.67;'hello, world'`

     `���@┐�┼z�G��hello, world`

  `packObj 2;4.67;'hello, world'`

     `9302cb4012ae147ae147aeac68656c6c6f2c20776f726c64`
</code></pre></div>
<p dir="auto">JSON representation:
<code>[2,4.67,"hello, world"]</code></p>
<p dir="auto">Example:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  `unpackObj '81a46461746183a2696401a673636f72657394cb400999999999999acb4016cccccccccccdcb40091eb851eb851fcb4007333333333333a56f7468657283a4736f6d65d1f2b8a46d6f7265ccc8a4646174610c'`"><pre class="notranslate"><code>  `unpackObj '81a46461746183a2696401a673636f72657394cb400999999999999acb4016cccccccccccdcb40091eb851eb851fcb4007333333333333a56f7468657283a4736f6d65d1f2b8a46d6f7265ccc8a4646174610c'`
</code></pre></div>
<p dir="auto">returns a nested dictionary.</p>
<p dir="auto">JSON representation:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='  `{"data":{"id":1,"scores":[3.2,5.7,3.14,2.9],"other":{"some":_3400,"more":200,"data":12}}}`'><pre class="notranslate"><code>  `{"data":{"id":1,"scores":[3.2,5.7,3.14,2.9],"other":{"some":_3400,"more":200,"data":12}}}`
</code></pre></div>
<p dir="auto">###Handling dictionary / hashmap datatypes</p>
<p dir="auto">Since J has no native Dictionary / Hashmap type, one has been implemented for the purposes of MsgPack serialization.</p>
<p dir="auto">Construction:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  `HM =: '' conew 'HashMap'`"><pre class="notranslate"><code>  `HM =: '' conew 'HashMap'`
</code></pre></div>
<p dir="auto">This will instantiate a new HashMap object.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  `set__HM 'key';'value'`"><pre class="notranslate"><code>  `set__HM 'key';'value'`
</code></pre></div>
<p dir="auto">This will add a key value pair to the dicitonary. Note the length of the boxed array argument must be two. i.e. if  the value is an array itself, then it must be boxed together before appending to the key value.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  `get__HM 'key'`"><pre class="notranslate"><code>  `get__HM 'key'`
</code></pre></div>
<p dir="auto">This will return the value for the given key, if one exists.</p>
<p dir="auto">To pack a HashMap:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  `packObj s: HM`"><pre class="notranslate"><code>  `packObj s: HM`
</code></pre></div>
<p dir="auto">Here HM is the HashMap reference name. It must be symbolized first, before packing. Furthermore, to add a HashMap as a value of another HashMap:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  `set__HM 'hashmapkey';s:HM2`"><pre class="notranslate"><code>  `set__HM 'hashmapkey';s:HM2`
</code></pre></div>
<p dir="auto">The inner HashMap reference (HM2) must be symbolized before adding to the dictionary. If you are adding a list of HashMaps to the parent HashMap:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  `set__HM 'key'; &lt;(s:HM2;s:HM3;s:HM4)`"><pre class="notranslate"><code>  `set__HM 'key'; &lt;(s:HM2;s:HM3;s:HM4)`
</code></pre></div>
<p dir="auto">Note the HashMap array is boxed so that the argument for <code>set</code> is of length two. Since the HashMap <code>HM</code> stores the reference to the child HashMaps as symbols, they must be desymbolized if retrieved. e.g.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  `ChildHM =: getHashmapFromValue_HashMap_ get__HM 'mychildHashMapkey'`"><pre class="notranslate"><code>  `ChildHM =: getHashmapFromValue_HashMap_ get__HM 'mychildHashMapkey'`
</code></pre></div>
<p dir="auto">Here, <b><code>getHashmapFromValue_HashMap_</code></b> ensures that the retrieved object is a reference to a hashmap, as is wanted.</p>
<p dir="auto">When unpacking data, assuming the root object is a dictionary / hashmap:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  `HM =: 5 s: unpackObj 'some serialized data'`"><pre class="notranslate"><code>  `HM =: 5 s: unpackObj 'some serialized data'`
</code></pre></div>
<p dir="auto"><b><code>5 s:</code></b> must be called to desymbolize the reference to the HashMap. Furthermore, all child HashMaps of <code>HM</code> must also be desymbolized too.</p>
<p dir="auto">`</p>
</article>
  </div>
        </div>
        
        <div id="qs-textbook-express-msgpack" class="qs"><h4><a href="https://www.npmjs.com/package/express-msgpack" target="_blank">textbook/express-msgpack <span class="qs-url">https://www.npmjs.com/package/express-msgpack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container js-search-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-express-msgpack" class="anchor" aria-hidden="true" href="#express-msgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Express Msgpack</h5>
<p dir="auto"><a href="https://github.com/textbook/express-msgpack/blob/main/LICENSE"><img src="https://camo.githubusercontent.com/28a52d97d003af7a519d58854679b1abacfa8f71a7da509c0b2e7c708c637cbe/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f74657874626f6f6b2f657870726573732d6d73677061636b2e737667" alt="License" data-canonical-src="https://img.shields.io/github/license/textbook/express-msgpack.svg" style="max-width: 100%;"></a>
<a href="https://github.com/textbook/express-msgpack/actions"><img src="https://github.com/textbook/express-msgpack/workflows/Node.js%20CI/badge.svg?branch=main" alt="Build Status" style="max-width: 100%;"></a>
<a href="https://codeclimate.com/github/textbook/express-msgpack/test_coverage" rel="nofollow"><img src="https://camo.githubusercontent.com/d9a4eda6e027e26699f57da9904835df16aa59505a4b9b31ef033458cec987fa/68747470733a2f2f6170692e636f6465636c696d6174652e636f6d2f76312f6261646765732f65396138323065613737613031633162613862622f746573745f636f766572616765" alt="Test Coverage" data-canonical-src="https://api.codeclimate.com/v1/badges/e9a820ea77a01c1ba8bb/test_coverage" style="max-width: 100%;"></a>
<a href="https://codeclimate.com/github/textbook/express-msgpack/maintainability" rel="nofollow"><img src="https://camo.githubusercontent.com/74bdd14659f68722fa77fa4ab069c7ef0203ef1cc160ef1fc93400ff20ffdb71/68747470733a2f2f6170692e636f6465636c696d6174652e636f6d2f76312f6261646765732f65396138323065613737613031633162613862622f6d61696e7461696e6162696c697479" alt="Maintainability" data-canonical-src="https://api.codeclimate.com/v1/badges/e9a820ea77a01c1ba8bb/maintainability" style="max-width: 100%;"></a>
<a href="https://www.npmjs.com/package/express-msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/acaa9bfeeb2183b6e2c0cdd66911caf939b5aa9421f27a7bda8cb4bd7ae64a54/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f762f657870726573732d6d73677061636b2e737667" alt="NPM Version" data-canonical-src="https://img.shields.io/npm/v/express-msgpack.svg" style="max-width: 100%;"></a></p>
<p dir="auto"><a href="https://expressjs.com/" rel="nofollow">Express</a> and <a href="https://msgpack.org/" rel="nofollow">MessagePack</a>, together at last. Uses <a href="https://www.npmjs.com/package/@msgpack/msgpack" rel="nofollow"><code>@msgpack/msgpack</code></a> by default.</p>
<h6 dir="auto">
<a id="user-content-functionality" class="anchor" aria-hidden="true" href="#functionality"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Functionality</h6>
<p dir="auto">Provides transparent middleware that can be used to support clients requesting
<code>Accept: application/msgpack</code> from endpoints using <code>res.json</code> or sending
<code>Content-Type: application/msgpack</code> to any endpoint. You can continue to use
<code>req.body</code> and <code>res.json</code> and <code>expressMsgpack</code> will handle the conversion in
the background using <code>@msgpack/msgpack</code> (or any compatible library of your
choice).</p>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ npm install --save express-msgpack
// or
$ yarn add express-msgpack"><pre>$ npm install --save express-msgpack
// or
$ yarn add express-msgpack</pre></div>
<p dir="auto">If you intend to use an alternative to <code>@msgpack/msgpack</code> (see Configuration)
you can add the <code>--no-optional</code> flag; it's an optional dependency.</p>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import msgpack from "express-msgpack";

// ...
app.use(msgpack());'><pre><span class="pl-k">import</span> <span class="pl-s1">msgpack</span> <span class="pl-k">from</span> <span class="pl-s">"express-msgpack"</span><span class="pl-kos">;</span>

<span class="pl-c">// ...</span>
<span class="pl-s1">app</span><span class="pl-kos">.</span><span class="pl-en">use</span><span class="pl-kos">(</span><span class="pl-en">msgpack</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h6 dir="auto">
<a id="user-content-configuration" class="anchor" aria-hidden="true" href="#configuration"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Configuration</h6>
<p dir="auto">To configure, pass options when you configure the middleware. Currently supported options are:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>decoder</code></td>
<td>a function converting from MessagePack to JavaScript</td>
<td><code>@msgpack/msgpack#decode</code></td>
</tr>
<tr>
<td><code>encoder</code></td>
<td>a function converting from JavaScript to MessagePack</td>
<td>
<code>@msgpack/msgpack#encode</code> (with a wrapper to convert the result to a Buffer)</td>
</tr>
<tr>
<td><code>mimeType</code></td>
<td>the MIME type to detect and set for MessagePack payloads</td>
<td><code>"application/msgpack"</code></td>
</tr>
</tbody>
</table>
<p dir="auto">For example, to switch to the node-gyp C++ based <a href="https://www.npmjs.com/package/msgpack" rel="nofollow">msgpack</a> library:</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import msgpack from "express-msgpack";
import { pack, unpack } from "msgpack";

// ...
app.use(msgpack({ decoder: unpack, encoder: pack }));'><pre><span class="pl-k">import</span> <span class="pl-s1">msgpack</span> <span class="pl-k">from</span> <span class="pl-s">"express-msgpack"</span><span class="pl-kos">;</span>
<span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">pack</span><span class="pl-kos">,</span> <span class="pl-s1">unpack</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"msgpack"</span><span class="pl-kos">;</span>

<span class="pl-c">// ...</span>
<span class="pl-s1">app</span><span class="pl-kos">.</span><span class="pl-en">use</span><span class="pl-kos">(</span><span class="pl-en">msgpack</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">decoder</span>: <span class="pl-s1">unpack</span><span class="pl-kos">,</span> <span class="pl-c1">encoder</span>: <span class="pl-s1">pack</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h6 dir="auto">
<a id="user-content-development" class="anchor" aria-hidden="true" href="#development"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Development</h6>
<p dir="auto">The project has code linting and testing, using the following commands:</p>
<ul dir="auto">
<li>
<code>npm run e2e</code>: run the smoke/E2E tests</li>
<li>
<code>npm run lint</code>: run the ESLint checks</li>
<li>
<code>npm run ship</code>: lint and run unit, integration and E2E tests</li>
<li>
<code>npm test</code>: run the Jest unit and integration tests</li>
<li>
<code>npm test:watch</code>: run the tests in watch mode</li>
</ul>
<p dir="auto">The tests are in the <code>__tests__/</code> directory and are run using <a href="https://jestjs.io/" rel="nofollow">Jest</a>. They're
split into two files:</p>
<ul dir="auto">
<li>
<code>unit.test.ts</code> - mockist unit tests, to check specific internal details</li>
<li>
<code>integration.test.ts</code> - integration tests using <a href="https://github.com/visionmedia/supertest">SuperTest</a> with a simple
Express app using the middleware</li>
</ul>
<p dir="auto">There is also a <code>smoke/</code> directory containing E2E/smoke tests for a deployed
version of the package, used by <code>bin/smoke.sh</code>. If the <code>--local</code> argument is
supplied to the script the local version is packaged and tested , otherwise
the specified <code>$TAG</code> version is installed from the registry and tested.</p>
</article>
  </div>
        </div>
        
        <div id="qs-kropp-kotlinx-serialization-msgpack" class="qs"><h4><a href="https://github.com/kropp/kotlinx.serialization.msgpack" target="_blank">kropp/kotlinx.serialization.msgpack <span class="qs-url">https://github.com/kropp/kotlinx.serialization.msgpack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container js-search-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-kotlin-serialization-messagepack-library" class="anchor" aria-hidden="true" href="#kotlin-serialization-messagepack-library"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Kotlin Serialization MessagePack library</h5>
<p dir="auto">This library extends <a href="https://github.com/Kotlin/kotlinx.serialization/">kotlinx.serialization</a> framework to support
<a href="https://msgpack.org/" rel="nofollow">MessagePack</a> format.</p>
<h6 dir="auto">
<a id="user-content-implementation-details" class="anchor" aria-hidden="true" href="#implementation-details"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Implementation details</h6>
<p dir="auto">When multiple equivalent encodings exist, the shortest (in terms of number of bytes) is used.
Decoders decode any format and convert it to a required type (possibly loosing precision or significant higher digits)</p>
<p dir="auto">Thus, not for any input decoding and encoding back will produce the exact same byte array. However, for any <code>@Serializable</code> class
encoding and decoding should result in the equivalent instance.</p>
<h6 dir="auto">
<a id="user-content-current-limitations" class="anchor" aria-hidden="true" href="#current-limitations"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Current Limitations</h6>
<ul dir="auto">
<li>Only JVM is supported as of now</li>
<li>Unsigned integers can't be encoded because kotlinx.serialization framework <a href="https://github.com/Kotlin/kotlinx.serialization/issues/259" data-hovercard-type="issue" data-hovercard-url="/Kotlin/kotlinx.serialization/issues/259/hovercard">doesn't support <code>inline</code> classes</a> (yet)</li>
<li>MessagePack extensions are not supported</li>
</ul>
<h6 dir="auto">
<a id="user-content-verification" class="anchor" aria-hidden="true" href="#verification"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Verification</h6>
<p dir="auto">The implementation is tested against <a href="https://github.com/kawanet/msgpack-test-suite/">https://github.com/kawanet/msgpack-test-suite/</a></p>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="import com.github.kropp.messagepack.MessagePack

@Serializable
data class Demo(val compact: Boolean, val schema: Int)

val bytes = byteArrayOf(0x82.toByte(), 0xA7.toByte(), 0x63, 0x6F, 0x6D, 0x70, 0x61, 0x63, 0x74, 0xC3.toByte(), 0xA6.toByte(), 0x73, 0x63, 0x68, 0x65, 0x6D, 0x61, 0x00)
val demo = MessagePack.decode(Demo.serializer(), bytes)

assertEquals(demo.compact, true)
assertEquals(demo.schema, 0)"><pre><span class="pl-k">import</span> <span class="pl-smi">com.github.kropp.messagepack.MessagePack</span>

@Serializable
<span class="pl-k">data class</span> <span class="pl-en">Demo</span>(<span class="pl-k">val</span> <span class="pl-smi">compact</span><span class="pl-k">:</span> <span class="pl-c1">Boolean</span>, <span class="pl-k">val</span> <span class="pl-smi">schema</span><span class="pl-k">:</span> <span class="pl-c1">Int</span>)

<span class="pl-k">val</span> bytes <span class="pl-k">=</span> byteArrayOf(<span class="pl-c1">0x82</span>.toByte(), <span class="pl-c1">0xA7</span>.toByte(), <span class="pl-c1">0x63</span>, <span class="pl-c1">0x6F</span>, <span class="pl-c1">0x6D</span>, <span class="pl-c1">0x70</span>, <span class="pl-c1">0x61</span>, <span class="pl-c1">0x63</span>, <span class="pl-c1">0x74</span>, <span class="pl-c1">0xC3</span>.toByte(), <span class="pl-c1">0xA6</span>.toByte(), <span class="pl-c1">0x73</span>, <span class="pl-c1">0x63</span>, <span class="pl-c1">0x68</span>, <span class="pl-c1">0x65</span>, <span class="pl-c1">0x6D</span>, <span class="pl-c1">0x61</span>, <span class="pl-c1">0x00</span>)
<span class="pl-k">val</span> demo <span class="pl-k">=</span> <span class="pl-en">MessagePack</span>.decode(<span class="pl-en">Demo</span>.serializer(), bytes)

assertEquals(demo.compact, <span class="pl-c1">true</span>)
assertEquals(demo.schema, <span class="pl-c1">0</span>)</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-mradziwo-MsgPack_LabVIEW" class="qs"><h4><a href="https://github.com/mradziwo/MsgPack_LabVIEW" target="_blank">mradziwo/MsgPack_LabVIEW <span class="qs-url">https://github.com/mradziwo/MsgPack_LabVIEW</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container js-search-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack_lab-view" class="anchor" aria-hidden="true" href="#msgpack_lab-view"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MsgPack_Lab-VIEW</h5>
<p dir="auto">MsgPack_Lab-VIEW is a lightweight MessagePack serializer and deserializer library written in native LabVIEW 2016.</p>
<p dir="auto">One can decode a MsgPack message to LabVIEW variant containing correct type, or - when type is known at compile time - one can use dedicated decode functions for each supported type.</p>
</article>
  </div>
        </div>
        
        <div id="qs-forzafootball-msgpack-objc" class="qs"><h4><a href="https://github.com/forzafootball/msgpack-objc" target="_blank">forzafootball/msgpack-objc <span class="qs-url">https://github.com/forzafootball/msgpack-objc</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container js-search-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack-objc" class="anchor" aria-hidden="true" href="#msgpack-objc"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack-objc</h5>
<p dir="auto">An Objective-C wrapper for <a href="https://github.com/msgpack/msgpack-c">msgpack-c</a>. Focuses on ease of use and speed.
If you need configurability, there are other, more advanced libraries, for example <a href="https://github.com/gabriel/MPMessagePack">MPMessagePack</a>.</p>
<p dir="auto">This library will always try to use sane defaults. If any nil value is encountered in the MessagePack-data, the object will
be omitted instead of returning an <code>[NSNull null]</code>. This means that there can be no nil objects in dictionaries, and object-less
keys will be lost in translation.</p>
<h7 dir="auto">
<a id="user-content-example-usage" class="anchor" aria-hidden="true" href="#example-usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example usage:</h7>
<div class="highlight highlight-source-objc notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='#import &lt;msgpack-objc/MessagePack.h&gt;

NSDictionary *dictionary = @{@"name": @"msgpack-objc"};

NSData *messagePackData = [MessagePack packObject:dictionary];
NSDictionary *unpackedDictionary = [MessagePack unpackData:messagePackData];'><pre>#<span class="pl-k">import</span> <span class="pl-s"><span class="pl-pds">&lt;</span>msgpack-objc/MessagePack.h<span class="pl-pds">&gt;</span></span>

<span class="pl-c1">NSDictionary</span> *dictionary = @{<span class="pl-s"><span class="pl-pds">@"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">@"</span>msgpack-objc<span class="pl-pds">"</span></span>};

<span class="pl-c1">NSData</span> *messagePackData = [MessagePack <span class="pl-c1">packObject:</span>dictionary];
<span class="pl-c1">NSDictionary</span> *unpackedDictionary = [MessagePack <span class="pl-c1">unpackData:</span>messagePackData];</pre></div>
<h7 dir="auto">
<a id="user-content-supported-native-types" class="anchor" aria-hidden="true" href="#supported-native-types"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Supported native types:</h7>
<ul dir="auto">
<li><code>NSArray</code></li>
<li><code>NSData</code></li>
<li>
<code>NSDate</code> (using <a href="https://github.com/msgpack/msgpack/blob/master/spec.md#timestamp-extension-type">MessagePack timestamps</a>)</li>
<li><code>NSDictionary</code></li>
<li>
<code>NSNumber</code> (<code>boolean</code>, <code>u64</code>, <code>i64</code>, <code>float32/64</code>)</li>
<li><code>NSString</code></li>
</ul>
<h6 dir="auto">
<a id="user-content-extension-support" class="anchor" aria-hidden="true" href="#extension-support"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Extension support</h6>
<p dir="auto">The library supports <a href="https://github.com/msgpack/msgpack/blob/master/spec.md#timestamp-extension-type">MessagePack timestamps</a>,
and will return an <code>NSDate</code>-object whenever one is encountered. When serializing, any <code>NSDate</code>-objects will also be
serialized as native MessagePack timestamps.</p>
<p dir="auto">You can add native serialization for your own classes by conforming to protocol <code>MessagePackSerializable</code> and register it like this:</p>
<div class="highlight highlight-source-c notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="[MessagePack registerClass:Person.class forExtensionType:14];"><pre>[MessagePack registerClass:Person.class forExtensionType:<span class="pl-c1">14</span>];</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-CodeSmith32-msgpack-php-micro" class="qs"><h4><a href="https://github.com/CodeSmith32/msgpack-php-micro" target="_blank">CodeSmith32/msgpack-php-micro <span class="qs-url">https://github.com/CodeSmith32/msgpack-php-micro</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container js-search-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack-php-micro" class="anchor" aria-hidden="true" href="#msgpack-php-micro"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack-php-micro</h5>
<p dir="auto">msgpack - A super-lightweight PHP implementation of the <a href="http://msgpack.org/" rel="nofollow">msgpack</a> data encoding format.</p>
<p dir="auto">This is a very simple, small PHP implementation of msgpack, for ease of embedding.</p>
<p dir="auto">Notice: This implementation is still fairly new, and may have bugs. If you find any bugs, please report them immediately, and I will try to get them fixed as soon as possible.</p>
<p dir="auto"><strong>Usage:</strong></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="require_once('msgpack.php');

$data = array(
  'hello' =&gt; 'world',
  'array' =&gt; array(1, 2, 3, 4),
  5 =&gt; 78.662,
  'dt' =&gt; new DateTime(), // DateTime encoded in Timestamp extension format
);

$encoded = MsgPack::encode($data);

$decoded = MsgPack::decode($encoded);

var_dump($decoded);"><pre class="notranslate"><code>require_once('msgpack.php');

$data = array(
  'hello' =&gt; 'world',
  'array' =&gt; array(1, 2, 3, 4),
  5 =&gt; 78.662,
  'dt' =&gt; new DateTime(), // DateTime encoded in Timestamp extension format
);

$encoded = MsgPack::encode($data);

$decoded = MsgPack::decode($encoded);

var_dump($decoded);
</code></pre></div>
<p dir="auto">Fully supports custom type extensions:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="require_once('msgpack.php');

class Vertex {
	public $x;
	public $y;
	public $z;

	public function __construct($x=0, $y=0, $z=0) {
		$this-&gt;x = floatval($x);
		$this-&gt;y = floatval($y);
		$this-&gt;z = floatval($z);
	}
}

MsgPack::extend(array(
	'type' =&gt; 1,

	'varType' =&gt; 'object',

	'encode' =&gt; function($obj) {
		// returning FALSE skips; see reference for details
		if(!($obj instanceof Vertex)) return FALSE;

		return pack('GGG',$obj-&gt;x, $obj-&gt;y, $obj-&gt;z);
	},

	'decode' =&gt; function($data) {
		$xyz = unpack('Gx/Gy/Gz',$data);
		return new Vertex($xyz['x'], $xyz['y'], $xyz['z']);
	},
));"><pre class="notranslate"><code>require_once('msgpack.php');

class Vertex {
	public $x;
	public $y;
	public $z;

	public function __construct($x=0, $y=0, $z=0) {
		$this-&gt;x = floatval($x);
		$this-&gt;y = floatval($y);
		$this-&gt;z = floatval($z);
	}
}

MsgPack::extend(array(
	'type' =&gt; 1,

	'varType' =&gt; 'object',

	'encode' =&gt; function($obj) {
		// returning FALSE skips; see reference for details
		if(!($obj instanceof Vertex)) return FALSE;

		return pack('GGG',$obj-&gt;x, $obj-&gt;y, $obj-&gt;z);
	},

	'decode' =&gt; function($data) {
		$xyz = unpack('Gx/Gy/Gz',$data);
		return new Vertex($xyz['x'], $xyz['y'], $xyz['z']);
	},
));
</code></pre></div>
<p dir="auto">Visit <a href="https://github.com/CodeSmith32/msgpack-php-micro">github.com/CodeSmith32/msgpack-php-micro</a> for the usage reference.</p>
</article>
  </div>
        </div>
        
        <div id="qs-polyglotted-msgpack-python" class="qs"><h4><a href="https://github.com/polyglotted/msgpack-python" target="_blank">polyglotted/msgpack-python <span class="qs-url">https://github.com/polyglotted/msgpack-python</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container js-search-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h7 dir="auto">
<a id="user-content-msgpack" class="anchor" aria-hidden="true" href="#msgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack</h7>
</article>
  </div>
        </div>
        
        <div id="qs-lekma-mood-msgpack" class="qs"><h4><a href="https://github.com/lekma/mood.msgpack" target="_blank">lekma/mood.msgpack <span class="qs-url">https://github.com/lekma/mood.msgpack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container js-search-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-moodmsgpack" class="anchor" aria-hidden="true" href="#moodmsgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>mood.msgpack</h5>
<p dir="auto">Python MessagePack implementation</p>
<p dir="auto"><a href="https://msgpack.org/" rel="nofollow">MessagePack</a> is an efficient binary serialization
format. It lets you exchange data among multiple languages like JSON. But it's
faster and smaller. Small integers are encoded into a single byte, and typical
short strings require only one extra byte in addition to the strings themselves.</p>
<p dir="auto"><strong>Note:</strong> This implementation is designed as a
<a href="https://docs.python.org/3.8/library/pickle.html" rel="nofollow">pickle</a> substitute.
It does not expose MessagePack's extensions mechanism but uses it internally to
pack/unpack non-standard types.</p>
<p dir="auto">The following documentation is largely adapted from Python's <a href="https://docs.python.org/3.8/library/pickle.html" rel="nofollow">pickle module
documentation</a>.</p>
<p dir="auto"><strong>See also:</strong> <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">MessagePack specification</a></p>
<hr>
<a name="user-content-what-can-be-packed-and-unpacked"></a>
<h6 dir="auto">
<a id="user-content-what-can-be-packed-and-unpacked" class="anchor" aria-hidden="true" href="#what-can-be-packed-and-unpacked"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>What can be packed and unpacked?</h6>
<p dir="auto">The following standard types can be packed/unpacked:</p>
<ul dir="auto">
<li>
<code>None</code>, <code>True</code> and <code>False</code>
</li>
<li>integers, floating point numbers</li>
<li>strings, bytes</li>
<li>tuples and dictionaries containing only packable objects</li>
</ul>
<p dir="auto">Additionally, the following Python types are supported by default:</p>
<ul dir="auto">
<li>complex numbers</li>
<li>bytearrays</li>
<li>lists, sets and frozensets containing only packable objects</li>
<li>classes (these <strong>must</strong> be <a href="#registered">registered</a> in order to be unpacked)</li>
<li>instances of classes whose <code>__reduce__</code> method conforms to the interface
defined in <a href="#packing-class-instances">Packing Class Instances</a>
</li>
</ul>
<p dir="auto">The following MessagePack extension types are also supported:</p>
<ul dir="auto">
<li>
<a href="#timestamp">Timestamp</a> (<a href="https://github.com/msgpack/msgpack/blob/master/spec.md#timestamp-extension-type">specification</a>)</li>
</ul>
<a name="user-content-module-interface"></a>
<h6 dir="auto">
<a id="user-content-module-interface" class="anchor" aria-hidden="true" href="#module-interface"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Module Interface</h6>
<dl id="user-content-registered">
<dt>register(object)</dt>
<dd>Add <em>object</em> to the <em>registry</em>. <em>object</em> must be a class or a singleton
(instance whose <code>__reduce__</code> method returns a string).</dd>
<dt>pack(object)</dt>
<dd>Return the packed representation of <em>object</em> as a bytearray object.</dd>
<dt>unpack(message)</dt>
<dd>Read a packed object hierarchy from a <a href="https://docs.python.org/3.8/glossary.html#term-bytes-like-object" rel="nofollow">bytes-like</a>
<em>message</em> and return the reconstituted object hierarchy specified therein.</dd>
</dl>
<a name="user-content-packing-class-instances"></a>
<h6 dir="auto">
<a id="user-content-packing-class-instances" class="anchor" aria-hidden="true" href="#packing-class-instances"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Packing Class Instances</h6>
<p dir="auto"><strong>Note:</strong> This being chiefly based on <a href="https://docs.python.org/3.8/library/pickle.html#object.__reduce__" rel="nofollow">pickle's object.__reduce__() interface</a>,
most built-in objects and most objects defined in the <a href="https://docs.python.org/3.8/library/index.html" rel="nofollow">Python standard library</a> already conform to it.</p>
<dl id="user-content-reduce">
<dt>object.__reduce__()</dt>
<dd>
<p dir="auto">The interface is currently defined as follows: the <code>__reduce__</code> method
takes no argument and shall return either a unique string or preferably a
tuple.</p>
<p dir="auto">If a string is returned, the string should be interpreted as the name of a
global variable. This behaviour is typically useful for singletons (and is
the case for built-in functions).</p>
<p dir="auto">When a tuple is returned, it must be between two and five items long.
Optional items can either be omitted, or <code>None</code> can be provided as their
value. The semantics of each item are in order:</p>
<ul dir="auto">
<li>A callable object that will be invoked to create the initial version of
the object (it <strong>must</strong> be <a href="#registered">registered</a> in order to be unpacked).</li>
<li>A tuple of arguments for the callable object. An empty tuple must be given
if the callable does not accept any argument.</li>
<li>Optionally, the object's state, which will be passed to the object's
<code>__setstate__</code> method. If the object has no such method then, the value
must be a dictionary and it will be merged to the object's <code>__dict__</code>
attribute.</li>
<li>Optionally, a sequence/iterator yielding successive items. These items
will be appended to the object using <code>object.extend(items)</code>. This is
primarily used for list subclasses, but may be used by other classes as
long as they have an <code>extend</code> method with the appropriate signature. If
the object has no such method then, an in-place concatenation will be
attempted (equivalent to <code>object += items</code>).</li>
<li>Optionally, a dict/mapping or a sequence/iterator yielding successive
key-value pairs.  These pairs will be stored in the object using
<code>object.update(pairs)</code>. This is primarily used for dictionary subclasses,
but may be used by other classes as long as they have an <code>update</code> method
with the appropriate signature. If the object has no such method then, an
attempt will be made to store these pairs using <code>object[key] = value</code>.</li>
</ul>
<p dir="auto">A simple example:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; from mood.msgpack import pack, unpack, register
&gt;&gt;&gt; class Kiki(object):
...     def __init__(self, a, b):
...         self.a = a
...         self.b = b
...     def __repr__(self):
...         return &quot;&lt;Kiki object: a={0.a}, b={0.b}&gt;&quot;.format(self)
...     def __reduce__(self):
...         return (Kiki, (self.a, self.b))
...
&gt;&gt;&gt; k = Kiki(1, 2)
&gt;&gt;&gt; k
&lt;Kiki object: a=1, b=2&gt;
&gt;&gt;&gt; b = pack(k)
&gt;&gt;&gt; b
bytearray(b'\xc7\x15\x7f\x92\xc7\x0e\x06\xa8__main__\xa4Kiki\x92\x01\x02')
&gt;&gt;&gt; unpack(b)
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
TypeError: cannot unpack &lt;class '__main__.Kiki'&gt;
&gt;&gt;&gt; register(Kiki)
&gt;&gt;&gt; unpack(b)
&lt;Kiki object: a=1, b=2&gt;
&gt;&gt;&gt;"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">from</span> <span class="pl-s1">mood</span>.<span class="pl-s1">msgpack</span> <span class="pl-k">import</span> <span class="pl-s1">pack</span>, <span class="pl-s1">unpack</span>, <span class="pl-s1">register</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">class</span> <span class="pl-v">Kiki</span>(<span class="pl-s1">object</span>):
...     <span class="pl-k">def</span> <span class="pl-en">__init__</span>(<span class="pl-s1">self</span>, <span class="pl-s1">a</span>, <span class="pl-s1">b</span>):
...         <span class="pl-s1">self</span>.<span class="pl-s1">a</span> <span class="pl-c1">=</span> <span class="pl-s1">a</span>
...         <span class="pl-s1">self</span>.<span class="pl-s1">b</span> <span class="pl-c1">=</span> <span class="pl-s1">b</span>
...     <span class="pl-k">def</span> <span class="pl-en">__repr__</span>(<span class="pl-s1">self</span>):
...         <span class="pl-k">return</span> <span class="pl-s">"&lt;Kiki object: a={0.a}, b={0.b}&gt;"</span>.<span class="pl-en">format</span>(<span class="pl-s1">self</span>)
...     <span class="pl-k">def</span> <span class="pl-en">__reduce__</span>(<span class="pl-s1">self</span>):
...         <span class="pl-k">return</span> (<span class="pl-v">Kiki</span>, (<span class="pl-s1">self</span>.<span class="pl-s1">a</span>, <span class="pl-s1">self</span>.<span class="pl-s1">b</span>))
...
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">k</span> <span class="pl-c1">=</span> <span class="pl-v">Kiki</span>(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">k</span>
<span class="pl-c1">&lt;</span><span class="pl-v">Kiki</span> <span class="pl-s1">object</span>: <span class="pl-s1">a</span><span class="pl-c1">=</span><span class="pl-c1">1</span>, <span class="pl-s1">b</span><span class="pl-c1">=</span><span class="pl-c1">2</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">b</span> <span class="pl-c1">=</span> <span class="pl-en">pack</span>(<span class="pl-s1">k</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">b</span>
<span class="pl-en">bytearray</span>(<span class="pl-s">b'<span class="pl-cce">\xc7</span><span class="pl-cce">\x15</span><span class="pl-cce">\x7f</span><span class="pl-cce">\x92</span><span class="pl-cce">\xc7</span><span class="pl-cce">\x0e</span><span class="pl-cce">\x06</span><span class="pl-cce">\xa8</span>__main__<span class="pl-cce">\xa4</span>Kiki<span class="pl-cce">\x92</span><span class="pl-cce">\x01</span><span class="pl-cce">\x02</span>'</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-en">unpack</span>(<span class="pl-s1">b</span>)
<span class="pl-v">Traceback</span> (<span class="pl-s1">most</span> <span class="pl-s1">recent</span> <span class="pl-s1">call</span> <span class="pl-s1">last</span>):
  <span class="pl-v">File</span> <span class="pl-s">"&lt;stdin&gt;"</span>, <span class="pl-s1">line</span> <span class="pl-c1">1</span>, <span class="pl-s1">in</span> <span class="pl-c1">&lt;</span><span class="pl-s1">module</span><span class="pl-c1">&gt;</span>
<span class="pl-v">TypeError</span>: <span class="pl-s1">cannot</span> <span class="pl-s1">unpack</span> <span class="pl-c1">&lt;</span><span class="pl-s1">class</span> <span class="pl-s">'__main__.Kiki'</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-en">register</span>(<span class="pl-v">Kiki</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-en">unpack</span>(<span class="pl-s1">b</span>)
<span class="pl-c1">&lt;</span><span class="pl-v">Kiki</span> <span class="pl-s1">object</span>: <span class="pl-s1">a</span><span class="pl-c1">=</span><span class="pl-c1">1</span>, <span class="pl-s1">b</span><span class="pl-c1">=</span><span class="pl-c1">2</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span></pre></div>
</dd>
</dl>
<a name="user-content-timestamp-datetime"></a>
<h6 dir="auto">
<a id="user-content-timestamp-datetime-" class="anchor" aria-hidden="true" href="#timestamp-datetime-"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Timestamp, datetime, ...</h6>
<p dir="auto">Packing/unpacking objects from the <a href="https://docs.python.org/3.8/library/datetime.html#module-datetime" rel="nofollow">datetime</a> module is
straightforward.</p>
<p dir="auto">In the packing process:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import datetime
&gt;&gt;&gt; from mood import msgpack
&gt;&gt;&gt; d = datetime.datetime.now()
&gt;&gt;&gt; d
datetime.datetime(2020, 7, 31, 9, 41, 4, 139362)
&gt;&gt;&gt; msgpack.pack(d)
bytearray(b'\xc7#\x7f\x92\xc7\x12\x06\xa8datetime\xa8datetime\x91\xc4\n\x07\xe4\x07\x1f\t)\x04\x02 b')
&gt;&gt;&gt;"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">datetime</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">from</span> <span class="pl-s1">mood</span> <span class="pl-k">import</span> <span class="pl-s1">msgpack</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">d</span> <span class="pl-c1">=</span> <span class="pl-s1">datetime</span>.<span class="pl-s1">datetime</span>.<span class="pl-en">now</span>()
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">d</span>
<span class="pl-s1">datetime</span>.<span class="pl-en">datetime</span>(<span class="pl-c1">2020</span>, <span class="pl-c1">7</span>, <span class="pl-c1">31</span>, <span class="pl-c1">9</span>, <span class="pl-c1">41</span>, <span class="pl-c1">4</span>, <span class="pl-c1">139362</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">msgpack</span>.<span class="pl-en">pack</span>(<span class="pl-s1">d</span>)
<span class="pl-en">bytearray</span>(<span class="pl-s">b'<span class="pl-cce">\xc7</span>#<span class="pl-cce">\x7f</span><span class="pl-cce">\x92</span><span class="pl-cce">\xc7</span><span class="pl-cce">\x12</span><span class="pl-cce">\x06</span><span class="pl-cce">\xa8</span>datetime<span class="pl-cce">\xa8</span>datetime<span class="pl-cce">\x91</span><span class="pl-cce">\xc4</span><span class="pl-cce">\n</span><span class="pl-cce">\x07</span><span class="pl-cce">\xe4</span><span class="pl-cce">\x07</span><span class="pl-cce">\x1f</span><span class="pl-cce">\t</span>)<span class="pl-cce">\x04</span><span class="pl-cce">\x02</span> b'</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span></pre></div>
<p dir="auto">In the unpacking process:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import datetime
&gt;&gt;&gt; from mood import msgpack
&gt;&gt;&gt; msgpack.register(datetime.datetime)
&gt;&gt;&gt; msgpack.unpack(bytearray(b'\xc7#\x7f\x92\xc7\x12\x06\xa8datetime\xa8datetime\x91\xc4\n\x07\xe4\x07\x1f\t)\x04\x02 b'))
datetime.datetime(2020, 7, 31, 9, 41, 4, 139362)
&gt;&gt;&gt;"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">datetime</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">from</span> <span class="pl-s1">mood</span> <span class="pl-k">import</span> <span class="pl-s1">msgpack</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">msgpack</span>.<span class="pl-en">register</span>(<span class="pl-s1">datetime</span>.<span class="pl-s1">datetime</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">msgpack</span>.<span class="pl-en">unpack</span>(<span class="pl-en">bytearray</span>(<span class="pl-s">b'<span class="pl-cce">\xc7</span>#<span class="pl-cce">\x7f</span><span class="pl-cce">\x92</span><span class="pl-cce">\xc7</span><span class="pl-cce">\x12</span><span class="pl-cce">\x06</span><span class="pl-cce">\xa8</span>datetime<span class="pl-cce">\xa8</span>datetime<span class="pl-cce">\x91</span><span class="pl-cce">\xc4</span><span class="pl-cce">\n</span><span class="pl-cce">\x07</span><span class="pl-cce">\xe4</span><span class="pl-cce">\x07</span><span class="pl-cce">\x1f</span><span class="pl-cce">\t</span>)<span class="pl-cce">\x04</span><span class="pl-cce">\x02</span> b'</span>))
<span class="pl-s1">datetime</span>.<span class="pl-en">datetime</span>(<span class="pl-c1">2020</span>, <span class="pl-c1">7</span>, <span class="pl-c1">31</span>, <span class="pl-c1">9</span>, <span class="pl-c1">41</span>, <span class="pl-c1">4</span>, <span class="pl-c1">139362</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span></pre></div>
<p dir="auto">Packing/unpacking <a href="#timestamp">Timestamp</a> objects is also straightforward:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import time
&gt;&gt;&gt; from mood import msgpack
&gt;&gt;&gt; t = msgpack.Timestamp.fromtimestamp(time.time())
&gt;&gt;&gt; t
mood.msgpack.Timestamp(seconds=1596180901, nanoseconds=502492666)
&gt;&gt;&gt; msgpack.pack(t)
bytearray(b'\xd7\xffw\xcd\xb7\xe8_#\xc9\xa5')
&gt;&gt;&gt;"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">time</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">from</span> <span class="pl-s1">mood</span> <span class="pl-k">import</span> <span class="pl-s1">msgpack</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">t</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span>.<span class="pl-v">Timestamp</span>.<span class="pl-en">fromtimestamp</span>(<span class="pl-s1">time</span>.<span class="pl-en">time</span>())
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">t</span>
<span class="pl-s1">mood</span>.<span class="pl-s1">msgpack</span>.<span class="pl-v">Timestamp</span>(<span class="pl-s1">seconds</span><span class="pl-c1">=</span><span class="pl-c1">1596180901</span>, <span class="pl-s1">nanoseconds</span><span class="pl-c1">=</span><span class="pl-c1">502492666</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">msgpack</span>.<span class="pl-en">pack</span>(<span class="pl-s1">t</span>)
<span class="pl-en">bytearray</span>(<span class="pl-s">b'<span class="pl-cce">\xd7</span><span class="pl-cce">\xff</span>w<span class="pl-cce">\xcd</span><span class="pl-cce">\xb7</span><span class="pl-cce">\xe8</span>_#<span class="pl-cce">\xc9</span><span class="pl-cce">\xa5</span>'</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span></pre></div>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; from mood import msgpack
&gt;&gt;&gt; msgpack.unpack(bytearray(b'\xd7\xffw\xcd\xb7\xe8_#\xc9\xa5'))
mood.msgpack.Timestamp(seconds=1596180901, nanoseconds=502492666)
&gt;&gt;&gt;"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">from</span> <span class="pl-s1">mood</span> <span class="pl-k">import</span> <span class="pl-s1">msgpack</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">msgpack</span>.<span class="pl-en">unpack</span>(<span class="pl-en">bytearray</span>(<span class="pl-s">b'<span class="pl-cce">\xd7</span><span class="pl-cce">\xff</span>w<span class="pl-cce">\xcd</span><span class="pl-cce">\xb7</span><span class="pl-cce">\xe8</span>_#<span class="pl-cce">\xc9</span><span class="pl-cce">\xa5</span>'</span>))
<span class="pl-s1">mood</span>.<span class="pl-s1">msgpack</span>.<span class="pl-v">Timestamp</span>(<span class="pl-s1">seconds</span><span class="pl-c1">=</span><span class="pl-c1">1596180901</span>, <span class="pl-s1">nanoseconds</span><span class="pl-c1">=</span><span class="pl-c1">502492666</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span></pre></div>
<p dir="auto">Converting between <a href="#timestamp">Timestamp</a> and <a href="https://docs.python.org/3.8/library/datetime.html#datetime.datetime" rel="nofollow">datetime.datetime</a> objects:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import datetime
&gt;&gt;&gt; from mood import msgpack
&gt;&gt;&gt; d1 = datetime.datetime.now()
&gt;&gt;&gt; d1
datetime.datetime(2020, 7, 31, 9, 31, 18, 40406)
&gt;&gt;&gt; t = msgpack.Timestamp.fromtimestamp(d1.timestamp())
&gt;&gt;&gt; t
mood.msgpack.Timestamp(seconds=1596180678, nanoseconds=040405989)
&gt;&gt;&gt; d2 = datetime.datetime.fromtimestamp(t.timestamp())
&gt;&gt;&gt; d2
datetime.datetime(2020, 7, 31, 9, 31, 18, 40406)
&gt;&gt;&gt; d2 == d1
True
&gt;&gt;&gt;"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">datetime</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">from</span> <span class="pl-s1">mood</span> <span class="pl-k">import</span> <span class="pl-s1">msgpack</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">d1</span> <span class="pl-c1">=</span> <span class="pl-s1">datetime</span>.<span class="pl-s1">datetime</span>.<span class="pl-en">now</span>()
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">d1</span>
<span class="pl-s1">datetime</span>.<span class="pl-en">datetime</span>(<span class="pl-c1">2020</span>, <span class="pl-c1">7</span>, <span class="pl-c1">31</span>, <span class="pl-c1">9</span>, <span class="pl-c1">31</span>, <span class="pl-c1">18</span>, <span class="pl-c1">40406</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">t</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span>.<span class="pl-v">Timestamp</span>.<span class="pl-en">fromtimestamp</span>(<span class="pl-s1">d1</span>.<span class="pl-en">timestamp</span>())
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">t</span>
<span class="pl-s1">mood</span>.<span class="pl-s1">msgpack</span>.<span class="pl-v">Timestamp</span>(<span class="pl-s1">seconds</span><span class="pl-c1">=</span><span class="pl-c1">1596180678</span>, <span class="pl-s1">nanoseconds</span><span class="pl-c1">=</span><span class="pl-c1">040405989</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">d2</span> <span class="pl-c1">=</span> <span class="pl-s1">datetime</span>.<span class="pl-s1">datetime</span>.<span class="pl-en">fromtimestamp</span>(<span class="pl-s1">t</span>.<span class="pl-en">timestamp</span>())
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">d2</span>
<span class="pl-s1">datetime</span>.<span class="pl-en">datetime</span>(<span class="pl-c1">2020</span>, <span class="pl-c1">7</span>, <span class="pl-c1">31</span>, <span class="pl-c1">9</span>, <span class="pl-c1">31</span>, <span class="pl-c1">18</span>, <span class="pl-c1">40406</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">d2</span> <span class="pl-c1">==</span> <span class="pl-s1">d1</span>
<span class="pl-c1">True</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span></pre></div>
<p dir="auto"><strong>Note:</strong> <a href="#timestamp">Timestamp</a> objects do not carry timezone information and naive
<a href="https://docs.python.org/3.8/library/datetime.html#datetime.datetime" rel="nofollow">datetime.datetime</a>
instances are assumed to represent local time.</p>
<dl id="user-content-timestamp">
<dt>Timestamp(seconds[, nanoseconds=0])</dt>
<dd>
<ul dir="auto">
<li>
<dl>
<dt>seconds (int)</dt>
<dd>Number of seconds that have elapsed since 1970-01-01 00:00:00 UTC.</dd>
</dl>
</li>
<li>
<dl>
<dt>nanoseconds (int: 0)</dt>
<dd>Nanoseconds precision in <code>range(0, 1000000000)</code>.</dd>
</dl>
</li>
</ul>
<p dir="auto"><strong>Note:</strong> nanoseconds are always added to seconds, so negative timestamps
like -1.2 should be instantiated as Timestamp(-2, 800000000).</p>
<dl>
<dt>fromtimestamp(timestamp) (<em>classmethod</em>)</dt>
<dd>
<p dir="auto">Return a new <a href="#timestamp">Timestamp</a> instance corresponding to the <em>timestamp</em>
(int/float) argument. Example:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; from mood import msgpack
&gt;&gt;&gt; msgpack.Timestamp.fromtimestamp(-1.2)
mood.msgpack.Timestamp(seconds=-2, nanoseconds=800000000)
&gt;&gt;&gt;"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">from</span> <span class="pl-s1">mood</span> <span class="pl-k">import</span> <span class="pl-s1">msgpack</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">msgpack</span>.<span class="pl-v">Timestamp</span>.<span class="pl-en">fromtimestamp</span>(<span class="pl-c1">-</span><span class="pl-c1">1.2</span>)
<span class="pl-s1">mood</span>.<span class="pl-s1">msgpack</span>.<span class="pl-v">Timestamp</span>(<span class="pl-s1">seconds</span><span class="pl-c1">=</span><span class="pl-c1">-</span><span class="pl-c1">2</span>, <span class="pl-s1">nanoseconds</span><span class="pl-c1">=</span><span class="pl-c1">800000000</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span></pre></div>
</dd>
<dt>timestamp()</dt>
<dd>Return the floating point timestamp corresponding to this <a href="#timestamp">Timestamp</a>
instance. The result of <code>self.seconds + (self.nanoseconds / 1000000000)</code>.</dd>
<dt>seconds (<em>read only</em>)</dt>
<dd>
<em>seconds</em> argument passed to the constructor.</dd>
<dt>nanoseconds (<em>read only</em>)</dt>
<dd>
<em>nanoseconds</em> argument passed to the constructor.</dd>
</dl>
</dd>
</dl>

</article>
  </div>
        </div>
        
        <div id="qs-crowding-msgpack-r" class="qs"><h4><a href="https://github.com/crowding/msgpack-r" target="_blank">crowding/msgpack-r <span class="qs-url">https://github.com/crowding/msgpack-r</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container js-search-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack-for-r" class="anchor" aria-hidden="true" href="#msgpack-for-r"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack for R</h5>
<p dir="auto">Peter Meilstrup</p>
<p dir="auto"><a href="https://cran.r-project.org/package=msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/2097a9fb56b20510c2482192a3f16a111a254482be3f4acc3b2f77ea7a4b8a0f/687474703a2f2f7777772e722d706b672e6f72672f6261646765732f76657273696f6e2f6d73677061636b" alt="CRAN version badge" data-canonical-src="http://www.r-pkg.org/badges/version/msgpack" style="max-width: 100%;"></a>
<a href="https://travis-ci.org/crowding/msgpack-r" rel="nofollow"><img src="https://camo.githubusercontent.com/1629b5d571f07a99d2cdcf93cc8fe3e8effe89f4e7cc9f703b7913e0083f353e/687474703a2f2f7472617669732d63692e6f72672f63726f7764696e672f6d73677061636b2d722e7376673f6272616e63683d6d6173746572" alt="Travis build status" data-canonical-src="http://travis-ci.org/crowding/msgpack-r.svg?branch=master" style="max-width: 100%;"></a>
<a href="https://codecov.io/gh/crowding/msgpack-r" rel="nofollow"><img src="https://camo.githubusercontent.com/2afe044d875fd77e0fc082d6a53395f062f39a23986447999ce4a4007fcc0003/68747470733a2f2f636f6465636f762e696f2f67682f63726f7764696e672f6d73677061636b2d722f6272616e63682f6d61737465722f67726170682f62616467652e737667" alt="Code coverage" data-canonical-src="https://codecov.io/gh/crowding/msgpack-r/branch/master/graph/badge.svg" style="max-width: 100%;"></a></p>
<p dir="auto">This is a high speed <a href="https://msgpack.org" rel="nofollow">msgpack</a> encoder and decoder
for R, based on the <a href="https://github.com/clwi/CWPack">CWPack</a> C
implementation.</p>
<p dir="auto"><code>msgpack</code> is a binary data format with data structures similar to <code>JSON</code>
and a compact binary encoding. It can be a drop-in replacement for
<code>JSON</code> in most applications. It is designed to be fast to parse and
compact to transmit and store.</p>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<p dir="auto">From CRAN:</p>
<div class="highlight highlight-source-r notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='install.packages("msgpack")'><pre>install.packages(<span class="pl-s"><span class="pl-pds">"</span>msgpack<span class="pl-pds">"</span></span>)</pre></div>
<p dir="auto">From Github:</p>
<div class="highlight highlight-source-r notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='library(devtools)
install_github("crowding/msgpack-r")'><pre>library(<span class="pl-smi">devtools</span>)
install_github(<span class="pl-s"><span class="pl-pds">"</span>crowding/msgpack-r<span class="pl-pds">"</span></span>)</pre></div>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<div class="highlight highlight-source-r notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='library(msgpack)
x &lt;- packMsg( list(compact=TRUE, schema=0) )
x
##  [1] 82 a7 63 6f 6d 70 61 63 74 c3 a6 73 63 68 65 6d 61 00
dput(unpackMsg( x ))
## structure(list(compact = TRUE, schema = 0L), .Names = c("compact", 
## "schema"))'><pre>library(<span class="pl-smi">msgpack</span>)
<span class="pl-smi">x</span> <span class="pl-k">&lt;-</span> packMsg( <span class="pl-k">list</span>(<span class="pl-v">compact</span><span class="pl-k">=</span><span class="pl-c1">TRUE</span>, <span class="pl-v">schema</span><span class="pl-k">=</span><span class="pl-c1">0</span>) )
<span class="pl-smi">x</span>
<span class="pl-c"><span class="pl-c">#</span>#  [1] 82 a7 63 6f 6d 70 61 63 74 c3 a6 73 63 68 65 6d 61 00</span>
dput(unpackMsg( <span class="pl-smi">x</span> ))
<span class="pl-c"><span class="pl-c">#</span># structure(list(compact = TRUE, schema = 0L), .Names = c("compact", </span>
<span class="pl-c"><span class="pl-c">#</span># "schema"))</span></pre></div>
<h7 dir="auto">
<a id="user-content-connections--streaming" class="anchor" aria-hidden="true" href="#connections--streaming"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Connections / Streaming</h7>
<p dir="auto">Write messages one or several at a time:</p>
<div class="highlight highlight-source-r notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='conOut &lt;- rawConnection(raw(0), open = "w") # or socketConnection, etc
writeMsg("one", conOut)
writeMsgs(list(2, c(buckle=TRUE), c(owner="my", type="shoe")), conOut)'><pre><span class="pl-smi">conOut</span> <span class="pl-k">&lt;-</span> rawConnection(raw(<span class="pl-c1">0</span>), <span class="pl-v">open</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>w<span class="pl-pds">"</span></span>) <span class="pl-c"><span class="pl-c">#</span> or socketConnection, etc</span>
writeMsg(<span class="pl-s"><span class="pl-pds">"</span>one<span class="pl-pds">"</span></span>, <span class="pl-smi">conOut</span>)
writeMsgs(<span class="pl-k">list</span>(<span class="pl-c1">2</span>, c(<span class="pl-v">buckle</span><span class="pl-k">=</span><span class="pl-c1">TRUE</span>), c(<span class="pl-v">owner</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>my<span class="pl-pds">"</span></span>, <span class="pl-v">type</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>shoe<span class="pl-pds">"</span></span>)), <span class="pl-smi">conOut</span>)</pre></div>
<p dir="auto">Use a <code>msgConnection</code> object to read messages one or several at a
time:</p>
<div class="highlight highlight-source-r notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='conIn &lt;- msgConnection(rawConnection(rawConnectionValue(conOut), open = "r"))
dput(readMsgs(conIn, 2))
## list("one", 2L)
dput(readMsg(conIn))
## structure(TRUE, .Names = "buckle")
dput(readMsgs(conIn))
## list(structure(c("my", "shoe"), .Names = c("owner", "type")))'><pre><span class="pl-smi">conIn</span> <span class="pl-k">&lt;-</span> msgConnection(rawConnection(rawConnectionValue(<span class="pl-smi">conOut</span>), <span class="pl-v">open</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>r<span class="pl-pds">"</span></span>))
dput(readMsgs(<span class="pl-smi">conIn</span>, <span class="pl-c1">2</span>))
<span class="pl-c"><span class="pl-c">#</span># list("one", 2L)</span>
dput(readMsg(<span class="pl-smi">conIn</span>))
<span class="pl-c"><span class="pl-c">#</span># structure(TRUE, .Names = "buckle")</span>
dput(readMsgs(<span class="pl-smi">conIn</span>))
<span class="pl-c"><span class="pl-c">#</span># list(structure(c("my", "shoe"), .Names = c("owner", "type")))</span></pre></div>
<h7 dir="auto">
<a id="user-content-performance" class="anchor" aria-hidden="true" href="#performance"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Performance</h7>
<p dir="auto">Msgpack is fast and compact. See the <a href="/crowding/msgpack-r/blob/master/inst/doc/comparison.html">benchmarking
vignette</a>.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/crowding/msgpack-r/blob/master/gh/space.svg"><img src="/crowding/msgpack-r/raw/master/gh/space.svg" alt="Plot of time taken to transmit dataset, vs size of dataset, for each encoder under four conditions." style="max-width: 100%;"></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/crowding/msgpack-r/blob/master/gh/time.svg"><img src="/crowding/msgpack-r/raw/master/gh/time.svg" alt="Comparison of space used by each encoder to encode a test dataset." style="max-width: 100%;"></a></p>
</article>
  </div>
        </div>
        
        <div id="qs-tkob-mlmsgpack" class="qs"><h4><a href="https://github.com/tkob/mlmsgpack" target="_blank">tkob/mlmsgpack <span class="qs-url">https://github.com/tkob/mlmsgpack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container js-search-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-ml-messagepack" class="anchor" aria-hidden="true" href="#ml-messagepack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>ML-MessagePack</h5>
<p dir="auto">MessagePack implementation for Standard ML (SML)</p>
<h6 dir="auto">
<a id="user-content-features" class="anchor" aria-hidden="true" href="#features"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Features</h6>
<ul dir="auto">
<li>Portable: Depends only on the required components of the SML Basis Library specification.</li>
<li>Composable: Composable combinators for encoding and decoding.</li>
</ul>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<h8 dir="auto">
<a id="user-content-mlton-and-mlkit" class="anchor" aria-hidden="true" href="#mlton-and-mlkit"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MLton and MLKit</h8>
<p dir="auto">Include mlmsgpack.mlb in your MLB file.</p>
<h8 dir="auto">
<a id="user-content-polyml" class="anchor" aria-hidden="true" href="#polyml"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Poly/ML</h8>
<p dir="auto">From the interactive shell, use .sml files in the following order.</p>
<ul dir="auto">
<li>mlmsgpack-aux.sml</li>
<li>realprinter-default.sml</li>
<li>mlmsgpack.sml</li>
</ul>
<h8 dir="auto">
<a id="user-content-smlnj" class="anchor" aria-hidden="true" href="#smlnj"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>SML/NJ</h8>
<p dir="auto">Use mlmsgpack.cm.</p>
<h8 dir="auto">
<a id="user-content-moscow-ml" class="anchor" aria-hidden="true" href="#moscow-ml"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Moscow ML</h8>
<p dir="auto">From the interactive shell, use .sml files in the following order.</p>
<ul dir="auto">
<li>large.sml</li>
<li>mlmsgpack-aux.sml</li>
<li>realprinter-fail.sml</li>
<li>mlmsgpack.sml</li>
</ul>
<p dir="auto">Makefile.mosml is also provided.</p>
<h8 dir="auto">
<a id="user-content-hamlet" class="anchor" aria-hidden="true" href="#hamlet"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>HaMLet</h8>
<p dir="auto">From the interactive shell, use .sml files in the following order.</p>
<ul dir="auto">
<li>mlmsgpack-aux.sml</li>
<li>realprinter-fail.sml</li>
<li>mlmsgpack.sml</li>
</ul>
<h8 dir="auto">
<a id="user-content-alice-ml" class="anchor" aria-hidden="true" href="#alice-ml"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Alice ML</h8>
<p dir="auto">Makefile.alice is provided.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="make -f Makefile.alice
alicerun mlmsgpack-test"><pre class="notranslate"><code>make -f Makefile.alice
alicerun mlmsgpack-test
</code></pre></div>
<h8 dir="auto">
<a id="user-content-sml" class="anchor" aria-hidden="true" href="#sml"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>SML#</h8>
<p dir="auto">For separate compilation, .smi files are provided. Require mlmsgpack.smi from your .smi file.</p>
<p dir="auto">From the interactive shell, use .sml files in the following order.</p>
<ul dir="auto">
<li>mlmsgpack-aux.sml</li>
<li>realprinter-default.sml</li>
<li>mlmsgpack.sml</li>
</ul>
<h6 dir="auto">
<a id="user-content-tutorial" class="anchor" aria-hidden="true" href="#tutorial"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Tutorial</h6>
<p dir="auto">See TUTORIAL.md.</p>
<h6 dir="auto">
<a id="user-content-known-problems" class="anchor" aria-hidden="true" href="#known-problems"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Known Problems</h6>
<p dir="auto">Our recommendation is MLton, MLKit, Poly/ML and SML#(&gt;=2.0.0) as all tests passed on them.
SML/NJ and Moscow ML are fine if you don't use real values.</p>
<h8 dir="auto">
<a id="user-content-smlnj-1" class="anchor" aria-hidden="true" href="#smlnj-1"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>SML/NJ</h8>
<p dir="auto">Packing real values fail or produces imprecise results in some cases.</p>
<h8 dir="auto">
<a id="user-content-moscow-ml-1" class="anchor" aria-hidden="true" href="#moscow-ml-1"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Moscow ML</h8>
<p dir="auto">Packing real values is not supported, since some components of the SML Basis Library are not provided.</p>
<h8 dir="auto">
<a id="user-content-hamlet-1" class="anchor" aria-hidden="true" href="#hamlet-1"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>HaMLet</h8>
<p dir="auto">Packing real values is not supported, since some components of the SML Basis Library are not provided.
Some functions are very slow, although they work properly. (We tested HaMLet compiled with MLton.)</p>
<h8 dir="auto">
<a id="user-content-alice-ml-1" class="anchor" aria-hidden="true" href="#alice-ml-1"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Alice ML</h8>
<p dir="auto">Packing real values is not supported, since some components of the SML Basis Library are not provided.
Also, some unit tests fail.</p>
<h8 dir="auto">
<a id="user-content-sml-1" class="anchor" aria-hidden="true" href="#sml-1"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>SML#</h8>
<p dir="auto">Most functions do not work properly because of bugs of SML# prior to version 2.0.0.</p>
<h6 dir="auto">
<a id="user-content-see-also" class="anchor" aria-hidden="true" href="#see-also"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>See Also</h6>
<p dir="auto">There already exists another MessagePack implemenatation for SML,
called MsgPack-SML, which is targeted for MLton.</p>
<p dir="auto"><a href="https://msgpacksml.codeplex.com/" rel="nofollow">https://msgpacksml.codeplex.com/</a></p>
<p dir="auto">ML-MessagePack is written from scratch and not a fork of MsgPack-SML.</p>
<p dir="auto">For information on MessagePack, see:</p>
<p dir="auto"><a href="http://msgpack.org/" rel="nofollow">http://msgpack.org/</a></p>
</article>
  </div>
        </div>
        
        <div id="qs-couchdeveloper-messagepack" class="qs"><h4><a href="https://github.com/couchdeveloper/messagepack" target="_blank">couchdeveloper/messagepack <span class="qs-url">https://github.com/couchdeveloper/messagepack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container js-search-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack" class="anchor" aria-hidden="true" href="#messagepack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack</h5>
<p dir="auto"><strong>MessagePack</strong> is an efficient binary serialization format. It lets you exchange data among multiple languages like JSON. But it's faster and smaller. Small integers are encoded into a single byte, and typical short strings require only one extra byte in addition to the strings themselves.</p>
<h6 dir="auto">
<a id="user-content-packageswift" class="anchor" aria-hidden="true" href="#packageswift"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Package.swift</h6>
<div class="highlight highlight-source-swift notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='.Package(url: "https://github.com/tris-foundation/messagepack.git", majorVersion: 0)'><pre>.<span class="pl-c1">Package</span>(<span class="pl-c1">url</span>: <span class="pl-s"><span class="pl-pds">"</span>https://github.com/tris-foundation/messagepack.git<span class="pl-pds">"</span></span>, <span class="pl-c1">majorVersion</span>: <span class="pl-c1">0</span>)</pre></div>
<h6 dir="auto">
<a id="user-content-memo" class="anchor" aria-hidden="true" href="#memo"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Memo</h6>
<div class="highlight highlight-source-swift notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="public enum MessagePack {
    case `nil`
    case int(Int)
    case uint(UInt)
    case bool(Bool)
    case float(Float)
    case double(Double)
    case string(String)
    case binary([UInt8])
    case array([MessagePack])
    case map([MessagePack : MessagePack])
    case extended(Extended)

    public struct Extended {
        public let type: Int8
        public let data: [UInt8]
        public init(type: Int8, data: [UInt8]) {
            self.type = type
            self.data = data
        }
    }
}"><pre><span class="pl-k">public</span> <span class="pl-k">enum</span> <span class="pl-en">MessagePack</span> {
    <span class="pl-k">case</span> <span class="pl-c1">`nil`</span>
    <span class="pl-k">case</span> <span class="pl-c1">int</span>(<span class="pl-c1">Int</span>)
    <span class="pl-k">case</span> <span class="pl-c1">uint</span>(<span class="pl-c1">UInt</span>)
    <span class="pl-k">case</span> <span class="pl-c1">bool</span>(<span class="pl-c1">Bool</span>)
    <span class="pl-k">case</span> <span class="pl-c1">float</span>(<span class="pl-c1">Float</span>)
    <span class="pl-k">case</span> <span class="pl-c1">double</span>(<span class="pl-c1">Double</span>)
    <span class="pl-k">case</span> <span class="pl-c1">string</span>(<span class="pl-c1">String</span>)
    <span class="pl-k">case</span> <span class="pl-c1">binary</span>([<span class="pl-c1">UInt8</span>])
    <span class="pl-k">case</span> <span class="pl-c1">array</span>([MessagePack])
    <span class="pl-k">case</span> <span class="pl-c1">map</span>([MessagePack : MessagePack])
    <span class="pl-k">case</span> <span class="pl-c1">extended</span>(Extended)

    <span class="pl-k">public</span> <span class="pl-k">struct</span> <span class="pl-en">Extended</span> {
        <span class="pl-k">public</span> <span class="pl-k">let</span> type: <span class="pl-c1">Int8</span>
        <span class="pl-k">public</span> <span class="pl-k">let</span> data: [<span class="pl-c1">UInt8</span>]
        <span class="pl-k">public</span> <span class="pl-k">init</span>(<span class="pl-smi"><span class="pl-en">type</span></span>: <span class="pl-c1">Int8</span>, <span class="pl-smi"><span class="pl-en">data</span></span>: [<span class="pl-c1">UInt8</span>]) {
            <span class="pl-c1">self</span>.<span class="pl-smi">type</span> <span class="pl-k">=</span> type
            <span class="pl-c1">self</span>.<span class="pl-smi">data</span> <span class="pl-k">=</span> data
        }
    }
}</pre></div>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<p dir="auto">You can find this code and more in <a href="https://github.com/tris-foundation/examples">examples</a>.</p>
<h7 dir="auto">
<a id="user-content-convenience-api" class="anchor" aria-hidden="true" href="#convenience-api"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Convenience API</h7>
<div class="highlight highlight-source-swift notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='let hey = MessagePack("hey there!")
let bytes = MessagePack.encode(hey)
let original = String(try MessagePack.decode(bytes: bytes))'><pre><span class="pl-k">let</span> hey <span class="pl-k">=</span> <span class="pl-c1">MessagePack</span>(<span class="pl-s"><span class="pl-pds">"</span>hey there!<span class="pl-pds">"</span></span>)
<span class="pl-k">let</span> bytes <span class="pl-k">=</span> MessagePack.<span class="pl-c1">encode</span>(hey)
<span class="pl-k">let</span> original <span class="pl-k">=</span> <span class="pl-c1">String</span>(<span class="pl-k">try</span> MessagePack.<span class="pl-c1">decode</span>(<span class="pl-c1">bytes</span>: bytes))</pre></div>
<h7 dir="auto">
<a id="user-content-performance-optimized" class="anchor" aria-hidden="true" href="#performance-optimized"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Performance optimized</h7>
<div class="highlight highlight-source-swift notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='var encoder = Encoder()
encoder.encode(.string("one"))
encoder.encode(.int(2))
encoder.encode(.double(3.0))
let encoded = encoder.bytes
// be careful, we use raw pointer here
var decoder = Decoder(bytes: encoded, count: encoded.count)
// throws on invalid data
let value = try decoder.decode()
// reuse decoder
decoder.rewind()
// you can avoid extra MessagePack object 
// if you sure about the structure
// throws on wrong type
let string = try decoder.decode(String.self)
let int = try decoder.decode(UInt8.self)
let double = try decoder.decode(Double.self)
print("decoded manually: \(string), \(int), \(double)")'><pre><span class="pl-k">var</span> encoder <span class="pl-k">=</span> <span class="pl-c1">Encoder</span>()
encoder.<span class="pl-c1">encode</span>(.<span class="pl-c1">string</span>(<span class="pl-s"><span class="pl-pds">"</span>one<span class="pl-pds">"</span></span>))
encoder.<span class="pl-c1">encode</span>(.<span class="pl-c1">int</span>(<span class="pl-c1">2</span>))
encoder.<span class="pl-c1">encode</span>(.<span class="pl-c1">double</span>(<span class="pl-c1">3.0</span>))
<span class="pl-k">let</span> encoded <span class="pl-k">=</span> encoder.<span class="pl-smi">bytes</span>
<span class="pl-c"><span class="pl-c">//</span> be careful, we use raw pointer here</span>
<span class="pl-c"></span><span class="pl-k">var</span> decoder <span class="pl-k">=</span> <span class="pl-c1">Decoder</span>(<span class="pl-c1">bytes</span>: encoded, <span class="pl-c1">count</span>: encoded.<span class="pl-c1">count</span>)
<span class="pl-c"><span class="pl-c">//</span> throws on invalid data</span>
<span class="pl-c"></span><span class="pl-k">let</span> value <span class="pl-k">=</span> <span class="pl-k">try</span> decoder.<span class="pl-c1">decode</span>()
<span class="pl-c"><span class="pl-c">//</span> reuse decoder</span>
<span class="pl-c"></span>decoder.<span class="pl-c1">rewind</span>()
<span class="pl-c"><span class="pl-c">//</span> you can avoid extra MessagePack object </span>
<span class="pl-c"><span class="pl-c">//</span> if you sure about the structure</span>
<span class="pl-c"><span class="pl-c">//</span> throws on wrong type</span>
<span class="pl-c"></span><span class="pl-k">let</span> string <span class="pl-k">=</span> <span class="pl-k">try</span> decoder.<span class="pl-c1">decode</span>(<span class="pl-c1">String</span>.<span class="pl-k">self</span>)
<span class="pl-k">let</span> int <span class="pl-k">=</span> <span class="pl-k">try</span> decoder.<span class="pl-c1">decode</span>(<span class="pl-c1">UInt8</span>.<span class="pl-k">self</span>)
<span class="pl-k">let</span> double <span class="pl-k">=</span> <span class="pl-k">try</span> decoder.<span class="pl-c1">decode</span>(<span class="pl-c1">Double</span>.<span class="pl-k">self</span>)
<span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>decoded manually: <span class="pl-pse">\(</span><span class="pl-s1">string</span><span class="pl-pse"><span class="pl-s1">)</span></span>, <span class="pl-pse">\(</span><span class="pl-s1">int</span><span class="pl-pse"><span class="pl-s1">)</span></span>, <span class="pl-pse">\(</span><span class="pl-s1">double</span><span class="pl-pse"><span class="pl-s1">)</span></span><span class="pl-pds">"</span></span>)</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-cherrywoods-swift-msgpack-serialization" class="qs"><h4><a href="https://github.com/cherrywoods/swift-msgpack-serialization" target="_blank">cherrywoods/swift-msgpack-serialization <span class="qs-url">https://github.com/cherrywoods/swift-msgpack-serialization</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container js-search-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-swift-msgpack-serialization" class="anchor" aria-hidden="true" href="#swift-msgpack-serialization"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>swift-msgpack-serialization</h5>
<p dir="auto"><a href="https://github.com/Carthage/Carthage"><img src="https://camo.githubusercontent.com/c8961b92aa4c1cece705532f044860ab81846426578305a5e8d83c0f357de8c2/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f43617274686167652d636f6d70617469626c652d3442433531442e7376673f7374796c653d666c6174" alt="Carthage compatible" data-canonical-src="https://img.shields.io/badge/Carthage-compatible-4BC51D.svg?style=flat" style="max-width: 100%;"></a></p>
<p dir="auto">Another swift serialization library for msgpack with support for the Codable environement.</p>
<p dir="auto">This framework is designed to be (optionaly) compatibel to the msgpack-java library.
See <a href="https://github.com/cherrywoods/swift-msgpack-serialization/blob/master/Compatibility.md">Compatibility.md</a> for more detailed information about this.</p>
<p dir="auto">Please make sure, that the swift model classes and java model classes you use are compatibel to each other, e.g. enums are named equaly (including case).</p>
<p dir="auto">This framework also supplies the possibiliy to encode keys of other types than String (generalContainer function of MsgpackEncoder).</p>
<p dir="auto">swift-msgpack-serialization works with <a href="https://github.com/a2/MessagePack.swift">MessagePack.swift</a>. This means, that you can encode your classes, structs and enums, that conform to Codable to MessagePackValue from MessagePack.swift, do something with this MessagePackValue and then encode it to msgpack using MessagePack.swift. You may of course also decode to MessagePackValue first and then decode a particular MessagePackValue to your own type.</p>
<h6 dir="auto">
<a id="user-content-instalation" class="anchor" aria-hidden="true" href="#instalation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Instalation</h6>
<p dir="auto">Currently, only carthage is supported.</p>
<h6 dir="auto">
<a id="user-content-compatibilty-restrictions" class="anchor" aria-hidden="true" href="#compatibilty-restrictions"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Compatibilty restrictions</h6>
<p dir="auto">Make sure you never call .encode(to:) directly! Instead use the encode method on a keyed, unkeyed or singleValue container or cast the encoder passed to you to MsgpackEncoder and call encodeIntermediate(_) on this encoder. If you do not use this, this framework won't be able to do it's work properly.</p>
</article>
  </div>
        </div>
        
        <div id="qs-samclaus-msgpack-ts" class="qs"><h4><a href="https://msgpack.org/" target="_blank">samclaus/msgpack-ts <span class="qs-url">https://msgpack.org/</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container js-search-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack-ts" class="anchor" aria-hidden="true" href="#msgpack-ts"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack-ts</h5>
<p dir="auto">Fast MessagePack implementation in TypeScript. Designed as a faster, smaller
alternative to <code>msgpack-lite</code>. Both the <code>Encoder</code> and <code>Decoder</code> are quite
configurable, but performance was prioritized with as little branching as
possible.</p>
<p dir="auto"><strong>TODO</strong></p>
<ul dir="auto">
<li>Add Closure-compiled browser distribution</li>
<li>Add thorough tests</li>
<li>Add benchmarks</li>
</ul>
<p dir="auto"><strong>You can optimize further</strong></p>
<p dir="auto">If your MessagePack traffic contains many or large binary buffers, you may
want to fork this repo and alter the <code>takeBinary(length)</code> method of the
<code>Decoder</code> to use <code>this.buffer.subarray</code> in place of <code>this.buffer.slice</code>,
because <code>Uint8Array.slice()</code> creates a copy of the bytes. This library
assumes that your messages will not consist primarily of binary objects
and thus it is undesirable to return subviews of the same buffer being
decoded because they will hold references to the entire buffer that was
decoded, likely keeping it in memory when it is not needed.</p>
<h6 dir="auto">
<a id="user-content-quick-start" class="anchor" aria-hidden="true" href="#quick-start"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Quick Start</h6>
<p dir="auto">For more information, read the <a href="#documentation">docs</a>.</p>
<p dir="auto">Install the library via NPM: <code>npm i --save-dev msgpack-ts</code>.</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import { encode, decode, Decoder } from "msgpack-ts";

/**
 * Both x and y will be in range [0, 255].
 */
class Coordinate
{
    static encode(coord: Coordinate): Uint8Array
    {
        return new Uint8Array([coord.x, coord.y]);
    }

    static decode(data: Uint8Array): Coordinate
    {
        return new Coordinate(data[0], data[1]);
    }

    static backwardsDecode(data: Uint8Array): Coordinate
    {
        return new Coordinate(data[1], data[0]);
    }

    constructor(
        readonly x: number,
        readonly y: number
    ) {}
}

function main()
{
    const message: SomeInterface = {
        type: "add-user",
        data: {
            firstName: "Jane",
            lastName: "Doe",
            age: 27,
            female: true,
            location: new Coordinate(10, 192),
            username: "janedoe92",
            passwordHash: new Uint8Array(32)
        }
    };

    encode.encoder.registerExt(Coordinate, 0, Coordinate.encode);
    decode.decoder.registerExt(0, Coordinate.decode);

    // encode() uses the encode.encoder instance
    const encoded = encode(message);

    // decode() uses the decode.decoder instance
    const decoded = decode&lt;SomeInterface&gt;(encoded);

    // Create separate instances if you need multiple configurations
    const myDecoder = new Decoder();
    myDecoder.nilValue = undefined;
    myDecoder.allowInvalidUTF8 = true;
    myDecoder.allowUnknownExts = true;
    myDecoder.registerExt(0, Coordinate.backwardsDecode);

    // Both Encoder and Decoder support cloning instances
    const slightlyDifferent = myDecoder.clone();
    slighlyDifferent.nilValue = null;
}'><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">encode</span><span class="pl-kos">,</span> <span class="pl-s1">decode</span><span class="pl-kos">,</span> <span class="pl-smi">Decoder</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"msgpack-ts"</span><span class="pl-kos">;</span>

<span class="pl-c">/**</span>
<span class="pl-c"> * Both x and y will be in range [0, 255].</span>
<span class="pl-c"> */</span>
<span class="pl-k">class</span> <span class="pl-smi">Coordinate</span>
<span class="pl-kos">{</span>
    <span class="pl-k">static</span> <span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-s1">coord</span>: <span class="pl-smi">Coordinate</span><span class="pl-kos">)</span>: <span class="pl-smi">Uint8Array</span>
    <span class="pl-kos">{</span>
        <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-smi">Uint8Array</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-s1">coord</span><span class="pl-kos">.</span><span class="pl-c1">x</span><span class="pl-kos">,</span> <span class="pl-s1">coord</span><span class="pl-kos">.</span><span class="pl-c1">y</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span>

    <span class="pl-k">static</span> <span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-s1">data</span>: <span class="pl-smi">Uint8Array</span><span class="pl-kos">)</span>: <span class="pl-smi">Coordinate</span>
    <span class="pl-kos">{</span>
        <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-smi">Coordinate</span><span class="pl-kos">(</span><span class="pl-s1">data</span><span class="pl-kos">[</span><span class="pl-c1">0</span><span class="pl-kos">]</span><span class="pl-kos">,</span> <span class="pl-s1">data</span><span class="pl-kos">[</span><span class="pl-c1">1</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span>

    <span class="pl-k">static</span> <span class="pl-en">backwardsDecode</span><span class="pl-kos">(</span><span class="pl-s1">data</span>: <span class="pl-smi">Uint8Array</span><span class="pl-kos">)</span>: <span class="pl-smi">Coordinate</span>
    <span class="pl-kos">{</span>
        <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-smi">Coordinate</span><span class="pl-kos">(</span><span class="pl-s1">data</span><span class="pl-kos">[</span><span class="pl-c1">1</span><span class="pl-kos">]</span><span class="pl-kos">,</span> <span class="pl-s1">data</span><span class="pl-kos">[</span><span class="pl-c1">0</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span>

    <span class="pl-en">constructor</span><span class="pl-kos">(</span>
        <span class="pl-k">readonly</span> <span class="pl-s1">x</span>: <span class="pl-smi">number</span><span class="pl-kos">,</span>
        <span class="pl-k">readonly</span> <span class="pl-s1">y</span>: <span class="pl-smi">number</span>
    <span class="pl-kos">)</span> <span class="pl-kos">{</span><span class="pl-kos">}</span>
<span class="pl-kos">}</span>

<span class="pl-k">function</span> <span class="pl-en">main</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">{</span>
    <span class="pl-k">const</span> <span class="pl-s1">message</span>: <span class="pl-smi">SomeInterface</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
        <span class="pl-c1">type</span>: <span class="pl-s">"add-user"</span><span class="pl-kos">,</span>
        <span class="pl-c1">data</span>: <span class="pl-kos">{</span>
            <span class="pl-c1">firstName</span>: <span class="pl-s">"Jane"</span><span class="pl-kos">,</span>
            <span class="pl-c1">lastName</span>: <span class="pl-s">"Doe"</span><span class="pl-kos">,</span>
            <span class="pl-c1">age</span>: <span class="pl-c1">27</span><span class="pl-kos">,</span>
            <span class="pl-c1">female</span>: <span class="pl-c1">true</span><span class="pl-kos">,</span>
            <span class="pl-c1">location</span>: <span class="pl-k">new</span> <span class="pl-smi">Coordinate</span><span class="pl-kos">(</span><span class="pl-c1">10</span><span class="pl-kos">,</span> <span class="pl-c1">192</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
            <span class="pl-c1">username</span>: <span class="pl-s">"janedoe92"</span><span class="pl-kos">,</span>
            <span class="pl-c1">passwordHash</span>: <span class="pl-k">new</span> <span class="pl-smi">Uint8Array</span><span class="pl-kos">(</span><span class="pl-c1">32</span><span class="pl-kos">)</span>
        <span class="pl-kos">}</span>
    <span class="pl-kos">}</span><span class="pl-kos">;</span>

    <span class="pl-s1">encode</span><span class="pl-kos">.</span><span class="pl-c1">encoder</span><span class="pl-kos">.</span><span class="pl-en">registerExt</span><span class="pl-kos">(</span><span class="pl-smi">Coordinate</span><span class="pl-kos">,</span> <span class="pl-c1">0</span><span class="pl-kos">,</span> <span class="pl-smi">Coordinate</span><span class="pl-kos">.</span><span class="pl-c1">encode</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-s1">decode</span><span class="pl-kos">.</span><span class="pl-c1">decoder</span><span class="pl-kos">.</span><span class="pl-en">registerExt</span><span class="pl-kos">(</span><span class="pl-c1">0</span><span class="pl-kos">,</span> <span class="pl-smi">Coordinate</span><span class="pl-kos">.</span><span class="pl-c1">decode</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

    <span class="pl-c">// encode() uses the encode.encoder instance</span>
    <span class="pl-k">const</span> <span class="pl-s1">encoded</span> <span class="pl-c1">=</span> <span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-s1">message</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

    <span class="pl-c">// decode() uses the decode.decoder instance</span>
    <span class="pl-k">const</span> <span class="pl-s1">decoded</span> <span class="pl-c1">=</span> <span class="pl-en">decode</span><span class="pl-kos">&lt;</span><span class="pl-smi">SomeInterface</span><span class="pl-kos">&gt;</span><span class="pl-kos">(</span><span class="pl-s1">encoded</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

    <span class="pl-c">// Create separate instances if you need multiple configurations</span>
    <span class="pl-k">const</span> <span class="pl-s1">myDecoder</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-smi">Decoder</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-s1">myDecoder</span><span class="pl-kos">.</span><span class="pl-c1">nilValue</span> <span class="pl-c1">=</span> <span class="pl-c1">undefined</span><span class="pl-kos">;</span>
    <span class="pl-s1">myDecoder</span><span class="pl-kos">.</span><span class="pl-c1">allowInvalidUTF8</span> <span class="pl-c1">=</span> <span class="pl-c1">true</span><span class="pl-kos">;</span>
    <span class="pl-s1">myDecoder</span><span class="pl-kos">.</span><span class="pl-c1">allowUnknownExts</span> <span class="pl-c1">=</span> <span class="pl-c1">true</span><span class="pl-kos">;</span>
    <span class="pl-s1">myDecoder</span><span class="pl-kos">.</span><span class="pl-en">registerExt</span><span class="pl-kos">(</span><span class="pl-c1">0</span><span class="pl-kos">,</span> <span class="pl-smi">Coordinate</span><span class="pl-kos">.</span><span class="pl-c1">backwardsDecode</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

    <span class="pl-c">// Both Encoder and Decoder support cloning instances</span>
    <span class="pl-k">const</span> <span class="pl-s1">slightlyDifferent</span> <span class="pl-c1">=</span> <span class="pl-s1">myDecoder</span><span class="pl-kos">.</span><span class="pl-en">clone</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-s1">slighlyDifferent</span><span class="pl-kos">.</span><span class="pl-c1">nilValue</span> <span class="pl-c1">=</span> <span class="pl-c1">null</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span></pre></div>
<h6 dir="auto">
<a id="user-content-documentation" class="anchor" aria-hidden="true" href="#documentation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Documentation</h6>
<h7 dir="auto">
<a id="user-content-class-encoder" class="anchor" aria-hidden="true" href="#class-encoder"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>class Encoder</code>
</h7>
<p dir="auto"><strong>static</strong></p>
<ul dir="auto">
<li>
<p dir="auto"><code>Encoder.global: Encoder</code></p>
<p dir="auto">A global <code>Encoder</code> instance, purely for convenience.</p>
</li>
<li>
<p dir="auto"><code>Encoder.encode(data: any, initBuffSize?: number): Uint8Array</code></p>
<p dir="auto">Convenience function to call <code>Encoder.global.encode()</code>.</p>
</li>
</ul>
<p dir="auto"><strong>constructor</strong></p>
<ul dir="auto">
<li>
<p dir="auto"><code>new Encoder(reserve = 128)</code></p>
<p dir="auto">Create a new <code>Encoder</code> instance. You may pass the number of bytes to
allocate immediately as an encoding buffer, or it will default to <code>128</code>.</p>
</li>
</ul>
<p dir="auto"><strong>instance</strong></p>
<ul dir="auto">
<li>
<p dir="auto"><code>Encoder.encode(data: any, reserve?: number): Uint8Array</code></p>
<p dir="auto">Encode a JavaScript object or primitive to MessagePack format. You may provide a second argument
to ensure that a certain number of bytes is allocated for the encoding buffer before encoding
begins.</p>
</li>
<li>
<p dir="auto"><code>Encoder.registerExt&lt;T&gt;(ctor: new (...args: any[]) =&gt; T, type: number, encoderFn: (data: T) =&gt; Uint8Array)</code></p>
<p dir="auto">Register an encoder for an object class. <code>type</code> MUST be in the range <code>[-128, 127]</code> or a <code>RangeError</code>
will be thrown. Negative types are reserved by the MessagePack spec and SHOULD not be used, unless
this library does not provide an extension added to the spec or the implementation is found to be
inadequate.</p>
<p dir="auto"><strong>Standard Extensions Registered By Default</strong></p>
<ul dir="auto">
<li>
<p dir="auto"><code>-1 (Timestamp)</code></p>
<p dir="auto">JavaScript <code>Date</code> objects will be encoded using the standard <code>Timestamp</code> extension type, unless
overriden.</p>
</li>
</ul>
</li>
<li>
<p dir="auto"><code>Encoder.resize(newSize: number)</code></p>
<p dir="auto">Release the current encoding buffer and allocate a new one of <code>newSize</code> bytes.</p>
</li>
<li>
<p dir="auto"><code>Encoder.clone(): Encoder</code></p>
<p dir="auto">Creates an independent clone of the <code>Encoder</code> with the same
configuration values and registered extensions.</p>
</li>
</ul>
<h7 dir="auto">
<a id="user-content-class-decoder" class="anchor" aria-hidden="true" href="#class-decoder"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>class Decoder</code>
</h7>
<p dir="auto"><strong>static</strong></p>
<ul dir="auto">
<li>
<p dir="auto"><code>Decoder.global: Decoder</code></p>
<p dir="auto">A global <code>Decoder</code> instance, purely for convenience.</p>
</li>
<li>
<p dir="auto"><code>Decoder.decode&lt;T = any&gt;(data: ArrayBuffer | Uint8Array): T</code></p>
<p dir="auto">Convenience function to call <code>Decoder.global.decode()</code>.</p>
</li>
</ul>
<p dir="auto"><strong>constructor</strong></p>
<ul dir="auto">
<li>
<p dir="auto"><code>new Decoder()</code></p>
<p dir="auto">Creates a new <code>Decoder</code> instance.</p>
</li>
</ul>
<p dir="auto"><strong>instance</strong></p>
<ul dir="auto">
<li>
<p dir="auto"><code>Decoder.nilValue: null | undefined = null</code></p>
<p dir="auto">Value the MessagePack <code>nil</code> constant should be interpreted as.</p>
</li>
<li>
<p dir="auto"><code>Decoder.allowInvalidUTF8 = false</code></p>
<p dir="auto">If false, an error will be thrown if a MessagePack <code>str</code> type is
encountered and the data is not valid UTF-8. If true, the <code>str</code>
data will be passed through opaquely as a <code>Uint8Array</code>.</p>
</li>
<li>
<p dir="auto"><code>Decoder.allowUnknownExts = false</code></p>
<p dir="auto">If false, a <code>RangeError</code> will be thrown whenever an unrecognized extension type is encountered. If
true, the extension data will be passed through opaquely as a
<a href="#interface-decoderunknownextseq"><code>Decoder.UnknownExt</code></a>.</p>
</li>
<li>
<p dir="auto"><code>Decoder.mapBehavior = Decoder.MapBehavior.PreferJSON</code></p>
<p dir="auto">Determines how MessagePack <code>map</code> values are decoded. See
<a href="#enum-decodermapbehavior"><code>Decoder.MapBehavior</code></a> for options.</p>
</li>
<li>
<p dir="auto"><code>Decoder.decode&lt;T = any&gt;(data: ArrayBuffer | Uint8Array): T</code></p>
<p dir="auto">Decode MessagePack data into a JS object or primitive.</p>
</li>
<li>
<p dir="auto"><code>Decoder.clone(): Decoder</code></p>
<p dir="auto">Creates an independent clone of the <code>Decoder</code> with the same
configuration values and registered extensions.</p>
</li>
</ul>
<h7 dir="auto">
<a id="user-content-interface-decoderunknownextseq" class="anchor" aria-hidden="true" href="#interface-decoderunknownextseq"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>interface Decoder.UnknownExtSeq</code>
</h7>
<p dir="auto">Opaque tuple of an extension type identifier and the raw data associated with it.</p>
<ul dir="auto">
<li>
<p dir="auto"><code>type: number</code></p>
<p dir="auto">The extension type which did not have a registered decoder.</p>
</li>
<li>
<p dir="auto"><code>data: Uint8Array</code></p>
<p dir="auto">The opaque data.</p>
</li>
</ul>
<h7 dir="auto">
<a id="user-content-enum-decodermapbehavior" class="anchor" aria-hidden="true" href="#enum-decodermapbehavior"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>enum Decoder.MapBehavior</code>
</h7>
<p dir="auto">Determines <code>Decoder</code> behavior when a MessagePack <code>map</code> is encountered.</p>
<ul dir="auto">
<li>
<p dir="auto"><code>PreferJSON = 0</code></p>
<p dir="auto">Maps will be decoded as native JS objects, unless a key is decoded
whose JS type evaluates to <code>object</code>, in which case all decoded keys
will be abandoned and the map will be decoded from scratch into an
ES6 Map which supports arbitrary key types.</p>
</li>
<li>
<p dir="auto"><code>AlwaysJSON = 1</code></p>
<p dir="auto">Maps will be always be decoded as native JS objects. This means all
decoded keys will be coerced to strings, which is almost certainly
undesirable if decoding maps with objects or arrays as keys.</p>
</li>
<li>
<p dir="auto"><code>AlwaysES6Map = 2</code></p>
<p dir="auto">Maps will always be decoded as ES6 Map objects.</p>
</li>
</ul>
</article>
  </div>
        </div>
        
        <div id="qs-tihannalouise-https-github-com-msgpack-msgpack-java" class="qs"><h4><a href="https://github.com/tihannalouise/https-github.com-msgpack-msgpack-java" target="_blank">tihannalouise/https-github.com-msgpack-msgpack-java <span class="qs-url">https://github.com/tihannalouise/https-github.com-msgpack-msgpack-java</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container js-search-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-https-githubcom-msgpack-msgpack-java" class="anchor" aria-hidden="true" href="#https-githubcom-msgpack-msgpack-java"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>https-github.com-msgpack-msgpack-java</h5>
<p dir="auto">msgpack.org[expert-carnival]</p>
</article>
  </div>
        </div>
        
      </div>
    </section>

    <section id="related">
      <h3>関連プロジェクト</h3>

      <div class="paragraphs">
        <h4><a href="https://github.com/dotcloud/zerorpc-python">ZeroRPC</a> by DotCloud</h4>
        <p>zerorpc is a flexible RPC implementation based on zeromq and messagepack. Service APIs exposed with zerorpc are called "zeroservices".</p>

        <h4><a href="https://github.com/pfi/pficommon">pficommon</a> by Preferred Infrastructure, Inc.</h4>
        <p>General purpose C++ library for Preferred Infrastructure, Inc. It includes MessagePack-RPC implementation for C++</p>
      </div>
    </section>

    <div id="json-to-msgpack">
      <h3>JSON <span class="bytes" id="json-bytes"></span></h3>
      <textarea type="text" id="json-text">{"compact":true,"schema":0}</textarea>
      <h3>MessagePack (hex) <span class="bytes" id="msgpack-bytes"></span> <span class="bytes" id="msgpack-percent"></span></h3>
      <textarea readonly id="msgpack-text"></textarea>
    </div>
  </main>

  <footer>
    <div>
      <div id="thanks">
        <p>MessagePack &trade; Copyright &copy; 2008-2021 Sadayuki Furuhashi</p>
      </div>
    </div>
  </footer>
</body>
