<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="keywords" content="MessagePack,msgpack,JSON,alternative,better json,faster json,serializer">
  <link href='favicon.ico' rel='icon' type='image/x-icon'>

  <link rel="alternate" hreflang="en" href="index.html">
  <link rel="alternate" hreflang="ja" href="ja.html">


  <title>MessagePack: It&#39;s like JSON. but fast and small.</title>

  <link media="all" rel="stylesheet" href="css/yuibase.css">
  <link media="all" rel="stylesheet" href="js/prettify/prettify.css">
  <link media="all" rel="stylesheet" href="css/all.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web:400,200">
  <script src="js/all.js"></script>
  <script src="js/prettify/prettify.js"></script>
  <script src="js/prettify/run_prettify.js"></script>
  <script src="js/jquery-2.1.4.min.js"></script>
  <script src="js/jquery.leanModal.min.js" ></script>
  <script src="js/msgpack.js" ></script>

  <style>
  
  </style>

  <script type="text/javascript">
  // select initially-selected quick start randomly
  $(function(){
    var index = Math.floor(Math.random()*(document.getElementsByClassName('qs').length-1));
    changeQuickStart(document.getElementsByClassName('qs')[index].id,document.getElementsByClassName('qs-a')[index])}
  );

  $(function() {
    $('pre > code').addClass('prettyprint');
    prettyPrint();
  });

  $(function() {
    $('a[rel*=leanModal]').leanModal({
      top: 100,
      overlay : 0.5,
      closeButton: ".modal_close"
    });
    $(document).keydown(function(e) {
      if (e.keyCode == 27) {
        $('#lean_overlay').fadeOut(200);
        $('#json-to-msgpack').css({'display':'none'});
      }
    });
  });
  </script>

  <script type="text/javascript">
  $(function() {
    $("#json-text").keyup(function(event) {
      var text = $("#json-text").val();
      var obj;
      try {
         obj = JSON.parse(text);
      } catch (e) {
         return;
      }
      var msg = msgpack.pack(obj);
      var hex = jQuery.map(msg, function(e,i) {
        return ("0" + e.toString(16)).slice(-2);
      }).join(" ");
      $("#msgpack-text").text(hex);
      var textLength = encodeURIComponent(text).replace(/%../g,"%").length;
      $("#json-bytes").text(textLength.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, '$1,') + " bytes");
      $("#msgpack-bytes").text(msg.length.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, '$1,') + " bytes");
      $("#msgpack-percent").text(Math.round(msg.length / textLength * 100).toString() + " %");
    }).keyup();
    $("#msgpack-text").keyup(function(event) {
      var hex = $("#msgpack-text").val().replace(/ +/g,'');
      var msgbytes = [];
      for(var i=0; i< hex.length-1; i+=2){
        msgbytes.push(parseInt(hex.substr(i, 2), 16));
      }
      var msg = String.fromCharCode.apply(String, msgbytes);
      var obj=msgpack.unpack(msg);
      var text=JSON.stringify(obj);
      $("#json-text").text(text);
      var textLength = encodeURIComponent(text).replace(/%../g,"%").length;
      $("#json-bytes").text(textLength.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, '$1,') + " bytes");
      $("#msgpack-bytes").text(msg.length.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, '$1,') + " bytes");
      $("#msgpack-percent").text(Math.round(msg.length / textLength * 100).toString() + " %");
    });
  });
  </script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-17125377-1', 'auto', {'allowLinker': true});
    ga('set', 'anonymizeIp', true);
    ga('send', 'pageview');
  </script>
</head>
<body>
  <header>
    <div>
      <h1><a href="/">MessagePack</a></h1>
      <nav id="topnav">
        <ul>
          <li><a rel="leanModal" href="#json-to-msgpack" class="i18n_nav">Try!</a></li>
          <li><a href="https://github.com/msgpack/msgpack/blob/master/spec.md" class="i18n_nav">Spec</a></li>
          <li><a href="https://twitter.com/search/MessagePack%20OR%20msgpack" class="i18n_nav">#msgpack</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main>
    <section id="introduction">
      <div id="description">
        <h2 class="i18n">It's like JSON.<br />but fast and small.</h2>
        <p class="i18n">MessagePack is an efficient binary serialization format. It lets you exchange data among multiple languages like JSON. But it's faster and smaller. Small integers are encoded into a single byte, and typical short strings require only one extra byte in addition to the strings themselves.</p>
      </div>

      <div id="next">
        <h3 class="i18n_head i18n_next">Next:</h3>
        <p class="i18n">MessagePack is supported by over 50 programming languages and environments.<br />See <a href="#languages">list of implementations</a>.</p>
      </div>
    </section>

    
    <section id="usecases">
      <div id="testimonials">
        <div class="tmset">
          <div class="tm">
            <a class="tmlogo" href="https://redis.io/"><img src="images/redis.png" alt="Redis" width="150" height="50" /></a>
            <p class="tmtext">Redis scripting has support for MessagePack because it is a fast and compact serialization format with a simple to implement specification. I liked it so much that I implemented a MessagePack C extension for Lua just to include it into Redis.</p>
            <p class="tmauthor">Salvatore Sanfilippo, creator of Redis</p>
          </div>

          <div class="tm">
            <a class="tmlogo" href="https://fluentd.org/" style="height:100px;margin-top:-35px;"><img src="images/fluentd.png" alt="Fluentd" width="245" height="85" /></a>
            <p class="tmtext">Fluentd uses MessagePack for all internal data representation. It's crazy fast because of zero-copy optimization of msgpack-ruby. Now MessagePack is an essential component of Fluentd to achieve high performance and flexibility at the same time.</p>
            <p class="tmauthor">Sadayuki Furuhashi, creator of Fluentd</p>
          </div>
        </div>

        <div class="tmset">
          <div class="tm">
            <a class="tmlogo" href="https://www.treasuredata.com/"><img src="images/treasuredata.png" alt="Treasure Data" width="242" height="52" /></a>
            <p class="tmtext">Treasure Data built a multi-tenant database optimized for analytical queries using MessagePack. The schemaless database is growing by billions of records every month. We also use MessagePack as a glue between components. Actually we just wanted a fast replacement of JSON, and MessagePack is simply useful.</p>
            <p class="tmauthor">Kazuki Ohta, CTO</p>
          </div>

          <div class="tm">
            <a class="tmlogo" href="https://www.pinterest.com/pinterest/"><img src="images/pinterest.png" alt="Pinterest" width="197" height="50" /></a>
            <p class="tmtext">MessagePack has been simply invaluable to us. We use MessagePack + Memcache to cache many of our feeds on Pinterest. These feeds are compressed and very quick to unpack thanks to MessagePack while Memcache gives us fast atomic pushes.</p>
            <p class="tmauthor">Marty Weiner, Software Engineer</p>

            <p class="tmcontribute">Also use MessagePack? <a href="https://github.com/msgpack/website">Waiting for your testimonial!</a></p>
          </div>
        </div>
      </div>

      <div id="twitter">
        <a class="twitter-timeline" data-dnt="true" href="https://twitter.com/search?q=msgpack+OR+MessagePack+lang%3Aen" data-widget-id="343624208380735490" width="350" height="500">Tweets about "msgpack OR MessagePack"</a>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
      </div>
    </section>
    

    <section id="usage">
      <div id="languages">
        <h3 class="i18n_head">Languages</h3>

        <ul class="qslist">
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-loteixeira-as3-msgpack',this)">ActionScript3 <span class="qs-sub">loteixeira</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-hideakitai-MsgPack',this)">Arduino <span class="qs-sub">hideakitai</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-HEADS-project-arduino_msgpack',this)">Arduino C <span class="qs-sub">HEADS-project</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-camgunz-cmp',this)">C <span class="qs-sub">camgunz</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-ludocode-mpack',this)">C <span class="qs-sub">ludocode</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-clwi-CWPack',this)">C / Objective-C / Swift <span class="qs-sub">clwi</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack-msgpack-cli',this)">C# <span class="qs-sub">msgpack</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-ymofen-SimpleMsgPack-Net',this)">C# <span class="qs-sub">ymofen</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-caesay-MPack',this)">C# <span class="qs-sub">caesay</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-mlsomers-LsMsgPack',this)">C# <span class="qs-sub">mlsomers</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-neuecc-MessagePack-CSharp',this)">C# <span class="qs-sub">neuecc</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-highras-msgpack-csharp',this)">C# <span class="qs-sub">highras</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-Lichtso-netLink',this)">C++11 <span class="qs-sub">Lichtso</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-jonathonl-goodform',this)">C++11 <span class="qs-sub">jonathonl</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-ar90n-msgpack11',this)">C++11 <span class="qs-sub">ar90n</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-mikeloomisgg-cppack',this)">C++17 <span class="qs-sub">mikeloomisgg</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack-msgpack-c',this)">C/C++ <span class="qs-sub">msgpack</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-edma2-clojure-msgpack',this)">Clojure <span class="qs-sub">edma2</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-pkcsecurity-msgpack-cljs',this)">ClojureScript <span class="qs-sub">pkcsecurity</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-crystal-community-msgpack-crystal',this)">Crystal <span class="qs-sub">crystal-community</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-steakknife-msgpack-cr',this)">Crystal <span class="qs-sub">steakknife</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack-msgpack-d',this)">D <span class="qs-sub">msgpack</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-jpf91-msgpack-ll',this)">D <span class="qs-sub">jpf91</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-danellis-dart-msgpack',this)">Dart <span class="qs-sub">danellis</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-knopp-msgpack_dart',this)">Dart <span class="qs-sub">knopp</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-chinawsb-qmsgpack-delphi',this)">Delphi <span class="qs-sub">chinawsb</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-mururu-msgpack-elixir',this)">Elixir <span class="qs-sub">mururu</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-lexmag-msgpax',this)">Elixir <span class="qs-sub">lexmag</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-ymofen-thealchemist',this)">Elixir <span class="qs-sub">ymofen</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack-msgpack-erlang',this)">Erlang <span class="qs-sub">msgpack</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-Gab-km-msgpack-fsharp',this)">F# <span class="qs-sub">Gab-km</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-pocketberserker-MessagePack-FSharpExtensions',this)">F# <span class="qs-sub">pocketberserker</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-xtpor-godot-msgpack',this)">GDScript <span class="qs-sub">xtpor</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-vmihailenco-msgpack',this)">Go <span class="qs-sub">vmihailenco</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-ugorji-go',this)">Go <span class="qs-sub">ugorji</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-tinylib-msgp',this)">Go <span class="qs-sub">tinylib</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-dchenk-msgp',this)">Go <span class="qs-sub">dchenk</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-shamaton-msgpack',this)">Go <span class="qs-sub">shamaton</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-shamaton-msgpackgen',this)">Go <span class="qs-sub">shamaton</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-reeze-msgpack-hhvm',this)">HHVM <span class="qs-sub">reeze</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack-msgpack-haskell',this)">Haskell <span class="qs-sub">msgpack</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-rodrigosetti-messagepack',this)">Haskell <span class="qs-sub">rodrigosetti</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-aaulia-msgpack-haxe',this)">Haxe <span class="qs-sub">aaulia</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-jonghough-msgpack-j',this)">J <span class="qs-sub">jonghough</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-komamitsu-jackson-dataformat-msgpack',this)">Jackson-dataformat <span class="qs-sub">komamitsu</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack-msgpack-java',this)">Java <span class="qs-sub">msgpack</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack-msgpack-javascript',this)">JavaScript <span class="qs-sub">msgpack</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-kawanet-msgpack-lite',this)">JavaScript <span class="qs-sub">kawanet</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-ygoe-msgpack-js',this)">JavaScript <span class="qs-sub">ygoe</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-textbook-express-msgpack',this)">JavaScript <span class="qs-sub">textbook</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-kriszyp-msgpackr',this)">JavaScript/NodeJS <span class="qs-sub">kriszyp</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-davalapar-what-the-pack',this)">Javascript/NodeJS <span class="qs-sub">davalapar</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-davethomas11-MoshiPack',this)">Kotlin <span class="qs-sub">davethomas11</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-kropp-kotlinx-serialization-msgpack',this)">Kotlin Serialization <span class="qs-sub">kropp</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-mradziwo-MsgPack_LabVIEW',this)">LabVIEW <span class="qs-sub">mradziwo</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-markstinson-lua-MessagePack',this)">Lua <span class="qs-sub">markstinson</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-kieselsteini-msgpack',this)">Lua <span class="qs-sub">kieselsteini</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-bastibe-matlab-msgpack',this)">Matlab <span class="qs-sub">bastibe</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-akiradeveloper-msgpack-nim',this)">Nim <span class="qs-sub">akiradeveloper</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-jangko-msgpack4nim',this)">Nim <span class="qs-sub">jangko</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-mcollina-msgpack5',this)">Node <span class="qs-sub">mcollina</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-sschizas-msgpack-response',this)">Node <span class="qs-sub">sschizas</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack-msgpack-ocaml',this)">OCaml <span class="qs-sub">msgpack</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-gabriel-MPMessagePack',this)">Objective-C <span class="qs-sub">gabriel</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-forzafootball-msgpack-objc',this)">Objective-C <span class="qs-sub">forzafootball</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack-msgpack-php',this)">PHP <span class="qs-sub">msgpack</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-rybakit-msgpack-php',this)">PHP <span class="qs-sub">rybakit</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-CodeSmith32-msgpack-php-micro',this)">PHP <span class="qs-sub">CodeSmith32</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-ymofen-msgpack-delphi',this)">Pascal <span class="qs-sub">ymofen</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack-msgpack-perl',this)">Perl <span class="qs-sub">msgpack</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-pierre-vigier-Perl6-Data-MessagePack',this)">Perl 6 <span class="qs-sub">pierre-vigier</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-seantallen-org-msgpack',this)">Pony <span class="qs-sub">seantallen-org</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-patriksimek-msgpack-postgres',this)">PostgreSQL <span class="qs-sub">patriksimek</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack-msgpack-python',this)">Python <span class="qs-sub">msgpack</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-vsergeev-u-msgpack-python',this)">Python <span class="qs-sub">vsergeev</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-polyglotted-msgpack-python',this)">Python <span class="qs-sub">polyglotted</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-lekma-mood-msgpack',this)">Python <span class="qs-sub">lekma</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-aviramha-ormsgpack',this)">Python <span class="qs-sub">aviramha</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-jakm-txmsgpackrpc',this)">Python/Twisted <span class="qs-sub">jakm</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-romixlab-qmsgpack',this)">Qt <span class="qs-sub">romixlab</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-eddelbuettel-rcppmsgpack',this)">R <span class="qs-sub">eddelbuettel</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-crowding-msgpack-r',this)">R <span class="qs-sub">crowding</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-HiPhish-msgpack-racket',this)">Racket <span class="qs-sub">HiPhish</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-owenthereal-msgpack_rails',this)">Rails <span class="qs-sub">owenthereal</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-komamitsu-retrofit-converter-msgpack',this)">Retrofit converter (Java) <span class="qs-sub">komamitsu</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack-msgpack-ruby',this)">Ruby <span class="qs-sub">msgpack</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-mneumann-MessagePack',this)">Ruby/C++ <span class="qs-sub">mneumann</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-3Hren-msgpack-rust',this)">Rust <span class="qs-sub">3Hren</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-dankogai-swift-sion',this)">SION,Swift <span class="qs-sub">dankogai</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-tkob-mlmsgpack',this)">SML <span class="qs-sub">tkob</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack-msgpack-scala',this)">Scala <span class="qs-sub">msgpack</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack4z-msgpack4z-core',this)">Scala <span class="qs-sub">msgpack4z</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack4z-msgpack4z-circe',this)">Scala.js <span class="qs-sub">msgpack4z</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-jakm-msgpack-cli',this)">Shell <span class="qs-sub">jakm</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack-msgpack-smalltalk',this)">Smalltalk <span class="qs-sub">msgpack</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-briandw-SwiftPack',this)">Swift <span class="qs-sub">briandw</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-a2-MessagePack-swift',this)">Swift <span class="qs-sub">a2</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-michael-yuji-YSMessagePack',this)">Swift <span class="qs-sub">michael-yuji</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-couchdeveloper-messagepack',this)">Swift <span class="qs-sub">couchdeveloper</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-hirotakan-MessagePacker',this)">Swift <span class="qs-sub">hirotakan</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-swiftstack-messagepack',this)">Swift <span class="qs-sub">swiftstack</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-cherrywoods-swift-msgpack-serialization',this)">Swift, java compatibel <span class="qs-sub">cherrywoods</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-samclaus-msgpack-ts',this)">TypeScript/JavaScript <span class="qs-sub">samclaus</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-ludocode-msgpack-tools',this)">UNIX Shell <span class="qs-sub">ludocode</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-tihannalouise-https-github-com-msgpack-msgpack-java',this)">expert-carnival <span class="qs-sub">tihannalouise</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-esensar-kotlinx-serialization-msgpack',this)">kotlinx.serialization <span class="qs-sub">esensar</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-suzukaze-mruby-msgpack',this)">mruby <span class="qs-sub">suzukaze</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-Asmod4n-mruby-simplemsgpack',this)">mruby <span class="qs-sub">Asmod4n</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-tagomoris-msgpack-inspect',this)">msgpack-inspect <span class="qs-sub">tagomoris</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack4z-msgpack4z-argonaut',this)">scala-native <span class="qs-sub">msgpack4z</span></a></li>
          
        </ul>
      </div>

      <div id="api">
        <h3 class="i18n_head">API</h3>
        <h4 id="language">&nbsp;</h4>
        <div id="quickstart" class="qsholder"></div>
        <p id="quickstart-guide"><a href="https://github.com/msgpack/website/blob/master/README.md#how-to-list-up-your-project-on-msgpackorg">List your implementation here!</a></p>

        
        <div id="qs-loteixeira-as3-msgpack" class="qs"><h4><a href="https://github.com/loteixeira/as3-msgpack" target="_blank">loteixeira/as3-msgpack <span class="qs-url">https://github.com/loteixeira/as3-msgpack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><p dir="auto"><strong>MessagePack for Actionscript3 (Flash, Flex and AIR).</strong></p>
<p dir="auto">as3-msgpack was designed to work with the interfaces IDataInput and IDataOutput, thus the API might be easily connected with the native classes that handle binary data (such as ByteArray, Socket, FileStream and URLStream).<br>
Moreover, as3-msgpack is capable of decoding data from binary streams.<br>
Get started: <a href="http://loteixeira.github.io/lib/2013/08/19/as3-msgpack/" rel="nofollow">http://loteixeira.github.io/lib/2013/08/19/as3-msgpack/</a></p>
<p dir="auto"><strong>Basic usage (encoding/decoding):</strong></p>
<div class="highlight highlight-source-actionscript-3 notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="// create messagepack object
var msgpack:MsgPack = new MsgPack();

// encode an array
var bytes:ByteArray = msgpack.write([1, 2, 3, 4, 5]);

// rewind the buffer
bytes.position = 0;

// print the decoded object
trace(msgpack.read(bytes));"><pre><span class="pl-c">// create messagepack object</span>
<span class="pl-k">var</span> msgpack<span class="pl-k">:</span>MsgPack <span class="pl-k">=</span> <span class="pl-k">new</span> MsgPack()<span class="pl-k">;</span>

<span class="pl-c">// encode an array</span>
<span class="pl-k">var</span> <span class="pl-c1">bytes</span><span class="pl-k">:</span><span class="pl-c1">ByteArray</span> <span class="pl-k">=</span> msgpack<span class="pl-k">.</span>write(<span class="pl-k">[</span><span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>, <span class="pl-c1">4</span>, <span class="pl-c1">5</span><span class="pl-k">]</span>)<span class="pl-k">;</span>

<span class="pl-c">// rewind the buffer</span>
<span class="pl-c1">bytes</span><span class="pl-k">.</span><span class="pl-c1">position</span> <span class="pl-k">=</span> <span class="pl-c1">0</span><span class="pl-k">;</span>

<span class="pl-c">// print the decoded object</span>
<span class="pl-c1">trace</span>(msgpack<span class="pl-k">.</span>read(<span class="pl-c1">bytes</span>))<span class="pl-k">;</span></pre></div>
<p dir="auto">For downloads, source code and further information, check the project repository: <a href="https://github.com/loteixeira/as3-msgpack">https://github.com/loteixeira/as3-msgpack</a>.</p>
</article>
  </div>
        </div>
        
        <div id="qs-hideakitai-MsgPack" class="qs"><h4><a href="https://github.com/hideakitai/MsgPack" target="_blank">hideakitai/MsgPack <span class="qs-url">https://github.com/hideakitai/MsgPack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack" class="anchor" aria-hidden="true" href="#msgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MsgPack</h5>
<p dir="auto">MessagePack implementation for Arduino (compatible with other C++ apps)</p>
<h6 dir="auto">
<a id="user-content-feature" class="anchor" aria-hidden="true" href="#feature"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Feature</h6>
<ul dir="auto">
<li>one-line [serialize / deserialize] for almost all standard type of C++ same as <a href="https://github.com/msgpack/msgpack-c">msgpack-c</a>
</li>
<li>support custom class [serialization / deserialization]</li>
<li>support working with <a href="https://github.com/bblanchon/ArduinoJson">ArduinoJSON</a>
</li>
<li>one-line [save / load] between custom serializable MsgPack class and JSON file</li>
<li>one-line [save / load] custom serializable MsgPack class [to / from] EEPROM</li>
</ul>
<h6 dir="auto">
<a id="user-content-typical-usage" class="anchor" aria-hidden="true" href="#typical-usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Typical Usage</h6>
<p dir="auto">This library is only for serialize / deserialize.
To send / receive serialized data with <code>Stream</code> class, please use <a href="https://github.com/hideakitai/MsgPacketizer">MsgPacketizer</a>.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='#include &lt;MsgPack.h&gt;

// input to msgpack
int i = 123;
float f = 1.23;
MsgPack::str_t s = "str"; // std::string or String
MsgPack::arr_t&lt;int&gt; v {1, 2, 3}; // std::vector or arx::vector
MsgPack::map_t&lt;String, float&gt; m {{"one", 1.1}, {"two", 2.2}, {"three", 3.3}}; // std::map or arx::map

// output from msgpack
int ri;
float rf;
MsgPack::str_t rs;
MsgPack::arr_t&lt;int&gt; rv;
MsgPack::map_t&lt;String, float&gt; rm;

void setup() {
    delay(2000);
    Serial.begin(115200);
    Serial.println("msgpack test start");

    // serialize to msgpack
    MsgPack::Packer packer;
    packer.serialize(i, f, s, v, m);

    // deserialize from msgpack
    MsgPack::Unpacker unpacker;
    unpacker.feed(packer.data(), packer.size());
    unpacker.deserialize(ri, rf, rs, rv, rm);

    if (i != ri) Serial.println("failed: int");
    if (f != rf) Serial.println("failed: float");
    if (s != rs) Serial.println("failed: string");
    if (v != rv) Serial.println("failed: vector&lt;int&gt;");
    if (m != rm) Serial.println("failed: map&lt;string, int&gt;");

    Serial.println("msgpack test success");
}

void loop() {}'><pre>#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>MsgPack.h<span class="pl-pds">&gt;</span></span>

<span class="pl-c"><span class="pl-c">//</span> input to msgpack</span>
<span class="pl-k">int</span> i = <span class="pl-c1">123</span>;
<span class="pl-k">float</span> f = <span class="pl-c1">1.23</span>;
MsgPack::<span class="pl-c1">str_t</span> s = <span class="pl-s"><span class="pl-pds">"</span>str<span class="pl-pds">"</span></span>; <span class="pl-c"><span class="pl-c">//</span> std::string or String</span>
MsgPack::<span class="pl-c1">arr_t</span>&lt;<span class="pl-k">int</span>&gt; v {<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>}; <span class="pl-c"><span class="pl-c">//</span> std::vector or arx::vector</span>
MsgPack::<span class="pl-c1">map_t</span>&lt;String, <span class="pl-k">float</span>&gt; m {{<span class="pl-s"><span class="pl-pds">"</span>one<span class="pl-pds">"</span></span>, <span class="pl-c1">1.1</span>}, {<span class="pl-s"><span class="pl-pds">"</span>two<span class="pl-pds">"</span></span>, <span class="pl-c1">2.2</span>}, {<span class="pl-s"><span class="pl-pds">"</span>three<span class="pl-pds">"</span></span>, <span class="pl-c1">3.3</span>}}; <span class="pl-c"><span class="pl-c">//</span> std::map or arx::map</span>

<span class="pl-c"><span class="pl-c">//</span> output from msgpack</span>
<span class="pl-k">int</span> ri;
<span class="pl-k">float</span> rf;
MsgPack::<span class="pl-c1">str_t</span> rs;
MsgPack::<span class="pl-c1">arr_t</span>&lt;<span class="pl-k">int</span>&gt; rv;
MsgPack::<span class="pl-c1">map_t</span>&lt;String, <span class="pl-k">float</span>&gt; rm;

<span class="pl-k">void</span> <span class="pl-en">setup</span>() {
    <span class="pl-c1">delay</span>(<span class="pl-c1">2000</span>);
    Serial.<span class="pl-c1">begin</span>(<span class="pl-c1">115200</span>);
    Serial.<span class="pl-c1">println</span>(<span class="pl-s"><span class="pl-pds">"</span>msgpack test start<span class="pl-pds">"</span></span>);

    <span class="pl-c"><span class="pl-c">//</span> serialize to msgpack</span>
    MsgPack::Packer packer;
    packer.<span class="pl-c1">serialize</span>(i, f, s, v, m);

    <span class="pl-c"><span class="pl-c">//</span> deserialize from msgpack</span>
    MsgPack::Unpacker unpacker;
    unpacker.<span class="pl-c1">feed</span>(packer.<span class="pl-c1">data</span>(), packer.<span class="pl-c1">size</span>());
    unpacker.<span class="pl-c1">deserialize</span>(ri, rf, rs, rv, rm);

    <span class="pl-k">if</span> (i != ri) Serial.<span class="pl-c1">println</span>(<span class="pl-s"><span class="pl-pds">"</span>failed: int<span class="pl-pds">"</span></span>);
    <span class="pl-k">if</span> (f != rf) Serial.<span class="pl-c1">println</span>(<span class="pl-s"><span class="pl-pds">"</span>failed: float<span class="pl-pds">"</span></span>);
    <span class="pl-k">if</span> (s != rs) Serial.<span class="pl-c1">println</span>(<span class="pl-s"><span class="pl-pds">"</span>failed: string<span class="pl-pds">"</span></span>);
    <span class="pl-k">if</span> (v != rv) Serial.<span class="pl-c1">println</span>(<span class="pl-s"><span class="pl-pds">"</span>failed: vector&lt;int&gt;<span class="pl-pds">"</span></span>);
    <span class="pl-k">if</span> (m != rm) Serial.<span class="pl-c1">println</span>(<span class="pl-s"><span class="pl-pds">"</span>failed: map&lt;string, int&gt;<span class="pl-pds">"</span></span>);

    Serial.<span class="pl-c1">println</span>(<span class="pl-s"><span class="pl-pds">"</span>msgpack test success<span class="pl-pds">"</span></span>);
}

<span class="pl-k">void</span> <span class="pl-en">loop</span>() {}</pre></div>
<h6 dir="auto">
<a id="user-content-encode--decode-to-collections-without-container" class="anchor" aria-hidden="true" href="#encode--decode-to-collections-without-container"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Encode / Decode to Collections without Container</h6>
<p dir="auto">In msgpack, there are two collection types: <code>Array</code> and <code>Map</code>.
C++ containers will be converted to one of them but you can do that from individual parameters.
To <code>pack</code> / <code>unpack</code> values as such collections in a simple way, please use these functions.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='packer.to_array(i, f, s); // becoms array format [i, f, s];
unpacker.from_array(ii, ff, ss); // unpack from array format to ii, ff, ss

packer.to_map("i", i, "f", f); // becoms {"i":i, "f":f}
unpacker.from_map(ki, ii, kf, ff); // unpack from map to ii, ff, ss'><pre>packer.to_array(i, f, s); <span class="pl-c"><span class="pl-c">//</span> becoms array format [i, f, s];</span>
unpacker.from_array(ii, ff, ss); <span class="pl-c"><span class="pl-c">//</span> unpack from array format to ii, ff, ss</span>

packer.to_map(<span class="pl-s"><span class="pl-pds">"</span>i<span class="pl-pds">"</span></span>, i, <span class="pl-s"><span class="pl-pds">"</span>f<span class="pl-pds">"</span></span>, f); <span class="pl-c"><span class="pl-c">//</span> becoms {"i":i, "f":f}</span>
unpacker.from_map(ki, ii, kf, ff); <span class="pl-c"><span class="pl-c">//</span> unpack from map to ii, ff, ss</span></pre></div>
<p dir="auto">The same conversion can be achieved using <code>serialize</code> and <code>deserialize</code>.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='packer.serialize(MsgPack::arr_size_t(3), i, f, s); // [i, f, s]
unpacker.deserialize(MsgPack::arr_size_t(3), ii, ff, ss);

packer.serialize(MsgPack::map_size_t(2), "i", i, "f", f); // {"i":i, "f":f}
unpacker.deserialize(MsgPack::map_size_t(2), ki, ii, kf, ff);'><pre>packer.serialize(MsgPack::<span class="pl-c1">arr_size_t</span>(<span class="pl-c1">3</span>), i, f, s); <span class="pl-c"><span class="pl-c">//</span> [i, f, s]</span>
unpacker.deserialize(MsgPack::<span class="pl-c1">arr_size_t</span>(<span class="pl-c1">3</span>), ii, ff, ss);

packer.serialize(MsgPack::<span class="pl-c1">map_size_t</span>(<span class="pl-c1">2</span>), <span class="pl-s"><span class="pl-pds">"</span>i<span class="pl-pds">"</span></span>, i, <span class="pl-s"><span class="pl-pds">"</span>f<span class="pl-pds">"</span></span>, f); <span class="pl-c"><span class="pl-c">//</span> {"i":i, "f":f}</span>
unpacker.deserialize(MsgPack::<span class="pl-c1">map_size_t</span>(<span class="pl-c1">2</span>), ki, ii, kf, ff);</pre></div>
<p dir="auto">Here, <code>MsgPack::arr_size_t</code> and <code>MsgPack::map_size_t</code> are used to identify the size of <code>Array</code> and <code>Map</code> format in <code>serialize</code> or <code>deserialize</code>.
This way is expandable to <code>pack</code> and <code>unpack</code> complex data structure because it can be nested.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='// {"i":i, "arr":[ii, iii]}
packer.serialize(MsgPack::map_size_t(2), "i", i, "arr", MsgPack::arr_size_t(2), ii, iii);
unpacker.deserialize(MsgPack::map_size_t(2), ki, i, karr, MsgPack::arr_size_t(2), ii, iii);'><pre><span class="pl-c"><span class="pl-c">//</span> {"i":i, "arr":[ii, iii]}</span>
packer.serialize(MsgPack::<span class="pl-c1">map_size_t</span>(<span class="pl-c1">2</span>), <span class="pl-s"><span class="pl-pds">"</span>i<span class="pl-pds">"</span></span>, i, <span class="pl-s"><span class="pl-pds">"</span>arr<span class="pl-pds">"</span></span>, MsgPack::<span class="pl-c1">arr_size_t</span>(<span class="pl-c1">2</span>), ii, iii);
unpacker.deserialize(MsgPack::<span class="pl-c1">map_size_t</span>(<span class="pl-c1">2</span>), ki, i, karr, MsgPack::<span class="pl-c1">arr_size_t</span>(<span class="pl-c1">2</span>), ii, iii);</pre></div>
<h6 dir="auto">
<a id="user-content-custom-class-adaptation" class="anchor" aria-hidden="true" href="#custom-class-adaptation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Custom Class Adaptation</h6>
<p dir="auto">To serialize / deserialize custom type you defined, please use <code>MSGPACK_DEFINE()</code> macro inside of your class. This macro enables you to convert your custom class to <code>Array</code> format.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="struct CustomClass {
    int i;
    float f;
    MsgPack::str_t s;
    MSGPACK_DEFINE(i, f, s); // -&gt; [i, f, s]
};"><pre><span class="pl-k">struct</span> <span class="pl-en">CustomClass</span> {
    <span class="pl-k">int</span> i;
    <span class="pl-k">float</span> f;
    MsgPack::<span class="pl-c1">str_t</span> s;
    <span class="pl-en">MSGPACK_DEFINE</span>(i, f, s); <span class="pl-c"><span class="pl-c">//</span> -&gt; [i, f, s]</span>
};</pre></div>
<p dir="auto">After that, you can <code>serialize</code> your class completely same as other types.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="int i;
float f;
MsgPack::str_t s;
CustomClass c;

MsgPack::Packer packer;
packer.serialize(i, f, s, c);
// -&gt; packer.serialize(i, f, s, arr_size_t(3), c.i, c.f, c.s)

int ii;
float ff;
MsgPack::str_t ss;
CustomClass cc;

MsgPack::Unpacker unpacker;
unpacker.feed(packer.data(), packer.size());
unpacker.deserialize(ii, ff, ss, cc);"><pre><span class="pl-k">int</span> i;
<span class="pl-k">float</span> f;
MsgPack::<span class="pl-c1">str_t</span> s;
CustomClass c;

MsgPack::Packer packer;
packer.serialize(i, f, s, c);
<span class="pl-c"><span class="pl-c">//</span> -&gt; packer.serialize(i, f, s, arr_size_t(3), c.i, c.f, c.s)</span>

<span class="pl-k">int</span> ii;
<span class="pl-k">float</span> ff;
MsgPack::<span class="pl-c1">str_t</span> ss;
CustomClass cc;

MsgPack::Unpacker unpacker;
unpacker.feed(packer.data(), packer.size());
unpacker.deserialize(ii, ff, ss, cc);</pre></div>
<p dir="auto">You can also wrap your custom class to <code>Map</code> format by using <code>MSGPACK_DEFINE_MAP</code> macro.
Please note that you need "key" string for <code>Map</code> format.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='struct CustomClass {
    MsgPack::str_t key_i {"i"}; int i;
    MsgPack::str_t key_f {"f"}; float f;
    MSGPACK_DEFINE_MAP(key_i, i, key_f, f); // -&gt; {"i":i, "f":f}
};

CustomClass c;
MsgPack::Packer packer;
packer.serialize(c);
// -&gt; packer.serialize(map_size_t(2), c.key_i, c.i, c.key_f, c.f)

CustomClass cc;
MsgPack::Unpacker unpacker;
unpacker.feed(packer.data(), packer.size());
unpacker.deserialize(cc);'><pre><span class="pl-k">struct</span> <span class="pl-en">CustomClass</span> {
    MsgPack::<span class="pl-c1">str_t</span> key_i {<span class="pl-s"><span class="pl-pds">"</span>i<span class="pl-pds">"</span></span>}; <span class="pl-k">int</span> i;
    MsgPack::<span class="pl-c1">str_t</span> key_f {<span class="pl-s"><span class="pl-pds">"</span>f<span class="pl-pds">"</span></span>}; <span class="pl-k">float</span> f;
    <span class="pl-en">MSGPACK_DEFINE_MAP</span>(key_i, i, key_f, f); <span class="pl-c"><span class="pl-c">//</span> -&gt; {"i":i, "f":f}</span>
};

CustomClass c;
MsgPack::Packer packer;
packer.serialize(c);
<span class="pl-c"><span class="pl-c">//</span> -&gt; packer.serialize(map_size_t(2), c.key_i, c.i, c.key_f, c.f)</span>

CustomClass cc;
MsgPack::Unpacker unpacker;
unpacker.feed(packer.data(), packer.size());
unpacker.deserialize(cc);</pre></div>
<h7 dir="auto">
<a id="user-content-custom-class-with-inheritance" class="anchor" aria-hidden="true" href="#custom-class-with-inheritance"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Custom Class with Inheritance</h7>
<p dir="auto">Also you can use <code>MSGPACK_BASE()</code> macro to pack values of base class.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="struct Base {
    int i;
    float f;
    MSGPACK_DEFINE(i, f);
};

struct Derived : public Base {
    MsgPack::str_t s;
    MSGPACK_DEFINE(s, MSGPACK_BASE(Base));
    // -&gt; packer.serialize(arr_size_t(2), s, arr_size_t(2), Base::i, Base::f)
};"><pre><span class="pl-k">struct</span> <span class="pl-en">Base</span> {
    <span class="pl-k">int</span> i;
    <span class="pl-k">float</span> f;
    <span class="pl-en">MSGPACK_DEFINE</span>(i, f);
};

<span class="pl-k">struct</span> <span class="pl-en">Derived</span> : <span class="pl-k">public</span> <span class="pl-en">Base</span> {
    MsgPack::<span class="pl-c1">str_t</span> s;
    <span class="pl-en">MSGPACK_DEFINE</span>(s, MSGPACK_BASE(Base));
    <span class="pl-c"><span class="pl-c">//</span> -&gt; packer.serialize(arr_size_t(2), s, arr_size_t(2), Base::i, Base::f)</span>
};</pre></div>
<p dir="auto">If you wamt to use <code>Map</code> format in derived class, add "key" for your <code>MSGPACK_BASE</code>.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="struct Derived : public Base {
    MsgPack::str_t key_s; MsgPack::str_t s;
    MsgPack::str_t key_b; // key for base class
    MSGPACK_DEFINE_MAP(key_s, s, key_b, MSGPACK_BASE(Base));
    // -&gt; packer.serialize(map_size_t(2), key_s, s, key_b, arr_size_t(2), Base::i, Base::f)
};"><pre><span class="pl-k">struct</span> <span class="pl-en">Derived</span> : <span class="pl-k">public</span> <span class="pl-en">Base</span> {
    MsgPack::<span class="pl-c1">str_t</span> key_s; MsgPack::<span class="pl-c1">str_t</span> s;
    MsgPack::<span class="pl-c1">str_t</span> key_b; <span class="pl-c"><span class="pl-c">//</span> key for base class</span>
    <span class="pl-en">MSGPACK_DEFINE_MAP</span>(key_s, s, key_b, MSGPACK_BASE(Base));
    <span class="pl-c"><span class="pl-c">//</span> -&gt; packer.serialize(map_size_t(2), key_s, s, key_b, arr_size_t(2), Base::i, Base::f)</span>
};</pre></div>
<h7 dir="auto">
<a id="user-content-nested-custom-class" class="anchor" aria-hidden="true" href="#nested-custom-class"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Nested Custom Class</h7>
<p dir="auto">You can nest custom classes to express complex data structure.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='// serialize and deserialize nested structure
// {"i":i, "f":f, "a":["str", {"first":1, "second":"two"}]}

// {"first":1, "second":"two"}
struct MyMap {
    MsgPack::str_t key_first; int i;
    MsgPack::str_t key_second; MsgPack::str_t s;
    MSGPACK_DEFINE_MAP(key_first, i, key_second, s);
};

// ["str", {"first":1, "second":"two"}]
struct MyArr {
    MsgPack::str_t s;
    MyMap m;
    MSGPACK_DEFINE(s, m):
};

// {"i":i, "f":f, "a":["str", {"first":1, "second":"two"}]}
struct MyNestedClass {
    MsgPack::str_t key_i; int i;
    MsgPack::str_t key_f; int f;
    MsgPack::str_t key_a;
    MyArr arr;
    MSGPACK_DEFINE_MAP(key_i, i, key_f, f, key_a, arr);
};'><pre><span class="pl-c"><span class="pl-c">//</span> serialize and deserialize nested structure</span>
<span class="pl-c"><span class="pl-c">//</span> {"i":i, "f":f, "a":["str", {"first":1, "second":"two"}]}</span>

<span class="pl-c"><span class="pl-c">//</span> {"first":1, "second":"two"}</span>
<span class="pl-k">struct</span> <span class="pl-en">MyMap</span> {
    MsgPack::<span class="pl-c1">str_t</span> key_first; <span class="pl-k">int</span> i;
    MsgPack::<span class="pl-c1">str_t</span> key_second; MsgPack::<span class="pl-c1">str_t</span> s;
    <span class="pl-en">MSGPACK_DEFINE_MAP</span>(key_first, i, key_second, s);
};

<span class="pl-c"><span class="pl-c">//</span> ["str", {"first":1, "second":"two"}]</span>
<span class="pl-k">struct</span> <span class="pl-en">MyArr</span> {
    MsgPack::<span class="pl-c1">str_t</span> s;
    MyMap m;
    <span class="pl-en">MSGPACK_DEFINE</span>(s, m):
};

<span class="pl-c"><span class="pl-c">//</span> {"i":i, "f":f, "a":["str", {"first":1, "second":"two"}]}</span>
<span class="pl-k">struct</span> <span class="pl-en">MyNestedClass</span> {
    MsgPack::<span class="pl-c1">str_t</span> key_i; <span class="pl-k">int</span> i;
    MsgPack::<span class="pl-c1">str_t</span> key_f; <span class="pl-k">int</span> f;
    MsgPack::<span class="pl-c1">str_t</span> key_a;
    MyArr arr;
    <span class="pl-en">MSGPACK_DEFINE_MAP</span>(key_i, i, key_f, f, key_a, arr);
};</pre></div>
<p dir="auto">And you can <code>serialize</code> / <code>deserialize</code> as same as other types.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="MyNestedClass c;
MsgPack::Packer packer;
packer.serialize(c);

MyNestedClass cc;
MsgPack::Unpacker unpacker;
unpacker.feed(packer.data(), packer.size());
unpacker.deserialize(cc);"><pre>MyNestedClass c;
MsgPack::Packer packer;
packer.serialize(c);

MyNestedClass cc;
MsgPack::Unpacker unpacker;
unpacker.feed(packer.data(), packer.size());
unpacker.deserialize(cc);</pre></div>
<h6 dir="auto">
<a id="user-content-json-and-other-languages-msgpack-compatibility" class="anchor" aria-hidden="true" href="#json-and-other-languages-msgpack-compatibility"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>JSON and Other language's msgpack compatibility</h6>
<p dir="auto">In other languages like JavaScript, Python and etc. has also library for msgpack.
But some libraries can NOT convert msgpack in "plain" style.
They always wrap them into collections like <code>Array</code> or <code>Map</code> by default.
For example, you can't convert "plain" format in other languages.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='packer.serialize(i, f, s);                // "plain" format is NOT unpackable
packer.serialize(arr_size_t(3), i, f, s); // unpackable if you wrap that into Array'><pre>packer.serialize(i, f, s);                <span class="pl-c"><span class="pl-c">//</span> "plain" format is NOT unpackable</span>
packer.serialize(<span class="pl-c1">arr_size_t</span>(<span class="pl-c1">3</span>), i, f, s); <span class="pl-c"><span class="pl-c">//</span> unpackable if you wrap that into Array</span></pre></div>
<p dir="auto">It is because the msgpack is used as based on JSON (I think).
So you need to use <code>Array</code> format for JSON array, and <code>Map</code> for Json Object.
To achieve that, there are several ways.</p>
<ul dir="auto">
<li>use <code>to_array</code> or <code>to_map</code> to convert to simple structure</li>
<li>use <code>serialize()</code> or <code>deserialize()</code> with <code>arr_size_t</code> / <code>map_size_t</code> for complex structure</li>
<li>use custom class as JSON array / object which is wrapped into <code>Array</code> / <code>Map</code>
</li>
<li>use custom class nest recursively for more complex structure</li>
<li>use <code>ArduinoJson</code> for more flexible handling of JSON</li>
</ul>
<h7 dir="auto">
<a id="user-content-use-msgpack-with-arduinojson" class="anchor" aria-hidden="true" href="#use-msgpack-with-arduinojson"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Use MsgPack with ArduinoJson</h7>
<ul dir="auto">
<li>you can [serialize / deserialize] <code>StaticJsonDocument&lt;N&gt;</code> and <code>DynamicJsonDocument</code> directly</li>
</ul>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="#include &lt;ArduinoJson.h&gt;  // include before MsgPack.h
#include &lt;MsgPack.h&gt;

void setup() {
    StaticJsonDocument&lt;200&gt; doc_in;
    MsgPack::Packer packer;
    packer.serialize(doc_in); // serialize directly

    StaticJsonDocument&lt;200&gt; doc;
    MsgPack::Unpacker unpacker;
    unpacker.feed(packer.data(), packer.size());
    unpacker.deserialize(doc); // deserialize directly
}"><pre>#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>ArduinoJson.h<span class="pl-pds">&gt;</span></span>  <span class="pl-c"><span class="pl-c">//</span> include before MsgPack.h</span>
#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>MsgPack.h<span class="pl-pds">&gt;</span></span>

<span class="pl-k">void</span> <span class="pl-en">setup</span>() {
    StaticJsonDocument&lt;<span class="pl-c1">200</span>&gt; doc_in;
    MsgPack::Packer packer;
    packer.<span class="pl-c1">serialize</span>(doc_in); <span class="pl-c"><span class="pl-c">//</span> serialize directly</span>

    StaticJsonDocument&lt;<span class="pl-c1">200</span>&gt; doc;
    MsgPack::Unpacker unpacker;
    unpacker.<span class="pl-c1">feed</span>(packer.<span class="pl-c1">data</span>(), packer.<span class="pl-c1">size</span>());
    unpacker.<span class="pl-c1">deserialize</span>(doc); <span class="pl-c"><span class="pl-c">//</span> deserialize directly</span>
}</pre></div>
<h6 dir="auto">
<a id="user-content-utilities" class="anchor" aria-hidden="true" href="#utilities"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Utilities</h6>
<h7 dir="auto">
<a id="user-content-saveload-tofrom-json-file-directly-fromto-msgpack" class="anchor" aria-hidden="true" href="#saveload-tofrom-json-file-directly-fromto-msgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Save/Load to/from JSON file directly from/to MsgPack</h7>
<p dir="auto">You can directly save/load to/from JSON file with this library. <code>SD</code>, <code>SdFat</code>, <code>SD_MMC</code>, <code>SPIFFS</code>, etc. are available for the target file system. Please see <code>save_load_as_json_file</code> example for more details.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='#include &lt;SD.h&gt;
#include &lt;MsgPack.h&gt;

struct MyConfig {
    Meta meta;
    Data data;
    MSGPACK_DEFINE(meta, data);
};

MyConfig config;

void setup() {
    SD.begin();

    // load json data from /config.txt to config struct directly
    MsgPack::file::load_from_json_static&lt;256&gt;(SD, "/config.txt", config);

    // change your configuration...

    // save config data from config struct to /config.txt as json directly
    MsgPack::file::save_as_json_static&lt;256&gt;(SD, "/config.txt", config);
}'><pre>#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>SD.h<span class="pl-pds">&gt;</span></span>
#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>MsgPack.h<span class="pl-pds">&gt;</span></span>

<span class="pl-k">struct</span> <span class="pl-en">MyConfig</span> {
    Meta meta;
    Data data;
    <span class="pl-en">MSGPACK_DEFINE</span>(meta, data);
};

MyConfig config;

<span class="pl-k">void</span> <span class="pl-en">setup</span>() {
    SD.<span class="pl-c1">begin</span>();

    <span class="pl-c"><span class="pl-c">//</span> load json data from /config.txt to config struct directly</span>
    MsgPack::file::load_from_json_static&lt;<span class="pl-c1">256</span>&gt;(SD, <span class="pl-s"><span class="pl-pds">"</span>/config.txt<span class="pl-pds">"</span></span>, config);

    <span class="pl-c"><span class="pl-c">//</span> change your configuration...</span>

    <span class="pl-c"><span class="pl-c">//</span> save config data from config struct to /config.txt as json directly</span>
    MsgPack::file::save_as_json_static&lt;<span class="pl-c1">256</span>&gt;(SD, <span class="pl-s"><span class="pl-pds">"</span>/config.txt<span class="pl-pds">"</span></span>, config);
}</pre></div>
<h7 dir="auto">
<a id="user-content-saveload-tofrom-eeprom-with-msgpack" class="anchor" aria-hidden="true" href="#saveload-tofrom-eeprom-with-msgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Save/Load to/from EEPROM with MsgPack</h7>
<p dir="auto">In Arduino, you can use the MsgPack utility to save/load to/from EEPROM. Following code shows how to use them. Please see <code>save_load_eeprom</code> example for more details.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="struct MyConfig {
    Meta meta;
    Data data;
    MSGPACK_DEFINE(meta, data);
};

MyConfig config;

void setup() {
    EEPROM.begin();

    // load current config
    MsgPack::eeprom::load(config);

    // change your configuration...

    // save
    MsgPack::eeprom::save(config);

    EEPROM.end();
}"><pre><span class="pl-k">struct</span> <span class="pl-en">MyConfig</span> {
    Meta meta;
    Data data;
    <span class="pl-en">MSGPACK_DEFINE</span>(meta, data);
};

MyConfig config;

<span class="pl-k">void</span> <span class="pl-en">setup</span>() {
    EEPROM.<span class="pl-c1">begin</span>();

    <span class="pl-c"><span class="pl-c">//</span> load current config</span>
    <span class="pl-c1">MsgPack::eeprom::load</span>(config);

    <span class="pl-c"><span class="pl-c">//</span> change your configuration...</span>

    <span class="pl-c"><span class="pl-c">//</span> save</span>
    <span class="pl-c1">MsgPack::eeprom::save</span>(config);

    EEPROM.<span class="pl-c1">end</span>();
}</pre></div>
<h6 dir="auto">
<a id="user-content-supported-type-adaptors" class="anchor" aria-hidden="true" href="#supported-type-adaptors"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Supported Type Adaptors</h6>
<p dir="auto">These are the lists of types which can be <code>serialize</code> and <code>deserialize</code>.
You can also <code>pack()</code> or <code>unpack()</code> variable one by one.</p>
<h7 dir="auto">
<a id="user-content-nil" class="anchor" aria-hidden="true" href="#nil"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>NIL</h7>
<ul dir="auto">
<li><code>MsgPack::object::nil_t</code></li>
</ul>
<h7 dir="auto">
<a id="user-content-bool" class="anchor" aria-hidden="true" href="#bool"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Bool</h7>
<ul dir="auto">
<li><code>bool</code></li>
</ul>
<h7 dir="auto">
<a id="user-content-integer" class="anchor" aria-hidden="true" href="#integer"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Integer</h7>
<ul dir="auto">
<li><code>char (signed/unsigned)</code></li>
<li><code>ints (signed/unsigned)</code></li>
</ul>
<h7 dir="auto">
<a id="user-content-float" class="anchor" aria-hidden="true" href="#float"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Float</h7>
<ul dir="auto">
<li><code>float</code></li>
<li><code>double</code></li>
</ul>
<h7 dir="auto">
<a id="user-content-str" class="anchor" aria-hidden="true" href="#str"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Str</h7>
<ul dir="auto">
<li><code>char*</code></li>
<li><code>char[]</code></li>
<li>
<code>std::string</code> or <code>String(Arduino)</code> (<code>MsgPack::str_t</code>)</li>
</ul>
<h7 dir="auto">
<a id="user-content-bin" class="anchor" aria-hidden="true" href="#bin"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Bin</h7>
<ul dir="auto">
<li>
<code>unsigned char*</code> (need to <code>serialize(ptr, size)</code> or <code>pack(ptr, size)</code>)</li>
<li>
<code>unsigned char[]</code> (need to <code>serialize(ptr, size)</code> or <code>pack(ptr, size)</code>)</li>
<li>
<code>std::vector&lt;char&gt;</code> (<code>MsgPack::bin_t&lt;char&gt;</code>)</li>
<li>
<code>std::vector&lt;unsigned char&gt;</code> (<code>MsgPack::bin_t&lt;unsigned char&gt;</code>)</li>
<li><code>std::array&lt;char&gt;</code></li>
<li><code>std::array&lt;unsigned char&gt;</code></li>
</ul>
<h7 dir="auto">
<a id="user-content-array" class="anchor" aria-hidden="true" href="#array"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Array</h7>
<ul dir="auto">
<li>
<code>T[]</code> (need to <code>serialize(ptr, size)</code> or <code>pack(ptr, size)</code>)</li>
<li>
<code>std::vector</code> (<code>MsgPack::arr_t&lt;T&gt;</code>)</li>
<li>
<code>std::array</code> (<code>MsgPack::fix_arr_t&lt;T, N&gt;</code>)</li>
<li><code>std::deque</code></li>
<li><code>std::pair</code></li>
<li><code>std::tuple</code></li>
<li><code>std::list</code></li>
<li><code>std::forward_list</code></li>
<li><code>std::set</code></li>
<li><code>std::multiset</code></li>
<li><code>std::unordered_set</code></li>
<li><code>std::unordered_multiset</code></li>
</ul>
<h7 dir="auto">
<a id="user-content-map" class="anchor" aria-hidden="true" href="#map"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Map</h7>
<ul dir="auto">
<li>
<code>std::map</code> (<code>MsgPack::map_t&lt;T&gt;</code>)</li>
<li><code>std::multimap</code></li>
<li><code>std::unordered_map</code></li>
<li><code>std::unordered_multimap</code></li>
</ul>
<h7 dir="auto">
<a id="user-content-ext" class="anchor" aria-hidden="true" href="#ext"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Ext</h7>
<ul dir="auto">
<li><code>MsgPack::object::ext</code></li>
</ul>
<h7 dir="auto">
<a id="user-content-timestamp" class="anchor" aria-hidden="true" href="#timestamp"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>TimeStamp</h7>
<ul dir="auto">
<li><code>MsgPack::object::timespec</code></li>
</ul>
<h7 dir="auto">
<a id="user-content-na" class="anchor" aria-hidden="true" href="#na"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>N/A</h7>
<ul dir="auto">
<li><code>std::queue</code></li>
<li><code>std::priority_queue</code></li>
<li><code>std::bitset</code></li>
<li><code>std::stack</code></li>
</ul>
<h7 dir="auto">
<a id="user-content-note" class="anchor" aria-hidden="true" href="#note"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Note</h7>
<ul dir="auto">
<li>
<code>unordered_xxx</code> cannot be used in all Arduino</li>
<li>C-style array and pointers are supported only packing.</li>
<li>for NO-STL Arduino, following types can be used
<ul dir="auto">
<li>all types of NIL, Bool, Integer, Float, Str, Bin</li>
<li>for Array, only <code>T[]</code>, <code>MsgPack::arr_t&lt;T&gt;</code> (<code>arx::vector&lt;T&gt;</code>), and <code>MsgPack::fix_arr_t&lt;T, N&gt;</code> (<code>arx::array&lt;T, N&gt;</code>) can be used</li>
<li>for Map, only <code>MsgPack::map_t&lt;T, U&gt;</code> (<code>arx::map&lt;T, U&gt;</code>) can be used</li>
<li>for the detail of <code>arx::xxx</code>, see <a href="https://github.com/hideakitai/ArxContainer">ArxContainer</a>
</li>
</ul>
</li>
</ul>
<h7 dir="auto">
<a id="user-content-additional-types-for-msgpack" class="anchor" aria-hidden="true" href="#additional-types-for-msgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Additional Types for MsgPack</h7>
<p dir="auto">There are some additional types are defined to express msgpack formats easily.</p>
<h8 dir="auto">
<a id="user-content-type-aliases-for-str--bin--array--map" class="anchor" aria-hidden="true" href="#type-aliases-for-str--bin--array--map"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Type Aliases for Str / Bin / Array / Map</h8>
<p dir="auto">These types have type aliases like this:</p>
<ul dir="auto">
<li>
<code>MsgPack::str_t</code> = <code>String</code> (Arduino only)</li>
<li>
<code>MsgPack::bin_t&lt;T&gt;</code> = <code>std::vector&lt;T&gt;</code>
</li>
<li>
<code>MsgPack::arr_t&lt;T&gt;</code> = <code>std::vector&lt;T&gt;</code>
</li>
<li>
<code>MsgPack::fix_arr_t&lt;T, N&gt;</code> = <code>std::array&lt;T, N&gt;</code>
</li>
<li>
<code>MsgPack::map_t&lt;T, U&gt;</code> = <code>std::map&lt;T, U&gt;</code>
</li>
</ul>
<p dir="auto">For general C++ apps (not Arduino), <code>str_t</code> is defined as:</p>
<ul dir="auto">
<li>
<code>MsgPack::str_t</code> = <code>std::string</code>
</li>
</ul>
<h8 dir="auto">
<a id="user-content-msgpackobejectnil_t" class="anchor" aria-hidden="true" href="#msgpackobejectnil_t"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MsgPack::obeject::nil_t</h8>
<p dir="auto"><code>MsgPack::object::nil_t</code> is used to <code>pack</code> and <code>unpack</code> Nil type.
This object is just a dummy and do nothing.</p>
<h8 dir="auto">
<a id="user-content-msgpackobejectext" class="anchor" aria-hidden="true" href="#msgpackobejectext"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MsgPack::obeject::ext</h8>
<p dir="auto"><code>MsgPack::object::ext</code> holds binary data of Ext type.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="// create ext type with args: int8_t, const uint8_t*, uint32_t
MsgPack::object::ext e(type, bin_ptr, size);
MsgPack::Packer packer;
packer.serialize(e); // serialize ext type

MsgPack::object::ext r;
msgPack::Unpacker unpacker;
unpacker.feed(packer.data(), packer.size());
unpacker.deserialize(r); // deserialize ext type"><pre><span class="pl-c"><span class="pl-c">//</span> create ext type with args: int8_t, const uint8_t*, uint32_t</span>
MsgPack::object::ext <span class="pl-en">e</span>(type, bin_ptr, size);
MsgPack::Packer packer;
packer.serialize(e); <span class="pl-c"><span class="pl-c">//</span> serialize ext type</span>

MsgPack::object::ext r;
msgPack::Unpacker unpacker;
unpacker.feed(packer.data(), packer.size());
unpacker.deserialize(r); <span class="pl-c"><span class="pl-c">//</span> deserialize ext type</span></pre></div>
<h8 dir="auto">
<a id="user-content-msgpackobejecttimespec" class="anchor" aria-hidden="true" href="#msgpackobejecttimespec"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MsgPack::obeject::timespec</h8>
<p dir="auto"><code>MsgPack::object::timespec</code> is used to <code>pack</code> and <code>unpack</code> Timestamp type.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="MsgPack::object::timespec t = {
    .tv_sec  = 123456789, /* int64_t  */
    .tv_usec = 123456789  /* uint32_t */
};
MsgPack::Packer packer;
packer.serialize(t); // serialize timestamp type

MsgPack::object::timespec r;
msgPack::Unpacker unpacker;
unpacker.feed(packer.data(), packer.size());
unpacker.deserialize(r); // deserialize timestamp type"><pre>MsgPack::object::<span class="pl-c1">timespec</span> t = {
    .<span class="pl-smi">tv_sec</span>  = <span class="pl-c1">123456789</span>, <span class="pl-c"><span class="pl-c">/*</span> int64_t  <span class="pl-c">*/</span></span>
    .<span class="pl-smi">tv_usec</span> = <span class="pl-c1">123456789</span>  <span class="pl-c"><span class="pl-c">/*</span> uint32_t <span class="pl-c">*/</span></span>
};
MsgPack::Packer packer;
packer.serialize(t); <span class="pl-c"><span class="pl-c">//</span> serialize timestamp type</span>

MsgPack::object::<span class="pl-c1">timespec</span> r;
msgPack::Unpacker unpacker;
unpacker.feed(packer.data(), packer.size());
unpacker.deserialize(r); <span class="pl-c"><span class="pl-c">//</span> deserialize timestamp type</span></pre></div>
<h6 dir="auto">
<a id="user-content-other-options" class="anchor" aria-hidden="true" href="#other-options"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Other Options</h6>
<h7 dir="auto">
<a id="user-content-enable-error-info" class="anchor" aria-hidden="true" href="#enable-error-info"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Enable Error Info</h7>
<p dir="auto">Error information report is disabled by default. You can enable it by defining this macro.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="#define MSGPACK_DEBUGLOG_ENABLE"><pre>#<span class="pl-k">define</span> <span class="pl-en">MSGPACK_DEBUGLOG_ENABLE</span></pre></div>
<p dir="auto">Also you can change debug info stream by calling this macro (default: <code>Serial</code>).</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="DEBUG_LOG_ATTACH_STREAM(Serial1);"><pre><span class="pl-en">DEBUG_LOG_ATTACH_STREAM</span>(Serial1);</pre></div>
<p dir="auto">See <a href="https://github.com/hideakitai/DebugLog">DebugLog</a> for details.</p>
<h7 dir="auto">
<a id="user-content-packet-data-storage-class-inside" class="anchor" aria-hidden="true" href="#packet-data-storage-class-inside"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Packet Data Storage Class Inside</h7>
<p dir="auto">STL is used to handle packet data by default, but for following boards/architectures, <a href="https://github.com/hideakitai/ArxContainer">ArxContainer</a> is used to store the packet data because STL can not be used for such boards.
The storage size of such boards for max packet binary size and number of msgpack objects are limited.</p>
<ul dir="auto">
<li>AVR</li>
<li>megaAVR</li>
<li>SAMD</li>
</ul>
<h7 dir="auto">
<a id="user-content-memory-management-for-no-stl-boards" class="anchor" aria-hidden="true" href="#memory-management-for-no-stl-boards"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Memory Management (for NO-STL Boards)</h7>
<p dir="auto">As mentioned above, for such boards like Arduino Uno, the storage sizes are limited.
And of course you can manage them by defining following macros.
But these default values are optimized for such boards, please be careful not to excess your boards storage/memory.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="// msgpack serialized binary size
#define MSGPACK_MAX_PACKET_BYTE_SIZE  128
// max size of MsgPack::arr_t
#define MSGPACK_MAX_ARRAY_SIZE          8
// max size of MsgPack::map_t
#define MSGPACK_MAX_MAP_SIZE            8
// msgpack objects size in one packet
#define MSGPACK_MAX_OBJECT_SIZE        24"><pre><span class="pl-c"><span class="pl-c">//</span> msgpack serialized binary size</span>
#<span class="pl-k">define</span> <span class="pl-en">MSGPACK_MAX_PACKET_BYTE_SIZE</span>  <span class="pl-c1">128</span>
<span class="pl-c"><span class="pl-c">//</span> max size of MsgPack::arr_t</span>
#<span class="pl-k">define</span> <span class="pl-en">MSGPACK_MAX_ARRAY_SIZE</span>          <span class="pl-c1">8</span>
<span class="pl-c"><span class="pl-c">//</span> max size of MsgPack::map_t</span>
#<span class="pl-k">define</span> <span class="pl-en">MSGPACK_MAX_MAP_SIZE</span>            <span class="pl-c1">8</span>
<span class="pl-c"><span class="pl-c">//</span> msgpack objects size in one packet</span>
#<span class="pl-k">define</span> <span class="pl-en">MSGPACK_MAX_OBJECT_SIZE</span>        <span class="pl-c1">24</span></pre></div>
<p dir="auto">These macros have no effect for STL enabled boards.</p>
<p dir="auto">In addtion for such boards, type aliases for following types are different from others.</p>
<ul dir="auto">
<li>
<code>MsgPack::str_t</code> = <code>String</code>
</li>
<li>
<code>MsgPack::bin_t&lt;T&gt;</code> = <code>arx::vector&lt;T, N = MSGPACK_MAX_PACKET_BYTE_SIZE&gt;</code>
</li>
<li>
<code>MsgPack::arr_t&lt;T&gt;</code> = <code>arx::vector&lt;T, N = MSGPACK_MAX_ARRAY_SIZE&gt;</code>
</li>
<li>
<code>MsgPack::map_t&lt;T, U&gt;</code> = <code>arx::map&lt;T, U, N = MSGPACK_MAX_MAP_SIZE&gt;</code>
</li>
</ul>
<p dir="auto">Please see "Memory Management" section and <a href="https://github.com/hideakitai/ArxContainer">ArxContainer</a> for detail.</p>
<h7 dir="auto">
<a id="user-content-stl-library-for-arduino-support" class="anchor" aria-hidden="true" href="#stl-library-for-arduino-support"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>STL library for Arduino Support</h7>
<p dir="auto">For such boards, there are several STL libraries, like <a href="https://github.com/mike-matera/ArduinoSTL">ArduinoSTL</a>, <a href="https://github.com/maniacbug/StandardCplusplus">StandardCPlusPlus</a>, and so on.
But such libraries are mainly based on <a href="https://cxx.uclibc.org/" rel="nofollow">uClibc++</a> and it has many lack of function.
I considered to support them but I won't support them unless uClibc++ becomes much better compatibility to standard C++ library.
I reccomend to use low cost but much better performance chip like ESP series.</p>
<h6 dir="auto">
<a id="user-content-embedded-libraries" class="anchor" aria-hidden="true" href="#embedded-libraries"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Embedded Libraries</h6>
<ul dir="auto">
<li><a href="https://github.com/hideakitai/ArxTypeTraits">ArxTypeTraits v0.2.3</a></li>
<li><a href="https://github.com/hideakitai/ArxContainer">ArxContainer v0.4.0</a></li>
<li><a href="https://github.com/hideakitai/DebugLog">DebugLog v0.6.6</a></li>
<li><a href="https://github.com/hideakitai/TeensyDirtySTLErrorSolution">TeensyDirtySTLErrorSolution v0.1.0</a></li>
</ul>
<h6 dir="auto">
<a id="user-content-used-inside-of" class="anchor" aria-hidden="true" href="#used-inside-of"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Used Inside of</h6>
<ul dir="auto">
<li><a href="https://github.com/hideakitai/MsgPacketizer">MsgPacketizer</a></li>
</ul>
<h6 dir="auto">
<a id="user-content-apis" class="anchor" aria-hidden="true" href="#apis"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>APIs</h6>
<h7 dir="auto">
<a id="user-content-msgpackpacker" class="anchor" aria-hidden="true" href="#msgpackpacker"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MsgPack::Packer</h7>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="// reserve internal buffer
void reserve_buffer(const size_t size);

// variable sized serializer for any type
template &lt;typename First, typename ...Rest&gt;
void serialize(const First&amp; first, Rest&amp;&amp;... rest);
template &lt;typename T&gt;
void serialize(const arr_size_t&amp; arr_size, Args&amp;&amp;... args);
template &lt;typename ...Args&gt;
void serialize(const map_size_t&amp; map_size, Args&amp;&amp;... args);
template &lt;size_t N&gt;
void serialize(const StaticJsonDocument&lt;N&gt;&amp; doc, const size_t num_max_string_type = 32);
void serialize(const DynamicJsonDocument&amp; doc, const size_t num_max_string_type = 32);
void serialize_arduinojson(const JsonDocument&amp; doc, const size_t num_max_string_type = 32);

// variable sized serializer to array or map for any type
template &lt;typename ...Args&gt;
void to_array(Args&amp;&amp;... args);
template &lt;typename ...Args&gt;
void to_map(Args&amp;&amp;... args);

// single arg packer for any type
template &lt;typename T&gt;
void pack&lt;T&gt;(const T&amp; t);
template &lt;typename T&gt;
void pack&lt;T&gt;(const T* ptr, const size_t size); // only for pointer types

// accesor and utility for serialized binary data
const bin_t&lt;uint8_t&gt;&amp; packet() const;
const uint8_t* data() const;
size_t size() const;
size_t indices() const;
void clear();

// abstract serializer for msgpack formats
// serialize() and pack() are wrapper for these methods
void packInteger(const T&amp; value); // accept both uint and int
void packFloat(const T&amp; value);
void packString(const T&amp; str);
void packString(const T&amp; str, const size_t len);
void packBinary(const uint8_t* bin, const size_t size);
void packArraySize(const size_t size);
void packMapSize(const size_t size);
void packFixExt(const int8_t type, const T value);
void packFixExt(const int8_t type, const uint64_t value_h, const uint64_t value_l);
void packFixExt(const int8_t type, const uint8_t* ptr, const uint8_t size);
void packFixExt(const int8_t type, const uint16_t* ptr, const uint8_t size);
void packFixExt(const int8_t type, const uint32_t* ptr, const uint8_t size);
void packFixExt(const int8_t type, const uint64_t* ptr, const uint8_t size);
void packExt(const int8_t type, const T* ptr, const U size);
void packExt(const object::ext&amp; e);
void packTimestamp(const object::timespec&amp; time);

// serializer for detailed msgpack format
// serialize() and pack() are wrapper for these methods
void packNil();
void packNil(const object::nil_t&amp; n);
void packBool(const bool b);
void packUInt7(const uint8_t value);
void packUInt8(const uint8_t value);
void packUInt16(const uint16_t value);
void packUInt32(const uint32_t value);
void packUInt64(const uint64_t value);
void packInt5(const int8_t value);
void packInt8(const int8_t value);
void packInt16(const int16_t value);
void packInt32(const int32_t value);
void packInt64(const int64_t value);
void packFloat32(const float value);
void packFloat64(const double value);
void packString5(const str_t&amp; str);
void packString5(const str_t&amp; str, const size_t len);
void packString5(const char* value);
void packString5(const char* value, const size_t len);
void packString8(const str_t&amp; str);
void packString8(const str_t&amp; str, const size_t len);
void packString8(const char* value);
void packString8(const char* value, const size_t len);
void packString16(const str_t&amp; str);
void packString16(const str_t&amp; str, const size_t len);
void packString16(const char* value);
void packString16(const char* value, const size_t len);
void packString32(const str_t&amp; str);
void packString32(const str_t&amp; str, const size_t len);
void packString32(const char* value);
void packString32(const char* value, const size_t len);
void packString5(const __FlashStringHelper* str);
void packString5(const __FlashStringHelper* str, const size_t len);
void packString8(const __FlashStringHelper* str);
void packString8(const __FlashStringHelper* str, const size_t len);
void packString16(const __FlashStringHelper* str);
void packString16(const __FlashStringHelper* str, const size_t len);
void packString32(const __FlashStringHelper* str);
void packString32(const __FlashStringHelper* str, const size_t len);
void packBinary8(const uint8_t* value, const uint8_t size);
void packBinary16(const uint8_t* value, const uint16_t size);
void packBinary32(const uint8_t* value, const uint32_t size);
void packArraySize4(const uint8_t value);
void packArraySize16(const uint16_t value);
void packArraySize32(const uint32_t value);
void packMapSize4(const uint8_t value);
void packMapSize16(const uint16_t value);
void packMapSize32(const uint32_t value);
void packFixExt1(const int8_t type, const uint8_t value);
void packFixExt2(const int8_t type, const uint16_t value);
void packFixExt2(const int8_t type, const uint8_t* ptr);
void packFixExt2(const int8_t type, const uint16_t* ptr);
void packFixExt4(const int8_t type, const uint32_t value);
void packFixExt4(const int8_t type, const uint8_t* ptr);
void packFixExt4(const int8_t type, const uint32_t* ptr);
void packFixExt8(const int8_t type, const uint64_t value);
void packFixExt8(const int8_t type, const uint8_t* ptr);
void packFixExt8(const int8_t type, const uint64_t* ptr);
void packFixExt16(const int8_t type, const uint64_t value_h, const uint64_t value_l);
void packFixExt16(const int8_t type, const uint8_t* ptr);
void packFixExt16(const int8_t type, const uint64_t* ptr);
void packExtSize8(const int8_t type, const uint8_t size);
void packExtSize16(const int8_t type, const uint16_t size);
void packExtSize32(const int8_t type, const uint32_t size);
void packTimestamp32(const uint32_t unix_time_sec);
void packTimestamp64(const uint64_t unix_time);
void packTimestamp64(const uint64_t unix_time_sec, const uint32_t unix_time_nsec);
void packTimestamp96(const int64_t unix_time_sec, const uint32_t unix_time_nsec);"><pre><span class="pl-c"><span class="pl-c">//</span> reserve internal buffer</span>
<span class="pl-k">void</span> <span class="pl-en">reserve_buffer</span>(<span class="pl-k">const</span> <span class="pl-c1">size_t</span> size);

<span class="pl-c"><span class="pl-c">//</span> variable sized serializer for any type</span>
<span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> First, <span class="pl-k">typename</span> ...Rest&gt;
<span class="pl-k">void</span> <span class="pl-en">serialize</span>(<span class="pl-k">const</span> First&amp; first, Rest&amp;&amp;... rest);
<span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> T&gt;
<span class="pl-k">void</span> <span class="pl-en">serialize</span>(<span class="pl-k">const</span> <span class="pl-c1">arr_size_t</span>&amp; arr_size, Args&amp;&amp;... args);
<span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> ...Args&gt;
<span class="pl-k">void</span> <span class="pl-en">serialize</span>(<span class="pl-k">const</span> <span class="pl-c1">map_size_t</span>&amp; map_size, Args&amp;&amp;... args);
<span class="pl-k">template </span>&lt;<span class="pl-c1">size_t</span> N&gt;
<span class="pl-k">void</span> <span class="pl-en">serialize</span>(<span class="pl-k">const</span> StaticJsonDocument&lt;N&gt;&amp; doc, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> num_max_string_type = <span class="pl-c1">32</span>);
<span class="pl-k">void</span> <span class="pl-en">serialize</span>(<span class="pl-k">const</span> DynamicJsonDocument&amp; doc, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> num_max_string_type = <span class="pl-c1">32</span>);
<span class="pl-k">void</span> <span class="pl-en">serialize_arduinojson</span>(<span class="pl-k">const</span> JsonDocument&amp; doc, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> num_max_string_type = <span class="pl-c1">32</span>);

<span class="pl-c"><span class="pl-c">//</span> variable sized serializer to array or map for any type</span>
<span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> ...Args&gt;
<span class="pl-k">void</span> <span class="pl-en">to_array</span>(Args&amp;&amp;... args);
<span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> ...Args&gt;
<span class="pl-k">void</span> <span class="pl-en">to_map</span>(Args&amp;&amp;... args);

<span class="pl-c"><span class="pl-c">//</span> single arg packer for any type</span>
<span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> T&gt;
<span class="pl-k">void</span> pack&lt;T&gt;(<span class="pl-k">const</span> T&amp; t);
<span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> T&gt;
<span class="pl-k">void</span> pack&lt;T&gt;(<span class="pl-k">const</span> T* ptr, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> size); <span class="pl-c"><span class="pl-c">//</span> only for pointer types</span>

<span class="pl-c"><span class="pl-c">//</span> accesor and utility for serialized binary data</span>
<span class="pl-k">const</span> <span class="pl-c1">bin_t</span>&lt;<span class="pl-c1">uint8_t</span>&gt;&amp; <span class="pl-en">packet</span>() <span class="pl-k">const</span>;
<span class="pl-k">const</span> <span class="pl-c1">uint8_t</span>* <span class="pl-en">data</span>() <span class="pl-k">const</span>;
<span class="pl-c1">size_t</span> <span class="pl-en">size</span>() <span class="pl-k">const</span>;
<span class="pl-c1">size_t</span> <span class="pl-en">indices</span>() <span class="pl-k">const</span>;
<span class="pl-k">void</span> <span class="pl-en">clear</span>();

<span class="pl-c"><span class="pl-c">//</span> abstract serializer for msgpack formats</span>
<span class="pl-c"><span class="pl-c">//</span> serialize() and pack() are wrapper for these methods</span>
<span class="pl-k">void</span> <span class="pl-en">packInteger</span>(<span class="pl-k">const</span> T&amp; value); <span class="pl-c"><span class="pl-c">//</span> accept both uint and int</span>
<span class="pl-k">void</span> <span class="pl-en">packFloat</span>(<span class="pl-k">const</span> T&amp; value);
<span class="pl-k">void</span> <span class="pl-en">packString</span>(<span class="pl-k">const</span> T&amp; str);
<span class="pl-k">void</span> <span class="pl-en">packString</span>(<span class="pl-k">const</span> T&amp; str, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> len);
<span class="pl-k">void</span> <span class="pl-en">packBinary</span>(<span class="pl-k">const</span> <span class="pl-c1">uint8_t</span>* bin, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> size);
<span class="pl-k">void</span> <span class="pl-en">packArraySize</span>(<span class="pl-k">const</span> <span class="pl-c1">size_t</span> size);
<span class="pl-k">void</span> <span class="pl-en">packMapSize</span>(<span class="pl-k">const</span> <span class="pl-c1">size_t</span> size);
<span class="pl-k">void</span> <span class="pl-en">packFixExt</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> T value);
<span class="pl-k">void</span> <span class="pl-en">packFixExt</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint64_t</span> value_h, <span class="pl-k">const</span> <span class="pl-c1">uint64_t</span> value_l);
<span class="pl-k">void</span> <span class="pl-en">packFixExt</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint8_t</span>* ptr, <span class="pl-k">const</span> <span class="pl-c1">uint8_t</span> size);
<span class="pl-k">void</span> <span class="pl-en">packFixExt</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint16_t</span>* ptr, <span class="pl-k">const</span> <span class="pl-c1">uint8_t</span> size);
<span class="pl-k">void</span> <span class="pl-en">packFixExt</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint32_t</span>* ptr, <span class="pl-k">const</span> <span class="pl-c1">uint8_t</span> size);
<span class="pl-k">void</span> <span class="pl-en">packFixExt</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint64_t</span>* ptr, <span class="pl-k">const</span> <span class="pl-c1">uint8_t</span> size);
<span class="pl-k">void</span> <span class="pl-en">packExt</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> T* ptr, <span class="pl-k">const</span> U size);
<span class="pl-k">void</span> <span class="pl-en">packExt</span>(<span class="pl-k">const</span> object::ext&amp; e);
<span class="pl-k">void</span> <span class="pl-en">packTimestamp</span>(<span class="pl-k">const</span> object::<span class="pl-c1">timespec</span>&amp; time);

<span class="pl-c"><span class="pl-c">//</span> serializer for detailed msgpack format</span>
<span class="pl-c"><span class="pl-c">//</span> serialize() and pack() are wrapper for these methods</span>
<span class="pl-k">void</span> <span class="pl-en">packNil</span>();
<span class="pl-k">void</span> <span class="pl-en">packNil</span>(<span class="pl-k">const</span> object::<span class="pl-c1">nil_t</span>&amp; n);
<span class="pl-k">void</span> <span class="pl-en">packBool</span>(<span class="pl-k">const</span> <span class="pl-k">bool</span> b);
<span class="pl-k">void</span> <span class="pl-en">packUInt7</span>(<span class="pl-k">const</span> <span class="pl-c1">uint8_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packUInt8</span>(<span class="pl-k">const</span> <span class="pl-c1">uint8_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packUInt16</span>(<span class="pl-k">const</span> <span class="pl-c1">uint16_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packUInt32</span>(<span class="pl-k">const</span> <span class="pl-c1">uint32_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packUInt64</span>(<span class="pl-k">const</span> <span class="pl-c1">uint64_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packInt5</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packInt8</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packInt16</span>(<span class="pl-k">const</span> <span class="pl-c1">int16_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packInt32</span>(<span class="pl-k">const</span> <span class="pl-c1">int32_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packInt64</span>(<span class="pl-k">const</span> <span class="pl-c1">int64_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packFloat32</span>(<span class="pl-k">const</span> <span class="pl-k">float</span> value);
<span class="pl-k">void</span> <span class="pl-en">packFloat64</span>(<span class="pl-k">const</span> <span class="pl-k">double</span> value);
<span class="pl-k">void</span> <span class="pl-en">packString5</span>(<span class="pl-k">const</span> <span class="pl-c1">str_t</span>&amp; str);
<span class="pl-k">void</span> <span class="pl-en">packString5</span>(<span class="pl-k">const</span> <span class="pl-c1">str_t</span>&amp; str, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> len);
<span class="pl-k">void</span> <span class="pl-en">packString5</span>(<span class="pl-k">const</span> <span class="pl-k">char</span>* value);
<span class="pl-k">void</span> <span class="pl-en">packString5</span>(<span class="pl-k">const</span> <span class="pl-k">char</span>* value, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> len);
<span class="pl-k">void</span> <span class="pl-en">packString8</span>(<span class="pl-k">const</span> <span class="pl-c1">str_t</span>&amp; str);
<span class="pl-k">void</span> <span class="pl-en">packString8</span>(<span class="pl-k">const</span> <span class="pl-c1">str_t</span>&amp; str, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> len);
<span class="pl-k">void</span> <span class="pl-en">packString8</span>(<span class="pl-k">const</span> <span class="pl-k">char</span>* value);
<span class="pl-k">void</span> <span class="pl-en">packString8</span>(<span class="pl-k">const</span> <span class="pl-k">char</span>* value, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> len);
<span class="pl-k">void</span> <span class="pl-en">packString16</span>(<span class="pl-k">const</span> <span class="pl-c1">str_t</span>&amp; str);
<span class="pl-k">void</span> <span class="pl-en">packString16</span>(<span class="pl-k">const</span> <span class="pl-c1">str_t</span>&amp; str, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> len);
<span class="pl-k">void</span> <span class="pl-en">packString16</span>(<span class="pl-k">const</span> <span class="pl-k">char</span>* value);
<span class="pl-k">void</span> <span class="pl-en">packString16</span>(<span class="pl-k">const</span> <span class="pl-k">char</span>* value, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> len);
<span class="pl-k">void</span> <span class="pl-en">packString32</span>(<span class="pl-k">const</span> <span class="pl-c1">str_t</span>&amp; str);
<span class="pl-k">void</span> <span class="pl-en">packString32</span>(<span class="pl-k">const</span> <span class="pl-c1">str_t</span>&amp; str, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> len);
<span class="pl-k">void</span> <span class="pl-en">packString32</span>(<span class="pl-k">const</span> <span class="pl-k">char</span>* value);
<span class="pl-k">void</span> <span class="pl-en">packString32</span>(<span class="pl-k">const</span> <span class="pl-k">char</span>* value, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> len);
<span class="pl-k">void</span> <span class="pl-en">packString5</span>(<span class="pl-k">const</span> __FlashStringHelper* str);
<span class="pl-k">void</span> <span class="pl-en">packString5</span>(<span class="pl-k">const</span> __FlashStringHelper* str, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> len);
<span class="pl-k">void</span> <span class="pl-en">packString8</span>(<span class="pl-k">const</span> __FlashStringHelper* str);
<span class="pl-k">void</span> <span class="pl-en">packString8</span>(<span class="pl-k">const</span> __FlashStringHelper* str, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> len);
<span class="pl-k">void</span> <span class="pl-en">packString16</span>(<span class="pl-k">const</span> __FlashStringHelper* str);
<span class="pl-k">void</span> <span class="pl-en">packString16</span>(<span class="pl-k">const</span> __FlashStringHelper* str, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> len);
<span class="pl-k">void</span> <span class="pl-en">packString32</span>(<span class="pl-k">const</span> __FlashStringHelper* str);
<span class="pl-k">void</span> <span class="pl-en">packString32</span>(<span class="pl-k">const</span> __FlashStringHelper* str, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> len);
<span class="pl-k">void</span> <span class="pl-en">packBinary8</span>(<span class="pl-k">const</span> <span class="pl-c1">uint8_t</span>* value, <span class="pl-k">const</span> <span class="pl-c1">uint8_t</span> size);
<span class="pl-k">void</span> <span class="pl-en">packBinary16</span>(<span class="pl-k">const</span> <span class="pl-c1">uint8_t</span>* value, <span class="pl-k">const</span> <span class="pl-c1">uint16_t</span> size);
<span class="pl-k">void</span> <span class="pl-en">packBinary32</span>(<span class="pl-k">const</span> <span class="pl-c1">uint8_t</span>* value, <span class="pl-k">const</span> <span class="pl-c1">uint32_t</span> size);
<span class="pl-k">void</span> <span class="pl-en">packArraySize4</span>(<span class="pl-k">const</span> <span class="pl-c1">uint8_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packArraySize16</span>(<span class="pl-k">const</span> <span class="pl-c1">uint16_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packArraySize32</span>(<span class="pl-k">const</span> <span class="pl-c1">uint32_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packMapSize4</span>(<span class="pl-k">const</span> <span class="pl-c1">uint8_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packMapSize16</span>(<span class="pl-k">const</span> <span class="pl-c1">uint16_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packMapSize32</span>(<span class="pl-k">const</span> <span class="pl-c1">uint32_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packFixExt1</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint8_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packFixExt2</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint16_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packFixExt2</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint8_t</span>* ptr);
<span class="pl-k">void</span> <span class="pl-en">packFixExt2</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint16_t</span>* ptr);
<span class="pl-k">void</span> <span class="pl-en">packFixExt4</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint32_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packFixExt4</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint8_t</span>* ptr);
<span class="pl-k">void</span> <span class="pl-en">packFixExt4</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint32_t</span>* ptr);
<span class="pl-k">void</span> <span class="pl-en">packFixExt8</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint64_t</span> value);
<span class="pl-k">void</span> <span class="pl-en">packFixExt8</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint8_t</span>* ptr);
<span class="pl-k">void</span> <span class="pl-en">packFixExt8</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint64_t</span>* ptr);
<span class="pl-k">void</span> <span class="pl-en">packFixExt16</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint64_t</span> value_h, <span class="pl-k">const</span> <span class="pl-c1">uint64_t</span> value_l);
<span class="pl-k">void</span> <span class="pl-en">packFixExt16</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint8_t</span>* ptr);
<span class="pl-k">void</span> <span class="pl-en">packFixExt16</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint64_t</span>* ptr);
<span class="pl-k">void</span> <span class="pl-en">packExtSize8</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint8_t</span> size);
<span class="pl-k">void</span> <span class="pl-en">packExtSize16</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint16_t</span> size);
<span class="pl-k">void</span> <span class="pl-en">packExtSize32</span>(<span class="pl-k">const</span> <span class="pl-c1">int8_t</span> type, <span class="pl-k">const</span> <span class="pl-c1">uint32_t</span> size);
<span class="pl-k">void</span> <span class="pl-en">packTimestamp32</span>(<span class="pl-k">const</span> <span class="pl-c1">uint32_t</span> unix_time_sec);
<span class="pl-k">void</span> <span class="pl-en">packTimestamp64</span>(<span class="pl-k">const</span> <span class="pl-c1">uint64_t</span> unix_time);
<span class="pl-k">void</span> <span class="pl-en">packTimestamp64</span>(<span class="pl-k">const</span> <span class="pl-c1">uint64_t</span> unix_time_sec, <span class="pl-k">const</span> <span class="pl-c1">uint32_t</span> unix_time_nsec);
<span class="pl-k">void</span> <span class="pl-en">packTimestamp96</span>(<span class="pl-k">const</span> <span class="pl-c1">int64_t</span> unix_time_sec, <span class="pl-k">const</span> <span class="pl-c1">uint32_t</span> unix_time_nsec);</pre></div>
<h7 dir="auto">
<a id="user-content-msgpackunpacker" class="anchor" aria-hidden="true" href="#msgpackunpacker"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MsgPack::Unpacker</h7>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="// reserve internal buffer for indices
void reserve_indices(const size_t size);

// feed data to deserialize
bool feed(const uint8_t* data, size_t size);

// variable sized deserializer
template &lt;typename First, typename ...Rest&gt;
bool deserialize(First&amp; first, Rest&amp;&amp;... rest);
template &lt;size_t N&gt;
bool deserialize(StaticJsonDocument&lt;N&gt;&amp; doc);
bool deserialize(DynamicJsonDocument&amp; doc);

// varibale sized desrializer for array and map
template &lt;typename ...Args&gt;
bool from_array(Args&amp;&amp;... args);
template &lt;typename ...Args&gt;
bool from_map(Args&amp;&amp;... args);

// single arg deserializer
template &lt;typename T&gt;
bool unpack(T&amp; value);

// check if next arg can be deserialized to value
template &lt;typename T&gt;
bool unpackable(const T&amp; value) const;

// accesor and utility for deserialized msgpack data
bool decode_ready() const;
bool decoded() const;
size_t size() const;
void index(const size_t i);
size_t index() const;
void clear();

// abstract deserializer for msgpack formats
// deserialize() and unpack() are wrapper for these methods
T unpackUInt();
T unpackInt();
T unpackFloat();
str_t unpackString();
bin_t&lt;T&gt; unpackBinary();
bin_t&lt;T&gt; unpackBinary();
size_t unpackArraySize();
size_t unpackMapSize();
object::ext unpackExt();
object::timespec unpackTimestamp();

// deserializer for detailed msgpack format
// these methods check deserialize index overflow and type mismatch
// deserialize() and unpack() are wrapper for these methods
bool unpackNil();
bool unpackBool();
uint8_t unpackUInt7();
uint8_t unpackUInt8();
uint16_t unpackUInt16();
uint32_t unpackUInt32();
uint64_t unpackUInt64();
int8_t unpackInt5();
int8_t unpackInt8();
int16_t unpackInt16();
int32_t unpackInt32();
int64_t unpackInt64();
float unpackFloat32();
double unpackFloat64();
str_t unpackString5();
str_t unpackString8();
str_t unpackString16();
str_t unpackString32();
bin_t&lt;T&gt; unpackBinary8();
bin_t&lt;T&gt; unpackBinary16();
bin_t&lt;T&gt; unpackBinary32();
std::array&lt;T, N&gt; unpackBinary8();
std::array&lt;T, N&gt; unpackBinary16();
std::array&lt;T, N&gt; unpackBinary32();
size_t unpackArraySize4();
size_t unpackArraySize16();
size_t unpackArraySize32();
size_t unpackMapSize4();
size_t unpackMapSize16();
size_t unpackMapSize32();
object::ext unpackFixExt1();
object::ext unpackFixExt2();
object::ext unpackFixExt4();
object::ext unpackFixExt8();
object::ext unpackFixExt16();
object::ext unpackExt8();
object::ext unpackExt16();
object::ext unpackExt32();
object::timespec unpackTimestamp32();
object::timespec unpackTimestamp64();
object::timespec unpackTimestamp96();

// deserializer for detailed msgpack format
// these methods does NOT check index overflow and type mismatch
bool unpackNilUnchecked();
bool unpackBoolUnchecked();
uint8_t unpackUIntUnchecked7();
uint8_t unpackUIntUnchecked8();
uint16_t unpackUIntUnchecked16();
uint32_t unpackUIntUnchecked32();
uint64_t unpackUIntUnchecked64();
int8_t unpackIntUnchecked5();
int8_t unpackIntUnchecked8();
int16_t unpackIntUnchecked16();
int32_t unpackIntUnchecked32();
int64_t unpackIntUnchecked64();
float unpackFloatUnchecked32();
double unpackFloatUnchecked64();
str_t unpackStringUnchecked5();
str_t unpackStringUnchecked8();
str_t unpackStringUnchecked16();
str_t unpackStringUnchecked32();
bin_t&lt;T&gt; unpackBinaryUnchecked8();
bin_t&lt;T&gt; unpackBinaryUnchecked16();
bin_t&lt;T&gt; unpackBinaryUnchecked32();
std::array&lt;T, N&gt; unpackBinaryUnchecked8();
std::array&lt;T, N&gt; unpackBinaryUnchecked16();
std::array&lt;T, N&gt; unpackBinaryUnchecked32();
size_t unpackArraySizeUnchecked4();
size_t unpackArraySizeUnchecked16();
size_t unpackArraySizeUnchecked32();
size_t unpackMapSizeUnchecked4();
size_t unpackMapSizeUnchecked16();
size_t unpackMapSizeUnchecked32();
object::ext unpackFixExtUnchecked1();
object::ext unpackFixExtUnchecked2();
object::ext unpackFixExtUnchecked4();
object::ext unpackFixExtUnchecked8();
object::ext unpackFixExtUnchecked16();
object::ext unpackExtUnchecked8();
object::ext unpackExtUnchecked16();
object::ext unpackExtUnchecked32();
object::timespec unpackTimestampUnchecked32();
object::timespec unpackTimestampUnchecked64();
object::timespec unpackTimestampUnchecked96();

// checks types of next msgpack object
bool isNil() const;
bool isBool() const;
bool isUInt7() const;
bool isUInt8() const;
bool isUInt16() const;
bool isUInt32() const;
bool isUInt64() const;
bool isUInt() const;
bool isInt5() const;
bool isInt8() const;
bool isInt16() const;
bool isInt32() const;
bool isInt64() const;
bool isInt() const;
bool isFloat32() const;
bool isFloat64() const;
bool isFloat() const;
bool isStr5() const;
bool isStr8() const;
bool isStr16() const;
bool isStr32() const;
bool isStr() const;
bool isBin8() const;
bool isBin16() const;
bool isBin32() const;
bool isBin() const;
bool isArray4() const;
bool isArray16() const;
bool isArray32() const;
bool isArray() const;
bool isMap4() const;
bool isMap16() const;
bool isMap32() const;
bool isMap() const;
bool isFixExt1() const;
bool isFixExt2() const;
bool isFixExt4() const;
bool isFixExt8() const;
bool isFixExt16() const;
bool isFixExt() const;
bool isExt8() const;
bool isExt16() const;
bool isExt32() const;
bool isExt() const;
bool isTimestamp32() const;
bool isTimestamp64() const;
bool isTimestamp96() const;
bool isTimestamp() const;
MsgPack::Type getType() const"><pre><span class="pl-c"><span class="pl-c">//</span> reserve internal buffer for indices</span>
<span class="pl-k">void</span> <span class="pl-en">reserve_indices</span>(<span class="pl-k">const</span> <span class="pl-c1">size_t</span> size);

<span class="pl-c"><span class="pl-c">//</span> feed data to deserialize</span>
<span class="pl-k">bool</span> <span class="pl-en">feed</span>(<span class="pl-k">const</span> <span class="pl-c1">uint8_t</span>* data, <span class="pl-c1">size_t</span> size);

<span class="pl-c"><span class="pl-c">//</span> variable sized deserializer</span>
<span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> First, <span class="pl-k">typename</span> ...Rest&gt;
<span class="pl-k">bool</span> <span class="pl-en">deserialize</span>(First&amp; first, Rest&amp;&amp;... rest);
<span class="pl-k">template </span>&lt;<span class="pl-c1">size_t</span> N&gt;
<span class="pl-k">bool</span> <span class="pl-en">deserialize</span>(StaticJsonDocument&lt;N&gt;&amp; doc);
<span class="pl-k">bool</span> <span class="pl-en">deserialize</span>(DynamicJsonDocument&amp; doc);

<span class="pl-c"><span class="pl-c">//</span> varibale sized desrializer for array and map</span>
<span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> ...Args&gt;
<span class="pl-k">bool</span> <span class="pl-en">from_array</span>(Args&amp;&amp;... args);
<span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> ...Args&gt;
<span class="pl-k">bool</span> <span class="pl-en">from_map</span>(Args&amp;&amp;... args);

<span class="pl-c"><span class="pl-c">//</span> single arg deserializer</span>
<span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> T&gt;
<span class="pl-k">bool</span> <span class="pl-en">unpack</span>(T&amp; value);

<span class="pl-c"><span class="pl-c">//</span> check if next arg can be deserialized to value</span>
<span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> T&gt;
<span class="pl-k">bool</span> <span class="pl-en">unpackable</span>(<span class="pl-k">const</span> T&amp; value) <span class="pl-k">const</span>;

<span class="pl-c"><span class="pl-c">//</span> accesor and utility for deserialized msgpack data</span>
<span class="pl-k">bool</span> <span class="pl-en">decode_ready</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">decoded</span>() <span class="pl-k">const</span>;
<span class="pl-c1">size_t</span> <span class="pl-en">size</span>() <span class="pl-k">const</span>;
<span class="pl-k">void</span> <span class="pl-en">index</span>(<span class="pl-k">const</span> <span class="pl-c1">size_t</span> i);
<span class="pl-c1">size_t</span> <span class="pl-en">index</span>() <span class="pl-k">const</span>;
<span class="pl-k">void</span> <span class="pl-en">clear</span>();

<span class="pl-c"><span class="pl-c">//</span> abstract deserializer for msgpack formats</span>
<span class="pl-c"><span class="pl-c">//</span> deserialize() and unpack() are wrapper for these methods</span>
T <span class="pl-en">unpackUInt</span>();
T <span class="pl-en">unpackInt</span>();
T <span class="pl-en">unpackFloat</span>();
<span class="pl-c1">str_t</span> <span class="pl-en">unpackString</span>();
<span class="pl-c1">bin_t</span>&lt;T&gt; <span class="pl-en">unpackBinary</span>();
<span class="pl-c1">bin_t</span>&lt;T&gt; <span class="pl-en">unpackBinary</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackArraySize</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackMapSize</span>();
object::ext <span class="pl-en">unpackExt</span>();
object::<span class="pl-c1">timespec</span> <span class="pl-en">unpackTimestamp</span>();

<span class="pl-c"><span class="pl-c">//</span> deserializer for detailed msgpack format</span>
<span class="pl-c"><span class="pl-c">//</span> these methods check deserialize index overflow and type mismatch</span>
<span class="pl-c"><span class="pl-c">//</span> deserialize() and unpack() are wrapper for these methods</span>
<span class="pl-k">bool</span> <span class="pl-en">unpackNil</span>();
<span class="pl-k">bool</span> <span class="pl-en">unpackBool</span>();
<span class="pl-c1">uint8_t</span> <span class="pl-en">unpackUInt7</span>();
<span class="pl-c1">uint8_t</span> <span class="pl-en">unpackUInt8</span>();
<span class="pl-c1">uint16_t</span> <span class="pl-en">unpackUInt16</span>();
<span class="pl-c1">uint32_t</span> <span class="pl-en">unpackUInt32</span>();
<span class="pl-c1">uint64_t</span> <span class="pl-en">unpackUInt64</span>();
<span class="pl-c1">int8_t</span> <span class="pl-en">unpackInt5</span>();
<span class="pl-c1">int8_t</span> <span class="pl-en">unpackInt8</span>();
<span class="pl-c1">int16_t</span> <span class="pl-en">unpackInt16</span>();
<span class="pl-c1">int32_t</span> <span class="pl-en">unpackInt32</span>();
<span class="pl-c1">int64_t</span> <span class="pl-en">unpackInt64</span>();
<span class="pl-k">float</span> <span class="pl-en">unpackFloat32</span>();
<span class="pl-k">double</span> <span class="pl-en">unpackFloat64</span>();
<span class="pl-c1">str_t</span> <span class="pl-en">unpackString5</span>();
<span class="pl-c1">str_t</span> <span class="pl-en">unpackString8</span>();
<span class="pl-c1">str_t</span> <span class="pl-en">unpackString16</span>();
<span class="pl-c1">str_t</span> <span class="pl-en">unpackString32</span>();
<span class="pl-c1">bin_t</span>&lt;T&gt; <span class="pl-en">unpackBinary8</span>();
<span class="pl-c1">bin_t</span>&lt;T&gt; <span class="pl-en">unpackBinary16</span>();
<span class="pl-c1">bin_t</span>&lt;T&gt; <span class="pl-en">unpackBinary32</span>();
std::array&lt;T, N&gt; <span class="pl-en">unpackBinary8</span>();
std::array&lt;T, N&gt; <span class="pl-en">unpackBinary16</span>();
std::array&lt;T, N&gt; <span class="pl-en">unpackBinary32</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackArraySize4</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackArraySize16</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackArraySize32</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackMapSize4</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackMapSize16</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackMapSize32</span>();
object::ext <span class="pl-en">unpackFixExt1</span>();
object::ext <span class="pl-en">unpackFixExt2</span>();
object::ext <span class="pl-en">unpackFixExt4</span>();
object::ext <span class="pl-en">unpackFixExt8</span>();
object::ext <span class="pl-en">unpackFixExt16</span>();
object::ext <span class="pl-en">unpackExt8</span>();
object::ext <span class="pl-en">unpackExt16</span>();
object::ext <span class="pl-en">unpackExt32</span>();
object::<span class="pl-c1">timespec</span> <span class="pl-en">unpackTimestamp32</span>();
object::<span class="pl-c1">timespec</span> <span class="pl-en">unpackTimestamp64</span>();
object::<span class="pl-c1">timespec</span> <span class="pl-en">unpackTimestamp96</span>();

<span class="pl-c"><span class="pl-c">//</span> deserializer for detailed msgpack format</span>
<span class="pl-c"><span class="pl-c">//</span> these methods does NOT check index overflow and type mismatch</span>
<span class="pl-k">bool</span> <span class="pl-en">unpackNilUnchecked</span>();
<span class="pl-k">bool</span> <span class="pl-en">unpackBoolUnchecked</span>();
<span class="pl-c1">uint8_t</span> <span class="pl-en">unpackUIntUnchecked7</span>();
<span class="pl-c1">uint8_t</span> <span class="pl-en">unpackUIntUnchecked8</span>();
<span class="pl-c1">uint16_t</span> <span class="pl-en">unpackUIntUnchecked16</span>();
<span class="pl-c1">uint32_t</span> <span class="pl-en">unpackUIntUnchecked32</span>();
<span class="pl-c1">uint64_t</span> <span class="pl-en">unpackUIntUnchecked64</span>();
<span class="pl-c1">int8_t</span> <span class="pl-en">unpackIntUnchecked5</span>();
<span class="pl-c1">int8_t</span> <span class="pl-en">unpackIntUnchecked8</span>();
<span class="pl-c1">int16_t</span> <span class="pl-en">unpackIntUnchecked16</span>();
<span class="pl-c1">int32_t</span> <span class="pl-en">unpackIntUnchecked32</span>();
<span class="pl-c1">int64_t</span> <span class="pl-en">unpackIntUnchecked64</span>();
<span class="pl-k">float</span> <span class="pl-en">unpackFloatUnchecked32</span>();
<span class="pl-k">double</span> <span class="pl-en">unpackFloatUnchecked64</span>();
<span class="pl-c1">str_t</span> <span class="pl-en">unpackStringUnchecked5</span>();
<span class="pl-c1">str_t</span> <span class="pl-en">unpackStringUnchecked8</span>();
<span class="pl-c1">str_t</span> <span class="pl-en">unpackStringUnchecked16</span>();
<span class="pl-c1">str_t</span> <span class="pl-en">unpackStringUnchecked32</span>();
<span class="pl-c1">bin_t</span>&lt;T&gt; <span class="pl-en">unpackBinaryUnchecked8</span>();
<span class="pl-c1">bin_t</span>&lt;T&gt; <span class="pl-en">unpackBinaryUnchecked16</span>();
<span class="pl-c1">bin_t</span>&lt;T&gt; <span class="pl-en">unpackBinaryUnchecked32</span>();
std::array&lt;T, N&gt; <span class="pl-en">unpackBinaryUnchecked8</span>();
std::array&lt;T, N&gt; <span class="pl-en">unpackBinaryUnchecked16</span>();
std::array&lt;T, N&gt; <span class="pl-en">unpackBinaryUnchecked32</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackArraySizeUnchecked4</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackArraySizeUnchecked16</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackArraySizeUnchecked32</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackMapSizeUnchecked4</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackMapSizeUnchecked16</span>();
<span class="pl-c1">size_t</span> <span class="pl-en">unpackMapSizeUnchecked32</span>();
object::ext <span class="pl-en">unpackFixExtUnchecked1</span>();
object::ext <span class="pl-en">unpackFixExtUnchecked2</span>();
object::ext <span class="pl-en">unpackFixExtUnchecked4</span>();
object::ext <span class="pl-en">unpackFixExtUnchecked8</span>();
object::ext <span class="pl-en">unpackFixExtUnchecked16</span>();
object::ext <span class="pl-en">unpackExtUnchecked8</span>();
object::ext <span class="pl-en">unpackExtUnchecked16</span>();
object::ext <span class="pl-en">unpackExtUnchecked32</span>();
object::<span class="pl-c1">timespec</span> <span class="pl-en">unpackTimestampUnchecked32</span>();
object::<span class="pl-c1">timespec</span> <span class="pl-en">unpackTimestampUnchecked64</span>();
object::<span class="pl-c1">timespec</span> <span class="pl-en">unpackTimestampUnchecked96</span>();

<span class="pl-c"><span class="pl-c">//</span> checks types of next msgpack object</span>
<span class="pl-k">bool</span> <span class="pl-en">isNil</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isBool</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isUInt7</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isUInt8</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isUInt16</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isUInt32</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isUInt64</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isUInt</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isInt5</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isInt8</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isInt16</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isInt32</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isInt64</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isInt</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isFloat32</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isFloat64</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isFloat</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isStr5</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isStr8</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isStr16</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isStr32</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isStr</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isBin8</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isBin16</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isBin32</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isBin</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isArray4</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isArray16</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isArray32</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isArray</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isMap4</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isMap16</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isMap32</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isMap</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isFixExt1</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isFixExt2</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isFixExt4</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isFixExt8</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isFixExt16</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isFixExt</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isExt8</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isExt16</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isExt32</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isExt</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isTimestamp32</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isTimestamp64</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isTimestamp96</span>() <span class="pl-k">const</span>;
<span class="pl-k">bool</span> <span class="pl-en">isTimestamp</span>() <span class="pl-k">const</span>;
MsgPack::Type <span class="pl-en">getType</span>() <span class="pl-k">const</span></pre></div>
<h7 dir="auto">
<a id="user-content-msgpack-utilities" class="anchor" aria-hidden="true" href="#msgpack-utilities"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MsgPack Utilities</h7>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="template &lt;typename T&gt;
inline size_t estimate_size(const T&amp; msg);

namespace file {
    template &lt;typename FsType, typename T&gt;
    inline bool save_as_json(FsType&amp; fs, const String&amp; path, const T&amp; value, JsonDocument&amp; doc);
    template &lt;size_t N, typename FsType, typename T&gt;
    inline bool save_as_json_static(FsType&amp; fs, const String&amp; path, const T&amp; value);
    template &lt;typename FsType, typename T&gt;
    inline bool save_as_json_dynamic(FsType&amp; fs, const String&amp; path, const T&amp; value, const size_t json_size = 512);

    template &lt;typename FsType, typename T&gt;
    inline bool load_from_json(FsType&amp; fs, const String&amp; path, T&amp; value, JsonDocument&amp; doc, const size_t num_max_string_type = 32);
    template &lt;size_t N, typename FsType, typename T&gt;
    inline bool load_from_json_static(FsType&amp; fs, const String&amp; path, T&amp; value);
    template &lt;typename FsType, typename T&gt;
    inline bool load_from_json_dynamic(FsType&amp; fs, const String&amp; path, T&amp; value, const size_t json_size = 512);
}

namespace eeprom {
    template &lt;typename T&gt;
    inline bool save(const T&amp; value, const size_t index_offset = 0);
    template &lt;typename T&gt;
    inline bool load(T&amp; value, const size_t index_offset = 0);
    template &lt;typename T&gt;
    inline void clear(const T&amp; value, const size_t index_offset = 0);
    inline void clear_size(const size_t size, const size_t index_offset = 0);
}"><pre><span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> T&gt;
<span class="pl-k">inline</span> <span class="pl-c1">size_t</span> <span class="pl-en">estimate_size</span>(<span class="pl-k">const</span> T&amp; msg);

<span class="pl-k">namespace</span> <span class="pl-en">file</span> {
    <span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> FsType, <span class="pl-k">typename</span> T&gt;
    <span class="pl-k">inline</span> <span class="pl-k">bool</span> <span class="pl-en">save_as_json</span>(FsType&amp; fs, <span class="pl-k">const</span> String&amp; path, <span class="pl-k">const</span> T&amp; value, JsonDocument&amp; doc);
    <span class="pl-k">template </span>&lt;<span class="pl-c1">size_t</span> N, <span class="pl-k">typename</span> FsType, <span class="pl-k">typename</span> T&gt;
    <span class="pl-k">inline</span> <span class="pl-k">bool</span> <span class="pl-en">save_as_json_static</span>(FsType&amp; fs, <span class="pl-k">const</span> String&amp; path, <span class="pl-k">const</span> T&amp; value);
    <span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> FsType, <span class="pl-k">typename</span> T&gt;
    <span class="pl-k">inline</span> <span class="pl-k">bool</span> <span class="pl-en">save_as_json_dynamic</span>(FsType&amp; fs, <span class="pl-k">const</span> String&amp; path, <span class="pl-k">const</span> T&amp; value, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> json_size = <span class="pl-c1">512</span>);

    <span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> FsType, <span class="pl-k">typename</span> T&gt;
    <span class="pl-k">inline</span> <span class="pl-k">bool</span> <span class="pl-en">load_from_json</span>(FsType&amp; fs, <span class="pl-k">const</span> String&amp; path, T&amp; value, JsonDocument&amp; doc, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> num_max_string_type = <span class="pl-c1">32</span>);
    <span class="pl-k">template </span>&lt;<span class="pl-c1">size_t</span> N, <span class="pl-k">typename</span> FsType, <span class="pl-k">typename</span> T&gt;
    <span class="pl-k">inline</span> <span class="pl-k">bool</span> <span class="pl-en">load_from_json_static</span>(FsType&amp; fs, <span class="pl-k">const</span> String&amp; path, T&amp; value);
    <span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> FsType, <span class="pl-k">typename</span> T&gt;
    <span class="pl-k">inline</span> <span class="pl-k">bool</span> <span class="pl-en">load_from_json_dynamic</span>(FsType&amp; fs, <span class="pl-k">const</span> String&amp; path, T&amp; value, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> json_size = <span class="pl-c1">512</span>);
}

<span class="pl-k">namespace</span> <span class="pl-en">eeprom</span> {
    <span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> T&gt;
    <span class="pl-k">inline</span> <span class="pl-k">bool</span> <span class="pl-en">save</span>(<span class="pl-k">const</span> T&amp; value, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> index_offset = <span class="pl-c1">0</span>);
    <span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> T&gt;
    <span class="pl-k">inline</span> <span class="pl-k">bool</span> <span class="pl-en">load</span>(T&amp; value, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> index_offset = <span class="pl-c1">0</span>);
    <span class="pl-k">template </span>&lt;<span class="pl-k">typename</span> T&gt;
    <span class="pl-k">inline</span> <span class="pl-k">void</span> <span class="pl-en">clear</span>(<span class="pl-k">const</span> T&amp; value, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> index_offset = <span class="pl-c1">0</span>);
    <span class="pl-k">inline</span> <span class="pl-k">void</span> <span class="pl-en">clear_size</span>(<span class="pl-k">const</span> <span class="pl-c1">size_t</span> size, <span class="pl-k">const</span> <span class="pl-c1">size_t</span> index_offset = <span class="pl-c1">0</span>);
}</pre></div>
<h7 dir="auto">
<a id="user-content-msgpacktype" class="anchor" aria-hidden="true" href="#msgpacktype"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MsgPack::Type</h7>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="enum class Type : uint8_t {
    NA          = 0xC1, // never used
    NIL         = 0xC0,
    BOOL        = 0xC2,
    UINT7       = 0x00, // same as POSITIVE_FIXINT
    UINT8       = 0xCC,
    UINT16      = 0xCD,
    UINT32      = 0xCE,
    UINT64      = 0xCF,
    INT5        = 0xE0, // same as NEGATIVE_FIXINT
    INT8        = 0xD0,
    INT16       = 0xD1,
    INT32       = 0xD2,
    INT64       = 0xD3,
    FLOAT32     = 0xCA,
    FLOAT64     = 0xCB,
    STR5        = 0xA0, // same as FIXSTR
    STR8        = 0xD9,
    STR16       = 0xDA,
    STR32       = 0xDB,
    BIN8        = 0xC4,
    BIN16       = 0xC5,
    BIN32       = 0xC6,
    ARRAY4      = 0x90, // same as FIXARRAY
    ARRAY16     = 0xDC,
    ARRAY32     = 0xDD,
    MAP4        = 0x80, // same as FIXMAP
    MAP16       = 0xDE,
    MAP32       = 0xDF,
    FIXEXT1     = 0xD4,
    FIXEXT2     = 0xD5,
    FIXEXT4     = 0xD6,
    FIXEXT8     = 0xD7,
    FIXEXT16    = 0xD8,
    EXT8        = 0xC7,
    EXT16       = 0xC8,
    EXT32       = 0xC9,
    TIMESTAMP32 = 0xD6,
    TIMESTAMP64 = 0xD7,
    TIMESTAMP96 = 0xC7,

    POSITIVE_FIXINT = 0x00,
    NEGATIVE_FIXINT = 0xE0,
    FIXSTR          = 0xA0,
    FIXARRAY        = 0x90,
    FIXMAP          = 0x80,
};"><pre><span class="pl-k">enum</span> <span class="pl-k">class</span> <span class="pl-en">Type</span> : <span class="pl-c1">uint8_t</span> {
    NA          = <span class="pl-c1">0xC1</span>, <span class="pl-c"><span class="pl-c">//</span> never used</span>
    NIL         = <span class="pl-c1">0xC0</span>,
    BOOL        = <span class="pl-c1">0xC2</span>,
    UINT7       = <span class="pl-c1">0x00</span>, <span class="pl-c"><span class="pl-c">//</span> same as POSITIVE_FIXINT</span>
    UINT8       = <span class="pl-c1">0xCC</span>,
    UINT16      = <span class="pl-c1">0xCD</span>,
    UINT32      = <span class="pl-c1">0xCE</span>,
    UINT64      = <span class="pl-c1">0xCF</span>,
    INT5        = <span class="pl-c1">0xE0</span>, <span class="pl-c"><span class="pl-c">//</span> same as NEGATIVE_FIXINT</span>
    INT8        = <span class="pl-c1">0xD0</span>,
    INT16       = <span class="pl-c1">0xD1</span>,
    INT32       = <span class="pl-c1">0xD2</span>,
    INT64       = <span class="pl-c1">0xD3</span>,
    FLOAT32     = <span class="pl-c1">0xCA</span>,
    FLOAT64     = <span class="pl-c1">0xCB</span>,
    STR5        = <span class="pl-c1">0xA0</span>, <span class="pl-c"><span class="pl-c">//</span> same as FIXSTR</span>
    STR8        = <span class="pl-c1">0xD9</span>,
    STR16       = <span class="pl-c1">0xDA</span>,
    STR32       = <span class="pl-c1">0xDB</span>,
    BIN8        = <span class="pl-c1">0xC4</span>,
    BIN16       = <span class="pl-c1">0xC5</span>,
    BIN32       = <span class="pl-c1">0xC6</span>,
    ARRAY4      = <span class="pl-c1">0x90</span>, <span class="pl-c"><span class="pl-c">//</span> same as FIXARRAY</span>
    ARRAY16     = <span class="pl-c1">0xDC</span>,
    ARRAY32     = <span class="pl-c1">0xDD</span>,
    MAP4        = <span class="pl-c1">0x80</span>, <span class="pl-c"><span class="pl-c">//</span> same as FIXMAP</span>
    MAP16       = <span class="pl-c1">0xDE</span>,
    MAP32       = <span class="pl-c1">0xDF</span>,
    FIXEXT1     = <span class="pl-c1">0xD4</span>,
    FIXEXT2     = <span class="pl-c1">0xD5</span>,
    FIXEXT4     = <span class="pl-c1">0xD6</span>,
    FIXEXT8     = <span class="pl-c1">0xD7</span>,
    FIXEXT16    = <span class="pl-c1">0xD8</span>,
    EXT8        = <span class="pl-c1">0xC7</span>,
    EXT16       = <span class="pl-c1">0xC8</span>,
    EXT32       = <span class="pl-c1">0xC9</span>,
    TIMESTAMP32 = <span class="pl-c1">0xD6</span>,
    TIMESTAMP64 = <span class="pl-c1">0xD7</span>,
    TIMESTAMP96 = <span class="pl-c1">0xC7</span>,

    POSITIVE_FIXINT = <span class="pl-c1">0x00</span>,
    NEGATIVE_FIXINT = <span class="pl-c1">0xE0</span>,
    FIXSTR          = <span class="pl-c1">0xA0</span>,
    FIXARRAY        = <span class="pl-c1">0x90</span>,
    FIXMAP          = <span class="pl-c1">0x80</span>,
};</pre></div>
<h6 dir="auto">
<a id="user-content-reference" class="anchor" aria-hidden="true" href="#reference"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Reference</h6>
<ul dir="auto">
<li><a href="https://github.com/msgpack/msgpack/blob/master/spec.md">MessagePack Specification</a></li>
<li><a href="https://github.com/msgpack/msgpack-c/wiki/v2_0_cpp_adaptor">msgpack adaptor</a></li>
<li><a href="https://github.com/msgpack/msgpack-c/wiki/v2_0_cpp_object">msgpack object</a></li>
<li><a href="https://github.com/msgpack/msgpack-c/wiki">msgpack-c wiki</a></li>
</ul>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<p dir="auto">MIT</p>
</article>
  </div>
        </div>
        
        <div id="qs-HEADS-project-arduino_msgpack" class="qs"><h4><a href="https://github.com/HEADS-project/arduino_msgpack" target="_blank">HEADS-project/arduino_msgpack <span class="qs-url">https://github.com/HEADS-project/arduino_msgpack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-arduino_msgpack" class="anchor" aria-hidden="true" href="#arduino_msgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>arduino_msgpack</h5>
<p dir="auto">This Arduino library provides a light weight serializer and parser for messagepack.</p>
<h6 dir="auto">
<a id="user-content-install" class="anchor" aria-hidden="true" href="#install"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install</h6>
<p dir="auto">Download the zip, and import it with your Arduino IDE: <em>Sketch&gt;Include Library&gt;Add .zip library</em></p>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<p dir="auto">See the either the <code>.h</code> file, or the examples (<code>led_controller</code> and <code>test_uno_writer</code>).</p>
<p dir="auto">In short:</p>
<ul dir="auto">
<li>functions like <code>msgpck_what_next(Stream * s);</code> watch the next type of data without reading it (without advancing the buffer of Stream <code>s</code>).</li>
<li>functions like <code>msgpck_read_bool(Stream * s, bool *b)</code> read a value from Stream <code>s</code>.</li>
<li>functions like <code>msgpck_write_bool(Stream * s, bool b)</code> write a value on Stream <code>s</code>.</li>
</ul>
<p dir="auto">Notes:</p>
<ul dir="auto">
<li>Stream are used as much as possible in order not to add to much overhead with buffers. Therefore you should be able to store the minimum number of value at a given time.</li>
<li>Map and Array related functions concern only their headers. Ex: If you want to write an array containing two elements you should write the array header, then write the two elements.</li>
</ul>
<h6 dir="auto">
<a id="user-content-limitations" class="anchor" aria-hidden="true" href="#limitations"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Limitations</h6>
<p dir="auto">Currently the library does <strong>not</strong> support:</p>
<ul dir="auto">
<li>8 bytes float (Only 4 bytes floats are supported by default on every Arduino and floats are anyway not recommended on Arduino)</li>
<li>2^32 char long (or longer) strings</li>
<li>2^32 byte long (or longer) bins</li>
<li>extention types.</li>
</ul>
</article>
  </div>
        </div>
        
        <div id="qs-camgunz-cmp" class="qs"><h4><a href="https://github.com/camgunz/cmp" target="_blank">camgunz/cmp <span class="qs-url">https://github.com/camgunz/cmp</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-cmp" class="anchor" aria-hidden="true" href="#cmp"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>CMP</h5>
<p dir="auto"><a href="https://travis-ci.org/camgunz/cmp" rel="nofollow"><img src="https://camo.githubusercontent.com/465d8533b73a5e982f26d2aa13f67ff2d336156209ffdf7811970bdcbade7cb9/68747470733a2f2f7472617669732d63692e6f72672f63616d67756e7a2f636d702e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/camgunz/cmp.svg?branch=master" style="max-width: 100%;"></a> <a href="https://coveralls.io/github/camgunz/cmp?branch=develop" rel="nofollow"><img src="https://camo.githubusercontent.com/f20bd22a78b2ced18c4325d686e75c1eff942defe46751faf16e9c2ada8519d1/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6769746875622f63616d67756e7a2f636d702f62616467652e7376673f6272616e63683d646576656c6f70" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/github/camgunz/cmp/badge.svg?branch=develop" style="max-width: 100%;"></a></p>
<p dir="auto">CMP is a C implementation of the MessagePack serialization format.  It
currently implements version 5 of the <a href="http://github.com/msgpack/msgpack/blob/master/spec.md">MessagePack
Spec</a>.</p>
<p dir="auto">CMP's goal is to be lightweight and straightforward, forcing nothing on the
programmer.</p>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<p dir="auto">While I'm a big believer in the GPL, I license CMP under the MIT license.</p>
<h6 dir="auto">
<a id="user-content-example-usage" class="anchor" aria-hidden="true" href="#example-usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example Usage</h6>
<p dir="auto">The following examples use a file as the backend, and are modeled after the
examples included with the msgpack-c project.</p>
<div class="highlight highlight-source-c notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

#include &quot;cmp.h&quot;

static bool read_bytes(void *data, size_t sz, FILE *fh) {
    return fread(data, sizeof(uint8_t), sz, fh) == (sz * sizeof(uint8_t));
}

static bool file_reader(cmp_ctx_t *ctx, void *data, size_t limit) {
    return read_bytes(data, limit, (FILE *)ctx-&gt;buf);
}

static bool file_skipper(cmp_ctx_t *ctx, size_t count) {
    return fseek((FILE *)ctx-&gt;buf, count, SEEK_CUR);
}

static size_t file_writer(cmp_ctx_t *ctx, const void *data, size_t count) {
    return fwrite(data, sizeof(uint8_t), count, (FILE *)ctx-&gt;buf);
}

static void error_and_exit(const char *msg) {
    fprintf(stderr, &quot;%s\n\n&quot;, msg);
    exit(EXIT_FAILURE);
}

int main(void) {
    FILE *fh = NULL;
    cmp_ctx_t cmp = {0};
    uint32_t array_size = 0;
    uint32_t str_size = 0;
    char hello[6] = {0};
    char message_pack[12] = {0};

    fh = fopen(&quot;cmp_data.dat&quot;, &quot;w+b&quot;);

    if (fh == NULL) {
        error_and_exit(&quot;Error opening data.dat&quot;);
    }

    cmp_init(&amp;cmp, fh, file_reader, file_skipper, file_writer);

    if (!cmp_write_array(&amp;cmp, 2)) {
        error_and_exit(cmp_strerror(&amp;cmp));
    }

    if (!cmp_write_str(&amp;cmp, &quot;Hello&quot;, 5)) {
        error_and_exit(cmp_strerror(&amp;cmp));
    }

    if (!cmp_write_str(&amp;cmp, &quot;MessagePack&quot;, 11)) {
        error_and_exit(cmp_strerror(&amp;cmp));
    }

    rewind(fh);

    if (!cmp_read_array(&amp;cmp, &amp;array_size)) {
        error_and_exit(cmp_strerror(&amp;cmp));
    }

    /* You can read the str byte size and then read str bytes... */

    if (!cmp_read_str_size(&amp;cmp, &amp;str_size)) {
        error_and_exit(cmp_strerror(&amp;cmp));
    }

    if (str_size &gt; (sizeof(hello) - 1)) {
        error_and_exit(&quot;Packed 'hello' length too long\n&quot;);
    }

    if (!read_bytes(hello, str_size, fh)) {
        error_and_exit(cmp_strerror(&amp;cmp));
    }

    /*
     * ...or you can set the maximum number of bytes to read and do it all in
     * one call
     */

    str_size = sizeof(message_pack);
    if (!cmp_read_str(&amp;cmp, message_pack, &amp;str_size)) {
        error_and_exit(cmp_strerror(&amp;cmp));
    }

    printf(&quot;Array Length: %u.\n&quot;, array_size);
    printf(&quot;[\&quot;%s\&quot;, \&quot;%s\&quot;]\n&quot;, hello, message_pack);

    fclose(fh);

    return EXIT_SUCCESS;
}"><pre>#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>stdio.h<span class="pl-pds">&gt;</span></span>
#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>stdlib.h<span class="pl-pds">&gt;</span></span>

#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">"</span>cmp.h<span class="pl-pds">"</span></span>

<span class="pl-k">static</span> <span class="pl-k">bool</span> <span class="pl-en">read_bytes</span>(<span class="pl-k">void</span> *data, <span class="pl-c1">size_t</span> sz, FILE *fh) {
    <span class="pl-k">return</span> <span class="pl-c1">fread</span>(data, <span class="pl-k">sizeof</span>(<span class="pl-c1">uint8_t</span>), sz, fh) == (sz * <span class="pl-k">sizeof</span>(<span class="pl-c1">uint8_t</span>));
}

<span class="pl-k">static</span> <span class="pl-k">bool</span> <span class="pl-en">file_reader</span>(<span class="pl-c1">cmp_ctx_t</span> *ctx, <span class="pl-k">void</span> *data, <span class="pl-c1">size_t</span> limit) {
    <span class="pl-k">return</span> <span class="pl-c1">read_bytes</span>(data, limit, (FILE *)ctx-&gt;<span class="pl-smi">buf</span>);
}

<span class="pl-k">static</span> <span class="pl-k">bool</span> <span class="pl-en">file_skipper</span>(<span class="pl-c1">cmp_ctx_t</span> *ctx, <span class="pl-c1">size_t</span> count) {
    <span class="pl-k">return</span> <span class="pl-c1">fseek</span>((FILE *)ctx-&gt;<span class="pl-smi">buf</span>, count, SEEK_CUR);
}

<span class="pl-k">static</span> <span class="pl-c1">size_t</span> <span class="pl-en">file_writer</span>(<span class="pl-c1">cmp_ctx_t</span> *ctx, <span class="pl-k">const</span> <span class="pl-k">void</span> *data, <span class="pl-c1">size_t</span> count) {
    <span class="pl-k">return</span> <span class="pl-c1">fwrite</span>(data, <span class="pl-k">sizeof</span>(<span class="pl-c1">uint8_t</span>), count, (FILE *)ctx-&gt;<span class="pl-smi">buf</span>);
}

<span class="pl-k">static</span> <span class="pl-k">void</span> <span class="pl-en">error_and_exit</span>(<span class="pl-k">const</span> <span class="pl-k">char</span> *msg) {
    <span class="pl-c1">fprintf</span>(stderr, <span class="pl-s"><span class="pl-pds">"</span><span class="pl-c1">%s</span><span class="pl-cce">\n\n</span><span class="pl-pds">"</span></span>, msg);
    <span class="pl-c1">exit</span>(EXIT_FAILURE);
}

<span class="pl-k">int</span> <span class="pl-en">main</span>(<span class="pl-k">void</span>) {
    FILE *fh = <span class="pl-c1">NULL</span>;
    <span class="pl-c1">cmp_ctx_t</span> cmp = {<span class="pl-c1">0</span>};
    <span class="pl-c1">uint32_t</span> array_size = <span class="pl-c1">0</span>;
    <span class="pl-c1">uint32_t</span> str_size = <span class="pl-c1">0</span>;
    <span class="pl-k">char</span> hello[<span class="pl-c1">6</span>] = {<span class="pl-c1">0</span>};
    <span class="pl-k">char</span> message_pack[<span class="pl-c1">12</span>] = {<span class="pl-c1">0</span>};

    fh = <span class="pl-c1">fopen</span>(<span class="pl-s"><span class="pl-pds">"</span>cmp_data.dat<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>w+b<span class="pl-pds">"</span></span>);

    <span class="pl-k">if</span> (fh == <span class="pl-c1">NULL</span>) {
        <span class="pl-c1">error_and_exit</span>(<span class="pl-s"><span class="pl-pds">"</span>Error opening data.dat<span class="pl-pds">"</span></span>);
    }

    <span class="pl-c1">cmp_init</span>(&amp;cmp, fh, file_reader, file_skipper, file_writer);

    <span class="pl-k">if</span> (!<span class="pl-c1">cmp_write_array</span>(&amp;cmp, <span class="pl-c1">2</span>)) {
        <span class="pl-c1">error_and_exit</span>(<span class="pl-c1">cmp_strerror</span>(&amp;cmp));
    }

    <span class="pl-k">if</span> (!<span class="pl-c1">cmp_write_str</span>(&amp;cmp, <span class="pl-s"><span class="pl-pds">"</span>Hello<span class="pl-pds">"</span></span>, <span class="pl-c1">5</span>)) {
        <span class="pl-c1">error_and_exit</span>(<span class="pl-c1">cmp_strerror</span>(&amp;cmp));
    }

    <span class="pl-k">if</span> (!<span class="pl-c1">cmp_write_str</span>(&amp;cmp, <span class="pl-s"><span class="pl-pds">"</span>MessagePack<span class="pl-pds">"</span></span>, <span class="pl-c1">11</span>)) {
        <span class="pl-c1">error_and_exit</span>(<span class="pl-c1">cmp_strerror</span>(&amp;cmp));
    }

    <span class="pl-c1">rewind</span>(fh);

    <span class="pl-k">if</span> (!<span class="pl-c1">cmp_read_array</span>(&amp;cmp, &amp;array_size)) {
        <span class="pl-c1">error_and_exit</span>(<span class="pl-c1">cmp_strerror</span>(&amp;cmp));
    }

    <span class="pl-c"><span class="pl-c">/*</span> You can read the str byte size and then read str bytes... <span class="pl-c">*/</span></span>

    <span class="pl-k">if</span> (!<span class="pl-c1">cmp_read_str_size</span>(&amp;cmp, &amp;str_size)) {
        <span class="pl-c1">error_and_exit</span>(<span class="pl-c1">cmp_strerror</span>(&amp;cmp));
    }

    <span class="pl-k">if</span> (str_size &gt; (<span class="pl-k">sizeof</span>(hello) - <span class="pl-c1">1</span>)) {
        <span class="pl-c1">error_and_exit</span>(<span class="pl-s"><span class="pl-pds">"</span>Packed 'hello' length too long<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>);
    }

    <span class="pl-k">if</span> (!<span class="pl-c1">read_bytes</span>(hello, str_size, fh)) {
        <span class="pl-c1">error_and_exit</span>(<span class="pl-c1">cmp_strerror</span>(&amp;cmp));
    }

    <span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">     * ...or you can set the maximum number of bytes to read and do it all in</span>
<span class="pl-c">     * one call</span>
<span class="pl-c">     <span class="pl-c">*/</span></span>

    str_size = <span class="pl-k">sizeof</span>(message_pack);
    <span class="pl-k">if</span> (!<span class="pl-c1">cmp_read_str</span>(&amp;cmp, message_pack, &amp;str_size)) {
        <span class="pl-c1">error_and_exit</span>(<span class="pl-c1">cmp_strerror</span>(&amp;cmp));
    }

    <span class="pl-c1">printf</span>(<span class="pl-s"><span class="pl-pds">"</span>Array Length: <span class="pl-c1">%u</span>.<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>, array_size);
    <span class="pl-c1">printf</span>(<span class="pl-s"><span class="pl-pds">"</span>[<span class="pl-cce">\"</span><span class="pl-c1">%s</span><span class="pl-cce">\"</span>, <span class="pl-cce">\"</span><span class="pl-c1">%s</span><span class="pl-cce">\"</span>]<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>, hello, message_pack);

    <span class="pl-c1">fclose</span>(fh);

    <span class="pl-k">return</span> EXIT_SUCCESS;
}</pre></div>
<h6 dir="auto">
<a id="user-content-advanced-usage" class="anchor" aria-hidden="true" href="#advanced-usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Advanced Usage</h6>
<p dir="auto">See the <code>examples</code> folder.</p>
<h6 dir="auto">
<a id="user-content-fast-lightweight-flexible-and-robust" class="anchor" aria-hidden="true" href="#fast-lightweight-flexible-and-robust"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Fast, Lightweight, Flexible, and Robust</h6>
<p dir="auto">CMP uses no internal buffers; conversions, encoding and decoding are done on
the fly.</p>
<p dir="auto">CMP's source and header file together are ~4k LOC.</p>
<p dir="auto">CMP makes no heap allocations.</p>
<p dir="auto">CMP uses standardized types rather than declaring its own, and it depends only
on <code>stdbool.h</code>, <code>stdint.h</code> and <code>string.h</code>.</p>
<p dir="auto">CMP is written using C89 (ANSI C), aside, of course, from its use of
fixed-width integer types and <code>bool</code>.</p>
<p dir="auto">On the other hand, CMP's test suite requires C99.</p>
<p dir="auto">CMP only requires the programmer supply a read function, a write function, and
an optional skip function.  In this way, the programmer can use CMP on memory,
files, sockets, etc.</p>
<p dir="auto">CMP is portable.  It uses fixed-width integer types, and checks the endianness
of the machine at runtime before swapping bytes (MessagePack is big-endian).</p>
<p dir="auto">CMP provides a fairly comprehensive error reporting mechanism modeled after
<code>errno</code> and <code>strerror</code>.</p>
<p dir="auto">CMP is thread aware; while contexts cannot be shared between threads, each
thread may use its own context freely.</p>
<p dir="auto">CMP is tested using the MessagePack test suite as well as a large set of custom
test cases.  Its small test program is compiled with clang using <code>-Wall -Werror -Wextra ...</code> along with several other flags, and generates no compilation
errors in either clang or GCC.</p>
<p dir="auto">CMP's source is written as readably as possible, using explicit, descriptive
variable names and a consistent, clear style.</p>
<p dir="auto">CMP's source is written to be as secure as possible.  Its testing suite checks
for invalid values, and data is always treated as suspect before it passes
validation.</p>
<p dir="auto">CMP's API is designed to be clear, convenient and unsurprising.  Strings are
null-terminated, binary data is not, error codes are clear, and so on.</p>
<p dir="auto">CMP provides optional backwards compatibility for use with other MessagePack
implementations that only implement version 4 of the spec.</p>
<h6 dir="auto">
<a id="user-content-building" class="anchor" aria-hidden="true" href="#building"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Building</h6>
<p dir="auto">There is no build system for CMP.  The programmer can drop <code>cmp.c</code> and <code>cmp.h</code>
in their source tree and modify as necessary.  No special compiler settings are
required to build it, and it generates no compilation errors in either clang or
gcc.</p>
<h6 dir="auto">
<a id="user-content-versioning" class="anchor" aria-hidden="true" href="#versioning"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Versioning</h6>
<p dir="auto">CMP's versions are single integers.  I don't use semantic versioning because
I don't guarantee that any version is completely compatible with any other.  In
general, semantic versioning provides a false sense of security.  You should be
evaluating compatibility yourself, not relying on some stranger's versioning
convention.</p>
<h6 dir="auto">
<a id="user-content-stability" class="anchor" aria-hidden="true" href="#stability"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Stability</h6>
<p dir="auto">I only guarantee stability for versions released on
<a href="/camgunz/cmp/releases">the releases page</a>.  While rare, both <code>master</code> and <code>develop</code>
branches may have errors or mismatched versions.</p>
<h6 dir="auto">
<a id="user-content-backwards-compatibility" class="anchor" aria-hidden="true" href="#backwards-compatibility"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Backwards Compatibility</h6>
<p dir="auto">Version 4 of the MessagePack spec has no <code>BIN</code> type, and provides no <code>STR8</code>
marker.  In order to remain backwards compatible with version 4 of MessagePack,
do the following:</p>
<p dir="auto">Avoid these functions:</p>
<ul dir="auto">
<li><code>cmp_write_bin</code></li>
<li><code>cmp_write_bin_marker</code></li>
<li><code>cmp_write_str8_marker</code></li>
<li><code>cmp_write_str8</code></li>
<li><code>cmp_write_bin8_marker</code></li>
<li><code>cmp_write_bin8</code></li>
<li><code>cmp_write_bin16_marker</code></li>
<li><code>cmp_write_bin16</code></li>
<li><code>cmp_write_bin32_marker</code></li>
<li><code>cmp_write_bin32</code></li>
</ul>
<p dir="auto">Use these functions in lieu of their v5 counterparts:</p>
<ul dir="auto">
<li>
<code>cmp_write_str_marker_v4</code> instead of <code>cmp_write_str_marker</code>
</li>
<li>
<code>cmp_write_str_v4</code> instead of <code>cmp_write_str</code>
</li>
<li>
<code>cmp_write_object_v4</code> instead of <code>cmp_write_object</code>
</li>
</ul>
<h6 dir="auto">
<a id="user-content-disabling-floating-point-operations" class="anchor" aria-hidden="true" href="#disabling-floating-point-operations"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Disabling Floating Point Operations</h6>
<p dir="auto">Thanks to <a href="https://github.com/tdragon">tdragon</a> it's possible to disable
floating point operations in CMP by defining <code>CMP_NO_FLOAT</code>. No floating point
functionality will be included.  Fair warning: this changes the ABI.</p>
<h6 dir="auto">
<a id="user-content-setting-endianness-at-compile-time" class="anchor" aria-hidden="true" href="#setting-endianness-at-compile-time"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Setting Endianness at Compile Time</h6>
<p dir="auto">CMP will honor <code>WORDS_BIGENDIAN</code>. If defined to <code>0</code> it will convert data
to/from little-endian format when writing/reading. If defined to <code>1</code> it won't.
If not defined, CMP will check at runtime.</p>
</article>
  </div>
        </div>
        
        <div id="qs-ludocode-mpack" class="qs"><h4><a href="https://github.com/ludocode/mpack" target="_blank">ludocode/mpack <span class="qs-url">https://github.com/ludocode/mpack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h6 dir="auto">
<a id="user-content-introduction" class="anchor" aria-hidden="true" href="#introduction"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Introduction</h6>
<p dir="auto">MPack is a C implementation of an encoder and decoder for the <a href="http://msgpack.org/" rel="nofollow">MessagePack</a> serialization format. It is:</p>
<ul dir="auto">
<li>Simple and easy to use</li>
<li>Secure against untrusted data</li>
<li>Lightweight, suitable for embedded</li>
<li><a href="http://ludocode.github.io/mpack/" rel="nofollow">Extensively documented</a></li>
<li><a href="https://github.com/ludocode/schemaless-benchmarks#speed---desktop-pc">Extremely fast</a></li>
</ul>
<p dir="auto">The core of MPack contains a buffered reader and writer, and a tree-style parser that decodes into a tree of dynamically typed nodes. Helper functions can be enabled to read values of expected type, to work with files, to grow buffers or allocate strings automatically, to check UTF-8 encoding, and more.</p>
<p dir="auto">The MPack code is small enough to be embedded directly into your codebase. Simply download the <a href="https://github.com/ludocode/mpack/releases">amalgamation package</a> and add <code>mpack.h</code> and <code>mpack.c</code> to your project.</p>
<p dir="auto">MPack supports all modern compilers, all desktop and smartphone OSes, WebAssembly, <a href="https://github.com/ludocode/mpack-linux-kernel">inside the Linux kernel</a>, and even 8-bit microcontrollers such as Arduino. The MPack featureset can be customized at compile-time to set which features, components and debug checks are compiled, and what dependencies are available.</p>
<h6 dir="auto">
<a id="user-content-build-status" class="anchor" aria-hidden="true" href="#build-status"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Build Status</h6>
<p dir="auto"><a href="https://github.com/ludocode/mpack/actions?query=workflow%3A%22Unit+Tests%22"><img src="https://github.com/ludocode/mpack/workflows/Unit%20Tests/badge.svg" alt="Unit Tests" style="max-width: 100%;"></a>
<a href="https://coveralls.io/github/ludocode/mpack?branch=develop" rel="nofollow"><img src="https://camo.githubusercontent.com/4a1c0a1b51e4bd997d9c4292acb068998af56c321a2ef3e1f3cd74fad9d56ded/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6c75646f636f64652f6d7061636b2f62616467652e7376673f6272616e63683d646576656c6f7026736572766963653d676974687562" alt="Coverage" data-canonical-src="https://coveralls.io/repos/ludocode/mpack/badge.svg?branch=develop&amp;service=github" style="max-width: 100%;"></a></p>
<h6 dir="auto">
<a id="user-content-the-node-api" class="anchor" aria-hidden="true" href="#the-node-api"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>The Node API</h6>
<p dir="auto">The Node API parses a chunk of MessagePack data into an immutable tree of dynamically-typed nodes. A series of helper functions can be used to extract data of specific types from each node.</p>
<div class="highlight highlight-source-c notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='// parse a file into a node tree
mpack_tree_t tree;
mpack_tree_init_filename(&amp;tree, "homepage-example.mp", 0);
mpack_tree_parse(&amp;tree);
mpack_node_t root = mpack_tree_root(&amp;tree);

// extract the example data on the msgpack homepage
bool compact = mpack_node_bool(mpack_node_map_cstr(root, "compact"));
int schema = mpack_node_i32(mpack_node_map_cstr(root, "schema"));

// clean up and check for errors
if (mpack_tree_destroy(&amp;tree) != mpack_ok) {
    fprintf(stderr, "An error occurred decoding the data!\n");
    return;
}'><pre><span class="pl-c"><span class="pl-c">//</span> parse a file into a node tree</span>
<span class="pl-c1">mpack_tree_t</span> tree;
<span class="pl-en">mpack_tree_init_filename</span>(&amp;tree, <span class="pl-s"><span class="pl-pds">"</span>homepage-example.mp<span class="pl-pds">"</span></span>, <span class="pl-c1">0</span>);
<span class="pl-en">mpack_tree_parse</span>(&amp;tree);
<span class="pl-c1">mpack_node_t</span> root = mpack_tree_root(&amp;tree);

<span class="pl-c"><span class="pl-c">//</span> extract the example data on the msgpack homepage</span>
<span class="pl-k">bool</span> compact = mpack_node_bool(mpack_node_map_cstr(root, <span class="pl-s"><span class="pl-pds">"</span>compact<span class="pl-pds">"</span></span>));
<span class="pl-k">int</span> schema = mpack_node_i32(mpack_node_map_cstr(root, <span class="pl-s"><span class="pl-pds">"</span>schema<span class="pl-pds">"</span></span>));

<span class="pl-c"><span class="pl-c">//</span> clean up and check for errors</span>
<span class="pl-k">if</span> (mpack_tree_destroy(&amp;tree) != mpack_ok) {
    <span class="pl-c1">fprintf</span>(stderr, <span class="pl-s"><span class="pl-pds">"</span>An error occurred decoding the data!<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>);
    <span class="pl-k">return</span>;
}</pre></div>
<p dir="auto">Note that no additional error handling is needed in the above code. If the file is missing or corrupt, if map keys are missing or if nodes are not in the expected types, special "nil" nodes and false/zero values are returned and the tree is placed in an error state. An error check is only needed before using the data.</p>
<p dir="auto">The above example allocates nodes automatically. A fixed node pool can be provided to the parser instead in memory-constrained environments. For maximum performance and minimal memory usage, the <a href="/ludocode/mpack/blob/develop/docs/expect.md">Expect API</a> can be used to parse data of a predefined schema.</p>
<h6 dir="auto">
<a id="user-content-the-write-api" class="anchor" aria-hidden="true" href="#the-write-api"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>The Write API</h6>
<p dir="auto">The Write API encodes structured data to MessagePack.</p>
<div class="highlight highlight-source-c notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='// encode to memory buffer
char* data;
size_t size;
mpack_writer_t writer;
mpack_writer_init_growable(&amp;writer, &amp;data, &amp;size);

// write the example on the msgpack homepage
mpack_build_map(&amp;writer);
mpack_write_cstr(&amp;writer, "compact");
mpack_write_bool(&amp;writer, true);
mpack_write_cstr(&amp;writer, "schema");
mpack_write_uint(&amp;writer, 0);
mpack_complete_map(&amp;writer);

// finish writing
if (mpack_writer_destroy(&amp;writer) != mpack_ok) {
    fprintf(stderr, "An error occurred encoding the data!\n");
    return;
}

// use the data
do_something_with_data(data, size);
free(data);'><pre><span class="pl-c"><span class="pl-c">//</span> encode to memory buffer</span>
<span class="pl-k">char</span>* data;
<span class="pl-c1">size_t</span> size;
<span class="pl-c1">mpack_writer_t</span> writer;
<span class="pl-en">mpack_writer_init_growable</span>(&amp;writer, &amp;data, &amp;size);

<span class="pl-c"><span class="pl-c">//</span> write the example on the msgpack homepage</span>
<span class="pl-en">mpack_build_map</span>(&amp;writer);
<span class="pl-en">mpack_write_cstr</span>(&amp;writer, <span class="pl-s"><span class="pl-pds">"</span>compact<span class="pl-pds">"</span></span>);
<span class="pl-en">mpack_write_bool</span>(&amp;writer, <span class="pl-c1">true</span>);
<span class="pl-en">mpack_write_cstr</span>(&amp;writer, <span class="pl-s"><span class="pl-pds">"</span>schema<span class="pl-pds">"</span></span>);
<span class="pl-en">mpack_write_uint</span>(&amp;writer, <span class="pl-c1">0</span>);
<span class="pl-en">mpack_complete_map</span>(&amp;writer);

<span class="pl-c"><span class="pl-c">//</span> finish writing</span>
<span class="pl-k">if</span> (mpack_writer_destroy(&amp;writer) != mpack_ok) {
    <span class="pl-c1">fprintf</span>(stderr, <span class="pl-s"><span class="pl-pds">"</span>An error occurred encoding the data!<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>);
    <span class="pl-k">return</span>;
}

<span class="pl-c"><span class="pl-c">//</span> use the data</span>
<span class="pl-en">do_something_with_data</span>(data, size);
<span class="pl-en">free</span>(data);</pre></div>
<p dir="auto">In the above example, we encode to a growable memory buffer. The writer can instead write to a pre-allocated or stack-allocated buffer (with up-front sizes for compound types), avoiding the need for memory allocation. The writer can also be provided with a flush function (such as a file or socket write function) to call when the buffer is full or when writing is done.</p>
<p dir="auto">If any error occurs, the writer is placed in an error state. The writer will flag an error if too much data is written, if the wrong number of elements are written, if an allocation failure occurs, if the data could not be flushed, etc. No additional error handling is needed in the above code; any subsequent writes are ignored when the writer is in an error state, so you don't need to check every write for errors.</p>
<p dir="auto">The above example uses <code>mpack_build_map()</code> to automatically determine the number of key-value pairs contained. If you know up-front the number of elements needed, you can pass it to <code>mpack_start_map()</code> instead. In that case the corresponding <code>mpack_finish_map()</code> will assert in debug mode that the expected number of elements were actually written, which is something that other MessagePack C/C++ libraries may not do.</p>
<h6 dir="auto">
<a id="user-content-comparison-with-other-parsers" class="anchor" aria-hidden="true" href="#comparison-with-other-parsers"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Comparison With Other Parsers</h6>
<p dir="auto">MPack is rich in features while maintaining very high performance and a small code footprint. Here's a short feature table comparing it to other C parsers:</p>
<table>
<thead>
<tr>
<th align="left"></th>
<th align="center">
<a href="https://github.com/ludocode/mpack">MPack</a><br>(v1.1)</th>
<th align="center">
<a href="https://github.com/msgpack/msgpack-c">msgpack-c</a><br>(v3.3.0)</th>
<th align="center">
<a href="https://github.com/camgunz/cmp">CMP</a><br>(v19)</th>
<th align="center">
<a href="https://github.com/clwi/CWPack">CWPack</a><br>(v1.3.1)</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">No libc requirement</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="left">Growable memory writer</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">*</td>
</tr>
<tr>
<td align="left">File I/O helpers</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">*</td>
</tr>
<tr>
<td align="left">Stateful error handling</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="left">Incremental parser</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="left">Tree stream parser</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="left">Compound size tracking</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="left">Automatic compound size</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody>
</table>
<p dir="auto">A larger feature comparison table is available <a href="/ludocode/mpack/blob/develop/docs/features.md">here</a> which includes descriptions of the various entries in the table.</p>
<p dir="auto"><a href="https://github.com/ludocode/schemaless-benchmarks">This benchmarking suite</a> compares the performance of MPack to other implementations of schemaless serialization formats. MPack outperforms all JSON and MessagePack libraries (except <a href="https://github.com/clwi/CWPack">CWPack</a>), and in some tests MPack is several times faster than <a href="https://github.com/miloyip/rapidjson">RapidJSON</a> for equivalent data.</p>
<h6 dir="auto">
<a id="user-content-why-not-just-use-json" class="anchor" aria-hidden="true" href="#why-not-just-use-json"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Why Not Just Use JSON?</h6>
<p dir="auto">Conceptually, MessagePack stores data similarly to JSON: they are both composed of simple values such as numbers and strings, stored hierarchically in maps and arrays. So why not just use JSON instead? The main reason is that JSON is designed to be human-readable, so it is not as efficient as a binary serialization format:</p>
<ul dir="auto">
<li>
<p dir="auto">Compound types such as strings, maps and arrays are delimited, so appropriate storage cannot be allocated upfront. The whole object must be parsed to determine its size.</p>
</li>
<li>
<p dir="auto">Strings are not stored in their native encoding. Special characters such as quotes and backslashes must be escaped when written and converted back when read.</p>
</li>
<li>
<p dir="auto">Numbers are particularly inefficient (especially when parsing back floats), making JSON inappropriate as a base format for structured data that contains lots of numbers.</p>
</li>
<li>
<p dir="auto">Binary data is not supported by JSON at all. Small binary blobs such as icons and thumbnails need to be Base64 encoded or passed out-of-band.</p>
</li>
</ul>
<p dir="auto">The above issues greatly increase the complexity of the decoder. Full-featured JSON decoders are quite large, and minimal decoders tend to leave out such features as string unescaping and float parsing, instead leaving these up to the user or platform. This can lead to hard-to-find platform-specific and locale-specific bugs, as well as a greater potential for security vulnerabilites. This also significantly decreases performance, making JSON unattractive for use in applications such as mobile games.</p>
<p dir="auto">While the space inefficiencies of JSON can be partially mitigated through minification and compression, the performance inefficiencies cannot. More importantly, if you are minifying and compressing the data, then why use a human-readable format in the first place?</p>
<h6 dir="auto">
<a id="user-content-testing-mpack" class="anchor" aria-hidden="true" href="#testing-mpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Testing MPack</h6>
<p dir="auto">The MPack build process does not build MPack into a library; it is used to build and run the unit tests. You do not need to build MPack or the unit testing suite to use MPack.</p>
<p dir="auto">See <a href="/ludocode/mpack/blob/develop/test/README.md">test/README.md</a> for information on how to test MPack.</p>
</article>
  </div>
        </div>
        
        <div id="qs-clwi-CWPack" class="qs"><h4><a href="https://github.com/clwi/CWPack" target="_blank">clwi/CWPack <span class="qs-url">https://github.com/clwi/CWPack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-cwpack" class="anchor" aria-hidden="true" href="#cwpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>CWPack</h5>
<p dir="auto">CWPack is a lightweight and yet complete implementation of the
<a href="http://msgpack.org" rel="nofollow">MessagePack</a> serialization format
<a href="https://github.com/msgpack/msgpack/blob/master/spec.md">version 5</a>.
It also supports the Timestamp extension type.</p>
<h6 dir="auto">
<a id="user-content-excellent-performance" class="anchor" aria-hidden="true" href="#excellent-performance"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Excellent Performance</h6>
<p dir="auto">Together with <a href="https://github.com/ludocode/mpack">MPack</a>, CWPack is the fastest open-source messagepack implementation. Both totally outperform
<a href="https://github.com/camgunz/cmp">CMP</a> and <a href="https://github.com/msgpack/msgpack-c">msgpack-c</a></p>
<h6 dir="auto">
<a id="user-content-design" class="anchor" aria-hidden="true" href="#design"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Design</h6>
<p dir="auto">CWPack does no memory allocations and no file handling in its basic setup. All that is done outside of CWPack. Example extensions are included.</p>
<p dir="auto">CWPack is working against memory buffers. User defined handlers are called when buffers are filled up (packing) or needs refill (unpack).</p>
<p dir="auto">Containers (arrays, maps) are read/written in parts, first the item containing the size and then the contained items one by one. Exception to this is the <code>cw_skip_items</code> function which skip whole containers.</p>
<h6 dir="auto">
<a id="user-content-example" class="anchor" aria-hidden="true" href="#example"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example</h6>
<p dir="auto">Pack and unpack example from the MessagePack home page:</p>
<div class="highlight highlight-source-c notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='void example (void)
{
    cw_pack_context pc;
    char buffer[20];
    cw_pack_context_init (&amp;pc, buffer, 20, 0);

    cw_pack_map_size (&amp;pc, 2);
    cw_pack_str (&amp;pc, "compact", 7);
    cw_pack_boolean (&amp;pc, true);
    cw_pack_str (&amp;pc, "schema", 6);
    cw_pack_unsigned (&amp;pc, 0);

    if (pc.return_code != CWP_RC_OK)  ERROR;
    int length = pc.current - pc.start;
    if (length != 18) ERROR;

    cw_unpack_context uc;
    cw_unpack_context_init (&amp;uc, pc.start, length, 0);

    if (cw_unpack_next_map_size(&amp;uc) != 2) ERROR;
    if (cw_unpack_next_str_lengh(&amp;uc) != 7) ERROR;
    if (strncmp("compact", uc.item.as.str.start, 7)) ERROR;
    if (cw_unpack_next_boolean(&amp;uc) != true) ERROR;
    if (cw_unpack_next_str_lengh(&amp;uc) != 6) ERROR;
    if (strncmp("schema", uc.item.as.str.start, 6)) ERROR;
    if (cw_unpack_next_signed32(&amp;uc) != 0) ERROR;

    if (uc.return_code != CWP_RC_OK)  ERROR;
    cw_unpack_next(&amp;uc);
    if (uc.return_code != CWP_RC_END_OF_INPUT)  ERROR;
}'><pre><span class="pl-k">void</span> <span class="pl-en">example</span> (<span class="pl-k">void</span>)
{
    cw_pack_context pc;
    <span class="pl-k">char</span> buffer[<span class="pl-c1">20</span>];
    <span class="pl-c1">cw_pack_context_init</span> (&amp;pc, buffer, <span class="pl-c1">20</span>, <span class="pl-c1">0</span>);

    <span class="pl-c1">cw_pack_map_size</span> (&amp;pc, <span class="pl-c1">2</span>);
    <span class="pl-c1">cw_pack_str</span> (&amp;pc, <span class="pl-s"><span class="pl-pds">"</span>compact<span class="pl-pds">"</span></span>, <span class="pl-c1">7</span>);
    <span class="pl-c1">cw_pack_boolean</span> (&amp;pc, <span class="pl-c1">true</span>);
    <span class="pl-c1">cw_pack_str</span> (&amp;pc, <span class="pl-s"><span class="pl-pds">"</span>schema<span class="pl-pds">"</span></span>, <span class="pl-c1">6</span>);
    <span class="pl-c1">cw_pack_unsigned</span> (&amp;pc, <span class="pl-c1">0</span>);

    <span class="pl-k">if</span> (pc.<span class="pl-smi">return_code</span> != CWP_RC_OK)  ERROR;
    <span class="pl-k">int</span> length = pc.<span class="pl-smi">current</span> - pc.<span class="pl-smi">start</span>;
    <span class="pl-k">if</span> (length != <span class="pl-c1">18</span>) ERROR;

    cw_unpack_context uc;
    <span class="pl-c1">cw_unpack_context_init</span> (&amp;uc, pc.<span class="pl-smi">start</span>, length, <span class="pl-c1">0</span>);

    <span class="pl-k">if</span> (<span class="pl-c1">cw_unpack_next_map_size</span>(&amp;uc) != <span class="pl-c1">2</span>) ERROR;
    <span class="pl-k">if</span> (<span class="pl-c1">cw_unpack_next_str_lengh</span>(&amp;uc) != <span class="pl-c1">7</span>) ERROR;
    <span class="pl-k">if</span> (<span class="pl-c1">strncmp</span>(<span class="pl-s"><span class="pl-pds">"</span>compact<span class="pl-pds">"</span></span>, uc.<span class="pl-smi">item</span>.<span class="pl-smi">as</span>.<span class="pl-smi">str</span>.<span class="pl-smi">start</span>, <span class="pl-c1">7</span>)) ERROR;
    <span class="pl-k">if</span> (<span class="pl-c1">cw_unpack_next_boolean</span>(&amp;uc) != <span class="pl-c1">true</span>) ERROR;
    <span class="pl-k">if</span> (<span class="pl-c1">cw_unpack_next_str_lengh</span>(&amp;uc) != <span class="pl-c1">6</span>) ERROR;
    <span class="pl-k">if</span> (<span class="pl-c1">strncmp</span>(<span class="pl-s"><span class="pl-pds">"</span>schema<span class="pl-pds">"</span></span>, uc.<span class="pl-smi">item</span>.<span class="pl-smi">as</span>.<span class="pl-smi">str</span>.<span class="pl-smi">start</span>, <span class="pl-c1">6</span>)) ERROR;
    <span class="pl-k">if</span> (<span class="pl-c1">cw_unpack_next_signed32</span>(&amp;uc) != <span class="pl-c1">0</span>) ERROR;

    <span class="pl-k">if</span> (uc.<span class="pl-smi">return_code</span> != CWP_RC_OK)  ERROR;
    <span class="pl-c1">cw_unpack_next</span>(&amp;uc);
    <span class="pl-k">if</span> (uc.<span class="pl-smi">return_code</span> != CWP_RC_END_OF_INPUT)  ERROR;
}</pre></div>
<p dir="auto">In the examples folder there are more examples.</p>
<h6 dir="auto">
<a id="user-content-backward-compatibility" class="anchor" aria-hidden="true" href="#backward-compatibility"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Backward compatibility</h6>
<p dir="auto">CWPack may be run in compatibility mode. It affects only packing; EXT &amp; TIMESTAMP is considered illegal, BIN are transformed to STR and generation of STR8 is supressed.</p>
<h6 dir="auto">
<a id="user-content-error-handling" class="anchor" aria-hidden="true" href="#error-handling"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Error handling</h6>
<p dir="auto">When an error is detected in a context, the context is stopped and all future calls to that context are immediatly returned without any actions. Thus it is possible to make some calls and delay error checking until all calls are done.</p>
<p dir="auto">CWPack does not check for illegal values (e.g. in STR for illegal unicode characters).</p>
<h6 dir="auto">
<a id="user-content-build" class="anchor" aria-hidden="true" href="#build"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Build</h6>
<p dir="auto">CWPack consists of a single src file and three header files. It is written in strict ansi C and the files are together ~ 1.4K lines. No separate build is neccesary, just include the files in your own build.</p>
<p dir="auto">CWPack has no dependencies to other libraries.</p>
<h6 dir="auto">
<a id="user-content-test" class="anchor" aria-hidden="true" href="#test"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Test</h6>
<p dir="auto">Included in the test folder are a module test and a performance test and shell scripts to run them.</p>
<h5 dir="auto">
<a id="user-content-objective-c" class="anchor" aria-hidden="true" href="#objective-c"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Objective-C</h5>
<p dir="auto">CWPack also contains an Objective-C interface. The MessagePack home page example would look like:</p>
<div class="highlight highlight-source-c notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='CWPackContext *pc = [CWPackContext newWithContext:my_cw_pack_context];
[pc packObject:@{@"compact":@YES, @"schema":@0}];

CWUnpackContext *uc = [CWUnpackContext newWithContext:my_cw_unpack_context];
NSDictionary *dict = [uc unpackNextObject];'><pre>CWPackContext *pc = [CWPackContext newWithContext:my_cw_pack_context];
[pc packObject:@{@<span class="pl-s"><span class="pl-pds">"</span>compact<span class="pl-pds">"</span></span>:@YES, @<span class="pl-s"><span class="pl-pds">"</span>schema<span class="pl-pds">"</span></span>:@<span class="pl-c1">0</span>}];

CWUnpackContext *uc = [CWUnpackContext newWithContext:my_cw_unpack_context];
NSDictionary *dict = [uc unpackNextObject];</pre></div>
<h5 dir="auto">
<a id="user-content-swift" class="anchor" aria-hidden="true" href="#swift"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Swift</h5>
<p dir="auto">CWPack also contains a Swift interface. The MessagePack home page example would pack like:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='let packer = CWDataPacker()
packer + DictionaryHeader(2) + "compact" + true + "schema" + 0
let data = packer.data

	```'><pre class="notranslate"><code>let packer = CWDataPacker()
packer + DictionaryHeader(2) + "compact" + true + "schema" + 0
let data = packer.data

	```
</code></pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-cli" class="qs"><h4><a href="https://github.com/msgpack/msgpack-cli" target="_blank">msgpack/msgpack-cli <span class="qs-url">https://github.com/msgpack/msgpack-cli</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack-for-cli" class="anchor" aria-hidden="true" href="#messagepack-for-cli"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack for CLI</h5>
<h6 dir="auto">
<a id="user-content-ci-status" class="anchor" aria-hidden="true" href="#ci-status"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>CI Status</h6>
<table>
<thead>
<tr>
<th align="left"><strong>Configuration</strong></th>
<th align="left"><strong>Status</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Release</td>
<td align="left"><a href="https://ci.appveyor.com/project/yfakariya/msgpack-cli-x2p85" rel="nofollow"><img src="https://camo.githubusercontent.com/c094c78f781d275e66e4bcf1b3a5b4461311e50af6ca64a5a5b50570f209238a/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f356c6e3775376566776a65706a366f383f7376673d74727565" alt="Build status release" data-canonical-src="https://ci.appveyor.com/api/projects/status/5ln7u7efwjepj6o8?svg=true" style="max-width: 100%;"></a></td>
</tr>
<tr>
<td align="left">Debug (.NET Core 2.0)</td>
<td align="left"><a href="https://ci.appveyor.com/project/yfakariya/msgpack-cli" rel="nofollow"><img src="https://camo.githubusercontent.com/ac845f5c56a1effcf270487b700d75bc995170666470ebc1c6060dd715fe5592/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f646c6330763472726f6c776a307432743f7376673d74727565" alt="Build status debug (.NET Core 2.0)" data-canonical-src="https://ci.appveyor.com/api/projects/status/dlc0v4rrolwj0t2t?svg=true" style="max-width: 100%;"></a></td>
</tr>
<tr>
<td align="left">Debug (.NET Core 2.0)</td>
<td align="left"><a href="https://ci.appveyor.com/project/yfakariya/msgpack-cli-g3guk" rel="nofollow"><img src="https://camo.githubusercontent.com/b02194b48999915ae0ef1d033f90fa1c2a447d5579be2e869a3ceb7398c038e2/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f6176757266353139616c6c39327635753f7376673d74727565" alt="Build status debug (.NET Core 1.0)" data-canonical-src="https://ci.appveyor.com/api/projects/status/avurf519all92v5u?svg=true" style="max-width: 100%;"></a></td>
</tr>
<tr>
<td align="left">Debug (.NET Framework 4.x)</td>
<td align="left"><a href="https://ci.appveyor.com/project/yfakariya/msgpack-cli-nuf62" rel="nofollow"><img src="https://camo.githubusercontent.com/d83df61fdffa740eccba9ee80fc9152a32ccc670583d94d36f4e45eeeb3eb0f0/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f6e703637323371327569716f667231613f7376673d74727565" alt="Build status debug (.NET Framework 4.x)" data-canonical-src="https://ci.appveyor.com/api/projects/status/np6723q2uiqofr1a?svg=true" style="max-width: 100%;"></a></td>
</tr>
<tr>
<td align="left">Debug (Code DOM)]</td>
<td align="left"><a href="https://ci.appveyor.com/project/yfakariya/msgpack-cli-rhnh0" rel="nofollow"><img src="https://camo.githubusercontent.com/084355257ef0e748954540e86ee0eef5949d4f65aa8da2015ff4e9f04a7af999/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f316d773738776b787835306a766162313f7376673d74727565" alt="Build status debug (Code DOM)" data-canonical-src="https://ci.appveyor.com/api/projects/status/1mw78wkxx50jvab1?svg=true" style="max-width: 100%;"></a></td>
</tr>
<tr>
<td align="left">Debug (miscs)]</td>
<td align="left"><a href="https://ci.appveyor.com/project/yfakariya/msgpack-cli-bo856" rel="nofollow"><img src="https://camo.githubusercontent.com/4124c4e43b458aba2260d3b6b6f07aff6b9d7c64e13e47de4ac4ee355f4eb705/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f61767566633531797532636d366964773f7376673d74727565" alt="Build status debug (miscs)" data-canonical-src="https://ci.appveyor.com/api/projects/status/avufc51yu2cm6idw?svg=true" style="max-width: 100%;"></a></td>
</tr>
<tr>
<td align="left">Debug (.NET Framework 3.5)</td>
<td align="left"><a href="https://ci.appveyor.com/project/yfakariya/msgpack-cli-3jme9" rel="nofollow"><img src="https://camo.githubusercontent.com/6bb8bdcb4d9994172b1505cbb39f31dfc64a86f127ddaca42d20db13ba51a870/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f636a703870686c6e62776a37676b6a393f7376673d74727565" alt="Build status debug (.NET Framework 3.5)" data-canonical-src="https://ci.appveyor.com/api/projects/status/cjp8phlnbwj7gkj9?svg=true" style="max-width: 100%;"></a></td>
</tr>
<tr>
<td align="left">Debug (.NET Framework 3.5 Code DOM)</td>
<td align="left"><a href="https://ci.appveyor.com/project/yfakariya/msgpack-cli-rhnh0" rel="nofollow"><img src="https://camo.githubusercontent.com/084355257ef0e748954540e86ee0eef5949d4f65aa8da2015ff4e9f04a7af999/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f316d773738776b787835306a766162313f7376673d74727565" alt="Build status debug (.NET Framework 3.5 Code DOM)" data-canonical-src="https://ci.appveyor.com/api/projects/status/1mw78wkxx50jvab1?svg=true" style="max-width: 100%;"></a></td>
</tr>
</tbody>
</table>
<h6 dir="auto">
<a id="user-content-what-is-it" class="anchor" aria-hidden="true" href="#what-is-it"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>What is it?</h6>
<p dir="auto">This is MessagePack serialization/deserialization for CLI (Common Language Infrastructure) implementations such as .NET Framework, Silverlight, Mono (including Moonlight.)
This library can be used from ALL CLS compliant languages such as C#, F#, Visual Basic, Iron Python, Iron Ruby, PowerShell, C++/CLI or so.</p>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<p dir="auto">You can serialize/deserialize objects as following:</p>
<ol dir="auto">
<li>Create serializer via <code>MessagePackSerializer.Get</code> generic method. This method creates dependent types serializers as well.</li>
<li>Invoke serializer as following:</li>
</ol>
<ul dir="auto">
<li>
<code>Pack</code> method with destination <code>Stream</code> and target object for serialization.</li>
<li>
<code>Unpack</code> method with source <code>Stream</code>.</li>
</ul>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="// Creates serializer.
var serializer = MessagePackSerializer.Get&lt;T&gt;();
// Pack obj to stream.
serializer.Pack(stream, obj);
// Unpack from stream.
var unpackedObject = serializer.Unpack(stream);"><pre><span class="pl-c"><span class="pl-c">//</span> Creates serializer.</span>
<span class="pl-k">var</span> <span class="pl-en">serializer</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">Get</span>&lt;<span class="pl-en">T</span>&gt;();
<span class="pl-c"><span class="pl-c">//</span> Pack obj to stream.</span>
<span class="pl-smi">serializer</span>.<span class="pl-en">Pack</span>(<span class="pl-smi">stream</span>, <span class="pl-smi">obj</span>);
<span class="pl-c"><span class="pl-c">//</span> Unpack from stream.</span>
<span class="pl-k">var</span> <span class="pl-en">unpackedObject</span> <span class="pl-k">=</span> <span class="pl-smi">serializer</span>.<span class="pl-en">Unpack</span>(<span class="pl-smi">stream</span>);</pre></div>
<div class="highlight highlight-source-vbnet notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="' Creates serializer.
Dim serializer = MessagePackSerializer.Get(Of T)()
' Pack obj to stream.
serializer.Pack(stream, obj)
' Unpack from stream.
Dim unpackedObject = serializer.Unpack(stream)"><pre><span class="pl-c">' Creates serializer.</span>
<span class="pl-k">Dim</span> <span class="pl-smi">serializer</span> <span class="pl-smi">=</span> <span class="pl-smi">MessagePackSerializer.Get(</span><span class="pl-k">Of</span> <span class="pl-smi">T)()</span>
<span class="pl-c">' Pack obj to stream.</span>
<span class="pl-smi">serializer.Pack(stream,</span> <span class="pl-smi">obj)</span>
<span class="pl-c">' Unpack from stream.</span>
<span class="pl-k">Dim</span> <span class="pl-smi">unpackedObject</span> <span class="pl-smi">=</span> <span class="pl-smi">serializer.Unpack(stream)</span></pre></div>
<p dir="auto"><strong>For production environment, you should instantiate own <code>SerializationContext</code> and manage its lifetime. It is good idea to treat it as singleton because <code>SerializationContext</code> is thread-safe.</strong></p>
<h6 dir="auto">
<a id="user-content-features" class="anchor" aria-hidden="true" href="#features"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Features</h6>
<ul dir="auto">
<li>Fast and interoperable binary format serialization with simple API.</li>
<li>Generating pre-compiled assembly for rapid start up.</li>
<li>Flexible MessagePackObject which represents MessagePack type system naturally.</li>
</ul>
<p dir="auto"><strong>Note: AOT support is limited yet. Use <a href="https://github.com/msgpack/msgpack-cli/wiki/Xamarin-and-Unity">serializer pre-generation</a> with <code>mpu -s</code> utility or API.</strong><br>
If you do not pre-generated serializers, MsgPack for CLI uses reflection in AOT environments, it is slower and it sometimes causes AOT related error (<code>ExecutionEngineException</code> for runtime JIT compilation). <strong>You also have to call <code>MessagePackSerializer.PrepareType&lt;T&gt;</code> and companions in advance to avoid AOT related error.</strong> See <a href="https://github.com/msgpack/msgpack-cli/wiki/Xamarin-and-Unity">wiki</a> for details.</p>
<h6 dir="auto">
<a id="user-content-documentation" class="anchor" aria-hidden="true" href="#documentation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Documentation</h6>
<p dir="auto">See <a href="https://github.com/msgpack/msgpack-cli/wiki">wiki</a></p>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<ul dir="auto">
<li>Binary files distributed via the NuGet package <a href="http://www.nuget.org/packages/MsgPack.Cli/" rel="nofollow">MsgPack.Cli</a>.</li>
<li>You can extract binary (DLL) file as following:
<ol dir="auto">
<li>Download *.zip file from <a href="https://github.com/msgpack/msgpack-cli/releases/">GitHub Release page</a>.</li>
<li>Extract it.</li>
<li>Under the <code>bin</code> directory, binaries are there!</li>
</ol>
<ul dir="auto">
<li>For mono, you can use <code>net461</code> or <code>net35</code> drops as you run with.</li>
<li>For Unity, <code>unity3d</code> drop is suitable.</li>
</ul>
</li>
</ul>
<h6 dir="auto">
<a id="user-content-how-to-build" class="anchor" aria-hidden="true" href="#how-to-build"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How to build</h6>
<h7 dir="auto">
<a id="user-content-for-net-framework" class="anchor" aria-hidden="true" href="#for-net-framework"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>For .NET Framework</h7>
<ol dir="auto">
<li>
<p dir="auto">Install Visual Studio 2017 (Community edition is OK) and 2015 (for MsgPack.Windows.sln).</p>
<ul dir="auto">
<li>You must install .NET Framework 3.5, 4.x, .NET Core, and Xamarin dev tools to build all builds successfully.
If you do not want to install options, edit <code>&lt;TargetFrameworks&gt;</code> element in <code>*.csproj</code> files to exclude platforms you want to exclude.</li>
</ul>
</li>
<li>
<p dir="auto">Install latest .NET Core SDK.</p>
</li>
<li>
<p dir="auto">Run with Visual Studio Developer Command Prompt:</p>
<p dir="auto">msbuild MsgPack.sln /t:Restore
msbuild MsgPack.sln</p>
</li>
</ol>
<p dir="auto">Or (for Unity 3D drops):</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="msbuild MsgPack.compats.sln /t:Restore
msbuild MsgPack.compats.sln"><pre class="notranslate"><code>msbuild MsgPack.compats.sln /t:Restore
msbuild MsgPack.compats.sln
</code></pre></div>
<p dir="auto">Or (for Windows Runtime/Phone drops and Silverlight 5 drops):</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="msbuild MsgPack.Windows.sln /t:Restore
msbuild MsgPack.Windows.sln"><pre class="notranslate"><code>msbuild MsgPack.Windows.sln /t:Restore
msbuild MsgPack.Windows.sln
</code></pre></div>
<p dir="auto">Or (for Xamarin unit testing, you must have Xamarin Business or upper license and Mac machine on the LAN to build on Windows):</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="msbuild MsgPack.Xamarin.sln /t:Restore
msbuild MsgPack.Xamarin.sln"><pre class="notranslate"><code>msbuild MsgPack.Xamarin.sln /t:Restore
msbuild MsgPack.Xamarin.sln
</code></pre></div>
<p dir="auto">Or open one of above solution files in your IDE and run build command in it.</p>
<h7 dir="auto">
<a id="user-content-for-mono" class="anchor" aria-hidden="true" href="#for-mono"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>For Mono</h7>
<ol dir="auto">
<li>Install latest Mono and .NET Core SDK.</li>
<li>Now, you can build MsgPack.sln and MsgPack.Xamarin.sln with above instructions and <code>msbuild</code> in latest Mono. Note that <code>xbuild</code> does not work because it does not support latest csproj format.</li>
</ol>
<h7 dir="auto">
<a id="user-content-own-unity-3d-build" class="anchor" aria-hidden="true" href="#own-unity-3d-build"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Own Unity 3D Build</h7>
<p dir="auto">First of all, there are binary drops on github release page, you should use it to save your time.<br>
Because we will not guarantee source code organization compatibilities, we might add/remove non-public types or members, which should break source code build.<br>
If you want to import sources, you must include just only described on MsgPack.Unity3D.csproj.<br>
If you want to use ".NET 2.0 Subset" settings, you must use just only described on MsgPack.Unity3D.CorLibOnly.csproj file, and define <code>CORLIB_ONLY</code> compiler constants.</p>
<h7 dir="auto">
<a id="user-content-xamarin-android-testing" class="anchor" aria-hidden="true" href="#xamarin-android-testing"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Xamarin Android testing</h7>
<p dir="auto">If you run on Windows, it is recommended to use HXM instead of Hyper-V based emulator.<br>
You can disable Hyper-V from priviledged (administrator) powershell as follows:</p>
<div class="highlight highlight-source-powershell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Disable-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V-Hypervisor"><pre><span class="pl-c1">Disable-WindowsOptionalFeature</span> <span class="pl-k">-</span>Online <span class="pl-k">-</span>FeatureName Microsoft<span class="pl-k">-</span>Hyper<span class="pl-k">-</span>V<span class="pl-k">-</span>Hypervisor</pre></div>
<p dir="auto">If you want to use Hyper-V again (such as for Docker for Windows etc.), you can do it by following in priviledged (administrator) powershell:</p>
<div class="highlight highlight-source-powershell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V-Hypervisor"><pre><span class="pl-c1">Enable-WindowsOptionalFeature</span> <span class="pl-k">-</span>Online <span class="pl-k">-</span>FeatureName Microsoft<span class="pl-k">-</span>Hyper<span class="pl-k">-</span>V<span class="pl-k">-</span>Hypervisor</pre></div>
<h8 dir="auto">
<a id="user-content-xamarin-android-trouble-shooting-tips" class="anchor" aria-hidden="true" href="#xamarin-android-trouble-shooting-tips"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Xamarin Android Trouble shooting tips</h8>
<ul dir="auto">
<li>
<strong>Q:</strong> Javac shows compilation error.
<ul dir="auto">
<li>
<strong>A:</strong> Rebuild the test project and try it run again.</li>
</ul>
</li>
</ul>
<h7 dir="auto">
<a id="user-content-xamarin-ios-testing" class="anchor" aria-hidden="true" href="#xamarin-ios-testing"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Xamarin iOS testing</h7>
<p dir="auto">You must create provisoning profiles in your MacOS devices.<br>
See <a href="https://developer.xamarin.com/guides/ios/getting_started/installation/device_provisioning/free-provisioning/" rel="nofollow">Xamarin documents about provisining</a> for details.</p>
<p dir="auto">There are bundle IDs of current iOS tests:</p>
<ul dir="auto">
<li><code>org.msgpack.msgpack-cli-xamarin-ios-test</code></li>
<li><code>org.msgpack.msgpack-cli-xamarin-ios-test-packer</code></li>
<li><code>org.msgpack.msgpack-cli-xamarin-ios-test-unpacker</code></li>
<li><code>org.msgpack.msgpack-cli-xamarin-ios-test-unpacking</code></li>
<li><code>org.msgpack.msgpack-cli-xamarin-ios-test-timestamp</code></li>
<li><code>org.msgpack.msgpack-cli-xamarin-ios-test-arrayserialization</code></li>
<li><code>org.msgpack.msgpack-cli-xamarin-ios-test-mapserialization</code></li>
</ul>
<p dir="auto"><em>Note that some reflection based serializer tests failed with AOT related limitation.</em></p>
<h8 dir="auto">
<a id="user-content-xamarin-ios-trouble-shooting-tips" class="anchor" aria-hidden="true" href="#xamarin-ios-trouble-shooting-tips"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Xamarin iOS Trouble shooting tips</h8>
<p dir="auto">See <a href="https://developer.xamarin.com/guides/ios/getting_started/installation/windows/connecting-to-mac/troubleshooting/" rel="nofollow">Xamarin's official trouble shooting docs first.</a></p>
<ul dir="auto">
<li>
<strong>Q:</strong> An error occurred while running unit test project.
<ul dir="auto">
<li>
<strong>A:</strong> Rebuild the project and rerun it. Or, login your Mac again, ant retry it.</li>
</ul>
</li>
<li>
<strong>Q:</strong> It is hard to read English.
<ul dir="auto">
<li>
<strong>A:</strong> You can read localized Xamarin docs with putting <code>{region}-{lang}</code> as the first component of URL path such as <code>https://developer.xamarin.com/ja-jp/guides/...</code>.</li>
</ul>
</li>
</ul>
<h6 dir="auto">
<a id="user-content-maintenance" class="anchor" aria-hidden="true" href="#maintenance"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Maintenance</h6>
<h7 dir="auto">
<a id="user-content-msgpackwindowssln" class="anchor" aria-hidden="true" href="#msgpackwindowssln"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MsgPack.Windows.sln</h7>
<p dir="auto">This solution contains Silverlight5 and (old) UWP project for backward compability. They are required Visual Studio 2015 to build and test.<br>
You can download Visual Studio 2015 community edition from <a href="https://visualstudio.microsoft.com/vs/older-downloads/" rel="nofollow">here</a>.</p>
<p dir="auto"><strong>You do not have to install Visual Studio 2015 as long as you don't edit/test/build Silverlight and/or old UWP project.</strong></p>
<h6 dir="auto">
<a id="user-content-see-also" class="anchor" aria-hidden="true" href="#see-also"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>See also</h6>
<ul dir="auto">
<li>GitHub Page           : <a href="http://cli.msgpack.org/" rel="nofollow">http://cli.msgpack.org/</a>
</li>
<li>Wiki (documentation)  : <a href="https://github.com/msgpack/msgpack-cli/wiki">https://github.com/msgpack/msgpack-cli/wiki</a>
</li>
<li>API Reference         : <a href="http://cli.msgpack.org/doc/top.html" rel="nofollow">http://cli.msgpack.org/doc/top.html</a>
</li>
<li>Issue tracker         : <a href="https://github.com/msgpack/msgpack-cli/issues">https://github.com/msgpack/msgpack-cli/issues</a>
</li>
<li>MSBuild reference     : <a href="http://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx" rel="nofollow">http://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx</a>
</li>
<li>Mono xbuild reference : <a href="http://www.mono-project.com/Microsoft.Build" rel="nofollow">http://www.mono-project.com/Microsoft.Build</a>
</li>
</ul>
</article>
  </div>
        </div>
        
        <div id="qs-ymofen-SimpleMsgPack-Net" class="qs"><h4><a href="https://github.com/ymofen/SimpleMsgPack.Net" target="_blank">ymofen/SimpleMsgPack.Net <span class="qs-url">https://github.com/ymofen/SimpleMsgPack.Net</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-simplemsgpacknet" class="anchor" aria-hidden="true" href="#simplemsgpacknet"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>SimpleMsgPack.Net</h5>
<p dir="auto">MessagePack implementation for C# / msgpack.org[C#]</p>
<p dir="auto">Binary files distributed via the NuGet package <a href="http://www.nuget.org/packages/SimpleMsgPack/" rel="nofollow">SimpleMsgPack</a>.</p>
<p dir="auto">It's like JSON but small and fast.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="unit Owner: D10.Mofen
contact:
       qq:185511468, 
    email:ymofen@diocp.org
	homepage:www.diocp.org
if you find any bug, please contact me!"><pre class="notranslate"><code>unit Owner: D10.Mofen
contact:
       qq:185511468, 
    email:ymofen@diocp.org
	homepage:www.diocp.org
if you find any bug, please contact me!
</code></pre></div>
<h6 dir="auto">
<a id="user-content-works-with" class="anchor" aria-hidden="true" href="#works-with"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Works with</h6>
<p dir="auto">.NET Framework 4.x</p>
<h7 dir="auto">
<a id="user-content-code-example" class="anchor" aria-hidden="true" href="#code-example"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Code Example</h7>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='
    MsgPack msgpack = new MsgPack();
    msgpack.ForcePathObject("p.name").AsString = "";
    msgpack.ForcePathObject("p.age").AsInteger = 25;
    msgpack.ForcePathObject("p.datas").AsArray.Add(90);
    msgpack.ForcePathObject("p.datas").AsArray.Add(80);
    msgpack.ForcePathObject("p.datas").AsArray.Add("");
    msgpack.ForcePathObject("p.datas").AsArray.Add(3.1415926);

    // pack file
    msgpack.ForcePathObject("p.filedata").LoadFileAsBytes("C:\\a.png");

    // pack msgPack binary
    byte[] packData = msgpack.Encode2Bytes();

    MsgPack unpack_msgpack = new MsgPack();
	
    // unpack msgpack
    unpack_msgpack.DecodeFromBytes(packData);

    System.Console.WriteLine("name:{0}, age:{1}",
          unpack_msgpack.ForcePathObject("p.name").AsString,
          unpack_msgpack.ForcePathObject("p.age").AsInteger);

    Console.WriteLine("==================================");
    System.Console.WriteLine("use index property, Length{0}:{1}",
          unpack_msgpack.ForcePathObject("p.datas").AsArray.Length,
          unpack_msgpack.ForcePathObject("p.datas").AsArray[0].AsString
          );

    Console.WriteLine("==================================");
    Console.WriteLine("use foreach statement:");
    foreach (MsgPack item in unpack_msgpack.ForcePathObject("p.datas"))
    {
        Console.WriteLine(item.AsString);
    }

    // unpack filedata 
    unpack_msgpack.ForcePathObject("p.filedata").SaveBytesToFile("C:\\b.png");
    Console.Read();'><pre>    <span class="pl-en">MsgPack</span> <span class="pl-en">msgpack</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">MsgPack</span>();
    <span class="pl-smi">msgpack</span>.<span class="pl-en">ForcePathObject</span>(<span class="pl-s"><span class="pl-pds">"</span>p.name<span class="pl-pds">"</span></span>).<span class="pl-smi">AsString</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>;
    <span class="pl-smi">msgpack</span>.<span class="pl-en">ForcePathObject</span>(<span class="pl-s"><span class="pl-pds">"</span>p.age<span class="pl-pds">"</span></span>).<span class="pl-smi">AsInteger</span> <span class="pl-k">=</span> <span class="pl-c1">25</span>;
    <span class="pl-smi">msgpack</span>.<span class="pl-en">ForcePathObject</span>(<span class="pl-s"><span class="pl-pds">"</span>p.datas<span class="pl-pds">"</span></span>).<span class="pl-smi">AsArray</span>.<span class="pl-en">Add</span>(<span class="pl-c1">90</span>);
    <span class="pl-smi">msgpack</span>.<span class="pl-en">ForcePathObject</span>(<span class="pl-s"><span class="pl-pds">"</span>p.datas<span class="pl-pds">"</span></span>).<span class="pl-smi">AsArray</span>.<span class="pl-en">Add</span>(<span class="pl-c1">80</span>);
    <span class="pl-smi">msgpack</span>.<span class="pl-en">ForcePathObject</span>(<span class="pl-s"><span class="pl-pds">"</span>p.datas<span class="pl-pds">"</span></span>).<span class="pl-smi">AsArray</span>.<span class="pl-en">Add</span>(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>);
    <span class="pl-smi">msgpack</span>.<span class="pl-en">ForcePathObject</span>(<span class="pl-s"><span class="pl-pds">"</span>p.datas<span class="pl-pds">"</span></span>).<span class="pl-smi">AsArray</span>.<span class="pl-en">Add</span>(<span class="pl-c1">3</span><span class="pl-c1">.</span><span class="pl-c1">1415926</span>);

    <span class="pl-c"><span class="pl-c">//</span> pack file</span>
    <span class="pl-smi">msgpack</span>.<span class="pl-en">ForcePathObject</span>(<span class="pl-s"><span class="pl-pds">"</span>p.filedata<span class="pl-pds">"</span></span>).<span class="pl-en">LoadFileAsBytes</span>(<span class="pl-s"><span class="pl-pds">"</span>C:<span class="pl-cce">\\</span>a.png<span class="pl-pds">"</span></span>);

    <span class="pl-c"><span class="pl-c">//</span> pack msgPack binary</span>
    <span class="pl-k">byte</span>[] <span class="pl-en">packData</span> <span class="pl-k">=</span> <span class="pl-smi">msgpack</span>.<span class="pl-en">Encode2Bytes</span>();

    <span class="pl-en">MsgPack</span> <span class="pl-en">unpack_msgpack</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">MsgPack</span>();
	
    <span class="pl-c"><span class="pl-c">//</span> unpack msgpack</span>
    <span class="pl-smi">unpack_msgpack</span>.<span class="pl-en">DecodeFromBytes</span>(<span class="pl-smi">packData</span>);

    <span class="pl-smi">System</span>.<span class="pl-smi">Console</span>.<span class="pl-en">WriteLine</span>(<span class="pl-s"><span class="pl-pds">"</span>name:{0}, age:{1}<span class="pl-pds">"</span></span>,
          <span class="pl-smi">unpack_msgpack</span>.<span class="pl-en">ForcePathObject</span>(<span class="pl-s"><span class="pl-pds">"</span>p.name<span class="pl-pds">"</span></span>).<span class="pl-smi">AsString</span>,
          <span class="pl-smi">unpack_msgpack</span>.<span class="pl-en">ForcePathObject</span>(<span class="pl-s"><span class="pl-pds">"</span>p.age<span class="pl-pds">"</span></span>).<span class="pl-smi">AsInteger</span>);

    <span class="pl-smi">Console</span>.<span class="pl-en">WriteLine</span>(<span class="pl-s"><span class="pl-pds">"</span>==================================<span class="pl-pds">"</span></span>);
    <span class="pl-smi">System</span>.<span class="pl-smi">Console</span>.<span class="pl-en">WriteLine</span>(<span class="pl-s"><span class="pl-pds">"</span>use index property, Length{0}:{1}<span class="pl-pds">"</span></span>,
          <span class="pl-smi">unpack_msgpack</span>.<span class="pl-en">ForcePathObject</span>(<span class="pl-s"><span class="pl-pds">"</span>p.datas<span class="pl-pds">"</span></span>).<span class="pl-smi">AsArray</span>.<span class="pl-smi">Length</span>,
          <span class="pl-smi">unpack_msgpack</span>.<span class="pl-en">ForcePathObject</span>(<span class="pl-s"><span class="pl-pds">"</span>p.datas<span class="pl-pds">"</span></span>).<span class="pl-smi">AsArray</span>[<span class="pl-c1">0</span>].<span class="pl-smi">AsString</span>
          );

    <span class="pl-smi">Console</span>.<span class="pl-en">WriteLine</span>(<span class="pl-s"><span class="pl-pds">"</span>==================================<span class="pl-pds">"</span></span>);
    <span class="pl-smi">Console</span>.<span class="pl-en">WriteLine</span>(<span class="pl-s"><span class="pl-pds">"</span>use foreach statement:<span class="pl-pds">"</span></span>);
    <span class="pl-k">foreach</span> (<span class="pl-en">MsgPack</span> <span class="pl-en">item</span> <span class="pl-k">in</span> <span class="pl-smi">unpack_msgpack</span>.<span class="pl-en">ForcePathObject</span>(<span class="pl-s"><span class="pl-pds">"</span>p.datas<span class="pl-pds">"</span></span>))
    {
        <span class="pl-smi">Console</span>.<span class="pl-en">WriteLine</span>(<span class="pl-smi">item</span>.<span class="pl-smi">AsString</span>);
    }

    <span class="pl-c"><span class="pl-c">//</span> unpack filedata </span>
    <span class="pl-smi">unpack_msgpack</span>.<span class="pl-en">ForcePathObject</span>(<span class="pl-s"><span class="pl-pds">"</span>p.filedata<span class="pl-pds">"</span></span>).<span class="pl-en">SaveBytesToFile</span>(<span class="pl-s"><span class="pl-pds">"</span>C:<span class="pl-cce">\\</span>b.png<span class="pl-pds">"</span></span>);
    <span class="pl-smi">Console</span>.<span class="pl-en">Read</span>();</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-caesay-MPack" class="qs"><h4><a href="https://github.com/caesay/MPack" target="_blank">caesay/MPack <span class="qs-url">https://github.com/caesay/MPack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-mpack" class="anchor" aria-hidden="true" href="#mpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MPack</h5>
<p dir="auto">This library is a lightweight implementation of the <a href="http://msgpack.org/" rel="nofollow">MessagePack</a> binary serialization format. MessagePack is a 1-to-1 binary representation of JSON, and the official specification can be found here: <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">https://github.com/msgpack...</a>.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/d1b03717b295b2a6b484fc94370311798e927c34c32202162b3b411e5b388cbb/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f38346a76306c6c6c6e697173696370623f7376673d74727565"><img src="https://camo.githubusercontent.com/d1b03717b295b2a6b484fc94370311798e927c34c32202162b3b411e5b388cbb/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f38346a76306c6c6c6e697173696370623f7376673d74727565" alt="Build status" data-canonical-src="https://ci.appveyor.com/api/projects/status/84jv0lllniqsicpb?svg=true" style="max-width: 100%;"></a> (<a href="https://ci.appveyor.com/project/caesay/mpack" rel="nofollow">https://ci.appveyor.com/project/caesay/mpack</a>)</p>
<h6 dir="auto">
<a id="user-content-notes" class="anchor" aria-hidden="true" href="#notes"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Notes</h6>
<ul dir="auto">
<li>This library is designed to be super light weight.</li>
<li>Its easiest to understand how this library works if you think in terms of json. The type <code>MPackMap</code> represents a dictionary, and the type <code>MPackArray</code> represents an array.</li>
<li>Create MPack instances with the static method <code>MPack.From(object);</code>. You can pass any simple type (such as string, integer, etc), or any Array composed of a simple type. MPack also has implicit conversions from most of the basic types built in.</li>
<li>Transform an MPack object back into a CLR type with the static method <code>MPack.To&lt;T&gt;();</code> or MPack.To(type);. MPack also has <strong>explicit</strong> converions going back to most basic types, you can do <code>string str = (string)mpack;</code> for instance.</li>
<li>MPack now supports native asynchrounous reading and cancellation tokens. It will <em>not</em> block a thread to wait on a stream.</li>
</ul>
<h6 dir="auto">
<a id="user-content-nuget" class="anchor" aria-hidden="true" href="#nuget"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>NuGet</h6>
<p dir="auto">MPack is available as a NuGet package!</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="PM&gt; Install-Package MPack"><pre class="notranslate"><code>PM&gt; Install-Package MPack
</code></pre></div>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<p dir="auto">Create a object model that can be represented as MsgPack. Here we are creating a dictionary, but really it can be anything:</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='MPackMap dictionary = new MPackMap
{
    {
        "array1", MPack.From(new[]
        {
            "array1_value1",  // implicitly converted string
            MPack.From("array1_value2"),
            MPack.FromString("array1_value3"),
        })
    },
    {"bool1", MPack.From(true)}, //boolean
    {"double1", MPack.From(50.5)}, //single-precision float
    {"double2", MPack.From(15.2)},
    {"int1", 50505}, // implicitly converted integer
    {"int2", MPack.From(50)} // integer
};'><pre><span class="pl-en">MPackMap</span> <span class="pl-en">dictionary</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">MPackMap</span>
{
    {
        <span class="pl-s"><span class="pl-pds">"</span>array1<span class="pl-pds">"</span></span>, <span class="pl-smi">MPack</span>.<span class="pl-en">From</span>(<span class="pl-k">new</span>[]
        {
            <span class="pl-s"><span class="pl-pds">"</span>array1_value1<span class="pl-pds">"</span></span>,  <span class="pl-c"><span class="pl-c">//</span> implicitly converted string</span>
            <span class="pl-smi">MPack</span>.<span class="pl-en">From</span>(<span class="pl-s"><span class="pl-pds">"</span>array1_value2<span class="pl-pds">"</span></span>),
            <span class="pl-smi">MPack</span>.<span class="pl-en">FromString</span>(<span class="pl-s"><span class="pl-pds">"</span>array1_value3<span class="pl-pds">"</span></span>),
        })
    },
    {<span class="pl-s"><span class="pl-pds">"</span>bool1<span class="pl-pds">"</span></span>, <span class="pl-smi">MPack</span>.<span class="pl-en">From</span>(<span class="pl-c1">true</span>)}, <span class="pl-c"><span class="pl-c">//</span>boolean</span>
    {<span class="pl-s"><span class="pl-pds">"</span>double1<span class="pl-pds">"</span></span>, <span class="pl-smi">MPack</span>.<span class="pl-en">From</span>(<span class="pl-c1">50</span><span class="pl-c1">.</span><span class="pl-c1">5</span>)}, <span class="pl-c"><span class="pl-c">//</span>single-precision float</span>
    {<span class="pl-s"><span class="pl-pds">"</span>double2<span class="pl-pds">"</span></span>, <span class="pl-smi">MPack</span>.<span class="pl-en">From</span>(<span class="pl-c1">15</span><span class="pl-c1">.</span><span class="pl-c1">2</span>)},
    {<span class="pl-s"><span class="pl-pds">"</span>int1<span class="pl-pds">"</span></span>, <span class="pl-c1">50505</span>}, <span class="pl-c"><span class="pl-c">//</span> implicitly converted integer</span>
    {<span class="pl-s"><span class="pl-pds">"</span>int2<span class="pl-pds">"</span></span>, <span class="pl-smi">MPack</span>.<span class="pl-en">From</span>(<span class="pl-c1">50</span>)} <span class="pl-c"><span class="pl-c">//</span> integer</span>
};</pre></div>
<p dir="auto">Serialize the data to a byte array or to a stream to be saved, transmitted, etc:</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="byte[] encodedBytes = dictionary.EncodeToBytes();
// -- or --
dictionary.EncodeToStream(stream);"><pre><span class="pl-k">byte</span>[] <span class="pl-en">encodedBytes</span> <span class="pl-k">=</span> <span class="pl-smi">dictionary</span>.<span class="pl-en">EncodeToBytes</span>();
<span class="pl-c"><span class="pl-c">//</span> -- or --</span>
<span class="pl-smi">dictionary</span>.<span class="pl-en">EncodeToStream</span>(<span class="pl-smi">stream</span>);</pre></div>
<p dir="auto">Parse the binary data back into a MPack object model (you can also cast back to an MPackMap or MPackArray after reading if you want dictionary/array methods):</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="var reconstructed = MPack.ParseFromBytes(encodedBytes);
// -- or --
var reconstructed = MPack.ParseFromStream(stream);"><pre><span class="pl-k">var</span> <span class="pl-en">reconstructed</span> <span class="pl-k">=</span> <span class="pl-smi">MPack</span>.<span class="pl-en">ParseFromBytes</span>(<span class="pl-smi">encodedBytes</span>);
<span class="pl-c"><span class="pl-c">//</span> -- or --</span>
<span class="pl-k">var</span> <span class="pl-en">reconstructed</span> <span class="pl-k">=</span> <span class="pl-smi">MPack</span>.<span class="pl-en">ParseFromStream</span>(<span class="pl-smi">stream</span>);</pre></div>
<p dir="auto">Turn MPack objects back into types that we understand with the generic <code>To&lt;&gt;()</code> method. Since we know the types of everything here we can just call <code>To&lt;bool&gt;()</code> to reconstruct our bool, but if you don't know you can access the instance enum <code>MPack.ValueType</code> to know what kind of value it is:</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='bool bool1 = reconstructed["bool1"].To&lt;bool&gt;();
var array1 = reconstructed["array1"] as MPackArray;
var array1_value1 = array1[0];
double double1 = reconstructed["double1"].To&lt;double&gt;();
//etc...'><pre><span class="pl-k">bool</span> <span class="pl-en">bool1</span> <span class="pl-k">=</span> <span class="pl-smi">reconstructed</span>[<span class="pl-s"><span class="pl-pds">"</span>bool1<span class="pl-pds">"</span></span>].<span class="pl-en">To</span>&lt;<span class="pl-k">bool</span>&gt;();
<span class="pl-k">var</span> <span class="pl-en">array1</span> <span class="pl-k">=</span> <span class="pl-smi">reconstructed</span>[<span class="pl-s"><span class="pl-pds">"</span>array1<span class="pl-pds">"</span></span>] <span class="pl-k">as</span> <span class="pl-en">MPackArray</span>;
<span class="pl-k">var</span> <span class="pl-en">array1_value1</span> <span class="pl-k">=</span> <span class="pl-smi">array1</span>[<span class="pl-c1">0</span>];
<span class="pl-k">double</span> <span class="pl-en">double1</span> <span class="pl-k">=</span> <span class="pl-smi">reconstructed</span>[<span class="pl-s"><span class="pl-pds">"</span>double1<span class="pl-pds">"</span></span>].<span class="pl-en">To</span>&lt;<span class="pl-k">double</span>&gt;();
<span class="pl-c"><span class="pl-c">//</span>etc...</span></pre></div>
<h6 dir="auto">
<a id="user-content-credits" class="anchor" aria-hidden="true" href="#credits"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Credits</h6>
<p dir="auto">The following people/projects have made this possible:</p>
<ol start="0" dir="auto">
<li>Me: [caelantsayler]at[gmail]dot[com]</li>
<li>All of the people that make MessagePack happen: <a href="https://github.com/msgpack">https://github.com/msgpack</a>
</li>
</ol>
</article>
  </div>
        </div>
        
        <div id="qs-mlsomers-LsMsgPack" class="qs"><h4><a href="http://www.infotopie.nl/open-source/msgpack-explorer" target="_blank">mlsomers/LsMsgPack <span class="qs-url">http://www.infotopie.nl/open-source/msgpack-explorer</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-lsmsgpack" class="anchor" aria-hidden="true" href="#lsmsgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>LsMsgPack</h5>
<p dir="auto">MsgPack debugging and validation tool also usable as Fiddler plugin</p>
<p dir="auto">More info about this application (and screenshots) can be found at:
<a href="http://www.infotopie.nl/open-source/msgpack-explorer" rel="nofollow">http://www.infotopie.nl/open-source/msgpack-explorer</a></p>
<h6 dir="auto">
<a id="user-content-library-usage-example" class="anchor" aria-hidden="true" href="#library-usage-example"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Library Usage Example</h6>
<p dir="auto">Although the original was optimised for debugging and analysing, a lightweight version of the lib is included which does not keep track of all offsets and other overhead needed for debugging. It can be used in your code.</p>
<p dir="auto">Add LsMsgPackL.dll as a reference.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='public class MyClass
{
    public string Name { get; set; }
    public int Quantity { get; set; }
    public List&lt;object&gt; Anything { get; set; }
}

public void Test()
{
    MyClass message = new MyClass()
    {
        Name = "Test message",
        Quantity = 100,
        Anything = new List&lt;object&gt;(new object[] { "first", 2, false, null, 4.2d, "last" })
    };
    
    // Serialize
    byte[] buffer = MsgPackSerializer.Serialize(message);
    
    // Deserialize
    MyClass returnMsg = MsgPackSerializer.Deserialize&lt;MyClass&gt;(buffer);
}'><pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MyClass</span>
{
    <span class="pl-k">public</span> <span class="pl-k">string</span> <span class="pl-en">Name</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }
    <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">Quantity</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }
    <span class="pl-k">public</span> <span class="pl-en">List</span>&lt;<span class="pl-k">object</span>&gt; <span class="pl-en">Anything</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }
}

<span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">Test</span>()
{
    <span class="pl-en">MyClass</span> <span class="pl-en">message</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">MyClass</span>()
    {
        <span class="pl-smi">Name</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Test message<span class="pl-pds">"</span></span>,
        <span class="pl-smi">Quantity</span> <span class="pl-k">=</span> <span class="pl-c1">100</span>,
        <span class="pl-smi">Anything</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">List</span>&lt;<span class="pl-k">object</span>&gt;(<span class="pl-k">new</span> <span class="pl-k">object</span>[] { <span class="pl-s"><span class="pl-pds">"</span>first<span class="pl-pds">"</span></span>, <span class="pl-c1">2</span>, <span class="pl-c1">false</span>, <span class="pl-c1">null</span>, <span class="pl-c1">4</span><span class="pl-c1">.</span><span class="pl-c1">2</span><span class="pl-c1">d</span>, <span class="pl-s"><span class="pl-pds">"</span>last<span class="pl-pds">"</span></span> })
    };
    
    <span class="pl-c"><span class="pl-c">//</span> Serialize</span>
    <span class="pl-k">byte</span>[] <span class="pl-en">buffer</span> <span class="pl-k">=</span> <span class="pl-smi">MsgPackSerializer</span>.<span class="pl-en">Serialize</span>(<span class="pl-smi">message</span>);
    
    <span class="pl-c"><span class="pl-c">//</span> Deserialize</span>
    <span class="pl-en">MyClass</span> <span class="pl-en">returnMsg</span> <span class="pl-k">=</span> <span class="pl-smi">MsgPackSerializer</span>.<span class="pl-en">Deserialize</span>&lt;<span class="pl-en">MyClass</span>&gt;(<span class="pl-smi">buffer</span>);
}</pre></div>
<p dir="auto">I have never run any benchmarks so I have no idea how it will perform against other implementations.</p>
<h6 dir="auto">
<a id="user-content-fiddler-integration" class="anchor" aria-hidden="true" href="#fiddler-integration"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Fiddler Integration</h6>
<p dir="auto">In order to use this tool as a Fiddler plugin, copy the following files to the Fiddler Inspectors directory (usually C:\Program Files\Fiddler2\Inspectors):</p>
<ul dir="auto">
<li>MsgPackExplorer.exe</li>
<li>LsMsgPackFiddlerInspector.dll</li>
<li>LsMsgPack.dll</li>
</ul>
<p dir="auto">Restart fiddler and you should see a MsgPack option in the Inspectors list.</p>
<h6 dir="auto">
<a id="user-content-source-documentation" class="anchor" aria-hidden="true" href="#source-documentation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Source documentation</h6>
<h7 dir="auto">
<a id="user-content-modules" class="anchor" aria-hidden="true" href="#modules"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Modules</h7>
<h8 dir="auto">
<a id="user-content-lsmsgpackdll" class="anchor" aria-hidden="true" href="#lsmsgpackdll"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>LsMsgPack.dll</h8>
<p dir="auto">This module contains the "parser" and generator of MsgPack Packages. It breaks down the binary file into a hirarchical structure, keeping track of offsets and errors. And it can also be used to generate MsgPack files.</p>
<h8 dir="auto">
<a id="user-content-msgpackexplorerexe" class="anchor" aria-hidden="true" href="#msgpackexplorerexe"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MsgPackExplorer.exe</h8>
<p dir="auto">The main winforms executable, containing a MsgPackExplorer UserControl (so it can easily be integrated into other tools such as Fiddler).</p>
<h8 dir="auto">
<a id="user-content-lsmsgpackfiddlerinspectordll" class="anchor" aria-hidden="true" href="#lsmsgpackfiddlerinspectordll"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>LsMsgPackFiddlerInspector.dll</h8>
<p dir="auto">A tiny wrapper enabling the use of MsgPack Explorer as a Fiddler Inspector.</p>
<h8 dir="auto">
<a id="user-content-lsmsgpackunittestsdll" class="anchor" aria-hidden="true" href="#lsmsgpackunittestsdll"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>LsMsgPackUnitTests.dll</h8>
<p dir="auto">Some unit tests on the core LsMsgPack.dll. No full coverage yet, but at least it's a start.</p>
<h8 dir="auto">
<a id="user-content-lsmsgpackldll--lightunittestsdll" class="anchor" aria-hidden="true" href="#lsmsgpackldll--lightunittestsdll"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>LsMsgPackL.dll &amp; LightUnitTests.dll</h8>
<p dir="auto">A light version of the "parser". The parsing and generating methods are almost identical to the LsMsgPack lib, but with allot of overhead removed that comes with keeping track of offsets, original types and other debugging info. I'm planning to use this version in my projects that use the MsgPack format.
The LightUnitTests are the same as LsMsgPackUnitTests with some tests omitted.</p>
</article>
  </div>
        </div>
        
        <div id="qs-neuecc-MessagePack-CSharp" class="qs"><h4><a href="https://github.com/neuecc/MessagePack-CSharp" target="_blank">neuecc/MessagePack-CSharp <span class="qs-url">https://github.com/neuecc/MessagePack-CSharp</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack-for-c-net-net-core-unity-xamarin" class="anchor" aria-hidden="true" href="#messagepack-for-c-net-net-core-unity-xamarin"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack for C# (.NET, .NET Core, Unity, Xamarin)</h5>
<p dir="auto"><a href="https://www.nuget.org/packages/messagepack" rel="nofollow"><img src="https://camo.githubusercontent.com/1c23b2be0af974240454f6c0f3d73c0708153ee89fdd1ccad72769e7101f34e9/68747470733a2f2f696d672e736869656c64732e696f2f6e756765742f762f4d6573736167655061636b2e737667" alt="NuGet" data-canonical-src="https://img.shields.io/nuget/v/MessagePack.svg" style="max-width: 100%;"></a>
<a href="https://www.nuget.org/packages/messagepack" rel="nofollow"><img src="https://camo.githubusercontent.com/2786a378b266636d02024525d7622f1e8ad1047700aa2cf9fe37504e0f7ad7b2/68747470733a2f2f696d672e736869656c64732e696f2f6e756765742f767072652f4d6573736167655061636b2e737667" alt="NuGet" data-canonical-src="https://img.shields.io/nuget/vpre/MessagePack.svg" style="max-width: 100%;"></a>
<a href="https://github.com/neuecc/MessagePack-CSharp/releases"><img src="https://camo.githubusercontent.com/f13073faf2f1060237fa58c7e520574b59718381960e3259b004d54c1a40d25c/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f72656c656173652f6e65756563632f4d6573736167655061636b2d4353686172702e737667" alt="Releases" data-canonical-src="https://img.shields.io/github/release/neuecc/MessagePack-CSharp.svg" style="max-width: 100%;"></a></p>
<p dir="auto"><a href="https://gitter.im/MessagePack-CSharp/Lobby?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" rel="nofollow"><img src="https://camo.githubusercontent.com/3eee9a2b0fc8f28042e9a3767aa94d0c447b603963aefda78479c2c075126895/68747470733a2f2f6261646765732e6769747465722e696d2f4d6573736167655061636b2d4353686172702f4c6f6262792e737667" alt="Join the chat at https://gitter.im/MessagePack-CSharp/Lobby" data-canonical-src="https://badges.gitter.im/MessagePack-CSharp/Lobby.svg" style="max-width: 100%;"></a>
<a href="https://dev.azure.com/ils0086/MessagePack-CSharp/_build/latest?definitionId=2&amp;branchName=master" rel="nofollow"><img src="https://camo.githubusercontent.com/1f2c4fbbd9171a947757dcf04b95bd3724b6c74d791882ad6cf4141078a03a8e/68747470733a2f2f6465762e617a7572652e636f6d2f696c73303038362f4d6573736167655061636b2d4353686172702f5f617069732f6275696c642f7374617475732f4d6573736167655061636b2d4353686172702d43493f6272616e63684e616d653d6d6173746572" alt="Build Status" data-canonical-src="https://dev.azure.com/ils0086/MessagePack-CSharp/_apis/build/status/MessagePack-CSharp-CI?branchName=master" style="max-width: 100%;"></a></p>
<p dir="auto">The extremely fast <a href="http://msgpack.org/" rel="nofollow">MessagePack</a> serializer for C#.
It is 10x faster than <a href="https://github.com/msgpack/msgpack-cli">MsgPack-Cli</a> and outperforms other C# serializers. MessagePack for C# also ships with built-in support for LZ4 compression - an extremely fast compression algorithm. Performance is important, particularly in applications like games, distributed computing, microservices, or data caches.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/46207/23835716/89c8ab08-07af-11e7-9183-9e9415bdc87f.png"><img src="https://cloud.githubusercontent.com/assets/46207/23835716/89c8ab08-07af-11e7-9183-9e9415bdc87f.png" alt="Perf comparison graph" style="max-width: 100%;"></a></p>
<p dir="auto">MessagePack has a compact binary size and a full set of general purpose expressive data types. Please have a look at the <a href="#comparison">comparison with JSON, protobuf, ZeroFormatter section</a> and learn <a href="#performance">why MessagePack C# is the fastest</a>.</p>
<h6 dir="auto">
<a id="user-content-table-of-contents" class="anchor" aria-hidden="true" href="#table-of-contents"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Table of Contents</h6>
<ul dir="auto">
<li>
<a href="#installation">Installation</a>
<ul dir="auto">
<li><a href="#nuget-packages">NuGet packages</a></li>
<li><a href="#unity">Unity</a></li>
<li><a href="#migration-notes-from-v1x">Migration notes from v1.x</a></li>
</ul>
</li>
<li><a href="#quick-start">Quick Start</a></li>
<li><a href="#analyzer">Analyzer</a></li>
<li><a href="#built-in-supported-types">Built-in supported types</a></li>
<li><a href="#object-serialization">Object Serialization</a></li>
<li><a href="#datacontract-compatibility">DataContract compatibility</a></li>
<li><a href="#serializing-readonlyimmutable-object-members--serializationconstructor">Serializing readonly/immutable object members  (SerializationConstructor)</a></li>
<li><a href="#serialization-callback">Serialization Callback</a></li>
<li><a href="#union">Union</a></li>
<li><a href="#dynamic-untyped-deserialization">Dynamic (Untyped) Deserialization</a></li>
<li><a href="#object-type-serialization">Object Type Serialization</a></li>
<li><a href="#typeless">Typeless</a></li>
<li><a href="#security">Security</a></li>
<li>
<a href="#performance">Performance</a>
<ul dir="auto">
<li><a href="#deserialization-performance-for-different-options">Deserialization Performance for different options</a></li>
</ul>
</li>
<li>
<a href="#lz4-compression">LZ4 Compression</a>
<ul dir="auto">
<li><a href="#attributions">Attributions</a></li>
</ul>
</li>
<li><a href="#comparison-with-protobuf-json-zeroformatter">Comparison with protobuf, JSON, ZeroFormatter</a></li>
<li>
<a href="#hints-to-achieve-maximum-performance-when-using-messagepack-for-c">Hints to achieve maximum performance when using MessagePack for C#</a>
<ul dir="auto">
<li><a href="#use-indexed-keys-instead-of-string-keys-contractless">Use indexed keys instead of string keys (Contractless)</a></li>
<li><a href="#create-own-custom-composite-resolver">Create own custom composite resolver</a></li>
<li><a href="#use-native-resolvers">Use native resolvers</a></li>
<li><a href="#be-careful-when-copying-buffers">Be careful when copying buffers</a></li>
<li><a href="#choosing-compression">Choosing compression</a></li>
</ul>
</li>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#experimental-features">Experimental Features</a></li>
<li>
<a href="#high-level-api-messagepackserializer">High-Level API (<code>MessagePackSerializer</code>)</a>
<ul dir="auto">
<li><a href="#multiple-messagepack-structures-on-a-single-stream">Multiple MessagePack structures on a single <code>Stream</code></a></li>
</ul>
</li>
<li><a href="#low-level-api-imessagepackformattert">Low-Level API (<code>IMessagePackFormatter&lt;T&gt;</code>)</a></li>
<li>
<a href="#primitive-api-messagepackwriter-messagepackreader">Primitive API (<code>MessagePackWriter</code>, <code>MessagePackReader</code>)</a>
<ul dir="auto">
<li><a href="#messagepackreader"><code>MessagePackReader</code></a></li>
<li><a href="#messagepackwriter"><code>MessagePackWriter</code></a></li>
</ul>
</li>
<li><a href="#main-extension-point-iformatterresolver">Main Extension Point (<code>IFormatterResolver</code>)</a></li>
<li><a href="#messagepackformatterattribute">MessagePackFormatterAttribute</a></li>
<li><a href="#ignoreformatter">IgnoreFormatter</a></li>
<li><a href="#reserved-extension-types">Reserved Extension Types</a></li>
<li><a href="#unity-support">Unity support</a></li>
<li><a href="#aot-code-generation-support-for-unityxamarin">AOT Code Generation (support for Unity/Xamarin)</a></li>
<li>
<a href="#rpc">RPC</a>
<ul dir="auto">
<li><a href="#magiconion">MagicOnion</a></li>
<li><a href="#streamjsonrpc">StreamJsonRpc</a></li>
</ul>
</li>
<li><a href="#how-to-build">How to build</a></li>
<li><a href="#author-info">Author Info</a></li>
</ul>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<p dir="auto">This library is distributed via NuGet. Special <a href="#unity">Unity support</a> is available, too.</p>
<p dir="auto">We target .NET Standard 2.0 with special optimizations for .NET Core 2.1+, making it compatible with most reasonably recent .NET runtimes such as Core 2.0 and later, Framework 4.6.1 and later, Mono 5.4 and later and Unity 2018.3 and later.
The library code is pure C# (with Just-In-Time IL code generation on some platforms).</p>
<h7 dir="auto">
<a id="user-content-nuget-packages" class="anchor" aria-hidden="true" href="#nuget-packages"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>NuGet packages</h7>
<p dir="auto">To install with NuGet, just install the <code>MessagePack</code> package:</p>
<div class="highlight highlight-source-powershell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Install-Package MessagePack"><pre><span class="pl-c1">Install-Package</span> MessagePack</pre></div>
<p dir="auto">Install the optional C# <a href="/neuecc/MessagePack-CSharp/blob/master/doc/analyzers/index.md">analyzers</a> package to get warnings about coding mistakes and automatic fix suggestions to save you time:</p>
<div class="highlight highlight-source-powershell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Install-Package MessagePackAnalyzer"><pre><span class="pl-c1">Install-Package</span> MessagePackAnalyzer</pre></div>
<p dir="auto">There are also a range of official and third party Extension Packages available (learn more in our <a href="#extensions">extensions section</a>):</p>
<div class="highlight highlight-source-powershell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Install-Package MessagePack.ReactiveProperty
Install-Package MessagePack.UnityShims
Install-Package MessagePack.AspNetCoreMvcFormatter"><pre><span class="pl-c1">Install-Package</span> MessagePack.ReactiveProperty
<span class="pl-c1">Install-Package</span> MessagePack.UnityShims
<span class="pl-c1">Install-Package</span> MessagePack.AspNetCoreMvcFormatter</pre></div>
<h7 dir="auto">
<a id="user-content-unity" class="anchor" aria-hidden="true" href="#unity"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Unity</h7>
<p dir="auto">For Unity projects, the <a href="https://github.com/neuecc/MessagePack-CSharp/releases">releases</a> page provides downloadable <code>.unitypackage</code> files. When using in Unity IL2CPP or Xamarin AOT environments, please carefully read the <a href="#aot">pre-code generation section</a>.</p>
<h7 dir="auto">
<a id="user-content-migration-notes-from-v1x" class="anchor" aria-hidden="true" href="#migration-notes-from-v1x"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Migration notes from v1.x</h7>
<p dir="auto">If you were using MessagePack for C# v1.x, check out the <a href="/neuecc/MessagePack-CSharp/blob/master/doc/migration.md">"How to update to our new v2.x version"</a> document.</p>
<h6 dir="auto">
<a id="user-content-quick-start" class="anchor" aria-hidden="true" href="#quick-start"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Quick Start</h6>
<p dir="auto">Define the struct or class to be serialized and annotate it with a <code>[MessagePackObject]</code> attribute.
Annotate members whose values should be serialized (fields as well as properties) with <code>[Key]</code> attributes.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="[MessagePackObject]
public class MyClass
{
    // Key attributes take a serialization index (or string name)
    // The values must be unique and versioning has to be considered as well.
    // Keys are described in later sections in more detail.
    [Key(0)]
    public int Age { get; set; }

    [Key(1)]
    public string FirstName { get; set; }

    [Key(2)]
    public string LastName { get; set; }

    // All fields or properties that should not be serialized must be annotated with [IgnoreMember].
    [IgnoreMember]
    public string FullName { get { return FirstName + LastName; } }
}"><pre>[<span class="pl-en">MessagePackObject</span>]
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MyClass</span>
{
    <span class="pl-c"><span class="pl-c">//</span> Key attributes take a serialization index (or string name)</span>
    <span class="pl-c"><span class="pl-c">//</span> The values must be unique and versioning has to be considered as well.</span>
    <span class="pl-c"><span class="pl-c">//</span> Keys are described in later sections in more detail.</span>
    [<span class="pl-en">Key</span>(<span class="pl-c1">0</span>)]
    <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">Age</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }

    [<span class="pl-en">Key</span>(<span class="pl-c1">1</span>)]
    <span class="pl-k">public</span> <span class="pl-k">string</span> <span class="pl-en">FirstName</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }

    [<span class="pl-en">Key</span>(<span class="pl-c1">2</span>)]
    <span class="pl-k">public</span> <span class="pl-k">string</span> <span class="pl-en">LastName</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }

    <span class="pl-c"><span class="pl-c">//</span> All fields or properties that should not be serialized must be annotated with [IgnoreMember].</span>
    [<span class="pl-en">IgnoreMember</span>]
    <span class="pl-k">public</span> <span class="pl-k">string</span> <span class="pl-en">FullName</span> { <span class="pl-k">get</span> { <span class="pl-k">return</span> <span class="pl-smi">FirstName</span> <span class="pl-k">+</span> <span class="pl-smi">LastName</span>; } }
}</pre></div>
<p dir="auto">Call <code>MessagePackSerializer.Serialize&lt;T&gt;/Deserialize&lt;T&gt;</code> to serialize/deserialize your object instance.
You can use the <code>ConvertToJson</code> method to get a human readable representation of any MessagePack binary blob.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="class Program
{
    static void Main(string[] args)
    {
        var mc = new MyClass
        {
            Age = 99,
            FirstName = &quot;hoge&quot;,
            LastName = &quot;huga&quot;,
        };

        // Call Serialize/Deserialize, that's all.
        byte[] bytes = MessagePackSerializer.Serialize(mc);
        MyClass mc2 = MessagePackSerializer.Deserialize&lt;MyClass&gt;(bytes);

        // You can dump MessagePack binary blobs to human readable json.
        // Using indexed keys (as opposed to string keys) will serialize to MessagePack arrays,
        // hence property names are not available.
        // [99,&quot;hoge&quot;,&quot;huga&quot;]
        var json = MessagePackSerializer.ConvertToJson(bytes);
        Console.WriteLine(json);
    }
}"><pre><span class="pl-k">class</span> <span class="pl-en">Program</span>
{
    <span class="pl-k">static</span> <span class="pl-k">void</span> <span class="pl-en">Main</span>(<span class="pl-k">string</span>[] <span class="pl-en">args</span>)
    {
        <span class="pl-k">var</span> <span class="pl-en">mc</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">MyClass</span>
        {
            <span class="pl-smi">Age</span> <span class="pl-k">=</span> <span class="pl-c1">99</span>,
            <span class="pl-smi">FirstName</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>hoge<span class="pl-pds">"</span></span>,
            <span class="pl-smi">LastName</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>huga<span class="pl-pds">"</span></span>,
        };

        <span class="pl-c"><span class="pl-c">//</span> Call Serialize/Deserialize, that's all.</span>
        <span class="pl-k">byte</span>[] <span class="pl-en">bytes</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">Serialize</span>(<span class="pl-smi">mc</span>);
        <span class="pl-en">MyClass</span> <span class="pl-en">mc2</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">Deserialize</span>&lt;<span class="pl-en">MyClass</span>&gt;(<span class="pl-smi">bytes</span>);

        <span class="pl-c"><span class="pl-c">//</span> You can dump MessagePack binary blobs to human readable json.</span>
        <span class="pl-c"><span class="pl-c">//</span> Using indexed keys (as opposed to string keys) will serialize to MessagePack arrays,</span>
        <span class="pl-c"><span class="pl-c">//</span> hence property names are not available.</span>
        <span class="pl-c"><span class="pl-c">//</span> [99,"hoge","huga"]</span>
        <span class="pl-k">var</span> <span class="pl-en">json</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">ConvertToJson</span>(<span class="pl-smi">bytes</span>);
        <span class="pl-smi">Console</span>.<span class="pl-en">WriteLine</span>(<span class="pl-smi">json</span>);
    }
}</pre></div>
<p dir="auto">By default, a <code>MessagePackObject</code> annotation is required. This can be made optional; see the <a href="#object-serialization">Object Serialization section</a> and the <a href="#resolvers">Formatter Resolver section</a> for details.</p>
<h6 dir="auto">
<a id="user-content-analyzer" class="anchor" aria-hidden="true" href="#analyzer"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Analyzer</h6>
<p dir="auto">The MessagePackAnalyzer package aids with:</p>
<ol dir="auto">
<li>Automating definitions for your serializable objects.</li>
<li>Produces compiler warnings upon incorrect attribute use, member accessibility, and more.</li>
</ol>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/46207/23837445/ce734eae-07cb-11e7-9758-d69f0f095bc1.gif"><img src="https://cloud.githubusercontent.com/assets/46207/23837445/ce734eae-07cb-11e7-9758-d69f0f095bc1.gif" alt="analyzergif" data-animated-image="" style="max-width: 100%;"></a></p>
<p dir="auto">If you want to allow a specific custom type (for example, when registering a custom type), put <code>MessagePackAnalyzer.json</code> at the project root and change the Build Action to <code>AdditionalFiles</code>.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/46207/23837427/8a8d507c-07cb-11e7-9277-5a566eb0bfde.png"><img src="https://cloud.githubusercontent.com/assets/46207/23837427/8a8d507c-07cb-11e7-9277-5a566eb0bfde.png" alt="image" style="max-width: 100%;"></a></p>
<p dir="auto">An example <code>MessagePackAnalyzer.json</code>:</p>
<div class="highlight highlight-source-json notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='[ "MyNamespace.FooClass", "MyNameSpace.BarStruct" ]'><pre>[ <span class="pl-s"><span class="pl-pds">"</span>MyNamespace.FooClass<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>MyNameSpace.BarStruct<span class="pl-pds">"</span> </span>]</pre></div>
<h6 dir="auto">
<a id="user-content-built-in-supported-types" class="anchor" aria-hidden="true" href="#built-in-supported-types"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Built-in supported types</h6>
<p dir="auto">These types can serialize by default:</p>
<ul dir="auto">
<li>Primitives (<code>int</code>, <code>string</code>, etc...), <code>Enum</code>s, <code>Nullable&lt;&gt;</code>, <code>Lazy&lt;&gt;</code>
</li>
<li>
<code>TimeSpan</code>,  <code>DateTime</code>, <code>DateTimeOffset</code>
</li>
<li>
<code>Guid</code>, <code>Uri</code>, <code>Version</code>, <code>StringBuilder</code>
</li>
<li>
<code>BigInteger</code>, <code>Complex</code>, <code>Half</code>
</li>
<li>
<code>Array[]</code>, <code>Array[,]</code>, <code>Array[,,]</code>, <code>Array[,,,]</code>, <code>ArraySegment&lt;&gt;</code>, <code>BitArray</code>
</li>
<li>
<code>KeyValuePair&lt;,&gt;</code>, <code>Tuple&lt;,...&gt;</code>, <code>ValueTuple&lt;,...&gt;</code>
</li>
<li>
<code>ArrayList</code>, <code>Hashtable</code>
</li>
<li>
<code>List&lt;&gt;</code>, <code>LinkedList&lt;&gt;</code>, <code>Queue&lt;&gt;</code>, <code>Stack&lt;&gt;</code>, <code>HashSet&lt;&gt;</code>, <code>ReadOnlyCollection&lt;&gt;</code>, <code>SortedList&lt;,&gt;</code>
</li>
<li>
<code>IList&lt;&gt;</code>, <code>ICollection&lt;&gt;</code>, <code>IEnumerable&lt;&gt;</code>, <code>IReadOnlyCollection&lt;&gt;</code>, <code>IReadOnlyList&lt;&gt;</code>
</li>
<li>
<code>Dictionary&lt;,&gt;</code>, <code>IDictionary&lt;,&gt;</code>, <code>SortedDictionary&lt;,&gt;</code>, <code>ILookup&lt;,&gt;</code>, <code>IGrouping&lt;,&gt;</code>, <code>ReadOnlyDictionary&lt;,&gt;</code>, <code>IReadOnlyDictionary&lt;,&gt;</code>
</li>
<li>
<code>ObservableCollection&lt;&gt;</code>, <code>ReadOnlyObservableCollection&lt;&gt;</code>
</li>
<li>
<code>ISet&lt;&gt;</code>,</li>
<li>
<code>ConcurrentBag&lt;&gt;</code>, <code>ConcurrentQueue&lt;&gt;</code>, <code>ConcurrentStack&lt;&gt;</code>, <code>ConcurrentDictionary&lt;,&gt;</code>
</li>
<li>Immutable collections (<code>ImmutableList&lt;&gt;</code>, etc)</li>
<li>Custom implementations of <code>ICollection&lt;&gt;</code> or <code>IDictionary&lt;,&gt;</code> with a parameterless constructor</li>
<li>Custom implementations of <code>IList</code> or <code>IDictionary</code> with a parameterless constructor</li>
</ul>
<p dir="auto">You can add support for custom types, and there are some official/third-party extension packages for:</p>
<ul dir="auto">
<li>ReactiveProperty</li>
<li>for Unity (<code>Vector3</code>, <code>Quaternion</code>, etc...)</li>
<li>F# (Record, FsList, Discriminated Unions, etc...)</li>
</ul>
<p dir="auto">Please see the <a href="#extensions">extensions section</a>.</p>
<p dir="auto"><code>MessagePack.Nil</code> is the built-in type representing null/void in MessagePack for C#.</p>
<h6 dir="auto">
<a id="user-content-object-serialization" class="anchor" aria-hidden="true" href="#object-serialization"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Object Serialization</h6>
<p dir="auto">MessagePack for C# can serialize your own public <code>class</code> or <code>struct</code> types. By default, serializable types must be annotated with the <code>[MessagePackObject]</code> attribute and members with the <code>[Key]</code> attribute. Keys can be either indexes (<code>int</code>) or arbitrary strings. If all keys are indexes, arrays are used for serialization, which offers advantages in performance and binary size. Otherwise, MessagePack maps (dictionaries) will be used.</p>
<p dir="auto">If you use <code>[MessagePackObject(keyAsPropertyName: true)]</code>, then members do not require explicit <code>Key</code> attributes, but string keys will be used.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='[MessagePackObject]
public class Sample1
{
    [Key(0)]
    public int Foo { get; set; }
    [Key(1)]
    public int Bar { get; set; }
}

[MessagePackObject]
public class Sample2
{
    [Key("foo")]
    public int Foo { get; set; }
    [Key("bar")]
    public int Bar { get; set; }
}

[MessagePackObject(keyAsPropertyName: true)]
public class Sample3
{
    // No need for a Key attribute
    public int Foo { get; set; }

    // If want to ignore a public member, you can use the  IgnoreMember attribute
    [IgnoreMember]
    public int Bar { get; set; }
}

// [10,20]
Console.WriteLine(MessagePackSerializer.SerializeToJson(new Sample1 { Foo = 10, Bar = 20 }));

// {"foo":10,"bar":20}
Console.WriteLine(MessagePackSerializer.SerializeToJson(new Sample2 { Foo = 10, Bar = 20 }));

// {"Foo":10}
Console.WriteLine(MessagePackSerializer.SerializeToJson(new Sample3 { Foo = 10, Bar = 20 }));'><pre>[<span class="pl-en">MessagePackObject</span>]
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">Sample1</span>
{
    [<span class="pl-en">Key</span>(<span class="pl-c1">0</span>)]
    <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">Foo</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }
    [<span class="pl-en">Key</span>(<span class="pl-c1">1</span>)]
    <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">Bar</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }
}

[<span class="pl-en">MessagePackObject</span>]
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">Sample2</span>
{
    [<span class="pl-en">Key</span>(<span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span>)]
    <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">Foo</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }
    [<span class="pl-en">Key</span>(<span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span>)]
    <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">Bar</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }
}

[<span class="pl-en">MessagePackObject</span>(<span class="pl-smi">keyAsPropertyName</span>: <span class="pl-c1">true</span>)]
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">Sample3</span>
{
    <span class="pl-c"><span class="pl-c">//</span> No need for a Key attribute</span>
    <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">Foo</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }

    <span class="pl-c"><span class="pl-c">//</span> If want to ignore a public member, you can use the  IgnoreMember attribute</span>
    [<span class="pl-en">IgnoreMember</span>]
    <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">Bar</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }
}

<span class="pl-c"><span class="pl-c">//</span> [10,20]</span>
<span class="pl-smi">Console</span>.<span class="pl-en">WriteLine</span>(<span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">SerializeToJson</span>(<span class="pl-k">new</span> <span class="pl-en">Sample1</span> { <span class="pl-smi">Foo</span> <span class="pl-k">=</span> <span class="pl-c1">10</span>, <span class="pl-smi">Bar</span> <span class="pl-k">=</span> <span class="pl-c1">20</span> }));

<span class="pl-c"><span class="pl-c">//</span> {"foo":10,"bar":20}</span>
<span class="pl-smi">Console</span>.<span class="pl-en">WriteLine</span>(<span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">SerializeToJson</span>(<span class="pl-k">new</span> <span class="pl-en">Sample2</span> { <span class="pl-smi">Foo</span> <span class="pl-k">=</span> <span class="pl-c1">10</span>, <span class="pl-smi">Bar</span> <span class="pl-k">=</span> <span class="pl-c1">20</span> }));

<span class="pl-c"><span class="pl-c">//</span> {"Foo":10}</span>
<span class="pl-smi">Console</span>.<span class="pl-en">WriteLine</span>(<span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">SerializeToJson</span>(<span class="pl-k">new</span> <span class="pl-en">Sample3</span> { <span class="pl-smi">Foo</span> <span class="pl-k">=</span> <span class="pl-c1">10</span>, <span class="pl-smi">Bar</span> <span class="pl-k">=</span> <span class="pl-c1">20</span> }));</pre></div>
<p dir="auto">All public instance members (fields as well as properties) will be serialized. If you want to ignore certain public members, annotate the member with a <code>[IgnoreMember]</code> attribute.</p>
<p dir="auto">Please note that any serializable struct or class must have public accessibility; private and internal structs and classes cannot be serialized!
The default of requiring <code>MessagePackObject</code> annotations is meant to enforce explicitness and therefore may help write more robust code.</p>
<p dir="auto">Should you use an indexed (<code>int</code>) key or a string key?
We recommend using indexed keys for faster serialization and a more compact binary representation than string keys.
However, the additional information in the strings of string keys can be quite useful when debugging.</p>
<p dir="auto">When classes change or are extended, be careful about versioning. <code>MessagePackSerializer</code> will initialize members to their <code>default</code> value if a key does not exist in the serialized binary blob, meaning members using reference types can be initialized to <code>null</code>.
If you use indexed (<code>int</code>) keys, the keys should start at 0 and should be sequential. If a later version stops using certain members, you should keep the obsolete members (C# provides an <code>Obsolete</code> attribute to annotate such members) until all other clients had a chance to update and remove their uses of these members as well. Also, when the values of indexed keys "jump" a lot, leaving gaps in the sequence, it will negatively affect the binary size, as <code>null</code> placeholders will be inserted into the resulting arrays. However, you shouldn't reuse indexes of removed members to avoid compatibility issues between clients or when trying to deserialize legacy blobs.</p>
<p dir="auto">Example of index gaps and resulting placeholders:</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="[MessagePackObject]
public class IntKeySample
{
    [Key(3)]
    public int A { get; set; }
    [Key(10)]
    public int B { get; set; }
}

// [null,null,null,0,null,null,null,null,null,null,0]
Console.WriteLine(MessagePackSerializer.SerializeToJson(new IntKeySample()));"><pre>[<span class="pl-en">MessagePackObject</span>]
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">IntKeySample</span>
{
    [<span class="pl-en">Key</span>(<span class="pl-c1">3</span>)]
    <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">A</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }
    [<span class="pl-en">Key</span>(<span class="pl-c1">10</span>)]
    <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">B</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }
}

<span class="pl-c"><span class="pl-c">//</span> [null,null,null,0,null,null,null,null,null,null,0]</span>
<span class="pl-smi">Console</span>.<span class="pl-en">WriteLine</span>(<span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">SerializeToJson</span>(<span class="pl-k">new</span> <span class="pl-en">IntKeySample</span>()));</pre></div>
<p dir="auto">If you do not want to explicitly annotate with the <code>MessagePackObject</code>/<code>Key</code> attributes and instead want to use MessagePack for C# more like e.g. <a href="https://github.com/JamesNK/Newtonsoft.Json">Json.NET</a>, you can make use of the contractless resolver.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='public class ContractlessSample
{
    public int MyProperty1 { get; set; }
    public int MyProperty2 { get; set; }
}

var data = new ContractlessSample { MyProperty1 = 99, MyProperty2 = 9999 };
var bin = MessagePackSerializer.Serialize(
  data,
  MessagePack.Resolvers.ContractlessStandardResolver.Options);

// {"MyProperty1":99,"MyProperty2":9999}
Console.WriteLine(MessagePackSerializer.ConvertToJson(bin));

// You can also set ContractlessStandardResolver as the default.
// (Global state; Not recommended when writing library code)
MessagePackSerializer.DefaultOptions = MessagePack.Resolvers.ContractlessStandardResolver.Options;

// Now serializable...
var bin2 = MessagePackSerializer.Serialize(data);'><pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">ContractlessSample</span>
{
    <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">MyProperty1</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }
    <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">MyProperty2</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }
}

<span class="pl-k">var</span> <span class="pl-en">data</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">ContractlessSample</span> { <span class="pl-smi">MyProperty1</span> <span class="pl-k">=</span> <span class="pl-c1">99</span>, <span class="pl-smi">MyProperty2</span> <span class="pl-k">=</span> <span class="pl-c1">9999</span> };
<span class="pl-k">var</span> <span class="pl-en">bin</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">Serialize</span>(
  <span class="pl-smi">data</span>,
  <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Resolvers</span>.<span class="pl-smi">ContractlessStandardResolver</span>.<span class="pl-smi">Options</span>);

<span class="pl-c"><span class="pl-c">//</span> {"MyProperty1":99,"MyProperty2":9999}</span>
<span class="pl-smi">Console</span>.<span class="pl-en">WriteLine</span>(<span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">ConvertToJson</span>(<span class="pl-smi">bin</span>));

<span class="pl-c"><span class="pl-c">//</span> You can also set ContractlessStandardResolver as the default.</span>
<span class="pl-c"><span class="pl-c">//</span> (Global state; Not recommended when writing library code)</span>
<span class="pl-smi">MessagePackSerializer</span>.<span class="pl-smi">DefaultOptions</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Resolvers</span>.<span class="pl-smi">ContractlessStandardResolver</span>.<span class="pl-smi">Options</span>;

<span class="pl-c"><span class="pl-c">//</span> Now serializable...</span>
<span class="pl-k">var</span> <span class="pl-en">bin2</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">Serialize</span>(<span class="pl-smi">data</span>);</pre></div>
<p dir="auto">If you want to serialize private members as well, you can use one of the <code>*AllowPrivate</code> resolvers.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="[MessagePackObject]
public class PrivateSample
{
    [Key(0)]
    int x;

    public void SetX(int v)
    {
        x = v;
    }

    public int GetX()
    {
        return x;
    }
}

var data = new PrivateSample();
data.SetX(9999);

// You can choose either StandardResolverAllowPrivate
// or ContractlessStandardResolverAllowPrivate
var bin = MessagePackSerializer.Serialize(
  data,
  MessagePack.Resolvers.DynamicObjectResolverAllowPrivate.Options);"><pre>[<span class="pl-en">MessagePackObject</span>]
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">PrivateSample</span>
{
    [<span class="pl-en">Key</span>(<span class="pl-c1">0</span>)]
    <span class="pl-k">int</span> <span class="pl-en">x</span>;

    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">SetX</span>(<span class="pl-k">int</span> <span class="pl-en">v</span>)
    {
        <span class="pl-smi">x</span> <span class="pl-k">=</span> <span class="pl-smi">v</span>;
    }

    <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">GetX</span>()
    {
        <span class="pl-k">return</span> <span class="pl-smi">x</span>;
    }
}

<span class="pl-k">var</span> <span class="pl-en">data</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">PrivateSample</span>();
<span class="pl-smi">data</span>.<span class="pl-en">SetX</span>(<span class="pl-c1">9999</span>);

<span class="pl-c"><span class="pl-c">//</span> You can choose either StandardResolverAllowPrivate</span>
<span class="pl-c"><span class="pl-c">//</span> or ContractlessStandardResolverAllowPrivate</span>
<span class="pl-k">var</span> <span class="pl-en">bin</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">Serialize</span>(
  <span class="pl-smi">data</span>,
  <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Resolvers</span>.<span class="pl-smi">DynamicObjectResolverAllowPrivate</span>.<span class="pl-smi">Options</span>);</pre></div>
<p dir="auto">If you want to use MessagePack for C# more like a BinaryFormatter with a typeless serialization API, use the typeless resolver and helpers. Please consult the <a href="#typeless">Typeless section</a>.</p>
<p dir="auto">Resolvers are the way to add specialized support for custom types to MessagePack for C#. Please refer to the <a href="#resolvers">Extension point section</a>.</p>
<h6 dir="auto">
<a id="user-content-datacontract-compatibility" class="anchor" aria-hidden="true" href="#datacontract-compatibility"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>DataContract compatibility</h6>
<p dir="auto">You can use <code>[DataContract]</code> annotations instead of <code>[MessagePackObject]</code> ones. If type is annotated with <code>DataContract</code>, you can use <code>[DataMember]</code> annotations instead of <code>[Key]</code> ones and <code>[IgnoreDataMember]</code> instead of <code>[IgnoreMember]</code>.</p>
<p dir="auto">Then <code>[DataMember(Order = int)]</code> will behave the same as <code>[Key(int)]</code>, <code>[DataMember(Name = string)]</code> the same as <code>[Key(string)]</code>, and <code>[DataMember]</code> the same as <code>[Key(nameof(member name)]</code>.</p>
<p dir="auto">Using <code>DataContract</code>, e.g. in shared libraries, makes your classes/structs independent from MessagePack for C# serialization. However, it is not supported by the analyzers nor in code generation by the <code>mpc</code> tool. Also, features like <code>UnionAttribute</code>, <code>MessagePackFormatter</code>, <code>SerializationConstructor</code>, etc can not be used. Due to this, we recommend that you use the specific MessagePack for C# annotations when possible.</p>
<h6 dir="auto">
<a id="user-content-serializing-readonlyimmutable-object-members--serializationconstructor" class="anchor" aria-hidden="true" href="#serializing-readonlyimmutable-object-members--serializationconstructor"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Serializing readonly/immutable object members  (SerializationConstructor)</h6>
<p dir="auto">MessagePack for C# supports serialization of readonly/immutable objects/members. For example, this struct can be serialized and deserialized.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="[MessagePackObject]
public struct Point
{
    [Key(0)]
    public readonly int X;
    [Key(1)]
    public readonly int Y;

    public Point(int x, int y)
    {
        this.X = x;
        this.Y = y;
    }
}

var data = new Point(99, 9999);
var bin = MessagePackSerializer.Serialize(data);

// Okay to deserialize immutable object
var point = MessagePackSerializer.Deserialize&lt;Point&gt;(bin);"><pre>[<span class="pl-en">MessagePackObject</span>]
<span class="pl-k">public</span> <span class="pl-k">struct</span> <span class="pl-en">Point</span>
{
    [<span class="pl-en">Key</span>(<span class="pl-c1">0</span>)]
    <span class="pl-k">public</span> <span class="pl-k">readonly</span> <span class="pl-k">int</span> <span class="pl-en">X</span>;
    [<span class="pl-en">Key</span>(<span class="pl-c1">1</span>)]
    <span class="pl-k">public</span> <span class="pl-k">readonly</span> <span class="pl-k">int</span> <span class="pl-en">Y</span>;

    <span class="pl-k">public</span> <span class="pl-en">Point</span>(<span class="pl-k">int</span> <span class="pl-en">x</span>, <span class="pl-k">int</span> <span class="pl-en">y</span>)
    {
        <span class="pl-k">this</span>.<span class="pl-smi">X</span> <span class="pl-k">=</span> <span class="pl-smi">x</span>;
        <span class="pl-k">this</span>.<span class="pl-smi">Y</span> <span class="pl-k">=</span> <span class="pl-smi">y</span>;
    }
}

<span class="pl-k">var</span> <span class="pl-en">data</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Point</span>(<span class="pl-c1">99</span>, <span class="pl-c1">9999</span>);
<span class="pl-k">var</span> <span class="pl-en">bin</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">Serialize</span>(<span class="pl-smi">data</span>);

<span class="pl-c"><span class="pl-c">//</span> Okay to deserialize immutable object</span>
<span class="pl-k">var</span> <span class="pl-en">point</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">Deserialize</span>&lt;<span class="pl-en">Point</span>&gt;(<span class="pl-smi">bin</span>);</pre></div>
<p dir="auto"><code>MessagePackSerializer</code> will choose the constructor with the best matched argument list, using argument indexes index for index keys, or parameter names for string keys. If it cannot determine an appropriate constructor, a <code>MessagePackDynamicObjectResolverException: can't find matched constructor parameter</code> exception will be thrown.
You can specify which constructor to use manually with a <code>[SerializationConstructor]</code> annotation.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="[MessagePackObject]
public struct Point
{
    [Key(0)]
    public readonly int X;
    [Key(1)]
    public readonly int Y;

    [SerializationConstructor]
    public Point(int x)
    {
        this.X = x;
        this.Y = -1;
    }

    // If not marked attribute, used this(most matched argument)
    public Point(int x, int y)
    {
        this.X = x;
        this.Y = y;
    }
}"><pre>[<span class="pl-en">MessagePackObject</span>]
<span class="pl-k">public</span> <span class="pl-k">struct</span> <span class="pl-en">Point</span>
{
    [<span class="pl-en">Key</span>(<span class="pl-c1">0</span>)]
    <span class="pl-k">public</span> <span class="pl-k">readonly</span> <span class="pl-k">int</span> <span class="pl-en">X</span>;
    [<span class="pl-en">Key</span>(<span class="pl-c1">1</span>)]
    <span class="pl-k">public</span> <span class="pl-k">readonly</span> <span class="pl-k">int</span> <span class="pl-en">Y</span>;

    [<span class="pl-en">SerializationConstructor</span>]
    <span class="pl-k">public</span> <span class="pl-en">Point</span>(<span class="pl-k">int</span> <span class="pl-en">x</span>)
    {
        <span class="pl-k">this</span>.<span class="pl-smi">X</span> <span class="pl-k">=</span> <span class="pl-smi">x</span>;
        <span class="pl-k">this</span>.<span class="pl-smi">Y</span> <span class="pl-k">=</span> <span class="pl-k">-</span><span class="pl-c1">1</span>;
    }

    <span class="pl-c"><span class="pl-c">//</span> If not marked attribute, used this(most matched argument)</span>
    <span class="pl-k">public</span> <span class="pl-en">Point</span>(<span class="pl-k">int</span> <span class="pl-en">x</span>, <span class="pl-k">int</span> <span class="pl-en">y</span>)
    {
        <span class="pl-k">this</span>.<span class="pl-smi">X</span> <span class="pl-k">=</span> <span class="pl-smi">x</span>;
        <span class="pl-k">this</span>.<span class="pl-smi">Y</span> <span class="pl-k">=</span> <span class="pl-smi">y</span>;
    }
}</pre></div>
<h7 dir="auto">
<a id="user-content-c-9-record-types" class="anchor" aria-hidden="true" href="#c-9-record-types"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>C# 9 <code>record</code> types</h7>
<p dir="auto">C# 9.0 record with primary constructor is similar immutable object, also supports serialize/deserialize.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="// use key as property name
[MessagePackObject(true)]public record Point(int X, int Y);

// use property: to set KeyAttribute
[MessagePackObject] public record Point([property:Key(0)] int X, [property: Key(1)] int Y);

// Or use explicit properties
[MessagePackObject]
public record Person
{
    [Key(0)]
    public string FirstName { get; init; }

    [Key(1)]
    public string LastName { get; init; }
}"><pre><span class="pl-c"><span class="pl-c">//</span> use key as property name</span>
[<span class="pl-en">MessagePackObject</span>(<span class="pl-c1">true</span>)]<span class="pl-k">public</span> <span class="pl-k">record</span> <span class="pl-en">Point</span>(int X, int Y);

<span class="pl-c"><span class="pl-c">//</span> use property: to set KeyAttribute</span>
[MessagePackObject] public record Point([property:<span class="pl-en">Key</span>(0)] <span class="pl-k">int</span> <span class="pl-en">X</span>, [property: Key(1)] <span class="pl-k">int</span> <span class="pl-en">Y</span>);

<span class="pl-c"><span class="pl-c">//</span> Or use explicit properties</span>
[MessagePackObject]
<span class="pl-en">public</span> <span class="pl-en">record</span> <span class="pl-en">Person</span>
{
    [<span class="pl-en">Key</span>(<span class="pl-c1">0</span>)]
    <span class="pl-k">public</span> <span class="pl-k">string</span> <span class="pl-en">FirstName</span> { <span class="pl-k">get</span>; <span class="pl-k">init</span>; }

    [<span class="pl-en">Key</span>(<span class="pl-c1">1</span>)]
    <span class="pl-k">public</span> <span class="pl-k">string</span> <span class="pl-en">LastName</span> { <span class="pl-k">get</span>; <span class="pl-k">init</span>; }
}</pre></div>
<h7 dir="auto">
<a id="user-content-c-9-init-property-setter-limitations" class="anchor" aria-hidden="true" href="#c-9-init-property-setter-limitations"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>C# 9 <code>init</code> property setter limitations</h7>
<p dir="auto">When using <code>init</code> property setters in <em>generic</em> classes, <a href="https://github.com/neuecc/MessagePack-CSharp/issues/1134" data-hovercard-type="issue" data-hovercard-url="/neuecc/MessagePack-CSharp/issues/1134/hovercard">a CLR bug</a> prevents our most efficient code generation from invoking the property setter.
As a result, you should avoid using <code>init</code> on property setters in generic classes when using the public-only <code>DynamicObjectResolver</code>/<code>StandardResolver</code>.</p>
<p dir="auto">When using the <code>DynamicObjectResolverAllowPrivate</code>/<code>StandardResolverAllowPrivate</code> resolver the bug does not apply and you may use <code>init</code> without restriction.</p>
<h6 dir="auto">
<a id="user-content-serialization-callback" class="anchor" aria-hidden="true" href="#serialization-callback"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Serialization Callback</h6>
<p dir="auto">Objects implementing the <code>IMessagePackSerializationCallbackReceiver</code> interface will received <code>OnBeforeSerialize</code> and <code>OnAfterDeserialize</code> calls during serialization/deserialization.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='[MessagePackObject]
public class SampleCallback : IMessagePackSerializationCallbackReceiver
{
    [Key(0)]
    public int Key { get; set; }

    public void OnBeforeSerialize()
    {
        Console.WriteLine("OnBefore");
    }

    public void OnAfterDeserialize()
    {
        Console.WriteLine("OnAfter");
    }
}'><pre>[<span class="pl-en">MessagePackObject</span>]
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">SampleCallback</span> : <span class="pl-en">IMessagePackSerializationCallbackReceiver</span>
{
    [<span class="pl-en">Key</span>(<span class="pl-c1">0</span>)]
    <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">Key</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }

    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">OnBeforeSerialize</span>()
    {
        <span class="pl-smi">Console</span>.<span class="pl-en">WriteLine</span>(<span class="pl-s"><span class="pl-pds">"</span>OnBefore<span class="pl-pds">"</span></span>);
    }

    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">OnAfterDeserialize</span>()
    {
        <span class="pl-smi">Console</span>.<span class="pl-en">WriteLine</span>(<span class="pl-s"><span class="pl-pds">"</span>OnAfter<span class="pl-pds">"</span></span>);
    }
}</pre></div>
<h6 dir="auto">
<a id="user-content-union" class="anchor" aria-hidden="true" href="#union"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Union</h6>
<p dir="auto">MessagePack for C# supports serializing interface-typed and abstract class-typed objects. It behaves like <code>XmlInclude</code> or <code>ProtoInclude</code>. In MessagePack for C# these are called <code>Union</code>. Only interfaces and abstracts classes are allowed to be annotated with <code>Union</code> attributes. Unique union keys are required.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="// Annotate inheritance types
[MessagePack.Union(0, typeof(FooClass))]
[MessagePack.Union(1, typeof(BarClass))]
public interface IUnionSample
{
}

[MessagePackObject]
public class FooClass : IUnionSample
{
    [Key(0)]
    public int XYZ { get; set; }
}

[MessagePackObject]
public class BarClass : IUnionSample
{
    [Key(0)]
    public string OPQ { get; set; }
}

// ---

IUnionSample data = new FooClass() { XYZ = 999 };

// Serialize interface-typed object.
var bin = MessagePackSerializer.Serialize(data);

// Deserialize again.
var reData = MessagePackSerializer.Deserialize&lt;IUnionSample&gt;(bin);

// Use with e.g. type-switching in C# 7.0
switch (reData)
{
    case FooClass x:
        Console.WriteLine(x.XYZ);
        break;
    case BarClass x:
        Console.WriteLine(x.OPQ);
        break;
    default:
        break;
}"><pre><span class="pl-c"><span class="pl-c">//</span> Annotate inheritance types</span>
[<span class="pl-en">MessagePack</span>.<span class="pl-en">Union</span>(<span class="pl-c1">0</span>, <span class="pl-k">typeof</span>(<span class="pl-en">FooClass</span>))]
[<span class="pl-en">MessagePack</span>.<span class="pl-en">Union</span>(<span class="pl-c1">1</span>, <span class="pl-k">typeof</span>(<span class="pl-en">BarClass</span>))]
<span class="pl-k">public</span> <span class="pl-k">interface</span> <span class="pl-en">IUnionSample</span>
{
}

[<span class="pl-en">MessagePackObject</span>]
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">FooClass</span> : <span class="pl-en">IUnionSample</span>
{
    [<span class="pl-en">Key</span>(<span class="pl-c1">0</span>)]
    <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">XYZ</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }
}

[<span class="pl-en">MessagePackObject</span>]
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">BarClass</span> : <span class="pl-en">IUnionSample</span>
{
    [<span class="pl-en">Key</span>(<span class="pl-c1">0</span>)]
    <span class="pl-k">public</span> <span class="pl-k">string</span> <span class="pl-en">OPQ</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }
}

<span class="pl-c"><span class="pl-c">//</span> ---</span>

<span class="pl-en">IUnionSample</span> <span class="pl-en">data</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">FooClass</span>() { <span class="pl-smi">XYZ</span> <span class="pl-k">=</span> <span class="pl-c1">999</span> };

<span class="pl-c"><span class="pl-c">//</span> Serialize interface-typed object.</span>
<span class="pl-k">var</span> <span class="pl-en">bin</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">Serialize</span>(<span class="pl-smi">data</span>);

<span class="pl-c"><span class="pl-c">//</span> Deserialize again.</span>
<span class="pl-k">var</span> <span class="pl-en">reData</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">Deserialize</span>&lt;<span class="pl-en">IUnionSample</span>&gt;(<span class="pl-smi">bin</span>);

<span class="pl-c"><span class="pl-c">//</span> Use with e.g. type-switching in C# 7.0</span>
<span class="pl-k">switch</span> (<span class="pl-smi">reData</span>)
{
    <span class="pl-k">case</span> <span class="pl-smi">FooClass</span> <span class="pl-smi">x</span>:
        <span class="pl-smi">Console</span>.<span class="pl-en">WriteLine</span>(<span class="pl-smi">x</span>.<span class="pl-smi">XYZ</span>);
        <span class="pl-k">break</span>;
    <span class="pl-k">case</span> <span class="pl-smi">BarClass</span> <span class="pl-smi">x</span>:
        <span class="pl-smi">Console</span>.<span class="pl-en">WriteLine</span>(<span class="pl-smi">x</span>.<span class="pl-smi">OPQ</span>);
        <span class="pl-k">break</span>;
    <span class="pl-k">default</span>:
        <span class="pl-k">break</span>;
}</pre></div>
<p dir="auto">Unions are internally serialized to two-element arrays.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='IUnionSample data = new BarClass { OPQ = "FooBar" };

var bin = MessagePackSerializer.Serialize(data);

// Union is serialized to two-length array, [key, object]
// [1,["FooBar"]]
Console.WriteLine(MessagePackSerializer.ConvertToJson(bin));'><pre><span class="pl-en">IUnionSample</span> <span class="pl-en">data</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">BarClass</span> { <span class="pl-smi">OPQ</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>FooBar<span class="pl-pds">"</span></span> };

<span class="pl-k">var</span> <span class="pl-en">bin</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">Serialize</span>(<span class="pl-smi">data</span>);

<span class="pl-c"><span class="pl-c">//</span> Union is serialized to two-length array, [key, object]</span>
<span class="pl-c"><span class="pl-c">//</span> [1,["FooBar"]]</span>
<span class="pl-smi">Console</span>.<span class="pl-en">WriteLine</span>(<span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">ConvertToJson</span>(<span class="pl-smi">bin</span>));</pre></div>
<p dir="auto">Using <code>Union</code> with abstract classes works the same way.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="[Union(0, typeof(SubUnionType1))]
[Union(1, typeof(SubUnionType2))]
[MessagePackObject]
public abstract class ParentUnionType
{
    [Key(0)]
    public int MyProperty { get; set; }
}

[MessagePackObject]
public class SubUnionType1 : ParentUnionType
{
    [Key(1)]
    public int MyProperty1 { get; set; }
}

[MessagePackObject]
public class SubUnionType2 : ParentUnionType
{
    [Key(1)]
    public int MyProperty2 { get; set; }
}"><pre>[<span class="pl-en">Union</span>(<span class="pl-c1">0</span>, <span class="pl-k">typeof</span>(<span class="pl-en">SubUnionType1</span>))]
[<span class="pl-en">Union</span>(<span class="pl-c1">1</span>, <span class="pl-k">typeof</span>(<span class="pl-en">SubUnionType2</span>))]
[<span class="pl-en">MessagePackObject</span>]
<span class="pl-k">public</span> <span class="pl-k">abstract</span> <span class="pl-k">class</span> <span class="pl-en">ParentUnionType</span>
{
    [<span class="pl-en">Key</span>(<span class="pl-c1">0</span>)]
    <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">MyProperty</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }
}

[<span class="pl-en">MessagePackObject</span>]
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">SubUnionType1</span> : <span class="pl-en">ParentUnionType</span>
{
    [<span class="pl-en">Key</span>(<span class="pl-c1">1</span>)]
    <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">MyProperty1</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }
}

[<span class="pl-en">MessagePackObject</span>]
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">SubUnionType2</span> : <span class="pl-en">ParentUnionType</span>
{
    [<span class="pl-en">Key</span>(<span class="pl-c1">1</span>)]
    <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">MyProperty2</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }
}</pre></div>
<p dir="auto">Please be mindful that you cannot reuse the same keys in derived types that are already present in the parent type, as internally a single flat array or map will be used and thus cannot have duplicate indexes/keys.</p>
<h6 dir="auto">
<a id="user-content-dynamic-untyped-deserialization" class="anchor" aria-hidden="true" href="#dynamic-untyped-deserialization"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Dynamic (Untyped) Deserialization</h6>
<p dir="auto">When calling <code>MessagePackSerializer.Deserialize&lt;object&gt;</code> or <code>MessagePackSerializer.Deserialize&lt;dynamic&gt;</code>, any values present in the blob will be converted to primitive values, i.e. <code>bool</code>, <code>char</code>, <code>sbyte</code>, <code>byte</code>, <code>short</code>, <code>int</code>, <code>long</code>, <code>ushort</code>, <code>uint</code>, <code>ulong</code>, <code>float</code>, <code>double</code>, <code>DateTime</code>, <code>string</code>, <code>byte[]</code>, <code>object[]</code>, <code>IDictionary&lt;object, object&gt;</code>.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='// Sample blob.
var model = new DynamicModel { Name = "foobar", Items = new[] { 1, 10, 100, 1000 } };
var blob = MessagePackSerializer.Serialize(model, ContractlessStandardResolver.Options);

// Dynamic ("untyped")
var dynamicModel = MessagePackSerializer.Deserialize&lt;dynamic&gt;(blob, ContractlessStandardResolver.Options);

// You can access the data using array/dictionary indexers, as shown above
Console.WriteLine(dynamicModel["Name"]); // foobar
Console.WriteLine(dynamicModel["Items"][2]); // 100'><pre><span class="pl-c"><span class="pl-c">//</span> Sample blob.</span>
<span class="pl-k">var</span> <span class="pl-en">model</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">DynamicModel</span> { <span class="pl-smi">Name</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>foobar<span class="pl-pds">"</span></span>, <span class="pl-smi">Items</span> <span class="pl-k">=</span> <span class="pl-k">new</span>[] { <span class="pl-c1">1</span>, <span class="pl-c1">10</span>, <span class="pl-c1">100</span>, <span class="pl-c1">1000</span> } };
<span class="pl-k">var</span> <span class="pl-en">blob</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">Serialize</span>(<span class="pl-smi">model</span>, <span class="pl-smi">ContractlessStandardResolver</span>.<span class="pl-smi">Options</span>);

<span class="pl-c"><span class="pl-c">//</span> Dynamic ("untyped")</span>
<span class="pl-k">var</span> <span class="pl-en">dynamicModel</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">Deserialize</span>&lt;<span class="pl-k">dynamic</span>&gt;(<span class="pl-smi">blob</span>, <span class="pl-smi">ContractlessStandardResolver</span>.<span class="pl-smi">Options</span>);

<span class="pl-c"><span class="pl-c">//</span> You can access the data using array/dictionary indexers, as shown above</span>
<span class="pl-smi">Console</span>.<span class="pl-en">WriteLine</span>(<span class="pl-smi">dynamicModel</span>[<span class="pl-s"><span class="pl-pds">"</span>Name<span class="pl-pds">"</span></span>]); <span class="pl-c"><span class="pl-c">//</span> foobar</span>
<span class="pl-smi">Console</span>.<span class="pl-en">WriteLine</span>(<span class="pl-smi">dynamicModel</span>[<span class="pl-s"><span class="pl-pds">"</span>Items<span class="pl-pds">"</span></span>][<span class="pl-c1">2</span>]); <span class="pl-c"><span class="pl-c">//</span> 100</span></pre></div>
<p dir="auto">Exploring object trees using the dictionary indexer syntax is the fastest option for untyped deserialization, but it is tedious to read and write.
Where performance is not as important as code readability, consider deserializing with <a href="/neuecc/MessagePack-CSharp/blob/master/doc/ExpandoObject.md">ExpandoObject</a>.</p>
<h6 dir="auto">
<a id="user-content-object-type-serialization" class="anchor" aria-hidden="true" href="#object-type-serialization"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Object Type Serialization</h6>
<p dir="auto"><code>StandardResolver</code> and <code>ContractlessStandardResolver</code> can serialize <code>object</code>/anonymous typed objects.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='var objects = new object[] { 1, "aaa", new ObjectFieldType { Anything = 9999 } };
var bin = MessagePackSerializer.Serialize(objects);

// [1,"aaa",[9999]]
Console.WriteLine(MessagePackSerializer.ConvertToJson(bin));

// Support anonymous Type Serialize
var anonType = new { Foo = 100, Bar = "foobar" };
var bin2 = MessagePackSerializer.Serialize(anonType, MessagePack.Resolvers.ContractlessStandardResolver.Options);

// {"Foo":100,"Bar":"foobar"}
Console.WriteLine(MessagePackSerializer.ConvertToJson(bin2));'><pre><span class="pl-k">var</span> <span class="pl-en">objects</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-k">object</span>[] { <span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">"</span>aaa<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-en">ObjectFieldType</span> { <span class="pl-smi">Anything</span> <span class="pl-k">=</span> <span class="pl-c1">9999</span> } };
<span class="pl-k">var</span> <span class="pl-en">bin</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">Serialize</span>(<span class="pl-smi">objects</span>);

<span class="pl-c"><span class="pl-c">//</span> [1,"aaa",[9999]]</span>
<span class="pl-smi">Console</span>.<span class="pl-en">WriteLine</span>(<span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">ConvertToJson</span>(<span class="pl-smi">bin</span>));

<span class="pl-c"><span class="pl-c">//</span> Support anonymous Type Serialize</span>
<span class="pl-k">var</span> <span class="pl-en">anonType</span> <span class="pl-k">=</span> <span class="pl-k">new</span> { <span class="pl-smi">Foo</span> <span class="pl-k">=</span> <span class="pl-c1">100</span>, <span class="pl-smi">Bar</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>foobar<span class="pl-pds">"</span></span> };
<span class="pl-k">var</span> <span class="pl-en">bin2</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">Serialize</span>(<span class="pl-smi">anonType</span>, <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Resolvers</span>.<span class="pl-smi">ContractlessStandardResolver</span>.<span class="pl-smi">Options</span>);

<span class="pl-c"><span class="pl-c">//</span> {"Foo":100,"Bar":"foobar"}</span>
<span class="pl-smi">Console</span>.<span class="pl-en">WriteLine</span>(<span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">ConvertToJson</span>(<span class="pl-smi">bin2</span>));</pre></div>
<blockquote>
<p dir="auto">Unity supports is limited.</p>
</blockquote>
<p dir="auto">When deserializing, the behavior will be the same as Dynamic (Untyped) Deserialization.</p>
<h6 dir="auto">
<a id="user-content-typeless" class="anchor" aria-hidden="true" href="#typeless"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Typeless</h6>
<p dir="auto">The typeless API is similar to <code>BinaryFormatter</code>, as it will embed type information into the blobs, so no types need to be specified explicitly when calling the API.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='object mc = new Sandbox.MyClass()
{
    Age = 10,
    FirstName = "hoge",
    LastName = "huga"
};

// Serialize with the typeless API
var blob = MessagePackSerializer.Typeless.Serialize(mc);

// Blob has embedded type-assembly information.
// ["Sandbox.MyClass, Sandbox",10,"hoge","huga"]
Console.WriteLine(MessagePackSerializer.ConvertToJson(bin));

// You can deserialize to MyClass again with the typeless API
// Note that no type has to be specified explicitly in the Deserialize call
// as type information is embedded in the binary blob
var objModel = MessagePackSerializer.Typeless.Deserialize(bin) as MyClass;'><pre><span class="pl-k">object</span> <span class="pl-en">mc</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Sandbox</span>.<span class="pl-en">MyClass</span>()
{
    <span class="pl-smi">Age</span> <span class="pl-k">=</span> <span class="pl-c1">10</span>,
    <span class="pl-smi">FirstName</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>hoge<span class="pl-pds">"</span></span>,
    <span class="pl-smi">LastName</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>huga<span class="pl-pds">"</span></span>
};

<span class="pl-c"><span class="pl-c">//</span> Serialize with the typeless API</span>
<span class="pl-k">var</span> <span class="pl-en">blob</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePackSerializer</span>.<span class="pl-smi">Typeless</span>.<span class="pl-en">Serialize</span>(<span class="pl-smi">mc</span>);

<span class="pl-c"><span class="pl-c">//</span> Blob has embedded type-assembly information.</span>
<span class="pl-c"><span class="pl-c">//</span> ["Sandbox.MyClass, Sandbox",10,"hoge","huga"]</span>
<span class="pl-smi">Console</span>.<span class="pl-en">WriteLine</span>(<span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">ConvertToJson</span>(<span class="pl-smi">bin</span>));

<span class="pl-c"><span class="pl-c">//</span> You can deserialize to MyClass again with the typeless API</span>
<span class="pl-c"><span class="pl-c">//</span> Note that no type has to be specified explicitly in the Deserialize call</span>
<span class="pl-c"><span class="pl-c">//</span> as type information is embedded in the binary blob</span>
<span class="pl-k">var</span> <span class="pl-en">objModel</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePackSerializer</span>.<span class="pl-smi">Typeless</span>.<span class="pl-en">Deserialize</span>(<span class="pl-smi">bin</span>) <span class="pl-k">as</span> <span class="pl-en">MyClass</span>;</pre></div>
<p dir="auto">Type information is represented by the MessagePack <code>ext</code> format, type code <code>100</code>.</p>
<p dir="auto"><code>MessagePackSerializer.Typeless</code> is a shortcut of <code>Serialize/Deserialize&lt;object&gt;(TypelessContractlessStandardResolver.Instance)</code>.
If you want to configure it as the default resolver, you can use <code>MessagePackSerializer.Typeless.RegisterDefaultResolver</code>.</p>
<p dir="auto"><code>TypelessFormatter</code> can used standalone or combined with other resolvers.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="// Replaced `object` uses the typeless resolver
var resolver = MessagePack.Resolvers.CompositeResolver.Create(
    new[] { MessagePack.Formatters.TypelessFormatter.Instance },
    new[] { MessagePack.Resolvers.StandardResolver.Instance });

public class Foo
{
    // use Typeless(this field only)
    [MessagePackFormatter(typeof(TypelessFormatter))]
    public object Bar;
}"><pre><span class="pl-c"><span class="pl-c">//</span> Replaced `object` uses the typeless resolver</span>
<span class="pl-k">var</span> <span class="pl-en">resolver</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Resolvers</span>.<span class="pl-smi">CompositeResolver</span>.<span class="pl-en">Create</span>(
    <span class="pl-k">new</span>[] { <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Formatters</span>.<span class="pl-smi">TypelessFormatter</span>.<span class="pl-smi">Instance</span> },
    <span class="pl-k">new</span>[] { <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Resolvers</span>.<span class="pl-smi">StandardResolver</span>.<span class="pl-smi">Instance</span> });

<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">Foo</span>
{
    <span class="pl-c"><span class="pl-c">//</span> use Typeless(this field only)</span>
    [<span class="pl-en">MessagePackFormatter</span>(<span class="pl-k">typeof</span>(<span class="pl-en">TypelessFormatter</span>))]
    <span class="pl-k">public</span> <span class="pl-k">object</span> <span class="pl-en">Bar</span>;
}</pre></div>
<p dir="auto">If a type's name is changed later, you can no longer deserialize old blobs. But you can specify a fallback name in such cases, providing a <code>TypelessFormatter.BindToType</code> function of your own.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='MessagePack.Formatters.TypelessFormatter.BindToType = typeName =&gt;
{
    if (typeName.StartsWith("SomeNamespace"))
    {
        typeName = typeName.Replace("SomeNamespace", "AnotherNamespace");
    }

    return Type.GetType(typeName, false);
};'><pre><span class="pl-smi">MessagePack</span>.<span class="pl-smi">Formatters</span>.<span class="pl-smi">TypelessFormatter</span>.<span class="pl-smi">BindToType</span> <span class="pl-k">=</span> <span class="pl-en">typeName</span> <span class="pl-k">=&gt;</span>
{
    <span class="pl-k">if</span> (<span class="pl-smi">typeName</span>.<span class="pl-en">StartsWith</span>(<span class="pl-s"><span class="pl-pds">"</span>SomeNamespace<span class="pl-pds">"</span></span>))
    {
        <span class="pl-smi">typeName</span> <span class="pl-k">=</span> <span class="pl-smi">typeName</span>.<span class="pl-en">Replace</span>(<span class="pl-s"><span class="pl-pds">"</span>SomeNamespace<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>AnotherNamespace<span class="pl-pds">"</span></span>);
    }

    <span class="pl-k">return</span> <span class="pl-smi">Type</span>.<span class="pl-en">GetType</span>(<span class="pl-smi">typeName</span>, <span class="pl-c1">false</span>);
};</pre></div>
<h6 dir="auto">
<a id="user-content-security" class="anchor" aria-hidden="true" href="#security"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a name="user-content-security"></a>Security</h6>
<p dir="auto">Deserializing data from an untrusted source can introduce security vulnerabilities in your application.
Depending on the settings used during deserialization, <strong>untrusted data may be able to execute arbitrary code</strong> or cause a denial of service attack.
Untrusted data might come from over the network from an untrusted source (e.g. any and every networked client) or can be tampered with by an intermediary when transmitted over an unauthenticated connection, or from a local storage that might have been tampered with, or many other sources. MessagePack for C# does not provide any means to authenticate data or make it tamper-resistant. Please use an appropriate method of authenticating data before deserialization - such as a <a href="https://en.wikipedia.org/wiki/Message_authentication_code" rel="nofollow"><code>MAC</code></a> .</p>
<p dir="auto">Please be very mindful of these attack scenarios; many projects and companies, and serialization library users in general, have been bitten by untrusted user data deserialization in the past.</p>
<p dir="auto">When deserializing untrusted data, put MessagePack into a more secure mode by configuring your <code>MessagePackSerializerOptions.Security</code> property:</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="var options = MessagePackSerializerOptions.Standard
    .WithSecurity(MessagePackSecurity.UntrustedData);

// Pass the options explicitly for the greatest control.
T object = MessagePackSerializer.Deserialize&lt;T&gt;(data, options);

// Or set the security level as the default.
MessagePackSerializer.DefaultOptions = options;"><pre><span class="pl-k">var</span> <span class="pl-en">options</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePackSerializerOptions</span>.<span class="pl-smi">Standard</span>
    .<span class="pl-en">WithSecurity</span>(<span class="pl-smi">MessagePackSecurity</span>.<span class="pl-smi">UntrustedData</span>);

<span class="pl-c"><span class="pl-c">//</span> Pass the options explicitly for the greatest control.</span>
<span class="pl-en">T</span> <span class="pl-en">object</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">Deserialize</span>&lt;<span class="pl-en">T</span>&gt;(<span class="pl-smi">data</span>, <span class="pl-smi">options</span>);

<span class="pl-c"><span class="pl-c">//</span> Or set the security level as the default.</span>
<span class="pl-smi">MessagePackSerializer</span>.<span class="pl-smi">DefaultOptions</span> <span class="pl-k">=</span> <span class="pl-smi">options</span>;</pre></div>
<p dir="auto">You should also avoid the Typeless serializer/formatters/resolvers for untrusted data as that opens the door for the untrusted data to potentially deserialize unanticipated types that can compromise security.</p>
<p dir="auto">The <code>UntrustedData</code> mode merely hardens against some common attacks, but is no fully secure solution in itself.</p>
<h6 dir="auto">
<a id="user-content-performance" class="anchor" aria-hidden="true" href="#performance"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Performance</h6>
<p dir="auto">Benchmarks comparing MessagePack For C# to other serializers were run on <code>Windows 10 Pro x64 Intel Core i7-6700K 4.00GHz, 32GB RAM</code>. Benchmark code is <a href="https://github.com/neuecc/ZeroFormatter/tree/master/sandbox/PerformanceComparison">available here</a> - and their <a href="https://github.com/neuecc/ZeroFormatter/blob/bc63cb925d/sandbox/PerformanceComparison/packages.config">version info</a>.
<a href="https://github.com/neuecc/ZeroFormatter/">ZeroFormatter</a> and <a href="https://google.github.io/flatbuffers/" rel="nofollow">FlatBuffers</a> have infinitely fast deserializers, so ignore their deserialization performance.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/46207/23835765/55fe494e-07b0-11e7-98be-5e7a9411da40.png"><img src="https://cloud.githubusercontent.com/assets/46207/23835765/55fe494e-07b0-11e7-98be-5e7a9411da40.png" alt="image" style="max-width: 100%;"></a></p>
<p dir="auto">MessagePack for C# uses many techniques to improve performance.</p>
<ul dir="auto">
<li>The serializer uses <code>IBufferWriter&lt;byte&gt;</code> rather than <code>System.IO.Stream</code> to reduce memory overhead.</li>
<li>Buffers are rented from pools to reduce allocations, keeping throughput high through reduced GC pressure.</li>
<li>Don't create intermediate utility instances (<code>*Writer/*Reader</code>, <code>*Context</code>, etc...)</li>
<li>Utilize dynamic code generation and JIT to avoid boxing value types. Use AOT generation on platforms that prohibit JITs.</li>
<li>Cached generated formatters on static generic fields (don't use dictionary-cache because dictionary lookup is overhead). See <a href="https://github.com/neuecc/MessagePack-CSharp/tree/209f301e2e595ed366408624011ba2e856d23429/src/MessagePack/Resolvers">Resolvers</a>
</li>
<li>Heavily tuned dynamic IL code generation and JIT to avoid boxing value types. See <a href="https://github.com/neuecc/MessagePack-CSharp/blob/209f301e2e595ed366408624011ba2e856d23429/src/MessagePack/Resolvers/DynamicObjectResolver.cs#L142-L754">DynamicObjectTypeBuilder</a>. Use AOT generation on platforms that prohibit JIT.</li>
<li>Call the Primitive API directly when IL code generation determines target types to be  primitive.</li>
<li>Reduce branching of variable length formats when IL code generation knows the target type (integer/string) ranges</li>
<li>Don't use the <code>IEnumerable&lt;T&gt;</code> abstraction to iterate over collections when possible, <a href="https://github.com/neuecc/MessagePack-CSharp/blob/209f301e2e595ed366408624011ba2e856d23429/src/MessagePack/Formatters/CollectionFormatter.cs#L192-L355">see: CollectionFormatterBase</a> and derived collection formatters</li>
<li>Use pre-generated lookup tables to reduce checks of mgpack type constraints, <a href="https://github.com/neuecc/MessagePack-CSharp/blob/209f301e2e595ed366408624011ba2e856d23429/src/MessagePack/MessagePackBinary.cs#L15-L212">see: MessagePackBinary</a>
</li>
<li>Uses optimized type key dictionary for non-generic methods, <a href="https://github.com/neuecc/MessagePack-CSharp/blob/91312921cb7fe987f48336768c898a76ac7dbb40/src/MessagePack/Internal/ThreadsafeTypeKeyHashTable.cs">see: ThreadsafeTypeKeyHashTable</a>
</li>
<li>Avoid string key decoding for lookup maps (string key and use automata based name lookup with inlined IL code generation, see: <a href="https://github.com/neuecc/MessagePack-CSharp/blob/bcedbce3fd98cb294210d6b4a22bdc4c75ccd916/src/MessagePack/Internal/AutomataDictionary.cs">AutomataDictionary</a>
</li>
<li>To encode string keys, use pre-generated member name bytes and fixed sized byte array copies in IL, see: <a href="https://github.com/neuecc/MessagePack-CSharp/blob/f17ddc5d107d3a2f66f60398b214ef87919ff892/src/MessagePack/Internal/UnsafeMemory.cs">UnsafeMemory.cs</a>
</li>
</ul>
<p dir="auto">Before creating this library, I implemented a fast fast serializer with <a href="https://github.com/neuecc/ZeroFormatter#performance">ZeroFormatter#Performance</a>. This is a further evolved implementation. MessagePack for C# is always fast and optimized for all types (primitive, small struct, large object, any collections).</p>
<h7 dir="auto">
<a id="user-content-deserialization-performance-for-different-options" class="anchor" aria-hidden="true" href="#deserialization-performance-for-different-options"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a name="user-content-deserialize-performance"></a>Deserialization Performance for different options</h7>
<p dir="auto">Performance varies depending on the options used. This is a micro benchmark with <a href="https://github.com/dotnet/BenchmarkDotNet">BenchmarkDotNet</a>. The target object has 9 members (<code>MyProperty1</code> ~ <code>MyProperty9</code>), values are zero.</p>
<table>
<thead>
<tr>
<th>Method</th>
<th align="right">Mean</th>
<th align="right">Error</th>
<th align="right">Scaled</th>
<th align="right">Gen 0</th>
<th align="right">Allocated</th>
</tr>
</thead>
<tbody>
<tr>
<td>M IntKey</td>
<td align="right">72.67 ns</td>
<td align="right">NA</td>
<td align="right">1.00</td>
<td align="right">0.0132</td>
<td align="right">56 B</td>
</tr>
<tr>
<td>M StringKey</td>
<td align="right">217.95 ns</td>
<td align="right">NA</td>
<td align="right">3.00</td>
<td align="right">0.0131</td>
<td align="right">56 B</td>
</tr>
<tr>
<td>M Typeless_IntKey</td>
<td align="right">176.71 ns</td>
<td align="right">NA</td>
<td align="right">2.43</td>
<td align="right">0.0131</td>
<td align="right">56 B</td>
</tr>
<tr>
<td>M Typeless_StringKey</td>
<td align="right">378.64 ns</td>
<td align="right">NA</td>
<td align="right">5.21</td>
<td align="right">0.0129</td>
<td align="right">56 B</td>
</tr>
<tr>
<td>MsgPackCliMap</td>
<td align="right">1,355.26 ns</td>
<td align="right">NA</td>
<td align="right">18.65</td>
<td align="right">0.1431</td>
<td align="right">608 B</td>
</tr>
<tr>
<td>MsgPackCliArray</td>
<td align="right">455.28 ns</td>
<td align="right">NA</td>
<td align="right">6.26</td>
<td align="right">0.0415</td>
<td align="right">176 B</td>
</tr>
<tr>
<td>ProtobufNet</td>
<td align="right">265.85 ns</td>
<td align="right">NA</td>
<td align="right">3.66</td>
<td align="right">0.0319</td>
<td align="right">136 B</td>
</tr>
<tr>
<td>Hyperion</td>
<td align="right">366.47 ns</td>
<td align="right">NA</td>
<td align="right">5.04</td>
<td align="right">0.0949</td>
<td align="right">400 B</td>
</tr>
<tr>
<td>JsonNetString</td>
<td align="right">2,783.39 ns</td>
<td align="right">NA</td>
<td align="right">38.30</td>
<td align="right">0.6790</td>
<td align="right">2864 B</td>
</tr>
<tr>
<td>JsonNetStreamReader</td>
<td align="right">3,297.90 ns</td>
<td align="right">NA</td>
<td align="right">45.38</td>
<td align="right">1.4267</td>
<td align="right">6000 B</td>
</tr>
<tr>
<td>JilString</td>
<td align="right">553.65 ns</td>
<td align="right">NA</td>
<td align="right">7.62</td>
<td align="right">0.0362</td>
<td align="right">152 B</td>
</tr>
<tr>
<td>JilStreamReader</td>
<td align="right">1,408.46 ns</td>
<td align="right">NA</td>
<td align="right">19.38</td>
<td align="right">0.8450</td>
<td align="right">3552 B</td>
</tr>
</tbody>
</table>
<p dir="auto"><code>ntKey</code>, <code>StringKey</code>, <code>Typeless_IntKey</code>, <code>Typeless_StringKey</code> are MessagePack for C# options. All MessagePack for C# options achieve zero memory allocations in the deserialization process. <code>JsonNetString</code>/<code>JilString</code> is deserialized from strings. <code>JsonNetStreamReader</code>/<code>JilStreamReader</code> is deserialized from UTF-8 byte arrays using <code>StreamReader</code>. Deserialization is normally read from Stream. Thus, it will be restored from byte arrays (or Stream) instead of strings.</p>
<p dir="auto">MessagePack for C# <code>IntKey</code> is the fastest. <code>StringKey</code> is slower than <code>IntKey</code> because matching the character string of property names is required. <code>IntKey</code> works by reading the array length, then <code>for (array length) { binary decode }</code>. <code>StringKey</code> works by reading map length, <code>for (map length) { decode key, lookup key, binary decode }</code>, so it requires an additional two steps (decoding of keys and lookups of keys).</p>
<p dir="auto">String key is often a useful, contractless, simple replacement of JSON, interoperability with other languages, and more robust versioning. MessagePack for C# is also optimized for string keys as much a possible. First of all, it does not decode UTF-8 byte arrays to full string for matching with the member name; instead it will look up the byte arrays as it is (to avoid decoding costs and extra memory allocations).</p>
<p dir="auto">And It will try to match each <code>long type</code> (per 8 character, if it is not enough, pad with 0) using <a href="https://en.wikipedia.org/wiki/Automata_theory" rel="nofollow">automata</a> and inline it when generating IL code.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/46207/29754771-216b40e2-8bc7-11e7-8310-1c3602e80a08.png"><img src="https://user-images.githubusercontent.com/46207/29754771-216b40e2-8bc7-11e7-8310-1c3602e80a08.png" alt="image" style="max-width: 100%;"></a></p>
<p dir="auto">This also avoids calculating the hash code of byte arrays, and the comparison can be made several times faster using the long type.</p>
<p dir="auto">This is the sample of decompiled generated deserializer code, decompiled using <a href="http://ilspy.net/" rel="nofollow">ILSpy</a>.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/46207/29754804-b5ba0f44-8bc7-11e7-9f6b-0c8f3c041237.png"><img src="https://user-images.githubusercontent.com/46207/29754804-b5ba0f44-8bc7-11e7-9f6b-0c8f3c041237.png" alt="image" style="max-width: 100%;"></a></p>
<p dir="auto">If the number of nodes is large, searches will use an embedded binary search.</p>
<p dir="auto">Extra note, this is serialization benchmark result.</p>
<table>
<thead>
<tr>
<th>Method</th>
<th align="right">Mean</th>
<th align="right">Error</th>
<th align="right">Scaled</th>
<th align="right">Gen 0</th>
<th align="right">Allocated</th>
</tr>
</thead>
<tbody>
<tr>
<td>IntKey</td>
<td align="right">84.11 ns</td>
<td align="right">NA</td>
<td align="right">1.00</td>
<td align="right">0.0094</td>
<td align="right">40 B</td>
</tr>
<tr>
<td>StringKey</td>
<td align="right">126.75 ns</td>
<td align="right">NA</td>
<td align="right">1.51</td>
<td align="right">0.0341</td>
<td align="right">144 B</td>
</tr>
<tr>
<td>Typeless_IntKey</td>
<td align="right">183.31 ns</td>
<td align="right">NA</td>
<td align="right">2.18</td>
<td align="right">0.0265</td>
<td align="right">112 B</td>
</tr>
<tr>
<td>Typeless_StringKey</td>
<td align="right">193.95 ns</td>
<td align="right">NA</td>
<td align="right">2.31</td>
<td align="right">0.0513</td>
<td align="right">216 B</td>
</tr>
<tr>
<td>MsgPackCliMap</td>
<td align="right">967.68 ns</td>
<td align="right">NA</td>
<td align="right">11.51</td>
<td align="right">0.1297</td>
<td align="right">552 B</td>
</tr>
<tr>
<td>MsgPackCliArray</td>
<td align="right">284.20 ns</td>
<td align="right">NA</td>
<td align="right">3.38</td>
<td align="right">0.1006</td>
<td align="right">424 B</td>
</tr>
<tr>
<td>ProtobufNet</td>
<td align="right">176.43 ns</td>
<td align="right">NA</td>
<td align="right">2.10</td>
<td align="right">0.0665</td>
<td align="right">280 B</td>
</tr>
<tr>
<td>Hyperion</td>
<td align="right">280.14 ns</td>
<td align="right">NA</td>
<td align="right">3.33</td>
<td align="right">0.1674</td>
<td align="right">704 B</td>
</tr>
<tr>
<td>ZeroFormatter</td>
<td align="right">149.95 ns</td>
<td align="right">NA</td>
<td align="right">1.78</td>
<td align="right">0.1009</td>
<td align="right">424 B</td>
</tr>
<tr>
<td>JsonNetString</td>
<td align="right">1,432.55 ns</td>
<td align="right">NA</td>
<td align="right">17.03</td>
<td align="right">0.4616</td>
<td align="right">1944 B</td>
</tr>
<tr>
<td>JsonNetStreamWriter</td>
<td align="right">1,775.72 ns</td>
<td align="right">NA</td>
<td align="right">21.11</td>
<td align="right">1.5526</td>
<td align="right">6522 B</td>
</tr>
<tr>
<td>JilString</td>
<td align="right">547.51 ns</td>
<td align="right">NA</td>
<td align="right">6.51</td>
<td align="right">0.3481</td>
<td align="right">1464 B</td>
</tr>
<tr>
<td>JilStreamWriter</td>
<td align="right">778.78 ns</td>
<td align="right">NA</td>
<td align="right">9.26</td>
<td align="right">1.4448</td>
<td align="right">6066 B</td>
</tr>
</tbody>
</table>
<p dir="auto">Of course, <code>IntKey</code> is fastest but <code>StringKey</code> also performs reasonably well.</p>
<h6 dir="auto">
<a id="user-content-lz4-compression" class="anchor" aria-hidden="true" href="#lz4-compression"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>LZ4 Compression</h6>
<p dir="auto">MessagePack is a fast and <em>compact</em> format but it is not compression. <a href="https://github.com/lz4/lz4">LZ4</a> is an extremely fast compression algorithm, and using it MessagePack for C# can achieve extremely fast performance as well as extremely compact binary sizes!</p>
<p dir="auto">MessagePack for C# has built-in LZ4 support. You can activate it using a modified options object and passing it into an API like this:</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="var lz4Options = MessagePackSerializerOptions.Standard.WithCompression(MessagePackCompression.Lz4BlockArray);
MessagePackSerializer.Serialize(obj, lz4Options);"><pre><span class="pl-k">var</span> <span class="pl-en">lz4Options</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePackSerializerOptions</span>.<span class="pl-smi">Standard</span>.<span class="pl-en">WithCompression</span>(<span class="pl-smi">MessagePackCompression</span>.<span class="pl-smi">Lz4BlockArray</span>);
<span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">Serialize</span>(<span class="pl-smi">obj</span>, <span class="pl-smi">lz4Options</span>);</pre></div>
<p dir="auto"><code>MessagePackCompression</code> has two modes, <code>Lz4Block</code> and <code>Lz4BlockArray</code>. Neither is a simple binary LZ4 compression, but a special compression integrated into the serialization pipeline, using MessagePack <code>ext</code> code (<code>Lz4BlockArray (98)</code> or <code>Lz4Block (99)</code>). Therefore, it is not readily compatible with compression offered in other languages.</p>
<p dir="auto"><code>Lz4Block</code> compresses an entire MessagePack sequence as a single LZ4 block. This is the simple compression that achieves best compression ratio, at the cost of copying the entire sequence when necessary to get contiguous memory.</p>
<p dir="auto"><code>Lz4BlockArray</code> compresses an entire MessagePack sequence as a array of LZ4 blocks. Compressed/decompressed blocks are  chunked and thus do not enter the GC's Large-Object-Heap, but the compression ratio is slightly worse.</p>
<p dir="auto">We recommend to use <code>Lz4BlockArray</code> as the default when using compression.
For compatibility with MessagePack v1.x, use <code>Lz4Block</code>.</p>
<p dir="auto">Regardless of which LZ4 option is set at the deserialization, both methods can be deserialized. For example, when the <code>Lz4BlockArray</code> option was used, binary data using either <code>Lz4Block</code> and <code>Lz4BlockArray</code> can be deserialized. Neither can be decompressed and hence deserialized when the compression option is set to <code>None</code>.</p>
<h7 dir="auto">
<a id="user-content-attributions" class="anchor" aria-hidden="true" href="#attributions"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Attributions</h7>
<p dir="auto">LZ4 compression support is using Milosz Krajewski's <a href="https://github.com/MiloszKrajewski/lz4net">lz4net</a> code with some modifications.</p>
<h6 dir="auto">
<a id="user-content-comparison-with-protobuf-json-zeroformatter" class="anchor" aria-hidden="true" href="#comparison-with-protobuf-json-zeroformatter"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a name="user-content-comparison"></a>Comparison with protobuf, JSON, ZeroFormatter</h6>
<p dir="auto"><a href="https://github.com/mgravell/protobuf-net">protobuf-net</a> is major, widely used binary-format library on .NET. I love protobuf-net and respect their great work. But when you use protobuf-net as a general purpose serialization format, you may encounter an annoying issue.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="[ProtoContract]
public class Parent
{
    [ProtoMember(1)]
    public int Primitive { get; set; }
    [ProtoMember(2)]
    public Child Prop { get; set; }
    [ProtoMember(3)]
    public int[] Array { get; set; }
}

[ProtoContract]
public class Child
{
    [ProtoMember(1)]
    public int Number { get; set; }
}

using (var ms = new MemoryStream())
{
    // serialize null.
    ProtoBuf.Serializer.Serialize&lt;Parent&gt;(ms, null);

    ms.Position = 0;
    var result = ProtoBuf.Serializer.Deserialize&lt;Parent&gt;(ms);

    Console.WriteLine(result != null); // True, not null. but all property are zero formatted.
    Console.WriteLine(result.Primitive); // 0
    Console.WriteLine(result.Prop); // null
    Console.WriteLine(result.Array); // null
}

using (var ms = new MemoryStream())
{
    // serialize empty array.
    ProtoBuf.Serializer.Serialize&lt;Parent&gt;(ms, new Parent { Array = System.Array.Empty&lt;int&gt;() });

    ms.Position = 0;
    var result = ProtoBuf.Serializer.Deserialize&lt;Parent&gt;(ms);

    Console.WriteLine(result.Array == null); // True, null!
}"><pre>[<span class="pl-en">ProtoContract</span>]
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">Parent</span>
{
    [<span class="pl-en">ProtoMember</span>(<span class="pl-c1">1</span>)]
    <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">Primitive</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }
    [<span class="pl-en">ProtoMember</span>(<span class="pl-c1">2</span>)]
    <span class="pl-k">public</span> <span class="pl-en">Child</span> <span class="pl-en">Prop</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }
    [<span class="pl-en">ProtoMember</span>(<span class="pl-c1">3</span>)]
    <span class="pl-k">public</span> <span class="pl-k">int</span>[] <span class="pl-en">Array</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }
}

[<span class="pl-en">ProtoContract</span>]
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">Child</span>
{
    [<span class="pl-en">ProtoMember</span>(<span class="pl-c1">1</span>)]
    <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">Number</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }
}

<span class="pl-k">using</span> (<span class="pl-en">var</span> <span class="pl-en">ms</span> <span class="pl-k">=</span> <span class="pl-en">new</span> <span class="pl-en">MemoryStream</span>())
{
    <span class="pl-c"><span class="pl-c">//</span> serialize null.</span>
    <span class="pl-en">ProtoBuf</span>.<span class="pl-en">Serializer</span>.<span class="pl-en">Serialize</span>&lt;<span class="pl-en">Parent</span>&gt;(<span class="pl-en">ms</span>, <span class="pl-en">null</span>);

    <span class="pl-smi">ms</span>.<span class="pl-smi">Position</span> <span class="pl-k">=</span> <span class="pl-c1">0</span>;
    <span class="pl-k">var</span> <span class="pl-en">result</span> <span class="pl-k">=</span> <span class="pl-smi">ProtoBuf</span>.<span class="pl-smi">Serializer</span>.<span class="pl-en">Deserialize</span>&lt;<span class="pl-en">Parent</span>&gt;(<span class="pl-smi">ms</span>);

    <span class="pl-smi">Console</span>.<span class="pl-en">WriteLine</span>(<span class="pl-smi">result</span> <span class="pl-k">!=</span> <span class="pl-c1">null</span>); <span class="pl-c"><span class="pl-c">//</span> True, not null. but all property are zero formatted.</span>
    <span class="pl-smi">Console</span>.<span class="pl-en">WriteLine</span>(<span class="pl-smi">result</span>.<span class="pl-smi">Primitive</span>); <span class="pl-c"><span class="pl-c">//</span> 0</span>
    <span class="pl-smi">Console</span>.<span class="pl-en">WriteLine</span>(<span class="pl-smi">result</span>.<span class="pl-smi">Prop</span>); <span class="pl-c"><span class="pl-c">//</span> null</span>
    <span class="pl-smi">Console</span>.<span class="pl-en">WriteLine</span>(<span class="pl-smi">result</span>.<span class="pl-smi">Array</span>); <span class="pl-c"><span class="pl-c">//</span> null</span>
}

<span class="pl-k">using</span> (<span class="pl-en">var</span> <span class="pl-en">ms</span> <span class="pl-k">=</span> <span class="pl-en">new</span> <span class="pl-en">MemoryStream</span>())
{
    <span class="pl-c"><span class="pl-c">//</span> serialize empty array.</span>
    <span class="pl-en">ProtoBuf</span>.<span class="pl-en">Serializer</span>.<span class="pl-en">Serialize</span>&lt;<span class="pl-en">Parent</span>&gt;(<span class="pl-en">ms</span>, <span class="pl-en">new</span> <span class="pl-en">Parent</span> { <span class="pl-en">Array</span> <span class="pl-k">=</span> <span class="pl-en">System</span>.<span class="pl-en">Array</span>.<span class="pl-en">Empty</span>&lt;<span class="pl-en">int</span>&gt;() });

    <span class="pl-smi">ms</span>.<span class="pl-smi">Position</span> <span class="pl-k">=</span> <span class="pl-c1">0</span>;
    <span class="pl-k">var</span> <span class="pl-en">result</span> <span class="pl-k">=</span> <span class="pl-smi">ProtoBuf</span>.<span class="pl-smi">Serializer</span>.<span class="pl-en">Deserialize</span>&lt;<span class="pl-en">Parent</span>&gt;(<span class="pl-smi">ms</span>);

    <span class="pl-smi">Console</span>.<span class="pl-en">WriteLine</span>(<span class="pl-smi">result</span>.<span class="pl-smi">Array</span> <span class="pl-k">==</span> <span class="pl-c1">null</span>); <span class="pl-c"><span class="pl-c">//</span> True, null!</span>
}</pre></div>
<p dir="auto">protobuf(-net) cannot handle null and empty collection correctly, because protobuf has no <code>null</code> representation (see <a href="https://stackoverflow.com/questions/21631428/protobuf-net-deserializes-empty-collection-to-null-when-the-collection-is-a-prop/21632160#21632160" rel="nofollow">this SO answer from a protobuf-net author</a>).</p>
<p dir="auto"><a href="https://github.com/msgpack/msgpack/blob/master/spec.md#type-system">MessagePack's type system</a> can correctly serialize the entire C# type system. This is a strong reason to recommend MessagePack over protobuf.</p>
<p dir="auto">Protocol Buffers have good IDL and <a href="https://www.grpc.io/" rel="nofollow">gRPC</a> support. If you want to use IDL, I recommend <a href="https://github.com/google/protobuf/tree/master/csharp/src/Google.Protobuf">Google.Protobuf</a> over MessagePack.</p>
<p dir="auto">JSON is good general-purpose format. It is simple, human-readable and thoroughly-enough specified. <a href="https://github.com/neuecc/Utf8Json">Utf8Json</a> - which I created as well - adopts same architecture as MessagePack for C# and avoids encoding/decoding costs as much as possible just like this library does. If you want to know more about binary vs text formats, see <a href="https://github.com/neuecc/Utf8Json#which-serializer-should-be-used">Utf8Json/which serializer should be used</a>.</p>
<p dir="auto"><a href="https://github.com/neuecc/ZeroFormatter/">ZeroFormatter</a> is similar as <a href="https://google.github.io/flatbuffers/" rel="nofollow">FlatBuffers</a> but specialized to C#, and special in that regard. Deserialization is infinitely fast but the produced binary size is larger. And ZeroFormatter's caching algorithm requires additional memory.</p>
<p dir="auto">For many common uses, MessagePack for C# would be a better fit.</p>
<h6 dir="auto">
<a id="user-content-hints-to-achieve-maximum-performance-when-using-messagepack-for-c" class="anchor" aria-hidden="true" href="#hints-to-achieve-maximum-performance-when-using-messagepack-for-c"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Hints to achieve maximum performance when using MessagePack for C#</h6>
<p dir="auto">MessagePack for C# prioritizes maximum performance by default. However, there are also some options that sacrifice performance for convenience.</p>
<h7 dir="auto">
<a id="user-content-use-indexed-keys-instead-of-string-keys-contractless" class="anchor" aria-hidden="true" href="#use-indexed-keys-instead-of-string-keys-contractless"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Use indexed keys instead of string keys (Contractless)</h7>
<p dir="auto">The <a href="https://github.com/neuecc/MessagePack-CSharp#deserialize-performance">Deserialization Performance for different options</a> section shows the results of indexed keys (<code>IntKey</code>) vs string keys (<code>StringKey</code>) performance. Indexed keys serialize the object graph as a MessagePack array. String keys serializes the object graph as a MessagePack map.</p>
<p dir="auto">For example this type is serialized to</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='[MessagePackObject]
public class Person
{
    [Key(0)] or [Key("name")]
    public string Name { get; set;}
    [Key(1)] or [Key("age")]
    public int Age { get; set;}
}

new Person { Name = "foobar", Age = 999 }'><pre>[<span class="pl-en">MessagePackObject</span>]
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">Person</span>
{
    [<span class="pl-en">Key</span>(<span class="pl-c1">0</span>)] or [<span class="pl-en">Key</span>(<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>)]
    <span class="pl-k">public</span> <span class="pl-k">string</span> <span class="pl-en">Name</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>;}
    [<span class="pl-en">Key</span>(<span class="pl-c1">1</span>)] or [<span class="pl-en">Key</span>(<span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>)]
    <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">Age</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>;}
}

<span class="pl-k">new</span> <span class="pl-smi">Person</span> { <span class="pl-smi">Name</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>foobar<span class="pl-pds">"</span></span>, <span class="pl-smi">Age</span> <span class="pl-k">=</span> <span class="pl-c1">999</span> }</pre></div>
<ul dir="auto">
<li>
<code>IntKey</code>: <code>["foobar", 999]</code>
</li>
<li>
<code>StringKey</code>: <code>{"name:"foobar","age":999}</code>.</li>
</ul>
<p dir="auto"><code>IntKey</code> is always fast in both serialization and deserialization because it does not have to handle and lookup key names, and always has the smaller binary size.</p>
<p dir="auto"><code>StringKey</code> is often a useful, contractless, simple replacement for JSON, interoperability with other languages with MessagePack support, and less error prone versioning. But to achieve maximum performance, use <code>IntKey</code>.</p>
<h7 dir="auto">
<a id="user-content-create-own-custom-composite-resolver" class="anchor" aria-hidden="true" href="#create-own-custom-composite-resolver"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Create own custom composite resolver</h7>
<p dir="auto"><code>CompositeResolver.Create</code> is an easy way to create composite resolvers. But formatter lookups have some overhead. If you create a custom resolver (or use <code>StaticCompositeResolver.Instance</code>), you can avoid this overhead.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="public class MyApplicationResolver : IFormatterResolver
{
    public static readonly IFormatterResolver Instance = new MyApplicationResolver();

    // configure your custom resolvers.
    private static readonly IFormatterResolver[] Resolvers = new IFormatterResolver[]
    {
    };

    private MyApplicationResolver() { }

    public IMessagePackFormatter&lt;T&gt; GetFormatter&lt;T&gt;()
    {
        return Cache&lt;T&gt;.Formatter;
    }

    private static class Cache&lt;T&gt;
    {
        public static IMessagePackFormatter&lt;T&gt; Formatter;

        static Cache()
        {
            // configure your custom formatters.
            if (typeof(T) == typeof(XXX))
            {
                Formatter = new ICustomFormatter();
                return;
            }

            foreach (var resolver in Resolvers)
            {
                var f = resolver.GetFormatter&lt;T&gt;();
                if (f != null)
                {
                    Formatter = f;
                    return;
                }
            }
        }
    }
}"><pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MyApplicationResolver</span> : <span class="pl-en">IFormatterResolver</span>
{
    <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-k">readonly</span> <span class="pl-en">IFormatterResolver</span> <span class="pl-en">Instance</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">MyApplicationResolver</span>();

    <span class="pl-c"><span class="pl-c">//</span> configure your custom resolvers.</span>
    <span class="pl-k">private</span> <span class="pl-k">static</span> <span class="pl-k">readonly</span> <span class="pl-en">IFormatterResolver</span>[] <span class="pl-en">Resolvers</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">IFormatterResolver</span>[]
    {
    };

    <span class="pl-k">private</span> <span class="pl-en">MyApplicationResolver</span>() { }

    <span class="pl-k">public</span> <span class="pl-en">IMessagePackFormatter</span>&lt;<span class="pl-en">T</span>&gt; <span class="pl-en">GetFormatter</span>&lt;<span class="pl-en">T</span>&gt;()
    {
        <span class="pl-k">return</span> <span class="pl-smi">Cache</span>&lt;<span class="pl-en">T</span>&gt;.<span class="pl-smi">Formatter</span>;
    }

    <span class="pl-k">private</span> <span class="pl-k">static</span> <span class="pl-k">class</span> <span class="pl-en">Cache</span>&lt;<span class="pl-en">T</span>&gt;
    {
        <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-en">IMessagePackFormatter</span>&lt;<span class="pl-en">T</span>&gt; <span class="pl-en">Formatter</span>;

        <span class="pl-k">static</span> <span class="pl-en">Cache</span>()
        {
            <span class="pl-c"><span class="pl-c">//</span> configure your custom formatters.</span>
            <span class="pl-k">if</span> (<span class="pl-k">typeof</span>(<span class="pl-en">T</span>) <span class="pl-k">==</span> <span class="pl-k">typeof</span>(<span class="pl-en">XXX</span>))
            {
                <span class="pl-smi">Formatter</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">ICustomFormatter</span>();
                <span class="pl-k">return</span>;
            }

            <span class="pl-k">foreach</span> (<span class="pl-k">var</span> <span class="pl-en">resolver</span> <span class="pl-k">in</span> <span class="pl-smi">Resolvers</span>)
            {
                <span class="pl-k">var</span> <span class="pl-en">f</span> <span class="pl-k">=</span> <span class="pl-smi">resolver</span>.<span class="pl-en">GetFormatter</span>&lt;<span class="pl-en">T</span>&gt;();
                <span class="pl-k">if</span> (<span class="pl-smi">f</span> <span class="pl-k">!=</span> <span class="pl-c1">null</span>)
                {
                    <span class="pl-smi">Formatter</span> <span class="pl-k">=</span> <span class="pl-smi">f</span>;
                    <span class="pl-k">return</span>;
                }
            }
        }
    }
}</pre></div>
<blockquote>
<p dir="auto">NOTE: If you are creating a library, recommend using the above custom resolver instead of <code>CompositeResolver.Create</code>. Also, libraries must not use <code>StaticCompositeResolver</code> - as it is global state - to avoid compatibility issues.</p>
</blockquote>
<h7 dir="auto">
<a id="user-content-use-native-resolvers" class="anchor" aria-hidden="true" href="#use-native-resolvers"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Use native resolvers</h7>
<p dir="auto">By default, MessagePack for C# serializes GUID as string. This is much slower than the native .NET format GUID. The same applies to Decimal. If your application makes heavy use of GUID or Decimal and you don't have to worry about interoperability with other languages, you can replace them with the native serializers <code>NativeGuidResolver</code> and <code>NativeDecimalResolver</code> respectively.</p>
<p dir="auto">Also, <code>DateTime</code> is serialized using the MessagePack timestamp format. By using the <code>NativeDateTimeResolver</code>, it is possible to maintain Kind and perform faster serialization.</p>
<h7 dir="auto">
<a id="user-content-be-careful-when-copying-buffers" class="anchor" aria-hidden="true" href="#be-careful-when-copying-buffers"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Be careful when copying buffers</h7>
<p dir="auto"><code>MessagePackSerializer.Serialize</code> returns <code>byte[]</code> in default. The final <code>byte[]</code> is copied from an internal buffer pool. That is an extra cost.  You can use <code>IBufferWriter&lt;T&gt;</code> or the <code>Stream</code> API to write to buffers directly. If you want to use a buffer pool outside of the serializer, you should implement custom <code>IBufferWriter&lt;byte&gt;</code> or use an existing one such as <a href="https://github.com/AArnott/Nerdbank.Streams/blob/master/doc/Sequence.md"><code>Sequence&lt;T&gt;</code></a> from the <a href="https://nuget.org/packages/Nerdbank.Streams" rel="nofollow">Nerdbank.Streams</a> package.</p>
<p dir="auto">During deserialization, <code>MessagePackSerializer.Deserialize(ReadOnlyMemory&lt;byte&gt; buffer)</code> is better than the <code>Deserialize(Stream stream)</code> overload. This is because the Stream API version starts by reading the data, generating a <code>ReadOnlySequence&lt;byte&gt;</code>, and only then starts the deserialization.</p>
<h7 dir="auto">
<a id="user-content-choosing-compression" class="anchor" aria-hidden="true" href="#choosing-compression"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Choosing compression</h7>
<p dir="auto">Compression is generally effective when there is duplicate data. In MessagePack, arrays containing objects using string keys (Contractless) can be compressed efficiently because compression can be applied to many duplicate property names. Indexed keys compression is not as effectively compressed as string keys, but indexed keys are smaller in the first place.</p>
<p dir="auto">This is some example benchmark performance data;</p>
<table>
<thead>
<tr>
<th>Serializer</th>
<th align="right">Mean</th>
<th align="right">DataSize</th>
</tr>
</thead>
<tbody>
<tr>
<td>IntKey</td>
<td align="right">2.941 us</td>
<td align="right">469.00 B</td>
</tr>
<tr>
<td>IntKey(Lz4)</td>
<td align="right">3.449 us</td>
<td align="right">451.00 B</td>
</tr>
<tr>
<td>StringKey</td>
<td align="right">4.340 us</td>
<td align="right">1023.00 B</td>
</tr>
<tr>
<td>StringKey(Lz4)</td>
<td align="right">5.469 us</td>
<td align="right">868.00 B</td>
</tr>
</tbody>
</table>
<p dir="auto"><code>IntKey(Lz4)</code> is not as effectively compressed, but performance is still somewhat degraded. On the other hand, <code>StringKey</code> can be expected to have a sufficient effect on the binary size. However, this is just an example. Compression can be quite effective depending on the data, too, or have little effect other than slowing down your program. There are also cases in which well-compressible data exists in the values (such as long strings, e.g. containing HTML data with many repeated HTML tags). It is important to verify the actual effects of compression on a case by case basis.</p>
<h6 dir="auto">
<a id="user-content-extensions" class="anchor" aria-hidden="true" href="#extensions"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Extensions</h6>
<p dir="auto">MessagePack for C# has extension points that enable you to provide optimal serialization support for custom types. There are official extension support packages.</p>
<div class="highlight highlight-source-powershell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Install-Package MessagePack.ReactiveProperty
Install-Package MessagePack.UnityShims
Install-Package MessagePack.AspNetCoreMvcFormatter"><pre><span class="pl-c1">Install-Package</span> MessagePack.ReactiveProperty
<span class="pl-c1">Install-Package</span> MessagePack.UnityShims
<span class="pl-c1">Install-Package</span> MessagePack.AspNetCoreMvcFormatter</pre></div>
<p dir="auto">The <code>MessagePack.ReactiveProperty</code> package adds support for types of the <a href="https://github.com/runceel/ReactiveProperty">ReactiveProperty</a> library. It adds <code>ReactiveProperty&lt;&gt;</code>, <code>IReactiveProperty&lt;&gt;</code>, <code>IReadOnlyReactiveProperty&lt;&gt;</code>, <code>ReactiveCollection&lt;&gt;</code>, <code>Unit</code> serialization support. It is useful for save viewmodel state.</p>
<p dir="auto">The <code>MessagePack.UnityShims</code> package provides shims for <a href="https://unity3d.com/" rel="nofollow">Unity</a>'s standard structs (<code>Vector2</code>, <code>Vector3</code>, <code>Vector4</code>, <code>Quaternion</code>, <code>Color</code>, <code>Bounds</code>, <code>Rect</code>, <code>AnimationCurve</code>, <code>Keyframe</code>, <code>Matrix4x4</code>, <code>Gradient</code>, <code>Color32</code>, <code>RectOffset</code>, <code>LayerMask</code>, <code>Vector2Int</code>, <code>Vector3Int</code>, <code>RangeInt</code>, <code>RectInt</code>, <code>BoundsInt</code>) and corresponding formatters. It can enable proper communication between servers and Unity clients.</p>
<p dir="auto">After installation, extension packages must be enabled, by creating composite resolvers. Here is an example showing how to enable all extensions.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="// Set extensions to default resolver.
var resolver = MessagePack.Resolvers.CompositeResolver.Create(
    // enable extension packages first
    ReactivePropertyResolver.Instance,
    MessagePack.Unity.Extension.UnityBlitResolver.Instance,
    MessagePack.Unity.UnityResolver.Instance,

    // finally use standard (default) resolver
    StandardResolver.Instance
);
var options = MessagePackSerializerOptions.Standard.WithResolver(resolver);

// Pass options every time or set as default
MessagePackSerializer.DefaultOptions = options;"><pre><span class="pl-c"><span class="pl-c">//</span> Set extensions to default resolver.</span>
<span class="pl-k">var</span> <span class="pl-en">resolver</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Resolvers</span>.<span class="pl-smi">CompositeResolver</span>.<span class="pl-en">Create</span>(
    <span class="pl-c"><span class="pl-c">//</span> enable extension packages first</span>
    <span class="pl-smi">ReactivePropertyResolver</span>.<span class="pl-smi">Instance</span>,
    <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Unity</span>.<span class="pl-smi">Extension</span>.<span class="pl-smi">UnityBlitResolver</span>.<span class="pl-smi">Instance</span>,
    <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Unity</span>.<span class="pl-smi">UnityResolver</span>.<span class="pl-smi">Instance</span>,

    <span class="pl-c"><span class="pl-c">//</span> finally use standard (default) resolver</span>
    <span class="pl-smi">StandardResolver</span>.<span class="pl-smi">Instance</span>
);
<span class="pl-k">var</span> <span class="pl-en">options</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePackSerializerOptions</span>.<span class="pl-smi">Standard</span>.<span class="pl-en">WithResolver</span>(<span class="pl-smi">resolver</span>);

<span class="pl-c"><span class="pl-c">//</span> Pass options every time or set as default</span>
<span class="pl-smi">MessagePackSerializer</span>.<span class="pl-smi">DefaultOptions</span> <span class="pl-k">=</span> <span class="pl-smi">options</span>;</pre></div>
<p dir="auto">For configuration details, see: <a href="#resolvers">Extension Point section</a>.</p>
<p dir="auto">The <code>MessagePack.AspNetCoreMvcFormatter</code> is add-on for <a href="https://github.com/aspnet/Mvc">ASP.NET Core MVC</a>'s serialization to boost up performance. This is configuration sample.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="public void ConfigureServices(IServiceCollection services)
{
    services.AddMvc().AddMvcOptions(option =&gt;
    {
        option.OutputFormatters.Clear();
        option.OutputFormatters.Add(new MessagePackOutputFormatter(ContractlessStandardResolver.Options));
        option.InputFormatters.Clear();
        option.InputFormatters.Add(new MessagePackInputFormatter(ContractlessStandardResolver.Options));
    });
}"><pre><span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">ConfigureServices</span>(<span class="pl-en">IServiceCollection</span> <span class="pl-en">services</span>)
{
    <span class="pl-smi">services</span>.<span class="pl-en">AddMvc</span>().<span class="pl-en">AddMvcOptions</span>(<span class="pl-en">option</span> <span class="pl-k">=&gt;</span>
    {
        <span class="pl-smi">option</span>.<span class="pl-smi">OutputFormatters</span>.<span class="pl-en">Clear</span>();
        <span class="pl-smi">option</span>.<span class="pl-smi">OutputFormatters</span>.<span class="pl-en">Add</span>(<span class="pl-k">new</span> <span class="pl-en">MessagePackOutputFormatter</span>(<span class="pl-smi">ContractlessStandardResolver</span>.<span class="pl-smi">Options</span>));
        <span class="pl-smi">option</span>.<span class="pl-smi">InputFormatters</span>.<span class="pl-en">Clear</span>();
        <span class="pl-smi">option</span>.<span class="pl-smi">InputFormatters</span>.<span class="pl-en">Add</span>(<span class="pl-k">new</span> <span class="pl-en">MessagePackInputFormatter</span>(<span class="pl-smi">ContractlessStandardResolver</span>.<span class="pl-smi">Options</span>));
    });
}</pre></div>
<p dir="auto">Other authors are creating extension packages, too.</p>
<ul dir="auto">
<li>
<a href="https://github.com/Cysharp/MagicOnion">MagicOnion</a> - gRPC based HTTP/2 RPC Streaming Framework</li>
<li>
<a href="https://github.com/Cysharp/MasterMemory">MasterMemory</a> - Embedded Readonly In-Memory Document Database</li>
</ul>
<p dir="auto">You can make your own extension serializers or integrate with frameworks. Let's create and share!</p>
<ul dir="auto">
<li>
<a href="https://github.com/pocketberserker/MessagePack.FSharpExtensions">MessagePack.FSharpExtensions</a> - supports F# list, set, map, unit, option, discriminated union</li>
<li>
<a href="https://github.com/ARKlab/MessagePack">MessagePack.NodaTime</a> - Support for NodaTime types to MessagePack C#</li>
<li>
<a href="https://github.com/WebApiContrib/WebAPIContrib.Core#formatters">WebApiContrib.Core.Formatter.MessagePack</a> - supports ASP.NET Core MVC (<a href="https://www.strathweb.com/2017/06/using-messagepack-with-asp-net-core-mvc/" rel="nofollow">details in blog post</a>)</li>
<li>
<a href="https://github.com/sketch7/MessagePack.MediaTypeFormatter">MessagePack.MediaTypeFormatter</a> - MessagePack MediaTypeFormatter</li>
</ul>
<h6 dir="auto">
<a id="user-content-experimental-features" class="anchor" aria-hidden="true" href="#experimental-features"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Experimental Features</h6>
<p dir="auto">MessagePack for C# has experimental features which provides you with very performant formatters. There is an official package.</p>
<div class="highlight highlight-source-powershell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Install-Package MessagePack.Experimental"><pre><span class="pl-c1">Install-Package</span> MessagePack.Experimental</pre></div>
<p dir="auto">For detailed information, see: <a href="/neuecc/MessagePack-CSharp/blob/master/src/MessagePack.Experimental/Experimental.md">Experimental.md</a></p>
<h5 dir="auto">
<a id="user-content-api" class="anchor" aria-hidden="true" href="#api"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>API</h5>
<h6 dir="auto">
<a id="user-content-high-level-api-messagepackserializer" class="anchor" aria-hidden="true" href="#high-level-api-messagepackserializer"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>High-Level API (<code>MessagePackSerializer</code>)</h6>
<p dir="auto">The <code>MessagePackSerializer</code> class is the entry point of MessagePack for C#. Static methods make up the main API of MessagePack for C#.</p>
<table>
<thead>
<tr>
<th>API</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Serialize&lt;T&gt;</code></td>
<td>Serializes an object graph to a MessagePack binary blob. Async variant for Stream available. Non-generic overloads available.</td>
</tr>
<tr>
<td><code>Deserialize&lt;T&gt;</code></td>
<td>Deserializes a MessagePack binary to an object graph. Async variant for Stream available. Non-generic overloads available.</td>
</tr>
<tr>
<td><code>SerializeToJson</code></td>
<td>Serialize a MessagePack-compatible object graph to JSON instead of MessagePack. Useful for debugging.</td>
</tr>
<tr>
<td><code>ConvertToJson</code></td>
<td>Convert MessagePack binary to JSON. Useful for debugging.</td>
</tr>
<tr>
<td><code>ConvertFromJson</code></td>
<td>Convert JSON to a MessagePack binary.</td>
</tr>
</tbody>
</table>
<p dir="auto">The <code>MessagePackSerializer.Typeless</code> class offers most of the same APIs as above, but removes all type arguments from the API, forcing serialization to include the full type name of the root object. It uses the <code>TypelessContractlessStandardResolver</code>. Consider the result to be a .NET-specific MessagePack binary that isn't readily compatible with MessagePack deserializers in other runtimes.</p>
<p dir="auto">MessagePack for C# fundamentally serializes using <code>IBufferWriter&lt;byte&gt;</code> and deserializes using <code>ReadOnlySequence&lt;byte&gt;</code> or <code>Memory&lt;byte&gt;</code>. Method overloads are provided to conveniently use it with common buffer types and the .NET <code>Stream</code> class, but some of these convenience overloads require copying buffers once and therefore have a certain overhead.</p>
<p dir="auto">The high-level API uses a memory pool internally to avoid unnecessary memory allocation. If result size is under 64K, it allocates GC memory only for the return bytes.</p>
<p dir="auto">Each serialize/deserialize method takes an optional <code>MessagePackSerializerOptions</code> parameter which can be used to specify a custom <code>IFormatterResolver</code> to use or to activate LZ4 compression support.</p>
<h7 dir="auto">
<a id="user-content-multiple-messagepack-structures-on-a-single-stream" class="anchor" aria-hidden="true" href="#multiple-messagepack-structures-on-a-single-stream"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Multiple MessagePack structures on a single <code>Stream</code>
</h7>
<p dir="auto">To deserialize a <code>Stream</code> that contains multiple consecutive MessagePack data structures,
you can use the <code>MessagePackStreamReader</code> class to efficiently identify the <code>ReadOnlySequence&lt;byte&gt;</code>
for each data structure and deserialize it. For example:</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="static async Task&lt;List&lt;T&gt;&gt; DeserializeListFromStreamAsync&lt;T&gt;(Stream stream, CancellationToken cancellationToken)
{
    var dataStructures = new List&lt;T&gt;();
    using (var streamReader = new MessagePackStreamReader(stream))
    {
        while (await streamReader.ReadAsync(cancellationToken) is ReadOnlySequence&lt;byte&gt; msgpack)
        {
            dataStructures.Add(MessagePackSerializer.Deserialize&lt;T&gt;(msgpack, cancellationToken: cancellationToken));
        }
    }

    return dataStructures;
}"><pre><span class="pl-k">static</span> <span class="pl-k">async</span> <span class="pl-en">Task</span>&lt;<span class="pl-en">List</span>&lt;<span class="pl-en">T</span>&gt;&gt; <span class="pl-en">DeserializeListFromStreamAsync</span>&lt;<span class="pl-en">T</span>&gt;(<span class="pl-en">Stream</span> <span class="pl-en">stream</span>, <span class="pl-en">CancellationToken</span> <span class="pl-en">cancellationToken</span>)
{
    <span class="pl-k">var</span> <span class="pl-en">dataStructures</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">List</span>&lt;<span class="pl-en">T</span>&gt;();
    <span class="pl-k">using</span> (<span class="pl-k">var</span> <span class="pl-en">streamReader</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">MessagePackStreamReader</span>(<span class="pl-smi">stream</span>))
    {
        <span class="pl-k">while</span> (<span class="pl-k">await</span> <span class="pl-smi">streamReader</span>.<span class="pl-en">ReadAsync</span>(<span class="pl-smi">cancellationToken</span>) <span class="pl-k">is</span> <span class="pl-en">ReadOnlySequence</span>&lt;<span class="pl-k">byte</span>&gt; <span class="pl-smi">msgpack</span>)
        {
            <span class="pl-smi">dataStructures</span>.<span class="pl-en">Add</span>(<span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">Deserialize</span>&lt;<span class="pl-en">T</span>&gt;(<span class="pl-smi">msgpack</span>, <span class="pl-en">cancellationToken</span>: <span class="pl-smi">cancellationToken</span>));
        }
    }

    <span class="pl-k">return</span> <span class="pl-smi">dataStructures</span>;
}</pre></div>
<h6 dir="auto">
<a id="user-content-low-level-api-imessagepackformattert" class="anchor" aria-hidden="true" href="#low-level-api-imessagepackformattert"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Low-Level API (<code>IMessagePackFormatter&lt;T&gt;</code>)</h6>
<p dir="auto">The <code>IMessagePackFormatter&lt;T&gt;</code> interface is responsible for serializing a unique type. For example <code>Int32Formatter : IMessagePackFormatter&lt;Int32&gt;</code> represents Int32 MessagePack serializer.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="public interface IMessagePackFormatter&lt;T&gt;
{
    void Serialize(ref MessagePackWriter writer, T value, MessagePackSerializerOptions options);
    T Deserialize(ref MessagePackReader reader, MessagePackSerializerOptions options);
}"><pre><span class="pl-k">public</span> <span class="pl-k">interface</span> <span class="pl-en">IMessagePackFormatter</span>&lt;<span class="pl-en">T</span>&gt;
{
    <span class="pl-k">void</span> <span class="pl-en">Serialize</span>(<span class="pl-k">ref</span> <span class="pl-en">MessagePackWriter</span> <span class="pl-en">writer</span>, <span class="pl-en">T</span> <span class="pl-en">value</span>, <span class="pl-en">MessagePackSerializerOptions</span> <span class="pl-en">options</span>);
    <span class="pl-en">T</span> <span class="pl-en">Deserialize</span>(<span class="pl-k">ref</span> <span class="pl-en">MessagePackReader</span> <span class="pl-en">reader</span>, <span class="pl-en">MessagePackSerializerOptions</span> <span class="pl-en">options</span>);
}</pre></div>
<p dir="auto">Many built-in formatters exists under <code>MessagePack.Formatters</code>. Your custom types are usually automatically supported with the built-in type resolvers that generate new <code>IMessagePackFormatter&lt;T&gt;</code> types on-the-fly using dynamic code generation. See our <a href="#aot">AOT code generation</a> support for platforms that do not support this.</p>
<p dir="auto">However, some types - especially those provided by third party libraries or the runtime itself - cannot be appropriately annotated, and contractless serialization would produce inefficient or even wrong results.
To take more control over the serialization of such custom types, write your own <code>IMessagePackFormatter&lt;T&gt;</code> implementation.
Here is an example of such a custom formatter implementation. Note its use of the primitive API that is described in the next section.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='/// &lt;summary&gt;Serializes a &lt;see cref="FileInfo" /&gt; by its full path as a string.&lt;/summary&gt;
public class FileInfoFormatter : IMessagePackFormatter&lt;FileInfo&gt;
{
    public void Serialize(
      ref MessagePackWriter writer, FileInfo value, MessagePackSerializerOptions options)
    {
        if (value == null)
        {
            writer.WriteNil();
            return;
        }

        writer.WriteString(value.FullName);
    }

    public FileInfo Deserialize(
      ref MessagePackReader reader, MessagePackSerializerOptions options)
    {
        if (reader.TryReadNil())
        {
            return null;
        }

        options.Security.DepthStep(ref reader);

        var path = reader.ReadString();

        reader.Depth--;
        return new FileInfo(path);
    }
}'><pre><span class="pl-c"><span class="pl-c">///</span> &lt;<span class="pl-ent"><span class="pl-ent">summary</span></span>&gt;Serializes a &lt;<span class="pl-ent"><span class="pl-ent">see</span></span> <span class="pl-e"><span class="pl-e">cref</span></span>=<span class="pl-s"><span class="pl-pds">"</span>FileInfo<span class="pl-pds">"</span></span> /&gt; by its full path as a string.&lt;/<span class="pl-ent"><span class="pl-ent">summary</span></span>&gt;</span>
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">FileInfoFormatter</span> : <span class="pl-en">IMessagePackFormatter</span>&lt;<span class="pl-en">FileInfo</span>&gt;
{
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">Serialize</span>(
      <span class="pl-k">ref</span> <span class="pl-en">MessagePackWriter</span> <span class="pl-en">writer</span>, <span class="pl-en">FileInfo</span> <span class="pl-en">value</span>, <span class="pl-en">MessagePackSerializerOptions</span> <span class="pl-en">options</span>)
    {
        <span class="pl-k">if</span> (<span class="pl-smi">value</span> <span class="pl-k">==</span> <span class="pl-c1">null</span>)
        {
            <span class="pl-smi">writer</span>.<span class="pl-en">WriteNil</span>();
            <span class="pl-k">return</span>;
        }

        <span class="pl-smi">writer</span>.<span class="pl-en">WriteString</span>(<span class="pl-smi">value</span>.<span class="pl-smi">FullName</span>);
    }

    <span class="pl-k">public</span> <span class="pl-en">FileInfo</span> <span class="pl-en">Deserialize</span>(
      <span class="pl-k">ref</span> <span class="pl-en">MessagePackReader</span> <span class="pl-en">reader</span>, <span class="pl-en">MessagePackSerializerOptions</span> <span class="pl-en">options</span>)
    {
        <span class="pl-k">if</span> (<span class="pl-smi">reader</span>.<span class="pl-en">TryReadNil</span>())
        {
            <span class="pl-k">return</span> <span class="pl-c1">null</span>;
        }

        <span class="pl-smi">options</span>.<span class="pl-smi">Security</span>.<span class="pl-en">DepthStep</span>(<span class="pl-k">ref</span> <span class="pl-smi">reader</span>);

        <span class="pl-k">var</span> <span class="pl-en">path</span> <span class="pl-k">=</span> <span class="pl-smi">reader</span>.<span class="pl-en">ReadString</span>();

        <span class="pl-smi">reader</span>.<span class="pl-smi">Depth</span><span class="pl-k">--</span>;
        <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-en">FileInfo</span>(<span class="pl-smi">path</span>);
    }
}</pre></div>
<p dir="auto">The <code>DepthStep</code> and <code>Depth--</code> statements provide a level of security while deserializing untrusted data
that might otherwise be able to execute a denial of service attack by sending MessagePack data that would
deserialize into a very deep object graph leading to a <code>StackOverflowException</code> that would crash the process.
This pair of statements should surround the bulk of any <code>IMessagePackFormatter&lt;T&gt;.Deserialize</code> method.</p>
<p dir="auto"><strong>Important</strong>: A message pack formatter must <em>read or write exactly one data structure</em>.
In the above example we just read/write a string. If you have more than one element to write out,
you must precede it with a map or array header. You must read the entire map/array when deserializing.
For example:</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="public class MySpecialObjectFormatter : IMessagePackFormatter&lt;MySpecialObject&gt;
{
    public void Serialize(
      ref MessagePackWriter writer, MySpecialObject value, MessagePackSerializerOptions options)
    {
        if (value == null)
        {
            writer.WriteNil();
            return;
        }

        writer.WriteArrayHeader(2);
        writer.WriteString(value.FullName);
        writer.WriteString(value.Age);
    }

    public MySpecialObject Deserialize(
      ref MessagePackReader reader, MessagePackSerializerOptions options)
    {
        if (reader.TryReadNil())
        {
            return null;
        }

        options.Security.DepthStep(ref reader);

        string fullName = null;
        int age = 0;

        // Loop over *all* array elements independently of how many we expect,
        // since if we're serializing an older/newer version of this object it might
        // vary in number of elements that were serialized, but the contract of the formatter
        // is that exactly one data structure must be read, regardless.
        // Alternatively, we could check that the size of the array/map is what we expect
        // and throw if it is not.
        int count = reader.ReadArrayHeader();
        for (int i = 0; i &lt; count; i++)
        {
            switch (i)
            {
                case 0:
                    fullName = reader.ReadString();
                    break;
                case 1:
                    age = reader.ReadInt32();
                    break;
                default:
                    reader.Skip();
                    break;
            }
        }

        reader.Depth--;
        return new MySpecialObject(fullName, age);
    }
}"><pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MySpecialObjectFormatter</span> : <span class="pl-en">IMessagePackFormatter</span>&lt;<span class="pl-en">MySpecialObject</span>&gt;
{
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">Serialize</span>(
      <span class="pl-k">ref</span> <span class="pl-en">MessagePackWriter</span> <span class="pl-en">writer</span>, <span class="pl-en">MySpecialObject</span> <span class="pl-en">value</span>, <span class="pl-en">MessagePackSerializerOptions</span> <span class="pl-en">options</span>)
    {
        <span class="pl-k">if</span> (<span class="pl-smi">value</span> <span class="pl-k">==</span> <span class="pl-c1">null</span>)
        {
            <span class="pl-smi">writer</span>.<span class="pl-en">WriteNil</span>();
            <span class="pl-k">return</span>;
        }

        <span class="pl-smi">writer</span>.<span class="pl-en">WriteArrayHeader</span>(<span class="pl-c1">2</span>);
        <span class="pl-smi">writer</span>.<span class="pl-en">WriteString</span>(<span class="pl-smi">value</span>.<span class="pl-smi">FullName</span>);
        <span class="pl-smi">writer</span>.<span class="pl-en">WriteString</span>(<span class="pl-smi">value</span>.<span class="pl-smi">Age</span>);
    }

    <span class="pl-k">public</span> <span class="pl-en">MySpecialObject</span> <span class="pl-en">Deserialize</span>(
      <span class="pl-k">ref</span> <span class="pl-en">MessagePackReader</span> <span class="pl-en">reader</span>, <span class="pl-en">MessagePackSerializerOptions</span> <span class="pl-en">options</span>)
    {
        <span class="pl-k">if</span> (<span class="pl-smi">reader</span>.<span class="pl-en">TryReadNil</span>())
        {
            <span class="pl-k">return</span> <span class="pl-c1">null</span>;
        }

        <span class="pl-smi">options</span>.<span class="pl-smi">Security</span>.<span class="pl-en">DepthStep</span>(<span class="pl-k">ref</span> <span class="pl-smi">reader</span>);

        <span class="pl-k">string</span> <span class="pl-en">fullName</span> <span class="pl-k">=</span> <span class="pl-c1">null</span>;
        <span class="pl-k">int</span> <span class="pl-en">age</span> <span class="pl-k">=</span> <span class="pl-c1">0</span>;

        <span class="pl-c"><span class="pl-c">//</span> Loop over *all* array elements independently of how many we expect,</span>
        <span class="pl-c"><span class="pl-c">//</span> since if we're serializing an older/newer version of this object it might</span>
        <span class="pl-c"><span class="pl-c">//</span> vary in number of elements that were serialized, but the contract of the formatter</span>
        <span class="pl-c"><span class="pl-c">//</span> is that exactly one data structure must be read, regardless.</span>
        <span class="pl-c"><span class="pl-c">//</span> Alternatively, we could check that the size of the array/map is what we expect</span>
        <span class="pl-c"><span class="pl-c">//</span> and throw if it is not.</span>
        <span class="pl-k">int</span> <span class="pl-en">count</span> <span class="pl-k">=</span> <span class="pl-smi">reader</span>.<span class="pl-en">ReadArrayHeader</span>();
        <span class="pl-k">for</span> (<span class="pl-k">int</span> <span class="pl-en">i</span> <span class="pl-k">=</span> <span class="pl-c1">0</span>; <span class="pl-smi">i</span> <span class="pl-k">&lt;</span> <span class="pl-smi">count</span>; <span class="pl-smi">i</span><span class="pl-k">++</span>)
        {
            <span class="pl-k">switch</span> (<span class="pl-smi">i</span>)
            {
                <span class="pl-k">case</span> <span class="pl-c1">0</span>:
                    <span class="pl-smi">fullName</span> <span class="pl-k">=</span> <span class="pl-smi">reader</span>.<span class="pl-en">ReadString</span>();
                    <span class="pl-k">break</span>;
                <span class="pl-k">case</span> <span class="pl-c1">1</span>:
                    <span class="pl-smi">age</span> <span class="pl-k">=</span> <span class="pl-smi">reader</span>.<span class="pl-en">ReadInt32</span>();
                    <span class="pl-k">break</span>;
                <span class="pl-k">default</span>:
                    <span class="pl-smi">reader</span>.<span class="pl-en">Skip</span>();
                    <span class="pl-k">break</span>;
            }
        }

        <span class="pl-smi">reader</span>.<span class="pl-smi">Depth</span><span class="pl-k">--</span>;
        <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-en">MySpecialObject</span>(<span class="pl-smi">fullName</span>, <span class="pl-smi">age</span>);
    }
}</pre></div>
<p dir="auto">Your custom formatters must be discoverable via some <code>IFormatterResolver</code>. Learn more in our <a href="#resolvers">resolvers</a> section.</p>
<p dir="auto">You can see many other samples from <a href="https://github.com/neuecc/MessagePack-CSharp/tree/master/src/MessagePack/Formatters">builtin formatters</a>.</p>
<h6 dir="auto">
<a id="user-content-primitive-api-messagepackwriter-messagepackreader" class="anchor" aria-hidden="true" href="#primitive-api-messagepackwriter-messagepackreader"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Primitive API (<code>MessagePackWriter</code>, <code>MessagePackReader</code>)</h6>
<p dir="auto">The <code>MessagePackWriter</code> and <code>MessagePackReader</code> structs make up the lowest-level API. They read and write the primitives types defined in the MessagePack specification.</p>
<h7 dir="auto">
<a id="user-content-messagepackreader" class="anchor" aria-hidden="true" href="#messagepackreader"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>MessagePackReader</code>
</h7>
<p dir="auto">A <code>MessagePackReader</code> can efficiently read from <code>ReadOnlyMemory&lt;byte&gt;</code> or <code>ReadOnlySequence&lt;byte&gt;</code> without any allocations, except to allocate a new <code>string</code> as required by the <code>ReadString()</code> method. All other methods return either value structs or <code>ReadOnlySequence&lt;byte&gt;</code> slices for extensions/arrays.
Reading directly from <code>ReadOnlySequence&lt;byte&gt;</code> means the reader can directly consume some modern high performance APIs such as <code>PipeReader</code>.</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Skip</code></td>
<td>Advances the reader's position past the current value. If the value is complex (e.g. map, array) the entire structure is skipped.</td>
</tr>
<tr>
<td><code>Read*</code></td>
<td>Read and return a value whose type is named by the method name from the current reader position. Throws if the expected type does not match the actual type. When reading numbers, the type need not match the binary-specified type exactly. The numeric value will be coerced into the desired type or throw if the integer type is too small for a large value.</td>
</tr>
<tr>
<td><code>TryReadNil</code></td>
<td>Advances beyond the current value if the current value is <code>nil</code> and returns <code>true</code>; otherwise leaves the reader's position unchanged and returns <code>false</code>.</td>
</tr>
<tr>
<td><code>ReadBytes</code></td>
<td>Returns a slice of the input sequence representing the contents of a <code>byte[]</code>, and advances the reader.</td>
</tr>
<tr>
<td><code>ReadStringSequence</code></td>
<td>Returns a slice of the input sequence representing the contents of a <code>string</code> without decoding it, and advances the reader.</td>
</tr>
<tr>
<td><code>Clone</code></td>
<td>Creates a new <code>MessagePackReader</code> with the specified input sequence and the same settings as the original reader.</td>
</tr>
<tr>
<td><code>CreatePeekReader</code></td>
<td>Creates a new reader with the same position as this one, allowing the caller to "read ahead" without impacting the original reader's position.</td>
</tr>
<tr>
<td><code>NextCode</code></td>
<td>Reads the low-level MessagePack <code>byte</code> that describes the type of the next value. Does not advance the reader. See <a href="https://github.com/msgpack/msgpack/blob/master/spec.md#overview">MessagePack format of first byte</a>. Its static class has <code>ToMessagePackType</code> and <code>ToFormatName</code> utility methods. <code>MessagePackRange</code> means Min-Max fix range of MessagePack format.</td>
</tr>
<tr>
<td><code>NextMessagePackType</code></td>
<td>Describes the <code>NextCode</code> value as a higher level category. Does not advance the reader. See <a href="https://github.com/msgpack/msgpack/blob/master/spec.md#serialization-type-to-format-conversion">MessagePack spec of source types</a>.</td>
</tr>
<tr>
<td>(others)</td>
<td>Other methods and properties as described by the .xml doc comment file and Intellisense.</td>
</tr>
</tbody>
</table>
<p dir="auto">The <code>MessagePackReader</code> is capable of automatically interpreting both the old and new MessagePack spec.</p>
<h7 dir="auto">
<a id="user-content-messagepackwriter" class="anchor" aria-hidden="true" href="#messagepackwriter"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>MessagePackWriter</code>
</h7>
<p dir="auto">A <code>MessagePackWriter</code> writes to a given instance of <code>IBufferWriter&lt;byte&gt;</code>. Several common implementations of this exist, allowing zero allocations and minimal buffer copies while writing directly to several I/O APIs including <code>PipeWriter</code>.</p>
<p dir="auto">The <code>MessagePackWriter</code> writes the new MessagePack spec by default, but can write MessagePack compatible with the old spec by setting the <code>OldSpec</code> property to <code>true</code>.</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Clone</code></td>
<td>Creates a new <code>MessagePackWriter</code> with the specified underlying <code>IBufferWriter&lt;byte&gt;</code> and the same settings as the original writer.</td>
</tr>
<tr>
<td><code>Flush</code></td>
<td>Writes any buffered bytes to the underlying <code>IBufferWriter&lt;byte&gt;</code>.</td>
</tr>
<tr>
<td><code>WriteNil</code></td>
<td>Writes the MessagePack equivalent of .NET's <code>null</code> value.</td>
</tr>
<tr>
<td><code>Write</code></td>
<td>Writes any MessagePack primitive value in the most compact form possible. Has overloads for every primitive type defined by the MessagePack spec.</td>
</tr>
<tr>
<td><code>Write*IntType*</code></td>
<td>Writes an integer value in exactly the MessagePack type specified, even if a more compact format exists.</td>
</tr>
<tr>
<td><code>WriteMapHeader</code></td>
<td>Introduces a map by specifying the number of key=value pairs it contains.</td>
</tr>
<tr>
<td><code>WriteArrayHeader</code></td>
<td>Introduces an array by specifying the number of elements it contains.</td>
</tr>
<tr>
<td><code>WriteExtensionFormat</code></td>
<td>Writes the full content of an extension value including length, type code and content.</td>
</tr>
<tr>
<td><code>WriteExtensionFormatHeader</code></td>
<td>Writes just the header (length and type code) of an extension value.</td>
</tr>
<tr>
<td><code>WriteRaw</code></td>
<td>Copies the specified bytes directly to the underlying <code>IBufferWriter&lt;byte&gt;</code> without any validation.</td>
</tr>
<tr>
<td>(others)</td>
<td>Other methods and properties as described by the .xml doc comment file and Intellisense.</td>
</tr>
</tbody>
</table>
<p dir="auto"><code>DateTime</code> is serialized to <a href="https://github.com/msgpack/msgpack/blob/master/spec.md#formats-timestamp">MessagePack Timestamp format</a>, it serialize/deserialize UTC and loses <code>Kind</code> info and requires that <code>MessagePackWriter.OldSpec == false</code>.
If you use the <code>NativeDateTimeResolver</code>, <code>DateTime</code> values will be serialized using .NET's native <code>Int64</code> representation, which preserves <code>Kind</code> info but may not be interoperable with non-.NET platforms.</p>
<h6 dir="auto">
<a id="user-content-main-extension-point-iformatterresolver" class="anchor" aria-hidden="true" href="#main-extension-point-iformatterresolver"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a name="user-content-resolvers"></a>Main Extension Point (<code>IFormatterResolver</code>)</h6>
<p dir="auto">An <code>IFormatterResolver</code> is storage of typed serializers. The <code>MessagePackSerializer</code> API accepts a <code>MessagePackSerializerOptions</code> object which specifies the <code>IFormatterResolver</code> to use, allowing customization of the serialization of complex types.</p>
<table>
<thead>
<tr>
<th>Resolver Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>BuiltinResolver</td>
<td>Builtin primitive and standard classes resolver. It includes primitive(int, bool, string...) and there nullable, array and list. and some extra builtin types(<code>Guid</code>, <code>Uri</code>, <code>BigInteger</code>, etc...).</td>
</tr>
<tr>
<td>StandardResolver</td>
<td>Composited resolver. It resolves in the following order <code>builtin -&gt; attribute -&gt; dynamic enum -&gt; dynamic generic -&gt; dynamic union -&gt; dynamic object -&gt; dynamic object fallback</code>. This is the default of MessagePackSerializer.</td>
</tr>
<tr>
<td>ContractlessStandardResolver</td>
<td>Composited <code>StandardResolver</code>(except dynamic object fallback) -&gt; <code>DynamicContractlessObjectResolver</code> -&gt; <code>DynamicObjectTypeFallbackResolver</code>. It enables contractless serialization.</td>
</tr>
<tr>
<td>StandardResolverAllowPrivate</td>
<td>Same as StandardResolver but allow serialize/deserialize private members.</td>
</tr>
<tr>
<td>ContractlessStandardResolverAllowPrivate</td>
<td>Same as ContractlessStandardResolver but allow serialize/deserialize private members.</td>
</tr>
<tr>
<td>PrimitiveObjectResolver</td>
<td>MessagePack primitive object resolver. It is used fallback in <code>object</code> type and supports <code>bool</code>, <code>char</code>, <code>sbyte</code>, <code>byte</code>, <code>short</code>, <code>int</code>, <code>long</code>, <code>ushort</code>, <code>uint</code>, <code>ulong</code>, <code>float</code>, <code>double</code>, <code>DateTime</code>, <code>string</code>, <code>byte[]</code>, <code>ICollection</code>, <code>IDictionary</code>.</td>
</tr>
<tr>
<td>DynamicObjectTypeFallbackResolver</td>
<td>Serialize is used type in from <code>object</code> type, deserialize is used PrimitiveObjectResolver.</td>
</tr>
<tr>
<td>AttributeFormatterResolver</td>
<td>Get formatter from <code>[MessagePackFormatter]</code> attribute.</td>
</tr>
<tr>
<td>CompositeResolver</td>
<td>Composes several resolvers and/or formatters together in an ordered list, allowing reuse and overriding of behaviors of existing resolvers and formatters.</td>
</tr>
<tr>
<td>NativeDateTimeResolver</td>
<td>Serialize by .NET native DateTime binary format. It keeps <code>DateTime.Kind</code> that loses by standard(MessagePack timestamp) format.</td>
</tr>
<tr>
<td>NativeGuidResolver</td>
<td>Serialize by .NET native Guid binary representation. It is faster than standard(string) representation.</td>
</tr>
<tr>
<td>NativeDecimalResolver</td>
<td>Serialize by .NET native decimal binary representation. It is faster than standard(string) representation.</td>
</tr>
<tr>
<td>DynamicEnumResolver</td>
<td>Resolver of enum and there nullable, serialize there underlying type. It uses dynamic code generation to avoid boxing and boostup performance serialize there name.</td>
</tr>
<tr>
<td>DynamicEnumAsStringResolver</td>
<td>Resolver of enum and there nullable.  It uses reflection call for resolve nullable at first time.</td>
</tr>
<tr>
<td>DynamicGenericResolver</td>
<td>Resolver of generic type(<code>Tuple&lt;&gt;</code>, <code>List&lt;&gt;</code>, <code>Dictionary&lt;,&gt;</code>, <code>Array</code>, etc). It uses reflection call for resolve generic argument at first time.</td>
</tr>
<tr>
<td>DynamicUnionResolver</td>
<td>Resolver of interface marked by UnionAttribute. It uses dynamic code generation to create dynamic formatter.</td>
</tr>
<tr>
<td>DynamicObjectResolver</td>
<td>Resolver of class and struct made by MessagePackObjectAttribute. It uses dynamic code generation to create dynamic formatter.</td>
</tr>
<tr>
<td>DynamicContractlessObjectResolver</td>
<td>Resolver of all classes and structs. It does not needs <code>MessagePackObjectAttribute</code> and serialized key as string(same as marked <code>[MessagePackObject(true)]</code>).</td>
</tr>
<tr>
<td>DynamicObjectResolverAllowPrivate</td>
<td>Same as DynamicObjectResolver but allow serialize/deserialize private members.</td>
</tr>
<tr>
<td>DynamicContractlessObjectResolverAllowPrivate</td>
<td>Same as DynamicContractlessObjectResolver but allow serialize/deserialize private members.</td>
</tr>
<tr>
<td>TypelessObjectResolver</td>
<td>Used for <code>object</code>, embed .NET type in binary by <code>ext(100)</code> format so no need to pass type in deserialization.</td>
</tr>
<tr>
<td>TypelessContractlessStandardResolver</td>
<td>Composited resolver. It resolves in the following order <code>nativedatetime -&gt; builtin -&gt; attribute -&gt; dynamic enum -&gt; dynamic generic -&gt; dynamic union -&gt; dynamic object -&gt; dynamiccontractless -&gt; typeless</code>. This is the default of <code>MessagePackSerializer.Typeless</code>
</td>
</tr>
</tbody>
</table>
<p dir="auto">Each instance of <code>MessagePackSerializer</code> accepts only a single resolver. Most object graphs will need more than one for serialization, so composing a single resolver made up of several is often required, and can be done with the <code>CompositeResolver</code> as shown below:</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="// Do this once and store it for reuse.
var resolver = MessagePack.Resolvers.CompositeResolver.Create(
    // resolver custom types first
    ReactivePropertyResolver.Instance,
    MessagePack.Unity.Extension.UnityBlitResolver.Instance,
    MessagePack.Unity.UnityResolver.Instance,

    // finally use standard resolver
    StandardResolver.Instance
);
var options = MessagePackSerializerOptions.Standard.WithResolver(resolver);

// Each time you serialize/deserialize, specify the options:
byte[] msgpackBytes = MessagePackSerializer.Serialize(myObject, options);
T myObject2 = MessagePackSerializer.Deserialize&lt;MyObject&gt;(msgpackBytes, options);"><pre><span class="pl-c"><span class="pl-c">//</span> Do this once and store it for reuse.</span>
<span class="pl-k">var</span> <span class="pl-en">resolver</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Resolvers</span>.<span class="pl-smi">CompositeResolver</span>.<span class="pl-en">Create</span>(
    <span class="pl-c"><span class="pl-c">//</span> resolver custom types first</span>
    <span class="pl-smi">ReactivePropertyResolver</span>.<span class="pl-smi">Instance</span>,
    <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Unity</span>.<span class="pl-smi">Extension</span>.<span class="pl-smi">UnityBlitResolver</span>.<span class="pl-smi">Instance</span>,
    <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Unity</span>.<span class="pl-smi">UnityResolver</span>.<span class="pl-smi">Instance</span>,

    <span class="pl-c"><span class="pl-c">//</span> finally use standard resolver</span>
    <span class="pl-smi">StandardResolver</span>.<span class="pl-smi">Instance</span>
);
<span class="pl-k">var</span> <span class="pl-en">options</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePackSerializerOptions</span>.<span class="pl-smi">Standard</span>.<span class="pl-en">WithResolver</span>(<span class="pl-smi">resolver</span>);

<span class="pl-c"><span class="pl-c">//</span> Each time you serialize/deserialize, specify the options:</span>
<span class="pl-k">byte</span>[] <span class="pl-en">msgpackBytes</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">Serialize</span>(<span class="pl-smi">myObject</span>, <span class="pl-smi">options</span>);
<span class="pl-en">T</span> <span class="pl-en">myObject2</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePackSerializer</span>.<span class="pl-en">Deserialize</span>&lt;<span class="pl-en">MyObject</span>&gt;(<span class="pl-smi">msgpackBytes</span>, <span class="pl-smi">options</span>);</pre></div>
<p dir="auto">A resolver can be set as default with <code>MessagePackSerializer.DefaultOptions = options</code>, but <strong>WARNING</strong>:
When developing an application where you control all MessagePack-related code it may be safe to rely on this mutable static to control behavior.
For all other libraries or multi-purpose applications that use <code>MessagePackSerializer</code> you should explicitly specify the <code>MessagePackSerializerOptions</code> to use with each method invocation to guarantee your code behaves as you expect even when sharing an <code>AppDomain</code> or process with other MessagePack users that may change this static property.</p>
<p dir="auto">Here is sample of use <code>DynamicEnumAsStringResolver</code> with <code>DynamicContractlessObjectResolver</code> (It is Json.NET-like lightweight setting.)</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="// composite same as StandardResolver
var resolver = MessagePack.Resolvers.CompositeResolver.Create(
    MessagePack.Resolvers.BuiltinResolver.Instance,
    MessagePack.Resolvers.AttributeFormatterResolver.Instance,

    // replace enum resolver
    MessagePack.Resolvers.DynamicEnumAsStringResolver.Instance,

    MessagePack.Resolvers.DynamicGenericResolver.Instance,
    MessagePack.Resolvers.DynamicUnionResolver.Instance,
    MessagePack.Resolvers.DynamicObjectResolver.Instance,

    MessagePack.Resolvers.PrimitiveObjectResolver.Instance,

    // final fallback(last priority)
    MessagePack.Resolvers.DynamicContractlessObjectResolver.Instance
);"><pre><span class="pl-c"><span class="pl-c">//</span> composite same as StandardResolver</span>
<span class="pl-k">var</span> <span class="pl-en">resolver</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Resolvers</span>.<span class="pl-smi">CompositeResolver</span>.<span class="pl-en">Create</span>(
    <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Resolvers</span>.<span class="pl-smi">BuiltinResolver</span>.<span class="pl-smi">Instance</span>,
    <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Resolvers</span>.<span class="pl-smi">AttributeFormatterResolver</span>.<span class="pl-smi">Instance</span>,

    <span class="pl-c"><span class="pl-c">//</span> replace enum resolver</span>
    <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Resolvers</span>.<span class="pl-smi">DynamicEnumAsStringResolver</span>.<span class="pl-smi">Instance</span>,

    <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Resolvers</span>.<span class="pl-smi">DynamicGenericResolver</span>.<span class="pl-smi">Instance</span>,
    <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Resolvers</span>.<span class="pl-smi">DynamicUnionResolver</span>.<span class="pl-smi">Instance</span>,
    <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Resolvers</span>.<span class="pl-smi">DynamicObjectResolver</span>.<span class="pl-smi">Instance</span>,

    <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Resolvers</span>.<span class="pl-smi">PrimitiveObjectResolver</span>.<span class="pl-smi">Instance</span>,

    <span class="pl-c"><span class="pl-c">//</span> final fallback(last priority)</span>
    <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Resolvers</span>.<span class="pl-smi">DynamicContractlessObjectResolver</span>.<span class="pl-smi">Instance</span>
);</pre></div>
<p dir="auto">If you want to make an extension package, you should write both a formatter and resolver
for easier consumption.
Here is sample of a resolver:</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="public class SampleCustomResolver : IFormatterResolver
{
    // Resolver should be singleton.
    public static readonly IFormatterResolver Instance = new SampleCustomResolver();

    private SampleCustomResolver()
    {
    }

    // GetFormatter&lt;T&gt;'s get cost should be minimized so use type cache.
    public IMessagePackFormatter&lt;T&gt; GetFormatter&lt;T&gt;()
    {
        return FormatterCache&lt;T&gt;.Formatter;
    }

    private static class FormatterCache&lt;T&gt;
    {
        public static readonly IMessagePackFormatter&lt;T&gt; Formatter;

        // generic's static constructor should be minimized for reduce type generation size!
        // use outer helper method.
        static FormatterCache()
        {
            Formatter = (IMessagePackFormatter&lt;T&gt;)SampleCustomResolverGetFormatterHelper.GetFormatter(typeof(T));
        }
    }
}

internal static class SampleCustomResolverGetFormatterHelper
{
    // If type is concrete type, use type-formatter map
    static readonly Dictionary&lt;Type, object&gt; formatterMap = new Dictionary&lt;Type, object&gt;()
    {
        {typeof(FileInfo), new FileInfoFormatter()}
        // add more your own custom serializers.
    };

    internal static object GetFormatter(Type t)
    {
        object formatter;
        if (formatterMap.TryGetValue(t, out formatter))
        {
            return formatter;
        }

        // If type can not get, must return null for fallback mechanism.
        return null;
    }
}"><pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">SampleCustomResolver</span> : <span class="pl-en">IFormatterResolver</span>
{
    <span class="pl-c"><span class="pl-c">//</span> Resolver should be singleton.</span>
    <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-k">readonly</span> <span class="pl-en">IFormatterResolver</span> <span class="pl-en">Instance</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">SampleCustomResolver</span>();

    <span class="pl-k">private</span> <span class="pl-en">SampleCustomResolver</span>()
    {
    }

    <span class="pl-c"><span class="pl-c">//</span> GetFormatter&lt;T&gt;'s get cost should be minimized so use type cache.</span>
    <span class="pl-k">public</span> <span class="pl-en">IMessagePackFormatter</span>&lt;<span class="pl-en">T</span>&gt; <span class="pl-en">GetFormatter</span>&lt;<span class="pl-en">T</span>&gt;()
    {
        <span class="pl-k">return</span> <span class="pl-smi">FormatterCache</span>&lt;<span class="pl-en">T</span>&gt;.<span class="pl-smi">Formatter</span>;
    }

    <span class="pl-k">private</span> <span class="pl-k">static</span> <span class="pl-k">class</span> <span class="pl-en">FormatterCache</span>&lt;<span class="pl-en">T</span>&gt;
    {
        <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-k">readonly</span> <span class="pl-en">IMessagePackFormatter</span>&lt;<span class="pl-en">T</span>&gt; <span class="pl-en">Formatter</span>;

        <span class="pl-c"><span class="pl-c">//</span> generic's static constructor should be minimized for reduce type generation size!</span>
        <span class="pl-c"><span class="pl-c">//</span> use outer helper method.</span>
        <span class="pl-k">static</span> <span class="pl-en">FormatterCache</span>()
        {
            <span class="pl-smi">Formatter</span> <span class="pl-k">=</span> (<span class="pl-en">IMessagePackFormatter</span>&lt;<span class="pl-en">T</span>&gt;)<span class="pl-smi">SampleCustomResolverGetFormatterHelper</span>.<span class="pl-en">GetFormatter</span>(<span class="pl-k">typeof</span>(<span class="pl-en">T</span>));
        }
    }
}

<span class="pl-k">internal</span> <span class="pl-k">static</span> <span class="pl-k">class</span> <span class="pl-en">SampleCustomResolverGetFormatterHelper</span>
{
    <span class="pl-c"><span class="pl-c">//</span> If type is concrete type, use type-formatter map</span>
    <span class="pl-k">static</span> <span class="pl-k">readonly</span> <span class="pl-en">Dictionary</span>&lt;<span class="pl-en">Type</span>, <span class="pl-k">object</span>&gt; <span class="pl-en">formatterMap</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Dictionary</span>&lt;<span class="pl-en">Type</span>, <span class="pl-k">object</span>&gt;()
    {
        {<span class="pl-k">typeof</span>(<span class="pl-en">FileInfo</span>), <span class="pl-k">new</span> <span class="pl-en">FileInfoFormatter</span>()}
        <span class="pl-c"><span class="pl-c">//</span> add more your own custom serializers.</span>
    };

    <span class="pl-k">internal</span> <span class="pl-k">static</span> <span class="pl-k">object</span> <span class="pl-en">GetFormatter</span>(<span class="pl-en">Type</span> <span class="pl-en">t</span>)
    {
        <span class="pl-k">object</span> <span class="pl-en">formatter</span>;
        <span class="pl-k">if</span> (<span class="pl-smi">formatterMap</span>.<span class="pl-en">TryGetValue</span>(<span class="pl-smi">t</span>, <span class="pl-k">out</span> <span class="pl-smi">formatter</span>))
        {
            <span class="pl-k">return</span> <span class="pl-smi">formatter</span>;
        }

        <span class="pl-c"><span class="pl-c">//</span> If type can not get, must return null for fallback mechanism.</span>
        <span class="pl-k">return</span> <span class="pl-c1">null</span>;
    }
}</pre></div>
<h6 dir="auto">
<a id="user-content-messagepackformatterattribute" class="anchor" aria-hidden="true" href="#messagepackformatterattribute"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePackFormatterAttribute</h6>
<p dir="auto">MessagePackFormatterAttribute is a lightweight extension point of class, struct, interface, enum and property/field. This is like Json.NET's JsonConverterAttribute. For example, serialize private field, serialize x10 formatter.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="[MessagePackFormatter(typeof(CustomObjectFormatter))]
public class CustomObject
{
    string internalId;

    public CustomObject()
    {
        this.internalId = Guid.NewGuid().ToString();
    }

    // serialize/deserialize internal field.
    class CustomObjectFormatter : IMessagePackFormatter&lt;CustomObject&gt;
    {
        public void Serialize(ref MessagePackWriter writer, CustomObject value, MessagePackSerializerOptions options)
        {
            options.Resolver.GetFormatterWithVerify&lt;string&gt;().Serialize(ref writer, value.internalId, options);
        }

        public CustomObject Deserialize(ref MessagePackReader reader, MessagePackSerializerOptions options)
        {
            var id = options.Resolver.GetFormatterWithVerify&lt;string&gt;().Deserialize(ref reader, options);
            return new CustomObject { internalId = id };
        }
    }
}

// per field, member

public class Int_x10Formatter : IMessagePackFormatter&lt;int&gt;
{
    public int Deserialize(ref MessagePackReader reader, MessagePackSerializerOptions options)
    {
        return reader.ReadInt32() * 10;
    }

    public void Serialize(ref MessagePackWriter writer, int value, MessagePackSerializerOptions options)
    {
        writer.WriteInt32(value * 10);
    }
}

[MessagePackObject]
public class MyClass
{
    // You can attach custom formatter per member.
    [Key(0)]
    [MessagePackFormatter(typeof(Int_x10Formatter))]
    public int MyProperty1 { get; set; }
}"><pre>[<span class="pl-en">MessagePackFormatter</span>(<span class="pl-k">typeof</span>(<span class="pl-en">CustomObjectFormatter</span>))]
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">CustomObject</span>
{
    <span class="pl-k">string</span> <span class="pl-en">internalId</span>;

    <span class="pl-k">public</span> <span class="pl-en">CustomObject</span>()
    {
        <span class="pl-k">this</span>.<span class="pl-smi">internalId</span> <span class="pl-k">=</span> <span class="pl-smi">Guid</span>.<span class="pl-en">NewGuid</span>().<span class="pl-en">ToString</span>();
    }

    <span class="pl-c"><span class="pl-c">//</span> serialize/deserialize internal field.</span>
    <span class="pl-k">class</span> <span class="pl-en">CustomObjectFormatter</span> : <span class="pl-en">IMessagePackFormatter</span>&lt;<span class="pl-en">CustomObject</span>&gt;
    {
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">Serialize</span>(<span class="pl-k">ref</span> <span class="pl-en">MessagePackWriter</span> <span class="pl-en">writer</span>, <span class="pl-en">CustomObject</span> <span class="pl-en">value</span>, <span class="pl-en">MessagePackSerializerOptions</span> <span class="pl-en">options</span>)
        {
            <span class="pl-smi">options</span>.<span class="pl-smi">Resolver</span>.<span class="pl-en">GetFormatterWithVerify</span>&lt;<span class="pl-k">string</span>&gt;().<span class="pl-en">Serialize</span>(<span class="pl-k">ref</span> <span class="pl-smi">writer</span>, <span class="pl-smi">value</span>.<span class="pl-smi">internalId</span>, <span class="pl-smi">options</span>);
        }

        <span class="pl-k">public</span> <span class="pl-en">CustomObject</span> <span class="pl-en">Deserialize</span>(<span class="pl-k">ref</span> <span class="pl-en">MessagePackReader</span> <span class="pl-en">reader</span>, <span class="pl-en">MessagePackSerializerOptions</span> <span class="pl-en">options</span>)
        {
            <span class="pl-k">var</span> <span class="pl-en">id</span> <span class="pl-k">=</span> <span class="pl-smi">options</span>.<span class="pl-smi">Resolver</span>.<span class="pl-en">GetFormatterWithVerify</span>&lt;<span class="pl-k">string</span>&gt;().<span class="pl-en">Deserialize</span>(<span class="pl-k">ref</span> <span class="pl-smi">reader</span>, <span class="pl-smi">options</span>);
            <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-en">CustomObject</span> { <span class="pl-smi">internalId</span> <span class="pl-k">=</span> <span class="pl-smi">id</span> };
        }
    }
}

<span class="pl-c"><span class="pl-c">//</span> per field, member</span>

<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">Int_x10Formatter</span> : <span class="pl-en">IMessagePackFormatter</span>&lt;<span class="pl-k">int</span>&gt;
{
    <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">Deserialize</span>(<span class="pl-k">ref</span> <span class="pl-en">MessagePackReader</span> <span class="pl-en">reader</span>, <span class="pl-en">MessagePackSerializerOptions</span> <span class="pl-en">options</span>)
    {
        <span class="pl-k">return</span> <span class="pl-smi">reader</span>.<span class="pl-en">ReadInt32</span>() <span class="pl-k">*</span> <span class="pl-c1">10</span>;
    }

    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">Serialize</span>(<span class="pl-k">ref</span> <span class="pl-en">MessagePackWriter</span> <span class="pl-en">writer</span>, <span class="pl-k">int</span> <span class="pl-en">value</span>, <span class="pl-en">MessagePackSerializerOptions</span> <span class="pl-en">options</span>)
    {
        <span class="pl-smi">writer</span>.<span class="pl-en">WriteInt32</span>(<span class="pl-smi">value</span> <span class="pl-k">*</span> <span class="pl-c1">10</span>);
    }
}

[<span class="pl-en">MessagePackObject</span>]
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MyClass</span>
{
    <span class="pl-c"><span class="pl-c">//</span> You can attach custom formatter per member.</span>
    [<span class="pl-en">Key</span>(<span class="pl-c1">0</span>)]
    [<span class="pl-en">MessagePackFormatter</span>(<span class="pl-k">typeof</span>(<span class="pl-en">Int_x10Formatter</span>))]
    <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">MyProperty1</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }
}</pre></div>
<p dir="auto">Formatter is retrieved by <code>AttributeFormatterResolver</code>, it is included in <code>StandardResolver</code>.</p>
<h6 dir="auto">
<a id="user-content-ignoreformatter" class="anchor" aria-hidden="true" href="#ignoreformatter"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>IgnoreFormatter</h6>
<p dir="auto"><code>IgnoreFormatter&lt;T&gt;</code> is lightweight extension point of class and struct. If there exists types that can't be serialized, you can register <code>IgnoreFormatter&lt;T&gt;</code> that serializes those to nil/null.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="// CompositeResolver can set custom formatter.
var resolver = MessagePack.Resolvers.CompositeResolver.Create(
    new IMessagePackFormatter[]
    {
        // for example, register reflection infos (can not serialize)
        new IgnoreFormatter&lt;MethodBase&gt;(),
        new IgnoreFormatter&lt;MethodInfo&gt;(),
        new IgnoreFormatter&lt;PropertyInfo&gt;(),
        new IgnoreFormatter&lt;FieldInfo&gt;()
    },
    new IFormatterResolver[]
    {
        ContractlessStandardResolver.Instance
    });"><pre><span class="pl-c"><span class="pl-c">//</span> CompositeResolver can set custom formatter.</span>
<span class="pl-k">var</span> <span class="pl-en">resolver</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Resolvers</span>.<span class="pl-smi">CompositeResolver</span>.<span class="pl-en">Create</span>(
    <span class="pl-k">new</span> <span class="pl-en">IMessagePackFormatter</span>[]
    {
        <span class="pl-c"><span class="pl-c">//</span> for example, register reflection infos (can not serialize)</span>
        <span class="pl-k">new</span> <span class="pl-en">IgnoreFormatter</span>&lt;<span class="pl-en">MethodBase</span>&gt;(),
        <span class="pl-k">new</span> <span class="pl-en">IgnoreFormatter</span>&lt;<span class="pl-en">MethodInfo</span>&gt;(),
        <span class="pl-k">new</span> <span class="pl-en">IgnoreFormatter</span>&lt;<span class="pl-en">PropertyInfo</span>&gt;(),
        <span class="pl-k">new</span> <span class="pl-en">IgnoreFormatter</span>&lt;<span class="pl-en">FieldInfo</span>&gt;()
    },
    <span class="pl-k">new</span> <span class="pl-en">IFormatterResolver</span>[]
    {
        <span class="pl-smi">ContractlessStandardResolver</span>.<span class="pl-smi">Instance</span>
    });</pre></div>
<h6 dir="auto">
<a id="user-content-reserved-extension-types" class="anchor" aria-hidden="true" href="#reserved-extension-types"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Reserved Extension Types</h6>
<p dir="auto">MessagePack for C# already used some MessagePack extension type codes, be careful to use same ext code.</p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Type</th>
<th>Use by</th>
</tr>
</thead>
<tbody>
<tr>
<td>-1</td>
<td>DateTime</td>
<td>MessagePack-spec reserved for timestamp</td>
</tr>
<tr>
<td>30</td>
<td>Vector2[]</td>
<td>for Unity, UnsafeBlitFormatter</td>
</tr>
<tr>
<td>31</td>
<td>Vector3[]</td>
<td>for Unity, UnsafeBlitFormatter</td>
</tr>
<tr>
<td>32</td>
<td>Vector4[]</td>
<td>for Unity, UnsafeBlitFormatter</td>
</tr>
<tr>
<td>33</td>
<td>Quaternion[]</td>
<td>for Unity, UnsafeBlitFormatter</td>
</tr>
<tr>
<td>34</td>
<td>Color[]</td>
<td>for Unity, UnsafeBlitFormatter</td>
</tr>
<tr>
<td>35</td>
<td>Bounds[]</td>
<td>for Unity, UnsafeBlitFormatter</td>
</tr>
<tr>
<td>36</td>
<td>Rect[]</td>
<td>for Unity, UnsafeBlitFormatter</td>
</tr>
<tr>
<td>37</td>
<td>Int[]</td>
<td>for Unity, UnsafeBlitFormatter</td>
</tr>
<tr>
<td>38</td>
<td>Float[]</td>
<td>for Unity, UnsafeBlitFormatter</td>
</tr>
<tr>
<td>39</td>
<td>Double[]</td>
<td>for Unity, UnsafeBlitFormatter</td>
</tr>
<tr>
<td>98</td>
<td>All</td>
<td>MessagePackCompression.Lz4BlockArray</td>
</tr>
<tr>
<td>99</td>
<td>All</td>
<td>MessagePackCompression.Lz4Block</td>
</tr>
<tr>
<td>100</td>
<td>object</td>
<td>TypelessFormatter</td>
</tr>
</tbody>
</table>
<h6 dir="auto">
<a id="user-content-unity-support" class="anchor" aria-hidden="true" href="#unity-support"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Unity support</h6>
<p dir="auto">Unity lowest supported version is <code>2018.3</code>, API Compatibility Level supports both <code>.NET 4.x</code> and <code>.NET Standard 2.0</code>.</p>
<p dir="auto">You can install the <code>unitypackage</code> from the <a href="https://github.com/neuecc/MessagePack-CSharp/releases">releases</a> page.
If your build targets .NET Framework 4.x and runs on mono, you can use it as is.
But if your build targets IL2CPP, you can not use <code>Dynamic***Resolver</code>, so it is required to use pre-code generation. Please see <a href="#aot">pre-code generation section</a>.</p>
<p dir="auto">MessagePack for C# includes some additional <code>System.*.dll</code> libraries that originally provides in NuGet. They are located under <code>Plugins</code>. If other packages use these libraries (e.g. Unity Collections package using <code>System.Runtime.CompilerServices.Unsafe.dll</code>), to avoid conflicts, please delete the DLL under <code>Plugins</code>.</p>
<p dir="auto">Currently <code>CompositeResolver.Create</code> does not work on IL2CPP, so it is recommended to use <code>StaticCompositeResolver.Instance.Register</code> instead.</p>
<p dir="auto">In Unity, MessagePackSerializer can serialize <code>Vector2</code>, <code>Vector3</code>, <code>Vector4</code>, <code>Quaternion</code>, <code>Color</code>, <code>Bounds</code>, <code>Rect</code>, <code>AnimationCurve</code>, <code>Keyframe</code>, <code>Matrix4x4</code>, <code>Gradient</code>, <code>Color32</code>, <code>RectOffset</code>, <code>LayerMask</code>, <code>Vector2Int</code>, <code>Vector3Int</code>, <code>RangeInt</code>, <code>RectInt</code>, <code>BoundsInt</code> and their nullable, array and list types with the built-in extension <code>UnityResolver</code>. It is included in StandardResolver by default.</p>
<p dir="auto">MessagePack for C# has an additional unsafe extension.  <code>UnsafeBlitResolver</code> is special resolver for extremely fast but unsafe serialization/deserialization of struct arrays.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/46207/23837633/76589924-07ce-11e7-8b26-e50eab548938.png"><img src="https://cloud.githubusercontent.com/assets/46207/23837633/76589924-07ce-11e7-8b26-e50eab548938.png" alt="image" style="max-width: 100%;"></a></p>
<p dir="auto">x20 faster Vector3[] serialization than native JsonUtility. If use <code>UnsafeBlitResolver</code>, serialization uses a special format (ext:typecode 30~39)  for <code>Vector2[]</code>, <code>Vector3[]</code>, <code>Quaternion[]</code>, <code>Color[]</code>, <code>Bounds[]</code>, <code>Rect[]</code>. If use <code>UnityBlitWithPrimitiveArrayResolver</code>, it supports <code>int[]</code>, <code>float[]</code>, <code>double[]</code> too. This special feature is useful for serializing Mesh (many <code>Vector3[]</code>) or many transform positions.</p>
<p dir="auto">If you want to use unsafe resolver, register <code>UnityBlitResolver</code> or <code>UnityBlitWithPrimitiveArrayResolver</code>.</p>
<p dir="auto">Here is sample of configuration.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="StaticCompositeResolver.Instance.Register(
    MessagePack.Unity.UnityResolver.Instance,
    MessagePack.Unity.Extension.UnityBlitWithPrimitiveArrayResolver.Instance,
    MessagePack.Resolvers.StandardResolver.Instance
);

var options = MessagePackSerializerOptions.Standard.WithResolver(StaticCompositeResolver.Instance);
MessagePackSerializer.DefaultOptions = options;"><pre><span class="pl-smi">StaticCompositeResolver</span>.<span class="pl-smi">Instance</span>.<span class="pl-en">Register</span>(
    <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Unity</span>.<span class="pl-smi">UnityResolver</span>.<span class="pl-smi">Instance</span>,
    <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Unity</span>.<span class="pl-smi">Extension</span>.<span class="pl-smi">UnityBlitWithPrimitiveArrayResolver</span>.<span class="pl-smi">Instance</span>,
    <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Resolvers</span>.<span class="pl-smi">StandardResolver</span>.<span class="pl-smi">Instance</span>
);

<span class="pl-k">var</span> <span class="pl-en">options</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePackSerializerOptions</span>.<span class="pl-smi">Standard</span>.<span class="pl-en">WithResolver</span>(<span class="pl-smi">StaticCompositeResolver</span>.<span class="pl-smi">Instance</span>);
<span class="pl-smi">MessagePackSerializer</span>.<span class="pl-smi">DefaultOptions</span> <span class="pl-k">=</span> <span class="pl-smi">options</span>;</pre></div>
<p dir="auto">The <code>MessagePack.UnityShims</code> NuGet package is for .NET server-side serialization support to communicate with Unity. It includes shims for Vector3 etc and the Safe/Unsafe serialization extension.</p>
<p dir="auto">If you want to share a class between Unity and a server, you can use <code>SharedProject</code> or <code>Reference as Link</code> or a glob reference (with <code>LinkBase</code>), etc. Anyway, you need to share at source-code level. This is a sample project structure using a glob reference (recommended).</p>
<ul dir="auto">
<li>ServerProject(.NET 4.6/.NET Core/.NET Standard)
<ul dir="auto">
<li>[<code>&lt;Compile Include="..\UnityProject\Assets\Scripts\Shared\**\*.cs" LinkBase="Shared" /&gt;</code>]</li>
<li>[MessagePack]</li>
<li>[MessagePack.UnityShims]</li>
</ul>
</li>
<li>UnityProject
<ul dir="auto">
<li>[Concrete SharedCodes]</li>
<li>[MessagePack](not dll/NuGet, use MessagePack.Unity.unitypackage's sourcecode)</li>
</ul>
</li>
</ul>
<h6 dir="auto">
<a id="user-content-aot-code-generation-support-for-unityxamarin" class="anchor" aria-hidden="true" href="#aot-code-generation-support-for-unityxamarin"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a name="user-content-aot"></a>AOT Code Generation (support for Unity/Xamarin)</h6>
<p dir="auto">By default, MessagePack for C# serializes custom objects by <a href="https://msdn.microsoft.com/en-us/library/system.reflection.emit.ilgenerator.aspx" rel="nofollow">generating IL</a> on the fly at runtime to create custom, highly tuned formatters for each type. This code generation has a minor upfront performance cost.
Because strict-AOT environments such as Xamarin and Unity IL2CPP forbid runtime code generation, MessagePack provides a way for you to run a code generator ahead of time as well.</p>
<blockquote>
<p dir="auto">Note: When using Unity, dynamic code generation only works when targeting .NET Framework 4.x + mono runtime.
For all other Unity targets, AOT is required.</p>
</blockquote>
<p dir="auto">If you want to avoid the upfront dynamic generation cost or you need to run on Xamarin or Unity, you need AOT code generation. <code>mpc</code> (MessagePackCompiler) is the code generator of MessagePack for C#. mpc uses <a href="https://github.com/dotnet/roslyn">Roslyn</a> to analyze source code.</p>
<p dir="auto">First of all, mpc requires <a href="https://dotnet.microsoft.com/download" rel="nofollow">.NET Core 3 Runtime</a>. The easiest way to acquire and run mpc is as a dotnet tool.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="dotnet tool install --global MessagePack.Generator"><pre class="notranslate"><code>dotnet tool install --global MessagePack.Generator
</code></pre></div>
<p dir="auto">Installing it as a local tool allows you to include the tools and versions that you use in your source control system. Run these commands in the root of your repo:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="dotnet new tool-manifest
dotnet tool install MessagePack.Generator"><pre class="notranslate"><code>dotnet new tool-manifest
dotnet tool install MessagePack.Generator
</code></pre></div>
<p dir="auto">Check in your <code>.config\dotnet-tools.json</code> file. On another machine you can "restore" your tool using the <code>dotnet tool restore</code> command.</p>
<p dir="auto">Once you have the tool installed, simply invoke using <code>dotnet mpc</code> within your repo:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="dotnet mpc --help"><pre class="notranslate"><code>dotnet mpc --help
</code></pre></div>
<p dir="auto">Alternatively, you can download mpc from the <a href="https://github.com/neuecc/MessagePack-CSharp/releases">releases</a> page, that includes platform native binaries (that don't require a separate dotnet runtime).</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Usage: mpc [options...]

Options:
  -i, -input &lt;String&gt;                                Input path to MSBuild project file or the directory containing Unity source files. (Required)
  -o, -output &lt;String&gt;                               Output file path(.cs) or directory(multiple generate file). (Required)
  -c, -conditionalSymbol &lt;String&gt;                    Conditional compiler symbols, split with ','. (Default: null)
  -r, -resolverName &lt;String&gt;                         Set resolver name. (Default: GeneratedResolver)
  -n, -namespace &lt;String&gt;                            Set namespace root name. (Default: MessagePack)
  -m, -useMapMode &lt;Boolean&gt;                          Force use map mode serialization. (Default: False)
  -ms, -multipleIfDirectiveOutputSymbols &lt;String&gt;    Generate #if-- files by symbols, split with ','. (Default: null)"><pre class="notranslate"><code>Usage: mpc [options...]

Options:
  -i, -input &lt;String&gt;                                Input path to MSBuild project file or the directory containing Unity source files. (Required)
  -o, -output &lt;String&gt;                               Output file path(.cs) or directory(multiple generate file). (Required)
  -c, -conditionalSymbol &lt;String&gt;                    Conditional compiler symbols, split with ','. (Default: null)
  -r, -resolverName &lt;String&gt;                         Set resolver name. (Default: GeneratedResolver)
  -n, -namespace &lt;String&gt;                            Set namespace root name. (Default: MessagePack)
  -m, -useMapMode &lt;Boolean&gt;                          Force use map mode serialization. (Default: False)
  -ms, -multipleIfDirectiveOutputSymbols &lt;String&gt;    Generate #if-- files by symbols, split with ','. (Default: null)
</code></pre></div>
<p dir="auto"><code>mpc</code> targets C# code with <code>[MessagePackObject]</code> or <code>[Union]</code> annotations.</p>
<div class="highlight highlight-source-batchfile notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='// Simple Sample:
dotnet mpc -i "..\src\Sandbox.Shared.csproj" -o "MessagePackGenerated.cs"

// Use force map simulate DynamicContractlessObjectResolver
dotnet mpc -i "..\src\Sandbox.Shared.csproj" -o "MessagePackGenerated.cs" -m'><pre>// Simple Sample:
dotnet mpc -i <span class="pl-s"><span class="pl-pds">"</span>..\src\Sandbox.Shared.csproj<span class="pl-pds">"</span></span> -o <span class="pl-s"><span class="pl-pds">"</span>MessagePackGenerated.cs<span class="pl-pds">"</span></span>

// Use force map simulate DynamicContractlessObjectResolver
dotnet mpc -i <span class="pl-s"><span class="pl-pds">"</span>..\src\Sandbox.Shared.csproj<span class="pl-pds">"</span></span> -o <span class="pl-s"><span class="pl-pds">"</span>MessagePackGenerated.cs<span class="pl-pds">"</span></span> -m</pre></div>
<p dir="auto">By default, <code>mpc</code> generates the resolver as <code>MessagePack.Resolvers.GeneratedResolver</code> and formatters as<code>MessagePack.Formatters.*</code>.</p>
<p dir="auto">Here is the full sample code to register a generated resolver in Unity.</p>
<div class="highlight highlight-source-cs notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="using MessagePack;
using MessagePack.Resolvers;
using UnityEngine;

public class Startup
{
    static bool serializerRegistered = false;

    [RuntimeInitializeOnLoadMethod(RuntimeInitializeLoadType.BeforeSceneLoad)]
    static void Initialize()
    {
        if (!serializerRegistered)
        {
            StaticCompositeResolver.Instance.Register(
                 MessagePack.Resolvers.GeneratedResolver.Instance,
                 MessagePack.Resolvers.StandardResolver.Instance
            );

            var option = MessagePackSerializerOptions.Standard.WithResolver(StaticCompositeResolver.Instance);

            MessagePackSerializer.DefaultOptions = option;
            serializerRegistered = true;
        }
    }

#if UNITY_EDITOR


    [UnityEditor.InitializeOnLoadMethod]
    static void EditorInitialize()
    {
        Initialize();
    }

#endif
}"><pre><span class="pl-k">using</span> <span class="pl-en">MessagePack</span>;
<span class="pl-k">using</span> <span class="pl-en">MessagePack</span>.<span class="pl-en">Resolvers</span>;
<span class="pl-k">using</span> <span class="pl-en">UnityEngine</span>;

<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">Startup</span>
{
    <span class="pl-k">static</span> <span class="pl-k">bool</span> <span class="pl-en">serializerRegistered</span> <span class="pl-k">=</span> <span class="pl-c1">false</span>;

    [<span class="pl-en">RuntimeInitializeOnLoadMethod</span>(<span class="pl-smi">RuntimeInitializeLoadType</span>.<span class="pl-smi">BeforeSceneLoad</span>)]
    <span class="pl-k">static</span> <span class="pl-k">void</span> <span class="pl-en">Initialize</span>()
    {
        <span class="pl-k">if</span> (<span class="pl-k">!</span><span class="pl-smi">serializerRegistered</span>)
        {
            <span class="pl-smi">StaticCompositeResolver</span>.<span class="pl-smi">Instance</span>.<span class="pl-en">Register</span>(
                 <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Resolvers</span>.<span class="pl-smi">GeneratedResolver</span>.<span class="pl-smi">Instance</span>,
                 <span class="pl-smi">MessagePack</span>.<span class="pl-smi">Resolvers</span>.<span class="pl-smi">StandardResolver</span>.<span class="pl-smi">Instance</span>
            );

            <span class="pl-k">var</span> <span class="pl-en">option</span> <span class="pl-k">=</span> <span class="pl-smi">MessagePackSerializerOptions</span>.<span class="pl-smi">Standard</span>.<span class="pl-en">WithResolver</span>(<span class="pl-smi">StaticCompositeResolver</span>.<span class="pl-smi">Instance</span>);

            <span class="pl-smi">MessagePackSerializer</span>.<span class="pl-smi">DefaultOptions</span> <span class="pl-k">=</span> <span class="pl-smi">option</span>;
            <span class="pl-smi">serializerRegistered</span> <span class="pl-k">=</span> <span class="pl-c1">true</span>;
        }
    }

#<span class="pl-k">if</span> <span class="pl-en">UNITY_EDITOR</span>


    [<span class="pl-en">UnityEditor</span>.<span class="pl-en">InitializeOnLoadMethod</span>]
    <span class="pl-k">static</span> <span class="pl-k">void</span> <span class="pl-en">EditorInitialize</span>()
    {
        <span class="pl-en">Initialize</span>();
    }

#<span class="pl-k">endif</span>
}</pre></div>
<p dir="auto">In Unity, you can use MessagePack CodeGen windows at <code>Windows -&gt; MessagePack -&gt; CodeGenerator</code>.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/46207/69414381-f14da400-0d55-11ea-9f8d-9af448d347dc.png"><img src="https://user-images.githubusercontent.com/46207/69414381-f14da400-0d55-11ea-9f8d-9af448d347dc.png" alt="" style="max-width: 100%;"></a></p>
<p dir="auto">Install the .NET Core runtime, install mpc (as a .NET Core Tool as described above), and execute <code>dotnet mpc</code>. Currently this tool is experimental so please tell me your opinion.</p>
<p dir="auto">In Xamarin, you can install the <a href="/neuecc/MessagePack-CSharp/blob/master/doc/msbuildtask.md">the <code>MessagePack.MSBuild.Tasks</code> NuGet package</a> into your projects to pre-compile fast serialization code and run in environments where JIT compilation is not allowed.</p>
<h6 dir="auto">
<a id="user-content-rpc" class="anchor" aria-hidden="true" href="#rpc"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>RPC</h6>
<p dir="auto">MessagePack advocated <a href="https://github.com/msgpack-rpc/msgpack-rpc">MessagePack RPC</a>, but work on it has stopped and it is not widely used.</p>
<h7 dir="auto">
<a id="user-content-magiconion" class="anchor" aria-hidden="true" href="#magiconion"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MagicOnion</h7>
<p dir="auto">I've created a gRPC based MessagePack HTTP/2 RPC streaming framework called <a href="https://github.com/Cysharp/MagicOnion">MagicOnion</a>. gRPC usually communicates with Protocol Buffers using IDL. But MagicOnion uses MessagePack for C# and does not need IDL. When communicating C# to C#, schemaless (or rather C# classes as schema) is better than using IDL.</p>
<h7 dir="auto">
<a id="user-content-streamjsonrpc" class="anchor" aria-hidden="true" href="#streamjsonrpc"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>StreamJsonRpc</h7>
<p dir="auto">The StreamJsonRpc library is based on <a href="https://www.jsonrpc.org/" rel="nofollow">JSON-RPC</a> and includes <a href="https://github.com/microsoft/vs-streamjsonrpc/blob/master/doc/extensibility.md#alternative-formatters">a pluggable formatter architecture</a> and as of v2.3 includes <a href="https://github.com/microsoft/vs-streamjsonrpc/blob/master/doc/extensibility.md#message-formatterss">MessagePack support</a>.</p>
<h6 dir="auto">
<a id="user-content-how-to-build" class="anchor" aria-hidden="true" href="#how-to-build"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How to build</h6>
<p dir="auto">See our <a href="/neuecc/MessagePack-CSharp/blob/master/CONTRIBUTING.md">contributor's guide</a>.</p>
<h6 dir="auto">
<a id="user-content-author-info" class="anchor" aria-hidden="true" href="#author-info"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Author Info</h6>
<p dir="auto">Yoshifumi Kawai (a.k.a. neuecc) is a software developer in Japan.
He is the Director/CTO at Grani, Inc.
Grani is a mobile game developer company in Japan and well known for using C#.
He is awarding Microsoft MVP for Visual C# since 2011.
He is known as the creator of <a href="https://github.com/neuecc/UniRx/">UniRx</a> (Reactive Extensions for Unity)</p>
<ul dir="auto">
<li>Blog: <a href="https://medium.com/@neuecc" rel="nofollow">https://medium.com/@neuecc</a> (English)</li>
<li>Blog: <a href="http://neue.cc/" rel="nofollow">http://neue.cc/</a> (Japanese)</li>
<li>Twitter: <a href="https://twitter.com/neuecc" rel="nofollow">https://twitter.com/neuecc</a> (Japanese)</li>
</ul>
</article>
  </div>
        </div>
        
        <div id="qs-highras-msgpack-csharp" class="qs"><h4><a href="https://github.com/highras/msgpack-csharp" target="_blank">highras/msgpack-csharp <span class="qs-url">https://github.com/highras/msgpack-csharp</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h6 dir="auto">
<a id="user-content-fpnn-msgpack-implement" class="anchor" aria-hidden="true" href="#fpnn-msgpack-implement"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>FPNN MsgPack Implement</h6>
<ul dir="auto">
<li><strong><a href="https://github.com/msgpack/msgpack/blob/master/spec.md">msgpack SPEC</a></strong></li>
<li><strong><a href="https://github.com/highras/msgpack-csharp">Project Home</a></strong></li>
</ul>
<h7 dir="auto">
<a id="user-content-compatibility-version" class="anchor" aria-hidden="true" href="#compatibility-version"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Compatibility Version:</h7>
<p dir="auto">C# .Net Standard 2.0</p>
<h7 dir="auto">
<a id="user-content-for-packer" class="anchor" aria-hidden="true" href="#for-packer"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>For Packer:</h7>
<ul dir="auto">
<li>
<p dir="auto">input kinds:</p>
<p dir="auto">null, bool, sbyte, byte, short, ushort, Int32, UInt32, Int64, Uint64, float, double, string</p>
<p dir="auto">Decimal, Tuple</p>
<p dir="auto">byte[], DateTime, IEnumerable (such as List, Dictionary, List&lt;object&gt;, Dictionary&lt;object, object&gt;, ...)</p>
</li>
<li>
<p dir="auto">usage:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  using com.fpnn.msgpack;
  void MsgPacker.Pack(Stream stream, Object obj);"><pre class="notranslate"><code>  using com.fpnn.msgpack;
  void MsgPacker.Pack(Stream stream, Object obj);
</code></pre></div>
</li>
</ul>
<h7 dir="auto">
<a id="user-content-for-unpacker" class="anchor" aria-hidden="true" href="#for-unpacker"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>For Unpacker:</h7>
<ul dir="auto">
<li>
<p dir="auto">output kinds:</p>
<p dir="auto">Object, which maybe the following kinds:</p>
<p dir="auto">null, bool, sbyte, byte, short, ushort, Int32, UInt32, Int64, Uint64, float, double, string</p>
<p dir="auto">byte[], DateTime, List&lt;object&gt;, Dictionary&lt;object, object&gt;</p>
</li>
<li>
<p dir="auto">usage:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  using com.fpnn.msgpack;
  Dictionary&lt;Object, Object&gt; MsgUnpacker.Unpack(byte[] binary);

  Dictionary&lt;Object, Object&gt; MsgUnpacker.Unpack(byte[] binary, int offset, int length = 0);

  //-- unpack one object.
  Object MsgUnpacker.Unpack(byte[] binary, int offset, out int endOffset);"><pre class="notranslate"><code>  using com.fpnn.msgpack;
  Dictionary&lt;Object, Object&gt; MsgUnpacker.Unpack(byte[] binary);

  Dictionary&lt;Object, Object&gt; MsgUnpacker.Unpack(byte[] binary, int offset, int length = 0);

  //-- unpack one object.
  Object MsgUnpacker.Unpack(byte[] binary, int offset, out int endOffset);
</code></pre></div>
</li>
</ul>
<h7 dir="auto">
<a id="user-content-exception" class="anchor" aria-hidden="true" href="#exception"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Exception:</h7>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="    using com.fpnn.msgpack;
    public class MsgPackException: Exception;
    public class UnsupportedTypeException : MsgPackException;
    public class UnrecognizedDataException : MsgPackException;
    public class InsufficientException : MsgPackException;
    public class InvalidDataException : MsgPackException;"><pre class="notranslate"><code>    using com.fpnn.msgpack;
    public class MsgPackException: Exception;
    public class UnsupportedTypeException : MsgPackException;
    public class UnrecognizedDataException : MsgPackException;
    public class InsufficientException : MsgPackException;
    public class InvalidDataException : MsgPackException;
</code></pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-Lichtso-netLink" class="qs"><h4><a href="https://github.com/Lichtso/netLink" target="_blank">Lichtso/netLink <span class="qs-url">https://github.com/Lichtso/netLink</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack-v5-implementation-for-c-11" class="anchor" aria-hidden="true" href="#msgpack-v5-implementation-for-c-11"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MsgPack v5 implementation for C++ 11</h5>
<p dir="auto"><a href="https://travis-ci.org/Lichtso/netLink" rel="nofollow"><img src="https://camo.githubusercontent.com/0000adf70ed2b9378d3a21b5b1d84de3ebe95e55f5716be88ef0808c009f824c/68747470733a2f2f7472617669732d63692e6f72672f4c69636874736f2f6e65744c696e6b2e737667" alt="Build Status" data-canonical-src="https://travis-ci.org/Lichtso/netLink.svg" style="max-width: 100%;"></a>
<a href="http://en.wikipedia.org/wiki/Zlib_License" rel="nofollow"><img src="https://camo.githubusercontent.com/603f6337b80fa50a1f2e435415435a2b210462e656662376dedea7c94f92eb5e/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d5a4c49422d627269676874677265656e2e737667" alt="License" data-canonical-src="https://img.shields.io/badge/License-ZLIB-brightgreen.svg" style="max-width: 100%;"></a></p>
<h6 dir="auto">
<a id="user-content-features" class="anchor" aria-hidden="true" href="#features"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Features</h6>
<ul dir="auto">
<li>std::streambuf serializer and deserializer</li>
<li>hierarchy or token stream</li>
<li>push and pull parser</li>
<li>byte wise data flow control</li>
</ul>
<h6 dir="auto">
<a id="user-content-small-example" class="anchor" aria-hidden="true" href="#small-example"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Small Example</h6>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='MsgPack::Serializer serializer(socket);  
std::vector&lt;std::unique_ptr&lt;MsgPack::Element&gt;&gt; arrayWithoutElements, arrayWith3Elements;
arrayWith3Elements.push_back(MsgPack::Factory(true));
arrayWith3Elements.push_back(MsgPack__Factory(Array(std::move(arrayWithoutElements))));
arrayWith3Elements.push_back(MsgPack::Factory("Hello World!"));  
serializer &lt;&lt; MsgPack__Factory(Array(std::move(arrayWith3Elements)));

MsgPack::Deserializer deserializer(socket);  
deserializer.deserialize([](std::unique_ptr&lt;MsgPack::Element&gt; parsed) {
    std::cout &lt;&lt; "Parsed: " &lt;&lt; *parsed &lt;&lt; "\n";
    return false;
}, true);'><pre class="notranslate"><code>MsgPack::Serializer serializer(socket);  
std::vector&lt;std::unique_ptr&lt;MsgPack::Element&gt;&gt; arrayWithoutElements, arrayWith3Elements;
arrayWith3Elements.push_back(MsgPack::Factory(true));
arrayWith3Elements.push_back(MsgPack__Factory(Array(std::move(arrayWithoutElements))));
arrayWith3Elements.push_back(MsgPack::Factory("Hello World!"));  
serializer &lt;&lt; MsgPack__Factory(Array(std::move(arrayWith3Elements)));

MsgPack::Deserializer deserializer(socket);  
deserializer.deserialize([](std::unique_ptr&lt;MsgPack::Element&gt; parsed) {
    std::cout &lt;&lt; "Parsed: " &lt;&lt; *parsed &lt;&lt; "\n";
    return false;
}, true);
</code></pre></div>
<h6 dir="auto">
<a id="user-content-read-more" class="anchor" aria-hidden="true" href="#read-more"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Read More</h6>
<p dir="auto"><a href="https://github.com/Lichtso/netLink/wiki/MsgPack">Tutorial</a></p>
</article>
  </div>
        </div>
        
        <div id="qs-jonathonl-goodform" class="qs"><h4><a href="https://github.com/jonathonl/goodform" target="_blank">jonathonl/goodform <span class="qs-url">https://github.com/jonathonl/goodform</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-goodform" class="anchor" aria-hidden="true" href="#goodform"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>GoodForm</h5>
<p dir="auto">Form validation library. Includes MsgPack and JSON serializer/deserializer.</p>
<h6 dir="auto">
<a id="user-content-building" class="anchor" aria-hidden="true" href="#building"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Building</h6>
<p dir="auto">GoodForm uses std::any, which requires c++17. When c++17 is not available, boost::any is expected and will be installed automatically when using <a href="http://cget.readthedocs.io/en/latest/src/intro.html#installing-cget" rel="nofollow">cget</a>.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="cd goodform
cget install -f ./requirements.txt                      # Install dependencies locally.
mkdir build &amp;&amp; cd build                                 # Create out of source build directory.
cmake -DCMAKE_TOOLCHAIN_FILE=../cget/cget/cget.cmake .. # Configure project with dependency paths.
make"><pre><span class="pl-c1">cd</span> goodform
cget install -f ./requirements.txt                      <span class="pl-c"><span class="pl-c">#</span> Install dependencies locally.</span>
mkdir build <span class="pl-k">&amp;&amp;</span> <span class="pl-c1">cd</span> build                                 <span class="pl-c"><span class="pl-c">#</span> Create out of source build directory.</span>
cmake -DCMAKE_TOOLCHAIN_FILE=../cget/cget/cget.cmake .. <span class="pl-c"><span class="pl-c">#</span> Configure project with dependency paths.</span>
make</pre></div>
<h6 dir="auto">
<a id="user-content-msgpack-usage" class="anchor" aria-hidden="true" href="#msgpack-usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MsgPack Usage</h6>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='std::stringstream ss;
goodform::any var, var2;
var = goodform::object
  {
    {"compact", true},
    {"schema", 0}
  };

goodform::msgpack::serialize(var, ss);
goodform::msgpack::deserialize(ss, var2);

goodform::form form(var2);

struct
{
  bool compact;
  std::int32_t schema;
} mpack;

mpack.compact = form.at("compact").boolean().val();
mpack.schema = form.at("schema").int32().val();

if (form.is_good())
{
  std::cout &lt;&lt; "{ \"compact\": " &lt;&lt; std::boolalpha &lt;&lt; mpack.compact &lt;&lt; ", \"schema\": " &lt;&lt; mpack.schema &lt;&lt; " }" &lt;&lt; std::endl;
}'><pre>std::stringstream ss;
goodform::any var, var2;
var = goodform::object
  {
    {<span class="pl-s"><span class="pl-pds">"</span>compact<span class="pl-pds">"</span></span>, <span class="pl-c1">true</span>},
    {<span class="pl-s"><span class="pl-pds">"</span>schema<span class="pl-pds">"</span></span>, <span class="pl-c1">0</span>}
  };

<span class="pl-en">goodform::msgpack::serialize</span>(var, ss);
<span class="pl-en">goodform::msgpack::deserialize</span>(ss, var2);

goodform::form <span class="pl-en">form</span>(var2);

<span class="pl-k">struct</span>
{
  <span class="pl-k">bool</span> compact;
  std::<span class="pl-c1">int32_t</span> schema;
} mpack;

mpack.compact = form.at(<span class="pl-s"><span class="pl-pds">"</span>compact<span class="pl-pds">"</span></span>).boolean().val();
mpack.schema = form.at(<span class="pl-s"><span class="pl-pds">"</span>schema<span class="pl-pds">"</span></span>).int32().val();

<span class="pl-k">if</span> (form.is_good())
{
  std::cout &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>{ <span class="pl-cce">\"</span>compact<span class="pl-cce">\"</span>: <span class="pl-pds">"</span></span> &lt;&lt; std::boolalpha &lt;&lt; mpack.<span class="pl-smi">compact</span> &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>, <span class="pl-cce">\"</span>schema<span class="pl-cce">\"</span>: <span class="pl-pds">"</span></span> &lt;&lt; mpack.<span class="pl-smi">schema</span> &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span> }<span class="pl-pds">"</span></span> &lt;&lt; std::endl;
}</pre></div>
<h6 dir="auto">
<a id="user-content-json-usage" class="anchor" aria-hidden="true" href="#json-usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>JSON Usage</h6>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='goodform::any var;
std::stringstream ss;
ss &lt;&lt; "{" &lt;&lt; std::endl
  &lt;&lt; "\"first_name\":\"John\", // This is a comment" &lt;&lt; std::endl
  &lt;&lt; "\"last_name\":\"Smith\", " &lt;&lt; std::endl
  &lt;&lt; "\"age\": 23," &lt;&lt; std::endl
  &lt;&lt; "\"gpa\": 4.0," &lt;&lt; std::endl
  &lt;&lt; "\"email\":\"john.smith@example.com\"," &lt;&lt; std::endl
  &lt;&lt; "\"password_hash\":\"5f4dcc3b5aa765d61d8327deb882cf99\"," &lt;&lt; std::endl
  &lt;&lt; "\"interests\": [\"sailing\",\"swimming\",\"yoga\"]" &lt;&lt; std::endl
  &lt;&lt; "}" &lt;&lt; std::endl;

goodform::json::deserialize(ss, var);

goodform::form form(var);

struct
{
  std::string first_name;
  std::string last_name;
  std::uint8_t age;
  float gpa;
  std::string email;
  std::string password_hash;
  bool subscribe_to_email_marketing;
  std::list&lt;std::string&gt; interests;
} form_data;


form_data.first_name = form.at("first_name").string().match(std::regex("^[a-zA-Z ]{1,64}$")).val();
form_data.last_name = form.at("last_name").string().match(std::regex("^[a-zA-Z ]{1,64}$")).val();
form_data.age = form.at("age").uint8().val();
form_data.gpa = form.at("gpa").float32().gte(0).lte(4.0).val();
form_data.email = form.at("email").string().match(std::regex("^.{3,256}$")).val();
form_data.password_hash = form.at("password_hash").string().match(std::regex("^[a-fA-F0-9]{32}$")).val();
form_data.subscribe_to_email_marketing = form.at("subscribe_to_email_marketing", true).boolean().val(); // Optional field defaults to true.

form.at("interests").array().for_each([&amp;form_data](goodform::sub_form&amp; sf, std::size_t i)
{
  form_data.interests.push_back(sf.string().val());
});

if (form.is_good())
{
  // Use validated form_data.
}
else
{
  // Handle error.
}'><pre>goodform::any var;
std::stringstream ss;
ss &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>{<span class="pl-pds">"</span></span> &lt;&lt; std::endl
  &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\"</span>first_name<span class="pl-cce">\"</span>:<span class="pl-cce">\"</span>John<span class="pl-cce">\"</span>, // This is a comment<span class="pl-pds">"</span></span> &lt;&lt; std::endl
  &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\"</span>last_name<span class="pl-cce">\"</span>:<span class="pl-cce">\"</span>Smith<span class="pl-cce">\"</span>, <span class="pl-pds">"</span></span> &lt;&lt; std::endl
  &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\"</span>age<span class="pl-cce">\"</span>: 23,<span class="pl-pds">"</span></span> &lt;&lt; std::endl
  &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\"</span>gpa<span class="pl-cce">\"</span>: 4.0,<span class="pl-pds">"</span></span> &lt;&lt; std::endl
  &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\"</span>email<span class="pl-cce">\"</span>:<span class="pl-cce">\"</span>john.smith@example.com<span class="pl-cce">\"</span>,<span class="pl-pds">"</span></span> &lt;&lt; std::endl
  &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\"</span>password_hash<span class="pl-cce">\"</span>:<span class="pl-cce">\"</span>5f4dcc3b5aa765d61d8327deb882cf99<span class="pl-cce">\"</span>,<span class="pl-pds">"</span></span> &lt;&lt; std::endl
  &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\"</span>interests<span class="pl-cce">\"</span>: [<span class="pl-cce">\"</span>sailing<span class="pl-cce">\"</span>,<span class="pl-cce">\"</span>swimming<span class="pl-cce">\"</span>,<span class="pl-cce">\"</span>yoga<span class="pl-cce">\"</span>]<span class="pl-pds">"</span></span> &lt;&lt; std::endl
  &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>}<span class="pl-pds">"</span></span> &lt;&lt; std::endl;

<span class="pl-en">goodform::json::deserialize</span>(ss, var);

goodform::form <span class="pl-en">form</span>(var);

<span class="pl-k">struct</span>
{
  std::string first_name;
  std::string last_name;
  std::<span class="pl-c1">uint8_t</span> age;
  <span class="pl-k">float</span> gpa;
  std::string email;
  std::string password_hash;
  <span class="pl-k">bool</span> subscribe_to_email_marketing;
  std::list&lt;std::string&gt; interests;
} form_data;


form_data.first_name = form.at(<span class="pl-s"><span class="pl-pds">"</span>first_name<span class="pl-pds">"</span></span>).string().match(std::regex(<span class="pl-s"><span class="pl-pds">"</span>^[a-zA-Z ]{1,64}$<span class="pl-pds">"</span></span>)).val();
form_data.last_name = form.at(<span class="pl-s"><span class="pl-pds">"</span>last_name<span class="pl-pds">"</span></span>).string().match(std::regex(<span class="pl-s"><span class="pl-pds">"</span>^[a-zA-Z ]{1,64}$<span class="pl-pds">"</span></span>)).val();
form_data.age = form.at(<span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>).uint8().val();
form_data.gpa = form.at(<span class="pl-s"><span class="pl-pds">"</span>gpa<span class="pl-pds">"</span></span>).float32().gte(<span class="pl-c1">0</span>).lte(<span class="pl-c1">4.0</span>).val();
form_data.email = form.at(<span class="pl-s"><span class="pl-pds">"</span>email<span class="pl-pds">"</span></span>).string().match(std::regex(<span class="pl-s"><span class="pl-pds">"</span>^.{3,256}$<span class="pl-pds">"</span></span>)).val();
form_data.password_hash = form.at(<span class="pl-s"><span class="pl-pds">"</span>password_hash<span class="pl-pds">"</span></span>).string().match(std::regex(<span class="pl-s"><span class="pl-pds">"</span>^[a-fA-F0-9]{32}$<span class="pl-pds">"</span></span>)).val();
form_data.subscribe_to_email_marketing = form.at(<span class="pl-s"><span class="pl-pds">"</span>subscribe_to_email_marketing<span class="pl-pds">"</span></span>, <span class="pl-c1">true</span>).boolean().val(); <span class="pl-c"><span class="pl-c">//</span> Optional field defaults to true.</span>

form.at(<span class="pl-s"><span class="pl-pds">"</span>interests<span class="pl-pds">"</span></span>).array().for_each([&amp;form_data](goodform::sub_form&amp; sf, std::<span class="pl-c1">size_t</span> i)
{
  form_data.<span class="pl-smi">interests</span>.<span class="pl-c1">push_back</span>(sf.<span class="pl-c1">string</span>().<span class="pl-c1">val</span>());
});

<span class="pl-k">if</span> (form.is_good())
{
  <span class="pl-c"><span class="pl-c">//</span> Use validated form_data.</span>
}
<span class="pl-k">else</span>
{
  <span class="pl-c"><span class="pl-c">//</span> Handle error.</span>
}</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-ar90n-msgpack11" class="qs"><h4><a href="https://github.com/ar90n/msgpack11" target="_blank">ar90n/msgpack11 <span class="qs-url">https://github.com/ar90n/msgpack11</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><p dir="auto"><a href="https://github.com/ar90n/msgpack11/actions/workflows/ci.yml"><img src="https://camo.githubusercontent.com/7653b301771933062a6acce3e632559e8fe06fedf2fc8ee176c4158676e4c7ec/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f776f726b666c6f772f7374617475732f617239306e2f6d73677061636b31312f43492f6d6173746572" alt="Build" data-canonical-src="https://img.shields.io/github/workflow/status/ar90n/msgpack11/CI/master" style="max-width: 100%;"></a>
<a href="https://github.com/ar90n/msgpack11/issues"><img src="https://camo.githubusercontent.com/fcb0741b0be1ba401879a094214a74e6dc93869b88810f5b90a26b5e8fc8665a/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6973737565732f617239306e2f6d73677061636b31312e7376673f7374796c653d666c6174" alt="Issues" data-canonical-src="https://img.shields.io/github/issues/ar90n/msgpack11.svg?style=flat" style="max-width: 100%;"></a>
<a href="https://github.com/ar90n/msgpack11/blob/master/LICENSE.txt"><img src="https://camo.githubusercontent.com/f72fd0b968ad1fc797c9ecf111ae98f43309796e185cc7a18fc505f84ba4c80d/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f617239306e2f6d73677061636b31312e7376673f7374796c653d666c6174" alt="MIT" data-canonical-src="https://img.shields.io/github/license/ar90n/msgpack11.svg?style=flat" style="max-width: 100%;"></a></p>
<h5 dir="auto">
<a id="user-content-what-is-msgpack11-" class="anchor" aria-hidden="true" href="#what-is-msgpack11-"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>What is msgpack11 ?</h5>
<p dir="auto">msgpack11 is a tiny MsgPack library for C++11, providing MsgPack parsing and serialization.<br>
This library is inspired by <a href="https://github.com/dropbox/json11">json11</a>.<br>
The API of msgpack11 is designed to be similar with json11.</p>
<h5 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h5>
<ul dir="auto">
<li>
<p dir="auto">Using CMake</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  git clone git@github.com:ar90n/msgpack11.git
  mkdir build
  cd build
  cmake ../msgpack11
  make &amp;&amp; make install"><pre class="notranslate"><code>  git clone git@github.com:ar90n/msgpack11.git
  mkdir build
  cd build
  cmake ../msgpack11
  make &amp;&amp; make install
</code></pre></div>
</li>
<li>
<p dir="auto">Using Buck</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  git clone git@github.com:ar90n/msgpack11.git
  cd msgpack11
  buck build :msgpack11"><pre class="notranslate"><code>  git clone git@github.com:ar90n/msgpack11.git
  cd msgpack11
  buck build :msgpack11
</code></pre></div>
</li>
</ul>
<h5 dir="auto">
<a id="user-content-example" class="anchor" aria-hidden="true" href="#example"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example</h5>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='MsgPack my_msgpack = MsgPack::object {
    { "key1", "value1" },
    { "key2", false },
    { "key3", MsgPack::array { 1, 2, 3 } },
};

//access to elements
std::cout &lt;&lt; my_msgpack["key1"].string_value();

//serialize
std::string msgpack_bytes = my_msgpack.dump();

//deserialize
std::string err;
MsgPack des_msgpack = MsgPack::parse(msgpack_bytes, err);'><pre class="notranslate"><code>MsgPack my_msgpack = MsgPack::object {
    { "key1", "value1" },
    { "key2", false },
    { "key3", MsgPack::array { 1, 2, 3 } },
};

//access to elements
std::cout &lt;&lt; my_msgpack["key1"].string_value();

//serialize
std::string msgpack_bytes = my_msgpack.dump();

//deserialize
std::string err;
MsgPack des_msgpack = MsgPack::parse(msgpack_bytes, err);
</code></pre></div>
<p dir="auto">There are more specific examples in example.cpp.
Please see it.</p>
<h5 dir="auto">
<a id="user-content-benchmark" class="anchor" aria-hidden="true" href="#benchmark"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Benchmark</h5>
<p dir="auto">Derived from <a href="https://github.com/ludocode/schemaless-benchmarks">schemaless-benchmarks</a></p>
<table>
<thead>
<tr>
<th>Library</th>
<th>Binary size</th>
<th>time[ms] @ Smallest</th>
<th>time[ms] @ Small</th>
<th>time[ms] @ Medium</th>
<th>time[ms] @ Large</th>
<th>time[ms] @ Largest</th>
</tr>
</thead>
<tbody>
<tr>
<td>msgpack-c-pack(v2.1.4)</td>
<td>6649</td>
<td>0.55</td>
<td>2.38</td>
<td>43.22</td>
<td>711.75</td>
<td>8748.20</td>
</tr>
<tr>
<td>msgpack-c-unpack(v2.1.4)</td>
<td>21804</td>
<td>1.34</td>
<td>6.00</td>
<td>83.09</td>
<td>714.64</td>
<td>11192.32</td>
</tr>
<tr>
<td>msgpack11-pack(v0.0.9)</td>
<td>99844</td>
<td>20.80</td>
<td>130.04</td>
<td>1063.24</td>
<td>10466.65</td>
<td>136640.99</td>
</tr>
<tr>
<td>msgpack11-unpack(v0.0.9)</td>
<td>99460</td>
<td>13.31</td>
<td>92.54</td>
<td>786.73</td>
<td>7345.43</td>
<td>99119.56</td>
</tr>
</tbody>
</table>
<p dir="auto">CPU : 2.6 GHz Intel Core i7<br>
Memory : 16 GB 2133 MHz LPDDR3<br>
Git revision : 6f6b4302b68b3c88312eb24367418b7fce81298c</p>
<h5 dir="auto">
<a id="user-content-feature" class="anchor" aria-hidden="true" href="#feature"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Feature</h5>
<ul dir="auto">
<li>Support serialization and deserialization.</li>
</ul>
<h5 dir="auto">
<a id="user-content-acknowledgement" class="anchor" aria-hidden="true" href="#acknowledgement"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Acknowledgement</h5>
<ul dir="auto">
<li><a href="https://github.com/dropbox/json11">json11</a></li>
<li><a href="https://github.com/msgpack/msgpack-c">msgpack-c</a></li>
<li><a href="https://github.com/ludocode/schemaless-benchmarks">schemaless-benchmarks</a></li>
</ul>
<h5 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h5>
<p dir="auto">This software is released under the MIT License, see LICENSE.txt.</p>
</article>
  </div>
        </div>
        
        <div id="qs-mikeloomisgg-cppack" class="qs"><h4><a href="https://github.com/mikeloomisgg/cppack" target="_blank">mikeloomisgg/cppack <span class="qs-url">https://github.com/mikeloomisgg/cppack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><p dir="auto"><a href="https://travis-ci.com/mikeloomisgg/cppack" rel="nofollow"><img src="https://camo.githubusercontent.com/f25f0d9176ed37850a78db79b26a4544aaab027b016ccfc3e79b6df97e594754/68747470733a2f2f7472617669732d63692e636f6d2f6d696b656c6f6f6d697367672f63707061636b2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.com/mikeloomisgg/cppack.svg?branch=master" style="max-width: 100%;"></a></p>
<h5 dir="auto">
<a id="user-content-cppack" class="anchor" aria-hidden="true" href="#cppack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>cppack</h5>
<p dir="auto">A modern (c++17 required) implementation of the <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">msgpack spec</a>.</p>
<p dir="auto">Msgpack is a binary serialization specification. It allows you to save and load application objects like classes and structs over networks, to files, and between programs and even different languages.</p>
<p dir="auto">Check out <a href="https://mikeloomisgg.github.io/2019-07-02-making-a-serialization-library/" rel="nofollow">this blog</a> for my rational creating this library.</p>
<h6 dir="auto">
<a id="user-content-features" class="anchor" aria-hidden="true" href="#features"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Features</h6>
<ul dir="auto">
<li>Fast and compact</li>
<li>Full test coverage</li>
<li>Easy to use</li>
<li>Automatic type handling</li>
<li>Open source MIT license</li>
<li>Easy error handling</li>
</ul>
<h7 dir="auto">
<a id="user-content-single-header-only-template-library" class="anchor" aria-hidden="true" href="#single-header-only-template-library"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Single Header only template library</h7>
<p dir="auto">Want to use this library? Just #include the header and you're good to go. Its less than 1000 lines of code.</p>
<h7 dir="auto">
<a id="user-content-cereal-style-packaging" class="anchor" aria-hidden="true" href="#cereal-style-packaging"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Cereal style packaging</h7>
<p dir="auto">Easily pack objects into byte arrays using a pack free function:</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='struct Person {
  std::string name;
  uint16_t age;
  std::vector&lt;std::string&gt; aliases;

  template&lt;class T&gt;
  void msgpack(T &amp;pack) {
    pack(name, age, aliases);
  }
};

int main() {
    auto person = Person{"John", 22, {"Ripper", "Silverhand"}};

    auto data = msgpack::pack(person); // Pack your object
    auto john = msgpack::unpack&lt;Person&gt;(data.data()); // Unpack it
}'><pre><span class="pl-k">struct</span> <span class="pl-en">Person</span> {
  std::string name;
  <span class="pl-c1">uint16_t</span> age;
  std::vector&lt;std::string&gt; aliases;

  <span class="pl-k">template</span>&lt;<span class="pl-k">class</span> <span class="pl-en">T</span>&gt;
  <span class="pl-k">void</span> <span class="pl-en">msgpack</span>(T &amp;pack) {
    <span class="pl-c1">pack</span>(name, age, aliases);
  }
};

<span class="pl-k">int</span> <span class="pl-en">main</span>() {
    <span class="pl-k">auto</span> person = Person{<span class="pl-s"><span class="pl-pds">"</span>John<span class="pl-pds">"</span></span>, <span class="pl-c1">22</span>, {<span class="pl-s"><span class="pl-pds">"</span>Ripper<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Silverhand<span class="pl-pds">"</span></span>}};

    <span class="pl-k">auto</span> data = <span class="pl-c1">msgpack::pack</span>(person); <span class="pl-c"><span class="pl-c">//</span> Pack your object</span>
    <span class="pl-k">auto</span> john = msgpack::unpack&lt;Person&gt;(data.<span class="pl-c1">data</span>()); <span class="pl-c"><span class="pl-c">//</span> Unpack it</span>
}</pre></div>
<p dir="auto"><a href="/mikeloomisgg/cppack/blob/master/msgpack/tests/examples.cpp">More Examples</a></p>
<h7 dir="auto">
<a id="user-content-roadmap" class="anchor" aria-hidden="true" href="#roadmap"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Roadmap</h7>
<ul dir="auto">
<li>Support for extension types
<ul dir="auto">
<li>The msgpack spec allows for additional types to be enumerated as Extensions. If reasonable use cases come about for this feature then it may be added.</li>
</ul>
</li>
<li>Name/value pairs
<ul dir="auto">
<li>The msgpack spec uses the 'map' type differently than this library. This library implements maps in which key/value pairs must all have the same value types.</li>
</ul>
</li>
<li>Endian conversion shortcuts
<ul dir="auto">
<li>On platforms that already hold types in big endian, the serialization could be optimized using type traits.</li>
</ul>
</li>
</ul>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-c" class="qs"><h4><a href="https://github.com/msgpack/msgpack-c" target="_blank">msgpack/msgpack-c <span class="qs-url">https://github.com/msgpack/msgpack-c</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack-for-cc" class="anchor" aria-hidden="true" href="#msgpack-for-cc"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>msgpack</code> for C/C++</h5>
<p dir="auto">It's like JSON but smaller and faster.</p>
<h6 dir="auto">
<a id="user-content-overview" class="anchor" aria-hidden="true" href="#overview"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Overview</h6>
<p dir="auto"><a href="http://msgpack.org/" rel="nofollow">MessagePack</a> is an efficient binary serialization
format, which lets you exchange data among multiple languages like JSON,
except that it's faster and smaller. Small integers are encoded into a
single byte and short strings require only one extra byte in
addition to the strings themselves.</p>
<h7 dir="auto">
<a id="user-content-c-library" class="anchor" aria-hidden="true" href="#c-library"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>C Library</h7>
<p dir="auto">See <a href="https://github.com/msgpack/msgpack-c/tree/c_master">c_master</a></p>
<h7 dir="auto">
<a id="user-content-c-library-1" class="anchor" aria-hidden="true" href="#c-library-1"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>C++ Library</h7>
<p dir="auto">See <a href="https://github.com/msgpack/msgpack-c/tree/cpp_master">cpp_master</a></p>
<h7 dir="auto">
<a id="user-content-documentation" class="anchor" aria-hidden="true" href="#documentation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Documentation</h7>
<p dir="auto">You can get additional information including the tutorial on the
<a href="https://github.com/msgpack/msgpack-c/wiki">wiki</a>.</p>
<h6 dir="auto">
<a id="user-content-contributing" class="anchor" aria-hidden="true" href="#contributing"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Contributing</h6>
<p dir="auto"><code>msgpack-c</code> is developed on GitHub at <a href="https://github.com/msgpack/msgpack-c">msgpack/msgpack-c</a>.
To report an issue or send a pull request, use the
<a href="https://github.com/msgpack/msgpack-c/issues">issue tracker</a>.</p>
<p dir="auto">Here's the list of <a href="https://github.com/msgpack/msgpack-c/graphs/contributors">great contributors</a>.</p>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<p dir="auto"><code>msgpack-c</code> is licensed under the Boost Software License, Version 1.0. See
the <a href="/msgpack/msgpack-c/blob/master/LICENSE_1_0.txt"><code>LICENSE_1_0.txt</code></a> file for details.</p>
</article>
  </div>
        </div>
        
        <div id="qs-edma2-clojure-msgpack" class="qs"><h4><a href="https://github.com/edma2/clojure-msgpack" target="_blank">edma2/clojure-msgpack <span class="qs-url">https://github.com/edma2/clojure-msgpack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-clojure-msgpack" class="anchor" aria-hidden="true" href="#clojure-msgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>clojure-msgpack</h5>
<p dir="auto">clojure-msgpack is a lightweight and simple library for converting
between native Clojure data structures and MessagePack byte formats.
clojure-msgpack only depends on Clojure itself; it has no third-party
dependencies.</p>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<p dir="auto"><a href="https://clojars.org/clojure-msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/8c8cdac69a390cf6cfc485611d050d4d4148ec2645da8889bce32c0ddb1be8dc/687474703a2f2f636c6f6a6172732e6f72672f636c6f6a7572652d6d73677061636b2f6c61746573742d76657273696f6e2e737667" alt="Clojars Project" data-canonical-src="http://clojars.org/clojure-msgpack/latest-version.svg" style="max-width: 100%;"></a>
<a href="https://travis-ci.org/edma2/clojure-msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/fc51026cb22c51e6170f1685bd0dd4d2ce1da75e92fd7eb3d5fcc31c8bacd1f9/68747470733a2f2f7472617669732d63692e6f72672f65646d61322f636c6f6a7572652d6d73677061636b2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/edma2/clojure-msgpack.svg?branch=master" style="max-width: 100%;"></a></p>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<h7 dir="auto">
<a id="user-content-basic" class="anchor" aria-hidden="true" href="#basic"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Basic</h7>
<ul dir="auto">
<li>
<code>pack</code>: Serialize object as a sequence of java.lang.Bytes.</li>
<li>
<code>unpack</code> Deserialize bytes as a Clojure object.</li>
</ul>
<div class="highlight highlight-source-clojure notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="(require '[msgpack.core :as msg])
(require 'msgpack.clojure-extensions)

(msg/pack {:compact true :schema 0})
; =&gt; #&lt;byte[] [B@60280b2e&gt;

(msg/unpack (msg/pack {:compact true :schema 0}))
; =&gt; {:schema 0, :compact true}"><pre>(<span class="pl-k">require</span> '[msgpack.core <span class="pl-c1">:as</span> msg])
(<span class="pl-k">require</span> 'msgpack.clojure-extensions)

(<span class="pl-en">msg/pack</span> {<span class="pl-c1">:compact</span> <span class="pl-c1">true</span> <span class="pl-c1">:schema</span> <span class="pl-c1">0</span>})
<span class="pl-c"><span class="pl-c">;</span> =&gt; #&lt;byte[] [B@60280b2e&gt;</span>

(<span class="pl-en">msg/unpack</span> (<span class="pl-en">msg/pack</span> {<span class="pl-c1">:compact</span> <span class="pl-c1">true</span> <span class="pl-c1">:schema</span> <span class="pl-c1">0</span>}))
<span class="pl-c"><span class="pl-c">;</span> =&gt; {:schema 0, :compact true}</span></pre></div>
<h7 dir="auto">
<a id="user-content-streaming" class="anchor" aria-hidden="true" href="#streaming"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Streaming</h7>
<p dir="auto"><code>clojure-msgpack</code> provides a streaming API for situations where it is more
convenient or efficient to work with byte streams instead of fixed byte arrays
(e.g. size of object is not known ahead of time).</p>
<p dir="auto">The streaming counterpart to <code>msgpack.core/pack</code> is <code>msgpack.core/pack-stream</code>
which returns nil and accepts either
<a href="http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html" rel="nofollow">java.io.OutputStream</a>
or
<a href="http://docs.oracle.com/javase/7/docs/api/java/io/DataOutput.html" rel="nofollow">java.io.DataOutput</a>
as an additional argument.</p>
<p dir="auto"><code>msgpack.core/unpack</code> is in "streaming mode" when the argument is of type
<a href="http://docs.oracle.com/javase/7/docs/api/java/io/DataInput.html" rel="nofollow">java.io.DataInput</a>
or
<a href="http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html" rel="nofollow">java.io.InputStream</a>.</p>
<div class="highlight highlight-source-clojure notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="(use 'clojure.java.io)

(with-open [s (output-stream &quot;test.dat&quot;)]
  (msg/pack-stream {:compact true :schema 0} s))

(with-open [s (input-stream &quot;test.dat&quot;)] (msg/unpack s))
; =&gt; {:schema 0, :compact true}"><pre>(<span class="pl-k">use</span> 'clojure.java.io)

(<span class="pl-en">with-open</span> [s (<span class="pl-en">output-stream</span> <span class="pl-s"><span class="pl-pds">"</span>test.dat<span class="pl-pds">"</span></span>)]
  (<span class="pl-en">msg/pack-stream</span> {<span class="pl-c1">:compact</span> <span class="pl-c1">true</span> <span class="pl-c1">:schema</span> <span class="pl-c1">0</span>} s))

(<span class="pl-en">with-open</span> [s (<span class="pl-en">input-stream</span> <span class="pl-s"><span class="pl-pds">"</span>test.dat<span class="pl-pds">"</span></span>)] (<span class="pl-en">msg/unpack</span> s))
<span class="pl-c"><span class="pl-c">;</span> =&gt; {:schema 0, :compact true}</span></pre></div>
<h7 dir="auto">
<a id="user-content-core-types" class="anchor" aria-hidden="true" href="#core-types"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Core types</h7>
<table>
<thead>
<tr>
<th>Clojure</th>
<th>MessagePack</th>
</tr>
</thead>
<tbody>
<tr>
<td>nil</td>
<td>Nil</td>
</tr>
<tr>
<td>java.lang.Boolean</td>
<td>Boolean</td>
</tr>
<tr>
<td>java.lang.Byte</td>
<td>Integer</td>
</tr>
<tr>
<td>java.lang.Short</td>
<td>Integer</td>
</tr>
<tr>
<td>java.lang.Integer</td>
<td>Integer</td>
</tr>
<tr>
<td>java.lang.Long</td>
<td>Integer</td>
</tr>
<tr>
<td>java.lang.BigInteger</td>
<td>Integer</td>
</tr>
<tr>
<td>clojure.lang.BigInt</td>
<td>Integer</td>
</tr>
<tr>
<td>java.lang.Float</td>
<td>Float</td>
</tr>
<tr>
<td>java.lang.Double</td>
<td>Float</td>
</tr>
<tr>
<td>java.math.BigDecimal</td>
<td>Float</td>
</tr>
<tr>
<td>java.lang.String</td>
<td>String</td>
</tr>
<tr>
<td>clojure.lang.Sequential</td>
<td>Array</td>
</tr>
<tr>
<td>clojure.lang.IPersistentMap</td>
<td>Map</td>
</tr>
<tr>
<td>msgpack.core.Ext</td>
<td>Extended</td>
</tr>
</tbody>
</table>
<p dir="auto">Serializing a value of unrecognized type will fail with <code>IllegalArgumentException</code>.  See <a href="#application-types">Application types</a> if you want to register your own types.</p>
<h7 dir="auto">
<a id="user-content-clojure-types" class="anchor" aria-hidden="true" href="#clojure-types"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Clojure types</h7>
<p dir="auto">Some native Clojure types don't have an obvious MessagePack counterpart. We can
serialize them as Extended types. To enable automatic conversion of these
types, load the <code>clojure-extensions</code> library.</p>
<table>
<thead>
<tr>
<th>Clojure</th>
<th>MessagePack</th>
</tr>
</thead>
<tbody>
<tr>
<td>clojure.lang.Keyword</td>
<td>Extended (type = 3)</td>
</tr>
<tr>
<td>clojure.lang.Symbol</td>
<td>Extended (type = 4)</td>
</tr>
<tr>
<td>java.lang.Character</td>
<td>Extended (type = 5)</td>
</tr>
<tr>
<td>clojure.lang.Ratio</td>
<td>Extended (type = 6)</td>
</tr>
<tr>
<td>clojure.lang.IPersistentSet</td>
<td>Extended (type = 7)</td>
</tr>
</tbody>
</table>
<p dir="auto">With <code>msgpack.clojure-extensions</code>:</p>
<div class="highlight highlight-source-clojure notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="(require 'msgpack.clojure-extensions)
(msg/pack :hello)
; =&gt; #&lt;byte[] [B@a8c55bf&gt;"><pre>(<span class="pl-k">require</span> 'msgpack.clojure-extensions)
(<span class="pl-en">msg/pack</span> <span class="pl-c1">:hello</span>)
<span class="pl-c"><span class="pl-c">;</span> =&gt; #&lt;byte[] [B@a8c55bf&gt;</span></pre></div>
<p dir="auto">Without <code>msgpack.clojure-extensions</code>:</p>
<div class="highlight highlight-source-clojure notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="(msg/pack :hello)
; =&gt; IllegalArgumentException No implementation of method: :pack-stream of
; protocol: #'msgpack.core/Packable found for class: clojure.lang.Keyword
; clojure.core/-cache-protocol-fn (core _deftype.clj:544)"><pre>(<span class="pl-en">msg/pack</span> <span class="pl-c1">:hello</span>)
<span class="pl-c"><span class="pl-c">;</span> =&gt; IllegalArgumentException No implementation of method: :pack-stream of</span>
<span class="pl-c"><span class="pl-c">;</span> protocol: #'msgpack.core/Packable found for class: clojure.lang.Keyword</span>
<span class="pl-c"><span class="pl-c">;</span> clojure.core/-cache-protocol-fn (core _deftype.clj:544)</span></pre></div>
<h7 dir="auto">
<a id="user-content-application-types" class="anchor" aria-hidden="true" href="#application-types"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a name="user-content-application-types">Application types</a>
</h7>
<p dir="auto">You can also define your own Extended types with <code>extend-msgpack</code>.</p>
<div class="highlight highlight-source-clojure notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="(require '[msgpack.macros :refer [extend-msgpack]])

(defrecord Person [name])

(extend-msgpack
  Person
  100
  [p] (.getBytes (:name p))
  [bytes] (-&gt;Person (String. bytes)))

(msg/unpack (msg/pack [(-&gt;Person &quot;bob&quot;) 5 &quot;test&quot;]))
; =&gt; (#user.Person{:name &quot;bob&quot;} 5 &quot;test&quot;)"><pre>(<span class="pl-k">require</span> '[msgpack.macros <span class="pl-c1">:refer</span> [extend-msgpack]])

(<span class="pl-k">defrecord</span> <span class="pl-e">Person</span> [name])

(<span class="pl-en">extend-msgpack</span>
  Person
  <span class="pl-c1">100</span>
  [p] (<span class="pl-en">.getBytes</span> (<span class="pl-c1">:name</span> p))
  [bytes] (<span class="pl-en">-&gt;Person</span> (<span class="pl-en">String.</span> bytes)))

(<span class="pl-en">msg/unpack</span> (<span class="pl-en">msg/pack</span> [(<span class="pl-en">-&gt;Person</span> <span class="pl-s"><span class="pl-pds">"</span>bob<span class="pl-pds">"</span></span>) <span class="pl-c1">5</span> <span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>]))
<span class="pl-c"><span class="pl-c">;</span> =&gt; (#user.Person{:name "bob"} 5 "test")</span></pre></div>
<h7 dir="auto">
<a id="user-content-options" class="anchor" aria-hidden="true" href="#options"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Options</h7>
<p dir="auto">All pack and unpack functions take an optional map of options:</p>
<ul dir="auto">
<li>
<p dir="auto"><code>:compatibility-mode</code>
Serialize/deserialize strings and bytes using the raw-type defined here:
<a href="https://github.com/msgpack/msgpack/blob/master/spec-old.md">https://github.com/msgpack/msgpack/blob/master/spec-old.md</a></p>
<p dir="auto">Note: No error is thrown if an unpacked value is reserved under the old spec
but defined under the new spec. We always deserialize something if we can
regardless of <code>compatibility-mode</code>.</p>
</li>
</ul>
<div class="highlight highlight-source-clojure notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="(msg/pack (byte-array (byte 9)) {:compatibility-mode true})"><pre>(<span class="pl-en">msg/pack</span> (<span class="pl-en">byte-array</span> (<span class="pl-en">byte</span> <span class="pl-c1">9</span>)) {<span class="pl-c1">:compatibility-mode</span> <span class="pl-c1">true</span>})</pre></div>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<p dir="auto">clojure-msgpack is MIT licensed. See the included LICENSE file for more details.</p>
</article>
  </div>
        </div>
        
        <div id="qs-pkcsecurity-msgpack-cljs" class="qs"><h4><a href="https://github.com/pkcsecurity/msgpack-cljs" target="_blank">pkcsecurity/msgpack-cljs <span class="qs-url">https://github.com/pkcsecurity/msgpack-cljs</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack-cljs" class="anchor" aria-hidden="true" href="#msgpack-cljs"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack-cljs</h5>
<p dir="auto">A Clojurescript implementation of msgpack. This library's structure is <em>heavily</em> adapted from the great work done on <a href="https://github.com/edma2/clojure-msgpack">clojure-msgpack</a>. Support for Clojure <code>keyword</code>, <code>symbol</code>, <code>char</code>, <code>ratio</code>, and <code>set</code> are all included by default as Extension types for convenience and to be compatible with <code>clojure-msgpack</code>.</p>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<p dir="auto"><code>pack</code> takes an arbitrary object and converts it into a <code>Uint8Array</code>.</p>
<p dir="auto"><code>unpack</code> takes a <code>Uint8Array</code> and converts it back into an arbitrary object.</p>
<h6 dir="auto">
<a id="user-content-improvements" class="anchor" aria-hidden="true" href="#improvements"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Improvements</h6>
<p dir="auto">This library could stand to be refactored. We just use this internally at <a href="https://pkc.io" rel="nofollow">PKC</a>, so, if there is demand (or interest) in making this more feature-rich, we are open to making improvements. Just be vocal, otherwise we'll keep it simple.</p>
<h6 dir="auto">
<a id="user-content-copyright" class="anchor" aria-hidden="true" href="#copyright"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Copyright</h6>
<p dir="auto">Copyright 2018 PKC</p>
<p dir="auto">Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at:</p>
<p dir="auto"><a href="http://www.apache.org/licenses/LICENSE-2.0" rel="nofollow">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p dir="auto">Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
</article>
  </div>
        </div>
        
        <div id="qs-crystal-community-msgpack-crystal" class="qs"><h4><a href="https://github.com/crystal-community/msgpack-crystal" target="_blank">crystal-community/msgpack-crystal <span class="qs-url">https://github.com/crystal-community/msgpack-crystal</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack" class="anchor" aria-hidden="true" href="#messagepack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack</h5>
<p dir="auto"><a href="https://github.com/crystal-community/msgpack-crystal/actions/workflows/ci.yml?query=branch%3Amaster+event%3Apush"><img src="https://github.com/crystal-community/msgpack-crystal/actions/workflows/ci.yml/badge.svg" alt="Build Status" style="max-width: 100%;"></a></p>
<p dir="auto">MessagePack implementation in Crystal.</p>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<p dir="auto">Add this to your application's <code>shard.yml</code>:</p>
<div class="highlight highlight-source-yaml notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="dependencies:
  msgpack:
    github: crystal-community/msgpack-crystal"><pre><span class="pl-ent">dependencies</span>:
  <span class="pl-ent">msgpack</span>:
    <span class="pl-ent">github</span>: <span class="pl-s">crystal-community/msgpack-crystal</span></pre></div>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<div class="highlight highlight-source-crystal notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='require "msgpack"

class Location
  include MessagePack::Serializable

  property lat : Float64
  property lng : Float64
end

class House
  include MessagePack::Serializable

  property address : String
  property location : Location?
end

house = House.from_msgpack({address: "Road12", location: {lat: 12.3, lng: 34.5}}.to_msgpack)
p house
# =&gt; &lt;House:0x1b06de0 @address="Road12", @location=#&lt;Location:0x1b06dc0 @lat=12.3, @lng=34.5&gt;&gt;

p house.to_msgpack
# =&gt; Bytes[130, 167, 97, 100, 100, 114, 101, 115, 115, 166, 82, 111, 97, 100, ...

house.address = "Something"
house = House.from_msgpack(house.to_msgpack)
p house
# =&gt; #&lt;House:0x13f0d80 @address="Something", @location=#&lt;Location:0x13f0d60 @lat=12.3, @lng=34.5&gt;&gt;

house = House.from_msgpack({"address" =&gt; "Crystal Road 1234"}.to_msgpack)
p house
# =&gt; &lt;House:0x1b06d80 @address="Crystal Road 1234", @location=nil&gt;'><pre><span class="pl-k">require</span> <span class="pl-s"><span class="pl-pds">"</span>msgpack<span class="pl-pds">"</span></span>

<span class="pl-k">class</span> <span class="pl-en">Location</span>
  <span class="pl-k">include</span> <span class="pl-c1">MessagePack</span>::<span class="pl-c1">Serializable</span>

  <span class="pl-k">property</span> lat : <span class="pl-c1">Float64</span>
  <span class="pl-k">property</span> lng : <span class="pl-c1">Float64</span>
<span class="pl-k">end</span>

<span class="pl-k">class</span> <span class="pl-en">House</span>
  <span class="pl-k">include</span> <span class="pl-c1">MessagePack</span>::<span class="pl-c1">Serializable</span>

  <span class="pl-k">property</span> address : <span class="pl-c1">String</span>
  <span class="pl-k">property</span> location : <span class="pl-c1">Location</span>?
<span class="pl-k">end</span>

house <span class="pl-k">=</span> <span class="pl-c1">House</span>.from_msgpack({<span class="pl-c1">address:</span> <span class="pl-s"><span class="pl-pds">"</span>Road12<span class="pl-pds">"</span></span>, <span class="pl-c1">location:</span> {<span class="pl-c1">lat:</span> <span class="pl-c1">12.3</span>, <span class="pl-c1">lng:</span> <span class="pl-c1">34.5</span>}}.to_msgpack)
<span class="pl-c1">p</span> house
<span class="pl-c"><span class="pl-c">#</span> =&gt; &lt;House:0x1b06de0 @address="Road12", @location=#&lt;Location:0x1b06dc0 @lat=12.3, @lng=34.5&gt;&gt;</span>

<span class="pl-c1">p</span> house.to_msgpack
<span class="pl-c"><span class="pl-c">#</span> =&gt; Bytes[130, 167, 97, 100, 100, 114, 101, 115, 115, 166, 82, 111, 97, 100, ...</span>

house.address <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Something<span class="pl-pds">"</span></span>
house <span class="pl-k">=</span> <span class="pl-c1">House</span>.from_msgpack(house.to_msgpack)
<span class="pl-c1">p</span> house
<span class="pl-c"><span class="pl-c">#</span> =&gt; #&lt;House:0x13f0d80 @address="Something", @location=#&lt;Location:0x13f0d60 @lat=12.3, @lng=34.5&gt;&gt;</span>

house <span class="pl-k">=</span> <span class="pl-c1">House</span>.from_msgpack({<span class="pl-s"><span class="pl-pds">"</span>address<span class="pl-pds">"</span></span> =&gt; <span class="pl-s"><span class="pl-pds">"</span>Crystal Road 1234<span class="pl-pds">"</span></span>}.to_msgpack)
<span class="pl-c1">p</span> house
<span class="pl-c"><span class="pl-c">#</span> =&gt; &lt;House:0x1b06d80 @address="Crystal Road 1234", @location=nil&gt;</span></pre></div>
<h6 dir="auto">
<a id="user-content-more-examples" class="anchor" aria-hidden="true" href="#more-examples"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>More Examples</h6>
<p dir="auto"><a href="https://github.com/benoist/msgpack-crystal/tree/master/examples">examples</a></p>
<h6 dir="auto">
<a id="user-content-msgpack-rpc" class="anchor" aria-hidden="true" href="#msgpack-rpc"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Msgpack-RPC</h6>
<p dir="auto"><a href="https://github.com/kostya/simple_rpc">implemented by simple_rpc shard</a></p>
<h6 dir="auto">
<a id="user-content-copyright" class="anchor" aria-hidden="true" href="#copyright"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Copyright</h6>
<p dir="auto">Copyright 2015 Benoist Claassen</p>
<p dir="auto"><em>Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License You may obtain a copy of the License at</em></p>
<p dir="auto"><a href="http://www.apache.org/licenses/LICENSE-2.0" rel="nofollow">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p dir="auto"><em>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</em></p>
</article>
  </div>
        </div>
        
        <div id="qs-steakknife-msgpack-cr" class="qs"><h4><a href="https://github.com/steakknife/msgpack.cr" target="_blank">steakknife/msgpack.cr <span class="qs-url">https://github.com/steakknife/msgpack.cr</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpackcr" class="anchor" aria-hidden="true" href="#msgpackcr"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack.cr</h5>
<p dir="auto">A low-level <a href="http://msgpack.org" rel="nofollow">msgpack</a> codec for <a href="https://crystal-lang.org" rel="nofollow">Crystal</a></p>
<h6 dir="auto">
<a id="user-content-todo" class="anchor" aria-hidden="true" href="#todo"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>TODO</h6>
<ul dir="auto">
<li>More specs</li>
<li>Mapping</li>
</ul>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<p dir="auto">Add this to your application's <code>shard.yml</code>:</p>
<div class="highlight highlight-source-yaml notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="dependencies:
  msgpack:
    github: steakknife/msgpack.cr"><pre><span class="pl-ent">dependencies</span>:
  <span class="pl-ent">msgpack</span>:
    <span class="pl-ent">github</span>: <span class="pl-s">steakknife/msgpack.cr</span></pre></div>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<div class="highlight highlight-source-crystal notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='require "msgpack"

1.to_msgpack # =&gt; Slice[210, 0, 0, 0, 1]

# write 2_i32 to file foo.msgpack
File.open("foo.msgpack", "w") { |f| f.write(2.to_msgpack) }
'><pre><span class="pl-k">require</span> <span class="pl-s"><span class="pl-pds">"</span>msgpack<span class="pl-pds">"</span></span>

<span class="pl-c1">1</span>.to_msgpack <span class="pl-c"><span class="pl-c">#</span> =&gt; Slice[210, 0, 0, 0, 1]</span>

<span class="pl-c"><span class="pl-c">#</span> write 2_i32 to file foo.msgpack</span>
<span class="pl-c1">File</span>.open(<span class="pl-s"><span class="pl-pds">"</span>foo.msgpack<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>w<span class="pl-pds">"</span></span>) { |<span class="pl-smi">f</span>| f.write(<span class="pl-c1">2</span>.to_msgpack) }
</pre></div>
<h6 dir="auto">
<a id="user-content-extending" class="anchor" aria-hidden="true" href="#extending"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Extending</h6>
<h7 dir="auto">
<a id="user-content-encoding" class="anchor" aria-hidden="true" href="#encoding"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Encoding</h7>
<p dir="auto">Any type can become encodable by including <code>Msgpack::Encodable</code> and defining <code>to_msgpack(io : IO)</code></p>
<h7 dir="auto">
<a id="user-content-decoding" class="anchor" aria-hidden="true" href="#decoding"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Decoding</h7>
<p dir="auto">Any type can become decodable by following the <a href="/steakknife/msgpack.cr/blob/master/spec/foo_spec.cr">example</a></p>
<h6 dir="auto">
<a id="user-content-development" class="anchor" aria-hidden="true" href="#development"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Development</h6>
<h7 dir="auto">
<a id="user-content-run-tests" class="anchor" aria-hidden="true" href="#run-tests"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Run tests</h7>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="crystal spec"><pre>crystal spec</pre></div>
<h6 dir="auto">
<a id="user-content-alternate-implementations" class="anchor" aria-hidden="true" href="#alternate-implementations"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Alternate Implementations</h6>
<ul dir="auto">
<li><a href="https://github.com/benoist/msgpack-crystal">github: benoist/msgpack-crystal</a></li>
</ul>
<h6 dir="auto">
<a id="user-content-contributing" class="anchor" aria-hidden="true" href="#contributing"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Contributing</h6>
<ol dir="auto">
<li>Fork it ( <a href="https://github.com/steakknife/msgpack.cr/fork">https://github.com/steakknife/msgpack.cr/fork</a> )</li>
<li>Create your feature branch (git checkout -b my-new-feature)</li>
<li>Commit your changes (git commit -am 'Add some feature')</li>
<li>Push to the branch (git push origin my-new-feature)</li>
<li>Create a new Pull Request</li>
</ol>
<h6 dir="auto">
<a id="user-content-contributors" class="anchor" aria-hidden="true" href="#contributors"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Contributors</h6>
<ul dir="auto">
<li>
<a href="https://github.com/steakknife">[steakknife]</a> Barry Allard - creator, maintainer</li>
</ul>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<p dir="auto"><a href="/steakknife/msgpack.cr/blob/master/LICENSE">MIT</a></p>
<h6 dir="auto">
<a id="user-content-copyright" class="anchor" aria-hidden="true" href="#copyright"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Copyright</h6>
<p dir="auto">2016 (c) Copyright Barry Allard</p>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-d" class="qs"><h4><a href="https://github.com/msgpack/msgpack-d" target="_blank">msgpack/msgpack-d <span class="qs-url">https://github.com/msgpack/msgpack-d</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><p dir="auto"><a href="https://travis-ci.org/msgpack/msgpack-d" rel="nofollow"><img src="https://camo.githubusercontent.com/bb42a4cb1694bafb4c7a3eefe07c5746379a835d9a25fad31aa1ed0295eccc37/68747470733a2f2f7472617669732d63692e6f72672f6d73677061636b2f6d73677061636b2d642e706e67" alt="Build Status" data-canonical-src="https://travis-ci.org/msgpack/msgpack-d.png" style="max-width: 100%;"></a></p>
<h5 dir="auto">
<a id="user-content-messagepack-for-d" class="anchor" aria-hidden="true" href="#messagepack-for-d"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack for D</h5>
<p dir="auto">MessagePack is a binary-based JSON-like serialization library.</p>
<p dir="auto">MessagePack for D is a pure D implementation of MessagePack.</p>
<h5 dir="auto">
<a id="user-content-features" class="anchor" aria-hidden="true" href="#features"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Features</h5>
<ul dir="auto">
<li>Small size and High performance</li>
<li>Zero copy serialization / deserialization</li>
<li>Streaming deserializer for non-contiguous IO situation</li>
<li>Supports D features (Ranges, Tuples, real type)</li>
</ul>
<p dir="auto">Note: The <code>real</code> type is only supported in D.
Don't use the <code>real</code> type when communicating with other programming languages.
Note that <code>Unpacker</code> will raise an exception if a loss of precision occurs.</p>
<h6 dir="auto">
<a id="user-content-current-limitations" class="anchor" aria-hidden="true" href="#current-limitations"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Current Limitations</h6>
<ul dir="auto">
<li>No circular references support</li>
<li>If you want to use the LDC compiler, you need at least version 0.15.2 beta2</li>
</ul>
<h5 dir="auto">
<a id="user-content-install" class="anchor" aria-hidden="true" href="#install"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install</h5>
<p dir="auto">Use dub to add it as a dependency:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="% dub install msgpack-d"><pre>% dub install msgpack-d</pre></div>
<h5 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h5>
<p dir="auto">Example code can be found in the <code>example</code> directory.</p>
<p dir="auto">The documentation can be found <a href="http://msgpack.github.io/msgpack-d/" rel="nofollow">here</a></p>
<h6 dir="auto">
<a id="user-content-pack--unpack" class="anchor" aria-hidden="true" href="#pack--unpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>pack / unpack</h6>
<p dir="auto">msgpack-d is very simple to use. Use <code>pack</code> for serialization, and <code>unpack</code> for deserialization:</p>
<div class="highlight highlight-source-d notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import std.file;
import msgpack;

struct S { int x; float y; string z; }

void main()
{
    S input = S(10, 25.5, "message");

    // serialize data
    ubyte[] inData = pack(input);

    // write data to a file
    write("file.dat", inData);

    // read data from a file
    ubyte[] outData = cast(ubyte[])read("file.dat");

    // unserialize the data
    S target = outData.unpack!S();

    // verify data is the same
    assert(target.x == input.x);
    assert(target.y == input.y);
    assert(target.z == input.z);
}'><pre><span class="pl-k">import</span> <span class="pl-c1">std.file</span>;
<span class="pl-k">import</span> msgpack;

<span class="pl-k">struct</span> <span class="pl-en">S</span> { <span class="pl-k">int</span> x; <span class="pl-k">float</span> y; <span class="pl-c1">string</span> z; }

<span class="pl-k">void</span> <span class="pl-en">main</span>()
{
    S input = S(<span class="pl-c1">10</span>, <span class="pl-c1">25.5</span>, <span class="pl-s"><span class="pl-pds">"</span>message<span class="pl-pds">"</span></span>);

    <span class="pl-c"><span class="pl-c">//</span> serialize data</span>
    <span class="pl-k">ubyte</span>[] inData = pack(input);

    <span class="pl-c"><span class="pl-c">//</span> write data to a file</span>
    write(<span class="pl-s"><span class="pl-pds">"</span>file.dat<span class="pl-pds">"</span></span>, inData);

    <span class="pl-c"><span class="pl-c">//</span> read data from a file</span>
    <span class="pl-k">ubyte</span>[] outData = <span class="pl-k">cast</span>(<span class="pl-k">ubyte</span>[])read(<span class="pl-s"><span class="pl-pds">"</span>file.dat<span class="pl-pds">"</span></span>);

    <span class="pl-c"><span class="pl-c">//</span> unserialize the data</span>
    S target = outData.unpack<span class="pl-k">!</span>S();

    <span class="pl-c"><span class="pl-c">//</span> verify data is the same</span>
    <span class="pl-k">assert</span>(target.x <span class="pl-k">==</span> input.x);
    <span class="pl-k">assert</span>(target.y <span class="pl-k">==</span> input.y);
    <span class="pl-k">assert</span>(target.z <span class="pl-k">==</span> input.z);
}</pre></div>
<h7 dir="auto">
<a id="user-content-feature-skip-serializationdeserialization-of-a-specific-field" class="anchor" aria-hidden="true" href="#feature-skip-serializationdeserialization-of-a-specific-field"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Feature: Skip serialization/deserialization of a specific field.</h7>
<p dir="auto">Use the <code>@nonPacked</code> attribute:</p>
<div class="highlight highlight-source-d notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="struct User
{
    string name;
    @nonPacked int level;  // pack / unpack will ignore the 'level' field
}"><pre><span class="pl-k">struct</span> <span class="pl-en">User</span>
{
    <span class="pl-c1">string</span> name;
    @nonPacked <span class="pl-k">int</span> level;  <span class="pl-c"><span class="pl-c">//</span> pack / unpack will ignore the 'level' field</span>
}</pre></div>
<h7 dir="auto">
<a id="user-content-feature-use-your-own-serializationdeserialization-routines-for-custom-class-and-struct-types" class="anchor" aria-hidden="true" href="#feature-use-your-own-serializationdeserialization-routines-for-custom-class-and-struct-types"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Feature: Use your own serialization/deserialization routines for custom class and struct types.</h7>
<p dir="auto">msgpack-d provides the functions <code>registerPackHandler</code> / <code>registerUnpackHandler</code> to allow you
to use custom routines during the serialization or deserialization of user-defined class and struct types.
This feature is especially useful when serializing a derived class object when that object is statically
typed as a base class object.</p>
<p dir="auto">For example:</p>
<div class="highlight highlight-source-d notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="class Document { }
class XmlDocument : Document
{
    this() { }
    this(string name) { this.name = name; }
    string name;
}

void xmlPackHandler(ref Packer p, ref XmlDocument xml)
{
    p.pack(xml.name);
}

void xmlUnpackHandler(ref Unpacker u, ref XmlDocument xml)
{
    u.unpack(xml.name);
}

void main()
{
    /// Register the 'xmlPackHandler' and 'xmlUnpackHandler' routines for
    /// XmlDocument object instances.
    registerPackHandler!(XmlDocument, xmlPackHandler);
    registerUnpackHandler!(XmlDocument, xmlUnpackHandler);

    /// Now we can serialize/deserialize XmlDocument object instances via a
    /// base class reference.
    Document doc = new XmlDocument(&quot;test.xml&quot;);
    auto data = pack(doc);
    XmlDocument xml = unpack!XmlDocument(data);
    assert(xml.name == &quot;test.xml&quot;);  // xml.name is &quot;test.xml&quot;
}"><pre><span class="pl-k">class</span> <span class="pl-en">Document</span> { }
<span class="pl-k">class</span> <span class="pl-en">XmlDocument</span> : <span class="pl-e">Document</span>
{
    <span class="pl-en">this</span>() { }
    <span class="pl-en">this</span>(<span class="pl-c1">string</span> name) { <span class="pl-c1">this</span>.name = name; }
    <span class="pl-c1">string</span> name;
}

<span class="pl-k">void</span> <span class="pl-en">xmlPackHandler</span>(<span class="pl-k">ref</span> Packer p, <span class="pl-k">ref</span> XmlDocument xml)
{
    p.pack(xml.name);
}

<span class="pl-k">void</span> <span class="pl-en">xmlUnpackHandler</span>(<span class="pl-k">ref</span> Unpacker u, <span class="pl-k">ref</span> XmlDocument xml)
{
    u.unpack(xml.name);
}

<span class="pl-k">void</span> <span class="pl-en">main</span>()
{
    <span class="pl-c"><span class="pl-c">//</span>/ Register the 'xmlPackHandler' and 'xmlUnpackHandler' routines for</span>
    <span class="pl-c"><span class="pl-c">//</span>/ XmlDocument object instances.</span>
    registerPackHandler<span class="pl-k">!</span>(XmlDocument, xmlPackHandler);
    registerUnpackHandler<span class="pl-k">!</span>(XmlDocument, xmlUnpackHandler);

    <span class="pl-c"><span class="pl-c">//</span>/ Now we can serialize/deserialize XmlDocument object instances via a</span>
    <span class="pl-c"><span class="pl-c">//</span>/ base class reference.</span>
    <span class="pl-c1">Document</span> doc = <span class="pl-k">new</span> XmlDocument(<span class="pl-s"><span class="pl-pds">"</span>test.xml<span class="pl-pds">"</span></span>);
    <span class="pl-k">auto</span> data = pack(doc);
    XmlDocument xml = unpack<span class="pl-k">!</span>XmlDocument(data);
    <span class="pl-k">assert</span>(xml.name <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">"</span>test.xml<span class="pl-pds">"</span></span>);  <span class="pl-c"><span class="pl-c">//</span> xml.name is "test.xml"</span>
}</pre></div>
<p dir="auto">In addition, here is also a method using <code>@serializedAs</code> attribute:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import std.datetime: Clock, SysTime;
static struct SysTimePackProxy
{
    static void serialize(ref Packer p, ref in SysTime tim)
    {
        p.pack(tim.toISOExtString());
    }

    static void deserialize(ref Unpacker u, ref SysTime tim)
    {
        string tmp;
        u.unpack(tmp);
        tim = SysTime.fromISOExtString(tmp);
    }
}
static struct LogData
{
    string msg;
    string file;
    ulong  line;
    @serializedAs!SysTimePackProxy SysTime timestamp;

    this(string message, string file = __FILE__, ulong line = __LINE__)
    {
        this.msg = message;
        this.file = file;
        this.line = line;
        this.timestamp = Clock.currTime();
    }
}

void main()
{
    /// Now we can serialize/deserialize LogData
    LogData[] logs;
    logs ~= LogData("MessagePack is nice!");
    auto data = pack(logs);
    LogData[] datas = unpack!(LogData[])(data);
    assert(datas[0].timestamp.toString() == datas[0].timestamp.toString());
}'><pre class="notranslate"><code>import std.datetime: Clock, SysTime;
static struct SysTimePackProxy
{
    static void serialize(ref Packer p, ref in SysTime tim)
    {
        p.pack(tim.toISOExtString());
    }

    static void deserialize(ref Unpacker u, ref SysTime tim)
    {
        string tmp;
        u.unpack(tmp);
        tim = SysTime.fromISOExtString(tmp);
    }
}
static struct LogData
{
    string msg;
    string file;
    ulong  line;
    @serializedAs!SysTimePackProxy SysTime timestamp;

    this(string message, string file = __FILE__, ulong line = __LINE__)
    {
        this.msg = message;
        this.file = file;
        this.line = line;
        this.timestamp = Clock.currTime();
    }
}

void main()
{
    /// Now we can serialize/deserialize LogData
    LogData[] logs;
    logs ~= LogData("MessagePack is nice!");
    auto data = pack(logs);
    LogData[] datas = unpack!(LogData[])(data);
    assert(datas[0].timestamp.toString() == datas[0].timestamp.toString());
}
</code></pre></div>
<h6 dir="auto">
<a id="user-content-the-packerimpl--unpacker--streamingunpacker-types" class="anchor" aria-hidden="true" href="#the-packerimpl--unpacker--streamingunpacker-types"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>The PackerImpl / Unpacker / StreamingUnpacker types</h6>
<p dir="auto">These types are used by the <code>pack</code> and <code>unpack</code> functions.</p>
<p dir="auto">See the documentation of <a href="http://msgpack.github.io/msgpack-d/#PackerImpl" rel="nofollow">PackerImpl</a>, <a href="http://msgpack.github.io/msgpack-d/#Unpacker" rel="nofollow">Unpacker</a> and <a href="http://msgpack.github.io/msgpack-d/#StreamingUnpacker" rel="nofollow">StreamingUnpacker</a> for more details.</p>
<h5 dir="auto">
<a id="user-content-links" class="anchor" aria-hidden="true" href="#links"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Links</h5>
<ul dir="auto">
<li>
<p dir="auto"><a href="http://msgpack.org/" rel="nofollow">The MessagePack Project</a></p>
<p dir="auto">The official MessagePack protocol website.</p>
</li>
<li>
<p dir="auto"><a href="https://github.com/msgpack/msgpack-d/issues">msgpack-d's issue tracker</a></p>
<p dir="auto">Use this issue tracker to review and file bugs in msgpack-d.</p>
</li>
<li>
<p dir="auto"><a href="http://github.com/msgpack/">MessagePack's Github</a></p>
<p dir="auto">Other language bindings and implementations of the msgpack protocol can be found here.</p>
</li>
</ul>
<h5 dir="auto">
<a id="user-content-copyright" class="anchor" aria-hidden="true" href="#copyright"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Copyright</h5>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Copyright (c) 2010- Masahiro Nakagawa"><pre class="notranslate"><code>Copyright (c) 2010- Masahiro Nakagawa
</code></pre></div>
<h5 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h5>
<p dir="auto">Distributed under the <a href="http://www.boost.org/users/license.html" rel="nofollow">Boost Software License, Version 1.0</a>.</p>
</article>
  </div>
        </div>
        
        <div id="qs-jpf91-msgpack-ll" class="qs"><h4><a href="https://github.com/jpf91/msgpack-ll" target="_blank">jpf91/msgpack-ll <span class="qs-url">https://github.com/jpf91/msgpack-ll</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack-ll" class="anchor" aria-hidden="true" href="#msgpack-ll"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack-ll</h5>
<p dir="auto"><a href="https://coveralls.io/github/jpf91/msgpack-ll?branch=master" rel="nofollow"><img src="https://camo.githubusercontent.com/895f06e5f92c1da6808be4ae881010eca89c3371c9eea3ebdc550fb1ccad0193/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6769746875622f6a706639312f6d73677061636b2d6c6c2f62616467652e7376673f6272616e63683d6d6173746572" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/github/jpf91/msgpack-ll/badge.svg?branch=master" style="max-width: 100%;"></a>
<a href="https://travis-ci.org/jpf91/msgpack-ll" rel="nofollow"><img src="https://camo.githubusercontent.com/fbcf7bc6f3cd1031febc094f195e550270b6317c2d6df6c0a5043efbedbfa4cc/68747470733a2f2f7472617669732d63692e6f72672f6a706639312f6d73677061636b2d6c6c2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/jpf91/msgpack-ll.svg?branch=master" style="max-width: 100%;"></a></p>
<p dir="auto">This is a low-level <code>@nogc</code>, <code>nothrow</code>, <code>@safe</code>, <code>pure</code> and <code>betterC</code> compatible
<a href="http://msgpack.org/" rel="nofollow">MessagePack</a> serializer and deserializer. The
library was designed to avoid any external dependencies and handle the low-level protocol
details only. As a result the library doesn't have to do any error handling or
buffer management. This library does never dynamically allocate memory.</p>
<p dir="auto">The API documentation is available <a href="https://jpf91.github.io/msgpack-ll/msgpack_ll.html" rel="nofollow">here</a>.</p>
<h6 dir="auto">
<a id="user-content-a-simple-example-showing-the-complete-api" class="anchor" aria-hidden="true" href="#a-simple-example-showing-the-complete-api"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>A simple example showing the complete API</h6>
<div class="highlight highlight-source-d notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="import msgpack_ll;

// Buffer allocation is not handled by the library
ubyte[128] buffer;


// The MsgpackType enum contains all low-level MessagePack types
enum type = MsgpackType.uint8;

// The DataSize!(MsgpackType) function returns the size of serialized data
// for a certain type.

// The formatter and parser use ref ubyte[DataSize!type] types. This
// forces the compiler to do array length checks at compile time and avoid
// any runtime bounds checking.

// Format the number 42 as a uint8 type. This will require
// DataSize!(MsgpackType.uint8) == 2 bytes storage.
formatType!(type)(42, buffer[0..DataSize!type]);

// To deserialize we have to somehow get the data type at runtime
// Then verify the type is as expected.
assert(getType(buffer[0]) == type);

// Now deserialize. Here we have to specify the MsgpackType
// as a compile time value.
const result = parseType!type(buffer[0..DataSize!type]);
assert(result == 42);"><pre><span class="pl-k">import</span> msgpack_ll;

<span class="pl-c"><span class="pl-c">//</span> Buffer allocation is not handled by the library</span>
<span class="pl-k">ubyte</span>[<span class="pl-c1">128</span>] buffer;


<span class="pl-c"><span class="pl-c">//</span> The MsgpackType enum contains all low-level MessagePack types</span>
<span class="pl-k">enum</span> type = MsgpackType.uint8;

<span class="pl-c"><span class="pl-c">//</span> The DataSize!(MsgpackType) function returns the size of serialized data</span>
<span class="pl-c"><span class="pl-c">//</span> for a certain type.</span>

<span class="pl-c"><span class="pl-c">//</span> The formatter and parser use ref ubyte[DataSize!type] types. This</span>
<span class="pl-c"><span class="pl-c">//</span> forces the compiler to do array length checks at compile time and avoid</span>
<span class="pl-c"><span class="pl-c">//</span> any runtime bounds checking.</span>

<span class="pl-c"><span class="pl-c">//</span> Format the number 42 as a uint8 type. This will require</span>
<span class="pl-c"><span class="pl-c">//</span> DataSize!(MsgpackType.uint8) == 2 bytes storage.</span>
formatType<span class="pl-k">!</span>(type)(<span class="pl-c1">42</span>, buffer[<span class="pl-c1">0</span><span class="pl-k">..</span>DataSize<span class="pl-k">!</span>type]);

<span class="pl-c"><span class="pl-c">//</span> To deserialize we have to somehow get the data type at runtime</span>
<span class="pl-c"><span class="pl-c">//</span> Then verify the type is as expected.</span>
<span class="pl-k">assert</span>(getType(buffer[<span class="pl-c1">0</span>]) <span class="pl-k">==</span> type);

<span class="pl-c"><span class="pl-c">//</span> Now deserialize. Here we have to specify the MsgpackType</span>
<span class="pl-c"><span class="pl-c">//</span> as a compile time value.</span>
<span class="pl-k">const</span> result = parseType<span class="pl-k">!</span>type(buffer[<span class="pl-c1">0</span><span class="pl-k">..</span>DataSize<span class="pl-k">!</span>type]);
<span class="pl-k">assert</span>(result <span class="pl-k">==</span> <span class="pl-c1">42</span>);</pre></div>
<h6 dir="auto">
<a id="user-content-a-quick-view-at-the-generated-code-for-this-library" class="anchor" aria-hidden="true" href="#a-quick-view-at-the-generated-code-for-this-library"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>A quick view at the generated code for this library</h6>
<h7 dir="auto">
<a id="user-content-serializing-an-8-bit-integer" class="anchor" aria-hidden="true" href="#serializing-an-8-bit-integer"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Serializing an 8 bit integer</h7>
<div class="highlight highlight-source-d notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="void format(ref ubyte[128] buffer)
{
    enum type = MsgpackType.uint8;
    formatType!(type)(42, buffer[0..DataSize!type]);
}"><pre><span class="pl-k">void</span> <span class="pl-en">format</span>(<span class="pl-k">ref</span> <span class="pl-k">ubyte</span>[<span class="pl-c1">128</span>] buffer)
{
    <span class="pl-k">enum</span> type = MsgpackType.uint8;
    formatType<span class="pl-k">!</span>(type)(<span class="pl-c1">42</span>, buffer[<span class="pl-c1">0</span><span class="pl-k">..</span>DataSize<span class="pl-k">!</span>type]);
}</pre></div>
<p dir="auto">Because of clever typing there's no runtime bounds checking but all bounds
checks are performed at compile time by type checking.</p>
<div class="highlight highlight-source-assembly notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="pure nothrow @nogc @safe void msgpack_ll.format(ref ubyte[128]):
        mov     BYTE PTR [rdi], -52
        mov     BYTE PTR [rdi+1], 42
        ret"><pre><span class="pl-en">pure nothrow @nogc @safe void msgpack_ll.form</span><span class="pl-c1">at</span><span class="pl-en">(ref ubyte</span><span class="pl-s1">[</span><span class="pl-c1">128</span><span class="pl-s1">]</span><span class="pl-en">):</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">     BYTE PTR </span><span class="pl-s1">[</span><span class="pl-v">rdi</span><span class="pl-s1">],</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-c1">52</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">     BYTE PTR </span><span class="pl-s1">[</span><span class="pl-v">rdi</span><span class="pl-s1">+</span><span class="pl-c1">1</span><span class="pl-s1">],</span><span class="pl-en"> </span><span class="pl-c1">42</span>
<span class="pl-en">        </span><span class="pl-k">ret</span></pre></div>
<h7 dir="auto">
<a id="user-content-serializing-a-small-negative-integer-into-one-byte" class="anchor" aria-hidden="true" href="#serializing-a-small-negative-integer-into-one-byte"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Serializing a small negative integer into one byte</h7>
<div class="highlight highlight-source-d notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="void format(ref ubyte[128] buffer)
{
    enum type = MsgpackType.negFixInt;
    formatType!(type)(-11, buffer[0..DataSize!type]);
}"><pre><span class="pl-k">void</span> <span class="pl-en">format</span>(<span class="pl-k">ref</span> <span class="pl-k">ubyte</span>[<span class="pl-c1">128</span>] buffer)
{
    <span class="pl-k">enum</span> type = MsgpackType.negFixInt;
    formatType<span class="pl-k">!</span>(type)(<span class="pl-k">-</span><span class="pl-c1">11</span>, buffer[<span class="pl-c1">0</span><span class="pl-k">..</span>DataSize<span class="pl-k">!</span>type]);
}</pre></div>
<p dir="auto">The MessagePack format is cleverly designed, so encoding the type is actually free
in this case.</p>
<div class="highlight highlight-source-assembly notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="pure nothrow @nogc @safe void msgpack_ll.format(ref ubyte[128]):
        mov     BYTE PTR [rdi], -11
        ret"><pre><span class="pl-en">pure nothrow @nogc @safe void msgpack_ll.form</span><span class="pl-c1">at</span><span class="pl-en">(ref ubyte</span><span class="pl-s1">[</span><span class="pl-c1">128</span><span class="pl-s1">]</span><span class="pl-en">):</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">     BYTE PTR </span><span class="pl-s1">[</span><span class="pl-v">rdi</span><span class="pl-s1">],</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-c1">11</span>
<span class="pl-en">        </span><span class="pl-k">ret</span></pre></div>
<h7 dir="auto">
<a id="user-content-deserializing-an-expected-type" class="anchor" aria-hidden="true" href="#deserializing-an-expected-type"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Deserializing an expected type</h7>
<div class="highlight highlight-source-d notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="bool parse(ref ubyte[128] buffer, ref byte value)
{
    enum type = MsgpackType.negFixInt;
    auto rtType = getType(buffer[0]);
    if(rtType != type)
        return false;

    value = parseType!type(buffer[0..DataSize!type]);
    return true;
}"><pre><span class="pl-k">bool</span> <span class="pl-en">parse</span>(<span class="pl-k">ref</span> <span class="pl-k">ubyte</span>[<span class="pl-c1">128</span>] buffer, <span class="pl-k">ref</span> <span class="pl-k">byte</span> value)
{
    <span class="pl-k">enum</span> type = MsgpackType.negFixInt;
    <span class="pl-k">auto</span> rtType = getType(buffer[<span class="pl-c1">0</span>]);
    <span class="pl-k">if</span>(rtType <span class="pl-k">!=</span> type)
        <span class="pl-k">return</span> <span class="pl-c1">false</span>;

    value = parseType<span class="pl-k">!</span>type(buffer[<span class="pl-c1">0</span><span class="pl-k">..</span>DataSize<span class="pl-k">!</span>type]);
    <span class="pl-k">return</span> <span class="pl-c1">true</span>;
}</pre></div>
<p dir="auto">The compiler will inline functions and can see through the switch block in
<code>getType</code>. If you explicitly ask for one type, the compiler will reduce the
code to a simple explicit <code>if</code> check for this type!</p>
<div class="highlight highlight-source-assembly notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="pure nothrow @nogc @safe bool msgpack_ll.parse(ref ubyte[128], ref byte):
        movzx   edx, BYTE PTR [rdi]
        cmp     edx, 223
        jle     .L58
        mov     BYTE PTR [rsi], dl
        mov     eax, 1
        ret
.L58:
        xor     eax, eax
        ret"><pre><span class="pl-en">pure nothrow @nogc @safe bool msgpack_ll.parse(ref ubyte</span><span class="pl-s1">[</span><span class="pl-c1">128</span><span class="pl-s1">],</span><span class="pl-en"> ref byte):</span>
<span class="pl-en">        </span><span class="pl-k">movzx</span><span class="pl-en">   </span><span class="pl-v">edx</span><span class="pl-s1">,</span><span class="pl-en"> BYTE PTR </span><span class="pl-s1">[</span><span class="pl-v">rdi</span><span class="pl-s1">]</span>
<span class="pl-en">        </span><span class="pl-k">cmp</span><span class="pl-en">     </span><span class="pl-v">edx</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">223</span>
<span class="pl-en">        </span><span class="pl-k">jle</span><span class="pl-en">     .L58</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">     BYTE PTR </span><span class="pl-s1">[</span><span class="pl-v">rsi</span><span class="pl-s1">],</span><span class="pl-en"> </span><span class="pl-v">dl</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">     </span><span class="pl-v">eax</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">1</span>
<span class="pl-en">        </span><span class="pl-k">ret</span>
<span class="pl-en">.L58:</span>
<span class="pl-en">        </span><span class="pl-k">xor</span><span class="pl-en">     </span><span class="pl-v">eax</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">eax</span>
<span class="pl-en">        </span><span class="pl-k">ret</span></pre></div>
<h7 dir="auto">
<a id="user-content-deserializing-one-of-multiple-types" class="anchor" aria-hidden="true" href="#deserializing-one-of-multiple-types"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Deserializing one of multiple types</h7>
<div class="highlight highlight-source-d notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="bool parse(ref ubyte[128] buffer, ref byte value)
{
    auto rtType = getType(buffer[0]);
    switch(rtType)
    {
        case MsgpackType.negFixInt:
            value = parseType!(MsgpackType.negFixInt)(buffer[0..DataSize!(MsgpackType.negFixInt)]);
            return true;
        case MsgpackType.int8:
            value = parseType!(MsgpackType.int8)(buffer[0..DataSize!(MsgpackType.int8)]);
            return true;
        default:
            return false;
    }
}"><pre><span class="pl-k">bool</span> <span class="pl-en">parse</span>(<span class="pl-k">ref</span> <span class="pl-k">ubyte</span>[<span class="pl-c1">128</span>] buffer, <span class="pl-k">ref</span> <span class="pl-k">byte</span> value)
{
    <span class="pl-k">auto</span> rtType = getType(buffer[<span class="pl-c1">0</span>]);
    <span class="pl-k">switch</span>(rtType)
    {
        <span class="pl-k">case</span> MsgpackType.negFixInt:
            value = parseType<span class="pl-k">!</span>(MsgpackType.negFixInt)(buffer[<span class="pl-c1">0</span><span class="pl-k">..</span>DataSize<span class="pl-k">!</span>(MsgpackType.negFixInt)]);
            <span class="pl-k">return</span> <span class="pl-c1">true</span>;
        <span class="pl-k">case</span> MsgpackType.int8:
            value = parseType<span class="pl-k">!</span>(MsgpackType.int8)(buffer[<span class="pl-c1">0</span><span class="pl-k">..</span>DataSize<span class="pl-k">!</span>(MsgpackType.int8)]);
            <span class="pl-k">return</span> <span class="pl-c1">true</span>;
        <span class="pl-k">default</span>:
            <span class="pl-k">return</span> <span class="pl-c1">false</span>;
    }
}</pre></div>
<p dir="auto">The generated code is obviously slighly more complex. The interesting part here
is that type checking is directly done using the raw type value and not the
enum values returned by <code>getType</code>. Even manually written ASM probably can't do
much better here.</p>
<div class="highlight highlight-source-assembly notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="pure nothrow @nogc @safe bool msgpack_ll.parse(ref ubyte[128], ref byte):
        movzx   ecx, BYTE PTR [rdi]
        xor     eax, eax
        cmp     ecx, 191
        jle     .L55
        cmp     ecx, 223
        jg      .L56
        cmp     ecx, 208
        jne     .L60
        movzx   eax, BYTE PTR [rdi+1]
        mov     BYTE PTR [rsi], al
        mov     eax, 1
.L55:
        rep; ret
.L56:
        mov     BYTE PTR [rsi], cl
        mov     eax, 1
        ret
.L60:
        ret"><pre><span class="pl-en">pure nothrow @nogc @safe bool msgpack_ll.parse(ref ubyte</span><span class="pl-s1">[</span><span class="pl-c1">128</span><span class="pl-s1">],</span><span class="pl-en"> ref byte):</span>
<span class="pl-en">        </span><span class="pl-k">movzx</span><span class="pl-en">   </span><span class="pl-v">ecx</span><span class="pl-s1">,</span><span class="pl-en"> BYTE PTR </span><span class="pl-s1">[</span><span class="pl-v">rdi</span><span class="pl-s1">]</span>
<span class="pl-en">        </span><span class="pl-k">xor</span><span class="pl-en">     </span><span class="pl-v">eax</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">eax</span>
<span class="pl-en">        </span><span class="pl-k">cmp</span><span class="pl-en">     </span><span class="pl-v">ecx</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">191</span>
<span class="pl-en">        </span><span class="pl-k">jle</span><span class="pl-en">     .L55</span>
<span class="pl-en">        </span><span class="pl-k">cmp</span><span class="pl-en">     </span><span class="pl-v">ecx</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">223</span>
<span class="pl-en">        </span><span class="pl-k">jg</span><span class="pl-en">      .L56</span>
<span class="pl-en">        </span><span class="pl-k">cmp</span><span class="pl-en">     </span><span class="pl-v">ecx</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">208</span>
<span class="pl-en">        </span><span class="pl-k">jne</span><span class="pl-en">     .L60</span>
<span class="pl-en">        </span><span class="pl-k">movzx</span><span class="pl-en">   </span><span class="pl-v">eax</span><span class="pl-s1">,</span><span class="pl-en"> BYTE PTR </span><span class="pl-s1">[</span><span class="pl-v">rdi</span><span class="pl-s1">+</span><span class="pl-c1">1</span><span class="pl-s1">]</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">     BYTE PTR </span><span class="pl-s1">[</span><span class="pl-v">rsi</span><span class="pl-s1">],</span><span class="pl-en"> </span><span class="pl-v">al</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">     </span><span class="pl-v">eax</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">1</span>
<span class="pl-en">.L55:</span>
<span class="pl-en">        </span><span class="pl-k">rep</span><span class="pl-c">; ret</span>
<span class="pl-en">.L56:</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">     BYTE PTR </span><span class="pl-s1">[</span><span class="pl-v">rsi</span><span class="pl-s1">],</span><span class="pl-en"> </span><span class="pl-v">cl</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">     </span><span class="pl-v">eax</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">1</span>
<span class="pl-en">        </span><span class="pl-k">ret</span>
<span class="pl-en">.L60:</span>
<span class="pl-en">        </span><span class="pl-k">ret</span></pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-danellis-dart-msgpack" class="qs"><h4><a href="https://github.com/danellis/dart-msgpack" target="_blank">danellis/dart-msgpack <span class="qs-url">https://github.com/danellis/dart-msgpack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-dart-msgpack" class="anchor" aria-hidden="true" href="#dart-msgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>dart-msgpack</h5>
<p dir="auto">This is a very early release of my MessagePack library for Dart. Currently, message classes must be written by hand. For example:</p>
<div class="highlight highlight-source-dart notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="class NotificationFrame extends Message {
    String kind;
    Map&lt;String, Object&gt; data;

    NotificationFrame(this.kind, this.data);

    static NotificationFrame fromList(List f) =&gt; new NotificationFrame(f[0], f[1]);
    List toList() =&gt; [kind, data];
}"><pre><span class="pl-k">class</span> <span class="pl-c1">NotificationFrame</span> <span class="pl-k">extends</span> <span class="pl-c1">Message</span> {
    <span class="pl-c1">String</span> kind;
    <span class="pl-c1">Map&lt;<span class="pl-c1">String</span>, <span class="pl-c1">Object</span>&gt;</span> data;

    <span class="pl-c1">NotificationFrame</span>(<span class="pl-c1">this</span>.kind, <span class="pl-c1">this</span>.data);

    <span class="pl-k">static</span> <span class="pl-c1">NotificationFrame</span> <span class="pl-en">fromList</span>(<span class="pl-c1">List</span> f) <span class="pl-k">=&gt;</span> <span class="pl-k">new</span> <span class="pl-c1">NotificationFrame</span>(f[<span class="pl-c1">0</span>], f[<span class="pl-c1">1</span>]);
    <span class="pl-c1">List</span> <span class="pl-en">toList</span>() <span class="pl-k">=&gt;</span> [kind, data];
}</pre></div>
<p dir="auto">For each class you need to define the <code>fromList</code> and <code>toList</code> methods, which convert from and to a list of fields respectively.</p>
<p dir="auto">For example usage, see the unit tests.</p>
</article>
  </div>
        </div>
        
        <div id="qs-knopp-msgpack_dart" class="qs"><h4><a href="https://github.com/knopp/msgpack_dart" target="_blank">knopp/msgpack_dart <span class="qs-url">https://github.com/knopp/msgpack_dart</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack_dart" class="anchor" aria-hidden="true" href="#msgpack_dart"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack_dart</h5>
<p dir="auto">MessagePack implementation for dart.</p>
<p dir="auto">Clean, simple, fast and with sane API and implementation.</p>
</article>
  </div>
        </div>
        
        <div id="qs-chinawsb-qmsgpack-delphi" class="qs"><h4><a href="http://www.qdac.cc" target="_blank">chinawsb/qmsgpack-delphi <span class="qs-url">http://www.qdac.cc</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h7 dir="auto">
<a id="user-content-qmsgpack-messagepack-for-delphic-builder" class="anchor" aria-hidden="true" href="#qmsgpack-messagepack-for-delphic-builder"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>QMsgPack-Messagepack for Delphi/C++ Builder</h7>
<p dir="auto">QMsgPack is a simple and powerful Delphi &amp; C++ Builder implementation for messagepack protocol.
QMsgPack is a part of QDAC 3.0,Source code hosted in Sourceforge(<a href="http://sourceforge.net/p/qdac3" rel="nofollow">http://sourceforge.net/p/qdac3</a>).</p>
<h7 dir="auto">
<a id="user-content-feathers" class="anchor" aria-hidden="true" href="#feathers"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Feathers</h7>
<p dir="auto"> Full types support,include messagepack extension type</p>
<p dir="auto"> Full open source,free for used in ANY PURPOSE</p>
<p dir="auto"> Quick and simple interface</p>
<p dir="auto"> RTTI support include</p>
<h7 dir="auto">
<a id="user-content-install" class="anchor" aria-hidden="true" href="#install"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install</h7>
<p dir="auto">QMsgPack is not a desgin time package.So just place QMsgPack files into search path and add to your project.</p>
<h7 dir="auto">
<a id="user-content-support" class="anchor" aria-hidden="true" href="#support"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Support</h7>
<p dir="auto"> Topic in Website (<a href="http://www.qdac.cc/?cat=44" rel="nofollow">http://www.qdac.cc/?cat=44</a>) ,CHINESE only</p>
<p dir="auto"> Mail to author (<a href="mailto:chinawsb@sina.com">chinawsb@sina.com</a>)</p>
<p dir="auto"> Post in forum (<a href="http://tieba.baidu.com/f?kw=qdac" rel="nofollow">http://tieba.baidu.com/f?kw=qdac</a>)</p>
<p dir="auto"> QQ Group No250530692 (<a href="http://jq.qq.com/?_wv=1027&amp;k=ZH6mZR" rel="nofollow">http://jq.qq.com/?_wv=1027&amp;k=ZH6mZR</a>)</p>
<h7 dir="auto">
<a id="user-content-source-check-out" class="anchor" aria-hidden="true" href="#source-check-out"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Source check out</h7>
<p dir="auto"> HTTP (<a href="http://svn.code.sf.net/p/qdac3/code/" rel="nofollow">http://svn.code.sf.net/p/qdac3/code/</a>)</p>
<p dir="auto"> SVN (svn://svn.code.sf.net/p/qdac3/code/)</p>
<h7 dir="auto">
<a id="user-content-example" class="anchor" aria-hidden="true" href="#example"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example</h7>
<div class="highlight highlight-source-pascal notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="
var
  lvMsg, lvMsg2:TQMsgPack;
  lvBytes:TBytes;
  s:string;
begin
  lvMsg := TQMsgPack.Create;
  lvMsg.ForcePath('key.obj').AsString := ',ascii';
    
  //
  lvBytes := lvMsg.Encode;

  lvMsg2 := TQMsgPack.Create;
  lvMsg2.Parse(lvBytes);
  //
  showMessage(lvMsg.ForcePath('key.obj').AsString);
  ....
  "><pre><span class="pl-k">var</span>
  lvMsg, lvMsg2:TQMsgPack;
  lvBytes:TBytes;
  s:string;
<span class="pl-k">begin</span>
  lvMsg := TQMsgPack.Create;
  lvMsg.ForcePath(<span class="pl-s"><span class="pl-pds">'</span>key.obj<span class="pl-pds">'</span></span>).AsString := <span class="pl-s"><span class="pl-pds">'</span>,ascii<span class="pl-pds">'</span></span>;
    
  <span class="pl-c"><span class="pl-c">//</span></span>
  lvBytes := lvMsg.Encode;

  lvMsg2 := TQMsgPack.Create;
  lvMsg2.Parse(lvBytes);
  <span class="pl-c"><span class="pl-c">//</span></span>
  showMessage(lvMsg.ForcePath(<span class="pl-s"><span class="pl-pds">'</span>key.obj<span class="pl-pds">'</span></span>).AsString);
  ....
  </pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-mururu-msgpack-elixir" class="qs"><h4><a href="https://github.com/mururu/msgpack-elixir" target="_blank">mururu/msgpack-elixir <span class="qs-url">https://github.com/mururu/msgpack-elixir</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack-for-elixir" class="anchor" aria-hidden="true" href="#messagepack-for-elixir"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack for Elixir</h5>
<p dir="auto"><a href="https://travis-ci.org/mururu/msgpack-elixir" rel="nofollow"><img src="https://camo.githubusercontent.com/f885270595df739b32a59bdaa7b19dbd861f6bc1993d12957ac1fb865db7dc4f/68747470733a2f2f7472617669732d63692e6f72672f6d75727572752f6d73677061636b2d656c697869722e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/mururu/msgpack-elixir.png?branch=master" style="max-width: 100%;"></a></p>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<p dir="auto">Add <code>:message_pack</code> as a dependency in your <code>mix.exs</code> file.</p>
<div class="highlight highlight-source-elixir notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='defp deps do
  [{:message_pack, "~&gt; 0.2.0"}]
end'><pre><span class="pl-k">defp</span> <span class="pl-en">deps</span> <span class="pl-k">do</span>
  <span class="pl-kos">[</span><span class="pl-kos">{</span><span class="pl-pds">:message_pack</span><span class="pl-kos">,</span> <span class="pl-s">"~&gt; 0.2.0"</span><span class="pl-kos">}</span><span class="pl-kos">]</span>
<span class="pl-k">end</span></pre></div>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<div class="highlight highlight-source-elixir notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="# pack
MessagePack.pack([1,2,3]) #=&gt; { :ok, &lt;&lt;147,1,2,3&gt;&gt; }
MessagePack.pack!([1,2,3]) #=&gt; &lt;&lt;147,1,2,3&gt;&gt;

# unpack
MessagePack.unpack(&lt;&lt;147,1,2,3&gt;&gt;) #=&gt; { :ok, [1,2,3] }
MessagePack.unpack!(&lt;&lt;147,1,2,3&gt;&gt;) #=&gt; [1,2,3]

# unpack_once
MessagePack.unpack_once(&lt;&lt;147,1,2,3,4&gt;&gt;) #=&gt; {:ok, {[1, 2, 3], &lt;&lt;4&gt;&gt;}}
MessagePack.unpack_once!(&lt;&lt;147,1,2,3,4&gt;&gt;) #=&gt; {[1, 2, 3], &lt;&lt;4&gt;&gt;}"><pre><span class="pl-c"># pack</span>
<span class="pl-v">MessagePack</span><span class="pl-c1">.</span><span class="pl-en">pack</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-c1">1</span><span class="pl-kos">,</span><span class="pl-c1">2</span><span class="pl-kos">,</span><span class="pl-c1">3</span><span class="pl-kos">]</span><span class="pl-kos">)</span> <span class="pl-c">#=&gt; { :ok, &lt;&lt;147,1,2,3&gt;&gt; }</span>
<span class="pl-v">MessagePack</span><span class="pl-c1">.</span><span class="pl-en">pack!</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-c1">1</span><span class="pl-kos">,</span><span class="pl-c1">2</span><span class="pl-kos">,</span><span class="pl-c1">3</span><span class="pl-kos">]</span><span class="pl-kos">)</span> <span class="pl-c">#=&gt; &lt;&lt;147,1,2,3&gt;&gt;</span>

<span class="pl-c"># unpack</span>
<span class="pl-v">MessagePack</span><span class="pl-c1">.</span><span class="pl-en">unpack</span><span class="pl-kos">(</span><span class="pl-kos">&lt;&lt;</span><span class="pl-c1">147</span><span class="pl-kos">,</span><span class="pl-c1">1</span><span class="pl-kos">,</span><span class="pl-c1">2</span><span class="pl-kos">,</span><span class="pl-c1">3</span><span class="pl-kos">&gt;&gt;</span><span class="pl-kos">)</span> <span class="pl-c">#=&gt; { :ok, [1,2,3] }</span>
<span class="pl-v">MessagePack</span><span class="pl-c1">.</span><span class="pl-en">unpack!</span><span class="pl-kos">(</span><span class="pl-kos">&lt;&lt;</span><span class="pl-c1">147</span><span class="pl-kos">,</span><span class="pl-c1">1</span><span class="pl-kos">,</span><span class="pl-c1">2</span><span class="pl-kos">,</span><span class="pl-c1">3</span><span class="pl-kos">&gt;&gt;</span><span class="pl-kos">)</span> <span class="pl-c">#=&gt; [1,2,3]</span>

<span class="pl-c"># unpack_once</span>
<span class="pl-v">MessagePack</span><span class="pl-c1">.</span><span class="pl-en">unpack_once</span><span class="pl-kos">(</span><span class="pl-kos">&lt;&lt;</span><span class="pl-c1">147</span><span class="pl-kos">,</span><span class="pl-c1">1</span><span class="pl-kos">,</span><span class="pl-c1">2</span><span class="pl-kos">,</span><span class="pl-c1">3</span><span class="pl-kos">,</span><span class="pl-c1">4</span><span class="pl-kos">&gt;&gt;</span><span class="pl-kos">)</span> <span class="pl-c">#=&gt; {:ok, {[1, 2, 3], &lt;&lt;4&gt;&gt;}}</span>
<span class="pl-v">MessagePack</span><span class="pl-c1">.</span><span class="pl-en">unpack_once!</span><span class="pl-kos">(</span><span class="pl-kos">&lt;&lt;</span><span class="pl-c1">147</span><span class="pl-kos">,</span><span class="pl-c1">1</span><span class="pl-kos">,</span><span class="pl-c1">2</span><span class="pl-kos">,</span><span class="pl-c1">3</span><span class="pl-kos">,</span><span class="pl-c1">4</span><span class="pl-kos">&gt;&gt;</span><span class="pl-kos">)</span> <span class="pl-c">#=&gt; {[1, 2, 3], &lt;&lt;4&gt;&gt;}</span></pre></div>
<h6 dir="auto">
<a id="user-content-options" class="anchor" aria-hidden="true" href="#options"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Options</h6>
<ul dir="auto">
<li><code>enable_string</code></li>
</ul>
<p dir="auto">Support string type. This options is <code>false</code> by default.</p>
<div class="highlight highlight-source-elixir notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="iex(1)&gt; { :ok, bin } = MessagePack.pack(&lt;&lt;255&gt;&gt;)
{:ok, &lt;&lt;161, 255&gt;&gt;}
iex(3)&gt; MessagePack.unpack(&lt;&lt;161, 255&gt;&gt;)
{:ok, &lt;&lt;255&gt;&gt;}
iex(4)&gt; MessagePack.unpack(&lt;&lt;161, 255&gt;&gt;, enable_string: true)
{:error, {:invalid_string, &lt;&lt;255&gt;&gt;}}"><pre><span class="pl-en">iex</span><span class="pl-kos">(</span><span class="pl-c1">1</span><span class="pl-kos">)</span><span class="pl-c1">&gt;</span> <span class="pl-kos">{</span> <span class="pl-pds">:ok</span><span class="pl-kos">,</span> <span class="pl-s1">bin</span> <span class="pl-kos">}</span> <span class="pl-c1">=</span> <span class="pl-v">MessagePack</span><span class="pl-c1">.</span><span class="pl-en">pack</span><span class="pl-kos">(</span><span class="pl-kos">&lt;&lt;</span><span class="pl-c1">255</span><span class="pl-kos">&gt;&gt;</span><span class="pl-kos">)</span>
<span class="pl-kos">{</span><span class="pl-pds">:ok</span><span class="pl-kos">,</span> <span class="pl-kos">&lt;&lt;</span><span class="pl-c1">161</span><span class="pl-kos">,</span> <span class="pl-c1">255</span><span class="pl-kos">&gt;&gt;</span><span class="pl-kos">}</span>
<span class="pl-en">iex</span><span class="pl-kos">(</span><span class="pl-c1">3</span><span class="pl-kos">)</span><span class="pl-c1">&gt;</span> <span class="pl-v">MessagePack</span><span class="pl-c1">.</span><span class="pl-en">unpack</span><span class="pl-kos">(</span><span class="pl-kos">&lt;&lt;</span><span class="pl-c1">161</span><span class="pl-kos">,</span> <span class="pl-c1">255</span><span class="pl-kos">&gt;&gt;</span><span class="pl-kos">)</span>
<span class="pl-kos">{</span><span class="pl-pds">:ok</span><span class="pl-kos">,</span> <span class="pl-kos">&lt;&lt;</span><span class="pl-c1">255</span><span class="pl-kos">&gt;&gt;</span><span class="pl-kos">}</span>
<span class="pl-en">iex</span><span class="pl-kos">(</span><span class="pl-c1">4</span><span class="pl-kos">)</span><span class="pl-c1">&gt;</span> <span class="pl-v">MessagePack</span><span class="pl-c1">.</span><span class="pl-en">unpack</span><span class="pl-kos">(</span><span class="pl-kos">&lt;&lt;</span><span class="pl-c1">161</span><span class="pl-kos">,</span> <span class="pl-c1">255</span><span class="pl-kos">&gt;&gt;</span><span class="pl-kos">,</span> <span class="pl-pds">enable_string: </span><span class="pl-c1">true</span><span class="pl-kos">)</span>
<span class="pl-kos">{</span><span class="pl-pds">:error</span><span class="pl-kos">,</span> <span class="pl-kos">{</span><span class="pl-pds">:invalid_string</span><span class="pl-kos">,</span> <span class="pl-kos">&lt;&lt;</span><span class="pl-c1">255</span><span class="pl-kos">&gt;&gt;</span><span class="pl-kos">}</span><span class="pl-kos">}</span></pre></div>
<ul dir="auto">
<li><code>ext</code></li>
</ul>
<p dir="auto">Support extention type.</p>
<p dir="auto">See <code>test/message_pack_ext_test.exs</code>.</p>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<p dir="auto">MIT</p>
</article>
  </div>
        </div>
        
        <div id="qs-lexmag-msgpax" class="qs"><h4><a href="https://hexdocs.pm/msgpax" target="_blank">lexmag/msgpax <span class="qs-url">https://hexdocs.pm/msgpax</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpax" class="anchor" aria-hidden="true" href="#msgpax"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Msgpax</h5>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/lexmag/msgpax/workflows/CI/badge.svg"><img src="https://github.com/lexmag/msgpax/workflows/CI/badge.svg" alt="CI Status" style="max-width: 100%;"></a>
<a href="https://hex.pm/packages/msgpax" rel="nofollow"><img src="https://camo.githubusercontent.com/e9fba5b524cfe296d9f11e9ad7b09e3de191fd3d5ccd6728369d1d6e56a118a2/68747470733a2f2f696d672e736869656c64732e696f2f686578706d2f762f6d73677061782e737667" alt="Hex Version" data-canonical-src="https://img.shields.io/hexpm/v/msgpax.svg" style="max-width: 100%;"></a></p>
<p dir="auto">Msgpax is a fast and comprehensive library for serializing and deserializing Elixir terms using the <a href="http://msgpack.org/" rel="nofollow">MessagePack</a> format.</p>
<p dir="auto"><a href="http://hexdocs.pm/msgpax" rel="nofollow">Documentation is available online</a>.</p>
<h6 dir="auto">
<a id="user-content-features" class="anchor" aria-hidden="true" href="#features"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Features</h6>
<ul dir="auto">
<li>Packing and unpacking Elixir terms via <a href="http://hexdocs.pm/msgpax/Msgpax.html#pack/1" rel="nofollow"><code>Msgpax.pack/1</code></a> and <a href="http://hexdocs.pm/msgpax/Msgpax.html#unpack/1" rel="nofollow"><code>Msgpax.unpack/1</code></a> (and their bang! variants).</li>
<li>Unpacking of partial slices of MessagePack-encoded terms via <a href="http://hexdocs.pm/msgpax/Msgpax.html#unpack_slice/1" rel="nofollow"><code>Msgpax.unpack_slice/1</code></a>.</li>
<li>Support for "Binary" and "Extension" MessagePack types via <a href="http://hexdocs.pm/msgpax/Msgpax.Bin.html" rel="nofollow"><code>Msgpax.Bin</code></a> and <a href="http://hexdocs.pm/msgpax/Msgpax.Ext.html" rel="nofollow"><code>Msgpax.Ext</code></a>, respectively.</li>
<li>Protocol-based packing through the <a href="http://hexdocs.pm/msgpax/Msgpax.Packer.html" rel="nofollow"><code>Msgpax.Packer</code></a> protocol, that can be derived for user-defined structs.</li>
<li>A Plug parser (<a href="http://hexdocs.pm/msgpax/Msgpax.PlugParser.html" rel="nofollow"><code>Msgpax.PlugParser</code></a>) to parse requests with MessagePack-encoded bodies.</li>
<li>Support for MessagePack data fragment manipulation.</li>
</ul>
<p dir="auto">A detailed table that shows the relationship between Elixir types and MessagePack types can be found in the <a href="https://hexdocs.pm/msgpax/Msgpax.html" rel="nofollow">documentation for the <code>Msgpax</code> module</a>.</p>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<p dir="auto">Add <code>:msgpax</code> as a dependency in your <code>mix.exs</code> file:</p>
<div class="highlight highlight-source-elixir notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='def deps do
  [{:msgpax, "~&gt; 2.0"}]
end'><pre><span class="pl-k">def</span> <span class="pl-en">deps</span> <span class="pl-k">do</span>
  <span class="pl-kos">[</span><span class="pl-kos">{</span><span class="pl-pds">:msgpax</span><span class="pl-kos">,</span> <span class="pl-s">"~&gt; 2.0"</span><span class="pl-kos">}</span><span class="pl-kos">]</span>
<span class="pl-k">end</span></pre></div>
<p dir="auto">Then, run <code>mix deps.get</code> in your shell to fetch the new dependency.</p>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<p dir="auto">Msgpax is released under <a href="/lexmag/msgpax/blob/master/LICENSE">the ISC license</a>.</p>
</article>
  </div>
        </div>
        
        <div id="qs-ymofen-thealchemist" class="qs"><h4><a href="https://github.com/ymofen/thealchemist" target="_blank">ymofen/thealchemist <span class="qs-url">https://github.com/ymofen/thealchemist</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-the-alchemist" class="anchor" aria-hidden="true" href="#the-alchemist"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>The Alchemist</h5>
<p dir="auto"><a href="https://travis-ci.org/vertexclique/thealchemist" rel="nofollow"><img src="https://camo.githubusercontent.com/7590f18b873e5b11ff4eea482703edf326f8d438fa8e826c241a4773b4fbfd87/68747470733a2f2f7472617669732d63692e6f72672f766572746578636c697175652f746865616c6368656d6973742e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/vertexclique/thealchemist.svg?branch=master" style="max-width: 100%;"></a></p>
<p dir="auto">Elixir implementation bundle for MessagePack</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/686e22e62ba8fcb12ca9a97a2edd57c0e4ddaf87a22510c89bb36796ed37fd11/687474703a2f2f7777772e77686174732d796f75722d7369676e2e636f6d2f696d616765732f416c6368656d7953796d626f6c732e6a7067"><img src="https://camo.githubusercontent.com/686e22e62ba8fcb12ca9a97a2edd57c0e4ddaf87a22510c89bb36796ed37fd11/687474703a2f2f7777772e77686174732d796f75722d7369676e2e636f6d2f696d616765732f416c6368656d7953796d626f6c732e6a7067" alt="The Alchemist" style="width: 300px; max-width: 100%;" data-canonical-src="http://www.whats-your-sign.com/images/AlchemySymbols.jpg"></a></p>
<p dir="auto">Elixir implementation relies on <code>mururu/msgpack-elixir</code>
<a href="http://badge.fury.io/gh/mururu%2Fmsgpack-elixir" rel="nofollow"><img src="https://camo.githubusercontent.com/37af7fad55fc9f4ce33dfb562a45f39a3991ef87f83070d4be1676501e29b080/68747470733a2f2f62616467652e667572792e696f2f67682f6d75727572752532466d73677061636b2d656c697869722e737667" alt="GitHub version" data-canonical-src="https://badge.fury.io/gh/mururu%2Fmsgpack-elixir.svg" style="max-width: 100%;"></a></p>
<p dir="auto">Pure erlang implementation used with <code>msgpack/msgpack-erlang</code>
<a href="http://badge.fury.io/gh/msgpack%2Fmsgpack-erlang" rel="nofollow"><img src="https://camo.githubusercontent.com/36e34ae86d6a12d69adfdfc5f1fcea12cd132d7144076ba0aa90b1e4aa77b51e/68747470733a2f2f62616467652e667572792e696f2f67682f6d73677061636b2532466d73677061636b2d65726c616e672e737667" alt="GitHub version" data-canonical-src="https://badge.fury.io/gh/msgpack%2Fmsgpack-erlang.svg" style="max-width: 100%;"></a></p>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<p dir="auto">###In pure elixir:</p>
<div class="highlight highlight-source-elixir notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="# pack
TheAlchemist.pack([1,2,3]) #=&gt; { :ok, &lt;&lt;147,1,2,3&gt;&gt; }
TheAlchemist.pack!([1,2,3]) #=&gt; &lt;&lt;147,1,2,3&gt;&gt;

# unpack
TheAlchemist.unpack(&lt;&lt;147,1,2,3&gt;&gt;) #=&gt; { :ok, [1,2,3] }
TheAlchemist.unpack!(&lt;&lt;147,1,2,3&gt;&gt;) #=&gt; [1,2,3]

# unpack_once
TheAlchemist.unpack_once(&lt;&lt;147,1,2,3,4&gt;&gt;) #=&gt; {:ok, {[1, 2, 3], &lt;&lt;4&gt;&gt;}}
TheAlchemist.unpack_once!(&lt;&lt;147,1,2,3,4&gt;&gt;) #=&gt; {[1, 2, 3], &lt;&lt;4&gt;&gt;}
"><pre><span class="pl-c"># pack</span>
<span class="pl-v">TheAlchemist</span><span class="pl-c1">.</span><span class="pl-en">pack</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-c1">1</span><span class="pl-kos">,</span><span class="pl-c1">2</span><span class="pl-kos">,</span><span class="pl-c1">3</span><span class="pl-kos">]</span><span class="pl-kos">)</span> <span class="pl-c">#=&gt; { :ok, &lt;&lt;147,1,2,3&gt;&gt; }</span>
<span class="pl-v">TheAlchemist</span><span class="pl-c1">.</span><span class="pl-en">pack!</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-c1">1</span><span class="pl-kos">,</span><span class="pl-c1">2</span><span class="pl-kos">,</span><span class="pl-c1">3</span><span class="pl-kos">]</span><span class="pl-kos">)</span> <span class="pl-c">#=&gt; &lt;&lt;147,1,2,3&gt;&gt;</span>

<span class="pl-c"># unpack</span>
<span class="pl-v">TheAlchemist</span><span class="pl-c1">.</span><span class="pl-en">unpack</span><span class="pl-kos">(</span><span class="pl-kos">&lt;&lt;</span><span class="pl-c1">147</span><span class="pl-kos">,</span><span class="pl-c1">1</span><span class="pl-kos">,</span><span class="pl-c1">2</span><span class="pl-kos">,</span><span class="pl-c1">3</span><span class="pl-kos">&gt;&gt;</span><span class="pl-kos">)</span> <span class="pl-c">#=&gt; { :ok, [1,2,3] }</span>
<span class="pl-v">TheAlchemist</span><span class="pl-c1">.</span><span class="pl-en">unpack!</span><span class="pl-kos">(</span><span class="pl-kos">&lt;&lt;</span><span class="pl-c1">147</span><span class="pl-kos">,</span><span class="pl-c1">1</span><span class="pl-kos">,</span><span class="pl-c1">2</span><span class="pl-kos">,</span><span class="pl-c1">3</span><span class="pl-kos">&gt;&gt;</span><span class="pl-kos">)</span> <span class="pl-c">#=&gt; [1,2,3]</span>

<span class="pl-c"># unpack_once</span>
<span class="pl-v">TheAlchemist</span><span class="pl-c1">.</span><span class="pl-en">unpack_once</span><span class="pl-kos">(</span><span class="pl-kos">&lt;&lt;</span><span class="pl-c1">147</span><span class="pl-kos">,</span><span class="pl-c1">1</span><span class="pl-kos">,</span><span class="pl-c1">2</span><span class="pl-kos">,</span><span class="pl-c1">3</span><span class="pl-kos">,</span><span class="pl-c1">4</span><span class="pl-kos">&gt;&gt;</span><span class="pl-kos">)</span> <span class="pl-c">#=&gt; {:ok, {[1, 2, 3], &lt;&lt;4&gt;&gt;}}</span>
<span class="pl-v">TheAlchemist</span><span class="pl-c1">.</span><span class="pl-en">unpack_once!</span><span class="pl-kos">(</span><span class="pl-kos">&lt;&lt;</span><span class="pl-c1">147</span><span class="pl-kos">,</span><span class="pl-c1">1</span><span class="pl-kos">,</span><span class="pl-c1">2</span><span class="pl-kos">,</span><span class="pl-c1">3</span><span class="pl-kos">,</span><span class="pl-c1">4</span><span class="pl-kos">&gt;&gt;</span><span class="pl-kos">)</span> <span class="pl-c">#=&gt; {[1, 2, 3], &lt;&lt;4&gt;&gt;}</span></pre></div>
<p dir="auto">###With underlying erlang:</p>
<h8 dir="auto">
<a id="user-content-deserialization" class="anchor" aria-hidden="true" href="#deserialization"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Deserialization</h8>
<div class="highlight highlight-source-elixir notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="msgpacked = TheAlchemistErl.pack('{&quot;test&quot;:false}')
TheAlchemistErl.unpack(msgpacked)"><pre><span class="pl-s1">msgpacked</span> <span class="pl-c1">=</span> <span class="pl-v">TheAlchemistErl</span><span class="pl-c1">.</span><span class="pl-en">pack</span><span class="pl-kos">(</span><span class="pl-s">'{"test":false}'</span><span class="pl-kos">)</span>
<span class="pl-v">TheAlchemistErl</span><span class="pl-c1">.</span><span class="pl-en">unpack</span><span class="pl-kos">(</span><span class="pl-s1">msgpacked</span><span class="pl-kos">)</span></pre></div>
<h8 dir="auto">
<a id="user-content-stream-deserialization" class="anchor" aria-hidden="true" href="#stream-deserialization"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Stream deserialization</h8>
<div class="highlight highlight-source-elixir notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="mat = TheAlchemistErl.unpack_stream(data)
TheAlchemistErl.unpack_stream(elem(mat, 1)),"><pre><span class="pl-s1">mat</span> <span class="pl-c1">=</span> <span class="pl-v">TheAlchemistErl</span><span class="pl-c1">.</span><span class="pl-en">unpack_stream</span><span class="pl-kos">(</span><span class="pl-s1">data</span><span class="pl-kos">)</span>
<span class="pl-v">TheAlchemistErl</span><span class="pl-c1">.</span><span class="pl-en">unpack_stream</span><span class="pl-kos">(</span><span class="pl-en">elem</span><span class="pl-kos">(</span><span class="pl-s1">mat</span><span class="pl-kos">,</span> <span class="pl-c1">1</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">,</span></pre></div>
<h8 dir="auto">
<a id="user-content-string-type" class="anchor" aria-hidden="true" href="#string-type"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>String type</h8>
<p dir="auto">Now this supports string type!</p>
<div class="highlight highlight-source-elixir notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='opt = [{:enable_str, true}]
TheAlchemistErl.unpack(TheAlchemistErl.pack("kanji", opt), opt)
 =&gt; {:ok, "kanji"}'><pre><span class="pl-s1">opt</span> <span class="pl-c1">=</span> <span class="pl-kos">[</span><span class="pl-kos">{</span><span class="pl-pds">:enable_str</span><span class="pl-kos">,</span> <span class="pl-c1">true</span><span class="pl-kos">}</span><span class="pl-kos">]</span>
<span class="pl-v">TheAlchemistErl</span><span class="pl-c1">.</span><span class="pl-en">unpack</span><span class="pl-kos">(</span><span class="pl-v">TheAlchemistErl</span><span class="pl-c1">.</span><span class="pl-en">pack</span><span class="pl-kos">(</span><span class="pl-s">"kanji"</span><span class="pl-kos">,</span> <span class="pl-s1">opt</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-s1">opt</span><span class="pl-kos">)</span>
 <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span><span class="pl-pds">:ok</span><span class="pl-kos">,</span> <span class="pl-s">"kanji"</span><span class="pl-kos">}</span></pre></div>
<h8 dir="auto">
<a id="user-content-map-style" class="anchor" aria-hidden="true" href="#map-style"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Map Style</h8>
<p dir="auto">Since Erlang/OTP 17.0</p>
<div class="highlight highlight-source-erlang notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='msgpack:pack(#{ &lt;&lt;"key"&gt;&gt; =&gt; &lt;&lt;"value"&gt;&gt; }, [{format, map}]).'><pre><span class="pl-en">msgpack</span>:<span class="pl-en">pack</span>(#{ &lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>&gt;&gt; <span class="pl-k">=&gt;</span> &lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>&gt;&gt; }, [{<span class="pl-c1">format</span>, <span class="pl-c1">map</span>}]).</pre></div>
<p dir="auto">Or use old jiffy/jsx style</p>
<div class="highlight highlight-source-erlang notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='msgpack:pack({[{&lt;&lt;"key"&gt;&gt;, &lt;&lt;"value"&gt;&gt;}]}, [{format, jiffy}]),
msgpack:pack([{&lt;&lt;"key"&gt;&gt;, &lt;&lt;"value"&gt;&gt;}], [{format, jsx}]).'><pre><span class="pl-en">msgpack</span>:<span class="pl-en">pack</span>({[{&lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>&gt;&gt;, &lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>&gt;&gt;}]}, [{<span class="pl-c1">format</span>, <span class="pl-c1">jiffy</span>}]),
<span class="pl-en">msgpack</span>:<span class="pl-en">pack</span>([{&lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>&gt;&gt;, &lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>&gt;&gt;}], [{<span class="pl-c1">format</span>, <span class="pl-c1">jsx</span>}]).</pre></div>
<h6 dir="auto">
<a id="user-content-running-interactively" class="anchor" aria-hidden="true" href="#running-interactively"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Running interactively</h6>
<p dir="auto">Firstly <code>make all</code> to ensure all source files are compiled
after that you can bring the <code>ERL shell</code> with</p>
<p dir="auto"><code>make run</code></p>
<p dir="auto">If you want to bring the <code>IEX</code> you can type</p>
<p dir="auto"><code>make runex</code></p>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-erlang" class="qs"><h4><a href="https://github.com/msgpack/msgpack-erlang" target="_blank">msgpack/msgpack-erlang <span class="qs-url">https://github.com/msgpack/msgpack-erlang</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack-erlang" class="anchor" aria-hidden="true" href="#messagepack-erlang"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack Erlang</h5>
<p dir="auto"><a href="https://travis-ci.org/msgpack/msgpack-erlang" rel="nofollow"><img src="https://camo.githubusercontent.com/a3618d198118d6bd9aaab570cd93b334ea0063fba34fc5f279539c661a883ef4/68747470733a2f2f7365637572652e7472617669732d63692e6f72672f6d73677061636b2f6d73677061636b2d65726c616e672e706e67" alt="Travis" data-canonical-src="https://secure.travis-ci.org/msgpack/msgpack-erlang.png" style="max-width: 100%;"></a>
<a href="https://drone.io/github.com/msgpack/msgpack-erlang" rel="nofollow"><img src="https://camo.githubusercontent.com/f2bf9dd88647517fa712dc708995900c087a07a069569ab82a90bac0c6efe4ee/68747470733a2f2f64726f6e652e696f2f6769746875622e636f6d2f6d73677061636b2f6d73677061636b2d65726c616e672f7374617475732e706e67" alt="Drone.io" data-canonical-src="https://drone.io/github.com/msgpack/msgpack-erlang/status.png" style="max-width: 100%;"></a>
<a href="https://hex.pm/packages/msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/e17f916ae44ed230a8f4085a686a3ae3dc9f3b9c0dafda98740bfdb41c327497/68747470733a2f2f696d672e736869656c64732e696f2f686578706d2f762f6d73677061636b2e737667" alt="hex.pm version" data-canonical-src="https://img.shields.io/hexpm/v/msgpack.svg" style="max-width: 100%;"></a></p>
<h6 dir="auto">
<a id="user-content-prerequisites-for-runtime" class="anchor" aria-hidden="true" href="#prerequisites-for-runtime"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Prerequisites for runtime</h6>
<p dir="auto"><a href="http://erlang.org/" rel="nofollow">Erlang/OTP</a>, &gt;= 17.0 Also based on
<a href="https://github.com/msgpack/msgpack/blob/0b8f5ac67cdd130f4d4d4fe6afb839b989fdb86a/spec.md">the new msgpack spec 0b8f5a</a>.</p>
<h6 dir="auto">
<a id="user-content-edit-rebarconfig-to-use-in-your-application" class="anchor" aria-hidden="true" href="#edit-rebarconfig-to-use-in-your-application"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>edit rebar.config to use in your application</h6>
<div class="highlight highlight-source-erlang notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='{deps, [
  {msgpack, ".*",
    {git, "git://github.com/msgpack/msgpack-erlang.git", {branch, "master"}}}
]}.'><pre>{<span class="pl-c1">deps</span>, [
  {<span class="pl-c1">msgpack</span>, <span class="pl-s"><span class="pl-pds">"</span>.*<span class="pl-pds">"</span></span>,
    {<span class="pl-c1">git</span>, <span class="pl-s"><span class="pl-pds">"</span>git://github.com/msgpack/msgpack-erlang.git<span class="pl-pds">"</span></span>, {<span class="pl-c1">branch</span>, <span class="pl-s"><span class="pl-pds">"</span>master<span class="pl-pds">"</span></span>}}}
]}.</pre></div>
<p dir="auto">Or as it is <a href="https://hex.pm/packages/msgpack" rel="nofollow">now published at hex.pm</a>, just</p>
<div class="highlight highlight-source-erlang notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="{deps, [msgpack]}."><pre>{<span class="pl-c1">deps</span>, [<span class="pl-c1">msgpack</span>]}.</pre></div>
<p dir="auto">might work.</p>
<h6 dir="auto">
<a id="user-content-simple-deserialization" class="anchor" aria-hidden="true" href="#simple-deserialization"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Simple deserialization</h6>
<div class="highlight highlight-source-erlang notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Ham = msgpack:pack(Spam),
{ok, Spam} = msgpack:unpack(Ham)."><pre><span class="pl-smi">Ham</span> <span class="pl-k">=</span> <span class="pl-en">msgpack</span>:<span class="pl-en">pack</span>(<span class="pl-smi">Spam</span>),
{<span class="pl-c1">ok</span>, <span class="pl-smi">Spam</span>} <span class="pl-k">=</span> <span class="pl-en">msgpack</span>:<span class="pl-en">unpack</span>(<span class="pl-smi">Ham</span>).</pre></div>
<h6 dir="auto">
<a id="user-content-stream-deserialization" class="anchor" aria-hidden="true" href="#stream-deserialization"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Stream deserialization</h6>
<div class="highlight highlight-source-erlang notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="{Term0, Rest0} = msgpack:unpack_stream(Binary),
{Term1, Rest1} = msgpack:unpack_stream(Rest0),
..."><pre>{<span class="pl-smi">Term0</span>, <span class="pl-smi">Rest0</span>} <span class="pl-k">=</span> <span class="pl-en">msgpack</span>:<span class="pl-en">unpack_stream</span>(<span class="pl-smi">Binary</span>),
{<span class="pl-smi">Term1</span>, <span class="pl-smi">Rest1</span>} <span class="pl-k">=</span> <span class="pl-en">msgpack</span>:<span class="pl-en">unpack_stream</span>(<span class="pl-smi">Rest0</span>),
...</pre></div>
<h6 dir="auto">
<a id="user-content-options-for-packing-and-unpacking" class="anchor" aria-hidden="true" href="#options-for-packing-and-unpacking"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Options, for packing and unpacking</h6>
<h7 dir="auto">
<a id="user-content-spec-newold" class="anchor" aria-hidden="true" href="#spec-newold"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>{spec, new|old}</code>
</h7>
<p dir="auto">Both for packing and unpacking. Default is <code>new</code>. Major difference
between old and new spec is:</p>
<ul dir="auto">
<li>raw family (<code>0xa0~0xbf</code>, <code>0xda</code>, <code>0xdb</code>) becomes new str family</li>
<li>
<code>0xd9</code> is new as str8</li>
<li>new bin space (<code>0xc4, 0xc5, 0xc6</code> as bin8, bin16, bin32)</li>
<li>new ext space (<code>0xc7, 0xc8, 0xc9</code> as ext8, ext16, ext32)</li>
<li>new fixext space (<code>0xd4, 0xd5, 0xd6, 0xd7, 0xd8</code> as fixext1, fixext2, fixext4, fixext8, fixext16),</li>
</ul>
<p dir="auto">The default is new spec. Old spec mode does not handle these new types but
returns error. To use
<a href="https://github.com/msgpack/msgpack/blob/master/spec-old.md">old spec</a>
mode, this option is explicitly added.</p>
<div class="highlight highlight-source-erlang notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="OldHam = msgpack:pack(Spam, [{spec, old}]),
{ok, Spam} = msgpack:unpack(OldHam, [{spec, old}])."><pre><span class="pl-smi">OldHam</span> <span class="pl-k">=</span> <span class="pl-en">msgpack</span>:<span class="pl-en">pack</span>(<span class="pl-smi">Spam</span>, [{<span class="pl-c1">spec</span>, <span class="pl-c1">old</span>}]),
{<span class="pl-c1">ok</span>, <span class="pl-smi">Spam</span>} <span class="pl-k">=</span> <span class="pl-en">msgpack</span>:<span class="pl-en">unpack</span>(<span class="pl-smi">OldHam</span>, [{<span class="pl-c1">spec</span>, <span class="pl-c1">old</span>}]).</pre></div>
<h7 dir="auto">
<a id="user-content-allow_atom-nonepack" class="anchor" aria-hidden="true" href="#allow_atom-nonepack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>{allow_atom, none|pack}</code>
</h7>
<p dir="auto">Only in packing. Atoms are packed as binaries. Default value is <code>pack</code>.
Otherwise, any term including atoms throws badarg.</p>
<h7 dir="auto">
<a id="user-content-known_atoms-atom" class="anchor" aria-hidden="true" href="#known_atoms-atom"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>{known_atoms, [atom()]}</code>
</h7>
<p dir="auto">Both in packing and unpacking. In packing, if an atom is in this list
a binary is encoded as a binary. In unpacking, msgpacked binaries are
decoded as atoms with <code>erlang:binary_to_existing_atom/2</code> with encoding
<code>utf8</code>. Default value is an empty list.</p>
<p dir="auto">Even if <code>allow_atom</code> is <code>none</code>, known atoms are packed.</p>
<h7 dir="auto">
<a id="user-content-unpack_str-as_binaryas_list" class="anchor" aria-hidden="true" href="#unpack_str-as_binaryas_list"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>{unpack_str, as_binary|as_list}</code>
</h7>
<p dir="auto">A switch to choose decoded term style of <code>str</code> type when <em>unpacking</em>.
Only available at new spec. Default is <code>as_list</code>.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="mode        as_binary    as_list
-----------+------------+-------
bin         binary()     binary()
str         binary()     string()"><pre class="notranslate"><code>mode        as_binary    as_list
-----------+------------+-------
bin         binary()     binary()
str         binary()     string()
</code></pre></div>
<h7 dir="auto">
<a id="user-content-validate_string-boolean" class="anchor" aria-hidden="true" href="#validate_string-boolean"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>{validate_string, boolean()}</code>
</h7>
<p dir="auto">Only in unpacking, UTF-8 validation at unpacking from <code>str</code> type will
be enabled. Default value is <code>false</code>.</p>
<h7 dir="auto">
<a id="user-content-pack_str-from_binaryfrom_listnone" class="anchor" aria-hidden="true" href="#pack_str-from_binaryfrom_listnone"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>{pack_str, from_binary|from_list|none}</code>
</h7>
<p dir="auto">A switch to choose packing of <code>string()</code> when packing. Only available
at new spec. Default is <code>from_list</code> for symmetry with <code>unpack_str</code>
option.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="mode        from_list    from_binary    none
-----------+------------+--------------+-----------------
binary()    bin          str*/bin       bin
string()    str*/array   array of int   array of int
list()      array        array          array"><pre class="notranslate"><code>mode        from_list    from_binary    none
-----------+------------+--------------+-----------------
binary()    bin          str*/bin       bin
string()    str*/array   array of int   array of int
list()      array        array          array
</code></pre></div>
<p dir="auto">But the default option pays the cost of performance for symmetry. If
the overhead of UTF-8 validation is unacceptable, choosing <code>none</code> as
the option would be the best.</p>
<ul dir="auto">
<li>* Tries to pack as <code>str</code> if it is a valid <code>string()</code>.</li>
</ul>
<h7 dir="auto">
<a id="user-content-map_format-mapjiffyjsx" class="anchor" aria-hidden="true" href="#map_format-mapjiffyjsx"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>{map_format, map|jiffy|jsx}</code>
</h7>
<p dir="auto">Both at packing and unpacking. Default value is <code>map</code>.</p>
<div class="highlight highlight-source-erlang notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='msgpack:pack(#{ &lt;&lt;"key"&gt;&gt; =&gt; &lt;&lt;"value"&gt;&gt; }, []).
msgpack:pack(#{ &lt;&lt;"key"&gt;&gt; =&gt; &lt;&lt;"value"&gt;&gt; }, [{map_format, map}]).
msgpack:pack({[{&lt;&lt;"key"&gt;&gt;, &lt;&lt;"value"&gt;&gt;}]}, [{map_format, jiffy}]),
msgpack:pack([{&lt;&lt;"key"&gt;&gt;, &lt;&lt;"value"&gt;&gt;}], [{map_format, jsx}]).'><pre><span class="pl-en">msgpack</span>:<span class="pl-en">pack</span>(#{ &lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>&gt;&gt; <span class="pl-k">=&gt;</span> &lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>&gt;&gt; }, []).
<span class="pl-en">msgpack</span>:<span class="pl-en">pack</span>(#{ &lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>&gt;&gt; <span class="pl-k">=&gt;</span> &lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>&gt;&gt; }, [{<span class="pl-c1">map_format</span>, <span class="pl-c1">map</span>}]).
<span class="pl-en">msgpack</span>:<span class="pl-en">pack</span>({[{&lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>&gt;&gt;, &lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>&gt;&gt;}]}, [{<span class="pl-c1">map_format</span>, <span class="pl-c1">jiffy</span>}]),
<span class="pl-en">msgpack</span>:<span class="pl-en">pack</span>([{&lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>&gt;&gt;, &lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>&gt;&gt;}], [{<span class="pl-c1">map_format</span>, <span class="pl-c1">jsx</span>}]).</pre></div>
<h7 dir="auto">
<a id="user-content-ext-msgpack_ext_packer-msgpack_ext_unpackermodule" class="anchor" aria-hidden="true" href="#ext-msgpack_ext_packer-msgpack_ext_unpackermodule"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>{ext, {msgpack_ext_packer(), msgpack_ext_unpacker()}|module()}</code>
</h7>
<p dir="auto">At both. The default behaviour in case of facing ext data at decoding
is to ignore them as its length is known.</p>
<p dir="auto">Now msgpack-erlang supports ext type. Now you can serialize everything
with your original (de)serializer. That will enable us to handle
erlang- native types like <code>pid()</code>, <code>ref()</code> contained in <code>tuple()</code>. See
<code>test/msgpack_ext_example_tests.erl</code> for example code.</p>
<div class="highlight highlight-source-erlang notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Packer = fun({ref, Ref}, Opt) when is_reference(Ref) -&gt; {ok, {12, term_to_binary(Ref)}} end,
Unpacker = fun(12, Bin) -&gt; {ok, {ref, binary_to_term(Bin)}} end,
Ref = make_ref(),
Opt = [{ext,{Packer,Unpacker}}],
{ok, {ref, Ref}} = msgpack:unpack(msgpack:pack({ref, Ref}, Opt), Opt)."><pre><span class="pl-smi">Packer</span> <span class="pl-k">=</span> <span class="pl-k">fun</span>({<span class="pl-c1">ref</span>, <span class="pl-smi">Ref</span>}, <span class="pl-smi">Opt</span>) <span class="pl-k">when</span> <span class="pl-en">is_reference</span>(<span class="pl-smi">Ref</span>) -&gt; {<span class="pl-c1">ok</span>, {<span class="pl-c1">12</span>, <span class="pl-en">term_to_binary</span>(<span class="pl-smi">Ref</span>)}} <span class="pl-k">end</span>,
<span class="pl-smi">Unpacker</span> <span class="pl-k">=</span> <span class="pl-k">fun</span>(<span class="pl-c1">12</span>, <span class="pl-smi">Bin</span>) -&gt; {<span class="pl-c1">ok</span>, {<span class="pl-c1">ref</span>, <span class="pl-en">binary_to_term</span>(<span class="pl-smi">Bin</span>)}} <span class="pl-k">end</span>,
<span class="pl-smi">Ref</span> <span class="pl-k">=</span> <span class="pl-en">make_ref</span>(),
<span class="pl-smi">Opt</span> <span class="pl-k">=</span> [{<span class="pl-c1">ext</span>,{<span class="pl-smi">Packer</span>,<span class="pl-smi">Unpacker</span>}}],
{<span class="pl-c1">ok</span>, {<span class="pl-c1">ref</span>, <span class="pl-smi">Ref</span>}} <span class="pl-k">=</span> <span class="pl-en">msgpack</span>:<span class="pl-en">unpack</span>(<span class="pl-en">msgpack</span>:<span class="pl-en">pack</span>({<span class="pl-c1">ref</span>, <span class="pl-smi">Ref</span>}, <span class="pl-smi">Opt</span>), <span class="pl-smi">Opt</span>).</pre></div>
<h6 dir="auto">
<a id="user-content-misc" class="anchor" aria-hidden="true" href="#misc"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Misc</h6>
<h7 dir="auto">
<a id="user-content-float-type" class="anchor" aria-hidden="true" href="#float-type"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Float type</h7>
<p dir="auto">The Float type of Message Pack represents IEEE 754 floating point number, so it includes Nan and Infinity.
In unpacking, msgpack-erlang returns <code>nan</code>, <code>positive_infinity</code> and <code>negative_infinity</code>.</p>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<p dir="auto">Apache License 2.0</p>
<h5 dir="auto">
<a id="user-content-release-notes" class="anchor" aria-hidden="true" href="#release-notes"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Release Notes</h5>
<h6 dir="auto">
<a id="user-content-070" class="anchor" aria-hidden="true" href="#070"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>0.7.0</h6>
<ul dir="auto">
<li>Support <code>nan</code>, <code>positive_infinity</code> and <code>negative_infinity</code>
</li>
</ul>
<h6 dir="auto">
<a id="user-content-060" class="anchor" aria-hidden="true" href="#060"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>0.6.0</h6>
<ul dir="auto">
<li>Support OTP 19.0</li>
</ul>
<h6 dir="auto">
<a id="user-content-050" class="anchor" aria-hidden="true" href="#050"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>0.5.0</h6>
<ul dir="auto">
<li>Renewed optional arguments to pack/unpack interface. This is
incompatible change from 0.4 series.</li>
</ul>
<h6 dir="auto">
<a id="user-content-040" class="anchor" aria-hidden="true" href="#040"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>0.4.0</h6>
<ul dir="auto">
<li>Deprecate <code>nil</code>
</li>
<li>Moved to rebar3</li>
<li>Promote default map unpacker as default format when OTP is &gt;= 17</li>
<li>Added QuickCheck tests</li>
<li>Since this version OTP older than R16B03-1 are no more supported</li>
</ul>
<h6 dir="auto">
<a id="user-content-035--034" class="anchor" aria-hidden="true" href="#035--034"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>0.3.5 / 0.3.4</h6>
<ul dir="auto">
<li>0.3 series will be the last versions that supports R16B or older
versions of OTP.</li>
<li>OTP 18.0 support</li>
<li>Promote default map unpacker as default format when OTP is &gt;= 18</li>
</ul>
<h6 dir="auto">
<a id="user-content-033" class="anchor" aria-hidden="true" href="#033"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>0.3.3</h6>
<ul dir="auto">
<li>Add OTP 17 series to Travis-CI tests</li>
<li>Fix wrong numbering for ext types</li>
<li>Allow packing maps even when {format,map} is not set</li>
<li>Fix Dialyzer invalid contract warning</li>
<li>Proper use of null for jiffy-style encoding/decoding</li>
</ul>
<h6 dir="auto">
<a id="user-content-032" class="anchor" aria-hidden="true" href="#032"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>0.3.2</h6>
<ul dir="auto">
<li>set back default style as jiffy</li>
<li>fix bugs around nil/null handling</li>
</ul>
<h6 dir="auto">
<a id="user-content-030" class="anchor" aria-hidden="true" href="#030"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>0.3.0</h6>
<ul dir="auto">
<li>supports map new in 17.0</li>
<li>jiffy-style maps will be deprecated in near future</li>
<li>set default style as map</li>
</ul>
<h6 dir="auto">
<a id="user-content-028" class="anchor" aria-hidden="true" href="#028"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>0.2.8</h6>
<p dir="auto">0.2 series works with OTP 17.0, R16, R15, and with MessagePack's new
and old format. But does not support <code>map</code> type introduced in
OTP 17.0.</p>
<p dir="auto">It also supports JSX-compatible mode.</p>
</article>
  </div>
        </div>
        
        <div id="qs-Gab-km-msgpack-fsharp" class="qs"><h4><a href="https://github.com/Gab-km/msgpack-fsharp" target="_blank">Gab-km/msgpack-fsharp <span class="qs-url">https://github.com/Gab-km/msgpack-fsharp</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack-for-f" class="anchor" aria-hidden="true" href="#messagepack-for-f"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack for F#</h5>
<a href="https://ci.appveyor.com/project/Gabkm/msgpack-fsharp" rel="nofollow"><img alt="Build status" src="https://camo.githubusercontent.com/1f7cffc51ca63b15172beee90f4313cd0f9302210bf8ee32896e06f8bb039396/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f71676871726c376e777139366176616c" data-canonical-src="https://ci.appveyor.com/api/projects/status/qghqrl7nwq96aval" style="max-width: 100%;"></a>
<a name="user-content-what-is-this"></a>
<h6 dir="auto">
<a id="user-content-what-is-this" class="anchor" aria-hidden="true" href="#what-is-this"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>What is this?</h6>
<p dir="auto">MessagePack is a fast and compact binary serialization library.</p>
<p dir="auto">MessagePack for F# is a MessagePack implementation of F#, by F#, for F#.</p>
<a name="user-content-usage"></a>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<div class="highlight highlight-source-fsharp notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="open MsgPack

[| 1uy; 2uy; 3uy |]
|&gt; Array.map (Value.UInt8)
|&gt; Value.Array
|&gt; Packer.packOne
//=&gt; val it : byte [] = [|147uy; 1uy; 2uy; 3uy|]

Unpacker.unpack [|147uy; 1uy; 2uy; 3uy|]
//=&gt; [|Value.Array [|Value.UInt8 1uy; Value.UInt8 2uy; Value.UInt8 3uy|]|]"><pre><span class="pl-k">open</span> <span class="pl-en">MsgPack</span>

<span class="pl-k">[|</span> <span class="pl-c1">1</span>uy<span class="pl-k">;</span> <span class="pl-c1">2</span>uy<span class="pl-k">;</span> <span class="pl-c1">3</span>uy <span class="pl-k">|]</span>
<span class="pl-k">|&gt;</span> Array.map <span class="pl-k">(</span>Value.UInt8<span class="pl-k">)</span>
<span class="pl-k">|&gt;</span> Value.Array
<span class="pl-k">|&gt;</span> Packer.packOne
<span class="pl-c">//=&gt; val it : byte [] = [|147uy; 1uy; 2uy; 3uy|]</span>

Unpacker.unpack <span class="pl-k">[|</span><span class="pl-c1">147</span>uy<span class="pl-k">;</span> <span class="pl-c1">1</span>uy<span class="pl-k">;</span> <span class="pl-c1">2</span>uy<span class="pl-k">;</span> <span class="pl-c1">3</span>uy<span class="pl-k">|]</span>
<span class="pl-c">//=&gt; [|Value.Array [|Value.UInt8 1uy; Value.UInt8 2uy; Value.UInt8 3uy|]|]</span></pre></div>
<a name="user-content-copyright"></a>
<h6 dir="auto">
<a id="user-content-copyright" class="anchor" aria-hidden="true" href="#copyright"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Copyright</h6>
<p dir="auto"><code>Copyright (c) 2014- Kazuhiro Matsushima</code></p>
<a name="user-content-license"></a>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<p dir="auto">Distributed under the <a href="http://www.apache.org/licenses/LICENSE-2.0" rel="nofollow">Apache License, Version 2.0</a> .</p>

</article>
  </div>
        </div>
        
        <div id="qs-pocketberserker-MessagePack-FSharpExtensions" class="qs"><h4><a href="https://github.com/pocketberserker/MessagePack.FSharpExtensions" target="_blank">pocketberserker/MessagePack.FSharpExtensions <span class="qs-url">https://github.com/pocketberserker/MessagePack.FSharpExtensions</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepackfsharpextensions" class="anchor" aria-hidden="true" href="#messagepackfsharpextensions"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack.FSharpExtensions</h5>
<p dir="auto"><a href="https://www.nuget.org/packages/MessagePack.FSharpExtensions/" rel="nofollow"><img src="https://camo.githubusercontent.com/8e84b23da659a0016db6fa2d8929c187b951d5c7b7506eba6fd473641a5bbce4/687474703a2f2f696d672e736869656c64732e696f2f6e756765742f762f4d6573736167655061636b2e465368617270457874656e73696f6e732e7376673f7374796c653d666c6174" alt="NuGet Status" data-canonical-src="http://img.shields.io/nuget/v/MessagePack.FSharpExtensions.svg?style=flat" style="max-width: 100%;"></a></p>
<p dir="auto">MessagePack.FSharpExtensions is a <a href="https://github.com/neuecc/MessagePack-CSharp">MessagePack-CSharp</a> extension library for F#.</p>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<div class="highlight highlight-source-fsharp notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="open System
open System.Buffers
open MessagePack
open MessagePack.Resolvers
open MessagePack.FSharp

[&lt;MessagePackObject&gt;]
type UnionSample =
  | Foo of XYZ : int
  | Bar of OPQ : string list

let convertAsMemory&lt;'T&gt; options (value: 'T) =
  let memory = ReadOnlyMemory(MessagePackSerializer.Serialize(value, options))
  MessagePackSerializer.Deserialize&lt;'T&gt;(memory, options)

let convertAsSequence&lt;'T&gt; options (value: 'T) =
  let sequence = ReadOnlySequence(MessagePackSerializer.Serialize(value, options))
  MessagePackSerializer.Deserialize&lt;'T&gt;(&amp; sequence, options)

let dump = function
| Foo x -&gt;
  printfn &quot;%d&quot; x
| Bar xs -&gt;
  printfn &quot;%A&quot; xs

let resolver =
  Resolvers.CompositeResolver.Create(
    FSharpResolver.Instance,
    StandardResolver.Instance
)

let options = MessagePackSerializerOptions.Standard.WithResolver(resolver)

Foo 999
|&gt; convertAsMemory options
|&gt; dump

Bar [&quot;example&quot;]
|&gt; convertAsSequence options
|&gt; dump"><pre><span class="pl-k">open</span> <span class="pl-en">System</span>
<span class="pl-k">open</span> <span class="pl-en">System.<span class="pl-en">Buffers</span></span>
<span class="pl-k">open</span> <span class="pl-en">MessagePack</span>
<span class="pl-k">open</span> <span class="pl-en">MessagePack.<span class="pl-en">Resolvers</span></span>
<span class="pl-k">open</span> <span class="pl-en">MessagePack.<span class="pl-en">FSharp</span></span>

<span class="pl-c1">[&lt;MessagePackObject&gt;]</span>
<span class="pl-k">type</span> <span class="pl-en">UnionSample</span> <span class="pl-k">=</span>
  <span class="pl-k">|</span> Foo <span class="pl-k">of</span> <span class="pl-v">XYZ</span> <span class="pl-k">:</span> <span class="pl-en">int</span>
  <span class="pl-k">|</span> Bar <span class="pl-k">of</span> <span class="pl-v">OPQ</span> <span class="pl-k">:</span> <span class="pl-en">string</span> <span class="pl-en">list</span>

<span class="pl-k">let</span> <span class="pl-v">convertAsMemory</span><span class="pl-k">&lt;</span><span class="pl-en">'T</span><span class="pl-k">&gt;</span> <span class="pl-v">options </span><span class="pl-k">(</span><span class="pl-v">value</span><span class="pl-k">:</span> <span class="pl-en">'T</span><span class="pl-k">)</span> <span class="pl-k">=</span>
  <span class="pl-k">let</span> <span class="pl-v">memory</span> <span class="pl-k">=</span> ReadOnlyMemory<span class="pl-k">(</span>MessagePackSerializer.Serialize<span class="pl-k">(</span>value<span class="pl-k">,</span> options<span class="pl-k">))</span>
  MessagePackSerializer.Deserialize<span class="pl-k">&lt;</span>'T<span class="pl-k">&gt;(</span>memory<span class="pl-k">,</span> options<span class="pl-k">)</span>

<span class="pl-k">let</span> <span class="pl-v">convertAsSequence</span><span class="pl-k">&lt;</span><span class="pl-en">'T</span><span class="pl-k">&gt;</span> <span class="pl-v">options </span><span class="pl-k">(</span><span class="pl-v">value</span><span class="pl-k">:</span> <span class="pl-en">'T</span><span class="pl-k">)</span> <span class="pl-k">=</span>
  <span class="pl-k">let</span> <span class="pl-v">sequence</span> <span class="pl-k">=</span> ReadOnlySequence<span class="pl-k">(</span>MessagePackSerializer.Serialize<span class="pl-k">(</span>value<span class="pl-k">,</span> options<span class="pl-k">))</span>
  MessagePackSerializer.Deserialize<span class="pl-k">&lt;</span>'T<span class="pl-k">&gt;(</span>&amp; sequence<span class="pl-k">,</span> options<span class="pl-k">)</span>

<span class="pl-k">let</span> <span class="pl-v">dump</span> <span class="pl-k">=</span> <span class="pl-k">function</span>
<span class="pl-k">|</span> Foo x <span class="pl-k">-&gt;</span>
  printfn <span class="pl-s"><span class="pl-pds">"</span><span class="pl-en"><span class="pl-k">%d</span></span><span class="pl-pds">"</span></span> x
<span class="pl-k">|</span> Bar xs <span class="pl-k">-&gt;</span>
  printfn <span class="pl-s"><span class="pl-pds">"</span><span class="pl-en"><span class="pl-k">%A</span></span><span class="pl-pds">"</span></span> xs

<span class="pl-k">let</span> <span class="pl-v">resolver</span> <span class="pl-k">=</span>
  Resolvers.CompositeResolver.Create<span class="pl-k">(</span>
    FSharpResolver.Instance<span class="pl-k">,</span>
    StandardResolver.Instance
<span class="pl-k">)</span>

<span class="pl-k">let</span> <span class="pl-v">options</span> <span class="pl-k">=</span> MessagePackSerializerOptions.Standard.WithResolver<span class="pl-k">(</span>resolver<span class="pl-k">)</span>

Foo <span class="pl-c1">999</span>
<span class="pl-k">|&gt;</span> convertAsMemory options
<span class="pl-k">|&gt;</span> dump

Bar <span class="pl-k">[</span><span class="pl-s"><span class="pl-pds">"</span>example<span class="pl-pds">"</span></span><span class="pl-k">]</span>
<span class="pl-k">|&gt;</span> convertAsSequence options
<span class="pl-k">|&gt;</span> dump</pre></div>
<h6 dir="auto">
<a id="user-content-supported-types" class="anchor" aria-hidden="true" href="#supported-types"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Supported types</h6>
<ul dir="auto">
<li>option</li>
<li>voption</li>
<li>list</li>
<li>map</li>
<li>set</li>
<li>Discriminated Union</li>
<li>Struct Discriminated Union</li>
</ul>
<p dir="auto">Records, Struct Records and Anonymous Records are serialized and deserialized using <code>DynamicObjectResolver</code> in <code>MessagePack-CSharp</code>.</p>
</article>
  </div>
        </div>
        
        <div id="qs-xtpor-godot-msgpack" class="qs"><h4><a href="https://github.com/xtpor/godot-msgpack" target="_blank">xtpor/godot-msgpack <span class="qs-url">https://github.com/xtpor/godot-msgpack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-godot-msgpack" class="anchor" aria-hidden="true" href="#godot-msgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>godot-msgpack</h5>
<p dir="auto">A MessagePack serializer implemented in pure GDScript</p>
<ul dir="auto">
<li>No dependency</li>
<li>No native binding required</li>
</ul>
<h5 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h5>
<p dir="auto">Copy the <code>msgpack.gd</code> at the root of the repository into your godot project</p>
<h5 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h5>
<div class="highlight highlight-source-gdscript notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='var Msgpack = preload("res://msgpack.gd")

func _myfunc():
    var data = {"type": "wizard", "attack": 10, "weapon": ["dagger", "staff"]}

    var res = Msgpack.encode(data)
    print(res.result) # A PoolByteArray of the data encoded MessagePack

    var res2 = Msgpack.decode(res.result)
    print(res2.result) # Get back the original data'><pre><span class="pl-k">var</span> <span class="pl-en">Msgpack</span> <span class="pl-k">=</span> <span class="pl-k">preload</span>(<span class="pl-s">"res://msgpack.gd"</span>)

<span class="pl-k">func</span> <span class="pl-c1">_myfunc</span>():
    <span class="pl-k">var</span> data <span class="pl-k">=</span> {<span class="pl-s">"type"</span>: <span class="pl-s">"wizard"</span>, <span class="pl-s">"attack"</span>: <span class="pl-c1">10</span>, <span class="pl-s">"weapon"</span>: [<span class="pl-s">"dagger"</span>, <span class="pl-s">"staff"</span>]}

    <span class="pl-k">var</span> res <span class="pl-k">=</span> <span class="pl-en">Msgpack</span>.<span class="pl-c1">encode</span>(data)
    <span class="pl-c1">print</span>(res.<span class="pl-smi">result</span>) <span class="pl-c"><span class="pl-c">#</span> A PoolByteArray of the data encoded MessagePack</span>

    <span class="pl-k">var</span> res2 <span class="pl-k">=</span> <span class="pl-en">Msgpack</span>.<span class="pl-c1">decode</span>(res.<span class="pl-smi">result</span>)
    <span class="pl-c1">print</span>(res2.<span class="pl-smi">result</span>) <span class="pl-c"><span class="pl-c">#</span> Get back the original data</span></pre></div>
<h6 dir="auto">
<a id="user-content-class-msgpack" class="anchor" aria-hidden="true" href="#class-msgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>class <code>Msgpack</code>
</h6>
<h7 dir="auto">
<a id="user-content-static-dictionary-encodevariant-value" class="anchor" aria-hidden="true" href="#static-dictionary-encodevariant-value"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>static Dictionary encode(Variant value)</code>
</h7>
<p dir="auto">Convert a value (number, string, array and dictionary) into their
counterparts in messagepack. Returns dictionary with three fields:
<code>result</code> which is the packed data (a PoolByteArray); <code>error</code> which is the
error code; and <code>error_string</code> which is a human readable error message</p>
<h7 dir="auto">
<a id="user-content-static-dictionary-decodepoolbytearray-bytes" class="anchor" aria-hidden="true" href="#static-dictionary-decodepoolbytearray-bytes"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>static Dictionary decode(PoolByteArray bytes)</code>
</h7>
<p dir="auto">Convert a packed data (a PoolByteArray) back into a value, the reverse of the
encode function. The return value is similar to the one in the encode
method</p>
<h5 dir="auto">
<a id="user-content-limitation" class="anchor" aria-hidden="true" href="#limitation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Limitation</h5>
<ul dir="auto">
<li>Only support null, boolean, integer, float, PoolByteArray, string, array and
dictionary. No support for other data type like Vector2 and Vector3</li>
<li>No support for the ext datatype in MessagePack</li>
<li>Slow compare to the built-in binary serialization in godot</li>
</ul>
<h5 dir="auto">
<a id="user-content-testcases" class="anchor" aria-hidden="true" href="#testcases"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Testcases</h5>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="godot -s run_test.gd"><pre class="notranslate"><code>godot -s run_test.gd
</code></pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-vmihailenco-msgpack" class="qs"><h4><a href="https://msgpack.uptrace.dev/" target="_blank">vmihailenco/msgpack <span class="qs-url">https://msgpack.uptrace.dev/</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack-encoding-for-golang" class="anchor" aria-hidden="true" href="#messagepack-encoding-for-golang"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack encoding for Golang</h5>
<p dir="auto"><a href="https://travis-ci.org/vmihailenco/msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/61bdb4c546130de8b74eddff7de0d6cf11a309c5c022937fd7735c36ac6547e1/68747470733a2f2f7472617669732d63692e6f72672f766d696861696c656e636f2f6d73677061636b2e737667" alt="Build Status" data-canonical-src="https://travis-ci.org/vmihailenco/msgpack.svg" style="max-width: 100%;"></a>
<a href="https://pkg.go.dev/github.com/vmihailenco/msgpack/v5" rel="nofollow"><img src="https://camo.githubusercontent.com/cffc384b58a566df38d9a72cd4c2bcf31a0f7f6c25e8b8b69ebfc5064314bebe/68747470733a2f2f706b672e676f2e6465762f62616467652f6769746875622e636f6d2f766d696861696c656e636f2f6d73677061636b2f7635" alt="PkgGoDev" data-canonical-src="https://pkg.go.dev/badge/github.com/vmihailenco/msgpack/v5" style="max-width: 100%;"></a>
<a href="https://msgpack.uptrace.dev/" rel="nofollow"><img src="https://camo.githubusercontent.com/69e8fd1ebf3fdaf0158bdb0d1b6cb30212c1e950e117a0b9d19684ead491d421/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6d73677061636b2d646f63756d656e746174696f6e2d696e666f726d6174696f6e616c" alt="Documentation" data-canonical-src="https://img.shields.io/badge/msgpack-documentation-informational" style="max-width: 100%;"></a>
<a href="https://discord.gg/rWtp5Aj" rel="nofollow"><img src="https://camo.githubusercontent.com/a19403897efd43047f062aba945f6fde175ed63a420b0a94e8d12809ba56f74f/68747470733a2f2f646973636f72646170702e636f6d2f6170692f6775696c64732f3735323037303130353834373935353531382f7769646765742e706e67" alt="Chat" data-canonical-src="https://discordapp.com/api/guilds/752070105847955518/widget.png" style="max-width: 100%;"></a></p>
<blockquote>
<p dir="auto">msgpack is brought to you by <g-emoji class="g-emoji" alias="star" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2b50.png"></g-emoji> <a href="https://github.com/uptrace/uptrace"><strong>uptrace/uptrace</strong></a>.
Uptrace is an open source and blazingly fast
<a href="https://get.uptrace.dev/compare/distributed-tracing-tools.html" rel="nofollow">distributed tracing tool</a> powered
by OpenTelemetry and ClickHouse. Give it a star as well!</p>
</blockquote>
<h6 dir="auto">
<a id="user-content-resources" class="anchor" aria-hidden="true" href="#resources"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Resources</h6>
<ul dir="auto">
<li><a href="https://msgpack.uptrace.dev" rel="nofollow">Documentation</a></li>
<li><a href="https://discord.gg/rWtp5Aj" rel="nofollow">Chat</a></li>
<li><a href="https://pkg.go.dev/github.com/vmihailenco/msgpack/v5" rel="nofollow">Reference</a></li>
<li><a href="https://pkg.go.dev/github.com/vmihailenco/msgpack/v5#pkg-examples" rel="nofollow">Examples</a></li>
</ul>
<h6 dir="auto">
<a id="user-content-features" class="anchor" aria-hidden="true" href="#features"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Features</h6>
<ul dir="auto">
<li>Primitives, arrays, maps, structs, time.Time and interface{}.</li>
<li>Appengine *datastore.Key and datastore.Cursor.</li>
<li>
<a href="https://pkg.go.dev/github.com/vmihailenco/msgpack/v5#CustomEncoder" rel="nofollow">CustomEncoder</a>/<a href="https://pkg.go.dev/github.com/vmihailenco/msgpack/v5#CustomDecoder" rel="nofollow">CustomDecoder</a> interfaces for custom encoding.</li>
<li>
<a href="https://pkg.go.dev/github.com/vmihailenco/msgpack/v5#example-RegisterExt" rel="nofollow">Extensions</a> to encode
type information.</li>
<li>Renaming fields via <code>msgpack:"my_field_name"</code> and alias via <code>msgpack:"alias:another_name"</code>.</li>
<li>Omitting individual empty fields via <code>msgpack:",omitempty"</code> tag or all
<a href="https://pkg.go.dev/github.com/vmihailenco/msgpack/v5#example-Marshal-OmitEmpty" rel="nofollow">empty fields in a struct</a>.</li>
<li>
<a href="https://pkg.go.dev/github.com/vmihailenco/msgpack/v5#Encoder.SetSortMapKeys" rel="nofollow">Map keys sorting</a>.</li>
<li>Encoding/decoding all
<a href="https://pkg.go.dev/github.com/vmihailenco/msgpack/v5#Encoder.UseArrayEncodedStructs" rel="nofollow">structs as arrays</a>
or
<a href="https://pkg.go.dev/github.com/vmihailenco/msgpack/v5#example-Marshal-AsArray" rel="nofollow">individual structs</a>.</li>
<li>
<a href="https://pkg.go.dev/github.com/vmihailenco/msgpack/v5#Encoder.SetCustomStructTag" rel="nofollow">Encoder.SetCustomStructTag</a> with <a href="https://pkg.go.dev/github.com/vmihailenco/msgpack/v5#Decoder.SetCustomStructTag" rel="nofollow">Decoder.SetCustomStructTag</a> can turn msgpack into drop-in
replacement for any tag.</li>
<li>Simple but very fast and efficient
<a href="https://pkg.go.dev/github.com/vmihailenco/msgpack/v5#example-Decoder.Query" rel="nofollow">queries</a>.</li>
</ul>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<p dir="auto">msgpack supports 2 last Go versions and requires support for
<a href="https://github.com/golang/go/wiki/Modules">Go modules</a>. So make sure to initialize a Go module:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="go mod init github.com/my/repo"><pre>go mod init github.com/my/repo</pre></div>
<p dir="auto">And then install msgpack/v5 (note <em>v5</em> in the import; omitting it is a popular mistake):</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="go get github.com/vmihailenco/msgpack/v5"><pre>go get github.com/vmihailenco/msgpack/v5</pre></div>
<h6 dir="auto">
<a id="user-content-quickstart" class="anchor" aria-hidden="true" href="#quickstart"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Quickstart</h6>
<div class="highlight highlight-source-go notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import "github.com/vmihailenco/msgpack/v5"

func ExampleMarshal() {
    type Item struct {
        Foo string
    }

    b, err := msgpack.Marshal(&amp;Item{Foo: "bar"})
    if err != nil {
        panic(err)
    }

    var item Item
    err = msgpack.Unmarshal(b, &amp;item)
    if err != nil {
        panic(err)
    }
    fmt.Println(item.Foo)
    // Output: bar
}'><pre><span class="pl-k">import</span> <span class="pl-s">"github.com/vmihailenco/msgpack/v5"</span>

<span class="pl-k">func</span> <span class="pl-en">ExampleMarshal</span>() {
    <span class="pl-k">type</span> <span class="pl-smi">Item</span> <span class="pl-k">struct</span> {
        <span class="pl-c1">Foo</span> <span class="pl-smi">string</span>
    }

    <span class="pl-s1">b</span>, <span class="pl-s1">err</span> <span class="pl-c1">:=</span> <span class="pl-s1">msgpack</span>.<span class="pl-en">Marshal</span>(<span class="pl-c1">&amp;</span><span class="pl-smi">Item</span>{<span class="pl-c1">Foo</span>: <span class="pl-s">"bar"</span>})
    <span class="pl-k">if</span> <span class="pl-s1">err</span> <span class="pl-c1">!=</span> <span class="pl-c1">nil</span> {
        <span class="pl-en">panic</span>(<span class="pl-s1">err</span>)
    }

    <span class="pl-k">var</span> <span class="pl-s1">item</span> <span class="pl-smi">Item</span>
    <span class="pl-s1">err</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span>.<span class="pl-en">Unmarshal</span>(<span class="pl-s1">b</span>, <span class="pl-c1">&amp;</span><span class="pl-s1">item</span>)
    <span class="pl-k">if</span> <span class="pl-s1">err</span> <span class="pl-c1">!=</span> <span class="pl-c1">nil</span> {
        <span class="pl-en">panic</span>(<span class="pl-s1">err</span>)
    }
    <span class="pl-s1">fmt</span>.<span class="pl-en">Println</span>(<span class="pl-s1">item</span>.<span class="pl-c1">Foo</span>)
    <span class="pl-c">// Output: bar</span>
}</pre></div>
<h6 dir="auto">
<a id="user-content-see-also" class="anchor" aria-hidden="true" href="#see-also"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>See also</h6>
<ul dir="auto">
<li>
<a href="https://github.com/uptrace/bun">Golang ORM</a> for PostgreSQL, MySQL, MSSQL, and SQLite</li>
<li><a href="https://bun.uptrace.dev/postgres/" rel="nofollow">Golang PostgreSQL</a></li>
<li><a href="https://github.com/uptrace/bunrouter">Golang HTTP router</a></li>
<li><a href="https://github.com/uptrace/go-clickhouse">Golang ClickHouse ORM</a></li>
</ul>
<h6 dir="auto">
<a id="user-content-contributors" class="anchor" aria-hidden="true" href="#contributors"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Contributors</h6>
<p dir="auto">Thanks to all the people who already contributed!</p>
<a href="https://github.com/vmihailenco/msgpack/graphs/contributors">
  <img src="https://camo.githubusercontent.com/c307cf95af749d5f9336185081261f0a8b1d74a68831a1eb7b0652bf4485542a/68747470733a2f2f636f6e7472696275746f72732d696d672e7765622e6170702f696d6167653f7265706f3d766d696861696c656e636f2f6d73677061636b" data-canonical-src="https://contributors-img.web.app/image?repo=vmihailenco/msgpack" style="max-width: 100%;">
</a>
</article>
  </div>
        </div>
        
        <div id="qs-ugorji-go" class="qs"><h4><a href="https://github.com/ugorji/go" target="_blank">ugorji/go <span class="qs-url">https://github.com/ugorji/go</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><p dir="auto"><strong>MessagePack and <a href="http://github.com/ugorji/binc">Binc</a> Codec for <a href="http://golang.org" rel="nofollow">Go</a> Language.</strong></p>
<p dir="auto"><em>A High Performance, Feature-Rich, Idiomatic encode/decode and rpc library</em>.</p>
<p dir="auto">To install:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="go get github.com/ugorji/go/codec"><pre class="notranslate"><code>go get github.com/ugorji/go/codec
</code></pre></div>
<p dir="auto">Source: [<a href="http://github.com/ugorji/go">http://github.com/ugorji/go</a>]<br>
Online documentation: [<a href="http://godoc.org/github.com/ugorji/go/codec" rel="nofollow">http://godoc.org/github.com/ugorji/go/codec</a>]</p>
<p dir="auto">Typical usage:</p>
<div class="highlight highlight-source-go notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='    // create and use decoder/encoder
    var (
        v interface{} // value to decode/encode into
        r io.Reader
        w io.Writer
        b []byte
        mh codec.MsgpackHandle
    )
    
    dec = codec.NewDecoder(r, &amp;mh)
    dec = codec.NewDecoderBytes(b, &amp;mh)
    err = dec.Decode(&amp;v) 
    
    enc = codec.NewEncoder(w, &amp;mh)
    enc = codec.NewEncoderBytes(&amp;b, &amp;mh)
    err = enc.Encode(v)
    
    //RPC Server
    go func() {
        for {
            conn, err := listener.Accept()
            rpcCodec := codec.GoRpc.ServerCodec(conn, h)
            //OR rpcCodec := codec.MsgpackSpecRpc.ServerCodec(conn, h)
            rpc.ServeCodec(rpcCodec)
        }
    }()
    
    //RPC Communication (client side)
    conn, err = net.Dial("tcp", "localhost:5555")
    rpcCodec := codec.GoRpc.ClientCodec(conn, h)
    //OR rpcCodec := codec.MsgpackSpecRpc.ClientCodec(conn, h)
    client := rpc.NewClientWithCodec(rpcCodec)'><pre>    <span class="pl-c">// create and use decoder/encoder</span>
    <span class="pl-k">var</span> (
        <span class="pl-s1">v</span> <span class="pl-k">interface</span>{} <span class="pl-c">// value to decode/encode into</span>
        <span class="pl-s1">r</span> io.<span class="pl-smi">Reader</span>
        <span class="pl-s1">w</span> io.<span class="pl-smi">Writer</span>
        <span class="pl-s1">b</span> []<span class="pl-smi">byte</span>
        <span class="pl-s1">mh</span> codec.<span class="pl-smi">MsgpackHandle</span>
    )
    
    <span class="pl-s1">dec</span> <span class="pl-c1">=</span> <span class="pl-s1">codec</span>.<span class="pl-en">NewDecoder</span>(<span class="pl-s1">r</span>, <span class="pl-c1">&amp;</span><span class="pl-s1">mh</span>)
    <span class="pl-s1">dec</span> <span class="pl-c1">=</span> <span class="pl-s1">codec</span>.<span class="pl-en">NewDecoderBytes</span>(<span class="pl-s1">b</span>, <span class="pl-c1">&amp;</span><span class="pl-s1">mh</span>)
    <span class="pl-s1">err</span> <span class="pl-c1">=</span> <span class="pl-s1">dec</span>.<span class="pl-en">Decode</span>(<span class="pl-c1">&amp;</span><span class="pl-s1">v</span>) 
    
    <span class="pl-s1">enc</span> <span class="pl-c1">=</span> <span class="pl-s1">codec</span>.<span class="pl-en">NewEncoder</span>(<span class="pl-s1">w</span>, <span class="pl-c1">&amp;</span><span class="pl-s1">mh</span>)
    <span class="pl-s1">enc</span> <span class="pl-c1">=</span> <span class="pl-s1">codec</span>.<span class="pl-en">NewEncoderBytes</span>(<span class="pl-c1">&amp;</span><span class="pl-s1">b</span>, <span class="pl-c1">&amp;</span><span class="pl-s1">mh</span>)
    <span class="pl-s1">err</span> <span class="pl-c1">=</span> <span class="pl-s1">enc</span>.<span class="pl-en">Encode</span>(<span class="pl-s1">v</span>)
    
    <span class="pl-c">//RPC Server</span>
    <span class="pl-k">go</span> <span class="pl-k">func</span>() {
        <span class="pl-k">for</span> {
            <span class="pl-s1">conn</span>, <span class="pl-s1">err</span> <span class="pl-c1">:=</span> <span class="pl-s1">listener</span>.<span class="pl-en">Accept</span>()
            <span class="pl-s1">rpcCodec</span> <span class="pl-c1">:=</span> <span class="pl-s1">codec</span>.<span class="pl-c1">GoRpc</span>.<span class="pl-en">ServerCodec</span>(<span class="pl-s1">conn</span>, <span class="pl-s1">h</span>)
            <span class="pl-c">//OR rpcCodec := codec.MsgpackSpecRpc.ServerCodec(conn, h)</span>
            <span class="pl-s1">rpc</span>.<span class="pl-en">ServeCodec</span>(<span class="pl-s1">rpcCodec</span>)
        }
    }()
    
    <span class="pl-c">//RPC Communication (client side)</span>
    <span class="pl-s1">conn</span>, <span class="pl-s1">err</span> <span class="pl-c1">=</span> <span class="pl-s1">net</span>.<span class="pl-en">Dial</span>(<span class="pl-s">"tcp"</span>, <span class="pl-s">"localhost:5555"</span>)
    <span class="pl-s1">rpcCodec</span> <span class="pl-c1">:=</span> <span class="pl-s1">codec</span>.<span class="pl-c1">GoRpc</span>.<span class="pl-en">ClientCodec</span>(<span class="pl-s1">conn</span>, <span class="pl-s1">h</span>)
    <span class="pl-c">//OR rpcCodec := codec.MsgpackSpecRpc.ClientCodec(conn, h)</span>
    <span class="pl-s1">client</span> <span class="pl-c1">:=</span> <span class="pl-s1">rpc</span>.<span class="pl-en">NewClientWithCodec</span>(<span class="pl-s1">rpcCodec</span>)</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-tinylib-msgp" class="qs"><h4><a href="https://github.com/tinylib/msgp" target="_blank">tinylib/msgp <span class="qs-url">https://github.com/tinylib/msgp</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack-code-generator-" class="anchor" aria-hidden="true" href="#messagepack-code-generator-"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack Code Generator <a href="https://travis-ci.org/tinylib/msgp" rel="nofollow"><img src="https://camo.githubusercontent.com/18f29ee24c2f8d8a313693de2c27219d0427cfefe5d503daf5774f8612eabc50/68747470733a2f2f7472617669732d63692e6f72672f74696e796c69622f6d7367702e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/tinylib/msgp.svg?branch=master" style="max-width: 100%;"></a>
</h5>
<p dir="auto">This is a code generation tool and serialization library for <a href="http://msgpack.org" rel="nofollow">MessagePack</a>. You can read more about MessagePack <a href="http://github.com/tinylib/msgp/wiki">in the wiki</a>, or at <a href="http://msgpack.org" rel="nofollow">msgpack.org</a>.</p>
<h7 dir="auto">
<a id="user-content-why" class="anchor" aria-hidden="true" href="#why"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Why?</h7>
<ul dir="auto">
<li>Use Go as your schema language</li>
<li>Performance</li>
<li><a href="http://godoc.org/github.com/tinylib/msgp/msgp#CopyToJSON" rel="nofollow">JSON interop</a></li>
<li><a href="http://github.com/tinylib/msgp/wiki/Using-Extensions">User-defined extensions</a></li>
<li>Type safety</li>
<li>Encoding flexibility</li>
</ul>
<h7 dir="auto">
<a id="user-content-quickstart" class="anchor" aria-hidden="true" href="#quickstart"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Quickstart</h7>
<p dir="auto">In a source file, include the following directive:</p>
<div class="highlight highlight-source-go notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="//go:generate msgp"><pre><span class="pl-c">//go:generate msgp</span></pre></div>
<p dir="auto">The <code>msgp</code> command will generate serialization methods for all exported type declarations in the file.</p>
<p dir="auto">You can <a href="http://github.com/tinylib/msgp/wiki/Using-the-Code-Generator">read more about the code generation options here</a>.</p>
<h7 dir="auto">
<a id="user-content-use" class="anchor" aria-hidden="true" href="#use"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Use</h7>
<p dir="auto">Field names can be set in much the same way as the <code>encoding/json</code> package. For example:</p>
<div class="highlight highlight-source-go notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='type Person struct {
	Name       string `msg:"name"`
	Address    string `msg:"address"`
	Age        int    `msg:"age"`
	Hidden     string `msg:"-"` // this field is ignored
	unexported bool             // this field is also ignored
}'><pre><span class="pl-k">type</span> <span class="pl-smi">Person</span> <span class="pl-k">struct</span> {
	<span class="pl-c1">Name</span>       <span class="pl-smi">string</span> <span class="pl-s">`msg:"name"`</span>
	<span class="pl-c1">Address</span>    <span class="pl-smi">string</span> <span class="pl-s">`msg:"address"`</span>
	<span class="pl-c1">Age</span>        <span class="pl-smi">int</span>    <span class="pl-s">`msg:"age"`</span>
	<span class="pl-c1">Hidden</span>     <span class="pl-smi">string</span> <span class="pl-s">`msg:"-"`</span> <span class="pl-c">// this field is ignored</span>
	<span class="pl-c1">unexported</span> <span class="pl-smi">bool</span>             <span class="pl-c">// this field is also ignored</span>
}</pre></div>
<p dir="auto">By default, the code generator will satisfy <code>msgp.Sizer</code>, <code>msgp.Encodable</code>, <code>msgp.Decodable</code>,
<code>msgp.Marshaler</code>, and <code>msgp.Unmarshaler</code>. Carefully-designed applications can use these methods to do
marshalling/unmarshalling with zero heap allocations.</p>
<p dir="auto">While <code>msgp.Marshaler</code> and <code>msgp.Unmarshaler</code> are quite similar to the standard library's
<code>json.Marshaler</code> and <code>json.Unmarshaler</code>, <code>msgp.Encodable</code> and <code>msgp.Decodable</code> are useful for
stream serialization. (<code>*msgp.Writer</code> and <code>*msgp.Reader</code> are essentially protocol-aware versions
of <code>*bufio.Writer</code> and <code>*bufio.Reader</code>, respectively.)</p>
<h7 dir="auto">
<a id="user-content-features" class="anchor" aria-hidden="true" href="#features"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Features</h7>
<ul dir="auto">
<li>Extremely fast generated code</li>
<li>Test and benchmark generation</li>
<li>JSON interoperability (see <code>msgp.CopyToJSON() and msgp.UnmarshalAsJSON()</code>)</li>
<li>Support for complex type declarations</li>
<li>Native support for Go's <code>time.Time</code>, <code>complex64</code>, and <code>complex128</code> types</li>
<li>Generation of both <code>[]byte</code>-oriented and <code>io.Reader/io.Writer</code>-oriented methods</li>
<li>Support for arbitrary type system extensions</li>
<li><a href="http://github.com/tinylib/msgp/wiki/Preprocessor-Directives">Preprocessor directives</a></li>
<li>File-based dependency model means fast codegen regardless of source tree size.</li>
</ul>
<p dir="auto">Consider the following:</p>
<div class="highlight highlight-source-go notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='const Eight = 8
type MyInt int
type Data []byte

type Struct struct {
	Which  map[string]*MyInt `msg:"which"`
	Other  Data              `msg:"other"`
	Nums   [Eight]float64    `msg:"nums"`
}'><pre><span class="pl-k">const</span> <span class="pl-s1">Eight</span> <span class="pl-c1">=</span> <span class="pl-c1">8</span>
<span class="pl-k">type</span> <span class="pl-smi">MyInt</span> <span class="pl-smi">int</span>
<span class="pl-k">type</span> <span class="pl-smi">Data</span> []<span class="pl-smi">byte</span>

<span class="pl-k">type</span> <span class="pl-smi">Struct</span> <span class="pl-k">struct</span> {
	<span class="pl-c1">Which</span>  <span class="pl-k">map</span>[<span class="pl-smi">string</span>]<span class="pl-c1">*</span><span class="pl-smi">MyInt</span> <span class="pl-s">`msg:"which"`</span>
	<span class="pl-c1">Other</span>  <span class="pl-smi">Data</span>              <span class="pl-s">`msg:"other"`</span>
	<span class="pl-c1">Nums</span>   [<span class="pl-s1">Eight</span>]<span class="pl-smi">float64</span>    <span class="pl-s">`msg:"nums"`</span>
}</pre></div>
<p dir="auto">As long as the declarations of <code>MyInt</code> and <code>Data</code> are in the same file as <code>Struct</code>, the parser will determine that the type information for <code>MyInt</code> and <code>Data</code> can be passed into the definition of <code>Struct</code> before its methods are generated.</p>
<h8 dir="auto">
<a id="user-content-extensions" class="anchor" aria-hidden="true" href="#extensions"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Extensions</h8>
<p dir="auto">MessagePack supports defining your own types through "extensions," which are just a tuple of
the data "type" (<code>int8</code>) and the raw binary. You <a href="http://github.com/tinylib/msgp/wiki/Using-Extensions">can see a worked example in the wiki.</a></p>
<h7 dir="auto">
<a id="user-content-status" class="anchor" aria-hidden="true" href="#status"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Status</h7>
<p dir="auto">Mostly stable, in that no breaking changes have been made to the <code>/msgp</code> library in more than a year. Newer versions
of the code may generate different code than older versions for performance reasons. I (@philhofer) am aware of a
number of stability-critical commercial applications that use this code with good results. But, caveat emptor.</p>
<p dir="auto">You can read more about how <code>msgp</code> maps MessagePack types onto Go types <a href="http://github.com/tinylib/msgp/wiki">in the wiki</a>.</p>
<p dir="auto">Here some of the known limitations/restrictions:</p>
<ul dir="auto">
<li>Identifiers from outside the processed source file are assumed (optimistically) to satisfy the generator's interfaces. If this isn't the case, your code will fail to compile.</li>
<li>Like most serializers, <code>chan</code> and <code>func</code> fields are ignored, as well as non-exported fields.</li>
<li>Encoding of <code>interface{}</code> is limited to built-ins or types that have explicit encoding methods.</li>
<li>
<em>Maps must have <code>string</code> keys.</em> This is intentional (as it preserves JSON interop.) Although non-string map keys are not forbidden by the MessagePack standard, many serializers impose this restriction. (It also means <em>any</em> well-formed <code>struct</code> can be de-serialized into a <code>map[string]interface{}</code>.) The only exception to this rule is that the deserializers will allow you to read map keys encoded as <code>bin</code> types, due to the fact that some legacy encodings permitted this. (However, those values will still be cast to Go <code>string</code>s, and they will be converted to <code>str</code> types when re-encoded. It is the responsibility of the user to ensure that map keys are UTF-8 safe in this case.) The same rules hold true for JSON translation.</li>
</ul>
<p dir="auto">If the output compiles, then there's a pretty good chance things are fine. (Plus, we generate tests for you.) <em>Please, please, please</em> file an issue if you think the generator is writing broken code.</p>
<h7 dir="auto">
<a id="user-content-performance" class="anchor" aria-hidden="true" href="#performance"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Performance</h7>
<p dir="auto">If you like benchmarks, see <a href="http://bravenewgeek.com/so-you-wanna-go-fast/" rel="nofollow">here</a> and <a href="https://github.com/alecthomas/go_serialization_benchmarks">here</a>.</p>
<p dir="auto">As one might expect, the generated methods that deal with <code>[]byte</code> are faster for small objects, but the <code>io.Reader/Writer</code> methods are generally more memory-efficient (and, at some point, faster) for large (&gt; 2KB) objects.</p>
</article>
  </div>
        </div>
        
        <div id="qs-dchenk-msgp" class="qs"><h4><a href="https://github.com/dchenk/msgp" target="_blank">dchenk/msgp <span class="qs-url">https://github.com/dchenk/msgp</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack-code-generator-and-library-for-go" class="anchor" aria-hidden="true" href="#messagepack-code-generator-and-library-for-go"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack Code Generator and Library for Go</h5>
<p dir="auto"><a href="https://travis-ci.org/dchenk/msgp" rel="nofollow"><img src="https://camo.githubusercontent.com/74396975b3d3402e91922c0657b7a6a63aa61efbf272fa34ad5541b6a6bc34d5/68747470733a2f2f7472617669732d63692e6f72672f646368656e6b2f6d7367702e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/dchenk/msgp.svg?branch=master" style="max-width: 100%;"></a>
<a href="https://goreportcard.com/badge/github.com/dchenk/msgp" rel="nofollow"><img src="https://camo.githubusercontent.com/52395d0f6892da0300a0dd4546ec980c381bfad9261daf6dd9c539912732daac/68747470733a2f2f676f7265706f7274636172642e636f6d2f62616467652f6769746875622e636f6d2f646368656e6b2f6d736770" alt="Go Report Card" data-canonical-src="https://goreportcard.com/badge/github.com/dchenk/msgp" style="max-width: 100%;"></a>
<a href="https://godoc.org/github.com/dchenk/msgp/msgp" rel="nofollow"><img src="https://camo.githubusercontent.com/cb25a77e41c228e3ce5c39a742ed035ac4b49c9db5aa5e2a8481dbdfc1a71963/68747470733a2f2f676f646f632e6f72672f6769746875622e636f6d2f646368656e6b2f6d7367703f7374617475732e737667" alt="GoDoc" data-canonical-src="https://godoc.org/github.com/dchenk/msgp?status.svg" style="max-width: 100%;"></a></p>
<p dir="auto">This is a code generation tool and serialization library for MessagePack. You can read more about MessagePack <a href="https://github.com/dchenk/msgp/wiki">in the wiki</a>
or at <a href="https://msgpack.org" rel="nofollow">msgpack.org</a>.</p>
<p dir="auto"><strong>This library is no longer being maintained. You should be using <a href="https://developers.google.com/protocol-buffers/" rel="nofollow">Protocol Buffers</a> for binary data serialization</strong></p>
<h7 dir="auto">
<a id="user-content-top-features" class="anchor" aria-hidden="true" href="#top-features"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Top Features</h7>
<ul dir="auto">
<li>Use Go as your schema language</li>
<li>Performance is amazing</li>
<li>JSON <a href="https://godoc.org/github.com/dchenk/msgp/msgp#CopyToJSON" rel="nofollow">interoperability</a>
</li>
<li>Type safety</li>
<li>Support for complex type declarations</li>
<li>Define your own <a href="https://github.com/dchenk/msgp/wiki/Using-Extensions">MessagePack extensions</a>
</li>
<li>Automatic unit test and benchmark generation</li>
<li>Native support for Gos <code>time.Time</code>, <code>complex64</code>, and <code>complex128</code> types</li>
<li><a href="https://github.com/dchenk/msgp/wiki/Using-the-Code-Generator">Preprocessor directives</a></li>
<li>Generation of both <code>[]byte</code>-oriented and <code>io.Reader/io.Writer</code>-oriented methods</li>
</ul>
<h7 dir="auto">
<a id="user-content-quickstart" class="anchor" aria-hidden="true" href="#quickstart"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Quickstart</h7>
<p dir="auto">In a Go code source file, include the following directive:</p>
<div class="highlight highlight-source-go notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="//go:generate msgp"><pre><span class="pl-c">//go:generate msgp</span></pre></div>
<p dir="auto">Within the directory with the file where you placed that directive, run <code>go generate</code>.</p>
<p dir="auto">The <code>msgp</code> command will tell the <code>go generate</code> tool to generate serialization and deserialization methods (functions) for all exported types in the file. These custom-built functions enable you to use package <a href="https://godoc.org/github.com/dchenk/msgp/msgp" rel="nofollow"><code>msgp</code></a> to efficiently encode objects to and from the MessagePack format.</p>
<p dir="auto">You can <a href="https://github.com/dchenk/msgp/wiki/Using-the-Code-Generator">read more about the code generation options here</a>.</p>
<h7 dir="auto">
<a id="user-content-use" class="anchor" aria-hidden="true" href="#use"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Use</h7>
<p dir="auto">Struct field names can be set the same way as with the <code>encoding/json</code> package. For example:</p>
<div class="highlight highlight-source-go notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='type Person struct {
    Name       string `msgp:"name"`
    Address    string `msgp:"address"`
    Age        int    `msgp:"age"`
    Hidden     string `msgp:"-"` // this field is ignored
    unexported bool              // this field is also ignored
}'><pre><span class="pl-k">type</span> <span class="pl-smi">Person</span> <span class="pl-k">struct</span> {
    <span class="pl-c1">Name</span>       <span class="pl-smi">string</span> <span class="pl-s">`msgp:"name"`</span>
    <span class="pl-c1">Address</span>    <span class="pl-smi">string</span> <span class="pl-s">`msgp:"address"`</span>
    <span class="pl-c1">Age</span>        <span class="pl-smi">int</span>    <span class="pl-s">`msgp:"age"`</span>
    <span class="pl-c1">Hidden</span>     <span class="pl-smi">string</span> <span class="pl-s">`msgp:"-"`</span> <span class="pl-c">// this field is ignored</span>
    <span class="pl-c1">unexported</span> <span class="pl-smi">bool</span>              <span class="pl-c">// this field is also ignored</span>
}</pre></div>
<p dir="auto">(The struct field tags are optional.)</p>
<p dir="auto">By default, the code generator will satisfy <code>msgp.Sizer</code>, <code>msgp.Encoder</code>, <code>msgp.Decoder</code>, <code>msgp.Marshaler</code>, and <code>msgp.Unmarshaler</code>.
Youll often find that much marshalling and unmarshalling will be done with zero heap allocations.</p>
<p dir="auto">Although <code>msgp.Marshaler</code> and <code>msgp.Unmarshaler</code> are similar to the standard librarys <code>json.Marshaler</code> and <code>json.Unmarshaler</code>,
<code>msgp.Encoder</code> and <code>msgp.Decoder</code> are useful for stream serialization. (<code>*msgp.Writer</code> and <code>*msgp.Reader</code> are essentially
protocol-aware versions of <code>*bufio.Writer</code> and <code>*bufio.Reader</code>.)</p>
<p dir="auto">Consider the following:</p>
<div class="highlight highlight-source-go notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='const Eight = 8
type MyInt int
type Data []byte

type Struct struct {
    Which  map[string]*MyInt `msgp:"which"`
    Other  Data              `msgp:"other"`
    Nums   [Eight]float64    `msgp:"nums"`
}'><pre><span class="pl-k">const</span> <span class="pl-s1">Eight</span> <span class="pl-c1">=</span> <span class="pl-c1">8</span>
<span class="pl-k">type</span> <span class="pl-smi">MyInt</span> <span class="pl-smi">int</span>
<span class="pl-k">type</span> <span class="pl-smi">Data</span> []<span class="pl-smi">byte</span>

<span class="pl-k">type</span> <span class="pl-smi">Struct</span> <span class="pl-k">struct</span> {
    <span class="pl-c1">Which</span>  <span class="pl-k">map</span>[<span class="pl-smi">string</span>]<span class="pl-c1">*</span><span class="pl-smi">MyInt</span> <span class="pl-s">`msgp:"which"`</span>
    <span class="pl-c1">Other</span>  <span class="pl-smi">Data</span>              <span class="pl-s">`msgp:"other"`</span>
    <span class="pl-c1">Nums</span>   [<span class="pl-s1">Eight</span>]<span class="pl-smi">float64</span>    <span class="pl-s">`msgp:"nums"`</span>
}</pre></div>
<p dir="auto">As long as the declarations of <code>MyInt</code> and <code>Data</code> are in the same file as <code>Struct</code>, the parser will determine that the type information
for <code>MyInt</code> and <code>Data</code> can be passed into the definition of <code>Struct</code> before its methods are generated.</p>
<h8 dir="auto">
<a id="user-content-extensions" class="anchor" aria-hidden="true" href="#extensions"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Extensions</h8>
<p dir="auto">MessagePack supports defining your own types through "extensions," which are just a tuple of the data "type" (<code>int8</code>) and the raw binary.
You can see <a href="https://github.com/dchenk/msgp/wiki/Using-Extensions">a worked example in the wiki.</a></p>
<h7 dir="auto">
<a id="user-content-status" class="anchor" aria-hidden="true" href="#status"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Status</h7>
<p dir="auto">The code generator here and runtime library are both stable. Newer versions of the code may generate different code than older versions
for performance reasons.</p>
<p dir="auto">You can read more about how <code>msgp</code> maps MessagePack types onto Go types <a href="http://github.com/dchenk/msgp/wiki">in the wiki</a>.</p>
<p dir="auto">Here some of the known limitations/restrictions:</p>
<ul dir="auto">
<li>Identifiers from outside the processed source file are assumed to satisfy the generator's interfaces. If this isn't the case, your code
will fail to compile.</li>
<li>The <code>chan</code> and <code>func</code> fields and types are ignored as well as un-exported fields.</li>
<li>Encoding of <code>interface{}</code> is limited to built-ins or types that have explicit encoding methods.</li>
<li>Maps must have <code>string</code> keys. This is intentional (as it preserves JSON interoperability). Although non-string map keys are not forbidden
by the MessagePack standard, many serializers impose this restriction. (It also means <em>any</em> well-formed <code>struct</code> can be decoded into a
<code>map[string]interface{}</code>.) The only exception to this rule is that the decoders will allow you to read map keys encoded as <code>bin</code> types,
since some legacy encodings permitted this. (However, those values will still be cast to Go <code>string</code>s, and they will be converted to <code>str</code>
types when re-encoded. It is the responsibility of the user to ensure that map keys are UTF-8 safe in this case.) The same rules hold true
for JSON translation.</li>
</ul>
<p dir="auto">If the output compiles, then there's a pretty good chance things are fine. (Plus, we generate tests for you.) Please file an issue if you
think the generator is writing broken code.</p>
<h7 dir="auto">
<a id="user-content-performance" class="anchor" aria-hidden="true" href="#performance"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Performance</h7>
<p dir="auto">If you like benchmarks, see <a href="https://github.com/dchenk/messagepack-benchmarks">here</a>, <a href="http://bravenewgeek.com/so-you-wanna-go-fast/" rel="nofollow">here</a>,
and <a href="https://github.com/alecthomas/go_serialization_benchmarks">here</a>.</p>
<h6 dir="auto">
<a id="user-content-credits" class="anchor" aria-hidden="true" href="#credits"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Credits</h6>
<p dir="auto">This repository is a fork of github.com/tinylib/msgp.</p>
<p dir="auto">Differences between this tool and tinylib/msgp:</p>
<ul dir="auto">
<li>Here we have <a href="https://github.com/dchenk/msgp/wiki/Using-the-Code-Generator#matching-type-names">regular expression matching</a> for type
names in directives.</li>
<li>Here we do not use package <code>unsafe</code> for conversions from byte slices to strings: <code>[]byte</code> is converted quite efficiently to <code>string</code>
simply with the built-in <code>string()</code>.</li>
<li>This codebase is thoroughly refactored to be more Go-idiomatic and efficient.</li>
</ul>
<p dir="auto">You're welcome to contribute!</p>
</article>
  </div>
        </div>
        
        <div id="qs-shamaton-msgpack" class="qs"><h4><a href="https://github.com/shamaton/msgpack" target="_blank">shamaton/msgpack <span class="qs-url">https://github.com/shamaton/msgpack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack-for-golang" class="anchor" aria-hidden="true" href="#messagepack-for-golang"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack for Golang</h5>
<p dir="auto"><a href="https://pkg.go.dev/github.com/shamaton/msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/695d92c8eb3bb4fc31b8a96212fecf8afa9d8874bfe52887037e9099eaebb4c5/68747470733a2f2f706b672e676f2e6465762f62616467652f6769746875622e636f6d2f7368616d61746f6e2f6d73677061636b2e737667" alt="Go Reference" data-canonical-src="https://pkg.go.dev/badge/github.com/shamaton/msgpack.svg" style="max-width: 100%;"></a>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/shamaton/msgpack/workflows/test/badge.svg"><img src="https://github.com/shamaton/msgpack/workflows/test/badge.svg" alt="test" style="max-width: 100%;"></a>
<a href="https://goreportcard.com/report/github.com/shamaton/msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/84679ac44ab8ad9882031f0d3bbee9f26fe1a3d24e3cec811bf5da9a3149ba2c/68747470733a2f2f676f7265706f7274636172642e636f6d2f62616467652f6769746875622e636f6d2f7368616d61746f6e2f6d73677061636b" alt="Go Report Card" data-canonical-src="https://goreportcard.com/badge/github.com/shamaton/msgpack" style="max-width: 100%;"></a>
<a href="https://codecov.io/gh/shamaton/msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/d4f825d23ba458b2606bf6b9e073f6ee8a54f2d27fa39dcb23df39e811677fcb/68747470733a2f2f636f6465636f762e696f2f67682f7368616d61746f6e2f6d73677061636b2f6272616e63682f6d61737465722f67726170682f62616467652e7376673f746f6b656e3d395044324a554b355633" alt="codecov" data-canonical-src="https://codecov.io/gh/shamaton/msgpack/branch/master/graph/badge.svg?token=9PD2JUK5V3" style="max-width: 100%;"></a>
<a href="https://app.fossa.com/projects/git%2Bgithub.com%2Fshamaton%2Fmsgpack?ref=badge_shield" rel="nofollow"><img src="https://camo.githubusercontent.com/baeeab4dbd261f49dbdf8f9079de8e0e66f1857a741e959620d390fe932c4d95/68747470733a2f2f6170702e666f7373612e636f6d2f6170692f70726f6a656374732f6769742532426769746875622e636f6d2532467368616d61746f6e2532466d73677061636b2e7376673f747970653d736869656c64" alt="FOSSA Status" data-canonical-src="https://app.fossa.com/api/projects/git%2Bgithub.com%2Fshamaton%2Fmsgpack.svg?type=shield" style="max-width: 100%;"></a></p>
<h6 dir="auto">
<a id="user-content--notice" class="anchor" aria-hidden="true" href="#-notice"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji class="g-emoji" alias="mega" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4e3.png"></g-emoji> Notice</h6>
<p dir="auto">If your application serializes only primitive types, array, map and struct, code generation is also recommended.
You can get the fastest performance with <a href="https://github.com/shamaton/msgpackgen">msgpackgen</a>.</p>
<h6 dir="auto">
<a id="user-content-features" class="anchor" aria-hidden="true" href="#features"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Features</h6>
<ul dir="auto">
<li>Supported types : primitive / array / slice / struct / map / interface{} and time.Time</li>
<li>Renaming fields via <code>msgpack:"field_name"</code>
</li>
<li>Omitting fields via <code>msgpack:"-"</code>
</li>
<li>Supports extend encoder / decoder</li>
<li>Can also Encoding / Decoding struct as array</li>
</ul>
<p dir="auto">This package requires more than  version <strong>1.13</strong></p>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<p dir="auto">Current version is <strong>msgpack/v2</strong>.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="go get -u github.com/shamaton/msgpack/v2"><pre>go get -u github.com/shamaton/msgpack/v2</pre></div>
<h6 dir="auto">
<a id="user-content-quick-start" class="anchor" aria-hidden="true" href="#quick-start"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Quick Start</h6>
<div class="highlight highlight-source-go notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='package main

import (
  "github.com/shamaton/msgpack/v2"
)

func main() {
	type Struct struct {
		String string
	}
	v := Struct{String: "msgpack"}

	d, err := msgpack.Marshal(v)
	if err != nil {
		panic(err)
	}
	r := Struct{}
	err = msgpack.Unmarshal(d, &amp;r)
	if err != nil {
		panic(err)
	}
}'><pre><span class="pl-k">package</span> main

<span class="pl-k">import</span> (
  <span class="pl-s">"github.com/shamaton/msgpack/v2"</span>
)

<span class="pl-k">func</span> <span class="pl-en">main</span>() {
	<span class="pl-k">type</span> <span class="pl-smi">Struct</span> <span class="pl-k">struct</span> {
		<span class="pl-c1">String</span> <span class="pl-smi">string</span>
	}
	<span class="pl-s1">v</span> <span class="pl-c1">:=</span> <span class="pl-smi">Struct</span>{<span class="pl-c1">String</span>: <span class="pl-s">"msgpack"</span>}

	<span class="pl-s1">d</span>, <span class="pl-s1">err</span> <span class="pl-c1">:=</span> <span class="pl-s1">msgpack</span>.<span class="pl-en">Marshal</span>(<span class="pl-s1">v</span>)
	<span class="pl-k">if</span> <span class="pl-s1">err</span> <span class="pl-c1">!=</span> <span class="pl-c1">nil</span> {
		<span class="pl-en">panic</span>(<span class="pl-s1">err</span>)
	}
	<span class="pl-s1">r</span> <span class="pl-c1">:=</span> <span class="pl-smi">Struct</span>{}
	<span class="pl-s1">err</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span>.<span class="pl-en">Unmarshal</span>(<span class="pl-s1">d</span>, <span class="pl-c1">&amp;</span><span class="pl-s1">r</span>)
	<span class="pl-k">if</span> <span class="pl-s1">err</span> <span class="pl-c1">!=</span> <span class="pl-c1">nil</span> {
		<span class="pl-en">panic</span>(<span class="pl-s1">err</span>)
	}
}</pre></div>
<h6 dir="auto">
<a id="user-content-benchmark" class="anchor" aria-hidden="true" href="#benchmark"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Benchmark</h6>
<p dir="auto">This result made from <a href="https://github.com/shamaton/msgpack_bench">shamaton/msgpack_bench</a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/4637556/128299009-4823e79b-d70b-4d11-8f35-10a4758dfeca.png"><img src="https://user-images.githubusercontent.com/4637556/128299009-4823e79b-d70b-4d11-8f35-10a4758dfeca.png" alt="msgpack_bench" style="max-width: 100%;"></a></p>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<p dir="auto">This library is under the MIT License.</p>
</article>
  </div>
        </div>
        
        <div id="qs-shamaton-msgpackgen" class="qs"><h4><a href="https://github.com/shamaton/msgpackgen" target="_blank">shamaton/msgpackgen <span class="qs-url">https://github.com/shamaton/msgpackgen</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack-code-generator-for-go" class="anchor" aria-hidden="true" href="#messagepack-code-generator-for-go"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack Code Generator for Go</h5>
<p dir="auto"><a href="https://pkg.go.dev/github.com/shamaton/msgpackgen" rel="nofollow"><img src="https://camo.githubusercontent.com/10921201495956d2ae13555a57828121308eeafa6d3b3c9e4e90e95ee2cc28f4/68747470733a2f2f706b672e676f2e6465762f62616467652f6769746875622e636f6d2f7368616d61746f6e2f6d73677061636b67656e2e737667" alt="Go Reference" data-canonical-src="https://pkg.go.dev/badge/github.com/shamaton/msgpackgen.svg" style="max-width: 100%;"></a>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/shamaton/msgpackgen/workflows/test/badge.svg"><img src="https://github.com/shamaton/msgpackgen/workflows/test/badge.svg" alt="test" style="max-width: 100%;"></a>
<a href="https://goreportcard.com/report/github.com/shamaton/msgpackgen" rel="nofollow"><img src="https://camo.githubusercontent.com/a693d15dcdd5e6c22911cb0107e9b064be2bf195b88fccf760f3e6708f8589a5/68747470733a2f2f676f7265706f7274636172642e636f6d2f62616467652f6769746875622e636f6d2f7368616d61746f6e2f6d73677061636b67656e" alt="Go Report Card" data-canonical-src="https://goreportcard.com/badge/github.com/shamaton/msgpackgen" style="max-width: 100%;"></a>
<a href="https://codecov.io/gh/shamaton/msgpackgen" rel="nofollow"><img src="https://camo.githubusercontent.com/d9f93a215473ec655021a1e543ed31ce3018eaba58c4d69a75139a4a74bcfa34/68747470733a2f2f636f6465636f762e696f2f67682f7368616d61746f6e2f6d73677061636b67656e2f6272616e63682f6d61696e2f67726170682f62616467652e7376673f746f6b656e3d4b374d33373738583743" alt="codecov" data-canonical-src="https://codecov.io/gh/shamaton/msgpackgen/branch/main/graph/badge.svg?token=K7M3778X7C" style="max-width: 100%;"></a>
<a href="https://app.fossa.com/projects/git%2Bgithub.com%2Fshamaton%2Fmsgpackgen?ref=badge_shield" rel="nofollow"><img src="https://camo.githubusercontent.com/366c7a05179e0bfd43d6aaef746666996b9087200f84479887af5f92de13e2c6/68747470733a2f2f6170702e666f7373612e636f6d2f6170692f70726f6a656374732f6769742532426769746875622e636f6d2532467368616d61746f6e2532466d73677061636b67656e2e7376673f747970653d736869656c64" alt="FOSSA Status" data-canonical-src="https://app.fossa.com/api/projects/git%2Bgithub.com%2Fshamaton%2Fmsgpackgen.svg?type=shield" style="max-width: 100%;"></a></p>
<p dir="auto"><strong>msgpackgen</strong> provides a code generation tool and serialization library for <a href="http://msgpack.org/" rel="nofollow">MessagePack</a>.</p>
<ul dir="auto">
<li>
<g-emoji class="g-emoji" alias="rocket" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f680.png"></g-emoji> Extremely Fast</li>
<li>
<g-emoji class="g-emoji" alias="recycle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/267b.png"></g-emoji> Easy Maintenance</li>
<li>
<g-emoji class="g-emoji" alias="100" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4af.png"></g-emoji> Compliant with <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">specifications</a>
</li>
</ul>
<h6 dir="auto">
<a id="user-content-quickstart" class="anchor" aria-hidden="true" href="#quickstart"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Quickstart</h6>
<p dir="auto">Create go.mod file, if you still have not created.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="# example
go mod init github.com/user/awesome"><pre><span class="pl-c"><span class="pl-c">#</span> example</span>
go mod init github.com/user/awesome</pre></div>
<p dir="auto">In a source file(ex. main.go), include the following directive:</p>
<div class="highlight highlight-source-go notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="//go:generate msgpackgen
or
//go:generate go run github.com/shamaton/msgpackgen"><pre><span class="pl-c">//go:generate msgpackgen</span>
<span class="pl-s1">or</span>
<span class="pl-c">//go:generate go run github.com/shamaton/msgpackgen</span></pre></div>
<p dir="auto">And run the following command in your shell:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="go generate"><pre>go generate</pre></div>
<p dir="auto">It will generate one <code>.go</code> file for serialization, default is <code>resolver.msgpackgen.go</code>.
You can call one method to use generated code.</p>
<div class="highlight highlight-source-go notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="func main() {
	// this method is defined in resolver.msgpackgen.go
	RegisterGeneratedResolver()
	
	// ... your code ...
}"><pre><span class="pl-k">func</span> <span class="pl-en">main</span>() {
	<span class="pl-c">// this method is defined in resolver.msgpackgen.go</span>
	<span class="pl-en">RegisterGeneratedResolver</span>()
	
	<span class="pl-c">// ... your code ...</span>
}</pre></div>
<p dir="auto"><code>Marshal</code> and <code>Unmarshal</code> look like this:</p>
<div class="highlight highlight-source-go notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="    // import github.com/shamaton/msgpackgen/msgpack
    v := ResolvedStruct{}
    b, err := msgpack.Marshal(v)
    if err != nil {
        panic(err)
    }
    
    var vv ResolvedStruct
    err = msgpack.Unmarshal(b, &amp;vv)
    if err != nil {
        panic(err)
    }"><pre>    <span class="pl-c">// import github.com/shamaton/msgpackgen/msgpack</span>
    <span class="pl-s1">v</span> <span class="pl-c1">:=</span> <span class="pl-smi">ResolvedStruct</span>{}
    <span class="pl-s1">b</span>, <span class="pl-s1">err</span> <span class="pl-c1">:=</span> <span class="pl-s1">msgpack</span>.<span class="pl-en">Marshal</span>(<span class="pl-s1">v</span>)
    <span class="pl-k">if</span> <span class="pl-s1">err</span> <span class="pl-c1">!=</span> <span class="pl-c1">nil</span> {
        <span class="pl-en">panic</span>(<span class="pl-s1">err</span>)
    }
    
    <span class="pl-k">var</span> <span class="pl-s1">vv</span> <span class="pl-smi">ResolvedStruct</span>
    <span class="pl-s1">err</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span>.<span class="pl-en">Unmarshal</span>(<span class="pl-s1">b</span>, <span class="pl-c1">&amp;</span><span class="pl-s1">vv</span>)
    <span class="pl-k">if</span> <span class="pl-s1">err</span> <span class="pl-c1">!=</span> <span class="pl-c1">nil</span> {
        <span class="pl-en">panic</span>(<span class="pl-s1">err</span>)
    }</pre></div>
<h6 dir="auto">
<a id="user-content-serializer" class="anchor" aria-hidden="true" href="#serializer"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Serializer</h6>
<h7 dir="auto">
<a id="user-content-supported-types" class="anchor" aria-hidden="true" href="#supported-types"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Supported Types</h7>
<p dir="auto">primitive types:<br>
<code>int</code>, <code>int8</code>, <code>int16</code>, <code>int32</code>, <code>int64</code>,
<code>uint</code>, <code>uint8</code>, <code>uint16</code>, <code>uint32</code>, <code>uint64</code>,
<code>float32</code>, <code>float64</code>, <code>string</code>, <code>bool</code>, <code>byte</code>, <code>rune</code>,
<code>complex64</code>, <code>complex128</code></p>
<p dir="auto">slice, array: <code>[]</code>, <code>[cap]</code></p>
<p dir="auto">map: <code>map[key]value</code></p>
<p dir="auto">struct: <code>time.Time</code> and structures you defined</p>
<h7 dir="auto">
<a id="user-content-tags" class="anchor" aria-hidden="true" href="#tags"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Tags</h7>
<p dir="auto">Renaming or omitting are available.</p>
<ul dir="auto">
<li>Renaming fields via <code>msgpack:"field_name"</code>
</li>
<li>Omitting fields via <code>msgpack:"-"</code>
</li>
</ul>
<h7 dir="auto">
<a id="user-content-switch-default-behaviour" class="anchor" aria-hidden="true" href="#switch-default-behaviour"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Switch Default Behaviour</h7>
<p dir="auto">Default serialization behaviour is map type. But the performance of array type is better.
If you want to switch array type as default, use <code>SetStructAsArray</code>.</p>
<p dir="auto">Also, you can use <code>MarshalAsArray</code>, <code>UnmarshalAsArray</code>.</p>
<h6 dir="auto">
<a id="user-content-code-generator" class="anchor" aria-hidden="true" href="#code-generator"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Code Generator</h6>
<h7 dir="auto">
<a id="user-content-easy-maintenance" class="anchor" aria-hidden="true" href="#easy-maintenance"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Easy maintenance</h7>
<p dir="auto">This tool generates only one <code>.go</code> file.
All you have to delete is one generated <code>.go</code> file.</p>
<h7 dir="auto">
<a id="user-content-analyzing" class="anchor" aria-hidden="true" href="#analyzing"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Analyzing</h7>
<p dir="auto"><code>-input-dir</code> needs to be in $GOPATH.</p>
<p dir="auto">Resolver is generated by recursively searching directories,
but some directories and files are ignored.</p>
<ul dir="auto">
<li>Prefix <code>_</code> and <code>.</code> directory.</li>
<li>
<code>testdata</code> and <code>vendor</code> directory</li>
<li>
<code>_test.go</code> file</li>
</ul>
<p dir="auto">If you use <code>-input-file</code> option, it will work without considering the above conditions.</p>
<hr>
<p dir="auto">Compatible with various import rules.</p>
<div class="highlight highlight-source-go notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import ("
	"example.com/user/a/b"
	d "example.com/user/a/c"
	. "example.com/user/a/e"
)'><pre><span class="pl-k">import</span> (<span class="pl-s">"</span>
<span class="pl-s">	"</span><span class="pl-s1">example</span>.<span class="pl-s1">com</span><span class="pl-c1">/</span><span class="pl-s1">user</span><span class="pl-c1">/</span><span class="pl-s1">a</span><span class="pl-c1">/</span><span class="pl-s1">b</span>"
	d <span class="pl-s">"example.com/user/a/c"</span>
	. <span class="pl-s">"example.com/user/a/e"</span>
)</pre></div>
<h7 dir="auto">
<a id="user-content-not-generated-case" class="anchor" aria-hidden="true" href="#not-generated-case"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Not Generated Case</h7>
<p dir="auto">Not generated in the following cases:</p>
<div class="highlight highlight-source-go notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="// ex. a/example.go
type Example struct {
	// unsupported types
	Interface interface{}
	Uintptr uintptr
	Error error
	Chan chan
	Func func()
	
	// nested struct is also unsupported
	NestedStruct struct {}
	
	// because b.Example is not generated
	B b.Example
	
	// because bytes.Butffer is in outside package
	Buf bytes.Buffer
}

func (e Example) F() {
	// unsupported  struct defined in func
	type InFunction struct {}
}

// ex a/b/example.go
type Example struct {
	Interface interface{}
}"><pre><span class="pl-c">// ex. a/example.go</span>
<span class="pl-k">type</span> <span class="pl-smi">Example</span> <span class="pl-k">struct</span> {
	<span class="pl-c">// unsupported types</span>
	<span class="pl-c1">Interface</span> <span class="pl-k">interface</span>{}
	<span class="pl-c1">Uintptr</span> <span class="pl-smi">uintptr</span>
	<span class="pl-c1">Error</span> <span class="pl-smi">error</span>
	<span class="pl-c1">Chan</span> <span class="pl-k">chan</span>
	<span class="pl-s1">Func</span> <span class="pl-k">func</span>()
	
	<span class="pl-c">// nested struct is also unsupported</span>
	<span class="pl-c1">NestedStruct</span> <span class="pl-k">struct</span> {}
	
	<span class="pl-c">// because b.Example is not generated</span>
	<span class="pl-c1">B</span> b.<span class="pl-smi">Example</span>
	
	<span class="pl-c">// because bytes.Butffer is in outside package</span>
	<span class="pl-c1">Buf</span> bytes.<span class="pl-smi">Buffer</span>
}

<span class="pl-k">func</span> (<span class="pl-s1">e</span> <span class="pl-smi">Example</span>) <span class="pl-en">F</span>() {
	<span class="pl-c">// unsupported  struct defined in func</span>
	<span class="pl-k">type</span> <span class="pl-smi">InFunction</span> <span class="pl-k">struct</span> {}
}

<span class="pl-c">// ex a/b/example.go</span>
<span class="pl-k">type</span> <span class="pl-smi">Example</span> <span class="pl-k">struct</span> {
	<span class="pl-c1">Interface</span> <span class="pl-k">interface</span>{}
}</pre></div>
<p dir="auto">If you serialize a struct that wasn't code generated, it will be processed by <a href="https://github.com/shamaton/msgpack">shamaton/msgpack</a>.</p>
<h7 dir="auto">
<a id="user-content-strict-mode" class="anchor" aria-hidden="true" href="#strict-mode"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Strict Mode</h7>
<p dir="auto">If you use strict mode(option <code>-strict</code>), you will get an error if an unrecognized structure is passed.
In other words,  <a href="https://github.com/shamaton/msgpack">shamaton/msgpack</a> is not used.</p>
<hr>
<p dir="auto">See also <code>msgpackgen -h</code></p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='Usage of msgpackgen:
  -dry-run
        dry run mode
  -input-dir string
        input directory. input-file cannot be used at the same time (default ".")
  -input-file string
        input a specific file. input-dir cannot be used at the same time
  -output-dir string
        output directory (default ".")
  -output-file string
        name of generated file (default "resolver.msgpackgen.go")
  -pointer int
        pointer level to consider (default 1)
  -strict
        strict mode
  -use-gopath
        use GOPATH instead of go.mod
  -v    verbose diagnostics'><pre>Usage of msgpackgen:
  -dry-run
        dry run mode
  -input-dir string
        input directory. input-file cannot be used at the same <span class="pl-k">time</span> (default <span class="pl-s"><span class="pl-pds">"</span>.<span class="pl-pds">"</span></span>)
  -input-file string
        input a specific file. input-dir cannot be used at the same <span class="pl-k">time</span>
  -output-dir string
        output directory (default <span class="pl-s"><span class="pl-pds">"</span>.<span class="pl-pds">"</span></span>)
  -output-file string
        name of generated file (default <span class="pl-s"><span class="pl-pds">"</span>resolver.msgpackgen.go<span class="pl-pds">"</span></span>)
  -pointer int
        pointer level to consider (default 1)
  -strict
        strict mode
  -use-gopath
        use GOPATH instead of go.mod
  -v    verbose diagnostics</pre></div>
<h6 dir="auto">
<a id="user-content-benchmarks" class="anchor" aria-hidden="true" href="#benchmarks"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Benchmarks</h6>
<p dir="auto">These results are recorded by <a href="https://github.com/shamaton/msgpack_bench">msgpack_bench</a> at 2021/08.<br>
The result of this package is that the suffix has <code>ShamatonGen</code>.
<a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/4637556/128298988-0e3c96fd-6014-42a0-9050-36e2b58316b1.png"><img src="https://user-images.githubusercontent.com/4637556/128298988-0e3c96fd-6014-42a0-9050-36e2b58316b1.png" alt="msgpack_bench" style="max-width: 100%;"></a>
The result of <a href="https://github.com/alecthomas/go_serialization_benchmarks">go_serialization_benchmarks</a> is here.
<a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/4637556/128299037-06b3a645-2726-4205-848a-cccebb9a3d7f.png"><img src="https://user-images.githubusercontent.com/4637556/128299037-06b3a645-2726-4205-848a-cccebb9a3d7f.png" alt="go_serialization_benchmarks" style="max-width: 100%;"></a></p>
</article>
  </div>
        </div>
        
        <div id="qs-reeze-msgpack-hhvm" class="qs"><h4><a href="https://github.com/reeze/msgpack-hhvm" target="_blank">reeze/msgpack-hhvm <span class="qs-url">https://github.com/reeze/msgpack-hhvm</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack-hhvm" class="anchor" aria-hidden="true" href="#msgpack-hhvm"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack-hhvm</h5>
<p dir="auto">Build Status: <a href="http://travis-ci.org/reeze/msgpack-hhvm" rel="nofollow"><img src="https://camo.githubusercontent.com/058196474d969be4145fae0ed1557d5e457ea2275b92c7192b6d17e877b1e352/68747470733a2f2f7365637572652e7472617669732d63692e6f72672f7265657a652f6d73677061636b2d6868766d2e706e67" alt="Build Status" data-canonical-src="https://secure.travis-ci.org/reeze/msgpack-hhvm.png" style="max-width: 100%;"></a></p>
<p dir="auto">Msgpack for HHVM, It is a msgpack binding for HHVM</p>
<h5 dir="auto">
<a id="user-content-api" class="anchor" aria-hidden="true" href="#api"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>API</h5>
<ul dir="auto">
<li>msgpack_pack(mixed $input) : string;
pack a input to msgpack, object and resource are not supported, array and other types supported,
false on failure.</li>
<li>msgpack_unpack(string $pac) : mixed;
unpack a msgpack.</li>
</ul>
<h5 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h5>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ git clone https://github.com/reeze/msgpack-hhvm --depth=1
$ cd msgpack-hhvm
$ hphpize &amp;&amp; cmake . &amp;&amp; make
$ cp msgpack.so /path/to/your/hhvm/ext/dir"><pre>$ git clone https://github.com/reeze/msgpack-hhvm --depth=1
$ <span class="pl-c1">cd</span> msgpack-hhvm
$ hphpize <span class="pl-k">&amp;&amp;</span> cmake <span class="pl-c1">.</span> <span class="pl-k">&amp;&amp;</span> make
$ cp msgpack.so /path/to/your/hhvm/ext/dir</pre></div>
<p dir="auto">If you don't have <code>hphpize</code> program, please intall package <code>hhvm-dev</code></p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ sudo apt-get install hhvm-dev"><pre>$ sudo apt-get install hhvm-dev</pre></div>
<h5 dir="auto">
<a id="user-content-contribution-and--issues" class="anchor" aria-hidden="true" href="#contribution-and--issues"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Contribution and  Issues</h5>
<p dir="auto">Feel free to send Pull Requests for bug report at: <a href="http://github.com/reeze/msgpack-hhvm/issues">http://github.com/reeze/msgpack-hhvm/issues</a></p>
<h5 dir="auto">
<a id="user-content-authors" class="anchor" aria-hidden="true" href="#authors"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Authors</h5>
<ul dir="auto">
<li>Reeze Xia <a href="mailto:reeze@php.net">reeze@php.net</a>
</li>
</ul>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-haskell" class="qs"><h4><a href="http://hackage.haskell.org/package/msgpack" target="_blank">msgpack/msgpack-haskell <span class="qs-url">http://hackage.haskell.org/package/msgpack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack-for-haskell-" class="anchor" aria-hidden="true" href="#messagepack-for-haskell-"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack for Haskell <a href="https://travis-ci.org/msgpack/msgpack-haskell" rel="nofollow"><img src="https://camo.githubusercontent.com/e598155aff8ab3bbf2e644c989108de9acfa10ee95a5544398c021135b0731de/68747470733a2f2f7472617669732d63692e6f72672f6d73677061636b2f6d73677061636b2d6861736b656c6c2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/msgpack/msgpack-haskell.svg?branch=master" style="max-width: 100%;"></a>
</h5>
<p dir="auto">This is an implementation of <a href="https://en.wikipedia.org/wiki/MessagePack" rel="nofollow">MessagePack</a> for <a href="https://www.haskell.org" rel="nofollow">Haskell</a>.</p>
<p dir="auto">It contains:</p>
<ul dir="auto">
<li>Serializer/Deserializer</li>
<li>RPC</li>
</ul>
<h5 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h5>
<p dir="auto">Execute following instructions:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ cabal update
$ cabal install msgpack
$ cabal install msgpack-rpc"><pre lang="{.bash}" class="notranslate"><code>$ cabal update
$ cabal install msgpack
$ cabal install msgpack-rpc
</code></pre></div>
<h5 dir="auto">
<a id="user-content-documentation" class="anchor" aria-hidden="true" href="#documentation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Documentation</h5>
<p dir="auto"><a href="https://www.haskell.org/haddock" rel="nofollow">Haddock</a> documentation can be found on Hackage:</p>
<ul dir="auto">
<li><a href="http://hackage.haskell.org/package/msgpack" rel="nofollow">http://hackage.haskell.org/package/msgpack</a></li>
<li><a href="http://hackage.haskell.org/package/msgpack-rpc" rel="nofollow">http://hackage.haskell.org/package/msgpack-rpc</a></li>
<li><a href="http://hackage.haskell.org/package/msgpack-aeson" rel="nofollow">http://hackage.haskell.org/package/msgpack-aeson</a></li>
<li><a href="http://hackage.haskell.org/package/msgpack-idl" rel="nofollow">http://hackage.haskell.org/package/msgpack-idl</a></li>
</ul>
</article>
  </div>
        </div>
        
        <div id="qs-rodrigosetti-messagepack" class="qs"><h4><a href="http://hackage.haskell.org/package/messagepack" target="_blank">rodrigosetti/messagepack <span class="qs-url">http://hackage.haskell.org/package/messagepack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack-for-haskell" class="anchor" aria-hidden="true" href="#messagepack-for-haskell"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack for Haskell</h5>
<p dir="auto">This implementation defines an messagepack <code>Object</code> type, which is an instance of
<code>Serialize</code> (from <a href="http://hackage.haskell.org/package/cereal" rel="nofollow">cereal</a> ):</p>
<div class="highlight highlight-source-haskell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="data Object = ObjectNil
            | ObjectUInt   Word64
            | ObjectInt    Int64
            | ObjectBool   Bool
            | ObjectFloat  Float
            | ObjectDouble Double
            | ObjectString ByteString
            | ObjectBinary ByteString
            | ObjectArray  [Object]
            | ObjectMap    (M.Map Object Object )
            | ObjectExt    !Int8 BS.ByteString
    deriving (Eq, Ord, Show)
    
instance Serialize Object where
    -- ..."><pre><span class="pl-k">data</span> <span class="pl-en">Object</span> <span class="pl-k">=</span> <span class="pl-ent">ObjectNil</span>
            | <span class="pl-ent">ObjectUInt</span>   <span class="pl-en">Word64</span>
            | <span class="pl-ent">ObjectInt</span>    <span class="pl-en">Int64</span>
            | <span class="pl-ent">ObjectBool</span>   <span class="pl-en"><span class="pl-c1">Bool</span></span>
            | <span class="pl-ent">ObjectFloat</span>  <span class="pl-en"><span class="pl-c1">Float</span></span>
            | <span class="pl-ent">ObjectDouble</span> <span class="pl-en"><span class="pl-c1">Double</span></span>
            | <span class="pl-ent">ObjectString</span> <span class="pl-en">ByteString</span>
            | <span class="pl-ent">ObjectBinary</span> <span class="pl-en">ByteString</span>
            | <span class="pl-ent">ObjectArray</span>  [<span class="pl-en">Object</span>]
            | <span class="pl-ent">ObjectMap</span>    (<span class="pl-en"><span class="pl-c1">M.</span>Map</span> <span class="pl-en">Object</span> <span class="pl-en">Object</span> )
            | <span class="pl-ent">ObjectExt</span>    <span class="pl-k">!</span><span class="pl-en">Int8</span> <span class="pl-en"><span class="pl-c1">BS.</span>ByteString</span>
    <span class="pl-k">deriving</span> (<span class="pl-e">Eq</span>, <span class="pl-e">Ord</span>, <span class="pl-e">Show</span>)
    
<span class="pl-k">instance</span> <span class="pl-en">Serialize</span> <span class="pl-en">Object</span> <span class="pl-k">where</span>
    <span class="pl-c"><span class="pl-c">--</span> ...</span></pre></div>
<p dir="auto">Thus, you can use cereal's <code>encode</code> and <code>decode</code> to pack and unpack objects.</p>
</article>
  </div>
        </div>
        
        <div id="qs-aaulia-msgpack-haxe" class="qs"><h4><a href="https://github.com/aaulia/msgpack-haxe" target="_blank">aaulia/msgpack-haxe <span class="qs-url">https://github.com/aaulia/msgpack-haxe</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><p dir="auto"><a href="/aaulia/msgpack-haxe/blob/master/license.txt"><img src="https://camo.githubusercontent.com/dd1c858e94a371529a0a4c359bc95f18f09ba4a5fc0e658950bcb1383ea40fc9/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4d49542d626c75652e7376673f7374796c653d666c6174" alt="MIT License" data-canonical-src="https://img.shields.io/badge/license-MIT-blue.svg?style=flat" style="max-width: 100%;"></a> <a href="http://lib.haxe.org/p/msgpack-haxe" rel="nofollow"><img src="https://camo.githubusercontent.com/fc562dbc6ae0fcffaab642eec0df46ec3d446251985c29b78515ca0b60c3b23f/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f72656c656173652f6161756c69612f6d73677061636b2d686178652e7376673f7374796c653d666c6174266c6162656c3d686178656c6962" alt="Haxelib Version" data-canonical-src="https://img.shields.io/github/release/aaulia/msgpack-haxe.svg?style=flat&amp;label=haxelib" style="max-width: 100%;"></a></p>
<h5 dir="auto">
<a id="user-content-msgpack-haxe" class="anchor" aria-hidden="true" href="#msgpack-haxe"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack-haxe</h5>
<p dir="auto">MessagePack (<a href="http://msgpack.org" rel="nofollow">http://msgpack.org</a>) serialization library for Haxe</p>
<h6 dir="auto">
<a id="user-content-how-to-install" class="anchor" aria-hidden="true" href="#how-to-install"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How to install:</h6>
<p dir="auto">Simply use <code>haxelib git</code> to use this github repo or <code>haxelib install msgpack-haxe</code> to use the one in the haxelib repository.</p>
<h6 dir="auto">
<a id="user-content-supported-type" class="anchor" aria-hidden="true" href="#supported-type"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Supported Type:</h6>
<ul dir="auto">
<li>Null</li>
<li>Bool</li>
<li>Int</li>
<li>Float</li>
<li>Object</li>
<li>Bytes</li>
<li>String</li>
<li>Array</li>
<li>IntMap/StringMap</li>
</ul>
<h6 dir="auto">
<a id="user-content-example-code" class="anchor" aria-hidden="true" href="#example-code"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example code:</h6>
<div class="highlight highlight-source-hx notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='package;
import org.msgpack.MsgPack;

class Example {
    public static function main() {
        var i = { a: 1, b: 2, c: "Hello World!" };
        var m = MsgPack.encode(i);
        var o = MsgPack.decode(m);

        trace(i);
        trace(m.toHex());
        trace(o);
    }
}'><pre><span class="pl-k">package</span>;
<span class="pl-k">import</span> <span class="pl-c1">org</span>.<span class="pl-c1">msgpack</span>.<span class="pl-en">MsgPack</span>;

<span class="pl-k">class</span> <span class="pl-en">Example</span> {
    <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-k">function</span> <span class="pl-en">main</span>() {
        <span class="pl-k">var</span> <span class="pl-smi">i</span> <span class="pl-k">=</span> { <span class="pl-smi">a</span>: <span class="pl-c1">1</span>, <span class="pl-smi">b</span>: <span class="pl-c1">2</span>, <span class="pl-smi">c</span>: <span class="pl-s"><span class="pl-pds">"</span>Hello World!<span class="pl-pds">"</span></span> };
        <span class="pl-k">var</span> <span class="pl-smi">m</span> <span class="pl-k">=</span> <span class="pl-en">MsgPack</span>.<span class="pl-en">encode</span>(<span class="pl-smi">i</span>);
        <span class="pl-k">var</span> <span class="pl-smi">o</span> <span class="pl-k">=</span> <span class="pl-en">MsgPack</span>.<span class="pl-en">decode</span>(<span class="pl-smi">m</span>);

        <span class="pl-k">trace</span>(<span class="pl-smi">i</span>);
        <span class="pl-k">trace</span>(<span class="pl-smi">m</span>.<span class="pl-en">toHex</span>());
        <span class="pl-k">trace</span>(<span class="pl-smi">o</span>);
    }
}</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-jonghough-msgpack-j" class="qs"><h4><a href="https://github.com/jonghough/msgpack-j" target="_blank">jonghough/msgpack-j <span class="qs-url">https://github.com/jonghough/msgpack-j</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack-j" class="anchor" aria-hidden="true" href="#msgpack-j"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack-j</h5>
<p dir="auto">Implementation of the Message Pack serialization format in J.
###Usage
import into projects and open in jqt or other. It's very simple.</p>
<p dir="auto">###Examples
<code>pack</code> packs J types into a byte string. <code>unpack</code> reverses this.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  `pack 'hello world'`

     `hello world`

  `unpack hello world`

     `'hello world'`"><pre class="notranslate"><code>  `pack 'hello world'`

     `hello world`

  `unpack hello world`

     `'hello world'`
</code></pre></div>
<p dir="auto"><b><code>packObj</code></b> packs J types into a hex string (string literal). <b><code>unpackObj</code></b> reverses this.</p>
<p dir="auto">e.g.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="   `packObj 'Hello World'`

     `ab48656c6c6f20576f726c64`

  `unpackObj 'ab48656c6c6f20576f726c64'`

     `Hello World`"><pre class="notranslate"><code>   `packObj 'Hello World'`

     `ab48656c6c6f20576f726c64`

  `unpackObj 'ab48656c6c6f20576f726c64'`

     `Hello World`
</code></pre></div>
<p dir="auto">###More Usage
Example:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  `pack 2;4.67;'hello, world'`

     `@zGhello, world`

  `packObj 2;4.67;'hello, world'`

     `9302cb4012ae147ae147aeac68656c6c6f2c20776f726c64`"><pre class="notranslate"><code>  `pack 2;4.67;'hello, world'`

     `@zGhello, world`

  `packObj 2;4.67;'hello, world'`

     `9302cb4012ae147ae147aeac68656c6c6f2c20776f726c64`
</code></pre></div>
<p dir="auto">JSON representation:
<code>[2,4.67,"hello, world"]</code></p>
<p dir="auto">Example:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  `unpackObj '81a46461746183a2696401a673636f72657394cb400999999999999acb4016cccccccccccdcb40091eb851eb851fcb4007333333333333a56f7468657283a4736f6d65d1f2b8a46d6f7265ccc8a4646174610c'`"><pre class="notranslate"><code>  `unpackObj '81a46461746183a2696401a673636f72657394cb400999999999999acb4016cccccccccccdcb40091eb851eb851fcb4007333333333333a56f7468657283a4736f6d65d1f2b8a46d6f7265ccc8a4646174610c'`
</code></pre></div>
<p dir="auto">returns a nested dictionary.</p>
<p dir="auto">JSON representation:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='  `{"data":{"id":1,"scores":[3.2,5.7,3.14,2.9],"other":{"some":_3400,"more":200,"data":12}}}`'><pre class="notranslate"><code>  `{"data":{"id":1,"scores":[3.2,5.7,3.14,2.9],"other":{"some":_3400,"more":200,"data":12}}}`
</code></pre></div>
<p dir="auto">###Handling dictionary / hashmap datatypes</p>
<p dir="auto">Since J has no native Dictionary / Hashmap type, one has been implemented for the purposes of MsgPack serialization.</p>
<p dir="auto">Construction:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  `HM =: '' conew 'HashMap'`"><pre class="notranslate"><code>  `HM =: '' conew 'HashMap'`
</code></pre></div>
<p dir="auto">This will instantiate a new HashMap object.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  `set__HM 'key';'value'`"><pre class="notranslate"><code>  `set__HM 'key';'value'`
</code></pre></div>
<p dir="auto">This will add a key value pair to the dicitonary. Note the length of the boxed array argument must be two. i.e. if  the value is an array itself, then it must be boxed together before appending to the key value.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  `get__HM 'key'`"><pre class="notranslate"><code>  `get__HM 'key'`
</code></pre></div>
<p dir="auto">This will return the value for the given key, if one exists.</p>
<p dir="auto">To pack a HashMap:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  `packObj s: HM`"><pre class="notranslate"><code>  `packObj s: HM`
</code></pre></div>
<p dir="auto">Here HM is the HashMap reference name. It must be symbolized first, before packing. Furthermore, to add a HashMap as a value of another HashMap:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  `set__HM 'hashmapkey';s:HM2`"><pre class="notranslate"><code>  `set__HM 'hashmapkey';s:HM2`
</code></pre></div>
<p dir="auto">The inner HashMap reference (HM2) must be symbolized before adding to the dictionary. If you are adding a list of HashMaps to the parent HashMap:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  `set__HM 'key'; &lt;(s:HM2;s:HM3;s:HM4)`"><pre class="notranslate"><code>  `set__HM 'key'; &lt;(s:HM2;s:HM3;s:HM4)`
</code></pre></div>
<p dir="auto">Note the HashMap array is boxed so that the argument for <code>set</code> is of length two. Since the HashMap <code>HM</code> stores the reference to the child HashMaps as symbols, they must be desymbolized if retrieved. e.g.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  `ChildHM =: getHashmapFromValue_HashMap_ get__HM 'mychildHashMapkey'`"><pre class="notranslate"><code>  `ChildHM =: getHashmapFromValue_HashMap_ get__HM 'mychildHashMapkey'`
</code></pre></div>
<p dir="auto">Here, <b><code>getHashmapFromValue_HashMap_</code></b> ensures that the retrieved object is a reference to a hashmap, as is wanted.</p>
<p dir="auto">When unpacking data, assuming the root object is a dictionary / hashmap:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  `HM =: 5 s: unpackObj 'some serialized data'`"><pre class="notranslate"><code>  `HM =: 5 s: unpackObj 'some serialized data'`
</code></pre></div>
<p dir="auto"><b><code>5 s:</code></b> must be called to desymbolize the reference to the HashMap. Furthermore, all child HashMaps of <code>HM</code> must also be desymbolized too.</p>
<p dir="auto">`</p>
</article>
  </div>
        </div>
        
        <div id="qs-komamitsu-jackson-dataformat-msgpack" class="qs"><h4><a href="https://github.com/komamitsu/jackson-dataformat-msgpack" target="_blank">komamitsu/jackson-dataformat-msgpack <span class="qs-url">https://github.com/komamitsu/jackson-dataformat-msgpack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-jackson-dataformat-msgpack" class="anchor" aria-hidden="true" href="#jackson-dataformat-msgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>jackson-dataformat-msgpack</h5>
<p dir="auto"><strong>This project is merged to msgpack-java!!</strong> Yay!</p>
<p dir="auto"><strong>See <a href="https://github.com/msgpack/msgpack-java/blob/develop/msgpack-jackson/README.md">msgpack-java/msgpack-jackson</a> for the updated documents</strong></p>
<h5 dir="auto">
<a id="user-content-overview" class="anchor" aria-hidden="true" href="#overview"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Overview</h5>
<p dir="auto"><a href="https://travis-ci.org/komamitsu/jackson-dataformat-msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/335163a8b8830e113358e195eba500085959cefd39677e0dcad8983a539703ab/68747470733a2f2f7472617669732d63692e6f72672f6b6f6d616d697473752f6a61636b736f6e2d64617461666f726d61742d6d73677061636b2e737667" alt="Build Status" data-canonical-src="https://travis-ci.org/komamitsu/jackson-dataformat-msgpack.svg" style="max-width: 100%;"></a></p>
<p dir="auto">This Jackson extension library handles reading and writing of data encoded in <a href="http://msgpack.org/" rel="nofollow">MessagePack</a> data format.
It extends standard Jackson streaming API (<code>JsonFactory</code>, <code>JsonParser</code>, <code>JsonGenerator</code>), and as such works seamlessly with all the higher level data abstractions (data binding, tree model, and pluggable extensions).</p>
<h6 dir="auto">
<a id="user-content-maven-dependency" class="anchor" aria-hidden="true" href="#maven-dependency"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Maven dependency</h6>
<p dir="auto">To use this module on Maven-based projects, use following dependency:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&lt;dependency&gt;
  &lt;groupId&gt;org.komamitsu&lt;/groupId&gt;
  &lt;artifactId&gt;jackson-dataformat-msgpack&lt;/artifactId&gt;
  &lt;version&gt;0.0.3&lt;/version&gt;
&lt;/dependency&gt;"><pre class="notranslate"><code>&lt;dependency&gt;
  &lt;groupId&gt;org.komamitsu&lt;/groupId&gt;
  &lt;artifactId&gt;jackson-dataformat-msgpack&lt;/artifactId&gt;
  &lt;version&gt;0.0.3&lt;/version&gt;
&lt;/dependency&gt;
</code></pre></div>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<p dir="auto">Only thing you need to do is to instantiate MessagePackFactory and pass it to the constructor of ObjectMapper.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='  ObjectMapper objectMapper = new ObjectMapper(new MessagePackFactory());
  ExamplePojo orig = new ExamplePojo("komamitsu");
  byte[] bytes = objectMapper.writeValueAsBytes(orig);
  ExamplePojo value = objectMapper.readValue(bytes, ExamplePojo.class);
  System.out.println(value.getName()); // =&gt; komamitsu'><pre class="notranslate"><code>  ObjectMapper objectMapper = new ObjectMapper(new MessagePackFactory());
  ExamplePojo orig = new ExamplePojo("komamitsu");
  byte[] bytes = objectMapper.writeValueAsBytes(orig);
  ExamplePojo value = objectMapper.readValue(bytes, ExamplePojo.class);
  System.out.println(value.getName()); // =&gt; komamitsu
</code></pre></div>
<p dir="auto">Also, you can exchange data among multiple languages.</p>
<p dir="auto">Java</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='  // Serialize
  Map&lt;String, Object&gt; obj = new HashMap&lt;String, Object&gt;();
  obj.put("foo", "hello");
  obj.put("bar", "world");
  byte[] bs = objectMapper.writeValueAsBytes(obj);
  // bs =&gt; [-126, -93, 102, 111, 111, -91, 104, 101, 108, 108, 111,
  //        -93, 98, 97, 114, -91, 119, 111, 114, 108, 100]'><pre class="notranslate"><code>  // Serialize
  Map&lt;String, Object&gt; obj = new HashMap&lt;String, Object&gt;();
  obj.put("foo", "hello");
  obj.put("bar", "world");
  byte[] bs = objectMapper.writeValueAsBytes(obj);
  // bs =&gt; [-126, -93, 102, 111, 111, -91, 104, 101, 108, 108, 111,
  //        -93, 98, 97, 114, -91, 119, 111, 114, 108, 100]
</code></pre></div>
<p dir="auto">Ruby</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  require 'msgpack'

  # Deserialize
  xs = [-126, -93, 102, 111, 111, -91, 104, 101, 108, 108, 111,
        -93, 98, 97, 114, -91, 119, 111, 114, 108, 100]
  MessagePack.unpack(xs.pack(&quot;C*&quot;))
  # =&gt; {&quot;foo&quot;=&gt;&quot;hello&quot;, &quot;bar&quot;=&gt;&quot;world&quot;}

  # Serialize
  [&quot;zero&quot;, 1, 2.0, nil].to_msgpack.unpack('C*')
  # =&gt; [148, 164, 122, 101, 114, 111, 1, 203, 64, 0, 0, 0, 0, 0, 0, 0, 192]"><pre class="notranslate"><code>  require 'msgpack'

  # Deserialize
  xs = [-126, -93, 102, 111, 111, -91, 104, 101, 108, 108, 111,
        -93, 98, 97, 114, -91, 119, 111, 114, 108, 100]
  MessagePack.unpack(xs.pack("C*"))
  # =&gt; {"foo"=&gt;"hello", "bar"=&gt;"world"}

  # Serialize
  ["zero", 1, 2.0, nil].to_msgpack.unpack('C*')
  # =&gt; [148, 164, 122, 101, 114, 111, 1, 203, 64, 0, 0, 0, 0, 0, 0, 0, 192]
</code></pre></div>
<p dir="auto">Java</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  // Deserialize
  bs = new byte[] {(byte) 148, (byte) 164, 122, 101, 114, 111, 1,
                   (byte) 203, 64, 0, 0, 0, 0, 0, 0, 0, (byte) 192};
  TypeReference&lt;List&lt;Object&gt;&gt; typeReference = new TypeReference&lt;List&lt;Object&gt;&gt;(){};
  List&lt;Object&gt; xs = objectMapper.readValue(bs, typeReference);
  // xs =&gt; [zero, 1, 2.0, null]"><pre class="notranslate"><code>  // Deserialize
  bs = new byte[] {(byte) 148, (byte) 164, 122, 101, 114, 111, 1,
                   (byte) 203, 64, 0, 0, 0, 0, 0, 0, 0, (byte) 192};
  TypeReference&lt;List&lt;Object&gt;&gt; typeReference = new TypeReference&lt;List&lt;Object&gt;&gt;(){};
  List&lt;Object&gt; xs = objectMapper.readValue(bs, typeReference);
  // xs =&gt; [zero, 1, 2.0, null]
</code></pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-java" class="qs"><h4><a href="https://github.com/msgpack/msgpack-java" target="_blank">msgpack/msgpack-java <span class="qs-url">https://github.com/msgpack/msgpack-java</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack-for-java" class="anchor" aria-hidden="true" href="#messagepack-for-java"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack for Java</h5>
<p dir="auto"><a href="http://msgpack.org" rel="nofollow">MessagePack</a> is a binary serialization format. If you need a fast and compact alternative of JSON, MessagePack is your friend. For example, a small integer can be encoded in a single byte, and short strings only need a single byte prefix + the original byte array. MessagePack implementation is already available in various languages (See also the list in <a href="http://msgpack.org" rel="nofollow">http://msgpack.org</a>) and works as a universal data format.</p>
<ul dir="auto">
<li>Message Pack specification: <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">https://github.com/msgpack/msgpack/blob/master/spec.md</a>
</li>
</ul>
<p dir="auto">MessagePack v7 (or later) is a faster implementation of the previous version <a href="https://github.com/msgpack/msgpack-java/tree/v06">v06</a>, and
supports all of the message pack types, including <a href="https://github.com/msgpack/msgpack/blob/master/spec.md#formats-ext">extension format</a>.</p>
<p dir="auto"><a href="https://www.javadoc.io/doc/org.msgpack/msgpack-core" rel="nofollow">JavaDoc is available at javadoc.io</a>.</p>
<h6 dir="auto">
<a id="user-content-quick-start" class="anchor" aria-hidden="true" href="#quick-start"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Quick Start</h6>
<p dir="auto"><a href="https://maven-badges.herokuapp.com/maven-central/org.msgpack/msgpack-core/" rel="nofollow"><img src="https://camo.githubusercontent.com/3aeba2442e2dd78ee2c3820d6a9cf54d72ad564cf54a0ab8a2f7f251e81e5c91/68747470733a2f2f6d6176656e2d6261646765732e6865726f6b756170702e636f6d2f6d6176656e2d63656e7472616c2f6f72672e6d73677061636b2f6d73677061636b2d636f72652f62616467652e737667" alt="Maven Central" data-canonical-src="https://maven-badges.herokuapp.com/maven-central/org.msgpack/msgpack-core/badge.svg" style="max-width: 100%;"></a>
<a href="https://www.javadoc.io/doc/org.msgpack/msgpack-core" rel="nofollow"><img src="https://camo.githubusercontent.com/29a28f78028d8f93eb55c218aec316dcaff49f3243d8601b024454e24037f09e/68747470733a2f2f6a617661646f632e696f2f62616467652f6f72672e6d73677061636b2f6d73677061636b2d636f72652e737667" alt="Javadoc" data-canonical-src="https://javadoc.io/badge/org.msgpack/msgpack-core.svg" style="max-width: 100%;"></a></p>
<p dir="auto">For Maven users:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&lt;dependency&gt;
   &lt;groupId&gt;org.msgpack&lt;/groupId&gt;
   &lt;artifactId&gt;msgpack-core&lt;/artifactId&gt;
   &lt;version&gt;(version)&lt;/version&gt;
&lt;/dependency&gt;"><pre class="notranslate"><code>&lt;dependency&gt;
   &lt;groupId&gt;org.msgpack&lt;/groupId&gt;
   &lt;artifactId&gt;msgpack-core&lt;/artifactId&gt;
   &lt;version&gt;(version)&lt;/version&gt;
&lt;/dependency&gt;
</code></pre></div>
<p dir="auto">For sbt users:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='libraryDependencies += "org.msgpack" % "msgpack-core" % "(version)"'><pre class="notranslate"><code>libraryDependencies += "org.msgpack" % "msgpack-core" % "(version)"
</code></pre></div>
<p dir="auto">For gradle users:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="repositories {
    mavenCentral()
}

dependencies {
    compile 'org.msgpack:msgpack-core:(version)'
}"><pre class="notranslate"><code>repositories {
    mavenCentral()
}

dependencies {
    compile 'org.msgpack:msgpack-core:(version)'
}
</code></pre></div>
<ul dir="auto">
<li><a href="https://github.com/msgpack/msgpack-java/blob/develop/msgpack-core/src/test/java/org/msgpack/core/example/MessagePackExample.java">Usage examples</a></li>
</ul>
<h7 dir="auto">
<a id="user-content-integration-with-jackson-objectmapper-jackson-databind" class="anchor" aria-hidden="true" href="#integration-with-jackson-objectmapper-jackson-databind"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Integration with Jackson ObjectMapper (jackson-databind)</h7>
<p dir="auto">msgpack-java supports serialization and deserialization of Java objects through <a href="https://github.com/FasterXML/jackson-databind">jackson-databind</a>.
For details, see <a href="https://github.com/msgpack/msgpack-java/blob/develop/msgpack-jackson/README.md">msgpack-jackson/README.md</a>. The template-based serialization mechanism used in v06 is deprecated.</p>
<ul dir="auto">
<li><a href="https://github.com/msgpack/msgpack-java/blob/develop/RELEASE_NOTES.md">Release Notes</a></li>
</ul>
<h6 dir="auto">
<a id="user-content-for-messagepack-developers-" class="anchor" aria-hidden="true" href="#for-messagepack-developers-"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>For MessagePack Developers <a href="https://travis-ci.org/msgpack/msgpack-java" rel="nofollow"><img src="https://camo.githubusercontent.com/6ca3edc340f2e9cd3a06b681db5a12965d43a458dc21b438c7cfc611ccc37010/68747470733a2f2f7472617669732d63692e6f72672f6d73677061636b2f6d73677061636b2d6a6176612e7376673f6272616e63683d7630372d646576656c6f70" alt="Travis CI" data-canonical-src="https://travis-ci.org/msgpack/msgpack-java.svg?branch=v07-develop" style="max-width: 100%;"></a>
</h6>
<p dir="auto">msgpack-java uses <a href="http://www.scala-sbt.org/" rel="nofollow">sbt</a> for building the projects. For the basic usage of sbt, see:</p>
<ul dir="auto">
<li><a href="http://xerial.org/blog/2014/03/24/sbt/" rel="nofollow">Building Java projects with sbt</a></li>
</ul>
<p dir="auto">Coding style</p>
<ul dir="auto">
<li>msgpack-java uses <a href="https://github.com/airlift/codestyle">the same coding style</a> with Facebook Presto</li>
<li><a href="https://raw.githubusercontent.com/airlift/codestyle/master/IntelliJIdea14/Airlift.xml" rel="nofollow">IntelliJ setting file</a></li>
</ul>
<h7 dir="auto">
<a id="user-content-basic-sbt-commands" class="anchor" aria-hidden="true" href="#basic-sbt-commands"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Basic sbt commands</h7>
<p dir="auto">Enter the sbt console:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ ./sbt"><pre class="notranslate"><code>$ ./sbt
</code></pre></div>
<p dir="auto">Here is a list of sbt commands for daily development:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt; ~compile                                 # Compile source codes
&gt; ~test:compile                            # Compile both source and test codes
&gt; ~test                                    # Run tests upon source code change
&gt; ~testOnly *MessagePackTest               # Run tests in the specified class
&gt; ~testOnly *MessagePackTest -- (pattern)  # Run tests matching the pattern 
&gt; project msgpack-core                     # Focus on a specific project
&gt; package                                  # Create a jar file in the target folder of each project
&gt; findbugs                                 # Produce findbugs report in target/findbugs
&gt; jacoco:cover                             # Report the code coverage of tests to target/jacoco folder
&gt; jcheckStyle                              # Run check style
&gt; ;scalafmt;test:scalafmt;scalafmtSbt      # Reformat Scala codes"><pre class="notranslate"><code>&gt; ~compile                                 # Compile source codes
&gt; ~test:compile                            # Compile both source and test codes
&gt; ~test                                    # Run tests upon source code change
&gt; ~testOnly *MessagePackTest               # Run tests in the specified class
&gt; ~testOnly *MessagePackTest -- (pattern)  # Run tests matching the pattern 
&gt; project msgpack-core                     # Focus on a specific project
&gt; package                                  # Create a jar file in the target folder of each project
&gt; findbugs                                 # Produce findbugs report in target/findbugs
&gt; jacoco:cover                             # Report the code coverage of tests to target/jacoco folder
&gt; jcheckStyle                              # Run check style
&gt; ;scalafmt;test:scalafmt;scalafmtSbt      # Reformat Scala codes
</code></pre></div>
<h7 dir="auto">
<a id="user-content-publishing" class="anchor" aria-hidden="true" href="#publishing"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Publishing</h7>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt; publishLocal            # Install to local .ivy2 repository
&gt; publishM2               # Install to local .m2 Maven repository
&gt; publish                 # Publishing a snapshot version to the Sonatype repository"><pre class="notranslate"><code>&gt; publishLocal            # Install to local .ivy2 repository
&gt; publishM2               # Install to local .m2 Maven repository
&gt; publish                 # Publishing a snapshot version to the Sonatype repository
</code></pre></div>
<h7 dir="auto">
<a id="user-content-publish-to-sonatype-maven-central" class="anchor" aria-hidden="true" href="#publish-to-sonatype-maven-central"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Publish to Sonatype (Maven Central)</h7>
<p dir="auto">To publish a new version, you only need to add a new git tag and push it to GitHub. GitHub Action will deploy a new release version to Maven Central (Sonatype).</p>
<div class="highlight highlight-source-scala notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ git tag v0.x.y
$ git push origin v0.x.y"><pre>$ git tag v0.x.y
$ git push origin v0.x.y</pre></div>
<p dir="auto">To generate a release notes, you can use this command line:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ git log v(last version).. --oneline | cut -f 2- -d ' ' | perl -npe 's/(.*)\(\#([0-9]+)\)/* \1\[\#\2\]\(http:\/\/github.com\/msgpack\/msgpack-java\/pull\/\2\)/g'"><pre class="notranslate"><code>$ git log v(last version).. --oneline | cut -f 2- -d ' ' | perl -npe 's/(.*)\(\#([0-9]+)\)/* \1\[\#\2\]\(http:\/\/github.com\/msgpack\/msgpack-java\/pull\/\2\)/g'
</code></pre></div>
<h8 dir="auto">
<a id="user-content-publishing-to-sonatype-from-local-machine" class="anchor" aria-hidden="true" href="#publishing-to-sonatype-from-local-machine"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Publishing to Sonatype from Local Machine</h8>
<p dir="auto">If you need to publish to Maven central using a local machine, you need to configure <a href="https://github.com/xerial/sbt-sonatype">sbt-sonatype</a> plugin. First set Sonatype account information (user name and password) in the global sbt settings. To protect your password, never include this file in your project.</p>
<p dir="auto"><em><strong>$HOME/.sbt/(sbt-version)/sonatype.sbt</strong></em></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='credentials += Credentials("Sonatype Nexus Repository Manager",
        "oss.sonatype.org",
        "(Sonatype user name)",
        "(Sonatype password)")'><pre class="notranslate"><code>credentials += Credentials("Sonatype Nexus Repository Manager",
        "oss.sonatype.org",
        "(Sonatype user name)",
        "(Sonatype password)")
</code></pre></div>
<p dir="auto">You may also need to configure GPG. See the instruction in <a href="https://github.com/sbt/sbt-pgp">sbt-pgp</a>.</p>
<p dir="auto">Then, run <code>publishedSigned</code> followed by <code>sonatypeBundleRelease</code>:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="# [optional] When you need to perform the individual release steps manually, use the following commands:
&gt; publishSigned           # Publish GPG signed artifacts to the Sonatype repository
&gt; sonatypeBundleRelease   # Publish to the Maven Central (It will be synched within less than 4 hours)"><pre class="notranslate"><code># [optional] When you need to perform the individual release steps manually, use the following commands:
&gt; publishSigned           # Publish GPG signed artifacts to the Sonatype repository
&gt; sonatypeBundleRelease   # Publish to the Maven Central (It will be synched within less than 4 hours)
</code></pre></div>
<p dir="auto">If some sporadic error happens (e.g., Sonatype timeout), rerun <code>sonatypeBundleRelease</code> again.</p>
<h7 dir="auto">
<a id="user-content-project-structure" class="anchor" aria-hidden="true" href="#project-structure"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Project Structure</h7>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="msgpack-core                 # Contains packer/unpacker implementation that never uses third-party libraries
msgpack-jackson              # Contains jackson-dataformat-java implementation"><pre class="notranslate"><code>msgpack-core                 # Contains packer/unpacker implementation that never uses third-party libraries
msgpack-jackson              # Contains jackson-dataformat-java implementation
</code></pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-javascript" class="qs"><h4><a href="https://msgpack.org/" target="_blank">msgpack/msgpack-javascript <span class="qs-url">https://msgpack.org/</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack-for-javascriptecma-262--" class="anchor" aria-hidden="true" href="#messagepack-for-javascriptecma-262--"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack for JavaScript/ECMA-262  </h5>
<p dir="auto"><a href="https://www.npmjs.com/package/@msgpack/msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/66cb71ffd0fac1adb6bbaf2ece2a895086a6678b30549c1ce9b5f682813b57d7/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f762f406d73677061636b2f6d73677061636b2e737667" alt="npm version" data-canonical-src="https://img.shields.io/npm/v/@msgpack/msgpack.svg" style="max-width: 100%;"></a> <a target="_blank" rel="noopener noreferrer" href="https://github.com/msgpack/msgpack-javascript/workflows/CI/badge.svg"><img src="https://github.com/msgpack/msgpack-javascript/workflows/CI/badge.svg" alt="CI" style="max-width: 100%;"></a> <a href="https://codecov.io/gh/msgpack/msgpack-javascript" rel="nofollow"><img src="https://camo.githubusercontent.com/89598e8133168947124cc95fd32c042f9e579487b56d4056192205d25e4c3cd3/68747470733a2f2f636f6465636f762e696f2f67682f6d73677061636b2f6d73677061636b2d6a6176617363726970742f6272616e63682f6d61737465722f6772617068732f62616467652e737667" alt="codecov" data-canonical-src="https://codecov.io/gh/msgpack/msgpack-javascript/branch/master/graphs/badge.svg" style="max-width: 100%;"></a> <a href="https://bundlephobia.com/result?p=@msgpack/msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/303cc840988faab6ddb63ab8e4af105ae6458f59df675c6c4114bc2c9a81583c/68747470733a2f2f62616467656e2e6e65742f62756e646c6570686f6269612f6d696e7a69702f406d73677061636b2f6d73677061636b" alt="minzip" data-canonical-src="https://badgen.net/bundlephobia/minzip/@msgpack/msgpack" style="max-width: 100%;"></a> <a href="https://bundlephobia.com/result?p=@msgpack/msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/9e761c8202917adef2f2b6203625ebcf6d141e6f348ccbfc88c66835ce9100b3/68747470733a2f2f62616467656e2e6e65742f62756e646c6570686f6269612f747265652d7368616b696e672f406d73677061636b2f6d73677061636b" alt="tree-shaking" data-canonical-src="https://badgen.net/bundlephobia/tree-shaking/@msgpack/msgpack" style="max-width: 100%;"></a></p>
<p dir="auto">This is a JavaScript/ECMA-262 implementation of <strong>MessagePack</strong>, an efficient binary serilization format:</p>
<p dir="auto"><a href="https://msgpack.org/" rel="nofollow">https://msgpack.org/</a></p>
<p dir="auto">This library is a universal JavaScript, meaning it is compatible with all the major browsers and NodeJS. In addition, because it is implemented in <a href="https://www.typescriptlang.org/" rel="nofollow">TypeScript</a>, type definition files (<code>d.ts</code>) are always up-to-date and bundled in the distribution.</p>
<p dir="auto"><em>Note that this is the second version of MessagePack for JavaScript. The first version, which was implemented in ES5 and was never released to npmjs.com, is tagged as <a href="https://github.com/msgpack/msgpack-javascript/tree/classic">classic</a>.</em></p>
<h6 dir="auto">
<a id="user-content-synopsis" class="anchor" aria-hidden="true" href="#synopsis"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Synopsis</h6>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import { deepStrictEqual } from "assert";
import { encode, decode } from "@msgpack/msgpack";

const object = {
  nil: null,
  integer: 1,
  float: Math.PI,
  string: "Hello, world!",
  binary: Uint8Array.from([1, 2, 3]),
  array: [10, 20, 30],
  map: { foo: "bar" },
  timestampExt: new Date(),
};

const encoded: Uint8Array = encode(object);

deepStrictEqual(decode(encoded), object);'><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">deepStrictEqual</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"assert"</span><span class="pl-kos">;</span>
<span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">encode</span><span class="pl-kos">,</span> <span class="pl-s1">decode</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"@msgpack/msgpack"</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">object</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
  <span class="pl-c1">nil</span>: <span class="pl-c1">null</span><span class="pl-kos">,</span>
  <span class="pl-c1">integer</span>: <span class="pl-c1">1</span><span class="pl-kos">,</span>
  <span class="pl-c1">float</span>: <span class="pl-smi">Math</span><span class="pl-kos">.</span><span class="pl-c1">PI</span><span class="pl-kos">,</span>
  <span class="pl-c1">string</span>: <span class="pl-s">"Hello, world!"</span><span class="pl-kos">,</span>
  <span class="pl-c1">binary</span>: <span class="pl-smi">Uint8Array</span><span class="pl-kos">.</span><span class="pl-en">from</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-c1">1</span><span class="pl-kos">,</span> <span class="pl-c1">2</span><span class="pl-kos">,</span> <span class="pl-c1">3</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
  <span class="pl-c1">array</span>: <span class="pl-kos">[</span><span class="pl-c1">10</span><span class="pl-kos">,</span> <span class="pl-c1">20</span><span class="pl-kos">,</span> <span class="pl-c1">30</span><span class="pl-kos">]</span><span class="pl-kos">,</span>
  <span class="pl-c1">map</span>: <span class="pl-kos">{</span> <span class="pl-c1">foo</span>: <span class="pl-s">"bar"</span> <span class="pl-kos">}</span><span class="pl-kos">,</span>
  <span class="pl-c1">timestampExt</span>: <span class="pl-k">new</span> <span class="pl-smi">Date</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
<span class="pl-kos">}</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">encoded</span>: <span class="pl-smi">Uint8Array</span> <span class="pl-c1">=</span> <span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-s1">object</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-en">deepStrictEqual</span><span class="pl-kos">(</span><span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-s1">encoded</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-s1">object</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h6 dir="auto">
<a id="user-content-table-of-contents" class="anchor" aria-hidden="true" href="#table-of-contents"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Table of Contents</h6>
<ul dir="auto">
<li><a href="#synopsis">Synopsis</a></li>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#install">Install</a></li>
<li>
<a href="#api">API</a>
<ul dir="auto">
<li>
<a href="#encodedata-unknown-options-encodeoptions-uint8array"><code>encode(data: unknown, options?: EncodeOptions): Uint8Array</code></a>
<ul dir="auto">
<li><a href="#encodeoptions"><code>EncodeOptions</code></a></li>
</ul>
</li>
<li>
<a href="#decodebuffer-arraylikenumber--buffersource-options-decodeoptions-unknown"><code>decode(buffer: ArrayLike&lt;number&gt; | BufferSource, options?: DecodeOptions): unknown</code></a>
<ul dir="auto">
<li><a href="#decodeoptions"><code>DecodeOptions</code></a></li>
</ul>
</li>
<li><a href="#decodemultibuffer-arraylikenumber--buffersource-options-decodeoptions-generatorunknown-void-unknown"><code>decodeMulti(buffer: ArrayLike&lt;number&gt; | BufferSource, options?: DecodeOptions): Generator&lt;unknown, void, unknown&gt;</code></a></li>
<li><a href="#decodeasyncstream-readablestreamlikearraylikenumber--buffersource-options-decodeasyncoptions-promiseunknown"><code>decodeAsync(stream: ReadableStreamLike&lt;ArrayLike&lt;number&gt; | BufferSource&gt;, options?: DecodeAsyncOptions): Promise&lt;unknown&gt;</code></a></li>
<li><a href="#decodearraystreamstream-readablestreamlikearraylikenumber--buffersource-options-decodeasyncoptions-asynciterableunknown"><code>decodeArrayStream(stream: ReadableStreamLike&lt;ArrayLike&lt;number&gt; | BufferSource&gt;, options?: DecodeAsyncOptions): AsyncIterable&lt;unknown&gt;</code></a></li>
<li><a href="#decodemultistreamstream-readablestreamlikearraylikenumber--buffersource-options-decodeasyncoptions-asynciterableunknown"><code>decodeMultiStream(stream: ReadableStreamLike&lt;ArrayLike&lt;number&gt; | BufferSource&gt;, options?: DecodeAsyncOptions): AsyncIterable&lt;unknown&gt;</code></a></li>
<li><a href="#reusing-encoder-and-decoder-instances">Reusing Encoder and Decoder instances</a></li>
</ul>
</li>
<li>
<a href="#extension-types">Extension Types</a>
<ul dir="auto">
<li><a href="#extensioncodec-context">ExtensionCodec context</a></li>
<li><a href="#handling-bigint-with-extensioncodec">Handling BigInt with ExtensionCodec</a></li>
<li><a href="#the-temporal-module-as-timestamp-extensions">The temporal module as timestamp extensions</a></li>
</ul>
</li>
<li><a href="#decoding-a-blob">Decoding a Blob</a></li>
<li>
<a href="#messagepack-specification">MessagePack Specification</a>
<ul dir="auto">
<li><a href="#messagepack-mapping-table">MessagePack Mapping Table</a></li>
</ul>
</li>
<li>
<a href="#prerequisites">Prerequisites</a>
<ul dir="auto">
<li><a href="#ecma-262">ECMA-262</a></li>
<li><a href="#nodejs">NodeJS</a></li>
<li><a href="#typescript-compiler--type-definitions">TypeScript Compiler / Type Definitions</a></li>
</ul>
</li>
<li><a href="#benchmark">Benchmark</a></li>
<li>
<a href="#distribution">Distribution</a>
<ul dir="auto">
<li><a href="#npm--npmjscom">NPM / npmjs.com</a></li>
<li><a href="#cdn--unpkgcom">CDN / unpkg.com</a></li>
</ul>
</li>
<li><a href="#deno-support">Deno Support</a></li>
<li>
<a href="#maintenance">Maintenance</a>
<ul dir="auto">
<li><a href="#testing">Testing</a></li>
<li><a href="#continuous-integration">Continuous Integration</a></li>
<li><a href="#release-engineering">Release Engineering</a></li>
<li><a href="#updating-dependencies">Updating Dependencies</a></li>
</ul>
</li>
<li><a href="#license">License</a></li>
</ul>
<h6 dir="auto">
<a id="user-content-install" class="anchor" aria-hidden="true" href="#install"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install</h6>
<p dir="auto">This library is published to <code>npmjs.com</code> as <a href="https://www.npmjs.com/package/@msgpack/msgpack" rel="nofollow">@msgpack/msgpack</a>.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="npm install @msgpack/msgpack"><pre>npm install @msgpack/msgpack</pre></div>
<h6 dir="auto">
<a id="user-content-api" class="anchor" aria-hidden="true" href="#api"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>API</h6>
<h7 dir="auto">
<a id="user-content-encodedata-unknown-options-encodeoptions-uint8array" class="anchor" aria-hidden="true" href="#encodedata-unknown-options-encodeoptions-uint8array"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>encode(data: unknown, options?: EncodeOptions): Uint8Array</code>
</h7>
<p dir="auto">It encodes <code>data</code> into a single MessagePack-encoded object, and returns a byte array as <code>Uint8Array</code>. It throws errors if <code>data</code> is, or includes, a non-serializable object such as a <code>function</code> or a <code>symbol</code>.</p>
<p dir="auto">for example:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import { encode } from "@msgpack/msgpack";

const encoded: Uint8Array = encode({ foo: "bar" });
console.log(encoded);'><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">encode</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"@msgpack/msgpack"</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">encoded</span>: <span class="pl-smi">Uint8Array</span> <span class="pl-c1">=</span> <span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">foo</span>: <span class="pl-s">"bar"</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s1">encoded</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">If you'd like to convert an <code>uint8array</code> to a NodeJS <code>Buffer</code>, use <code>Buffer.from(arrayBuffer, offset, length)</code> in order not to copy the underlying <code>ArrayBuffer</code>, while <code>Buffer.from(uint8array)</code> copies it:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import { encode } from "@msgpack/msgpack";

const encoded: Uint8Array = encode({ foo: "bar" });

// `buffer` refers the same ArrayBuffer as `encoded`.
const buffer: Buffer = Buffer.from(encoded.buffer, encoded.byteOffset, encoded.byteLength);
console.log(buffer);'><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">encode</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"@msgpack/msgpack"</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">encoded</span>: <span class="pl-smi">Uint8Array</span> <span class="pl-c1">=</span> <span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">foo</span>: <span class="pl-s">"bar"</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// `buffer` refers the same ArrayBuffer as `encoded`.</span>
<span class="pl-k">const</span> <span class="pl-s1">buffer</span>: <span class="pl-smi">Buffer</span> <span class="pl-c1">=</span> <span class="pl-smi">Buffer</span><span class="pl-kos">.</span><span class="pl-en">from</span><span class="pl-kos">(</span><span class="pl-s1">encoded</span><span class="pl-kos">.</span><span class="pl-c1">buffer</span><span class="pl-kos">,</span> <span class="pl-s1">encoded</span><span class="pl-kos">.</span><span class="pl-c1">byteOffset</span><span class="pl-kos">,</span> <span class="pl-s1">encoded</span><span class="pl-kos">.</span><span class="pl-c1">byteLength</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s1">buffer</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h8 dir="auto">
<a id="user-content-encodeoptions" class="anchor" aria-hidden="true" href="#encodeoptions"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>EncodeOptions</code>
</h8>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>extensionCodec</td>
<td>ExtensionCodec</td>
<td><code>ExtensionCodec.defaultCodec</code></td>
</tr>
<tr>
<td>maxDepth</td>
<td>number</td>
<td><code>100</code></td>
</tr>
<tr>
<td>initialBufferSize</td>
<td>number</td>
<td><code>2048</code></td>
</tr>
<tr>
<td>sortKeys</td>
<td>boolean</td>
<td>false</td>
</tr>
<tr>
<td>forceFloat32</td>
<td>boolean</td>
<td>false</td>
</tr>
<tr>
<td>forceIntegerToFloat</td>
<td>boolean</td>
<td>false</td>
</tr>
<tr>
<td>ignoreUndefined</td>
<td>boolean</td>
<td>false</td>
</tr>
<tr>
<td>context</td>
<td>user-defined</td>
<td>-</td>
</tr>
</tbody>
</table>
<h7 dir="auto">
<a id="user-content-decodebuffer-arraylikenumber--buffersource-options-decodeoptions-unknown" class="anchor" aria-hidden="true" href="#decodebuffer-arraylikenumber--buffersource-options-decodeoptions-unknown"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>decode(buffer: ArrayLike&lt;number&gt; | BufferSource, options?: DecodeOptions): unknown</code>
</h7>
<p dir="auto">It decodes <code>buffer</code> that includes a MessagePack-encoded object, and returns the decoded object typed <code>unknown</code>.</p>
<p dir="auto"><code>buffer</code> must be an array of bytes, which is typically <code>Uint8Array</code> or <code>ArrayBuffer</code>. <code>BufferSource</code> is defined as <code>ArrayBuffer | ArrayBufferView</code>.</p>
<p dir="auto">The <code>buffer</code> must include a single encoded object. If the <code>buffer</code> includes extra bytes after an object or the <code>buffer</code> is empty, it throws <code>RangeError</code>. To decode <code>buffer</code> that includes multiple encoded objects, use <code>decodeMulti()</code> or <code>decodeMultiStream()</code> (recommended) instead.</p>
<p dir="auto">for example:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import { decode } from "@msgpack/msgpack";

const encoded: Uint8Array;
const object = decode(encoded);
console.log(object);'><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">decode</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"@msgpack/msgpack"</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">encoded</span>: <span class="pl-smi">Uint8Array</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-s1">object</span> <span class="pl-c1">=</span> <span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-s1">encoded</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s1">object</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">NodeJS <code>Buffer</code> is also acceptable because it is a subclass of <code>Uint8Array</code>.</p>
<h8 dir="auto">
<a id="user-content-decodeoptions" class="anchor" aria-hidden="true" href="#decodeoptions"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>DecodeOptions</code>
</h8>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>extensionCodec</td>
<td>ExtensionCodec</td>
<td><code>ExtensionCodec.defaultCodec</code></td>
</tr>
<tr>
<td>maxStrLength</td>
<td>number</td>
<td>
<code>4_294_967_295</code> (UINT32_MAX)</td>
</tr>
<tr>
<td>maxBinLength</td>
<td>number</td>
<td>
<code>4_294_967_295</code> (UINT32_MAX)</td>
</tr>
<tr>
<td>maxArrayLength</td>
<td>number</td>
<td>
<code>4_294_967_295</code> (UINT32_MAX)</td>
</tr>
<tr>
<td>maxMapLength</td>
<td>number</td>
<td>
<code>4_294_967_295</code> (UINT32_MAX)</td>
</tr>
<tr>
<td>maxExtLength</td>
<td>number</td>
<td>
<code>4_294_967_295</code> (UINT32_MAX)</td>
</tr>
<tr>
<td>context</td>
<td>user-defined</td>
<td>-</td>
</tr>
</tbody>
</table>
<p dir="auto">You can use <code>max${Type}Length</code> to limit the length of each type decoded.</p>
<h7 dir="auto">
<a id="user-content-decodemultibuffer-arraylikenumber--buffersource-options-decodeoptions-generatorunknown-void-unknown" class="anchor" aria-hidden="true" href="#decodemultibuffer-arraylikenumber--buffersource-options-decodeoptions-generatorunknown-void-unknown"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>decodeMulti(buffer: ArrayLike&lt;number&gt; | BufferSource, options?: DecodeOptions): Generator&lt;unknown, void, unknown&gt;</code>
</h7>
<p dir="auto">It decodes <code>buffer</code> that includes multiple MessagePack-encoded objects, and returns decoded objects as a generator. See also <code>decodeMultiStream()</code>, which is an asynchronous variant of this function.</p>
<p dir="auto">This function is not recommended to decode a MessagePack binary via I/O stream including sockets because it's synchronous. Instead, <code>decodeMultiStream()</code> decodes a binary stream asynchronously, typically spending less CPU and memory.</p>
<p dir="auto">for example:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import { decode } from "@msgpack/msgpack";

const encoded: Uint8Array;

for (const object of decodeMulti(encoded)) {
  console.log(object);
}'><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">decode</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"@msgpack/msgpack"</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">encoded</span>: <span class="pl-smi">Uint8Array</span><span class="pl-kos">;</span>

<span class="pl-k">for</span> <span class="pl-kos">(</span><span class="pl-k">const</span> <span class="pl-s1">object</span> <span class="pl-k">of</span> <span class="pl-en">decodeMulti</span><span class="pl-kos">(</span><span class="pl-s1">encoded</span><span class="pl-kos">)</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
  <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s1">object</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span></pre></div>
<h7 dir="auto">
<a id="user-content-decodeasyncstream-readablestreamlikearraylikenumber--buffersource-options-decodeasyncoptions-promiseunknown" class="anchor" aria-hidden="true" href="#decodeasyncstream-readablestreamlikearraylikenumber--buffersource-options-decodeasyncoptions-promiseunknown"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>decodeAsync(stream: ReadableStreamLike&lt;ArrayLike&lt;number&gt; | BufferSource&gt;, options?: DecodeAsyncOptions): Promise&lt;unknown&gt;</code>
</h7>
<p dir="auto">It decodes <code>stream</code>, where <code>ReadableStreamLike&lt;T&gt;</code> is defined as <code>ReadableStream&lt;T&gt; | AsyncIterable&lt;T&gt;</code>, in an async iterable of byte arrays, and returns decoded object as <code>unknown</code> type, wrapped in <code>Promise</code>.</p>
<p dir="auto">This function works asynchronously, and might CPU resources more efficiently compared with synchronous <code>decode()</code>, because it doesn't wait for the completion of downloading.</p>
<p dir="auto"><code>DecodeAsyncOptions</code> is the same as <code>DecodeOptions</code> for <code>decode()</code>.</p>
<p dir="auto">This function is designed to work with whatwg <code>fetch()</code> like this:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import { decodeAsync } from "@msgpack/msgpack";

const MSGPACK_TYPE = "application/x-msgpack";

const response = await fetch(url);
const contentType = response.headers.get("Content-Type");
if (contentType &amp;&amp; contentType.startsWith(MSGPACK_TYPE) &amp;&amp; response.body != null) {
  const object = await decodeAsync(response.body);
  // do something with object
} else { /* handle errors */ }'><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">decodeAsync</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"@msgpack/msgpack"</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-smi">MSGPACK_TYPE</span> <span class="pl-c1">=</span> <span class="pl-s">"application/x-msgpack"</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">response</span> <span class="pl-c1">=</span> <span class="pl-k">await</span> <span class="pl-en">fetch</span><span class="pl-kos">(</span><span class="pl-s1">url</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-s1">contentType</span> <span class="pl-c1">=</span> <span class="pl-s1">response</span><span class="pl-kos">.</span><span class="pl-c1">headers</span><span class="pl-kos">.</span><span class="pl-en">get</span><span class="pl-kos">(</span><span class="pl-s">"Content-Type"</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">contentType</span> <span class="pl-c1">&amp;&amp;</span> <span class="pl-s1">contentType</span><span class="pl-kos">.</span><span class="pl-en">startsWith</span><span class="pl-kos">(</span><span class="pl-smi">MSGPACK_TYPE</span><span class="pl-kos">)</span> <span class="pl-c1">&amp;&amp;</span> <span class="pl-s1">response</span><span class="pl-kos">.</span><span class="pl-c1">body</span> <span class="pl-c1">!=</span> <span class="pl-c1">null</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
  <span class="pl-k">const</span> <span class="pl-s1">object</span> <span class="pl-c1">=</span> <span class="pl-k">await</span> <span class="pl-en">decodeAsync</span><span class="pl-kos">(</span><span class="pl-s1">response</span><span class="pl-kos">.</span><span class="pl-c1">body</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
  <span class="pl-c">// do something with object</span>
<span class="pl-kos">}</span> <span class="pl-k">else</span> <span class="pl-kos">{</span> <span class="pl-c">/* handle errors */</span> <span class="pl-kos">}</span></pre></div>
<h7 dir="auto">
<a id="user-content-decodearraystreamstream-readablestreamlikearraylikenumber--buffersource-options-decodeasyncoptions-asynciterableunknown" class="anchor" aria-hidden="true" href="#decodearraystreamstream-readablestreamlikearraylikenumber--buffersource-options-decodeasyncoptions-asynciterableunknown"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>decodeArrayStream(stream: ReadableStreamLike&lt;ArrayLike&lt;number&gt; | BufferSource&gt;, options?: DecodeAsyncOptions): AsyncIterable&lt;unknown&gt;</code>
</h7>
<p dir="auto">It is alike to <code>decodeAsync()</code>, but only accepts a <code>stream</code> that includes an array of items, and emits a decoded item one by one.</p>
<p dir="auto">for example:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import { decodeArrayStream } from "@msgpack/msgpack";

const stream: AsyncIterator&lt;Uint8Array&gt;;

// in an async function:
for await (const item of decodeArrayStream(stream)) {
  console.log(item);
}'><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">decodeArrayStream</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"@msgpack/msgpack"</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">stream</span>: <span class="pl-smi">AsyncIterator</span><span class="pl-kos">&lt;</span><span class="pl-smi">Uint8Array</span><span class="pl-kos">&gt;</span><span class="pl-kos">;</span>

<span class="pl-c">// in an async function:</span>
<span class="pl-k">for</span> <span class="pl-k">await</span> <span class="pl-kos">(</span><span class="pl-k">const</span> <span class="pl-s1">item</span> <span class="pl-k">of</span> <span class="pl-en">decodeArrayStream</span><span class="pl-kos">(</span><span class="pl-s1">stream</span><span class="pl-kos">)</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
  <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s1">item</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span></pre></div>
<h7 dir="auto">
<a id="user-content-decodemultistreamstream-readablestreamlikearraylikenumber--buffersource-options-decodeasyncoptions-asynciterableunknown" class="anchor" aria-hidden="true" href="#decodemultistreamstream-readablestreamlikearraylikenumber--buffersource-options-decodeasyncoptions-asynciterableunknown"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>decodeMultiStream(stream: ReadableStreamLike&lt;ArrayLike&lt;number&gt; | BufferSource&gt;, options?: DecodeAsyncOptions): AsyncIterable&lt;unknown&gt;</code>
</h7>
<p dir="auto">It is alike to <code>decodeAsync()</code> and <code>decodeArrayStream()</code>, but the input <code>stream</code> must consist of multiple MessagePack-encoded items. This is an asynchronous variant for <code>decodeMulti()</code>.</p>
<p dir="auto">In other words, it could decode an unlimited stream and emits a decoded item one by one.</p>
<p dir="auto">for example:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import { decodeMultiStream } from "@msgpack/msgpack";

const stream: AsyncIterator&lt;Uint8Array&gt;;

// in an async function:
for await (const item of decodeMultiStream(stream)) {
  console.log(item);
}'><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">decodeMultiStream</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"@msgpack/msgpack"</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">stream</span>: <span class="pl-smi">AsyncIterator</span><span class="pl-kos">&lt;</span><span class="pl-smi">Uint8Array</span><span class="pl-kos">&gt;</span><span class="pl-kos">;</span>

<span class="pl-c">// in an async function:</span>
<span class="pl-k">for</span> <span class="pl-k">await</span> <span class="pl-kos">(</span><span class="pl-k">const</span> <span class="pl-s1">item</span> <span class="pl-k">of</span> <span class="pl-en">decodeMultiStream</span><span class="pl-kos">(</span><span class="pl-s1">stream</span><span class="pl-kos">)</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
  <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s1">item</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span></pre></div>
<p dir="auto">This function is available since v2.4.0; previously it was called as <code>decodeStream()</code>.</p>
<h7 dir="auto">
<a id="user-content-reusing-encoder-and-decoder-instances" class="anchor" aria-hidden="true" href="#reusing-encoder-and-decoder-instances"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Reusing Encoder and Decoder instances</h7>
<p dir="auto"><code>Encoder</code> and <code>Decoder</code> classes is provided to have better performance by reusing instances:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import { deepStrictEqual } from "assert";
import { Encoder, Decoder } from "@msgpack/msgpack";

const encoder = new Encoder();
const decoder = new Decoder();

const encoded: Uint8Array = encoder.encode(object);
deepStrictEqual(decoder.decode(encoded), object);'><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">deepStrictEqual</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"assert"</span><span class="pl-kos">;</span>
<span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-smi">Encoder</span><span class="pl-kos">,</span> <span class="pl-smi">Decoder</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"@msgpack/msgpack"</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">encoder</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-smi">Encoder</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-s1">decoder</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-smi">Decoder</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">encoded</span>: <span class="pl-smi">Uint8Array</span> <span class="pl-c1">=</span> <span class="pl-s1">encoder</span><span class="pl-kos">.</span><span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-s1">object</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-en">deepStrictEqual</span><span class="pl-kos">(</span><span class="pl-s1">decoder</span><span class="pl-kos">.</span><span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-s1">encoded</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-s1">object</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">According to our benchmark, reusing <code>Encoder</code> instance is about 20% faster
than <code>encode()</code> function, and reusing <code>Decoder</code> instance is about 2% faster
than <code>decode()</code> function. Note that the result should vary in environments
and data structure.</p>
<h6 dir="auto">
<a id="user-content-extension-types" class="anchor" aria-hidden="true" href="#extension-types"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Extension Types</h6>
<p dir="auto">To handle <a href="https://github.com/msgpack/msgpack/blob/master/spec.md#extension-types">MessagePack Extension Types</a>, this library provides <code>ExtensionCodec</code> class.</p>
<p dir="auto">This is an example to setup custom extension types that handles <code>Map</code> and <code>Set</code> classes in TypeScript:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import { encode, decode, ExtensionCodec } from "@msgpack/msgpack";

const extensionCodec = new ExtensionCodec();

// Set&lt;T&gt;
const SET_EXT_TYPE = 0 // Any in 0-127
extensionCodec.register({
  type: SET_EXT_TYPE,
  encode: (object: unknown): Uint8Array | null =&gt; {
    if (object instanceof Set) {
      return encode([...object]);
    } else {
      return null;
    }
  },
  decode: (data: Uint8Array) =&gt; {
    const array = decode(data) as Array&lt;unknown&gt;;
    return new Set(array);
  },
});

// Map&lt;T&gt;
const MAP_EXT_TYPE = 1; // Any in 0-127
extensionCodec.register({
  type: MAP_EXT_TYPE,
  encode: (object: unknown): Uint8Array =&gt; {
    if (object instanceof Map) {
      return encode([...object]);
    } else {
      return null;
    }
  },
  decode: (data: Uint8Array) =&gt; {
    const array = decode(data) as Array&lt;[unknown, unknown]&gt;;
    return new Map(array);
  },
});

const encoded = encode([new Set&lt;any&gt;(), new Map&lt;any, any&gt;()], { extensionCodec });
const decoded = decode(encoded, { extensionCodec });'><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">encode</span><span class="pl-kos">,</span> <span class="pl-s1">decode</span><span class="pl-kos">,</span> <span class="pl-smi">ExtensionCodec</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"@msgpack/msgpack"</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">extensionCodec</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-smi">ExtensionCodec</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// Set&lt;T&gt;</span>
<span class="pl-k">const</span> <span class="pl-smi">SET_EXT_TYPE</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span> <span class="pl-c">// Any in 0-127</span>
<span class="pl-s1">extensionCodec</span><span class="pl-kos">.</span><span class="pl-en">register</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">type</span>: <span class="pl-smi">SET_EXT_TYPE</span><span class="pl-kos">,</span>
  <span class="pl-en">encode</span>: <span class="pl-kos">(</span><span class="pl-s1">object</span>: <span class="pl-smi">unknown</span><span class="pl-kos">)</span>: <span class="pl-smi">Uint8Array</span> <span class="pl-c1">|</span> <span class="pl-smi">null</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
    <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">object</span> <span class="pl-k">instanceof</span> <span class="pl-smi">Set</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
      <span class="pl-k">return</span> <span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-kos">[</span>...<span class="pl-s1">object</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span> <span class="pl-k">else</span> <span class="pl-kos">{</span>
      <span class="pl-k">return</span> <span class="pl-c1">null</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span>
  <span class="pl-kos">}</span><span class="pl-kos">,</span>
  <span class="pl-en">decode</span>: <span class="pl-kos">(</span><span class="pl-s1">data</span>: <span class="pl-smi">Uint8Array</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
    <span class="pl-k">const</span> <span class="pl-s1">array</span> <span class="pl-c1">=</span> <span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-s1">data</span><span class="pl-kos">)</span> <span class="pl-k">as</span> <span class="pl-smi">Array</span><span class="pl-kos">&lt;</span><span class="pl-smi">unknown</span><span class="pl-kos">&gt;</span><span class="pl-kos">;</span>
    <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-smi">Set</span><span class="pl-kos">(</span><span class="pl-s1">array</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
  <span class="pl-kos">}</span><span class="pl-kos">,</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// Map&lt;T&gt;</span>
<span class="pl-k">const</span> <span class="pl-smi">MAP_EXT_TYPE</span> <span class="pl-c1">=</span> <span class="pl-c1">1</span><span class="pl-kos">;</span> <span class="pl-c">// Any in 0-127</span>
<span class="pl-s1">extensionCodec</span><span class="pl-kos">.</span><span class="pl-en">register</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">type</span>: <span class="pl-smi">MAP_EXT_TYPE</span><span class="pl-kos">,</span>
  <span class="pl-en">encode</span>: <span class="pl-kos">(</span><span class="pl-s1">object</span>: <span class="pl-smi">unknown</span><span class="pl-kos">)</span>: <span class="pl-smi">Uint8Array</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
    <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">object</span> <span class="pl-k">instanceof</span> <span class="pl-smi">Map</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
      <span class="pl-k">return</span> <span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-kos">[</span>...<span class="pl-s1">object</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span> <span class="pl-k">else</span> <span class="pl-kos">{</span>
      <span class="pl-k">return</span> <span class="pl-c1">null</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span>
  <span class="pl-kos">}</span><span class="pl-kos">,</span>
  <span class="pl-en">decode</span>: <span class="pl-kos">(</span><span class="pl-s1">data</span>: <span class="pl-smi">Uint8Array</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
    <span class="pl-k">const</span> <span class="pl-s1">array</span> <span class="pl-c1">=</span> <span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-s1">data</span><span class="pl-kos">)</span> <span class="pl-k">as</span> <span class="pl-smi">Array</span><span class="pl-kos">&lt;</span><span class="pl-kos">[</span><span class="pl-smi">unknown</span><span class="pl-kos">,</span> <span class="pl-smi">unknown</span><span class="pl-kos">]</span><span class="pl-kos">&gt;</span><span class="pl-kos">;</span>
    <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-smi">Map</span><span class="pl-kos">(</span><span class="pl-s1">array</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
  <span class="pl-kos">}</span><span class="pl-kos">,</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">encoded</span> <span class="pl-c1">=</span> <span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-k">new</span> <span class="pl-smi">Set</span><span class="pl-kos">&lt;</span><span class="pl-smi">any</span><span class="pl-kos">&gt;</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-k">new</span> <span class="pl-smi">Map</span><span class="pl-kos">&lt;</span><span class="pl-smi">any</span><span class="pl-kos">,</span> <span class="pl-smi">any</span><span class="pl-kos">&gt;</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">]</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> extensionCodec <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-s1">decoded</span> <span class="pl-c1">=</span> <span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-s1">encoded</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> extensionCodec <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">Not that extension types for custom objects must be <code>[0, 127]</code>, while <code>[-1, -128]</code> is reserved for MessagePack itself.</p>
<h8 dir="auto">
<a id="user-content-extensioncodec-context" class="anchor" aria-hidden="true" href="#extensioncodec-context"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>ExtensionCodec context</h8>
<p dir="auto">When you use an extension codec, it might be necessary to have encoding/decoding state to keep track of which objects got encoded/re-created. To do this, pass a <code>context</code> to the <code>EncodeOptions</code> and <code>DecodeOptions</code>:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import { encode, decode, ExtensionCodec } from "@msgpack/msgpack";

class MyContext {
  track(object: any) { /*...*/ }
}

class MyType { /* ... */ }

const extensionCodec = new ExtensionCodec&lt;MyContext&gt;();

// MyType
const MYTYPE_EXT_TYPE = 0 // Any in 0-127
extensionCodec.register({
  type: MYTYPE_EXT_TYPE,
  encode: (object, context) =&gt; {
    if (object instanceof MyType) {
      context.track(object); // &lt;-- like this
      return encode(object.toJSON(), { extensionCodec, context });
    } else {
      return null;
    }
  },
  decode: (data, extType, context) =&gt; {
    const decoded = decode(data, { extensionCodec, context });
    const my = new MyType(decoded);
    context.track(my); // &lt;-- and like this
    return my;
  },
});

// and later
import { encode, decode } from "@msgpack/msgpack";

const context = new MyContext();

const encoded = = encode({myType: new MyType&lt;any&gt;()}, { extensionCodec, context });
const decoded = decode(encoded, { extensionCodec, context });'><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">encode</span><span class="pl-kos">,</span> <span class="pl-s1">decode</span><span class="pl-kos">,</span> <span class="pl-smi">ExtensionCodec</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"@msgpack/msgpack"</span><span class="pl-kos">;</span>

<span class="pl-k">class</span> <span class="pl-smi">MyContext</span> <span class="pl-kos">{</span>
  <span class="pl-en">track</span><span class="pl-kos">(</span><span class="pl-s1">object</span>: <span class="pl-smi">any</span><span class="pl-kos">)</span> <span class="pl-kos">{</span> <span class="pl-c">/*...*/</span> <span class="pl-kos">}</span>
<span class="pl-kos">}</span>

<span class="pl-k">class</span> <span class="pl-smi">MyType</span> <span class="pl-kos">{</span> <span class="pl-c">/* ... */</span> <span class="pl-kos">}</span>

<span class="pl-k">const</span> <span class="pl-s1">extensionCodec</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-smi">ExtensionCodec</span><span class="pl-kos">&lt;</span><span class="pl-smi">MyContext</span><span class="pl-kos">&gt;</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// MyType</span>
<span class="pl-k">const</span> <span class="pl-smi">MYTYPE_EXT_TYPE</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span> <span class="pl-c">// Any in 0-127</span>
<span class="pl-s1">extensionCodec</span><span class="pl-kos">.</span><span class="pl-en">register</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">type</span>: <span class="pl-smi">MYTYPE_EXT_TYPE</span><span class="pl-kos">,</span>
  <span class="pl-en">encode</span>: <span class="pl-kos">(</span><span class="pl-s1">object</span><span class="pl-kos">,</span> <span class="pl-s1">context</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
    <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">object</span> <span class="pl-k">instanceof</span> <span class="pl-smi">MyType</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
      <span class="pl-s1">context</span><span class="pl-kos">.</span><span class="pl-en">track</span><span class="pl-kos">(</span><span class="pl-s1">object</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// &lt;-- like this</span>
      <span class="pl-k">return</span> <span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-s1">object</span><span class="pl-kos">.</span><span class="pl-en">toJSON</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> extensionCodec<span class="pl-kos">,</span> context <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span> <span class="pl-k">else</span> <span class="pl-kos">{</span>
      <span class="pl-k">return</span> <span class="pl-c1">null</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span>
  <span class="pl-kos">}</span><span class="pl-kos">,</span>
  <span class="pl-en">decode</span>: <span class="pl-kos">(</span><span class="pl-s1">data</span><span class="pl-kos">,</span> <span class="pl-s1">extType</span><span class="pl-kos">,</span> <span class="pl-s1">context</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
    <span class="pl-k">const</span> <span class="pl-s1">decoded</span> <span class="pl-c1">=</span> <span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-s1">data</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> extensionCodec<span class="pl-kos">,</span> context <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-k">const</span> <span class="pl-s1">my</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-smi">MyType</span><span class="pl-kos">(</span><span class="pl-s1">decoded</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-s1">context</span><span class="pl-kos">.</span><span class="pl-en">track</span><span class="pl-kos">(</span><span class="pl-s1">my</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// &lt;-- and like this</span>
    <span class="pl-k">return</span> <span class="pl-s1">my</span><span class="pl-kos">;</span>
  <span class="pl-kos">}</span><span class="pl-kos">,</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// and later</span>
<span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">encode</span><span class="pl-kos">,</span> <span class="pl-s1">decode</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"@msgpack/msgpack"</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">context</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-smi">MyContext</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">encoded</span> <span class="pl-c1">=</span> <span class="pl-c1">=</span> <span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-kos">{</span><span class="pl-c1">myType</span>: <span class="pl-k">new</span> <span class="pl-smi">MyType</span><span class="pl-kos">&lt;</span><span class="pl-smi">any</span><span class="pl-kos">&gt;</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">}</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> extensionCodec<span class="pl-kos">,</span> context <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-s1">decoded</span> <span class="pl-c1">=</span> <span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-s1">encoded</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> extensionCodec<span class="pl-kos">,</span> context <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h8 dir="auto">
<a id="user-content-handling-bigint-with-extensioncodec" class="anchor" aria-hidden="true" href="#handling-bigint-with-extensioncodec"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Handling BigInt with ExtensionCodec</h8>
<p dir="auto">This library does not handle BigInt by default, but you can handle it with <code>ExtensionCodec</code> like this:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import { deepStrictEqual } from "assert";
import { encode, decode, ExtensionCodec } from "@msgpack/msgpack";

const BIGINT_EXT_TYPE = 0; // Any in 0-127
const extensionCodec = new ExtensionCodec();
extensionCodec.register({
    type: BIGINT_EXT_TYPE,
    encode: (input: unknown) =&gt; {
        if (typeof input === "bigint") {
            if (input &lt;= Number.MAX_SAFE_INTEGER &amp;&amp; input &gt;= Number.MIN_SAFE_INTEGER) {
                return encode(parseInt(input.toString(), 10));
            } else {
                return encode(input.toString());
            }
        } else {
            return null;
        }
    },
    decode: (data: Uint8Array) =&gt; {
        return BigInt(decode(data));
    },
});

const value = BigInt(Number.MAX_SAFE_INTEGER) + BigInt(1);
const encoded: = encode(value, { extensionCodec });
deepStrictEqual(decode(encoded, { extensionCodec }), value);'><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">deepStrictEqual</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"assert"</span><span class="pl-kos">;</span>
<span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">encode</span><span class="pl-kos">,</span> <span class="pl-s1">decode</span><span class="pl-kos">,</span> <span class="pl-smi">ExtensionCodec</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"@msgpack/msgpack"</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-smi">BIGINT_EXT_TYPE</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span><span class="pl-kos">;</span> <span class="pl-c">// Any in 0-127</span>
<span class="pl-k">const</span> <span class="pl-s1">extensionCodec</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-smi">ExtensionCodec</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">extensionCodec</span><span class="pl-kos">.</span><span class="pl-en">register</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">type</span>: <span class="pl-smi">BIGINT_EXT_TYPE</span><span class="pl-kos">,</span>
    <span class="pl-en">encode</span>: <span class="pl-kos">(</span><span class="pl-s1">input</span>: <span class="pl-smi">unknown</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
        <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-k">typeof</span> <span class="pl-s1">input</span> <span class="pl-c1">===</span> <span class="pl-s">"bigint"</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
            <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">input</span> <span class="pl-c1">&lt;=</span> <span class="pl-smi">Number</span><span class="pl-kos">.</span><span class="pl-c1">MAX_SAFE_INTEGER</span> <span class="pl-c1">&amp;&amp;</span> <span class="pl-s1">input</span> <span class="pl-c1">&gt;=</span> <span class="pl-smi">Number</span><span class="pl-kos">.</span><span class="pl-c1">MIN_SAFE_INTEGER</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
                <span class="pl-k">return</span> <span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-en">parseInt</span><span class="pl-kos">(</span><span class="pl-s1">input</span><span class="pl-kos">.</span><span class="pl-en">toString</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-c1">10</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
            <span class="pl-kos">}</span> <span class="pl-k">else</span> <span class="pl-kos">{</span>
                <span class="pl-k">return</span> <span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-s1">input</span><span class="pl-kos">.</span><span class="pl-en">toString</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
            <span class="pl-kos">}</span>
        <span class="pl-kos">}</span> <span class="pl-k">else</span> <span class="pl-kos">{</span>
            <span class="pl-k">return</span> <span class="pl-c1">null</span><span class="pl-kos">;</span>
        <span class="pl-kos">}</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>
    <span class="pl-en">decode</span>: <span class="pl-kos">(</span><span class="pl-s1">data</span>: <span class="pl-smi">Uint8Array</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
        <span class="pl-k">return</span> <span class="pl-smi">BigInt</span><span class="pl-kos">(</span><span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-s1">data</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">value</span> <span class="pl-c1">=</span> <span class="pl-smi">BigInt</span><span class="pl-kos">(</span><span class="pl-smi">Number</span><span class="pl-kos">.</span><span class="pl-c1">MAX_SAFE_INTEGER</span><span class="pl-kos">)</span> <span class="pl-c1">+</span> <span class="pl-smi">BigInt</span><span class="pl-kos">(</span><span class="pl-c1">1</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-s1">encoded</span>: <span class="pl-c1">=</span> <span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-s1">value</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> extensionCodec <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-en">deepStrictEqual</span><span class="pl-kos">(</span><span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-s1">encoded</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> extensionCodec <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-s1">value</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h8 dir="auto">
<a id="user-content-the-temporal-module-as-timestamp-extensions" class="anchor" aria-hidden="true" href="#the-temporal-module-as-timestamp-extensions"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>The temporal module as timestamp extensions</h8>
<p dir="auto">There is a proposal for a new date/time representations in JavaScript:</p>
<ul dir="auto">
<li><a href="https://github.com/tc39/proposal-temporal">https://github.com/tc39/proposal-temporal</a></li>
</ul>
<p dir="auto">This library maps <code>Date</code> to the MessagePack timestamp extension by default, but you can re-map the temporal module (or <a href="https://github.com/tc39/proposal-temporal/tree/main/polyfill">Temporal Polyfill</a>) to the timestamp extension like this:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import { Instant } from "@std-proposal/temporal";
import { deepStrictEqual } from "assert";
import {
  encode,
  decode,
  ExtensionCodec,
  EXT_TIMESTAMP,
  encodeTimeSpecToTimestamp,
  decodeTimestampToTimeSpec,
} from "@msgpack/msgpack";

const extensionCodec = new ExtensionCodec();
extensionCodec.register({
  type: EXT_TIMESTAMP, // override the default behavior!
  encode: (input: any) =&gt; {
    if (input instanceof Instant) {
      const sec = input.seconds;
      const nsec = Number(input.nanoseconds - BigInt(sec) * BigInt(1e9));
      return encodeTimeSpecToTimestamp({ sec, nsec });
    } else {
      return null;
    }
  },
  decode: (data: Uint8Array) =&gt; {
    const timeSpec = decodeTimestampToTimeSpec(data);
    const sec = BigInt(timeSpec.sec);
    const nsec = BigInt(timeSpec.nsec);
    return Instant.fromEpochNanoseconds(sec * BigInt(1e9) + nsec);
  },
});

const instant = Instant.fromEpochMilliseconds(Date.now());
const encoded = encode(instant, { extensionCodec });
const decoded = decode(encoded, { extensionCodec });
deepStrictEqual(decoded, instant);'><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-smi">Instant</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"@std-proposal/temporal"</span><span class="pl-kos">;</span>
<span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">deepStrictEqual</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"assert"</span><span class="pl-kos">;</span>
<span class="pl-k">import</span> <span class="pl-kos">{</span>
  <span class="pl-s1">encode</span><span class="pl-kos">,</span>
  <span class="pl-s1">decode</span><span class="pl-kos">,</span>
  <span class="pl-smi">ExtensionCodec</span><span class="pl-kos">,</span>
  <span class="pl-smi">EXT_TIMESTAMP</span><span class="pl-kos">,</span>
  <span class="pl-s1">encodeTimeSpecToTimestamp</span><span class="pl-kos">,</span>
  <span class="pl-s1">decodeTimestampToTimeSpec</span><span class="pl-kos">,</span>
<span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"@msgpack/msgpack"</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">extensionCodec</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-smi">ExtensionCodec</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">extensionCodec</span><span class="pl-kos">.</span><span class="pl-en">register</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">type</span>: <span class="pl-smi">EXT_TIMESTAMP</span><span class="pl-kos">,</span> <span class="pl-c">// override the default behavior!</span>
  <span class="pl-en">encode</span>: <span class="pl-kos">(</span><span class="pl-s1">input</span>: <span class="pl-smi">any</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
    <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">input</span> <span class="pl-k">instanceof</span> <span class="pl-smi">Instant</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
      <span class="pl-k">const</span> <span class="pl-s1">sec</span> <span class="pl-c1">=</span> <span class="pl-s1">input</span><span class="pl-kos">.</span><span class="pl-c1">seconds</span><span class="pl-kos">;</span>
      <span class="pl-k">const</span> <span class="pl-s1">nsec</span> <span class="pl-c1">=</span> <span class="pl-smi">Number</span><span class="pl-kos">(</span><span class="pl-s1">input</span><span class="pl-kos">.</span><span class="pl-c1">nanoseconds</span> <span class="pl-c1">-</span> <span class="pl-smi">BigInt</span><span class="pl-kos">(</span><span class="pl-s1">sec</span><span class="pl-kos">)</span> <span class="pl-c1">*</span> <span class="pl-smi">BigInt</span><span class="pl-kos">(</span><span class="pl-c1">1e9</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
      <span class="pl-k">return</span> <span class="pl-en">encodeTimeSpecToTimestamp</span><span class="pl-kos">(</span><span class="pl-kos">{</span> sec<span class="pl-kos">,</span> nsec <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span> <span class="pl-k">else</span> <span class="pl-kos">{</span>
      <span class="pl-k">return</span> <span class="pl-c1">null</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span>
  <span class="pl-kos">}</span><span class="pl-kos">,</span>
  <span class="pl-en">decode</span>: <span class="pl-kos">(</span><span class="pl-s1">data</span>: <span class="pl-smi">Uint8Array</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
    <span class="pl-k">const</span> <span class="pl-s1">timeSpec</span> <span class="pl-c1">=</span> <span class="pl-en">decodeTimestampToTimeSpec</span><span class="pl-kos">(</span><span class="pl-s1">data</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-k">const</span> <span class="pl-s1">sec</span> <span class="pl-c1">=</span> <span class="pl-smi">BigInt</span><span class="pl-kos">(</span><span class="pl-s1">timeSpec</span><span class="pl-kos">.</span><span class="pl-c1">sec</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-k">const</span> <span class="pl-s1">nsec</span> <span class="pl-c1">=</span> <span class="pl-smi">BigInt</span><span class="pl-kos">(</span><span class="pl-s1">timeSpec</span><span class="pl-kos">.</span><span class="pl-c1">nsec</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-k">return</span> <span class="pl-smi">Instant</span><span class="pl-kos">.</span><span class="pl-en">fromEpochNanoseconds</span><span class="pl-kos">(</span><span class="pl-s1">sec</span> <span class="pl-c1">*</span> <span class="pl-smi">BigInt</span><span class="pl-kos">(</span><span class="pl-c1">1e9</span><span class="pl-kos">)</span> <span class="pl-c1">+</span> <span class="pl-s1">nsec</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
  <span class="pl-kos">}</span><span class="pl-kos">,</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">instant</span> <span class="pl-c1">=</span> <span class="pl-smi">Instant</span><span class="pl-kos">.</span><span class="pl-en">fromEpochMilliseconds</span><span class="pl-kos">(</span><span class="pl-smi">Date</span><span class="pl-kos">.</span><span class="pl-en">now</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-s1">encoded</span> <span class="pl-c1">=</span> <span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-s1">instant</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> extensionCodec <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-s1">decoded</span> <span class="pl-c1">=</span> <span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-s1">encoded</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> extensionCodec <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-en">deepStrictEqual</span><span class="pl-kos">(</span><span class="pl-s1">decoded</span><span class="pl-kos">,</span> <span class="pl-s1">instant</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">This will become default in this library with major-version increment, if the temporal module is standardized.</p>
<h6 dir="auto">
<a id="user-content-decoding-a-blob" class="anchor" aria-hidden="true" href="#decoding-a-blob"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Decoding a Blob</h6>
<p dir="auto"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Blob" rel="nofollow"><code>Blob</code></a> is a binary data container provided by browsers. To read its contents, you can use <code>Blob#arrayBuffer()</code> or <code>Blob#stream()</code>. <code>Blob#stream()</code>
is recommended if your target platform support it. This is because streaming
decode should be faster for large objects. In both ways, you need to use
asynchronous API.</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="async function decodeFromBlob(blob: Blob): unknown {
  if (blob.stream) {
    // Blob#stream(): ReadableStream&lt;Uint8Array&gt; (recommended)
    return await decodeAsync(blob.stream());
  } else {
    // Blob#arrayBuffer(): Promise&lt;ArrayBuffer&gt; (if stream() is not available)
    return decode(await blob.arrayBuffer());
  }
}"><pre><span class="pl-k">async</span> <span class="pl-k">function</span> <span class="pl-en">decodeFromBlob</span><span class="pl-kos">(</span><span class="pl-s1">blob</span>: <span class="pl-smi">Blob</span><span class="pl-kos">)</span>: <span class="pl-smi">unknown</span> <span class="pl-kos">{</span>
  <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">blob</span><span class="pl-kos">.</span><span class="pl-c1">stream</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
    <span class="pl-c">// Blob#stream(): ReadableStream&lt;Uint8Array&gt; (recommended)</span>
    <span class="pl-k">return</span> <span class="pl-k">await</span> <span class="pl-en">decodeAsync</span><span class="pl-kos">(</span><span class="pl-s1">blob</span><span class="pl-kos">.</span><span class="pl-en">stream</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
  <span class="pl-kos">}</span> <span class="pl-k">else</span> <span class="pl-kos">{</span>
    <span class="pl-c">// Blob#arrayBuffer(): Promise&lt;ArrayBuffer&gt; (if stream() is not available)</span>
    <span class="pl-k">return</span> <span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-k">await</span> <span class="pl-s1">blob</span><span class="pl-kos">.</span><span class="pl-en">arrayBuffer</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
  <span class="pl-kos">}</span>
<span class="pl-kos">}</span></pre></div>
<h6 dir="auto">
<a id="user-content-messagepack-specification" class="anchor" aria-hidden="true" href="#messagepack-specification"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack Specification</h6>
<p dir="auto">This library is compatible with the "August 2017" revision of MessagePack specification at the point where timestamp ext was added:</p>
<ul class="contains-task-list">
<li class="task-list-item">
<input type="checkbox" id="" disabled class="task-list-item-checkbox" checked> str/bin separation, added at August 2013</li>
<li class="task-list-item">
<input type="checkbox" id="" disabled class="task-list-item-checkbox" checked> extension types, added at August 2013</li>
<li class="task-list-item">
<input type="checkbox" id="" disabled class="task-list-item-checkbox" checked> timestamp ext type, added at August 2017</li>
</ul>
<p dir="auto">The living specification is here:</p>
<p dir="auto"><a href="https://github.com/msgpack/msgpack">https://github.com/msgpack/msgpack</a></p>
<p dir="auto">Note that as of June 2019 there're no official "version" on the MessagePack specification. See <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="67553770" data-permission-text="Title is private" data-url="https://github.com/msgpack/msgpack/issues/195" data-hovercard-type="issue" data-hovercard-url="/msgpack/msgpack/issues/195/hovercard" href="https://github.com/msgpack/msgpack/issues/195">msgpack/msgpack#195</a> for the discussions.</p>
<h7 dir="auto">
<a id="user-content-messagepack-mapping-table" class="anchor" aria-hidden="true" href="#messagepack-mapping-table"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack Mapping Table</h7>
<p dir="auto">The following table shows how JavaScript values are mapped to <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">MessagePack formats</a> and vice versa.</p>
<table>
<thead>
<tr>
<th>Source Value</th>
<th>MessagePack Format</th>
<th>Value Decoded</th>
</tr>
</thead>
<tbody>
<tr>
<td>null, undefined</td>
<td>nil</td>
<td>null (*1)</td>
</tr>
<tr>
<td>boolean (true, false)</td>
<td>bool family</td>
<td>boolean (true, false)</td>
</tr>
<tr>
<td>number (53-bit int)</td>
<td>int family</td>
<td>number (53-bit int)</td>
</tr>
<tr>
<td>number (64-bit float)</td>
<td>float family</td>
<td>number (64-bit float)</td>
</tr>
<tr>
<td>string</td>
<td>str family</td>
<td>string</td>
</tr>
<tr>
<td>ArrayBufferView</td>
<td>bin family</td>
<td>Uint8Array (*2)</td>
</tr>
<tr>
<td>Array</td>
<td>array family</td>
<td>Array</td>
</tr>
<tr>
<td>Object</td>
<td>map family</td>
<td>Object (*3)</td>
</tr>
<tr>
<td>Date</td>
<td>timestamp ext family</td>
<td>Date (*4)</td>
</tr>
</tbody>
</table>
<ul dir="auto">
<li>*1 Both <code>null</code> and <code>undefined</code> are mapped to <code>nil</code> (<code>0xC0</code>) type, and are decoded into <code>null</code>
</li>
<li>*2 Any <code>ArrayBufferView</code>s including NodeJS's <code>Buffer</code> are mapped to <code>bin</code> family, and are decoded into <code>Uint8Array</code>
</li>
<li>*3 In handling <code>Object</code>, it is regarded as <code>Record&lt;string, unknown&gt;</code> in terms of TypeScript</li>
<li>*4 MessagePack timestamps may have nanoseconds, which will lost when it is decoded into JavaScript <code>Date</code>. This behavior can be overridden by registering <code>-1</code> for the extension codec.</li>
</ul>
<h6 dir="auto">
<a id="user-content-prerequisites" class="anchor" aria-hidden="true" href="#prerequisites"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Prerequisites</h6>
<p dir="auto">This is a universal JavaScript library that supports major browsers and NodeJS.</p>
<h7 dir="auto">
<a id="user-content-ecma-262" class="anchor" aria-hidden="true" href="#ecma-262"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>ECMA-262</h7>
<ul dir="auto">
<li>ES5 language features</li>
<li>ES2018 standard library, including:
<ul dir="auto">
<li>Typed arrays (ES2015)</li>
<li>Async iterations (ES2018)</li>
<li>Features added in ES2015-ES2018</li>
</ul>
</li>
</ul>
<p dir="auto">ES2018 standard library used in this library can be polyfilled with <a href="https://github.com/zloirock/core-js">core-js</a>.</p>
<p dir="auto">If you support IE11, import <code>core-js</code> in your application entrypoints, as this library does in testing for browsers.</p>
<h7 dir="auto">
<a id="user-content-nodejs" class="anchor" aria-hidden="true" href="#nodejs"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>NodeJS</h7>
<p dir="auto">NodeJS v10 is required, but NodeJS v12 or later is recommended because it includes the V8 feature of <a href="https://v8.dev/blog/dataview" rel="nofollow">Improving DataView performance in V8</a>.</p>
<p dir="auto">NodeJS before v10 will work by importing <code>@msgpack/msgpack/dist.es5+umd/msgpack</code>.</p>
<h7 dir="auto">
<a id="user-content-typescript-compiler--type-definitions" class="anchor" aria-hidden="true" href="#typescript-compiler--type-definitions"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>TypeScript Compiler / Type Definitions</h7>
<p dir="auto">This module requires type definitions of <code>AsyncIterator</code>, <code>SourceBuffer</code>, whatwg streams, and so on. They are provided by <code>"lib": ["ES2021", "DOM"]</code> in <code>tsconfig.json</code>.</p>
<p dir="auto">Regarding the TypeScript compiler version, only the latest TypeScript is tested in development.</p>
<h6 dir="auto">
<a id="user-content-benchmark" class="anchor" aria-hidden="true" href="#benchmark"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Benchmark</h6>
<p dir="auto">Run-time performance is not the only reason to use MessagePack, but it's important to choose MessagePack libraries, so a benchmark suite is provided to monitor the performance of this library.</p>
<p dir="auto">V8's built-in JSON has been improved for years, esp. <code>JSON.parse()</code> is <a href="https://v8.dev/blog/v8-release-76" rel="nofollow">significantly improved in V8/7.6</a>, it is the fastest deserializer as of 2019, as the benchmark result bellow suggests.</p>
<p dir="auto">However, MessagePack can handles binary data effectively, actual performance depends on situations. You'd better take benchmark on your own use-case if performance matters.</p>
<p dir="auto">Benchmark on NodeJS/v18.1.0 (V8/10.1)</p>
<table>
<thead>
<tr>
<th>operation</th>
<th align="right">op</th>
<th align="right">ms</th>
<th align="right">op/s</th>
</tr>
</thead>
<tbody>
<tr>
<td>buf = Buffer.from(JSON.stringify(obj));</td>
<td align="right">902100</td>
<td align="right">5000</td>
<td align="right">180420</td>
</tr>
<tr>
<td>obj = JSON.parse(buf.toString("utf-8"));</td>
<td align="right">898700</td>
<td align="right">5000</td>
<td align="right">179740</td>
</tr>
<tr>
<td>buf = require("msgpack-lite").encode(obj);</td>
<td align="right">411000</td>
<td align="right">5000</td>
<td align="right">82200</td>
</tr>
<tr>
<td>obj = require("msgpack-lite").decode(buf);</td>
<td align="right">246200</td>
<td align="right">5001</td>
<td align="right">49230</td>
</tr>
<tr>
<td>buf = require("@msgpack/msgpack").encode(obj);</td>
<td align="right">843300</td>
<td align="right">5000</td>
<td align="right">168660</td>
</tr>
<tr>
<td>obj = require("@msgpack/msgpack").decode(buf);</td>
<td align="right">489300</td>
<td align="right">5000</td>
<td align="right">97860</td>
</tr>
<tr>
<td>buf = /* @msgpack/msgpack */ encoder.encode(obj);</td>
<td align="right">1154200</td>
<td align="right">5000</td>
<td align="right">230840</td>
</tr>
<tr>
<td>obj = /* @msgpack/msgpack */ decoder.decode(buf);</td>
<td align="right">448900</td>
<td align="right">5000</td>
<td align="right">89780</td>
</tr>
</tbody>
</table>
<p dir="auto">Note that <code>JSON</code> cases use <code>Buffer</code> to emulate I/O where a JavaScript string must be converted into a byte array encoded in UTF-8, whereas MessagePack modules deal with byte arrays.</p>
<h6 dir="auto">
<a id="user-content-distribution" class="anchor" aria-hidden="true" href="#distribution"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Distribution</h6>
<h7 dir="auto">
<a id="user-content-npm--npmjscom" class="anchor" aria-hidden="true" href="#npm--npmjscom"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>NPM / npmjs.com</h7>
<p dir="auto">The NPM package distributed in npmjs.com includes both ES2015+ and ES5 files:</p>
<ul dir="auto">
<li>
<code>dist/</code> is compiled into ES2019 with CommomJS, provided for NodeJS v10</li>
<li>
<code>dist.es5+umd/</code> is compiled into ES5 with UMD
<ul dir="auto">
<li>
<code>dist.es5+umd/msgpack.min.js</code> - the minified file</li>
<li>
<code>dist.es5+umd/msgpack.js</code> - the non-minified file</li>
</ul>
</li>
<li>
<code>dist.es5+esm/</code> is compiled into ES5 with ES modules, provided for webpack-like bundlers and NodeJS's ESM-mode</li>
</ul>
<p dir="auto">If you use NodeJS and/or webpack, their module resolvers use the suitable one automatically.</p>
<h7 dir="auto">
<a id="user-content-cdn--unpkgcom" class="anchor" aria-hidden="true" href="#cdn--unpkgcom"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>CDN / unpkg.com</h7>
<p dir="auto">This library is available via CDN:</p>
<div class="highlight highlight-text-html-basic notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='&lt;script crossorigin src="https://unpkg.com/@msgpack/msgpack"&gt;&lt;/script&gt;'><pre><span class="pl-kos">&lt;</span><span class="pl-ent">script</span> <span class="pl-c1">crossorigin</span> <span class="pl-c1">src</span>="<span class="pl-s">https://unpkg.com/@msgpack/msgpack</span>"<span class="pl-kos">&gt;</span><span class="pl-kos">&lt;/</span><span class="pl-ent">script</span><span class="pl-kos">&gt;</span></pre></div>
<p dir="auto">It loads <code>MessagePack</code> module to the global object.</p>
<h6 dir="auto">
<a id="user-content-deno-support" class="anchor" aria-hidden="true" href="#deno-support"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Deno Support</h6>
<p dir="auto">You can use this module on Deno.</p>
<p dir="auto">See <code>example/deno-*.ts</code> for examples.</p>
<p dir="auto"><code>deno.land/x</code> is not supported yet.</p>
<h6 dir="auto">
<a id="user-content-maintenance" class="anchor" aria-hidden="true" href="#maintenance"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Maintenance</h6>
<h7 dir="auto">
<a id="user-content-testing" class="anchor" aria-hidden="true" href="#testing"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Testing</h7>
<p dir="auto">For simple testing:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="npm run test"><pre class="notranslate"><code>npm run test
</code></pre></div>
<h7 dir="auto">
<a id="user-content-continuous-integration" class="anchor" aria-hidden="true" href="#continuous-integration"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Continuous Integration</h7>
<p dir="auto">This library uses Travis CI.</p>
<p dir="auto">test matrix:</p>
<ul dir="auto">
<li>TypeScript targets
<ul dir="auto">
<li>
<code>target=es2019</code> / <code>target=es5</code>
</li>
</ul>
</li>
<li>JavaScript engines
<ul dir="auto">
<li>NodeJS, browsers (Chrome, Firefox, Safari, IE11, and so on)</li>
</ul>
</li>
</ul>
<p dir="auto">See <a href="/msgpack/msgpack-javascript/blob/main/package.json">test:* in package.json</a> and <a href="/msgpack/msgpack-javascript/blob/main/.travis.yml">.travis.yml</a> for details.</p>
<h7 dir="auto">
<a id="user-content-release-engineering" class="anchor" aria-hidden="true" href="#release-engineering"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Release Engineering</h7>
<div class="highlight highlight-text-shell-session notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="# run tests on NodeJS, Chrome, and Firefox
make test-all

# edit the changelog
code CHANGELOG.md

# bump version
npm version patch|minor|major

# run the publishing task
make publish"><pre># <span class="pl-s1">run tests on NodeJS, Chrome, and Firefox</span>
<span class="pl-c1">make test-all</span>

# <span class="pl-s1">edit the changelog</span>
<span class="pl-c1">code CHANGELOG.md</span>

# <span class="pl-s1">bump version</span>
<span class="pl-c1">npm version patch|minor|major</span>

# <span class="pl-s1">run the publishing task</span>
<span class="pl-c1">make publish</span></pre></div>
<h7 dir="auto">
<a id="user-content-updating-dependencies" class="anchor" aria-hidden="true" href="#updating-dependencies"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Updating Dependencies</h7>
<div class="highlight highlight-text-shell-session notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="npm run update-dependencies"><pre><span class="pl-c1">npm run update-dependencies</span></pre></div>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<p dir="auto">Copyright 2019 The MessagePack community.</p>
<p dir="auto">This software uses the ISC license:</p>
<p dir="auto"><a href="https://opensource.org/licenses/ISC" rel="nofollow">https://opensource.org/licenses/ISC</a></p>
<p dir="auto">See <a href="/msgpack/msgpack-javascript/blob/main/LICENSE">LICENSE</a> for details.</p>
</article>
  </div>
        </div>
        
        <div id="qs-kawanet-msgpack-lite" class="qs"><h4><a href="https://www.npmjs.com/package/msgpack-lite" target="_blank">kawanet/msgpack-lite <span class="qs-url">https://www.npmjs.com/package/msgpack-lite</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack-lite--" class="anchor" aria-hidden="true" href="#msgpack-lite--"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack-lite <a href="http://badge.fury.io/js/msgpack-lite" rel="nofollow"><img src="https://camo.githubusercontent.com/8756d61e7043e0623a0c68372f184b034c4b4bc915d18bd235e40a7f23deb32a/68747470733a2f2f62616467652e667572792e696f2f6a732f6d73677061636b2d6c6974652e737667" alt="npm version" data-canonical-src="https://badge.fury.io/js/msgpack-lite.svg" style="max-width: 100%;"></a> <a href="https://travis-ci.org/kawanet/msgpack-lite" rel="nofollow"><img src="https://camo.githubusercontent.com/2754f4262334cb17fff08940d008073393dc3ef20a171060b6704576b45e721c/68747470733a2f2f7472617669732d63692e6f72672f6b6177616e65742f6d73677061636b2d6c6974652e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/kawanet/msgpack-lite.svg?branch=master" style="max-width: 100%;"></a>
</h5>
<p dir="auto">Fast Pure JavaScript MessagePack Encoder and Decoder</p>
<p dir="auto"><a href="https://saucelabs.com/u/msgpack-lite" rel="nofollow"><img src="https://camo.githubusercontent.com/1154a6b8c4a92e36b5a3ac2d2922274ae4b5a8ed7e2e36ace7f9dfeba74fa74e/68747470733a2f2f73617563656c6162732e636f6d2f62726f777365722d6d61747269782f6d73677061636b2d6c6974652e737667" alt="Sauce Test Status" data-canonical-src="https://saucelabs.com/browser-matrix/msgpack-lite.svg" style="max-width: 100%;"></a></p>
<p dir="auto">Online demo: <a href="http://kawanet.github.io/msgpack-lite/" rel="nofollow">http://kawanet.github.io/msgpack-lite/</a></p>
<h7 dir="auto">
<a id="user-content-features" class="anchor" aria-hidden="true" href="#features"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Features</h7>
<ul dir="auto">
<li>Pure JavaScript only (No node-gyp nor gcc required)</li>
<li>Faster than any other pure JavaScript libraries on node.js v4</li>
<li>Even faster than node-gyp C++ based <a href="https://www.npmjs.com/package/msgpack" rel="nofollow">msgpack</a> library (<strong>90% faster</strong> on encoding)</li>
<li>Streaming encoding and decoding interface is also available. It's more faster.</li>
<li>Ready for <a href="https://saucelabs.com/u/msgpack-lite" rel="nofollow">Web browsers</a> including Chrome, Firefox, Safari and even IE8</li>
<li>
<a href="https://travis-ci.org/kawanet/msgpack-lite" rel="nofollow">Tested</a> on Node.js v0.10, v0.12, v4, v5 and v6 as well as Web browsers</li>
</ul>
<h7 dir="auto">
<a id="user-content-encoding-and-decoding-messagepack" class="anchor" aria-hidden="true" href="#encoding-and-decoding-messagepack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Encoding and Decoding MessagePack</h7>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='var msgpack = require("msgpack-lite");

// encode from JS Object to MessagePack (Buffer)
var buffer = msgpack.encode({"foo": "bar"});

// decode from MessagePack (Buffer) to JS Object
var data = msgpack.decode(buffer); // =&gt; {"foo": "bar"}

// if encode/decode receives an invalid argument an error is thrown'><pre><span class="pl-k">var</span> <span class="pl-s1">msgpack</span> <span class="pl-c1">=</span> <span class="pl-en">require</span><span class="pl-kos">(</span><span class="pl-s">"msgpack-lite"</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// encode from JS Object to MessagePack (Buffer)</span>
<span class="pl-k">var</span> <span class="pl-s1">buffer</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-kos">{</span><span class="pl-s">"foo"</span>: <span class="pl-s">"bar"</span><span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// decode from MessagePack (Buffer) to JS Object</span>
<span class="pl-k">var</span> <span class="pl-s1">data</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-s1">buffer</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// =&gt; {"foo": "bar"}</span>

<span class="pl-c">// if encode/decode receives an invalid argument an error is thrown</span></pre></div>
<h7 dir="auto">
<a id="user-content-writing-to-messagepack-stream" class="anchor" aria-hidden="true" href="#writing-to-messagepack-stream"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Writing to MessagePack Stream</h7>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="var fs = require(&quot;fs&quot;);
var msgpack = require(&quot;msgpack-lite&quot;);

var writeStream = fs.createWriteStream(&quot;test.msp&quot;);
var encodeStream = msgpack.createEncodeStream();
encodeStream.pipe(writeStream);

// send multiple objects to stream
encodeStream.write({foo: &quot;bar&quot;});
encodeStream.write({baz: &quot;qux&quot;});

// call this once you're done writing to the stream.
encodeStream.end();"><pre><span class="pl-k">var</span> <span class="pl-s1">fs</span> <span class="pl-c1">=</span> <span class="pl-en">require</span><span class="pl-kos">(</span><span class="pl-s">"fs"</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">var</span> <span class="pl-s1">msgpack</span> <span class="pl-c1">=</span> <span class="pl-en">require</span><span class="pl-kos">(</span><span class="pl-s">"msgpack-lite"</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">var</span> <span class="pl-s1">writeStream</span> <span class="pl-c1">=</span> <span class="pl-s1">fs</span><span class="pl-kos">.</span><span class="pl-en">createWriteStream</span><span class="pl-kos">(</span><span class="pl-s">"test.msp"</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">var</span> <span class="pl-s1">encodeStream</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">createEncodeStream</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">encodeStream</span><span class="pl-kos">.</span><span class="pl-en">pipe</span><span class="pl-kos">(</span><span class="pl-s1">writeStream</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// send multiple objects to stream</span>
<span class="pl-s1">encodeStream</span><span class="pl-kos">.</span><span class="pl-en">write</span><span class="pl-kos">(</span><span class="pl-kos">{</span><span class="pl-c1">foo</span>: <span class="pl-s">"bar"</span><span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">encodeStream</span><span class="pl-kos">.</span><span class="pl-en">write</span><span class="pl-kos">(</span><span class="pl-kos">{</span><span class="pl-c1">baz</span>: <span class="pl-s">"qux"</span><span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// call this once you're done writing to the stream.</span>
<span class="pl-s1">encodeStream</span><span class="pl-kos">.</span><span class="pl-en">end</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h7 dir="auto">
<a id="user-content-reading-from-messagepack-stream" class="anchor" aria-hidden="true" href="#reading-from-messagepack-stream"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Reading from MessagePack Stream</h7>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='var fs = require("fs");
var msgpack = require("msgpack-lite");

var readStream = fs.createReadStream("test.msp");
var decodeStream = msgpack.createDecodeStream();

// show multiple objects decoded from stream
readStream.pipe(decodeStream).on("data", console.warn);'><pre><span class="pl-k">var</span> <span class="pl-s1">fs</span> <span class="pl-c1">=</span> <span class="pl-en">require</span><span class="pl-kos">(</span><span class="pl-s">"fs"</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">var</span> <span class="pl-s1">msgpack</span> <span class="pl-c1">=</span> <span class="pl-en">require</span><span class="pl-kos">(</span><span class="pl-s">"msgpack-lite"</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">var</span> <span class="pl-s1">readStream</span> <span class="pl-c1">=</span> <span class="pl-s1">fs</span><span class="pl-kos">.</span><span class="pl-en">createReadStream</span><span class="pl-kos">(</span><span class="pl-s">"test.msp"</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">var</span> <span class="pl-s1">decodeStream</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">createDecodeStream</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// show multiple objects decoded from stream</span>
<span class="pl-s1">readStream</span><span class="pl-kos">.</span><span class="pl-en">pipe</span><span class="pl-kos">(</span><span class="pl-s1">decodeStream</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">on</span><span class="pl-kos">(</span><span class="pl-s">"data"</span><span class="pl-kos">,</span> <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-c1">warn</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h7 dir="auto">
<a id="user-content-decoding-messagepack-bytes-array" class="anchor" aria-hidden="true" href="#decoding-messagepack-bytes-array"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Decoding MessagePack Bytes Array</h7>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='var msgpack = require("msgpack-lite");

// decode() accepts Buffer instance per default
msgpack.decode(Buffer([0x81, 0xA3, 0x66, 0x6F, 0x6F, 0xA3, 0x62, 0x61, 0x72]));

// decode() also accepts Array instance
msgpack.decode([0x81, 0xA3, 0x66, 0x6F, 0x6F, 0xA3, 0x62, 0x61, 0x72]);

// decode() accepts raw Uint8Array instance as well
msgpack.decode(new Uint8Array([0x81, 0xA3, 0x66, 0x6F, 0x6F, 0xA3, 0x62, 0x61, 0x72]));'><pre><span class="pl-k">var</span> <span class="pl-s1">msgpack</span> <span class="pl-c1">=</span> <span class="pl-en">require</span><span class="pl-kos">(</span><span class="pl-s">"msgpack-lite"</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// decode() accepts Buffer instance per default</span>
<span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-v">Buffer</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-c1">0x81</span><span class="pl-kos">,</span> <span class="pl-c1">0xA3</span><span class="pl-kos">,</span> <span class="pl-c1">0x66</span><span class="pl-kos">,</span> <span class="pl-c1">0x6F</span><span class="pl-kos">,</span> <span class="pl-c1">0x6F</span><span class="pl-kos">,</span> <span class="pl-c1">0xA3</span><span class="pl-kos">,</span> <span class="pl-c1">0x62</span><span class="pl-kos">,</span> <span class="pl-c1">0x61</span><span class="pl-kos">,</span> <span class="pl-c1">0x72</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// decode() also accepts Array instance</span>
<span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-c1">0x81</span><span class="pl-kos">,</span> <span class="pl-c1">0xA3</span><span class="pl-kos">,</span> <span class="pl-c1">0x66</span><span class="pl-kos">,</span> <span class="pl-c1">0x6F</span><span class="pl-kos">,</span> <span class="pl-c1">0x6F</span><span class="pl-kos">,</span> <span class="pl-c1">0xA3</span><span class="pl-kos">,</span> <span class="pl-c1">0x62</span><span class="pl-kos">,</span> <span class="pl-c1">0x61</span><span class="pl-kos">,</span> <span class="pl-c1">0x72</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// decode() accepts raw Uint8Array instance as well</span>
<span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-k">new</span> <span class="pl-v">Uint8Array</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-c1">0x81</span><span class="pl-kos">,</span> <span class="pl-c1">0xA3</span><span class="pl-kos">,</span> <span class="pl-c1">0x66</span><span class="pl-kos">,</span> <span class="pl-c1">0x6F</span><span class="pl-kos">,</span> <span class="pl-c1">0x6F</span><span class="pl-kos">,</span> <span class="pl-c1">0xA3</span><span class="pl-kos">,</span> <span class="pl-c1">0x62</span><span class="pl-kos">,</span> <span class="pl-c1">0x61</span><span class="pl-kos">,</span> <span class="pl-c1">0x72</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h7 dir="auto">
<a id="user-content-command-line-interface" class="anchor" aria-hidden="true" href="#command-line-interface"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Command Line Interface</h7>
<p dir="auto">A CLI tool bin/msgpack converts data stream from JSON to MessagePack and vice versa.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ echo '{&quot;foo&quot;: &quot;bar&quot;}' | ./bin/msgpack -Jm | od -tx1
0000000    81  a3  66  6f  6f  a3  62  61  72

$ echo '{&quot;foo&quot;: &quot;bar&quot;}' | ./bin/msgpack -Jm | ./bin/msgpack -Mj
{&quot;foo&quot;:&quot;bar&quot;}"><pre>$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>{"foo": "bar"}<span class="pl-pds">'</span></span> <span class="pl-k">|</span> ./bin/msgpack -Jm <span class="pl-k">|</span> od -tx1
0000000    81  a3  66  6f  6f  a3  62  61  72

$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>{"foo": "bar"}<span class="pl-pds">'</span></span> <span class="pl-k">|</span> ./bin/msgpack -Jm <span class="pl-k">|</span> ./bin/msgpack -Mj
{<span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span>}</pre></div>
<h7 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h7>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ npm install --save msgpack-lite"><pre>$ npm install --save msgpack-lite</pre></div>
<h7 dir="auto">
<a id="user-content-tests" class="anchor" aria-hidden="true" href="#tests"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Tests</h7>
<p dir="auto">Run tests on node.js:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ make test"><pre>$ make <span class="pl-c1">test</span></pre></div>
<p dir="auto">Run tests on browsers:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ make test-browser-local
open the following url in a browser:
http://localhost:4000/__zuul"><pre>$ make test-browser-local
open the following url <span class="pl-k">in</span> a browser:
http://localhost:4000/__zuul</pre></div>
<h7 dir="auto">
<a id="user-content-browser-build" class="anchor" aria-hidden="true" href="#browser-build"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Browser Build</h7>
<p dir="auto">Browser version <a href="https://rawgit.com/kawanet/msgpack-lite/master/dist/msgpack.min.js" rel="nofollow">msgpack.min.js</a> is also available. 50KB minified, 14KB gziped.</p>
<div class="highlight highlight-text-html-basic notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='&lt;!--[if lte IE 9]&gt;
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.1.10/es5-shim.min.js"&gt;&lt;/script&gt;
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/json3/3.3.2/json3.min.js"&gt;&lt;/script&gt;
&lt;![endif]--&gt;
&lt;script src="https://rawgit.com/kawanet/msgpack-lite/master/dist/msgpack.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
// encode from JS Object to MessagePack (Uint8Array)
var buffer = msgpack.encode({foo: "bar"});

// decode from MessagePack (Uint8Array) to JS Object
var array = new Uint8Array([0x81, 0xA3, 0x66, 0x6F, 0x6F, 0xA3, 0x62, 0x61, 0x72]);
var data = msgpack.decode(array);
&lt;/script&gt;'><pre><span class="pl-c">&lt;!--[if lte IE 9]&gt;</span>
<span class="pl-c">&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.1.10/es5-shim.min.js"&gt;&lt;/script&gt;</span>
<span class="pl-c">&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/json3/3.3.2/json3.min.js"&gt;&lt;/script&gt;</span>
<span class="pl-c">&lt;![endif]--&gt;</span>
<span class="pl-kos">&lt;</span><span class="pl-ent">script</span> <span class="pl-c1">src</span>="<span class="pl-s">https://rawgit.com/kawanet/msgpack-lite/master/dist/msgpack.min.js</span>"<span class="pl-kos">&gt;</span><span class="pl-kos">&lt;/</span><span class="pl-ent">script</span><span class="pl-kos">&gt;</span>
<span class="pl-kos">&lt;</span><span class="pl-ent">script</span><span class="pl-kos">&gt;</span>
<span class="pl-c">// encode from JS Object to MessagePack (Uint8Array)</span>
<span class="pl-k">var</span> <span class="pl-s1">buffer</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-kos">{</span><span class="pl-c1">foo</span>: <span class="pl-s">"bar"</span><span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// decode from MessagePack (Uint8Array) to JS Object</span>
<span class="pl-k">var</span> <span class="pl-s1">array</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-v">Uint8Array</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-c1">0x81</span><span class="pl-kos">,</span> <span class="pl-c1">0xA3</span><span class="pl-kos">,</span> <span class="pl-c1">0x66</span><span class="pl-kos">,</span> <span class="pl-c1">0x6F</span><span class="pl-kos">,</span> <span class="pl-c1">0x6F</span><span class="pl-kos">,</span> <span class="pl-c1">0xA3</span><span class="pl-kos">,</span> <span class="pl-c1">0x62</span><span class="pl-kos">,</span> <span class="pl-c1">0x61</span><span class="pl-kos">,</span> <span class="pl-c1">0x72</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">var</span> <span class="pl-s1">data</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-s1">array</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">&lt;/</span><span class="pl-ent">script</span><span class="pl-kos">&gt;</span></pre></div>
<h7 dir="auto">
<a id="user-content-messagepack-with-browserify" class="anchor" aria-hidden="true" href="#messagepack-with-browserify"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack With Browserify</h7>
<p dir="auto">Step #1: write some code at first.</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='var msgpack = require("msgpack-lite");
var buffer = msgpack.encode({"foo": "bar"});
var data = msgpack.decode(buffer);
console.warn(data); // =&gt; {"foo": "bar"}'><pre><span class="pl-k">var</span> <span class="pl-s1">msgpack</span> <span class="pl-c1">=</span> <span class="pl-en">require</span><span class="pl-kos">(</span><span class="pl-s">"msgpack-lite"</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">var</span> <span class="pl-s1">buffer</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-kos">{</span><span class="pl-s">"foo"</span>: <span class="pl-s">"bar"</span><span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">var</span> <span class="pl-s1">data</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-s1">buffer</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">warn</span><span class="pl-kos">(</span><span class="pl-s1">data</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// =&gt; {"foo": "bar"}</span></pre></div>
<p dir="auto">Proceed to the next steps if you prefer faster browserify compilation time.</p>
<p dir="auto">Step #2: add <code>browser</code> property on <code>package.json</code> in your project. This refers the global <code>msgpack</code> object instead of including whole of <code>msgpack-lite</code> source code.</p>
<div class="highlight highlight-source-json notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='{
  "dependencies": {
    "msgpack-lite": "*"
  },
  "browser": {
    "msgpack-lite": "msgpack-lite/global"
  }
}'><pre>{
  <span class="pl-ent">"dependencies"</span>: {
    <span class="pl-ent">"msgpack-lite"</span>: <span class="pl-s"><span class="pl-pds">"</span>*<span class="pl-pds">"</span></span>
  },
  <span class="pl-ent">"browser"</span>: {
    <span class="pl-ent">"msgpack-lite"</span>: <span class="pl-s"><span class="pl-pds">"</span>msgpack-lite/global<span class="pl-pds">"</span></span>
  }
}</pre></div>
<p dir="auto">Step #3: compile it with <a href="https://www.npmjs.com/package/browserify" rel="nofollow">browserify</a> and <a href="https://www.npmjs.com/package/uglify-js" rel="nofollow">uglifyjs</a>.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="browserify src/main.js -o tmp/main.browserify.js -s main
uglifyjs tmp/main.browserify.js -m -c -o js/main.min.js
cp node_modules/msgpack-lite/dist/msgpack.min.js js/msgpack.min.js"><pre>browserify src/main.js -o tmp/main.browserify.js -s main
uglifyjs tmp/main.browserify.js -m -c -o js/main.min.js
cp node_modules/msgpack-lite/dist/msgpack.min.js js/msgpack.min.js</pre></div>
<p dir="auto">Step #4: load <a href="https://rawgit.com/kawanet/msgpack-lite/master/dist/msgpack.min.js" rel="nofollow">msgpack.min.js</a> before your code.</p>
<div class="highlight highlight-text-html-basic notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='&lt;script src="js/msgpack.min.js"&gt;&lt;/script&gt;
&lt;script src="js/main.min.js"&gt;&lt;/script&gt;'><pre><span class="pl-kos">&lt;</span><span class="pl-ent">script</span> <span class="pl-c1">src</span>="<span class="pl-s">js/msgpack.min.js</span>"<span class="pl-kos">&gt;</span><span class="pl-kos">&lt;/</span><span class="pl-ent">script</span><span class="pl-kos">&gt;</span>
<span class="pl-kos">&lt;</span><span class="pl-ent">script</span> <span class="pl-c1">src</span>="<span class="pl-s">js/main.min.js</span>"<span class="pl-kos">&gt;</span><span class="pl-kos">&lt;/</span><span class="pl-ent">script</span><span class="pl-kos">&gt;</span></pre></div>
<h7 dir="auto">
<a id="user-content-interoperability" class="anchor" aria-hidden="true" href="#interoperability"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Interoperability</h7>
<p dir="auto">It is tested to have basic compatibility with other Node.js MessagePack modules below:</p>
<ul dir="auto">
<li>
<a href="https://www.npmjs.com/package/msgpack" rel="nofollow">https://www.npmjs.com/package/msgpack</a> (1.0.2)</li>
<li>
<a href="https://www.npmjs.com/package/msgpack-js" rel="nofollow">https://www.npmjs.com/package/msgpack-js</a> (0.3.0)</li>
<li>
<a href="https://www.npmjs.com/package/msgpack-js-v5" rel="nofollow">https://www.npmjs.com/package/msgpack-js-v5</a> (0.3.0-v5)</li>
<li>
<a href="https://www.npmjs.com/package/msgpack-unpack" rel="nofollow">https://www.npmjs.com/package/msgpack-unpack</a> (2.1.1)</li>
<li>
<a href="https://github.com/msgpack/msgpack-javascript">https://github.com/msgpack/msgpack-javascript</a> (msgpack.codec)</li>
<li>
<a href="https://www.npmjs.com/package/msgpack5" rel="nofollow">https://www.npmjs.com/package/msgpack5</a> (3.3.0)</li>
<li>
<a href="https://www.npmjs.com/package/notepack" rel="nofollow">https://www.npmjs.com/package/notepack</a> (0.0.2)</li>
</ul>
<h7 dir="auto">
<a id="user-content-benchmarks" class="anchor" aria-hidden="true" href="#benchmarks"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Benchmarks</h7>
<p dir="auto">A benchmark tool <code>lib/benchmark.js</code> is available to compare encoding/decoding speed
(operation per second) with other MessagePack modules.
It counts operations of <a href="https://github.com/kawanet/msgpack-lite/blob/master/test/example.json">1KB JSON document</a> in 10 seconds.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ npm install msgpack msgpack-js msgpack-js-v5 msgpack-unpack msgpack5 notepack
$ npm run benchmark 10"><pre>$ npm install msgpack msgpack-js msgpack-js-v5 msgpack-unpack msgpack5 notepack
$ npm run benchmark 10</pre></div>
<table>
<thead>
<tr>
<th>operation</th>
<th align="right">op</th>
<th align="right">ms</th>
<th align="right">op/s</th>
</tr>
</thead>
<tbody>
<tr>
<td>buf = Buffer(JSON.stringify(obj));</td>
<td align="right">1055200</td>
<td align="right">10000</td>
<td align="right">105520</td>
</tr>
<tr>
<td>obj = JSON.parse(buf);</td>
<td align="right">863800</td>
<td align="right">10000</td>
<td align="right">86380</td>
</tr>
<tr>
<td>buf = require("msgpack-lite").encode(obj);</td>
<td align="right">969100</td>
<td align="right">10000</td>
<td align="right">96910</td>
</tr>
<tr>
<td>obj = require("msgpack-lite").decode(buf);</td>
<td align="right">600300</td>
<td align="right">10000</td>
<td align="right">60030</td>
</tr>
<tr>
<td>buf = require("msgpack").pack(obj);</td>
<td align="right">503500</td>
<td align="right">10001</td>
<td align="right">50344</td>
</tr>
<tr>
<td>obj = require("msgpack").unpack(buf);</td>
<td align="right">560200</td>
<td align="right">10001</td>
<td align="right">56014</td>
</tr>
<tr>
<td>buf = Buffer(require("msgpack.codec").msgpack.pack(obj));</td>
<td align="right">653500</td>
<td align="right">10000</td>
<td align="right">65349</td>
</tr>
<tr>
<td>obj = require("msgpack.codec").msgpack.unpack(buf);</td>
<td align="right">367500</td>
<td align="right">10001</td>
<td align="right">36746</td>
</tr>
<tr>
<td>buf = require("msgpack-js-v5").encode(obj);</td>
<td align="right">189500</td>
<td align="right">10002</td>
<td align="right">18946</td>
</tr>
<tr>
<td>obj = require("msgpack-js-v5").decode(buf);</td>
<td align="right">408900</td>
<td align="right">10000</td>
<td align="right">40890</td>
</tr>
<tr>
<td>buf = require("msgpack-js").encode(obj);</td>
<td align="right">189200</td>
<td align="right">10000</td>
<td align="right">18920</td>
</tr>
<tr>
<td>obj = require("msgpack-js").decode(buf);</td>
<td align="right">375600</td>
<td align="right">10002</td>
<td align="right">37552</td>
</tr>
<tr>
<td>buf = require("msgpack5")().encode(obj);</td>
<td align="right">110500</td>
<td align="right">10009</td>
<td align="right">11040</td>
</tr>
<tr>
<td>obj = require("msgpack5")().decode(buf);</td>
<td align="right">165500</td>
<td align="right">10000</td>
<td align="right">16550</td>
</tr>
<tr>
<td>buf = require("notepack")().encode(obj);</td>
<td align="right">847800</td>
<td align="right">10000</td>
<td align="right">84780</td>
</tr>
<tr>
<td>obj = require("notepack")().decode(buf);</td>
<td align="right">599800</td>
<td align="right">10000</td>
<td align="right">59980</td>
</tr>
<tr>
<td>obj = require("msgpack-unpack").decode(buf);</td>
<td align="right">48100</td>
<td align="right">10002</td>
<td align="right">4809</td>
</tr>
</tbody>
</table>
<p dir="auto">Streaming benchmark tool <code>lib/benchmark-stream.js</code> is also available.
It counts milliseconds for 1,000,000 operations of 30 bytes fluentd msgpack fragment.
This shows streaming encoding and decoding are super faster.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ npm run benchmark-stream 2"><pre>$ npm run benchmark-stream 2</pre></div>
<table>
<thead>
<tr>
<th>operation (1000000 x 2)</th>
<th align="right">op</th>
<th align="right">ms</th>
<th align="right">op/s</th>
</tr>
</thead>
<tbody>
<tr>
<td>stream.write(msgpack.encode(obj));</td>
<td align="right">1000000</td>
<td align="right">3027</td>
<td align="right">330360</td>
</tr>
<tr>
<td>stream.write(notepack.encode(obj));</td>
<td align="right">1000000</td>
<td align="right">2012</td>
<td align="right">497017</td>
</tr>
<tr>
<td>msgpack.Encoder().on("data",ondata).encode(obj);</td>
<td align="right">1000000</td>
<td align="right">2956</td>
<td align="right">338294</td>
</tr>
<tr>
<td>msgpack.createEncodeStream().write(obj);</td>
<td align="right">1000000</td>
<td align="right">1888</td>
<td align="right">529661</td>
</tr>
<tr>
<td>stream.write(msgpack.decode(buf));</td>
<td align="right">1000000</td>
<td align="right">2020</td>
<td align="right">495049</td>
</tr>
<tr>
<td>stream.write(notepack.decode(buf));</td>
<td align="right">1000000</td>
<td align="right">1794</td>
<td align="right">557413</td>
</tr>
<tr>
<td>msgpack.Decoder().on("data",ondata).decode(buf);</td>
<td align="right">1000000</td>
<td align="right">2744</td>
<td align="right">364431</td>
</tr>
<tr>
<td>msgpack.createDecodeStream().write(buf);</td>
<td align="right">1000000</td>
<td align="right">1341</td>
<td align="right">745712</td>
</tr>
</tbody>
</table>
<p dir="auto">Test environment: msgpack-lite 0.1.14, Node v4.2.3, Intel(R) Xeon(R) CPU E5-2666 v3 @ 2.90GHz</p>
<h7 dir="auto">
<a id="user-content-messagepack-mapping-table" class="anchor" aria-hidden="true" href="#messagepack-mapping-table"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack Mapping Table</h7>
<p dir="auto">The following table shows how JavaScript objects (value) will be mapped to
<a href="https://github.com/msgpack/msgpack/blob/master/spec.md">MessagePack formats</a>
and vice versa.</p>
<table>
<thead>
<tr>
<th>Source Value</th>
<th>MessagePack Format</th>
<th>Value Decoded</th>
</tr>
</thead>
<tbody>
<tr>
<td>null, undefined</td>
<td>nil format family</td>
<td>null</td>
</tr>
<tr>
<td>Boolean (true, false)</td>
<td>bool format family</td>
<td>Boolean (true, false)</td>
</tr>
<tr>
<td>Number (32bit int)</td>
<td>int format family</td>
<td>Number (int or double)</td>
</tr>
<tr>
<td>Number (64bit double)</td>
<td>float format family</td>
<td>Number (double)</td>
</tr>
<tr>
<td>String</td>
<td>str format family</td>
<td>String</td>
</tr>
<tr>
<td>Buffer</td>
<td>bin format family</td>
<td>Buffer</td>
</tr>
<tr>
<td>Array</td>
<td>array format family</td>
<td>Array</td>
</tr>
<tr>
<td>Map</td>
<td>map format family</td>
<td>Map (if <code>usemap=true</code>)</td>
</tr>
<tr>
<td>Object (plain object)</td>
<td>map format family</td>
<td>Object (or Map if <code>usemap=true</code>)</td>
</tr>
<tr>
<td>Object (see below)</td>
<td>ext format family</td>
<td>Object (see below)</td>
</tr>
</tbody>
</table>
<p dir="auto">Note that both <code>null</code> and <code>undefined</code> are mapped to nil <code>0xC1</code> type.
This means <code>undefined</code> value will be <em>upgraded</em> to <code>null</code> in other words.</p>
<h7 dir="auto">
<a id="user-content-extension-types" class="anchor" aria-hidden="true" href="#extension-types"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Extension Types</h7>
<p dir="auto">The MessagePack specification allows 128 application-specific extension types.
The library uses the following types to make round-trip conversion possible
for JavaScript native objects.</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Object</th>
<th>Type</th>
<th>Object</th>
</tr>
</thead>
<tbody>
<tr>
<td>0x00</td>
<td></td>
<td>0x10</td>
<td></td>
</tr>
<tr>
<td>0x01</td>
<td>EvalError</td>
<td>0x11</td>
<td>Int8Array</td>
</tr>
<tr>
<td>0x02</td>
<td>RangeError</td>
<td>0x12</td>
<td>Uint8Array</td>
</tr>
<tr>
<td>0x03</td>
<td>ReferenceError</td>
<td>0x13</td>
<td>Int16Array</td>
</tr>
<tr>
<td>0x04</td>
<td>SyntaxError</td>
<td>0x14</td>
<td>Uint16Array</td>
</tr>
<tr>
<td>0x05</td>
<td>TypeError</td>
<td>0x15</td>
<td>Int32Array</td>
</tr>
<tr>
<td>0x06</td>
<td>URIError</td>
<td>0x16</td>
<td>Uint32Array</td>
</tr>
<tr>
<td>0x07</td>
<td></td>
<td>0x17</td>
<td>Float32Array</td>
</tr>
<tr>
<td>0x08</td>
<td></td>
<td>0x18</td>
<td>Float64Array</td>
</tr>
<tr>
<td>0x09</td>
<td></td>
<td>0x19</td>
<td>Uint8ClampedArray</td>
</tr>
<tr>
<td>0x0A</td>
<td>RegExp</td>
<td>0x1A</td>
<td>ArrayBuffer</td>
</tr>
<tr>
<td>0x0B</td>
<td>Boolean</td>
<td>0x1B</td>
<td>Buffer</td>
</tr>
<tr>
<td>0x0C</td>
<td>String</td>
<td>0x1C</td>
<td></td>
</tr>
<tr>
<td>0x0D</td>
<td>Date</td>
<td>0x1D</td>
<td>DataView</td>
</tr>
<tr>
<td>0x0E</td>
<td>Error</td>
<td>0x1E</td>
<td></td>
</tr>
<tr>
<td>0x0F</td>
<td>Number</td>
<td>0x1F</td>
<td></td>
</tr>
</tbody>
</table>
<p dir="auto">Other extension types are mapped to built-in ExtBuffer object.</p>
<h7 dir="auto">
<a id="user-content-custom-extension-types-codecs" class="anchor" aria-hidden="true" href="#custom-extension-types-codecs"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Custom Extension Types (Codecs)</h7>
<p dir="auto">Register a custom extension type number to serialize/deserialize your own class instances.</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='var msgpack = require("msgpack-lite");

var codec = msgpack.createCodec();
codec.addExtPacker(0x3F, MyVector, myVectorPacker);
codec.addExtUnpacker(0x3F, myVectorUnpacker);

var data = new MyVector(1, 2);
var encoded = msgpack.encode(data, {codec: codec});
var decoded = msgpack.decode(encoded, {codec: codec});

function MyVector(x, y) {
  this.x = x;
  this.y = y;
}

function myVectorPacker(vector) {
  var array = [vector.x, vector.y];
  return msgpack.encode(array); // return Buffer serialized
}

function myVectorUnpacker(buffer) {
  var array = msgpack.decode(buffer);
  return new MyVector(array[0], array[1]); // return Object deserialized
}'><pre><span class="pl-k">var</span> <span class="pl-s1">msgpack</span> <span class="pl-c1">=</span> <span class="pl-en">require</span><span class="pl-kos">(</span><span class="pl-s">"msgpack-lite"</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">var</span> <span class="pl-s1">codec</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">createCodec</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">codec</span><span class="pl-kos">.</span><span class="pl-en">addExtPacker</span><span class="pl-kos">(</span><span class="pl-c1">0x3F</span><span class="pl-kos">,</span> <span class="pl-v">MyVector</span><span class="pl-kos">,</span> <span class="pl-s1">myVectorPacker</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">codec</span><span class="pl-kos">.</span><span class="pl-en">addExtUnpacker</span><span class="pl-kos">(</span><span class="pl-c1">0x3F</span><span class="pl-kos">,</span> <span class="pl-s1">myVectorUnpacker</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">var</span> <span class="pl-s1">data</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-v">MyVector</span><span class="pl-kos">(</span><span class="pl-c1">1</span><span class="pl-kos">,</span> <span class="pl-c1">2</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">var</span> <span class="pl-s1">encoded</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-s1">data</span><span class="pl-kos">,</span> <span class="pl-kos">{</span><span class="pl-c1">codec</span>: <span class="pl-s1">codec</span><span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">var</span> <span class="pl-s1">decoded</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-s1">encoded</span><span class="pl-kos">,</span> <span class="pl-kos">{</span><span class="pl-c1">codec</span>: <span class="pl-s1">codec</span><span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">function</span> <span class="pl-v">MyVector</span><span class="pl-kos">(</span><span class="pl-s1">x</span><span class="pl-kos">,</span> <span class="pl-s1">y</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
  <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">x</span> <span class="pl-c1">=</span> <span class="pl-s1">x</span><span class="pl-kos">;</span>
  <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">y</span> <span class="pl-c1">=</span> <span class="pl-s1">y</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span>

<span class="pl-k">function</span> <span class="pl-en">myVectorPacker</span><span class="pl-kos">(</span><span class="pl-s1">vector</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
  <span class="pl-k">var</span> <span class="pl-s1">array</span> <span class="pl-c1">=</span> <span class="pl-kos">[</span><span class="pl-s1">vector</span><span class="pl-kos">.</span><span class="pl-c1">x</span><span class="pl-kos">,</span> <span class="pl-s1">vector</span><span class="pl-kos">.</span><span class="pl-c1">y</span><span class="pl-kos">]</span><span class="pl-kos">;</span>
  <span class="pl-k">return</span> <span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-s1">array</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// return Buffer serialized</span>
<span class="pl-kos">}</span>

<span class="pl-k">function</span> <span class="pl-en">myVectorUnpacker</span><span class="pl-kos">(</span><span class="pl-s1">buffer</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
  <span class="pl-k">var</span> <span class="pl-s1">array</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-s1">buffer</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
  <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-v">MyVector</span><span class="pl-kos">(</span><span class="pl-s1">array</span><span class="pl-kos">[</span><span class="pl-c1">0</span><span class="pl-kos">]</span><span class="pl-kos">,</span> <span class="pl-s1">array</span><span class="pl-kos">[</span><span class="pl-c1">1</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// return Object deserialized</span>
<span class="pl-kos">}</span></pre></div>
<p dir="auto">The first argument of <code>addExtPacker</code> and <code>addExtUnpacker</code> should be an integer within the range of 0 and 127 (0x0 and 0x7F). <code>myClassPacker</code> is a function that accepts an instance of <code>MyClass</code>, and should return a buffer representing that instance. <code>myClassUnpacker</code> is the opposite: it accepts a buffer and should return an instance of <code>MyClass</code>.</p>
<p dir="auto">If you pass an array of functions to <code>addExtPacker</code> or <code>addExtUnpacker</code>, the value to be encoded/decoded will pass through each one in order. This allows you to do things like this:</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="codec.addExtPacker(0x00, Date, [Number, msgpack.encode]);"><pre><span class="pl-s1">codec</span><span class="pl-kos">.</span><span class="pl-en">addExtPacker</span><span class="pl-kos">(</span><span class="pl-c1">0x00</span><span class="pl-kos">,</span> <span class="pl-v">Date</span><span class="pl-kos">,</span> <span class="pl-kos">[</span><span class="pl-v">Number</span><span class="pl-kos">,</span> <span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-c1">encode</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">You can also pass the <code>codec</code> option to <code>msgpack.Decoder(options)</code>, <code>msgpack.Encoder(options)</code>, <code>msgpack.createEncodeStream(options)</code>, and <code>msgpack.createDecodeStream(options)</code>.</p>
<p dir="auto">If you wish to modify the default built-in codec, you can access it at <code>msgpack.codec.preset</code>.</p>
<h7 dir="auto">
<a id="user-content-custom-codec-options" class="anchor" aria-hidden="true" href="#custom-codec-options"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Custom Codec Options</h7>
<p dir="auto"><code>msgpack.createCodec()</code> function accepts some options.</p>
<p dir="auto">It does NOT have the preset extension types defined when no options given.</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="var codec = msgpack.createCodec();"><pre><span class="pl-k">var</span> <span class="pl-s1">codec</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">createCodec</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto"><code>preset</code>: It has the preset extension types described above.</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="var codec = msgpack.createCodec({preset: true});"><pre><span class="pl-k">var</span> <span class="pl-s1">codec</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">createCodec</span><span class="pl-kos">(</span><span class="pl-kos">{</span><span class="pl-c1">preset</span>: <span class="pl-c1">true</span><span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto"><code>safe</code>: It runs a validation of the value before writing it into buffer. This is the default behavior for some old browsers which do not support <code>ArrayBuffer</code> object.</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="var codec = msgpack.createCodec({safe: true});"><pre><span class="pl-k">var</span> <span class="pl-s1">codec</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">createCodec</span><span class="pl-kos">(</span><span class="pl-kos">{</span><span class="pl-c1">safe</span>: <span class="pl-c1">true</span><span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto"><code>useraw</code>: It uses <code>raw</code> formats instead of <code>bin</code> and <code>str</code>.</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="var codec = msgpack.createCodec({useraw: true});"><pre><span class="pl-k">var</span> <span class="pl-s1">codec</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">createCodec</span><span class="pl-kos">(</span><span class="pl-kos">{</span><span class="pl-c1">useraw</span>: <span class="pl-c1">true</span><span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto"><code>int64</code>: It decodes msgpack's <code>int64</code>/<code>uint64</code> formats with <a href="https://github.com/kawanet/int64-buffer">int64-buffer</a> object.</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="var codec = msgpack.createCodec({int64: true});"><pre><span class="pl-k">var</span> <span class="pl-s1">codec</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">createCodec</span><span class="pl-kos">(</span><span class="pl-kos">{</span><span class="pl-c1">int64</span>: <span class="pl-c1">true</span><span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto"><code>binarraybuffer</code>: It ties msgpack's <code>bin</code> format with <code>ArrayBuffer</code> object, instead of <code>Buffer</code> object.</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="var codec = msgpack.createCodec({binarraybuffer: true, preset: true});"><pre><span class="pl-k">var</span> <span class="pl-s1">codec</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">createCodec</span><span class="pl-kos">(</span><span class="pl-kos">{</span><span class="pl-c1">binarraybuffer</span>: <span class="pl-c1">true</span><span class="pl-kos">,</span> <span class="pl-c1">preset</span>: <span class="pl-c1">true</span><span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto"><code>uint8array</code>: It returns Uint8Array object when encoding, instead of <code>Buffer</code> object.</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="var codec = msgpack.createCodec({uint8array: true});"><pre><span class="pl-k">var</span> <span class="pl-s1">codec</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">createCodec</span><span class="pl-kos">(</span><span class="pl-kos">{</span><span class="pl-c1">uint8array</span>: <span class="pl-c1">true</span><span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto"><code>usemap</code>: Uses the global JavaScript Map type, if available, to unpack
MessagePack map elements.</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="var codec = msgpack.createCodec({usemap: true});"><pre><span class="pl-k">var</span> <span class="pl-s1">codec</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">createCodec</span><span class="pl-kos">(</span><span class="pl-kos">{</span><span class="pl-c1">usemap</span>: <span class="pl-c1">true</span><span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h7 dir="auto">
<a id="user-content-compatibility-mode" class="anchor" aria-hidden="true" href="#compatibility-mode"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Compatibility Mode</h7>
<p dir="auto">The <a href="https://github.com/kawanet/msgpack-lite/issues/22" data-hovercard-type="issue" data-hovercard-url="/kawanet/msgpack-lite/issues/22/hovercard">compatibility mode</a> respects for <a href="https://github.com/msgpack/msgpack/blob/master/spec-old.md">msgpack's old spec</a>. Set <code>true</code> to <code>useraw</code>.</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="// default mode handles both str and bin formats individually
msgpack.encode(&quot;Aa&quot;); // =&gt; &lt;Buffer a2 41 61&gt; (str format)
msgpack.encode(new Buffer([0x41, 0x61])); // =&gt; &lt;Buffer c4 02 41 61&gt; (bin format)

msgpack.decode(new Buffer([0xa2, 0x41, 0x61])); // =&gt; 'Aa' (String)
msgpack.decode(new Buffer([0xc4, 0x02, 0x41, 0x61])); // =&gt; &lt;Buffer 41 61&gt; (Buffer)

// compatibility mode handles only raw format both for String and Buffer
var options = {codec: msgpack.createCodec({useraw: true})};
msgpack.encode(&quot;Aa&quot;, options); // =&gt; &lt;Buffer a2 41 61&gt; (raw format)
msgpack.encode(new Buffer([0x41, 0x61]), options); // =&gt; &lt;Buffer a2 41 61&gt; (raw format)

msgpack.decode(new Buffer([0xa2, 0x41, 0x61]), options); // =&gt; &lt;Buffer 41 61&gt; (Buffer)
msgpack.decode(new Buffer([0xa2, 0x41, 0x61]), options).toString(); // =&gt; 'Aa' (String)"><pre><span class="pl-c">// default mode handles both str and bin formats individually</span>
<span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-s">"Aa"</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// =&gt; &lt;Buffer a2 41 61&gt; (str format)</span>
<span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-k">new</span> <span class="pl-v">Buffer</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-c1">0x41</span><span class="pl-kos">,</span> <span class="pl-c1">0x61</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// =&gt; &lt;Buffer c4 02 41 61&gt; (bin format)</span>

<span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-k">new</span> <span class="pl-v">Buffer</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-c1">0xa2</span><span class="pl-kos">,</span> <span class="pl-c1">0x41</span><span class="pl-kos">,</span> <span class="pl-c1">0x61</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// =&gt; 'Aa' (String)</span>
<span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-k">new</span> <span class="pl-v">Buffer</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-c1">0xc4</span><span class="pl-kos">,</span> <span class="pl-c1">0x02</span><span class="pl-kos">,</span> <span class="pl-c1">0x41</span><span class="pl-kos">,</span> <span class="pl-c1">0x61</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// =&gt; &lt;Buffer 41 61&gt; (Buffer)</span>

<span class="pl-c">// compatibility mode handles only raw format both for String and Buffer</span>
<span class="pl-k">var</span> <span class="pl-s1">options</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span><span class="pl-c1">codec</span>: <span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">createCodec</span><span class="pl-kos">(</span><span class="pl-kos">{</span><span class="pl-c1">useraw</span>: <span class="pl-c1">true</span><span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">}</span><span class="pl-kos">;</span>
<span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-s">"Aa"</span><span class="pl-kos">,</span> <span class="pl-s1">options</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// =&gt; &lt;Buffer a2 41 61&gt; (raw format)</span>
<span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-k">new</span> <span class="pl-v">Buffer</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-c1">0x41</span><span class="pl-kos">,</span> <span class="pl-c1">0x61</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-s1">options</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// =&gt; &lt;Buffer a2 41 61&gt; (raw format)</span>

<span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-k">new</span> <span class="pl-v">Buffer</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-c1">0xa2</span><span class="pl-kos">,</span> <span class="pl-c1">0x41</span><span class="pl-kos">,</span> <span class="pl-c1">0x61</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-s1">options</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// =&gt; &lt;Buffer 41 61&gt; (Buffer)</span>
<span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-k">new</span> <span class="pl-v">Buffer</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-c1">0xa2</span><span class="pl-kos">,</span> <span class="pl-c1">0x41</span><span class="pl-kos">,</span> <span class="pl-c1">0x61</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-s1">options</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">toString</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// =&gt; 'Aa' (String)</span></pre></div>
<h7 dir="auto">
<a id="user-content-repository" class="anchor" aria-hidden="true" href="#repository"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Repository</h7>
<ul dir="auto">
<li><a href="https://github.com/kawanet/msgpack-lite">https://github.com/kawanet/msgpack-lite</a></li>
</ul>
<h7 dir="auto">
<a id="user-content-see-also" class="anchor" aria-hidden="true" href="#see-also"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>See Also</h7>
<ul dir="auto">
<li><a href="http://msgpack.org/" rel="nofollow">http://msgpack.org/</a></li>
</ul>
<h7 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h7>
<p dir="auto">The MIT License (MIT)</p>
<p dir="auto">Copyright (c) 2015-2016 Yusuke Kawasaki</p>
<p dir="auto">Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>
<p dir="auto">The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.</p>
<p dir="auto">THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.</p>
</article>
  </div>
        </div>
        
        <div id="qs-ygoe-msgpack-js" class="qs"><h4><a href="https://github.com/ygoe/msgpack.js" target="_blank">ygoe/msgpack.js <span class="qs-url">https://github.com/ygoe/msgpack.js</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpackjs" class="anchor" aria-hidden="true" href="#msgpackjs"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack.js</h5>
<p dir="auto">This is a <a href="https://msgpack.org" rel="nofollow">MessagePack</a> serializer and deserializer written in JavaScript for web browsers (including IE 11) and Node.js.</p>
<p dir="auto">It is compact but still fully-featured. This library supports the complete <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">MessagePack specification</a> released on 2017-08-09, including date/time values. No other extension types are implemented in this library, its only the standard types which is perfectly fine for interoperability with MessagePack codecs in other programming languages.</p>
<p dir="auto">Im using the <a href="https://github.com/neuecc/MessagePack-CSharp/">MessagePack-CSharp</a> library on the server side in my .NET applications.</p>
<p dir="auto"><a href="https://www.npmjs.com/package/@ygoe/msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/a4f9726ced6a7e03bd3167acd01611172a58ce62431804b05f07fa3ce547c967/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f762f4079676f652f6d73677061636b2e737667" alt="NPM" data-canonical-src="https://img.shields.io/npm/v/@ygoe/msgpack.svg" style="max-width: 100%;"></a></p>
<h6 dir="auto">
<a id="user-content-messagepack" class="anchor" aria-hidden="true" href="#messagepack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack</h6>
<p dir="auto">MessagePack is an efficient binary serialisation format. It lets you exchange data among multiple languages like JSON. But its faster and smaller. Small integers are encoded into a single byte, and typical short strings require only one extra byte in addition to the strings themselves.</p>
<h6 dir="auto">
<a id="user-content-size" class="anchor" aria-hidden="true" href="#size"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Size</h6>
<p dir="auto">This library is very lightweight. The source code has around <strong>510 lines</strong> (incl. browser/Node detection), the minified file has 6.6 kB and can be GZip-compressed to <strong>2.4 kB</strong>.</p>
<h6 dir="auto">
<a id="user-content-performance" class="anchor" aria-hidden="true" href="#performance"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Performance</h6>
<p dir="auto">The file msgpack-tests.html contains some tests and a benchmark function that compares this library with <a href="https://github.com/kawanet/msgpack-lite">msgpack-lite</a>. Here are the results, in milliseconds (lower is better). All tests done on an Intel Core i7-3770 and Windows 10.</p>
<table>
<thead>
<tr>
<th align="left">Function</th>
<th align="right">Chrome 72</th>
<th align="right"></th>
<th align="right">Firefox 65</th>
<th align="right"></th>
<th align="right">Edge 16</th>
<th align="right"></th>
<th align="right">IE 11</th>
<th align="right"></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><strong>msgpack.js serialize</strong></td>
<td align="right">702 ms</td>
<td align="right">+6%</td>
<td align="right">1232 ms</td>
<td align="right">42%</td>
<td align="right">2483 ms</td>
<td align="right">+41%</td>
<td align="right">2493 ms</td>
<td align="right">3%</td>
</tr>
<tr>
<td align="left">msgpack-lite encode</td>
<td align="right">663 ms</td>
<td align="right"></td>
<td align="right">2124 ms</td>
<td align="right"></td>
<td align="right">1762 ms</td>
<td align="right"></td>
<td align="right">2578 ms</td>
<td align="right"></td>
</tr>
<tr>
<td align="left"><strong>msgpack.js deserialize</strong></td>
<td align="right">652 ms</td>
<td align="right">+13%</td>
<td align="right">869 ms</td>
<td align="right">+5%</td>
<td align="right">821 ms</td>
<td align="right">48%</td>
<td align="right">651 ms</td>
<td align="right">68%</td>
</tr>
<tr>
<td align="left">msgpack-lite decode</td>
<td align="right">577 ms</td>
<td align="right"></td>
<td align="right">827 ms</td>
<td align="right"></td>
<td align="right">1587 ms</td>
<td align="right"></td>
<td align="right">2021 ms</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<p dir="auto">The numbers show that this library is comparable with msgpack-lite. In Chrome its only 10% slower. But serializing in Firefox and deserializing in Microsoft browsers is twice as fast.</p>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<h7 dir="auto">
<a id="user-content-browser" class="anchor" aria-hidden="true" href="#browser"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Browser</h7>
<p dir="auto">In browsers, a global <code>msgpack</code> object is created that contains the functions <code>serialize</code> and <code>deserialize</code>. The first can be called with any data and returns the serialized bytes. The second works in reverse, taking the serialized bytes and returning the runtime value.</p>
<p dir="auto">Include the JavaScript file into your HTML document like this:</p>
<div class="highlight highlight-text-html-basic notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='&lt;script src="msgpack.min.js"&gt;&lt;/script&gt;'><pre><span class="pl-kos">&lt;</span><span class="pl-ent">script</span> <span class="pl-c1">src</span>="<span class="pl-s">msgpack.min.js</span>"<span class="pl-kos">&gt;</span><span class="pl-kos">&lt;/</span><span class="pl-ent">script</span><span class="pl-kos">&gt;</span></pre></div>
<p dir="auto">You can use the library functions after loading the script.</p>
<p dir="auto">If there should be a naming conflict with another library you want to load, you can change the global object name from <code>msgpack</code> to something else by setting <code>msgpackJsName</code> before loading the script file:</p>
<div class="highlight highlight-text-html-basic notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='&lt;script&gt;
    msgpackJsName = "msgpackJs";
&lt;/script&gt;
&lt;script src="msgpack.min.js"&gt;&lt;/script&gt;'><pre><span class="pl-kos">&lt;</span><span class="pl-ent">script</span><span class="pl-kos">&gt;</span>
    <span class="pl-s1">msgpackJsName</span> <span class="pl-c1">=</span> <span class="pl-s">"msgpackJs"</span><span class="pl-kos">;</span>
<span class="pl-kos">&lt;/</span><span class="pl-ent">script</span><span class="pl-kos">&gt;</span>
<span class="pl-kos">&lt;</span><span class="pl-ent">script</span> <span class="pl-c1">src</span>="<span class="pl-s">msgpack.min.js</span>"<span class="pl-kos">&gt;</span><span class="pl-kos">&lt;/</span><span class="pl-ent">script</span><span class="pl-kos">&gt;</span></pre></div>
<h7 dir="auto">
<a id="user-content-nodejs" class="anchor" aria-hidden="true" href="#nodejs"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Node.js</h7>
<p dir="auto">In Node.js, these functions are exported in the object you get from the <code>require</code> function.</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="var msgpack = require('@ygoe/msgpack');"><pre><span class="pl-k">var</span> <span class="pl-s1">msgpack</span> <span class="pl-c1">=</span> <span class="pl-en">require</span><span class="pl-kos">(</span><span class="pl-s">'@ygoe/msgpack'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h7 dir="auto">
<a id="user-content-example" class="anchor" aria-hidden="true" href="#example"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example</h7>
<p dir="auto">Heres a simple example:</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='// Define some data
var sourceData = {
    number: 123,
    number2: -0.129,
    text: "Abc with  and ",
    flag: true,
    list: [ 1, 2, 3 ],
    obj: { a: 1, b: "2", c: false, d: { a: 0, b: -1 } },
    time: Date.now()
};

// Serialize to byte array
var bytes = msgpack.serialize(sourceData);

// Deserialize again
var deserializedData = msgpack.deserialize(bytes);'><pre><span class="pl-c">// Define some data</span>
<span class="pl-k">var</span> <span class="pl-s1">sourceData</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
    <span class="pl-c1">number</span>: <span class="pl-c1">123</span><span class="pl-kos">,</span>
    <span class="pl-c1">number2</span>: <span class="pl-c1">-</span><span class="pl-c1">0.129</span><span class="pl-kos">,</span>
    <span class="pl-c1">text</span>: <span class="pl-s">"Abc with  and "</span><span class="pl-kos">,</span>
    <span class="pl-c1">flag</span>: <span class="pl-c1">true</span><span class="pl-kos">,</span>
    <span class="pl-c1">list</span>: <span class="pl-kos">[</span> <span class="pl-c1">1</span><span class="pl-kos">,</span> <span class="pl-c1">2</span><span class="pl-kos">,</span> <span class="pl-c1">3</span> <span class="pl-kos">]</span><span class="pl-kos">,</span>
    <span class="pl-c1">obj</span>: <span class="pl-kos">{</span> <span class="pl-c1">a</span>: <span class="pl-c1">1</span><span class="pl-kos">,</span> <span class="pl-c1">b</span>: <span class="pl-s">"2"</span><span class="pl-kos">,</span> <span class="pl-c1">c</span>: <span class="pl-c1">false</span><span class="pl-kos">,</span> <span class="pl-c1">d</span>: <span class="pl-kos">{</span> <span class="pl-c1">a</span>: <span class="pl-c1">0</span><span class="pl-kos">,</span> <span class="pl-c1">b</span>: <span class="pl-c1">-</span><span class="pl-c1">1</span> <span class="pl-kos">}</span> <span class="pl-kos">}</span><span class="pl-kos">,</span>
    <span class="pl-c1">time</span>: <span class="pl-v">Date</span><span class="pl-kos">.</span><span class="pl-en">now</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">;</span>

<span class="pl-c">// Serialize to byte array</span>
<span class="pl-k">var</span> <span class="pl-s1">bytes</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">serialize</span><span class="pl-kos">(</span><span class="pl-s1">sourceData</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// Deserialize again</span>
<span class="pl-k">var</span> <span class="pl-s1">deserializedData</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">deserialize</span><span class="pl-kos">(</span><span class="pl-s1">bytes</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h7 dir="auto">
<a id="user-content-compatibility" class="anchor" aria-hidden="true" href="#compatibility"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Compatibility</h7>
<p dir="auto">You can also use the functions <code>encode</code> and <code>decode</code> which are aliases to <code>serialize</code> and <code>deserialize</code>. This makes it easier to replace other libraries that use these function names with msgpack.js.</p>
<p dir="auto">New projects should use the preferred (and more precisely named) <code>serialize</code> and <code>deserialize</code> functions though.</p>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<p dir="auto"><a href="https://github.com/ygoe/msgpack.js/blob/master/LICENSE">MIT license</a></p>
</article>
  </div>
        </div>
        
        <div id="qs-textbook-express-msgpack" class="qs"><h4><a href="https://www.npmjs.com/package/express-msgpack" target="_blank">textbook/express-msgpack <span class="qs-url">https://www.npmjs.com/package/express-msgpack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-express-msgpack" class="anchor" aria-hidden="true" href="#express-msgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Express Msgpack</h5>
<p dir="auto"><a href="https://github.com/textbook/express-msgpack/blob/main/LICENSE"><img src="https://camo.githubusercontent.com/28a52d97d003af7a519d58854679b1abacfa8f71a7da509c0b2e7c708c637cbe/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f74657874626f6f6b2f657870726573732d6d73677061636b2e737667" alt="License" data-canonical-src="https://img.shields.io/github/license/textbook/express-msgpack.svg" style="max-width: 100%;"></a>
<a href="https://github.com/textbook/express-msgpack/actions"><img src="https://github.com/textbook/express-msgpack/workflows/Node.js%20CI/badge.svg?branch=main" alt="Build Status" style="max-width: 100%;"></a>
<a href="https://codeclimate.com/github/textbook/express-msgpack/test_coverage" rel="nofollow"><img src="https://camo.githubusercontent.com/d9a4eda6e027e26699f57da9904835df16aa59505a4b9b31ef033458cec987fa/68747470733a2f2f6170692e636f6465636c696d6174652e636f6d2f76312f6261646765732f65396138323065613737613031633162613862622f746573745f636f766572616765" alt="Test Coverage" data-canonical-src="https://api.codeclimate.com/v1/badges/e9a820ea77a01c1ba8bb/test_coverage" style="max-width: 100%;"></a>
<a href="https://codeclimate.com/github/textbook/express-msgpack/maintainability" rel="nofollow"><img src="https://camo.githubusercontent.com/74bdd14659f68722fa77fa4ab069c7ef0203ef1cc160ef1fc93400ff20ffdb71/68747470733a2f2f6170692e636f6465636c696d6174652e636f6d2f76312f6261646765732f65396138323065613737613031633162613862622f6d61696e7461696e6162696c697479" alt="Maintainability" data-canonical-src="https://api.codeclimate.com/v1/badges/e9a820ea77a01c1ba8bb/maintainability" style="max-width: 100%;"></a>
<a href="https://www.npmjs.com/package/express-msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/acaa9bfeeb2183b6e2c0cdd66911caf939b5aa9421f27a7bda8cb4bd7ae64a54/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f762f657870726573732d6d73677061636b2e737667" alt="NPM Version" data-canonical-src="https://img.shields.io/npm/v/express-msgpack.svg" style="max-width: 100%;"></a></p>
<p dir="auto"><a href="https://expressjs.com/" rel="nofollow">Express</a> and <a href="https://msgpack.org/" rel="nofollow">MessagePack</a>, together at last. Uses <a href="https://www.npmjs.com/package/@msgpack/msgpack" rel="nofollow"><code>@msgpack/msgpack</code></a> by default.</p>
<h6 dir="auto">
<a id="user-content-functionality" class="anchor" aria-hidden="true" href="#functionality"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Functionality</h6>
<p dir="auto">Provides transparent middleware that can be used to support clients requesting
<code>Accept: application/msgpack</code> from endpoints using <code>res.json</code> or sending
<code>Content-Type: application/msgpack</code> to any endpoint. You can continue to use
<code>req.body</code> and <code>res.json</code> and <code>expressMsgpack</code> will handle the conversion in
the background using <code>@msgpack/msgpack</code> (or any compatible library of your
choice).</p>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ npm install --save express-msgpack
// or
$ yarn add express-msgpack"><pre>$ npm install --save express-msgpack
// or
$ yarn add express-msgpack</pre></div>
<p dir="auto">If you intend to use an alternative to <code>@msgpack/msgpack</code> (see Configuration)
you can add the <code>--no-optional</code> flag; it's an optional dependency.</p>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import msgpack from "express-msgpack";

// ...
app.use(msgpack());'><pre><span class="pl-k">import</span> <span class="pl-s1">msgpack</span> <span class="pl-k">from</span> <span class="pl-s">"express-msgpack"</span><span class="pl-kos">;</span>

<span class="pl-c">// ...</span>
<span class="pl-s1">app</span><span class="pl-kos">.</span><span class="pl-en">use</span><span class="pl-kos">(</span><span class="pl-en">msgpack</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h6 dir="auto">
<a id="user-content-configuration" class="anchor" aria-hidden="true" href="#configuration"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Configuration</h6>
<p dir="auto">To configure, pass options when you configure the middleware. Currently supported options are:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>decoder</code></td>
<td>a function converting from MessagePack to JavaScript</td>
<td><code>@msgpack/msgpack#decode</code></td>
</tr>
<tr>
<td><code>encoder</code></td>
<td>a function converting from JavaScript to MessagePack</td>
<td>
<code>@msgpack/msgpack#encode</code> (with a wrapper to convert the result to a Buffer)</td>
</tr>
<tr>
<td><code>mimeType</code></td>
<td>the MIME type to detect and set for MessagePack payloads</td>
<td><code>"application/msgpack"</code></td>
</tr>
</tbody>
</table>
<p dir="auto">For example, to switch to the node-gyp C++ based <a href="https://www.npmjs.com/package/msgpack" rel="nofollow">msgpack</a> library:</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import msgpack from "express-msgpack";
import { pack, unpack } from "msgpack";

// ...
app.use(msgpack({ decoder: unpack, encoder: pack }));'><pre><span class="pl-k">import</span> <span class="pl-s1">msgpack</span> <span class="pl-k">from</span> <span class="pl-s">"express-msgpack"</span><span class="pl-kos">;</span>
<span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">pack</span><span class="pl-kos">,</span> <span class="pl-s1">unpack</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"msgpack"</span><span class="pl-kos">;</span>

<span class="pl-c">// ...</span>
<span class="pl-s1">app</span><span class="pl-kos">.</span><span class="pl-en">use</span><span class="pl-kos">(</span><span class="pl-en">msgpack</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">decoder</span>: <span class="pl-s1">unpack</span><span class="pl-kos">,</span> <span class="pl-c1">encoder</span>: <span class="pl-s1">pack</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h6 dir="auto">
<a id="user-content-development" class="anchor" aria-hidden="true" href="#development"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Development</h6>
<p dir="auto">The project has code linting and testing, using the following commands:</p>
<ul dir="auto">
<li>
<code>npm run e2e</code>: run the smoke/E2E tests</li>
<li>
<code>npm run lint</code>: run the ESLint checks</li>
<li>
<code>npm run ship</code>: lint and run unit, integration and E2E tests</li>
<li>
<code>npm test</code>: run the Jest unit and integration tests</li>
<li>
<code>npm test:watch</code>: run the tests in watch mode</li>
</ul>
<p dir="auto">The tests are in the <code>__tests__/</code> directory and are run using <a href="https://jestjs.io/" rel="nofollow">Jest</a>. They're
split into two files:</p>
<ul dir="auto">
<li>
<code>unit.test.ts</code> - mockist unit tests, to check specific internal details</li>
<li>
<code>integration.test.ts</code> - integration tests using <a href="https://github.com/visionmedia/supertest">SuperTest</a> with a simple
Express app using the middleware</li>
</ul>
<p dir="auto">There is also a <code>smoke/</code> directory containing E2E/smoke tests for a deployed
version of the package, used by <code>bin/smoke.sh</code>. If the <code>--local</code> argument is
supplied to the script the local version is packaged and tested , otherwise
the specified <code>$TAG</code> version is installed from the registry and tested.</p>
</article>
  </div>
        </div>
        
        <div id="qs-kriszyp-msgpackr" class="qs"><h4><a href="https://github.com/kriszyp/msgpackr" target="_blank">kriszyp/msgpackr <span class="qs-url">https://github.com/kriszyp/msgpackr</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpackr" class="anchor" aria-hidden="true" href="#msgpackr"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpackr</h5>
<p dir="auto"><a href="https://www.npmjs.org/package/msgpackr" rel="nofollow"><img src="https://camo.githubusercontent.com/fd984c8336bc7f56d518da36e8fc1f4358ac7afdfa6f9d1003355151841b7551/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f762f6d73677061636b722e7376673f7374796c653d666c61742d737175617265" alt="npm version" data-canonical-src="https://img.shields.io/npm/v/msgpackr.svg?style=flat-square" style="max-width: 100%;"></a>
<a href="https://www.npmjs.org/package/msgpackr" rel="nofollow"><img src="https://camo.githubusercontent.com/79582e68668b52b40c7db2c601b9a66b584733c151f0f45563a81371fcd46aa5/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f64772f6d73677061636b72" alt="npm version" data-canonical-src="https://img.shields.io/npm/dw/msgpackr" style="max-width: 100%;"></a>
<a href="/kriszyp/msgpackr/blob/master/benchmark.md"><img src="https://camo.githubusercontent.com/e0de3ef8b01c08637aaca4aac0f4b69391ab417789eaec1d5d9281ba5d8b300d/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f656e636f64652d312e354742253246732d79656c6c6f77" alt="encode" data-canonical-src="https://img.shields.io/badge/encode-1.5GB%2Fs-yellow" style="max-width: 100%;"></a>
<a href="/kriszyp/msgpackr/blob/master/benchmark.md"><img src="https://camo.githubusercontent.com/d90a21e82ab5133d08381dd897b97844b9954465ca2bee29b468223c74e9d083/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6465636f64652d324742253246732d79656c6c6f77" alt="decode" data-canonical-src="https://img.shields.io/badge/decode-2GB%2Fs-yellow" style="max-width: 100%;"></a>
<a href="/kriszyp/msgpackr/blob/master/README.md"><img src="https://camo.githubusercontent.com/782b77c531900e9c30ad3a64c017967ceb7f3ed2e74ba69a4325c23ec94dd192/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f74797065732f6d73677061636b72" alt="types" data-canonical-src="https://img.shields.io/npm/types/msgpackr" style="max-width: 100%;"></a>
<a href="/kriszyp/msgpackr/blob/master/README.md"><img src="https://camo.githubusercontent.com/2e72fa5883c10be3b634b31bddd2f340edfd81b0e601797036a39433a96b07a8/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6d6f64756c652d45534d253246434a532d626c7565" alt="module" data-canonical-src="https://img.shields.io/badge/module-ESM%2FCJS-blue" style="max-width: 100%;"></a>
<a href="/kriszyp/msgpackr/blob/master/LICENSE"><img src="https://camo.githubusercontent.com/8bb1977f745ee8c8107f711ecfa901421a9b929f308fd431f7211508f8ddbd87/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4d49542d627269676874677265656e" alt="license" data-canonical-src="https://img.shields.io/badge/license-MIT-brightgreen" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer" href="/kriszyp/msgpackr/blob/master/assets/performance.png"><img align="right" src="/kriszyp/msgpackr/raw/master/assets/performance.png" width="380" style="max-width: 100%;"></a></p>
<p dir="auto">The msgpackr package is an extremely fast MessagePack NodeJS/JavaScript implementation. Currently, it is significantly faster than any other known implementations, faster than Avro (for JS), and generally faster than native V8 JSON.stringify/parse, on NodeJS. It also includes an optional record extension (the <code>r</code> in msgpackr), for defining record structures that makes MessagePack even faster and more compact, often over twice as fast as even native JSON functions, several times faster than other JS implementations, and 15-50% more compact. See the performance section for more details. Structured cloning (with support for cyclical references) is also supported through optional extensions.</p>
<h6 dir="auto">
<a id="user-content-basic-usage" class="anchor" aria-hidden="true" href="#basic-usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Basic Usage</h6>
<p dir="auto">Install with:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="npm i msgpackr"><pre class="notranslate"><code>npm i msgpackr
</code></pre></div>
<p dir="auto">And <code>import</code> or <code>require</code> it for basic standard serialization/encoding (<code>pack</code>) and deserialization/decoding (<code>unpack</code>) functions:</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="import { unpack, pack } from 'msgpackr';
let serializedAsBuffer = pack(value);
let data = unpack(serializedAsBuffer);"><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">unpack</span><span class="pl-kos">,</span> <span class="pl-s1">pack</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">'msgpackr'</span><span class="pl-kos">;</span>
<span class="pl-k">let</span> <span class="pl-s1">serializedAsBuffer</span> <span class="pl-c1">=</span> <span class="pl-en">pack</span><span class="pl-kos">(</span><span class="pl-s1">value</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">let</span> <span class="pl-s1">data</span> <span class="pl-c1">=</span> <span class="pl-en">unpack</span><span class="pl-kos">(</span><span class="pl-s1">serializedAsBuffer</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">This <code>pack</code> function will generate standard MessagePack without any extensions that should be compatible with any standard MessagePack parser/decoder. It will serialize JavaScript objects as MessagePack <code>map</code>s by default. The <code>unpack</code> function will deserialize MessagePack <code>map</code>s as an <code>Object</code> with the properties from the map.</p>
<h6 dir="auto">
<a id="user-content-node-usage" class="anchor" aria-hidden="true" href="#node-usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Node Usage</h6>
<p dir="auto">The msgpackr package runs on any modern JS platform, but is optimized for NodeJS usage (and will use a node addon for performance boost as an optional dependency).</p>
<h7 dir="auto">
<a id="user-content-streams" class="anchor" aria-hidden="true" href="#streams"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Streams</h7>
<p dir="auto">We can use the including streaming functionality (which further improves performance). The <code>PackrStream</code> is a NodeJS transform stream that can be used to serialize objects to a binary stream (writing to network/socket, IPC, etc.), and the <code>UnpackrStream</code> can be used to deserialize objects from a binary sream (reading from network/socket, etc.):</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="import { PackrStream } from 'msgpackr';
let stream = new PackrStream();
stream.write(myData);
"><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-v">PackrStream</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">'msgpackr'</span><span class="pl-kos">;</span>
<span class="pl-k">let</span> <span class="pl-s1">stream</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-v">PackrStream</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">stream</span><span class="pl-kos">.</span><span class="pl-en">write</span><span class="pl-kos">(</span><span class="pl-s1">myData</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">Or for a full example of sending and receiving data on a stream:</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="import { PackrStream } from 'msgpackr';
let sendingStream = new PackrStream();
let receivingStream = new UnpackrStream();
// we are just piping to our own stream, but normally you would send and
// receive over some type of inter-process or network connection.
sendingStream.pipe(receivingStream);
sendingStream.write(myData);
receivingStream.on('data', (data) =&gt; {
	// received data
});"><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-v">PackrStream</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">'msgpackr'</span><span class="pl-kos">;</span>
<span class="pl-k">let</span> <span class="pl-s1">sendingStream</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-v">PackrStream</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">let</span> <span class="pl-s1">receivingStream</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-v">UnpackrStream</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-c">// we are just piping to our own stream, but normally you would send and</span>
<span class="pl-c">// receive over some type of inter-process or network connection.</span>
<span class="pl-s1">sendingStream</span><span class="pl-kos">.</span><span class="pl-en">pipe</span><span class="pl-kos">(</span><span class="pl-s1">receivingStream</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">sendingStream</span><span class="pl-kos">.</span><span class="pl-en">write</span><span class="pl-kos">(</span><span class="pl-s1">myData</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">receivingStream</span><span class="pl-kos">.</span><span class="pl-en">on</span><span class="pl-kos">(</span><span class="pl-s">'data'</span><span class="pl-kos">,</span> <span class="pl-kos">(</span><span class="pl-s1">data</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
	<span class="pl-c">// received data</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">The <code>PackrStream</code> and <code>UnpackrStream</code> instances  will have also the record structure extension enabled by default (see below).</p>
<h6 dir="auto">
<a id="user-content-deno-usage" class="anchor" aria-hidden="true" href="#deno-usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Deno Usage</h6>
<p dir="auto">Msgpackr modules are standard ESM modules and can be loaded directly from the <a href="https://deno.land/x/msgpackr" rel="nofollow">deno.land registry for msgpackr</a> for use in Deno. The standard pack/encode and unpack/decode functionality is available on Deno, like other platforms.</p>
<h6 dir="auto">
<a id="user-content-browser-usage" class="anchor" aria-hidden="true" href="#browser-usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Browser Usage</h6>
<p dir="auto">Msgpackr works as standalone JavaScript as well, and runs on modern browsers. It includes a bundled script, at <code>dist/index.js</code> for ease of direct loading:</p>
<div class="highlight highlight-text-html-basic notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='&lt;script src="node_modules/msgpackr/dist/index.js"&gt;&lt;/script&gt;'><pre><span class="pl-kos">&lt;</span><span class="pl-ent">script</span> <span class="pl-c1">src</span>="<span class="pl-s">node_modules/msgpackr/dist/index.js</span>"<span class="pl-kos">&gt;</span><span class="pl-kos">&lt;/</span><span class="pl-ent">script</span><span class="pl-kos">&gt;</span></pre></div>
<p dir="auto">This is UMD based, and will register as a module if possible, or create a <code>msgpackr</code> global with all the exported functions.</p>
<p dir="auto">For module-based development, it is recommended that you directly import the module of interest, to minimize dependencies that get pulled into your application:</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="import { unpack } from 'msgpackr/unpack' // if you only need to unpack"><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">unpack</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">'msgpackr/unpack'</span> <span class="pl-c">// if you only need to unpack</span></pre></div>
<h6 dir="auto">
<a id="user-content-structured-cloning" class="anchor" aria-hidden="true" href="#structured-cloning"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Structured Cloning</h6>
<p dir="auto">You can also use msgpackr for <a href="https://html.spec.whatwg.org/multipage/structured-data.html" rel="nofollow">structured cloning</a>. By enabling the <code>structuredClone</code> option, you can include references to other objects or cyclic references, and object identity will be preserved. Structured cloning also enables preserving certain typed objects like <code>Error</code>, <code>Set</code>, <code>RegExp</code> and TypedArray instances. For example:</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="let obj = {
	set: new Set(['a', 'b']),
	regular: /a\spattern/
};
obj.self = obj;
let packr = new Packr({ structuredClone: true });
let serialized = packr.pack(obj);
let copy = packr.unpack(serialized);
copy.self === copy // true
copy.set.has('a') // true
"><pre><span class="pl-k">let</span> <span class="pl-s1">obj</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
	<span class="pl-c1">set</span>: <span class="pl-k">new</span> <span class="pl-v">Set</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-s">'a'</span><span class="pl-kos">,</span> <span class="pl-s">'b'</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
	<span class="pl-c1">regular</span>: <span class="pl-pds"><span class="pl-c1">/</span>a<span class="pl-cce">\s</span>pattern<span class="pl-c1">/</span></span>
<span class="pl-kos">}</span><span class="pl-kos">;</span>
<span class="pl-s1">obj</span><span class="pl-kos">.</span><span class="pl-c1">self</span> <span class="pl-c1">=</span> <span class="pl-s1">obj</span><span class="pl-kos">;</span>
<span class="pl-k">let</span> <span class="pl-s1">packr</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-v">Packr</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">structuredClone</span>: <span class="pl-c1">true</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">let</span> <span class="pl-s1">serialized</span> <span class="pl-c1">=</span> <span class="pl-s1">packr</span><span class="pl-kos">.</span><span class="pl-en">pack</span><span class="pl-kos">(</span><span class="pl-s1">obj</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">let</span> <span class="pl-s1">copy</span> <span class="pl-c1">=</span> <span class="pl-s1">packr</span><span class="pl-kos">.</span><span class="pl-en">unpack</span><span class="pl-kos">(</span><span class="pl-s1">serialized</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">copy</span><span class="pl-kos">.</span><span class="pl-c1">self</span> <span class="pl-c1">===</span> <span class="pl-s1">copy</span> <span class="pl-c">// true</span>
<span class="pl-s1">copy</span><span class="pl-kos">.</span><span class="pl-c1">set</span><span class="pl-kos">.</span><span class="pl-en">has</span><span class="pl-kos">(</span><span class="pl-s">'a'</span><span class="pl-kos">)</span> <span class="pl-c">// true</span></pre></div>
<p dir="auto">This option is disabled by default because it uses extensions and reference checking degrades performance (by about 25-30%). (Note this implementation doesn't serialize every class/type specified in the HTML specification since not all of them make sense for storing across platforms.)</p>
<h7 dir="auto">
<a id="user-content-alternate-terminology" class="anchor" aria-hidden="true" href="#alternate-terminology"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Alternate Terminology</h7>
<p dir="auto">If you prefer to use encoder/decode terminology, msgpackr exports aliases, so <code>decode</code> is equivalent to <code>unpack</code>, <code>encode</code> is <code>pack</code>, <code>Encoder</code> is <code>Packr</code>, <code>Decoder</code> is <code>Unpackr</code>, and <code>EncoderStream</code> and <code>DecoderStream</code> can be used as well.</p>
<h6 dir="auto">
<a id="user-content-record--object-structures" class="anchor" aria-hidden="true" href="#record--object-structures"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Record / Object Structures</h6>
<p dir="auto">There is a critical difference between maps (or dictionaries) that hold an arbitrary set of keys and values (JavaScript <code>Map</code> is designed for these), and records or object structures that have a well-defined set of fields. Typical JS objects/records may have many instances re(use) the same structure. By using the record extension, this distinction is preserved in MessagePack and the encoding can reuse structures and not only provides better type preservation, but yield much more compact encodings and increase decoding performance by 2-3x. Msgpackr automatically generates record definitions that are reused and referenced by objects with the same structure. There are a number of ways to use this to our advantage. For large object structures with repeating nested objects with similar structures, simply serializing with the record extension can yield significant benefits. To use the record structures extension, we create a new <code>Packr</code> instance. By default a new <code>Packr</code> instance will have the record extension enabled:</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="import { Packr } from 'msgpackr';
let packr = new Packr();
packr.pack(bigDataWithLotsOfObjects);
"><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-v">Packr</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">'msgpackr'</span><span class="pl-kos">;</span>
<span class="pl-k">let</span> <span class="pl-s1">packr</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-v">Packr</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">packr</span><span class="pl-kos">.</span><span class="pl-en">pack</span><span class="pl-kos">(</span><span class="pl-s1">bigDataWithLotsOfObjects</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">Another way to further leverage the benefits of the msgpackr record structures is to use streams that naturally allow for data to reuse based on previous record structures. The stream classes have the record structure extension enabled by default and provide excellent out-of-the-box performance.</p>
<p dir="auto">When creating a new <code>Packr</code>, <code>Unpackr</code>, <code>PackrStream</code>, or <code>UnpackrStream</code> instance, we can enable or disable the record structure extension with the <code>useRecords</code> property. When this is <code>false</code>, the record structure extension will be disabled (standard/compatibility mode), and all objects will revert to being serialized using MessageMap <code>map</code>s, and all <code>map</code>s will be deserialized to JS <code>Object</code>s as properties (like the standalone <code>pack</code> and <code>unpack</code> functions).</p>
<p dir="auto">Streaming with record structures works by encoding a structure the first time it is seen in a stream and referencing the structure in later messages that are sent across that stream. When an encoder can expect a decoder to understand previous structure references, this can be configured using the <code>sequential: true</code> flag, which is auto-enabled by streams, but can also be used with Packr instances.</p>
<h7 dir="auto">
<a id="user-content-shared-record-structures" class="anchor" aria-hidden="true" href="#shared-record-structures"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Shared Record Structures</h7>
<p dir="auto">Another useful way of using msgpackr, and the record extension, is for storing data in a databases, files, or other storage systems. If a number of objects with common data structures are being stored, a shared structure can be used to greatly improve data storage and deserialization efficiency. In the simplest form, provide a <code>structures</code> array, which is updated if any new object structure is encountered:</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="import { Packr } from 'msgpackr';
let packr = new Packr({
	structures: [... structures that were last generated ...]
});"><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-v">Packr</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">'msgpackr'</span><span class="pl-kos">;</span>
<span class="pl-k">let</span> <span class="pl-s1">packr</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-v">Packr</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
	<span class="pl-c1">structures</span>: <span class="pl-kos">[</span>... <span class="pl-s1">structures</span> <span class="pl-s1">that</span> <span class="pl-s1">were</span> <span class="pl-s1">last</span> <span class="pl-s1">generated</span> <span class="pl-kos">.</span><span class="pl-kos">.</span><span class="pl-kos">.</span><span class="pl-kos">]</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">If you are working with persisted data, you will need to persist the <code>structures</code> data when it is updated. Msgpackr provides an API for loading and saving the <code>structures</code> on demand (which is robust and can be used in multiple-process situations where other processes may be updating this same <code>structures</code> array), we just need to provide a way to store the generated shared structure so it is available to deserialize stored data in the future:</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="import { Packr } from 'msgpackr';
let packr = new Packr({
	getStructures() {
		// storing our data in file (but we could also store in a db or key-value store)
		return unpack(readFileSync('my-shared-structures.mp')) || [];
	},
	saveStructures(structures) {
		writeFileSync('my-shared-structures.mp', pack(structures));
	}
});"><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-v">Packr</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">'msgpackr'</span><span class="pl-kos">;</span>
<span class="pl-k">let</span> <span class="pl-s1">packr</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-v">Packr</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
	<span class="pl-en">getStructures</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
		<span class="pl-c">// storing our data in file (but we could also store in a db or key-value store)</span>
		<span class="pl-k">return</span> <span class="pl-en">unpack</span><span class="pl-kos">(</span><span class="pl-en">readFileSync</span><span class="pl-kos">(</span><span class="pl-s">'my-shared-structures.mp'</span><span class="pl-kos">)</span><span class="pl-kos">)</span> <span class="pl-c1">||</span> <span class="pl-kos">[</span><span class="pl-kos">]</span><span class="pl-kos">;</span>
	<span class="pl-kos">}</span><span class="pl-kos">,</span>
	<span class="pl-en">saveStructures</span><span class="pl-kos">(</span><span class="pl-s1">structures</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
		<span class="pl-en">writeFileSync</span><span class="pl-kos">(</span><span class="pl-s">'my-shared-structures.mp'</span><span class="pl-kos">,</span> <span class="pl-en">pack</span><span class="pl-kos">(</span><span class="pl-s1">structures</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
	<span class="pl-kos">}</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">Msgpackr will automatically add and saves structures as it encounters any new object structures (up to a limit of 32, by default). It will always add structures in an incremental/compatible way: Any object encoded with an earlier structure can be decoded with a later version (as long as it is persisted).</p>
<h8 dir="auto">
<a id="user-content-shared-structures-options" class="anchor" aria-hidden="true" href="#shared-structures-options"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Shared Structures Options</h8>
<p dir="auto">By default there is a limit of 32 shared structures. This default is designed to record common shared structures, but also be resilient against sharing too many structures if there are many objects with dynamic properties that are likely to be repeated. This also allows for slightly more efficient one byte encoding. However, if your application has more structures that are commonly repeated, you can increase this limit by setting <code>maxSharedStructures</code> to a higher value. The maximum supported shared structures is 8160.</p>
<p dir="auto">You can also provide a <code>shouldShareStructure</code> function in the options if you want to specifically indicate which structures should be shared. This is called during the encoding process with the array of keys for a structure that is being considered for addition to the shared structure. For example, you might want:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="	maxSharedStructures: 100,
	shouldShareStructure(keys) {
		return !(keys[0] &gt; 1) // don't share structures that consist of numbers as keys
	}"><pre class="notranslate"><code>	maxSharedStructures: 100,
	shouldShareStructure(keys) {
		return !(keys[0] &gt; 1) // don't share structures that consist of numbers as keys
	}
</code></pre></div>
<h7 dir="auto">
<a id="user-content-reading-multiple-values" class="anchor" aria-hidden="true" href="#reading-multiple-values"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Reading Multiple Values</h7>
<p dir="auto">If you have a buffer with multiple values sequentially encoded, you can choose to parse and read multiple values. This can be done using the <code>unpackMultiple</code> function/method, which can return an array of all the values it can sequentially parse within the provided buffer. For example:</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="let data = new Uint8Array([1, 2, 3]) // encodings of values 1, 2, and 3
let values = unpackMultiple(data) // [1, 2, 3]"><pre><span class="pl-k">let</span> <span class="pl-s1">data</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-v">Uint8Array</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-c1">1</span><span class="pl-kos">,</span> <span class="pl-c1">2</span><span class="pl-kos">,</span> <span class="pl-c1">3</span><span class="pl-kos">]</span><span class="pl-kos">)</span> <span class="pl-c">// encodings of values 1, 2, and 3</span>
<span class="pl-k">let</span> <span class="pl-s1">values</span> <span class="pl-c1">=</span> <span class="pl-en">unpackMultiple</span><span class="pl-kos">(</span><span class="pl-s1">data</span><span class="pl-kos">)</span> <span class="pl-c">// [1, 2, 3]</span></pre></div>
<p dir="auto">Alternately, you can provide a callback function that is called as the parsing occurs with each value, and can optionally terminate the parsing by returning <code>false</code>:</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="let data = new Uint8Array([1, 2, 3]) // encodings of values 1, 2, and 3
unpackMultiple(data, (value) =&gt; {
	// called for each value
	// return false if you wish to end the parsing
})"><pre><span class="pl-k">let</span> <span class="pl-s1">data</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-v">Uint8Array</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-c1">1</span><span class="pl-kos">,</span> <span class="pl-c1">2</span><span class="pl-kos">,</span> <span class="pl-c1">3</span><span class="pl-kos">]</span><span class="pl-kos">)</span> <span class="pl-c">// encodings of values 1, 2, and 3</span>
<span class="pl-en">unpackMultiple</span><span class="pl-kos">(</span><span class="pl-s1">data</span><span class="pl-kos">,</span> <span class="pl-kos">(</span><span class="pl-s1">value</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
	<span class="pl-c">// called for each value</span>
	<span class="pl-c">// return false if you wish to end the parsing</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span></pre></div>
<h6 dir="auto">
<a id="user-content-options" class="anchor" aria-hidden="true" href="#options"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Options</h6>
<p dir="auto">The following options properties can be provided to the Packr or Unpackr constructor:</p>
<ul dir="auto">
<li>
<code>useRecords</code> - Setting this to <code>false</code> disables the record extension and stores JavaScript objects as MessagePack maps, and unpacks maps as JavaScript <code>Object</code>s, which ensures compatibilty with other decoders.</li>
<li>
<code>structures</code> - Provides the array of structures that is to be used for record extension, if you want the structures saved and used again. This array will be modified in place with new record structures that are serialized (if less than 32 structures are in the array).</li>
<li>
<code>moreTypes</code> - Enable serialization of additional built-in types/classes including typed arrays, <code>Set</code>s, <code>Map</code>s, and <code>Error</code>s.</li>
<li>
<code>structuredClone</code> - This enables the structured cloning extensions that will encode object/cyclic references. <code>moreTypes</code> is enabled by default when this is enabled.</li>
<li>
<code>mapsAsObjects</code> - If <code>true</code>, this will decode MessagePack maps and JS <code>Object</code>s with the map entries decoded to object properties. If <code>false</code>, maps are decoded as JavaScript <code>Map</code>s. This is disabled by default if <code>useRecords</code> is enabled (which allows <code>Map</code>s to be preserved), and is enabled by default if <code>useRecords</code> is disabled.</li>
<li>
<code>useFloat32</code> - This will enable msgpackr to encode non-integer numbers as <code>float32</code>. See next section for possible values.</li>
<li>
<code>variableMapSize</code> - This will use varying map size definition (fixmap, map16, map32) based on the number of keys when encoding objects, which yields slightly more compact encodings (for small objects), but is typically 5-10% slower during encoding. This is necessary if you need to use objects with more than 65535 keys. This is only relevant when record extension is disabled.</li>
<li>
<code>bundleStrings</code> - If <code>true</code> this uses a custom extension that bundles strings together, so that they can be decoded more quickly on browsers and Deno that do not have access to the NodeJS addon. This a custom extension, so both encoder and decoder need to support this. This can yield significant decoding performance increases on browsers (30%-50%).</li>
<li>
<code>copyBuffers</code> - When decoding a MessagePack with binary data (Buffers are encoded as binary data), copy the buffer rather than providing a slice/view of the buffer. If you want your input data to be collected or modified while the decoded embedded buffer continues to live on, you can use this option (there is extra overhead to copying).</li>
<li>
<code>useTimestamp32</code> - Encode JS <code>Date</code>s in 32-bit format when possible by dropping the milliseconds. This is a more efficient encoding of dates. You can also cause dates to use 32-bit format by manually setting the milliseconds to zero (<code>date.setMilliseconds(0)</code>).</li>
<li>
<code>sequential</code> - Encode structures in serialized data, and reference previously encoded structures with expectation that decoder will read the encoded structures in the same order as encoded, with <code>unpackMultiple</code>.</li>
<li>
<code>largeBigIntToFloat</code> - If a bigint needs to be encoded that is larger than will fit in 64-bit integers, it will be encoded as a float-64 (otherwise will throw a RangeError).</li>
<li>
<code>encodeUndefinedAsNil</code> - Encodes a value of <code>undefined</code> as a MessagePack <code>nil</code>, the same as a <code>null</code>.</li>
<li>
<code>int64AsNumber</code> - This will decode uint64 and int64 numbers as standard JS numbers rather than as bigint numbers.</li>
<li>
<code>onInvalidDate</code> - This can be provided as function that will be called when an invalid date is provided. The function can throw an error, or return a value that will be encoded in place of the invalid date. If not provided, an invalid date will be encoded as an invalid timestamp (which decodes with msgpackr back to an invalid date).</li>
</ul>
<h7 dir="auto">
<a id="user-content-32-bit-float-options" class="anchor" aria-hidden="true" href="#32-bit-float-options"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>32-bit Float Options</h7>
<p dir="auto">By default all non-integer numbers are serialized as 64-bit float (double). This is fast, and ensures maximum precision. However, often real-world data doesn't not need 64-bits of precision, and using 32-bit encoding can be much more space efficient. There are several options that provide more efficient encodings. Using the decimal rounding options for encoding and decoding provides lossless storage of common decimal representations like 7.99, in more efficient 32-bit format (rather than 64-bit). The <code>useFloat32</code> property has several possible options, available from the module as constants:</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="import { FLOAT32_OPTIONS } from 'msgpackr';
const { ALWAYS, DECIMAL_ROUND, DECIMAL_FIT } = FLOAT32_OPTIONS;"><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-c1">FLOAT32_OPTIONS</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">'msgpackr'</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-kos">{</span> <span class="pl-c1">ALWAYS</span><span class="pl-kos">,</span> <span class="pl-c1">DECIMAL_ROUND</span><span class="pl-kos">,</span> <span class="pl-c1">DECIMAL_FIT</span> <span class="pl-kos">}</span> <span class="pl-c1">=</span> <span class="pl-c1">FLOAT32_OPTIONS</span><span class="pl-kos">;</span></pre></div>
<ul dir="auto">
<li>
<code>ALWAYS</code> (1) - Always will encode non-integers (absolute less than 2147483648) as 32-bit float.</li>
<li>
<code>DECIMAL_ROUND</code> (3) - Always will encode non-integers as 32-bit float, and when decoding 32-bit float, round to the significant decimal digits (usually 7, but 6 or 8 digits for some ranges).</li>
<li>
<code>DECIMAL_FIT</code> (4) - Only encode non-integers as 32-bit float if all significant digits (usually up to 7) can be unambiguously encoded as a 32-bit float, and decode/unpack with decimal rounding (same as above). This will ensure round-trip encoding/decoding without loss in precision and uses 32-bit when possible.</li>
</ul>
<p dir="auto">Note, that the performance is decreased with decimal rounding by about 20-25%, although if only 5% of your values are floating point, that will only have about a 1% impact overall.</p>
<p dir="auto">In addition, msgpackr exports a <code>roundFloat32(number)</code> function that can be used to round floating point numbers to the maximum significant decimal digits that can be stored in 32-bit float, just as DECIMAL_ROUND does when decoding. This can be useful for determining how a number will be decoded prior to encoding it.</p>
<h6 dir="auto">
<a id="user-content-performance" class="anchor" aria-hidden="true" href="#performance"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Performance</h6>
<h7 dir="auto">
<a id="user-content-native-acceleration" class="anchor" aria-hidden="true" href="#native-acceleration"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Native Acceleration</h7>
<p dir="auto">Msgpackr employs an optional native node-addon to accelerate the parsing of strings. This should be automatically installed and utilized on NodeJS. However, you can verify this by checking the <code>isNativeAccelerationEnabled</code> property that is exported from msgpackr. If this is <code>false</code>, the <code>msgpackr-extract</code> package may not have been properly installed, and you may want to verify that it is installed correctly:</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="import { isNativeAccelerationEnabled } from 'msgpackr'
if (!isNativeAccelerationEnabled)
	console.warn('Native acceleration not enabled, verify that install finished properly')"><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">isNativeAccelerationEnabled</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">'msgpackr'</span>
<span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-c1">!</span><span class="pl-s1">isNativeAccelerationEnabled</span><span class="pl-kos">)</span>
	<span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">warn</span><span class="pl-kos">(</span><span class="pl-s">'Native acceleration not enabled, verify that install finished properly'</span><span class="pl-kos">)</span></pre></div>
<h7 dir="auto">
<a id="user-content-benchmarks" class="anchor" aria-hidden="true" href="#benchmarks"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Benchmarks</h7>
<p dir="auto">Msgpackr is fast. Really fast. Here is comparison with the next fastest JS projects using the benchmark tool from <code>msgpack-lite</code> (and the sample data is from some clinical research data we use that has a good mix of different value types and structures). It also includes comparison to V8 native JSON functionality, and JavaScript Avro (<code>avsc</code>, a very optimized Avro implementation):</p>
<table>
<thead>
<tr>
<th>operation</th>
<th align="right">op</th>
<th align="right">ms</th>
<th align="right">op/s</th>
</tr>
</thead>
<tbody>
<tr>
<td>buf = Buffer(JSON.stringify(obj));</td>
<td align="right">81600</td>
<td align="right">5002</td>
<td align="right">16313</td>
</tr>
<tr>
<td>obj = JSON.parse(buf);</td>
<td align="right">90700</td>
<td align="right">5004</td>
<td align="right">18125</td>
</tr>
<tr>
<td>require("msgpackr").pack(obj);</td>
<td align="right">169700</td>
<td align="right">5000</td>
<td align="right">33940</td>
</tr>
<tr>
<td>require("msgpackr").unpack(buf);</td>
<td align="right">109700</td>
<td align="right">5003</td>
<td align="right">21926</td>
</tr>
<tr>
<td>msgpackr w/ shared structures: packr.pack(obj);</td>
<td align="right">190400</td>
<td align="right">5001</td>
<td align="right">38072</td>
</tr>
<tr>
<td>msgpackr w/ shared structures: packr.unpack(buf);</td>
<td align="right">422900</td>
<td align="right">5000</td>
<td align="right">84580</td>
</tr>
<tr>
<td>buf = require("msgpack-lite").encode(obj);</td>
<td align="right">31300</td>
<td align="right">5005</td>
<td align="right">6253</td>
</tr>
<tr>
<td>obj = require("msgpack-lite").decode(buf);</td>
<td align="right">15700</td>
<td align="right">5007</td>
<td align="right">3135</td>
</tr>
<tr>
<td>buf = require("@msgpack/msgpack").encode(obj);</td>
<td align="right">103100</td>
<td align="right">5003</td>
<td align="right">20607</td>
</tr>
<tr>
<td>obj = require("@msgpack/msgpack").decode(buf);</td>
<td align="right">59100</td>
<td align="right">5004</td>
<td align="right">11810</td>
</tr>
<tr>
<td>buf = require("notepack").encode(obj);</td>
<td align="right">65500</td>
<td align="right">5007</td>
<td align="right">13081</td>
</tr>
<tr>
<td>obj = require("notepack").decode(buf);</td>
<td align="right">33400</td>
<td align="right">5009</td>
<td align="right">6667</td>
</tr>
<tr>
<td>obj = require("msgpack-unpack").decode(buf);</td>
<td align="right">6900</td>
<td align="right">5036</td>
<td align="right">1370</td>
</tr>
<tr>
<td>require("avsc")...make schema/type...type.toBuffer(obj);</td>
<td align="right">89300</td>
<td align="right">5005</td>
<td align="right">17842</td>
</tr>
<tr>
<td>require("avsc")...make schema/type...type.fromBuffer(obj);</td>
<td align="right">108400</td>
<td align="right">5001</td>
<td align="right">21675</td>
</tr>
</tbody>
</table>
<p dir="auto">All benchmarks were performed on Node 15 / V8 8.6 (Windows i7-4770 3.4Ghz).
(<code>avsc</code> is schema-based and more comparable in style to msgpackr with shared structures).</p>
<p dir="auto">Here is a benchmark of streaming data (again borrowed from <code>msgpack-lite</code>'s benchmarking), where msgpackr is able to take advantage of the structured record extension and really demonstrate its performance capabilities:</p>
<table>
<thead>
<tr>
<th>operation (1000000 x 2)</th>
<th align="right">op</th>
<th align="right">ms</th>
<th align="right">op/s</th>
</tr>
</thead>
<tbody>
<tr>
<td>new PackrStream().write(obj);</td>
<td align="right">1000000</td>
<td align="right">372</td>
<td align="right">2688172</td>
</tr>
<tr>
<td>new UnpackrStream().write(buf);</td>
<td align="right">1000000</td>
<td align="right">247</td>
<td align="right">4048582</td>
</tr>
<tr>
<td>stream.write(msgpack.encode(obj));</td>
<td align="right">1000000</td>
<td align="right">2898</td>
<td align="right">345065</td>
</tr>
<tr>
<td>stream.write(msgpack.decode(buf));</td>
<td align="right">1000000</td>
<td align="right">1969</td>
<td align="right">507872</td>
</tr>
<tr>
<td>stream.write(notepack.encode(obj));</td>
<td align="right">1000000</td>
<td align="right">901</td>
<td align="right">1109877</td>
</tr>
<tr>
<td>stream.write(notepack.decode(buf));</td>
<td align="right">1000000</td>
<td align="right">1012</td>
<td align="right">988142</td>
</tr>
<tr>
<td>msgpack.Encoder().on("data",ondata).encode(obj);</td>
<td align="right">1000000</td>
<td align="right">1763</td>
<td align="right">567214</td>
</tr>
<tr>
<td>msgpack.createDecodeStream().write(buf);</td>
<td align="right">1000000</td>
<td align="right">2222</td>
<td align="right">450045</td>
</tr>
<tr>
<td>msgpack.createEncodeStream().write(obj);</td>
<td align="right">1000000</td>
<td align="right">1577</td>
<td align="right">634115</td>
</tr>
<tr>
<td>msgpack.Decoder().on("data",ondata).decode(buf);</td>
<td align="right">1000000</td>
<td align="right">2246</td>
<td align="right">445235</td>
</tr>
</tbody>
</table>
<p dir="auto">See the <a href="/kriszyp/msgpackr/blob/master/benchmark.md">benchmark.md</a> for more benchmarks and information about benchmarking.</p>
<h6 dir="auto">
<a id="user-content-custom-extensions" class="anchor" aria-hidden="true" href="#custom-extensions"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Custom Extensions</h6>
<p dir="auto">You can add your own custom extensions, which can be used to encode specific types/classes in certain ways. This is done by using the <code>addExtension</code> function, and specifying the class, extension <code>type</code> code (should be a number from 1-100, reserving negatives for MessagePack, 101-127 for msgpackr), and your <code>pack</code> and <code>unpack</code> functions (or just the one you need).</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="import { addExtension, Packr } from 'msgpackr';

class MyCustomClass {...}

let extPackr = new Packr();
addExtension({
	Class: MyCustomClass,
	type: 11, // register your own extension code (a type code from 1-100)
	pack(instance) {
		// define how your custom class should be encoded
		return Buffer.from([instance.myData]); // return a buffer
	}
	unpack(buffer) {
		// define how your custom class should be decoded
		let instance = new MyCustomClass();
		instance.myData = buffer[0];
		return instance; // decoded value from buffer
	}
});"><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">addExtension</span><span class="pl-kos">,</span> <span class="pl-v">Packr</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">'msgpackr'</span><span class="pl-kos">;</span>

<span class="pl-k">class</span> <span class="pl-v">MyCustomClass</span> <span class="pl-kos">{</span>...<span class="pl-kos">}</span>

<span class="pl-k">let</span> <span class="pl-s1">extPackr</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-v">Packr</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-en">addExtension</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
	<span class="pl-c1">Class</span>: <span class="pl-v">MyCustomClass</span><span class="pl-kos">,</span>
	<span class="pl-c1">type</span>: <span class="pl-c1">11</span><span class="pl-kos">,</span> <span class="pl-c">// register your own extension code (a type code from 1-100)</span>
	<span class="pl-en">pack</span><span class="pl-kos">(</span><span class="pl-s1">instance</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
		<span class="pl-c">// define how your custom class should be encoded</span>
		<span class="pl-k">return</span> <span class="pl-v">Buffer</span><span class="pl-kos">.</span><span class="pl-en">from</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-s1">instance</span><span class="pl-kos">.</span><span class="pl-c1">myData</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// return a buffer</span>
	<span class="pl-kos">}</span>
	<span class="pl-en">unpack</span><span class="pl-kos">(</span><span class="pl-s1">buffer</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
		<span class="pl-c">// define how your custom class should be decoded</span>
		<span class="pl-k">let</span> <span class="pl-s1">instance</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-v">MyCustomClass</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
		<span class="pl-s1">instance</span><span class="pl-kos">.</span><span class="pl-c1">myData</span> <span class="pl-c1">=</span> <span class="pl-s1">buffer</span><span class="pl-kos">[</span><span class="pl-c1">0</span><span class="pl-kos">]</span><span class="pl-kos">;</span>
		<span class="pl-k">return</span> <span class="pl-s1">instance</span><span class="pl-kos">;</span> <span class="pl-c">// decoded value from buffer</span>
	<span class="pl-kos">}</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">If you want to use msgpackr to encode and decode the data within your extensions, you can use the <code>read</code> and <code>write</code> functions and read and write data/objects that will be encoded and decoded by msgpackr, which can be easier and faster than creating and receiving separate buffers (note that you can't just return the instance from <code>write</code> or msgpackr will recursively try to use extension infinitely):</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="import { addExtension, Packr } from 'msgpackr';

class MyCustomClass {...}

let extPackr = new Packr();
addExtension({
	Class: MyCustomClass,
	type: 11, // register your own extension code (a type code from 1-100)
	write(instance) {
		// define how your custom class should be encoded
		return instance.myData; // return some data to be encoded
	}
	read(data) {
		// define how your custom class should be decoded,
		// data will already be unpacked/decoded
		let instance = new MyCustomClass();
		instance.myData = data;
		return instance; // return decoded value
	}
});"><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">addExtension</span><span class="pl-kos">,</span> <span class="pl-v">Packr</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">'msgpackr'</span><span class="pl-kos">;</span>

<span class="pl-k">class</span> <span class="pl-v">MyCustomClass</span> <span class="pl-kos">{</span>...<span class="pl-kos">}</span>

<span class="pl-k">let</span> <span class="pl-s1">extPackr</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-v">Packr</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-en">addExtension</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
	<span class="pl-c1">Class</span>: <span class="pl-v">MyCustomClass</span><span class="pl-kos">,</span>
	<span class="pl-c1">type</span>: <span class="pl-c1">11</span><span class="pl-kos">,</span> <span class="pl-c">// register your own extension code (a type code from 1-100)</span>
	<span class="pl-en">write</span><span class="pl-kos">(</span><span class="pl-s1">instance</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
		<span class="pl-c">// define how your custom class should be encoded</span>
		<span class="pl-k">return</span> <span class="pl-s1">instance</span><span class="pl-kos">.</span><span class="pl-c1">myData</span><span class="pl-kos">;</span> <span class="pl-c">// return some data to be encoded</span>
	<span class="pl-kos">}</span>
	<span class="pl-en">read</span><span class="pl-kos">(</span><span class="pl-s1">data</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
		<span class="pl-c">// define how your custom class should be decoded,</span>
		<span class="pl-c">// data will already be unpacked/decoded</span>
		<span class="pl-k">let</span> <span class="pl-s1">instance</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-v">MyCustomClass</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
		<span class="pl-s1">instance</span><span class="pl-kos">.</span><span class="pl-c1">myData</span> <span class="pl-c1">=</span> <span class="pl-s1">data</span><span class="pl-kos">;</span>
		<span class="pl-k">return</span> <span class="pl-s1">instance</span><span class="pl-kos">;</span> <span class="pl-c">// return decoded value</span>
	<span class="pl-kos">}</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">You can also create an extension with <code>Class</code> and <code>write</code> methods, but no <code>type</code> (or <code>read</code>), if you just want to customize how a class is serialized without using MessagePack extension encoding.</p>
<h7 dir="auto">
<a id="user-content-additional-performance-optimizations" class="anchor" aria-hidden="true" href="#additional-performance-optimizations"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Additional Performance Optimizations</h7>
<p dir="auto">Msgpackr is already fast, but here are some tips for making it faster:</p>
<h8 dir="auto">
<a id="user-content-buffer-reuse" class="anchor" aria-hidden="true" href="#buffer-reuse"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Buffer Reuse</h8>
<p dir="auto">Msgpackr is designed to work well with reusable buffers. Allocating new buffers can be relatively expensive, so if you have Node addons, it can be much faster to reuse buffers and use memcpy to copy data into existing buffers. Then msgpackr <code>unpack</code> can be executed on the same buffer, with new data, and optionally take a second paramter indicating the effective size of the available data in the buffer.</p>
<h8 dir="auto">
<a id="user-content-arena-allocation-usebuffer" class="anchor" aria-hidden="true" href="#arena-allocation-usebuffer"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Arena Allocation (<code>useBuffer()</code>)</h8>
<p dir="auto">During the serialization process, data is written to buffers. Again, allocating new buffers is a relatively expensive process, and the <code>useBuffer</code> method can help allow reuse of buffers that will further improve performance. With <code>useBuffer</code> method, you can provide a buffer, serialize data into it, and when it is known that you are done using that buffer, you can call <code>useBuffer</code> again to reuse it. The use of <code>useBuffer</code> is never required, buffers will still be handled and cleaned up through GC if not used, it just provides a small performance boost.</p>
<h6 dir="auto">
<a id="user-content-record-structure-extension-definition" class="anchor" aria-hidden="true" href="#record-structure-extension-definition"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Record Structure Extension Definition</h6>
<p dir="auto">The record struction extension uses extension id 0x72 ("r") to declare the use of this functionality. The extension "data" byte (or bytes) identifies the byte or bytes used to identify the start of a record in the subsequent MessagePack block or stream. The identifier byte (or the first byte in a sequence) must be from 0x40 - 0x7f (and therefore replaces one byte representations of positive integers 64 - 127, which can alternately be represented with int or uint types). The extension declaration must be immediately follow by an MessagePack array that defines the field names of the record structure.</p>
<p dir="auto">Once a record identifier and record field names have been defined, the parser/decoder should proceed to read the next value. Any subsequent use of the record identifier as a value in the block or stream should parsed as a record instance, and the next n values, where is n is the number of fields (as defined in the array of field names), should be read as the values of the fields. For example, here we have defined a structure with fields "foo" and "bar", with the record identifier 0x40, and then read a record instance that defines the field values of 4 and 2, respectively:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='+--------+--------+--------+~~~~~~~~~~~~~~~~~~~~~~~~~+--------+--------+--------+
|  0xd4  |  0x72  |  0x40  | array: [ "foo", "bar" ] |  0x40  |  0x04  |  0x02  |
+--------+--------+--------+~~~~~~~~~~~~~~~~~~~~~~~~~+--------+--------+--------+'><pre class="notranslate"><code>+--------+--------+--------+~~~~~~~~~~~~~~~~~~~~~~~~~+--------+--------+--------+
|  0xd4  |  0x72  |  0x40  | array: [ "foo", "bar" ] |  0x40  |  0x04  |  0x02  |
+--------+--------+--------+~~~~~~~~~~~~~~~~~~~~~~~~~+--------+--------+--------+
</code></pre></div>
<p dir="auto">Which should generate an object that would correspond to JSON:</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='{ "foo": 4, "bar": 2}'><pre><span class="pl-kos">{</span> <span class="pl-s">"foo"</span>: <span class="pl-c1">4</span><span class="pl-kos">,</span> <span class="pl-s">"bar"</span>: <span class="pl-c1">2</span><span class="pl-kos">}</span></pre></div>
<h6 dir="auto">
<a id="user-content-additional-value-types" class="anchor" aria-hidden="true" href="#additional-value-types"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Additional value types</h6>
<p dir="auto">msgpackr supports <code>undefined</code> (using fixext1 + type: 0 + data: 0 to match other JS implementations), <code>NaN</code>, <code>Infinity</code>, and <code>-Infinity</code> (using standard IEEE 754 representations with doubles/floats).</p>
<h7 dir="auto">
<a id="user-content-dates" class="anchor" aria-hidden="true" href="#dates"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Dates</h7>
<p dir="auto">msgpackr saves all JavaScript <code>Date</code>s using the standard MessagePack date extension (type -1), using the smallest of 32-bit, 64-bit or 96-bit format needed to store the date without data loss (or using 32-bit if useTimestamp32 options is specified).</p>
<h7 dir="auto">
<a id="user-content-structured-cloning-1" class="anchor" aria-hidden="true" href="#structured-cloning-1"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Structured Cloning</h7>
<p dir="auto">With structured cloning enabled, msgpackr will also use extensions to store Set, Map, Error, RegExp, ArrayBufferView objects and preserve their types.</p>
<h6 dir="auto">
<a id="user-content-alternate-encodingpackage" class="anchor" aria-hidden="true" href="#alternate-encodingpackage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Alternate Encoding/Package</h6>
<p dir="auto">The high-performance serialization and deserialization algorithms in the msgpackr package are also available in the <a href="https://github.com/kriszyp/cbor-x">cbor-x</a> for the CBOR format, with the same API and design. A quick summary of the pros and cons of using MessagePack vs CBOR are:</p>
<ul dir="auto">
<li>MessagePack has wider adoption, and, at least with this implementation is slightly more efficient (by roughly 1%).</li>
<li>CBOR has an <a href="https://tools.ietf.org/html/rfc7049" rel="nofollow">official IETF standardization track</a>, and the record extensions is conceptually/philosophically a better fit for CBOR tags.</li>
</ul>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<p dir="auto">MIT</p>
<h7 dir="auto">
<a id="user-content-browser-consideration" class="anchor" aria-hidden="true" href="#browser-consideration"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Browser Consideration</h7>
<p dir="auto">MessagePack can be a great choice for high-performance data delivery to browsers, as reasonable data size is possible without compression. And msgpackr works very well in modern browsers. However, it is worth noting that if you want highly compact data, brotli or gzip are most effective in compressing, and MessagePack's character frequency tends to defeat Huffman encoding used by these standard compression algorithms, resulting in less compact data than compressed JSON.</p>
<h7 dir="auto">
<a id="user-content-credits" class="anchor" aria-hidden="true" href="#credits"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Credits</h7>
<p dir="auto">Various projects have been inspirations for this, and code has been borrowed from <a href="https://github.com/msgpack/msgpack-javascript">https://github.com/msgpack/msgpack-javascript</a> and <a href="https://github.com/mtth/avsc">https://github.com/mtth/avsc</a>.</p>
</article>
  </div>
        </div>
        
        <div id="qs-davalapar-what-the-pack" class="qs"><h4><a href="http://npmjs.com/package/what-the-pack" target="_blank">davalapar/what-the-pack <span class="qs-url">http://npmjs.com/package/what-the-pack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-what-the-pack" class="anchor" aria-hidden="true" href="#what-the-pack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>what-the-pack</h5>
<p dir="auto">Ultra-fast MessagePack for NodeJS &amp; Browsers.</p>
<h6 dir="auto">
<a id="user-content-implementation-notes" class="anchor" aria-hidden="true" href="#implementation-notes"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>implementation notes</h6>
<ul dir="auto">
<li>this implementation uses pre-allocated buffers and buffer.copy() for encoding, instead of regular arrays</li>
<li>uses a buffer polyfill if used in browser environments</li>
<li>has dictionary support, to further reduce payload size</li>
</ul>
<h6 dir="auto">
<a id="user-content-backward-compatibility-notes-with-other-libraries" class="anchor" aria-hidden="true" href="#backward-compatibility-notes-with-other-libraries"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>backward compatibility notes with other libraries</h6>
<ul dir="auto">
<li>used extensions
<ul dir="auto">
<li>
<code>fixext 1, type 0, data 0</code> = <code>undefined</code>
</li>
<li>
<code>fixext 1, type 0, data 1</code> = <code>NaN</code>
</li>
<li>
<code>fixext 1, type 0, data 2</code> = <code>+Infinity</code>
</li>
<li>
<code>fixext 1, type 0, data 3</code> = <code>-Infinity</code>
</li>
</ul>
</li>
<li>
<code>Buffers</code>, <code>ArrayBuffers</code> and <code>TypedArrays</code>
<ul dir="auto">
<li>
<code>Buffers</code> : encoded as Buffers, decoded as Buffers</li>
<li>
<code>ArrayBuffers</code> : encoded as Buffers, decoded as Buffers</li>
</ul>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="const decoded = decode(encoded);
const your_arraybuffer = decoded.buffer;"><pre><span class="pl-k">const</span> <span class="pl-s1">decoded</span> <span class="pl-c1">=</span> <span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-s1">encoded</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-s1">your_arraybuffer</span> <span class="pl-c1">=</span> <span class="pl-s1">decoded</span><span class="pl-kos">.</span><span class="pl-c1">buffer</span><span class="pl-kos">;</span></pre></div>
<ul dir="auto">
<li>
<code>TypedArrays</code> : encoded as Buffers, decoded as Buffers</li>
</ul>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="const decoded = decode(encoded);
const your_typedarray = new Uint8Array(decoded.buffer);"><pre><span class="pl-k">const</span> <span class="pl-s1">decoded</span> <span class="pl-c1">=</span> <span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-s1">encoded</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-s1">your_typedarray</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-v">Uint8Array</span><span class="pl-kos">(</span><span class="pl-s1">decoded</span><span class="pl-kos">.</span><span class="pl-c1">buffer</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
</li>
</ul>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>usage</h6>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="yarn add what-the-pack"><pre>yarn add what-the-pack</pre></div>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="const MessagePack = require('what-the-pack');
const { encode, decode } = MessagePack.initialize(2**22); // 4MB

const data = {
  name: 'Lunox',
  age: 20
};

const encoded = encode(data);
const decoded = decode(encoded);

console.log({
  encoded,
  decoded
});"><pre><span class="pl-k">const</span> <span class="pl-v">MessagePack</span> <span class="pl-c1">=</span> <span class="pl-en">require</span><span class="pl-kos">(</span><span class="pl-s">'what-the-pack'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-kos">{</span> encode<span class="pl-kos">,</span> decode <span class="pl-kos">}</span> <span class="pl-c1">=</span> <span class="pl-v">MessagePack</span><span class="pl-kos">.</span><span class="pl-en">initialize</span><span class="pl-kos">(</span><span class="pl-c1">2</span><span class="pl-c1">**</span><span class="pl-c1">22</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// 4MB</span>

<span class="pl-k">const</span> <span class="pl-s1">data</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
  <span class="pl-c1">name</span>: <span class="pl-s">'Lunox'</span><span class="pl-kos">,</span>
  <span class="pl-c1">age</span>: <span class="pl-c1">20</span>
<span class="pl-kos">}</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">encoded</span> <span class="pl-c1">=</span> <span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-s1">data</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-s1">decoded</span> <span class="pl-c1">=</span> <span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-s1">encoded</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  encoded<span class="pl-kos">,</span>
  decoded
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h6 dir="auto">
<a id="user-content-result" class="anchor" aria-hidden="true" href="#result"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>result</h6>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="{ encoded: &lt;Buffer 82 a4 6e 61 6d 65 a5 4c 75 6e 6f 78 a3 61 67 65 14&gt;,
  decoded: { name: 'Lunox', age: 20 } }"><pre><span class="pl-kos">{</span> <span class="pl-s1">encoded</span>: <span class="pl-c1">&lt;</span><span class="pl-ent">Buffer</span> <span class="pl-c1">82</span> <span class="pl-c1">a4</span> <span class="pl-c1">6</span><span class="pl-c1">e</span> <span class="pl-c1">61</span> <span class="pl-c1">6</span><span class="pl-c1">d</span> <span class="pl-c1">65</span> <span class="pl-c1">a5</span> <span class="pl-c1">4</span><span class="pl-c1">c</span> <span class="pl-c1">75</span> <span class="pl-c1">6</span><span class="pl-c1">e</span> <span class="pl-c1">6</span><span class="pl-c1">f</span> <span class="pl-c1">78</span> <span class="pl-c1">a3</span> <span class="pl-c1">61</span> <span class="pl-c1">67</span> <span class="pl-c1">65</span> <span class="pl-c1">14</span><span class="pl-c1">&gt;</span>,
  decoded: <span class="pl-kos">{</span> <span class="pl-s1">name</span>: <span class="pl-s">'Lunox'</span><span class="pl-kos">,</span> <span class="pl-s1">age</span>: <span class="pl-c1">20</span> <span class="pl-kos">}</span> <span class="pl-kos">}</span></pre></div>
<h6 dir="auto">
<a id="user-content-pre-allocating-a-larger-buffer" class="anchor" aria-hidden="true" href="#pre-allocating-a-larger-buffer"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>pre-allocating a larger buffer</h6>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="const MessagePack = require('what-the-pack');
const { encode, decode } = MessagePack.initialize(2**30); // 1GB
const data = {
  // large data goes here
};"><pre><span class="pl-k">const</span> <span class="pl-v">MessagePack</span> <span class="pl-c1">=</span> <span class="pl-en">require</span><span class="pl-kos">(</span><span class="pl-s">'what-the-pack'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-kos">{</span> encode<span class="pl-kos">,</span> decode <span class="pl-kos">}</span> <span class="pl-c1">=</span> <span class="pl-v">MessagePack</span><span class="pl-kos">.</span><span class="pl-en">initialize</span><span class="pl-kos">(</span><span class="pl-c1">2</span><span class="pl-c1">**</span><span class="pl-c1">30</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// 1GB</span>
<span class="pl-k">const</span> <span class="pl-s1">data</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
  <span class="pl-c">// large data goes here</span>
<span class="pl-kos">}</span><span class="pl-kos">;</span></pre></div>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="2^7 = 128 B
2^8 = 256 B
2^9 = 512 B
2^10 = 1.02 kB
2^11 = 2.05 kB
2^12 = 4.1 kB
2^13 = 8.19 kB
2^14 = 16.4 kB
2^15 = 32.8 kB
2^16 = 65.5 kB
2^17 = 131 kB
2^18 = 262 kB
2^19 = 524 kB
2^20 = 1.05 MB
2^21 = 2.1 MB
2^22 = 4.19 MB
2^23 = 8.39 MB
2^24 = 16.8 MB
2^25 = 33.6 MB
2^26 = 67.1 MB
2^27 = 134 MB
2^28 = 268 MB
2^29 = 537 MB
2^30 = 1.07 GB"><pre class="notranslate"><code>2^7 = 128 B
2^8 = 256 B
2^9 = 512 B
2^10 = 1.02 kB
2^11 = 2.05 kB
2^12 = 4.1 kB
2^13 = 8.19 kB
2^14 = 16.4 kB
2^15 = 32.8 kB
2^16 = 65.5 kB
2^17 = 131 kB
2^18 = 262 kB
2^19 = 524 kB
2^20 = 1.05 MB
2^21 = 2.1 MB
2^22 = 4.19 MB
2^23 = 8.39 MB
2^24 = 16.8 MB
2^25 = 33.6 MB
2^26 = 67.1 MB
2^27 = 134 MB
2^28 = 268 MB
2^29 = 537 MB
2^30 = 1.07 GB
</code></pre></div>
<h6 dir="auto">
<a id="user-content-using-dictionaries-added-in-113" class="anchor" aria-hidden="true" href="#using-dictionaries-added-in-113"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>using dictionaries (added in 1.1.3)</h6>
<ul dir="auto">
<li>this feature isn't in MessagePack spec but added as a convenience feature in 1.1.3</li>
<li>dictionaries allow us to decrease our buffer output size by recognizing strings used as object keys and replacing them with shorter-byte integer values during the encoding process</li>
<li>these shorter-byte placeholder values are then restored to their respective strings during the decoding process</li>
<li>the trade-off in using dictionaries is an insignificantly slower encoding and decoding time in exchange of a significantly smaller buffer output, which results into a lower network bandwidth and storage consumption in the long run</li>
<li>the best part: the byte placeholders starts from -32 then increments upwards, values -32 to 127 are encoded in single byte, which means your first (32 + 128) = 160 keys will be encoded as a single byte instead of encoding the whole string</li>
</ul>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="const MessagePack = require('what-the-pack');
const { encode, decode, register } = MessagePack.initialize(2**22); // 4MB
let encoded, decoded, data;
data = { name: 'Lunox', age: 20 };

encoded = encode(data);
decoded = decode(encoded);
console.log({ encoded, decoded });
/**
 - encoded: &lt;Buffer 82 a4 6e 61 6d 65 a5 4c 75 6e 6f 78 a3 61 67 65 14&gt; (17)
 - decoded: { name: 'Lunox', age: 20 }
 **/

register('name', 'age');
encoded = encode(data);
decoded = decode(encoded);
console.log({ encoded, decoded });
/**
 - encoded: &lt;Buffer 82 e0 a5 4c 75 6e 6f 78 e1 14&gt; (10)
 - decoded: { name: 'Lunox', age: 20 }
 **/"><pre><span class="pl-k">const</span> <span class="pl-v">MessagePack</span> <span class="pl-c1">=</span> <span class="pl-en">require</span><span class="pl-kos">(</span><span class="pl-s">'what-the-pack'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-kos">{</span> encode<span class="pl-kos">,</span> decode<span class="pl-kos">,</span> register <span class="pl-kos">}</span> <span class="pl-c1">=</span> <span class="pl-v">MessagePack</span><span class="pl-kos">.</span><span class="pl-en">initialize</span><span class="pl-kos">(</span><span class="pl-c1">2</span><span class="pl-c1">**</span><span class="pl-c1">22</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// 4MB</span>
<span class="pl-k">let</span> <span class="pl-s1">encoded</span><span class="pl-kos">,</span> <span class="pl-s1">decoded</span><span class="pl-kos">,</span> <span class="pl-s1">data</span><span class="pl-kos">;</span>
<span class="pl-s1">data</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span> <span class="pl-c1">name</span>: <span class="pl-s">'Lunox'</span><span class="pl-kos">,</span> <span class="pl-c1">age</span>: <span class="pl-c1">20</span> <span class="pl-kos">}</span><span class="pl-kos">;</span>

<span class="pl-s1">encoded</span> <span class="pl-c1">=</span> <span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-s1">data</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">decoded</span> <span class="pl-c1">=</span> <span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-s1">encoded</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-kos">{</span> encoded<span class="pl-kos">,</span> decoded <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-c">/**</span>
<span class="pl-c"> - encoded: &lt;Buffer 82 a4 6e 61 6d 65 a5 4c 75 6e 6f 78 a3 61 67 65 14&gt; (17)</span>
<span class="pl-c"> - decoded: { name: 'Lunox', age: 20 }</span>
<span class="pl-c"> **/</span>

<span class="pl-en">register</span><span class="pl-kos">(</span><span class="pl-s">'name'</span><span class="pl-kos">,</span> <span class="pl-s">'age'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">encoded</span> <span class="pl-c1">=</span> <span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-s1">data</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">decoded</span> <span class="pl-c1">=</span> <span class="pl-en">decode</span><span class="pl-kos">(</span><span class="pl-s1">encoded</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-kos">{</span> encoded<span class="pl-kos">,</span> decoded <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-c">/**</span>
<span class="pl-c"> - encoded: &lt;Buffer 82 e0 a5 4c 75 6e 6f 78 e1 14&gt; (10)</span>
<span class="pl-c"> - decoded: { name: 'Lunox', age: 20 }</span>
<span class="pl-c"> **/</span></pre></div>
<h6 dir="auto">
<a id="user-content-minified-build-for-browsers" class="anchor" aria-hidden="true" href="#minified-build-for-browsers"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>minified build for browsers</h6>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&lt;!-- latest umd build --&gt;
&lt;script src=&quot;https://unpkg.com/what-the-pack/dist/MessagePack.min.js&quot;&gt;&lt;/script&gt;

&lt;!-- exposed as 'MessagePack' --&gt;
&lt;script&gt;
  const { encode, decode } = MessagePack.initialize(2**22); // 4MB
  const data = {
    name: 'Lunox',
    age: 20
  };
  const encoded = encode(data);
  const decoded = decode(encoded);
  console.log({ encoded, decoded });
&lt;/script&gt;"><pre><span class="pl-c1">&lt;</span><span class="pl-c1">!</span><span class="pl-c1">--</span> <span class="pl-s1">latest</span> <span class="pl-s1">umd</span> <span class="pl-s1">build</span> <span class="pl-c1">--</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-ent">script</span> <span class="pl-c1">src</span><span class="pl-c1">=</span><span class="pl-s">"https://unpkg.com/what-the-pack/dist/MessagePack.min.js"</span><span class="pl-c1">&gt;</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-ent">script</span><span class="pl-c1">&gt;</span>

<span class="pl-c1">&lt;</span><span class="pl-c1">!</span><span class="pl-c1">--</span> <span class="pl-s1">exposed</span> <span class="pl-s1">as</span> <span class="pl-s">'MessagePack'</span> <span class="pl-c1">--</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-ent">script</span><span class="pl-c1">&gt;</span>
  const <span class="pl-kos">{</span> <span class="pl-s1">encode</span><span class="pl-kos">,</span> <span class="pl-s1">decode</span> <span class="pl-kos">}</span> = MessagePack.initialize(2**22); // 4MB
  const data = <span class="pl-kos">{</span>
    <span class="pl-s1">name</span>: <span class="pl-s">'Lunox'</span><span class="pl-kos">,</span>
    <span class="pl-s1">age</span>: <span class="pl-c1">20</span>
  <span class="pl-kos">}</span>;
  const encoded = encode(data);
  const decoded = decode(encoded);
  console.log(<span class="pl-kos">{</span> <span class="pl-s1">encoded</span><span class="pl-kos">,</span> <span class="pl-s1">decoded</span> <span class="pl-kos">}</span>);
<span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-ent">script</span><span class="pl-c1">&gt;</span></pre></div>
<h6 dir="auto">
<a id="user-content-using-with-browser-websockets" class="anchor" aria-hidden="true" href="#using-with-browser-websockets"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>using with browser websockets</h6>
<h8 dir="auto">
<a id="user-content-server" class="anchor" aria-hidden="true" href="#server"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>server</h8>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="const WebSocket = require('ws');
const MessagePack = require('what-the-pack');
const { encode, decode } = MessagePack.initialize(2**22); // 4MB

const wss = new WebSocket.Server(
  /- options go here */
);
wss.on('connection', (client, req) =&gt; {
  console.log('A client has connected.');
  console.log('IP address:', req.connection.remoteAddress);
  client.send(
    encode({
      message: 'something'
    })
  );
});"><pre><span class="pl-k">const</span> <span class="pl-v">WebSocket</span> <span class="pl-c1">=</span> <span class="pl-en">require</span><span class="pl-kos">(</span><span class="pl-s">'ws'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-v">MessagePack</span> <span class="pl-c1">=</span> <span class="pl-en">require</span><span class="pl-kos">(</span><span class="pl-s">'what-the-pack'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-kos">{</span> encode<span class="pl-kos">,</span> decode <span class="pl-kos">}</span> <span class="pl-c1">=</span> <span class="pl-v">MessagePack</span><span class="pl-kos">.</span><span class="pl-en">initialize</span><span class="pl-kos">(</span><span class="pl-c1">2</span><span class="pl-c1">**</span><span class="pl-c1">22</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// 4MB</span>

<span class="pl-k">const</span> <span class="pl-s1">wss</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-v">WebSocket</span><span class="pl-kos">.</span><span class="pl-c1">Server</span><span class="pl-kos">(</span>
  <span class="pl-pds"><span class="pl-c1">/</span>- options go here <span class="pl-c1">*</span><span class="pl-c1">/</span></span>
<span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">wss</span><span class="pl-kos">.</span><span class="pl-en">on</span><span class="pl-kos">(</span><span class="pl-s">'connection'</span><span class="pl-kos">,</span> <span class="pl-kos">(</span><span class="pl-s1">client</span><span class="pl-kos">,</span> <span class="pl-s1">req</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
  <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">'A client has connected.'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
  <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">'IP address:'</span><span class="pl-kos">,</span> <span class="pl-s1">req</span><span class="pl-kos">.</span><span class="pl-c1">connection</span><span class="pl-kos">.</span><span class="pl-c1">remoteAddress</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
  <span class="pl-s1">client</span><span class="pl-kos">.</span><span class="pl-en">send</span><span class="pl-kos">(</span>
    <span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
      <span class="pl-c1">message</span>: <span class="pl-s">'something'</span>
    <span class="pl-kos">}</span><span class="pl-kos">)</span>
  <span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h8 dir="auto">
<a id="user-content-client" class="anchor" aria-hidden="true" href="#client"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>client</h8>
<ul dir="auto">
<li>On browsers, <code>Buffer</code> object is exposed as <code>MessagePack.Buffer</code>
</li>
<li>On browsers, call <code>MessagePack.Buffer.from(x)</code> on received ArrayBuffers</li>
</ul>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="// Create WebSocket connection.
const socket = new WebSocket('ws://localhost:8080');
const { encode, decode, Buffer } = MessagePack.initialize(2**22); // 4MB

// Connection opened
socket.addEventListener('open', (event) =&gt; {
  socket.binaryType = 'arraybuffer'; // important
  console.log('Connected to server.');
});

// Listen for messages
socket.addEventListener('message', (event) =&gt; {
  const data = MessagePack.decode(
    Buffer.from(event.data)
  );
  console.log(data);
  // logs: { message: 'something' }
});"><pre><span class="pl-c">// Create WebSocket connection.</span>
<span class="pl-k">const</span> <span class="pl-s1">socket</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-v">WebSocket</span><span class="pl-kos">(</span><span class="pl-s">'ws://localhost:8080'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-kos">{</span> encode<span class="pl-kos">,</span> decode<span class="pl-kos">,</span> Buffer <span class="pl-kos">}</span> <span class="pl-c1">=</span> <span class="pl-v">MessagePack</span><span class="pl-kos">.</span><span class="pl-en">initialize</span><span class="pl-kos">(</span><span class="pl-c1">2</span><span class="pl-c1">**</span><span class="pl-c1">22</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// 4MB</span>

<span class="pl-c">// Connection opened</span>
<span class="pl-s1">socket</span><span class="pl-kos">.</span><span class="pl-en">addEventListener</span><span class="pl-kos">(</span><span class="pl-s">'open'</span><span class="pl-kos">,</span> <span class="pl-kos">(</span><span class="pl-s1">event</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
  <span class="pl-s1">socket</span><span class="pl-kos">.</span><span class="pl-c1">binaryType</span> <span class="pl-c1">=</span> <span class="pl-s">'arraybuffer'</span><span class="pl-kos">;</span> <span class="pl-c">// important</span>
  <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">'Connected to server.'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// Listen for messages</span>
<span class="pl-s1">socket</span><span class="pl-kos">.</span><span class="pl-en">addEventListener</span><span class="pl-kos">(</span><span class="pl-s">'message'</span><span class="pl-kos">,</span> <span class="pl-kos">(</span><span class="pl-s1">event</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
  <span class="pl-k">const</span> <span class="pl-s1">data</span> <span class="pl-c1">=</span> <span class="pl-v">MessagePack</span><span class="pl-kos">.</span><span class="pl-en">decode</span><span class="pl-kos">(</span>
    <span class="pl-v">Buffer</span><span class="pl-kos">.</span><span class="pl-en">from</span><span class="pl-kos">(</span><span class="pl-s1">event</span><span class="pl-kos">.</span><span class="pl-c1">data</span><span class="pl-kos">)</span>
  <span class="pl-kos">)</span><span class="pl-kos">;</span>
  <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s1">data</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
  <span class="pl-c">// logs: { message: 'something' }</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h6 dir="auto">
<a id="user-content-benchmarks" class="anchor" aria-hidden="true" href="#benchmarks"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>benchmarks</h6>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="yarn run benchmark"><pre>yarn run benchmark</pre></div>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ yarn run benchmark
JSON stringify tiny x 1,477,866 ops/sec 0.58% (93 runs sampled)
JSON stringify small x 232,645 ops/sec 0.25% (91 runs sampled)
JSON stringify medium x 117,357 ops/sec 0.31% (93 runs sampled)
JSON stringify large x 24.01 ops/sec 0.37% (43 runs sampled)
JSON parse tiny x 1,301,925 ops/sec 3.18% (82 runs sampled)
JSON parse small x 264,410 ops/sec 0.57% (90 runs sampled)
JSON parse medium x 133,865 ops/sec 0.52% (87 runs sampled)
JSON parse large x 31.52 ops/sec 0.34% (53 runs sampled)
what-the-pack encode tiny x 1,175,981 ops/sec 0.39% (92 runs sampled)
what-the-pack encode small x 365,533 ops/sec 0.85% (90 runs sampled)
what-the-pack encode medium x 173,746 ops/sec 0.41% (91 runs sampled)
what-the-pack encode large x 218 ops/sec 0.85% (82 runs sampled)
what-the-pack decode tiny x 1,130,260 ops/sec 0.30% (91 runs sampled)
what-the-pack decode small x 254,931 ops/sec 0.79% (94 runs sampled)
what-the-pack decode medium x 146,809 ops/sec 0.79% (92 runs sampled)
what-the-pack decode large x 211 ops/sec 0.37% (87 runs sampled)
notepack.encode tiny x 1,291,361 ops/sec 0.22% (95 runs sampled)
notepack encode small x 325,882 ops/sec 1.20% (95 runs sampled)
notepack encode medium x 133,398 ops/sec 0.20% (94 runs sampled)
notepack encode large x 231 ops/sec 1.65% (81 runs sampled)
notepack decode tiny x 1,097,597 ops/sec 0.67% (93 runs sampled)
notepack decode small x 231,895 ops/sec 0.69% (96 runs sampled)
notepack decode medium x 137,385 ops/sec 2.45% (86 runs sampled)
notepack decode large x 210 ops/sec 0.85% (86 runs sampled)"><pre>$ yarn run benchmark
JSON stringify tiny x 1,477,866 ops/sec 0.58% (93 runs sampled)
JSON stringify small x 232,645 ops/sec 0.25% (91 runs sampled)
JSON stringify medium x 117,357 ops/sec 0.31% (93 runs sampled)
JSON stringify large x 24.01 ops/sec 0.37% (43 runs sampled)
JSON parse tiny x 1,301,925 ops/sec 3.18% (82 runs sampled)
JSON parse small x 264,410 ops/sec 0.57% (90 runs sampled)
JSON parse medium x 133,865 ops/sec 0.52% (87 runs sampled)
JSON parse large x 31.52 ops/sec 0.34% (53 runs sampled)
what-the-pack encode tiny x 1,175,981 ops/sec 0.39% (92 runs sampled)
what-the-pack encode small x 365,533 ops/sec 0.85% (90 runs sampled)
what-the-pack encode medium x 173,746 ops/sec 0.41% (91 runs sampled)
what-the-pack encode large x 218 ops/sec 0.85% (82 runs sampled)
what-the-pack decode tiny x 1,130,260 ops/sec 0.30% (91 runs sampled)
what-the-pack decode small x 254,931 ops/sec 0.79% (94 runs sampled)
what-the-pack decode medium x 146,809 ops/sec 0.79% (92 runs sampled)
what-the-pack decode large x 211 ops/sec 0.37% (87 runs sampled)
notepack.encode tiny x 1,291,361 ops/sec 0.22% (95 runs sampled)
notepack encode small x 325,882 ops/sec 1.20% (95 runs sampled)
notepack encode medium x 133,398 ops/sec 0.20% (94 runs sampled)
notepack encode large x 231 ops/sec 1.65% (81 runs sampled)
notepack decode tiny x 1,097,597 ops/sec 0.67% (93 runs sampled)
notepack decode small x 231,895 ops/sec 0.69% (96 runs sampled)
notepack decode medium x 137,385 ops/sec 2.45% (86 runs sampled)
notepack decode large x 210 ops/sec 0.85% (86 runs sampled)</pre></div>
<h6 dir="auto">
<a id="user-content-tests" class="anchor" aria-hidden="true" href="#tests"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>tests</h6>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="yarn run test"><pre>yarn run <span class="pl-c1">test</span></pre></div>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ yarn run test
 PASS  ./test.js
   fixstr (6ms)
   str 8 (2ms)
   str 16 (1ms)
   str 32 (1ms)
   zero
   positive fixint (1ms)
   negative  fixint (1ms)
   uint 8 (1ms)
   uint 16 (1ms)
   uint 32
   uint 64 (1ms)
   int 8 (1ms)
   int 16
   int 32 (2ms)
   int 64
   float 32 (2ms)
   float 64 (1ms)
   true, false, undefined, NaN, +Infinity, -Infinity (2ms)
   flat &amp; nested empty arrays (1ms)
   flat arrays (456ms)
   nested arrays (5ms)
   highly nested arrays (2ms)
   buffers, bin8 (2ms)
   buffers, bin16 (96ms)
   buffers, bin32 (473ms)
   arraybuffers as buffer (54ms)
   typedarrays as buffer (7ms)
   tiny object (1ms)
   small object
   medium object (1ms)
   large object (1736ms)

  console.log index.js:49
    MessagePack: Setting buffer limit to 1.07 GB

Test Suites: 1 passed, 1 total
Tests:       31 passed, 31 total
Snapshots:   0 total
Time:        5.477s
Ran all test suites.
Done in 6.59s."><pre>$ yarn run <span class="pl-c1">test</span>
 PASS  ./test.js
   fixstr (6ms)
   str 8 (2ms)
   str 16 (1ms)
   str 32 (1ms)
   zero
   positive fixint (1ms)
   negative  fixint (1ms)
   uint 8 (1ms)
   uint 16 (1ms)
   uint 32
   uint 64 (1ms)
   int 8 (1ms)
   int 16
   int 32 (2ms)
   int 64
   float 32 (2ms)
   float 64 (1ms)
   true, false, undefined, NaN, +Infinity, -Infinity (2ms)
   flat <span class="pl-k">&amp;</span> nested empty arrays (1ms)
   flat arrays (456ms)
   nested arrays (5ms)
   highly nested arrays (2ms)
   buffers, bin8 (2ms)
   buffers, bin16 (96ms)
   buffers, bin32 (473ms)
   arraybuffers as buffer (54ms)
   typedarrays as buffer (7ms)
   tiny object (1ms)
   small object
   medium object (1ms)
   large object (1736ms)

  console.log index.js:49
    MessagePack: Setting buffer limit to 1.07 GB

Test Suites: 1 passed, 1 total
Tests:       31 passed, 31 total
Snapshots:   0 total
Time:        5.477s
Ran all <span class="pl-c1">test</span> suites.
Done <span class="pl-k">in</span> 6.59s.</pre></div>
<h6 dir="auto">
<a id="user-content-changelog" class="anchor" aria-hidden="true" href="#changelog"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>changelog</h6>
<ul dir="auto">
<li>1.x
<ul dir="auto">
<li>basic support</li>
<li>dictionary support</li>
</ul>
</li>
<li>2.0.0
<ul dir="auto">
<li>rewrite to use raw functions instead of classes</li>
<li>update dev-deps</li>
<li>jest test-cov @ <code>86.06%</code>
<ul dir="auto">
<li>statements <code>389/452</code>
</li>
<li>branches <code>137/169</code>
</li>
<li>functions <code>11/12</code>
</li>
<li>lines <code>374/428</code>
</li>
</ul>
</li>
</ul>
</li>
<li>2.0.x
<ul dir="auto">
<li>fix tempBufferLength check</li>
<li>rebuild for browser</li>
<li>fix leak on buffer decode</li>
</ul>
</li>
</ul>
<h6 dir="auto">
<a id="user-content-references" class="anchor" aria-hidden="true" href="#references"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>references</h6>
<ul dir="auto">
<li>
<code>buffer re-alloc idea</code>
<ul dir="auto">
<li>
<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="248513306" data-permission-text="Title is private" data-url="https://github.com/darrachequesne/notepack/issues/12" data-hovercard-type="issue" data-hovercard-url="/darrachequesne/notepack/issues/12/hovercard?comment_id=320872590&amp;comment_type=issue_comment" href="https://github.com/darrachequesne/notepack/issues/12#issuecomment-320872590">darrachequesne/notepack#12 (comment)</a> (Manuel Astudillo)</li>
</ul>
</li>
<li>
<code>notepack.io</code>
<ul dir="auto">
<li>
<a href="https://github.com/darrachequesne/notepack">https://github.com/darrachequesne/notepack</a> (MIT, Damien Arrachequesne)</li>
</ul>
</li>
<li>
<code>notepack</code>
<ul dir="auto">
<li>
<a href="https://github.com/hypergeometric/notepack">https://github.com/hypergeometric/notepack</a> (MIT, Ben Shepheard)</li>
</ul>
</li>
<li>
<code>buffer</code>:
<ul dir="auto">
<li>
<a href="https://github.com/feross/buffer">https://github.com/feross/buffer</a> (MIT, Feross Aboukhadijeh)</li>
</ul>
</li>
<li>
<code>pretty-bytes</code>
<ul dir="auto">
<li>
<a href="https://github.com/sindresorhus/pretty-bytes">https://github.com/sindresorhus/pretty-bytes</a> (MIT, Sindre Sorhus)</li>
</ul>
</li>
</ul>
<p dir="auto">MIT | @davalapar</p>
</article>
  </div>
        </div>
        
        <div id="qs-davethomas11-MoshiPack" class="qs"><h4><a href="https://github.com/davethomas11/MoshiPack" target="_blank">davethomas11/MoshiPack <span class="qs-url">https://github.com/davethomas11/MoshiPack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-moshipack" class="anchor" aria-hidden="true" href="#moshipack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MoshiPack</h5>
<p dir="auto"><a href="https://circleci.com/gh/davethomas11/MoshiPack/tree/master" rel="nofollow"><img src="https://camo.githubusercontent.com/26e8a26b1f7b3963966a4d88f5508cc22763c08c2e799fceadf84801814abcc0/68747470733a2f2f636972636c6563692e636f6d2f67682f6461766574686f6d617331312f4d6f7368695061636b2f747265652f6d61737465722e7376673f7374796c653d737667" alt="CircleCI" data-canonical-src="https://circleci.com/gh/davethomas11/MoshiPack/tree/master.svg?style=svg" style="max-width: 100%;"></a></p>
<h7 dir="auto">
<a id="user-content-gradle" class="anchor" aria-hidden="true" href="#gradle"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Gradle</h7>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="implementation com.daveanthonythomas.moshipack:moshipack:1.0.1"><pre class="notranslate"><code>implementation com.daveanthonythomas.moshipack:moshipack:1.0.1
</code></pre></div>
<p dir="auto">Optional Retrofit support:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="implementation com.daveanthonythomas.moshipack:moshipack-retrofit:1.0.1"><pre class="notranslate"><code>implementation com.daveanthonythomas.moshipack:moshipack-retrofit:1.0.1
</code></pre></div>
<h6 dir="auto">
<a id="user-content-about" class="anchor" aria-hidden="true" href="#about"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>About</h6>
<p dir="auto">This is a Kotilin implementation of MessagePack serialization and deserialization built ontop of Moshi to take advantage of Moshi's type adapters and utilizes okio for reading and writing MessagePack bytes.</p>
<p dir="auto">The library is intended to be consumed in a Kotlin project, and is not intended for Java use.</p>
<p dir="auto">Inspired by Kaushik Gopal's <a href="https://twitter.com/kaushikgopal/status/961426258818039808" rel="nofollow">tweet</a></p>
<p dir="auto">See <a href="https://github.com/square/moshi">Moshi</a> for adapter usage and reference.</p>
<h7 dir="auto">
<a id="user-content-convert-an-object-to-messagepack-format" class="anchor" aria-hidden="true" href="#convert-an-object-to-messagepack-format"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Convert an object to <a href="https://msgpack.org" rel="nofollow">MessagePack</a> format</h7>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="data class MessagePackWebsitePlug(var compact: Boolean = true, var schema: Int = 0)

val moshiPack = MoshiPack()
val packed: BufferedSource = moshiPack.pack(MessagePackWebsitePlug())

println(packed.readByteString().hex())"><pre><span class="pl-k">data class</span> <span class="pl-en">MessagePackWebsitePlug</span>(<span class="pl-k">var</span> <span class="pl-smi">compact</span><span class="pl-k">:</span> <span class="pl-c1">Boolean</span> = true, <span class="pl-k">var</span> <span class="pl-smi">schema</span><span class="pl-k">:</span> <span class="pl-c1">Int</span> = 0)

<span class="pl-k">val</span> moshiPack <span class="pl-k">=</span> <span class="pl-en">MoshiPack</span>()
<span class="pl-k">val</span> packed<span class="pl-k">:</span> <span class="pl-en">BufferedSource</span> <span class="pl-k">=</span> moshiPack.pack(<span class="pl-en">MessagePackWebsitePlug</span>())

<span class="pl-c1">println</span>(packed.readByteString().hex())</pre></div>
<p dir="auto">This prints the MessagePack bytes as a hex string <strong>82a7636f6d70616374c3a6736368656d6100</strong></p>
<ul dir="auto">
<li>
<strong>82</strong> - Map with two entries</li>
<li>
<strong>a7</strong> - String of seven bytes</li>
<li>
<strong>63 6f 6d 70 61 63 74</strong> - UTF8 String "compact"</li>
<li>
<strong>c3</strong> - Boolean value true</li>
<li>
<strong>a6</strong> - String of size bytes</li>
<li>
<strong>73 63 68 65 6d 61</strong> - UTF8 String "schema"</li>
<li>
<strong>00</strong> - Integer value 0</li>
</ul>
<h7 dir="auto">
<a id="user-content-convert-binary-messagepack-back-to-an-object" class="anchor" aria-hidden="true" href="#convert-binary-messagepack-back-to-an-object"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Convert binary MessagePack back to an Object</h7>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='val bytes = ByteString.decodeHex("82a7636f6d70616374c3a6736368656d6100").toByteArray()

val moshiPack = MoshiPack()
val plug: MessagePackWebsitePlug = moshiPack.unpack(bytes)'><pre><span class="pl-k">val</span> bytes <span class="pl-k">=</span> <span class="pl-en">ByteString</span>.decodeHex(<span class="pl-s"><span class="pl-pds">"</span>82a7636f6d70616374c3a6736368656d6100<span class="pl-pds">"</span></span>).toByteArray()

<span class="pl-k">val</span> moshiPack <span class="pl-k">=</span> <span class="pl-en">MoshiPack</span>()
<span class="pl-k">val</span> plug<span class="pl-k">:</span> <span class="pl-en">MessagePackWebsitePlug</span> <span class="pl-k">=</span> moshiPack.unpack(bytes)</pre></div>
<h7 dir="auto">
<a id="user-content-static-api" class="anchor" aria-hidden="true" href="#static-api"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Static API</h7>
<p dir="auto">If you prefer to not instantiate a <code>MoshiPack</code> instance you can access the API in a static fashion as well. Note this will create a new <code>Moshi</code> instance every time you make an API call. You may want to use the API this way if you aren't providing <code>MoshiPack</code> by some form of dependency injection and you do not have any specific builder parameters for <code>Moshi</code></p>
<hr>
<h6 dir="auto">
<a id="user-content-format-support" class="anchor" aria-hidden="true" href="#format-support"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Format Support</h6>
<p dir="auto">See <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">MessagePack format spec</a> for further reference.</p>
<table>
  <tbody>
<tr>
<th>format name</th>
<th>first byte (in binary)</th>
<th>first byte (in hex)</th>
<th>Supported</th>
</tr>
  <tr>
<td>positive fixint</td>
<td>0xxxxxxx</td>
<td>0x00 - 0x7f</td>
<td>Yes</td>
</tr>
  <tr>
<td>fixmap</td>
<td>1000xxxx</td>
<td>0x80 - 0x8f</td>
<td>Yes</td>
</tr>
  <tr>
<td>fixarray</td>
<td>1001xxxx</td>
<td>0x90 - 0x9f</td>
<td>Yes</td>
</tr>
  <tr>
<td>fixstr</td>
<td>101xxxxx</td>
<td>0xa0 - 0xbf</td>
<td>Yes</td>
</tr>
  <tr>
<td>nil</td>
<td>11000000</td>
<td>0xc0</td>
<td>Yes</td>
</tr>
  <tr>
<td>(never used)</td>
<td>11000001</td>
<td>0xc1</td>
<td>Yes</td>
</tr>
  <tr>
<td>false</td>
<td>11000010</td>
<td>0xc2</td>
<td>Yes</td>
</tr>
  <tr>
<td>true</td>
<td>11000011</td>
<td>0xc3</td>
<td>Yes</td>
</tr>
  <tr>
<td>bin 8</td>
<td>11000100</td>
<td>0xc4</td>
<td>No</td>
</tr>
  <tr>
<td>bin 16</td>
<td>11000101</td>
<td>0xc5</td>
<td>No</td>
</tr>
  <tr>
<td>bin 32</td>
<td>11000110</td>
<td>0xc6</td>
<td>No</td>
</tr>
  <tr>
<td>ext 8</td>
<td>11000111</td>
<td>0xc7</td>
<td>No</td>
</tr>
  <tr>
<td>ext 16</td>
<td>11001000</td>
<td>0xc8</td>
<td>No</td>
</tr>
  <tr>
<td>ext 32</td>
<td>11001001</td>
<td>0xc9</td>
<td>No</td>
</tr>
  <tr>
<td>float 32</td>
<td>11001010</td>
<td>0xca</td>
<td>Yes</td>
</tr>
  <tr>
<td>float 64</td>
<td>11001011</td>
<td>0xcb</td>
<td>Yes</td>
</tr>
  <tr>
<td>uint 8</td>
<td>11001100</td>
<td>0xcc</td>
<td>Yes</td>
</tr>
  <tr>
<td>uint 16</td>
<td>11001101</td>
<td>0xcd</td>
<td>Yes</td>
</tr>
  <tr>
<td>uint 32</td>
<td>11001110</td>
<td>0xce</td>
<td>Yes</td>
</tr>
  <tr>
<td>uint 64</td>
<td>11001111</td>
<td>0xcf</td>
<td>Yes</td>
</tr>
  <tr>
<td>int 8</td>
<td>11010000</td>
<td>0xd0</td>
<td>Yes</td>
</tr>
  <tr>
<td>int 16</td>
<td>11010001</td>
<td>0xd1</td>
<td>Yes</td>
</tr>
  <tr>
<td>int 32</td>
<td>11010010</td>
<td>0xd2</td>
<td>Yes</td>
</tr>
  <tr>
<td>int 64</td>
<td>11010011</td>
<td>0xd3</td>
<td>Yes</td>
</tr>
  <tr>
<td>fixext 1</td>
<td>11010100</td>
<td>0xd4</td>
<td>No</td>
</tr>
  <tr>
<td>fixext 2</td>
<td>11010101</td>
<td>0xd5</td>
<td>No</td>
</tr>
  <tr>
<td>fixext 4</td>
<td>11010110</td>
<td>0xd6</td>
<td>No</td>
</tr>
  <tr>
<td>fixext 8</td>
<td>11010111</td>
<td>0xd7</td>
<td>No</td>
</tr>
  <tr>
<td>fixext 16</td>
<td>11011000</td>
<td>0xd8</td>
<td>No</td>
</tr>
  <tr>
<td>str 8</td>
<td>11011001</td>
<td>0xd9</td>
<td>Yes</td>
</tr>
  <tr>
<td>str 16</td>
<td>11011010</td>
<td>0xda</td>
<td>Yes</td>
</tr>
  <tr>
<td>str 32</td>
<td>11011011</td>
<td>0xdb</td>
<td>Yes</td>
</tr>
  <tr>
<td>array 16</td>
<td>11011100</td>
<td>0xdc</td>
<td>Yes</td>
</tr>
  <tr>
<td>array 32</td>
<td>11011101</td>
<td>0xdd</td>
<td>Yes</td>
</tr>
  <tr>
<td>map 16</td>
<td>11011110</td>
<td>0xde</td>
<td>Yes</td>
</tr>
  <tr>
<td>map 32</td>
<td>11011111</td>
<td>0xdf</td>
<td>Yes</td>
</tr>
  <tr>
<td>negative fixint</td>
<td>111xxxxx</td>
<td>0xe0 - 0xff</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<hr>
<h6 dir="auto">
<a id="user-content-api" class="anchor" aria-hidden="true" href="#api"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>API</h6>
<h7 dir="auto">
<a id="user-content-pack" class="anchor" aria-hidden="true" href="#pack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>pack</h7>
<p dir="auto">Serializes an object into MessagePack. <strong>Returns:</strong> <code>okio.BufferedSource</code></p>
<p dir="auto">Instance version:</p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="MoshiPack().pack(anyObject)"><pre><span class="pl-en">MoshiPack</span>().pack(anyObject)</pre></div>
<p dir="auto">Static version:</p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="MoshiPack.pack(anyObject)"><pre><span class="pl-en">MoshiPack</span>.pack(anyObject)</pre></div>
<h7 dir="auto">
<a id="user-content-packtobyearray" class="anchor" aria-hidden="true" href="#packtobyearray"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>packToByeArray</h7>
<p dir="auto">If you prefer to get a <code>ByteArray</code> instead of a <code>BufferedSource</code> you can use this method.</p>
<p dir="auto">Instance version only</p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="MoshiPack().packToByteArray(anObject)"><pre><span class="pl-en">MoshiPack</span>().packToByteArray(anObject)</pre></div>
<p dir="auto">Static can be done</p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="MoshiPack.pack(anObject).readByteArray()"><pre><span class="pl-en">MoshiPack</span>.pack(anObject).readByteArray()</pre></div>
<h7 dir="auto">
<a id="user-content-unpack" class="anchor" aria-hidden="true" href="#unpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>unpack</h7>
<p dir="auto">Deserializes MessagePack bytes into an Object. <strong>Returns:</strong> <code>T: Any</code>
Works with <code>ByteArray</code> and <code>okio.BufferedSource</code></p>
<p dir="auto">Instance version:</p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="// T must be valid type so Moshi knows what to deserialize to
val unpacked: T = MoshiPack().unpack(byteArray)"><pre><span class="pl-c"><span class="pl-c">//</span> T must be valid type so Moshi knows what to deserialize to</span>
<span class="pl-k">val</span> unpacked<span class="pl-k">:</span> <span class="pl-en">T</span> <span class="pl-k">=</span> <span class="pl-en">MoshiPack</span>().unpack(byteArray)</pre></div>
<p dir="auto">Static version:</p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="val unpacked: T = MoshiPack.upack(byteArray)"><pre><span class="pl-k">val</span> unpacked<span class="pl-k">:</span> <span class="pl-en">T</span> <span class="pl-k">=</span> <span class="pl-en">MoshiPack</span>.upack(byteArray)</pre></div>
<p dir="auto">Instance version:</p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="val unpacked: T = MoshiPack().unpack(bufferedSource)"><pre><span class="pl-k">val</span> unpacked<span class="pl-k">:</span> <span class="pl-en">T</span> <span class="pl-k">=</span> <span class="pl-en">MoshiPack</span>().unpack(bufferedSource)</pre></div>
<p dir="auto">Static version:</p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="val unpacked: T = MoshiPack.upack(bufferedSource)"><pre><span class="pl-k">val</span> unpacked<span class="pl-k">:</span> <span class="pl-en">T</span> <span class="pl-k">=</span> <span class="pl-en">MoshiPack</span>.upack(bufferedSource)</pre></div>
<p dir="auto">T can be an Object, a List, a Map, and can include generics. Unlike <code>Moshi</code> you do not need to specify a parameterized type to deserialize to a List with generics. <code>MoshiPack</code> can infer the paramterized type for you.</p>
<p dir="auto">The following examples are valid for <code>MoshiPack</code>:</p>
<p dir="auto">A typed List</p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="val listCars: List&lt;Car&gt; = MoshiPack.unpack(carMsgPkBytes)"><pre><span class="pl-k">val</span> listCars<span class="pl-k">:</span> <span class="pl-c1">List</span>&lt;<span class="pl-en">Car</span>&gt; <span class="pl-k">=</span> <span class="pl-en">MoshiPack</span>.unpack(carMsgPkBytes)</pre></div>
<p dir="auto">A List of Any</p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="val listCars: List&lt;Any&gt; = MoshiPack.unpack(carMsgPkBytes)"><pre><span class="pl-k">val</span> listCars<span class="pl-k">:</span> <span class="pl-c1">List</span>&lt;<span class="pl-en">Any</span>&gt; <span class="pl-k">=</span> <span class="pl-en">MoshiPack</span>.unpack(carMsgPkBytes)</pre></div>
<p dir="auto">An Object</p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="val car: Car = MoshiPack.unpack(carBytes)"><pre><span class="pl-k">val</span> car<span class="pl-k">:</span> <span class="pl-en">Car</span> <span class="pl-k">=</span> <span class="pl-en">MoshiPack</span>.unpack(carBytes)</pre></div>
<p dir="auto">A Map of Any, Any</p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="val car: Map&lt;Any, Any&gt; = MoshiPack.unpack(carBytes)"><pre><span class="pl-k">val</span> car<span class="pl-k">:</span> <span class="pl-c1">Map</span>&lt;<span class="pl-en">Any</span>, <span class="pl-en">Any</span>&gt; <span class="pl-k">=</span> <span class="pl-en">MoshiPack</span>.unpack(carBytes)</pre></div>
<h7 dir="auto">
<a id="user-content-msgpacktojson" class="anchor" aria-hidden="true" href="#msgpacktojson"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpackToJson</h7>
<p dir="auto">Convert directly from MessagePack bytes to JSON. Use this method for the most effecient implementation as no objects are instantiated in the process. This uses the <code>FormatInterchange</code> class to match implementations of <code>JsonReader</code> and a <code>JsonWriter</code>. If you wanted to say support XML as a direct conversion to and from, you could implement Moshi's <code>JsonReader</code> and <code>JsonWriter</code> classes and use the <code>FormatInterchange</code> class to convert directly to other formats. <strong>Returns</strong> <code>String</code> containing a JSON representation of the MessagePack data</p>
<p dir="auto">Instance versions: (takes <code>ByteArray</code> or <code>BufferedSource</code>)</p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="MoshiPack().msgpackToJson(byteArray)"><pre><span class="pl-en">MoshiPack</span>().msgpackToJson(byteArray)</pre></div>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="MoshiPack().msgpackToJson(bufferedSource)"><pre><span class="pl-en">MoshiPack</span>().msgpackToJson(bufferedSource)</pre></div>
<p dir="auto">Static versions: (takes <code>ByteArray</code> or <code>BufferedSource</code>)</p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="MoshiPack.msgpackToJson(byteArray)"><pre><span class="pl-en">MoshiPack</span>.msgpackToJson(byteArray)</pre></div>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="MoshiPack.msgpackToJson(bufferedSource)"><pre><span class="pl-en">MoshiPack</span>.msgpackToJson(bufferedSource)</pre></div>
<h7 dir="auto">
<a id="user-content-jsontomsgpack" class="anchor" aria-hidden="true" href="#jsontomsgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>jsonToMsgpack</h7>
<p dir="auto">Convert directly from JSON to MessagePack bytes. Use this method for the most effecient implementation as no objects are instantiated in the process. <strong>Returns</strong> <code>BufferedSource</code></p>
<p dir="auto">Instance versions: (takes <code>String</code> or <code>BufferedSource</code>)</p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="MoshiPack().jsonToMsgpack(jsonString)"><pre><span class="pl-en">MoshiPack</span>().jsonToMsgpack(jsonString)</pre></div>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="MoshiPack().jsonToMsgpack(bufferedSource)"><pre><span class="pl-en">MoshiPack</span>().jsonToMsgpack(bufferedSource)</pre></div>
<p dir="auto">Static versions: (takes <code>String</code> or <code>BufferedSource</code>)</p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="MoshiPack.jsonToMsgpack(jsonString)"><pre><span class="pl-en">MoshiPack</span>.jsonToMsgpack(jsonString)</pre></div>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="MoshiPack.jsonToMsgpack(bufferedSource)"><pre><span class="pl-en">MoshiPack</span>.jsonToMsgpack(bufferedSource)</pre></div>
<h7 dir="auto">
<a id="user-content-moshipack---constructor--moshi-builder" class="anchor" aria-hidden="true" href="#moshipack---constructor--moshi-builder"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MoshiPack - constructor + Moshi builder</h7>
<p dir="auto">The <code>MoshiPack</code> constructor takes an optional <code>Moshi.Builder.() -&gt; Unit</code> lambda which is applied to the builder that is used to instantiate the <code>Moshi</code> instance it uses.</p>
<p dir="auto">Example adding custom adapter:</p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="val moshiPack = MoshiPack({
  add(customAdapter)
})"><pre><span class="pl-k">val</span> moshiPack <span class="pl-k">=</span> <span class="pl-en">MoshiPack</span>({
  add(customAdapter)
})</pre></div>
<p dir="auto"><code>Moshi</code> is also a settable property which can be changed on a <code>MoshiPack</code> instance:</p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="val m = MoshiPack()
m.moshi = Moshi.Builder().build()"><pre><span class="pl-k">val</span> m <span class="pl-k">=</span> <span class="pl-en">MoshiPack</span>()
m.moshi <span class="pl-k">=</span> <span class="pl-en">Moshi</span>.<span class="pl-en">Builder</span>().build()</pre></div>
<p dir="auto">The static version of the API also can be passed a lambda to applied to the <code>Moshi.Builder</code> used to instantiate <code>Moshi</code>:</p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="MoshiPack.pack(someBytes) { add(customAdapter) }"><pre><span class="pl-en">MoshiPack</span>.pack(someBytes) { add(customAdapter) }</pre></div>
<h7 dir="auto">
<a id="user-content-forcing-integers-to-write-as-certain-format" class="anchor" aria-hidden="true" href="#forcing-integers-to-write-as-certain-format"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Forcing integers to write as certain format</h7>
<ul dir="auto">
<li>new in v1.0.1</li>
</ul>
<p dir="auto">This will force all integers to be packed as the type given.
By default the smallest message pack type is used for integers.</p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="val moshiPack = MoshiPack().apply {
    writerOptions.writeAllIntsAs = MsgpackIntByte.INT_64
}"><pre><span class="pl-k">val</span> moshiPack <span class="pl-k">=</span> <span class="pl-en">MoshiPack</span>().<span class="pl-c1">apply</span> {
    writerOptions.writeAllIntsAs <span class="pl-k">=</span> <span class="pl-en">MsgpackIntByte</span>.<span class="pl-en">INT_64</span>
}</pre></div>
<hr>
<h6 dir="auto">
<a id="user-content-kotiln-support" class="anchor" aria-hidden="true" href="#kotiln-support"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Kotiln Support</h6>
<p dir="auto">Since this library is intended for Kotlin use, the <code>moshi-kotlin</code> artifact is included as a depedency. A <code>KotlinJsonAdapterFactory</code> is added by default to the instantiated <code>Moshi</code> that <code>MoshiPack</code> uses.
This adapter allows for the use of <code>Moshi</code>'s annotaions in Kotlin. To learn more about it see the <a href="https://github.com/square/moshi"><code>Moshi</code></a> documentation.</p>
<p dir="auto">If you'd like to use <code>Moshi</code> with out a <code>KotlinJsonAdapterFactory</code> supply a <code>Moshi</code> instance for <code>MoshiPack</code>:</p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="MoshiPack(moshi = Moshi.Builder().build)"><pre><span class="pl-en">MoshiPack</span>(moshi <span class="pl-k">=</span> <span class="pl-en">Moshi</span>.<span class="pl-en">Builder</span>().build)</pre></div>
<h6 dir="auto">
<a id="user-content-proguard" class="anchor" aria-hidden="true" href="#proguard"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>ProGuard</h6>
<p dir="auto">From <code>Moshi</code>'s README.md;
If you are using ProGuard you might need to add the following options:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="-dontwarn okio.**
-dontwarn javax.annotation.**
-keepclasseswithmembers class * {
    @com.squareup.moshi.* &lt;methods&gt;;
}
-keep @com.squareup.moshi.JsonQualifier interface *
-keepclassmembers class kotlin.Metadata {
    public &lt;methods&gt;;
}"><pre class="notranslate"><code>-dontwarn okio.**
-dontwarn javax.annotation.**
-keepclasseswithmembers class * {
    @com.squareup.moshi.* &lt;methods&gt;;
}
-keep @com.squareup.moshi.JsonQualifier interface *
-keepclassmembers class kotlin.Metadata {
    public &lt;methods&gt;;
}
</code></pre></div>
<h6 dir="auto">
<a id="user-content-retrofit" class="anchor" aria-hidden="true" href="#retrofit"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Retrofit</h6>
<p dir="auto">An example of using the retorfit adapter can be found here:
<a href="https://github.com/davethomas11/MoshiPack_AndroidAppExample">https://github.com/davethomas11/MoshiPack_AndroidAppExample</a></p>
</article>
  </div>
        </div>
        
        <div id="qs-kropp-kotlinx-serialization-msgpack" class="qs"><h4><a href="https://github.com/kropp/kotlinx.serialization.msgpack" target="_blank">kropp/kotlinx.serialization.msgpack <span class="qs-url">https://github.com/kropp/kotlinx.serialization.msgpack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-kotlin-serialization-messagepack-library" class="anchor" aria-hidden="true" href="#kotlin-serialization-messagepack-library"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Kotlin Serialization MessagePack library</h5>
<p dir="auto">This library extends <a href="https://github.com/Kotlin/kotlinx.serialization/">kotlinx.serialization</a> framework to support
<a href="https://msgpack.org/" rel="nofollow">MessagePack</a> format.</p>
<h6 dir="auto">
<a id="user-content-implementation-details" class="anchor" aria-hidden="true" href="#implementation-details"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Implementation details</h6>
<p dir="auto">When multiple equivalent encodings exist, the shortest (in terms of number of bytes) is used.
Decoders decode any format and convert it to a required type (possibly loosing precision or significant higher digits)</p>
<p dir="auto">Thus, not for any input decoding and encoding back will produce the exact same byte array. However, for any <code>@Serializable</code> class
encoding and decoding should result in the equivalent instance.</p>
<h6 dir="auto">
<a id="user-content-current-limitations" class="anchor" aria-hidden="true" href="#current-limitations"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Current Limitations</h6>
<ul dir="auto">
<li>Only JVM is supported as of now</li>
<li>Unsigned integers can't be encoded because kotlinx.serialization framework <a href="https://github.com/Kotlin/kotlinx.serialization/issues/259" data-hovercard-type="issue" data-hovercard-url="/Kotlin/kotlinx.serialization/issues/259/hovercard">doesn't support <code>inline</code> classes</a> (yet)</li>
<li>MessagePack extensions are not supported</li>
</ul>
<h6 dir="auto">
<a id="user-content-verification" class="anchor" aria-hidden="true" href="#verification"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Verification</h6>
<p dir="auto">The implementation is tested against <a href="https://github.com/kawanet/msgpack-test-suite/">https://github.com/kawanet/msgpack-test-suite/</a></p>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="import com.github.kropp.messagepack.MessagePack

@Serializable
data class Demo(val compact: Boolean, val schema: Int)

val bytes = byteArrayOf(0x82.toByte(), 0xA7.toByte(), 0x63, 0x6F, 0x6D, 0x70, 0x61, 0x63, 0x74, 0xC3.toByte(), 0xA6.toByte(), 0x73, 0x63, 0x68, 0x65, 0x6D, 0x61, 0x00)
val demo = MessagePack.decode(Demo.serializer(), bytes)

assertEquals(demo.compact, true)
assertEquals(demo.schema, 0)"><pre><span class="pl-k">import</span> <span class="pl-smi">com.github.kropp.messagepack.MessagePack</span>

@Serializable
<span class="pl-k">data class</span> <span class="pl-en">Demo</span>(<span class="pl-k">val</span> <span class="pl-smi">compact</span><span class="pl-k">:</span> <span class="pl-c1">Boolean</span>, <span class="pl-k">val</span> <span class="pl-smi">schema</span><span class="pl-k">:</span> <span class="pl-c1">Int</span>)

<span class="pl-k">val</span> bytes <span class="pl-k">=</span> byteArrayOf(<span class="pl-c1">0x82</span>.toByte(), <span class="pl-c1">0xA7</span>.toByte(), <span class="pl-c1">0x63</span>, <span class="pl-c1">0x6F</span>, <span class="pl-c1">0x6D</span>, <span class="pl-c1">0x70</span>, <span class="pl-c1">0x61</span>, <span class="pl-c1">0x63</span>, <span class="pl-c1">0x74</span>, <span class="pl-c1">0xC3</span>.toByte(), <span class="pl-c1">0xA6</span>.toByte(), <span class="pl-c1">0x73</span>, <span class="pl-c1">0x63</span>, <span class="pl-c1">0x68</span>, <span class="pl-c1">0x65</span>, <span class="pl-c1">0x6D</span>, <span class="pl-c1">0x61</span>, <span class="pl-c1">0x00</span>)
<span class="pl-k">val</span> demo <span class="pl-k">=</span> <span class="pl-en">MessagePack</span>.decode(<span class="pl-en">Demo</span>.serializer(), bytes)

assertEquals(demo.compact, <span class="pl-c1">true</span>)
assertEquals(demo.schema, <span class="pl-c1">0</span>)</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-mradziwo-MsgPack_LabVIEW" class="qs"><h4><a href="https://github.com/mradziwo/MsgPack_LabVIEW" target="_blank">mradziwo/MsgPack_LabVIEW <span class="qs-url">https://github.com/mradziwo/MsgPack_LabVIEW</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack_lab-view" class="anchor" aria-hidden="true" href="#msgpack_lab-view"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MsgPack_Lab-VIEW</h5>
<p dir="auto">MsgPack_Lab-VIEW is a lightweight MessagePack serializer and deserializer library written in native LabVIEW 2016.</p>
<p dir="auto">One can decode a MsgPack message to LabVIEW variant containing correct type, or - when type is known at compile time - one can use dedicated decode functions for each supported type.</p>
</article>
  </div>
        </div>
        
        <div id="qs-markstinson-lua-MessagePack" class="qs"><h4><a href="http://fperrad.github.io/lua-MessagePack/" target="_blank">markstinson/lua-MessagePack <span class="qs-url">http://fperrad.github.io/lua-MessagePack/</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-lua-messagepack--a-pure-lua-implementation-spec-v5" class="anchor" aria-hidden="true" href="#lua-messagepack--a-pure-lua-implementation-spec-v5"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>lua-MessagePack : a pure Lua implementation (spec v5)</h5>
<p dir="auto"><a href="https://travis-ci.org/fperrad/lua-MessagePack" rel="nofollow"><img src="https://camo.githubusercontent.com/00a83c9f44341e1044f7609642fa4e57b74ad44235bfb158c0135ab7d1e87cb9/68747470733a2f2f7472617669732d63692e6f72672f667065727261642f6c75612d4d6573736167655061636b2e706e67" alt="Build Status" data-canonical-src="https://travis-ci.org/fperrad/lua-MessagePack.png" style="max-width: 100%;"></a></p>
<h6 dir="auto">
<a id="user-content-introduction" class="anchor" aria-hidden="true" href="#introduction"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Introduction</h6>
<p dir="auto"><a href="http://msgpack.org/" rel="nofollow">MessagePack</a> is an efficient binary serialization format.</p>
<p dir="auto">It lets you exchange data among multiple languages like JSON but it's faster and smaller.</p>
<p dir="auto">It's a pure Lua implementation, without dependency.</p>
<p dir="auto">And it's really fast with <a href="http://luajit.org" rel="nofollow">LuaJIT</a>.</p>
<h6 dir="auto">
<a id="user-content-links" class="anchor" aria-hidden="true" href="#links"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Links</h6>
<p dir="auto">The homepage is at <a href="http://fperrad.github.io/lua-MessagePack/" rel="nofollow">http://fperrad.github.io/lua-MessagePack/</a>,
and the sources are hosted at <a href="http://github.com/fperrad/lua-MessagePack/">http://github.com/fperrad/lua-MessagePack/</a>.</p>
<h6 dir="auto">
<a id="user-content-copyright-and-license" class="anchor" aria-hidden="true" href="#copyright-and-license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Copyright and License</h6>
<p dir="auto">Copyright (c) 2012-2013 Francois Perrad</p>
<p dir="auto">This library is licensed under the terms of the MIT/X11 license, like Lua itself.</p>
</article>
  </div>
        </div>
        
        <div id="qs-kieselsteini-msgpack" class="qs"><h4><a href="https://github.com/kieselsteini/msgpack" target="_blank">kieselsteini/msgpack <span class="qs-url">https://github.com/kieselsteini/msgpack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack-for-lua-53--54" class="anchor" aria-hidden="true" href="#messagepack-for-lua-53--54"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack for Lua 5.3 / 5.4</h5>
<h6 dir="auto">
<a id="user-content-overview" class="anchor" aria-hidden="true" href="#overview"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Overview</h6>
<p dir="auto">This is a pure Lua implementation for encoding/decoding MessagePack (<a href="https://msgpack.org" rel="nofollow">https://msgpack.org</a>).</p>
<p dir="auto">Please report any bugs you encounter!</p>
<p dir="auto">Features:</p>
<ul dir="auto">
<li>written in pure Lua 5.3 / 5.4 (using <code>string.pack()</code> / <code>string.unpack()</code>)</li>
<li>can distinguish between integer / float / double numbers</li>
<li>can distinguish between UTF-8 strings and binary data</li>
<li>public domain license (<a href="http://unlicense.org" rel="nofollow">http://unlicense.org</a>)</li>
<li>pretty fast decoding</li>
</ul>
<p dir="auto">What's missing:</p>
<ul dir="auto">
<li>extendend types <code>fixent</code>
</li>
</ul>
<p dir="auto">Example code:</p>
<div class="highlight highlight-source-lua notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="local msgpack = require('msgpack')

local value = msgpack.decode(binary_msgpack_data) -- decode to Lua value

local binary_data = msgpack.encode(lua_value) -- encode Lua value to MessagePack"><pre><span class="pl-k">local</span> msgpack <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>msgpack<span class="pl-pds">'</span></span>)

<span class="pl-k">local</span> value <span class="pl-k">=</span> msgpack.<span class="pl-c1">decode</span>(binary_msgpack_data) <span class="pl-c"><span class="pl-c">--</span> decode to Lua value</span>

<span class="pl-k">local</span> binary_data <span class="pl-k">=</span> msgpack.<span class="pl-c1">encode</span>(lua_value) <span class="pl-c"><span class="pl-c">--</span> encode Lua value to MessagePack</span></pre></div>
<h6 dir="auto">
<a id="user-content-api" class="anchor" aria-hidden="true" href="#api"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>API</h6>
<h7 dir="auto">
<a id="user-content-msgpackencode_onevalue" class="anchor" aria-hidden="true" href="#msgpackencode_onevalue"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack.encode_one(value)</h7>
<p dir="auto">Encodes the given Lua value to a binary MessagePack representation. It will return the binary string on succes or <code>nil</code> plus an error message if it fails.</p>
<p dir="auto">The encoder will encode Lua strings as MessagePack strings when they are properly UTF-8 encoded otherwise they will become MessagePack binary objects.</p>
<p dir="auto">There is also a check if a Lua number can be lossless encoded as a 32-bit float.</p>
<blockquote>
<p dir="auto"><strong>NOTE:</strong> Empty Lua tables will be encoded as empty arrays!</p>
</blockquote>
<h7 dir="auto">
<a id="user-content-msgpackencode" class="anchor" aria-hidden="true" href="#msgpackencode"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack.encode(...)</h7>
<p dir="auto">Encodes all given values to a binary MessagePack representation. It will return the binary string or <code>nil</code> plus an error message if it fails.</p>
<div class="highlight highlight-source-lua notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="local binary = msgpack.encode('Hello', 1024, true, { 2, 3, 4 })"><pre><span class="pl-k">local</span> binary <span class="pl-k">=</span> msgpack.<span class="pl-c1">encode</span>(<span class="pl-s"><span class="pl-pds">'</span>Hello<span class="pl-pds">'</span></span>, <span class="pl-c1">1024</span>, <span class="pl-c1">true</span>, { <span class="pl-c1">2</span>, <span class="pl-c1">3</span>, <span class="pl-c1">4</span> })</pre></div>
<h7 dir="auto">
<a id="user-content-msgpackdecode_onebinary_data-position" class="anchor" aria-hidden="true" href="#msgpackdecode_onebinary_data-position"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack.decode_one(binary_data[, position])</h7>
<p dir="auto">Decode the given MessagePack binary string to a corresponding Lua value. It will return the decoded Lua value and the position for next byte in stream
or <code>nil</code> plus an error message if decoding went wrong. You can use the returned position to decode multiple MessagePack values in a stream.</p>
<p dir="auto">The optional position argument is used to start the decoding at a specific position inside the the binary_data string.</p>
<blockquote>
<p dir="auto"><strong>NOTE:</strong> Extended types are not supported. Decoding will fail!</p>
</blockquote>
<blockquote>
<p dir="auto"><strong>NOTE:</strong> Binary data will be decoded as Lua strings</p>
</blockquote>
<blockquote>
<p dir="auto"><strong>NOTE:</strong> Arrays will be decoded as Lua tables starting with index 1 (like Lua uses tables as arrays)</p>
</blockquote>
<blockquote>
<p dir="auto"><strong>NOTE:</strong> Values which are <code>nil</code> will cause the key, value pair to disappear in a Lua table (that's how it works in Lua)</p>
</blockquote>
<h7 dir="auto">
<a id="user-content-msgpackdecodebinary_data-position" class="anchor" aria-hidden="true" href="#msgpackdecodebinary_data-position"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack.decode(binary_data[, position])</h7>
<p dir="auto">Decode the given MessagePack binary string to one or more Lua values. It will return all decoded Lua values or <code>nil</code> plus an error message if decoding failed.</p>
<div class="highlight highlight-source-lua notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="local a, b, c = msgpack.decode(binary)"><pre><span class="pl-k">local</span> a, b, c <span class="pl-k">=</span> msgpack.<span class="pl-c1">decode</span>(binary)</pre></div>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='This is free and unencumbered software released into the public domain.

Anyone is free to copy, modify, publish, use, compile, sell, or
distribute this software, either in source code form or as a compiled
binary, for any purpose, commercial or non-commercial, and by any
means.

In jurisdictions that recognize copyright laws, the author or authors
of this software dedicate any and all copyright interest in the
software to the public domain. We make this dedication for the benefit
of the public at large and to the detriment of our heirs and
successors. We intend this dedication to be an overt act of
relinquishment in perpetuity of all present and future rights to this
software under copyright law.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
IN NO EVENT SHALL THE AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR
OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.

For more information, please refer to &lt;http://unlicense.org/&gt;'><pre class="notranslate"><code>This is free and unencumbered software released into the public domain.

Anyone is free to copy, modify, publish, use, compile, sell, or
distribute this software, either in source code form or as a compiled
binary, for any purpose, commercial or non-commercial, and by any
means.

In jurisdictions that recognize copyright laws, the author or authors
of this software dedicate any and all copyright interest in the
software to the public domain. We make this dedication for the benefit
of the public at large and to the detriment of our heirs and
successors. We intend this dedication to be an overt act of
relinquishment in perpetuity of all present and future rights to this
software under copyright law.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
IN NO EVENT SHALL THE AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR
OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.

For more information, please refer to &lt;http://unlicense.org/&gt;
</code></pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-bastibe-matlab-msgpack" class="qs"><h4><a href="https://github.com/bastibe/matlab-msgpack" target="_blank">bastibe/matlab-msgpack <span class="qs-url">https://github.com/bastibe/matlab-msgpack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-a-messagepack-implementation-for-matlab-and-octave" class="anchor" aria-hidden="true" href="#a-messagepack-implementation-for-matlab-and-octave"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>A MessagePack implementation for Matlab and Octave</h5>
<p dir="auto">The code is written in pure Matlab, and has no dependencies beyond Matlab itself. And it works in recent versions of Octave, too.</p>
<p dir="auto">The files in this repository are taken from <a href="https://github.com/bastibe/transplant">Transplant</a>.</p>
<h6 dir="auto">
<a id="user-content-basic-usage" class="anchor" aria-hidden="true" href="#basic-usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Basic Usage:</h6>
<div class="highlight highlight-source-matlab notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="data = {'life, the universe, and everything', struct('the_answer', 42)};
bytes = dumpmsgpack(data)
data = parsemsgpack(bytes)
% returns: {'life, the universe, and everything', containers.Map('the_answer', 42)}"><pre>data <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">'</span>life, the universe, and everything<span class="pl-pds">'</span></span>, <span class="pl-en">struct</span>(<span class="pl-s"><span class="pl-pds">'</span>the_answer<span class="pl-pds">'</span></span>, <span class="pl-c1">42</span>)};
bytes <span class="pl-k">=</span> <span class="pl-en">dumpmsgpack</span>(<span class="pl-smi">data</span>)
data <span class="pl-k">=</span> <span class="pl-en">parsemsgpack</span>(<span class="pl-smi">bytes</span>)
<span class="pl-c"><span class="pl-c">%</span> returns: {'life, the universe, and everything', containers.Map('the_answer', 42)}</span></pre></div>
<h6 dir="auto">
<a id="user-content-converting-matlab-to-msgpack" class="anchor" aria-hidden="true" href="#converting-matlab-to-msgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Converting Matlab to MsgPack:</h6>
<table>
<thead>
<tr>
<th>Matlab</th>
<th>MsgPack</th>
</tr>
</thead>
<tbody>
<tr>
<td>string</td>
<td>string</td>
</tr>
<tr>
<td>scalar</td>
<td>number</td>
</tr>
<tr>
<td>logical</td>
<td>
<code>true</code>/<code>false</code>
</td>
</tr>
<tr>
<td>vector</td>
<td>array of numbers</td>
</tr>
<tr>
<td>uint8 vector</td>
<td>bin</td>
</tr>
<tr>
<td>matrix</td>
<td>array of array of numbers</td>
</tr>
<tr>
<td>empty matrix</td>
<td>nil</td>
</tr>
<tr>
<td>cell array</td>
<td>array</td>
</tr>
<tr>
<td>cell matrix</td>
<td>array of arrays</td>
</tr>
<tr>
<td>struct</td>
<td>map</td>
</tr>
<tr>
<td>containers.Map</td>
<td>map</td>
</tr>
<tr>
<td>struct array</td>
<td>array of maps</td>
</tr>
<tr>
<td>handles</td>
<td>raise error</td>
</tr>
</tbody>
</table>
<p dir="auto">There is no way of encoding exts</p>
<h6 dir="auto">
<a id="user-content-converting-msgpack-to-matlab" class="anchor" aria-hidden="true" href="#converting-msgpack-to-matlab"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Converting MsgPack to Matlab</h6>
<table>
<thead>
<tr>
<th>MsgPack</th>
<th>Matlab</th>
</tr>
</thead>
<tbody>
<tr>
<td>string</td>
<td>string</td>
</tr>
<tr>
<td>number</td>
<td>scalar</td>
</tr>
<tr>
<td>
<code>true</code>/<code>false</code>
</td>
<td>logical</td>
</tr>
<tr>
<td>nil</td>
<td>empty matrix</td>
</tr>
<tr>
<td>array</td>
<td>cell array</td>
</tr>
<tr>
<td>map</td>
<td>containers.Map</td>
</tr>
<tr>
<td>bin</td>
<td>uint8</td>
</tr>
<tr>
<td>ext</td>
<td>uint8</td>
</tr>
</tbody>
</table>
<p dir="auto">Note that since <code>structs</code> don't support arbitrary field names, they can't be used for representing <code>maps</code>. We use <code>containers.Map</code> instead.</p>
<h6 dir="auto">
<a id="user-content-tests" class="anchor" aria-hidden="true" href="#tests"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Tests</h6>
<div class="highlight highlight-source-matlab notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="runtests()"><pre><span class="pl-en">runtests</span>()</pre></div>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<p dir="auto">MATLAB (R) is copyright of the Mathworks</p>
<p dir="auto">Copyright (c) 2014 Bastian Bechtold
All rights reserved.</p>
<p dir="auto">Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:</p>
<ol dir="auto">
<li>
<p dir="auto">Redistributions of source code must retain the above copyright
notice, this list of conditions and the following disclaimer.</p>
</li>
<li>
<p dir="auto">Redistributions in binary form must reproduce the above copyright
notice, this list of conditions and the following disclaimer in the
documentation and/or other materials provided with the
distribution.</p>
</li>
<li>
<p dir="auto">Neither the name of the copyright holder nor the names of its
contributors may be used to endorse or promote products derived
from this software without specific prior written permission.</p>
</li>
</ol>
<p dir="auto">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
</article>
  </div>
        </div>
        
        <div id="qs-akiradeveloper-msgpack-nim" class="qs"><h4><a href="https://github.com/akiradeveloper/msgpack-nim" target="_blank">akiradeveloper/msgpack-nim <span class="qs-url">https://github.com/akiradeveloper/msgpack-nim</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><p dir="auto">I will start this project once Nim compiler reaches 1.0</p>
<h5 dir="auto">
<a id="user-content-msgpack-nim" class="anchor" aria-hidden="true" href="#msgpack-nim"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack-nim</h5>
<p dir="auto">A MessagePack binding for Nim</p>
<p dir="auto"><a href="https://travis-ci.org/akiradeveloper/msgpack-nim" rel="nofollow"><img src="https://camo.githubusercontent.com/afeaeca2f6f7f2d5753ca75bb427009f08ed4c1089548e7b5644fb45ce8769f0/68747470733a2f2f7472617669732d63692e6f72672f616b697261646576656c6f7065722f6d73677061636b2d6e696d2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/akiradeveloper/msgpack-nim.svg?branch=master" style="max-width: 100%;"></a></p>
<p dir="auto">API: <a href="https://rawgit.com/akiradeveloper/msgpack-nim/master/msgpack.html" rel="nofollow">https://rawgit.com/akiradeveloper/msgpack-nim/master/msgpack.html</a></p>
<p dir="auto">msgpack-nim currently provides only the basic functionality.
Please see what's listed in Todo section. Compared to other language bindings, it's well-tested by
1000 auto-generated test cases by Haskell QuickCheck, which always runs
on every commit to Github repository. Please try <code>make quickcheck</code> on your local machine
to see what happens (It will take a bit while. Be patient). Have a nice packing!</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/565f65aa47fb69930a640f5d28fda3bce0d9ab91ceb2d2525e41b1c9acdfc657/68747470733a2f2f7261776769742e636f6d2f616b697261646576656c6f7065722f6d73677061636b2d6e696d2f6d61737465722f6f766572766965772e737667"><img src="https://camo.githubusercontent.com/565f65aa47fb69930a640f5d28fda3bce0d9ab91ceb2d2525e41b1c9acdfc657/68747470733a2f2f7261776769742e636f6d2f616b697261646576656c6f7065722f6d73677061636b2d6e696d2f6d61737465722f6f766572766965772e737667" alt="Overview" data-canonical-src="https://rawgit.com/akiradeveloper/msgpack-nim/master/overview.svg" style="max-width: 100%;"></a></p>
<h6 dir="auto">
<a id="user-content-install" class="anchor" aria-hidden="true" href="#install"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install</h6>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ nimble update
$ nimble install msgpack"><pre>$ nimble update
$ nimble install msgpack</pre></div>
<h6 dir="auto">
<a id="user-content-example" class="anchor" aria-hidden="true" href="#example"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example</h6>
<div class="highlight highlight-source-nim notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import msgpack
import streams

# You can use any stream subclasses to serialize/deserialize
# messages. e.g. FileStream
let st: Stream = newStringStream()

assert(st.getPosition == 0)

# Type checking protects you from making trivial mistakes.
# Now we pack {"a":[5,-3], "b":[1,2,3]} but more complex
# combination of any Msg types is allowed.
#
# In xs we can mix specific conversion (PFixNum) and generic
# conversion (unwrap).
let xs: Msg = wrap(@[PFixNum(5), (-3).wrap])
let ys: Msg = wrap(@[("a".wrap, xs.wrap), ("b".wrap, @[1, 2, 3].wrap)])
st.pack(ys.wrap) # Serialize!

# We need to reset the cursor to the beginning of the target
# byte sequence.
st.setPosition(0)

let msg = st.unpack # Deserialize!

# output:
# a
# 5
# -3
# b
# 1
# 2
# 3
for e in msg.unwrapMap:
  echo e.key.unwrapStr
  for e in e.val.unwrapArray:
    echo e.unwrapInt'><pre><span class="pl-k">import</span> msgpack
<span class="pl-k">import</span> streams

<span class="pl-c"><span class="pl-c"># </span><span class="pl-c">You can use any stream subclasses to serialize/deserialize</span></span>
<span class="pl-c"><span class="pl-c"># </span><span class="pl-c">messages. e.g. FileStream</span></span>
<span class="pl-k">let</span> st: <span class="pl-c1">Stream</span> = <span class="pl-c1">newStringStream</span>()

<span class="pl-k">assert</span>(st.getPosition == <span class="pl-c1">0</span>)

<span class="pl-c"><span class="pl-c"># </span><span class="pl-c">Type checking protects you from making trivial mistakes.</span></span>
<span class="pl-c"><span class="pl-c"># </span><span class="pl-c">Now we pack {"a":[5,-3], "b":[1,2,3]} but more complex</span></span>
<span class="pl-c"><span class="pl-c"># </span><span class="pl-c">combination of any Msg types is allowed.</span></span>
<span class="pl-c"><span class="pl-c">#</span></span>
<span class="pl-c"><span class="pl-c"># </span><span class="pl-c">In xs we can mix specific conversion (PFixNum) and generic</span></span>
<span class="pl-c"><span class="pl-c"># </span><span class="pl-c">conversion (unwrap).</span></span>
<span class="pl-k">let</span> xs: <span class="pl-c1">Msg</span> = <span class="pl-c1">wrap</span>(@[<span class="pl-c1">PFixNum</span>(<span class="pl-c1">5</span>), (-<span class="pl-c1">3</span>).wrap])
<span class="pl-k">let</span> ys: <span class="pl-c1">Msg</span> = <span class="pl-c1">wrap</span>(@[(<span class="pl-s">"a"</span><span class="pl-k">.</span>wrap, xs.wrap), (<span class="pl-s">"b"</span><span class="pl-k">.</span>wrap, @[<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>].wrap)])
st.<span class="pl-c1">pack</span>(ys.wrap) <span class="pl-c"><span class="pl-c"># </span><span class="pl-c">Serialize!</span></span>

<span class="pl-c"><span class="pl-c"># </span><span class="pl-c">We need to reset the cursor to the beginning of the target</span></span>
<span class="pl-c"><span class="pl-c"># </span><span class="pl-c">byte sequence.</span></span>
st.<span class="pl-c1">setPosition</span>(<span class="pl-c1">0</span>)

<span class="pl-k">let</span> msg = st.unpack <span class="pl-c"><span class="pl-c"># </span><span class="pl-c">Deserialize!</span></span>

<span class="pl-c"><span class="pl-c"># </span><span class="pl-c">output:</span></span>
<span class="pl-c"><span class="pl-c"># </span><span class="pl-c">a</span></span>
<span class="pl-c"><span class="pl-c"># </span><span class="pl-c">5</span></span>
<span class="pl-c"><span class="pl-c"># </span><span class="pl-c">-3</span></span>
<span class="pl-c"><span class="pl-c"># </span><span class="pl-c">b</span></span>
<span class="pl-c"><span class="pl-c"># </span><span class="pl-c">1</span></span>
<span class="pl-c"><span class="pl-c"># </span><span class="pl-c">2</span></span>
<span class="pl-c"><span class="pl-c"># </span><span class="pl-c">3</span></span>
<span class="pl-k">for</span> e <span class="pl-k">in</span> msg.unwrapMap:
  <span class="pl-k">echo</span> e.key.unwrapStr
  <span class="pl-k">for</span> e <span class="pl-k">in</span> e.val.unwrapArray:
    <span class="pl-k">echo</span> e.unwrapInt</pre></div>
<h6 dir="auto">
<a id="user-content-todo" class="anchor" aria-hidden="true" href="#todo"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Todo</h6>
<ul dir="auto">
<li>Implement unwrapInto to convert Msg object to Nim object handily</li>
<li>Evaluate performance and scalability</li>
<li>Talk with offical Ruby implementation</li>
<li>Don't repeat yourself: The code now has too much duplications. Using templates?</li>
</ul>
<h6 dir="auto">
<a id="user-content-author" class="anchor" aria-hidden="true" href="#author"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Author</h6>
<p dir="auto">Akira Hayakawa (<a href="mailto:ruby.wktk@gmail.com">ruby.wktk@gmail.com</a>)</p>
</article>
  </div>
        </div>
        
        <div id="qs-jangko-msgpack4nim" class="qs"><h4><a href="https://github.com/jangko/msgpack4nim" target="_blank">jangko/msgpack4nim <span class="qs-url">https://github.com/jangko/msgpack4nim</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack4nim" class="anchor" aria-hidden="true" href="#msgpack4nim"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack4nim</h5>
<p dir="auto"><a href="http://msgpack.org/" rel="nofollow">MessagePack</a> implementation written in pure nim</p>
<h7 dir="auto">
<a id="user-content-why-another-implementation" class="anchor" aria-hidden="true" href="#why-another-implementation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>why another implementation?</h7>
<p dir="auto">I am fully aware of <a href="https://github.com/akiradeveloper/msgpack-nim">another</a> msgpack implementation written in nim.
But I want something easier to use. Another motivation come from the nim language itself.
The current version of nim compiler offer many improvements, including 'generics ' specialization.
I found out nim compiler is smart enough to make serialization/deserialization to/from msgpack easy and convenient.</p>
<p dir="auto"><strong>requirement:</strong> nim ver 0.18.1 or later</p>
<p dir="auto"><a href="https://travis-ci.org/jangko/msgpack4nim" rel="nofollow"><img src="https://camo.githubusercontent.com/394e62e76c230755ca4c8b4a5a13d5b7d1f6429dd1a703f8022af07ed9301ce0/68747470733a2f2f696d672e736869656c64732e696f2f7472617669732f6a616e676b6f2f6d73677061636b346e696d2f6d61737465722e7376673f6c6162656c3d4c696e75782532302f2532306d61634f53" alt="Build Status (Travis)" title="Linux/macOS build status (Travis)" data-canonical-src="https://img.shields.io/travis/jangko/msgpack4nim/master.svg?label=Linux%20/%20macOS" style="max-width: 100%;"></a>
<a href="https://ci.appveyor.com/project/jangko/msgpack4nim" rel="nofollow"><img src="https://camo.githubusercontent.com/c7807b207304900f56ab576014f8641f52781a4142fba0c972d29bf6f137097f/68747470733a2f2f696d672e736869656c64732e696f2f6170707665796f722f63692f6a616e676b6f2f6d73677061636b346e696d2f6d61737465722e7376673f6c6162656c3d57696e646f7773" alt="Windows build status (Appveyor)" title="Windows build status (Appveyor)" data-canonical-src="https://img.shields.io/appveyor/ci/jangko/msgpack4nim/master.svg?label=Windows" style="max-width: 100%;"></a>
<a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/49a7f3af0ef825c64e85e1b88f18ba8fc6b86d9155b3e49915beeb3517e60371/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f617661696c61626c652532306f6e2d6e696d626c652d79656c6c6f772e7376673f7374796c653d666c61742d737175617265"><img src="https://camo.githubusercontent.com/49a7f3af0ef825c64e85e1b88f18ba8fc6b86d9155b3e49915beeb3517e60371/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f617661696c61626c652532306f6e2d6e696d626c652d79656c6c6f772e7376673f7374796c653d666c61742d737175617265" alt="nimble" data-canonical-src="https://img.shields.io/badge/available%20on-nimble-yellow.svg?style=flat-square" style="max-width: 100%;"></a>
<a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/55d35e4ecee97fa2f2d71d47ef5187893ceb8ccd66a12dad04ac33f3d4826be6/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f63697479636964652f636173636164652e7376673f7374796c653d666c61742d737175617265"><img src="https://camo.githubusercontent.com/55d35e4ecee97fa2f2d71d47ef5187893ceb8ccd66a12dad04ac33f3d4826be6/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f63697479636964652f636173636164652e7376673f7374796c653d666c61742d737175617265" alt="license" data-canonical-src="https://img.shields.io/github/license/citycide/cascade.svg?style=flat-square" style="max-width: 100%;"></a></p>
<h6 dir="auto">
<a id="user-content-example" class="anchor" aria-hidden="true" href="#example"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example</h6>
<div class="highlight highlight-source-nim notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import msgpack4nim, streams

type
  #lets try with a rather complex object
  CustomType = object
    count: int
    content: seq[int]
    name: string
    ratio: float
    attr: array[0..5, int]
    ok: bool

proc initCustomType(): CustomType =
  result.count = -1
  result.content = @[1,2,3]
  result.name = "custom"
  result.ratio = 1.0
  for i in 0..5: result.attr[i] = i
  result.ok = false

var x = initCustomType()
var s = MsgStream.init() # besides MsgStream, you can also use Nim StringStream or FileStream
s.pack(x) #here the magic happened

var ss = MsgStream.init(s.data)
var xx: CustomType
ss.unpack(xx) #and here too

assert xx == x
echo "OK ", xx.name'><pre><span class="pl-k">import</span> msgpack4nim, streams

<span class="pl-k">type</span>
  <span class="pl-c"><span class="pl-c">#</span><span class="pl-c">lets try with a rather complex object</span></span>
  <span class="pl-c1">CustomType</span> = <span class="pl-k">object</span>
    count: <span class="pl-k">int</span>
    content: <span class="pl-k">seq</span>[<span class="pl-k">int</span>]
    name: <span class="pl-k">string</span>
    ratio: <span class="pl-k">float</span>
    attr: <span class="pl-k">array</span>[<span class="pl-c1">0</span>..<span class="pl-c1">5</span>, <span class="pl-k">int</span>]
    ok: <span class="pl-k">bool</span>

<span class="pl-k">proc</span> <span class="pl-en">initCustomType</span>()<span class="pl-k">:</span> <span class="pl-c1">CustomType</span> <span class="pl-k">=</span>
  result.count = -<span class="pl-c1">1</span>
  result.content = @[<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>]
  result.name = <span class="pl-s">"custom"</span>
  result.ratio = <span class="pl-c1">1.0</span>
  <span class="pl-k">for</span> i <span class="pl-k">in</span> <span class="pl-c1">0</span>..<span class="pl-c1">5</span>: result.attr[i] = i
  result.ok = <span class="pl-c1">false</span>

<span class="pl-k">var</span> x = <span class="pl-c1">initCustomType</span>()
<span class="pl-k">var</span> s = <span class="pl-c1">MsgStream</span>.<span class="pl-c1">init</span>() <span class="pl-c"><span class="pl-c"># </span><span class="pl-c">besides MsgStream, you can also use Nim StringStream or FileStream</span></span>
s.<span class="pl-c1">pack</span>(x) <span class="pl-c"><span class="pl-c">#</span><span class="pl-c">here the magic happened</span></span>

<span class="pl-k">var</span> ss = <span class="pl-c1">MsgStream</span>.<span class="pl-c1">init</span>(s.data)
<span class="pl-k">var</span> xx: <span class="pl-c1">CustomType</span>
ss.<span class="pl-c1">unpack</span>(xx) <span class="pl-c"><span class="pl-c">#</span><span class="pl-c">and here too</span></span>

<span class="pl-k">assert</span> xx == x
<span class="pl-k">echo</span> <span class="pl-s">"OK "</span>, xx.name</pre></div>
<p dir="auto">see? you only need to call 'pack' and 'unpack', and the compiler do the hard work for you. Very easy, convenient, and works well</p>
<p dir="auto">if you think setting up a MsgStream too much for you, you can simply call pack(yourobject) and it will return a string containing msgpack data.</p>
<div class="highlight highlight-source-nim notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  var a = @[1,2,3,4,5,6,7,8,9,0]
  var buf = pack(a)
  var aa: seq[int]
  unpack(buf, aa)
  assert a == aa"><pre>  <span class="pl-k">var</span> a = @[<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>,<span class="pl-c1">4</span>,<span class="pl-c1">5</span>,<span class="pl-c1">6</span>,<span class="pl-c1">7</span>,<span class="pl-c1">8</span>,<span class="pl-c1">9</span>,<span class="pl-c1">0</span>]
  <span class="pl-k">var</span> buf = <span class="pl-c1">pack</span>(a)
  <span class="pl-k">var</span> aa: <span class="pl-k">seq</span>[<span class="pl-k">int</span>]
  <span class="pl-c1">unpack</span>(buf, aa)
  <span class="pl-k">assert</span> a == aa</pre></div>
<p dir="auto">in case the compiler cannot decide how to serialize or deserialize your very very complex object, you can help it in easy way
by defining your own handler pack_type/unpack_type</p>
<div class="highlight highlight-source-nim notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="type
  #not really complex, just for example
  mycomplexobject = object
    a: someSimpleType
    b: someSimpleType

# help the compiler to decide
# ByteStream is any Stream Compatible object such as MsgStream, FileStream, StringStream
proc pack_type*[ByteStream](s: ByteStream, x: mycomplexobject) =
  s.pack(x.a) # let the compiler decide
  s.pack(x.b) # let the compiler decide

# help the compiler to decide
# ByteStream is any Stream Compatible object
proc unpack_type*[ByteStream](s: ByteStream, x: var mycomplexobject) =
  s.unpack(x.a)
  s.unpack(x.b)

var s = MsgStream.init() # besides MsgStream, you can also use Nim StringStream or FileStream
var x: mycomplexobject
s.pack(x) #pack as usual

var ss = MsgStream.init(s.data)
ss.unpack(x) #unpack as usual"><pre><span class="pl-k">type</span>
  <span class="pl-c"><span class="pl-c">#</span><span class="pl-c">not really complex, just for example</span></span>
  mycomplexobject = <span class="pl-k">object</span>
    a: someSimpleType
    b: someSimpleType

<span class="pl-c"><span class="pl-c"># </span><span class="pl-c">help the compiler to decide</span></span>
<span class="pl-c"><span class="pl-c"># </span><span class="pl-c">ByteStream is any Stream Compatible object such as MsgStream, FileStream, StringStream</span></span>
<span class="pl-k">proc</span> <span class="pl-en">pack_type</span><span class="pl-k">*</span>[ByteStream](s: <span class="pl-c1">ByteStream</span>, x: mycomplexobject) <span class="pl-k">=</span>
  s.<span class="pl-c1">pack</span>(x.a) <span class="pl-c"><span class="pl-c"># </span><span class="pl-c">let the compiler decide</span></span>
  s.<span class="pl-c1">pack</span>(x.b) <span class="pl-c"><span class="pl-c"># </span><span class="pl-c">let the compiler decide</span></span>

<span class="pl-c"><span class="pl-c"># </span><span class="pl-c">help the compiler to decide</span></span>
<span class="pl-c"><span class="pl-c"># </span><span class="pl-c">ByteStream is any Stream Compatible object</span></span>
<span class="pl-k">proc</span> <span class="pl-en">unpack_type</span><span class="pl-k">*</span>[ByteStream](s: <span class="pl-c1">ByteStream</span>, x: <span class="pl-k">var</span> mycomplexobject) <span class="pl-k">=</span>
  s.<span class="pl-c1">unpack</span>(x.a)
  s.<span class="pl-c1">unpack</span>(x.b)

<span class="pl-k">var</span> s = <span class="pl-c1">MsgStream</span>.<span class="pl-c1">init</span>() <span class="pl-c"><span class="pl-c"># </span><span class="pl-c">besides MsgStream, you can also use Nim StringStream or FileStream</span></span>
<span class="pl-k">var</span> x: mycomplexobject
s.<span class="pl-c1">pack</span>(x) <span class="pl-c"><span class="pl-c">#</span><span class="pl-c">pack as usual</span></span>

<span class="pl-k">var</span> ss = <span class="pl-c1">MsgStream</span>.<span class="pl-c1">init</span>(s.data)
ss.<span class="pl-c1">unpack</span>(x) <span class="pl-c"><span class="pl-c">#</span><span class="pl-c">unpack as usual</span></span></pre></div>
<h6 dir="auto">
<a id="user-content-data-conversion" class="anchor" aria-hidden="true" href="#data-conversion"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Data Conversion</h6>
<table>
<thead>
<tr>
<th><strong>nim</strong></th>
<th><strong>msgpack</strong></th>
<th><strong>JsonNode</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>int8/16/32/64</td>
<td>int8/16/32/64</td>
<td>JInt</td>
</tr>
<tr>
<td>uint8/16/32/64</td>
<td>uint8/16/32/64</td>
<td>JInt</td>
</tr>
<tr>
<td>true/false</td>
<td>true/false</td>
<td>JBool</td>
</tr>
<tr>
<td>nil</td>
<td>nil</td>
<td>JNull</td>
</tr>
<tr>
<td>procedural type</td>
<td>ignored</td>
<td>n/a</td>
</tr>
<tr>
<td>cstring</td>
<td>ignored</td>
<td>n/a</td>
</tr>
<tr>
<td>pointer</td>
<td>ignored</td>
<td>n/a</td>
</tr>
<tr>
<td>ptr</td>
<td><a href="#ref-types">see ref-types</a></td>
<td>n/a</td>
</tr>
<tr>
<td>ref</td>
<td><a href="#ref-types">see ref-types</a></td>
<td>n/a</td>
</tr>
<tr>
<td>circular ref</td>
<td><a href="#ref-types">see ref-types</a></td>
<td>n/a</td>
</tr>
<tr>
<td>distinct types**</td>
<td>converted to base type</td>
<td>applicable base type</td>
</tr>
<tr>
<td>float32/64</td>
<td>float32/64</td>
<td>JFloat</td>
</tr>
<tr>
<td>string</td>
<td>string8/16/32</td>
<td>JString</td>
</tr>
<tr>
<td>array/seq</td>
<td>array</td>
<td>JArray</td>
</tr>
<tr>
<td>set</td>
<td>array</td>
<td>JArray</td>
</tr>
<tr>
<td>range/subrange</td>
<td>int8/16/32/64</td>
<td>JInt</td>
</tr>
<tr>
<td>enum</td>
<td>int8/16/32/64</td>
<td>JInt</td>
</tr>
<tr>
<td>IntSet,Doubly/SinglyLinkedList*</td>
<td>array</td>
<td>JArray</td>
</tr>
<tr>
<td>Doubly/SinglyLinkedRing*</td>
<td>array</td>
<td>JArray</td>
</tr>
<tr>
<td>Queue,HashSet,OrderedSet*</td>
<td>array</td>
<td>JArray</td>
</tr>
<tr>
<td>Table,TableRef*</td>
<td>map</td>
<td>JObject</td>
</tr>
<tr>
<td>OrderedTable,OrderedTableRef*</td>
<td>map</td>
<td>JObject</td>
</tr>
<tr>
<td>StringTableRef*</td>
<td>map</td>
<td>JObject</td>
</tr>
<tr>
<td>CritBitTree[T]*</td>
<td>map</td>
<td>JObject</td>
</tr>
<tr>
<td>CritBitTree[void]*</td>
<td>array</td>
<td>JArray</td>
</tr>
<tr>
<td>object/tuple</td>
<td>array/map</td>
<td>JObject</td>
</tr>
</tbody>
</table>
<ul dir="auto">
<li>(*) please import msgpakc4collection for Nim standard library collections, they are no longer part of codec core</li>
<li>(**) provide your own implementation if you want to override default behavior</li>
</ul>
<h6 dir="auto">
<a id="user-content-distinct-types" class="anchor" aria-hidden="true" href="#distinct-types"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>distinct types</h6>
<p dir="auto">If distinct types encountered, it will be converted back to it's base type.
If you don't like this behavior, since version 0.2.9 msgpack4nim allow you
to override this default behavior by supplying your own implementation of
<code>pack_type</code> and <code>unpack_type</code>.</p>
<div class="highlight highlight-source-nim notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import msgpack4nim, strutils

type
  Guid = distinct string

proc pack_type*[ByteStream](s: ByteStream, v: Guid) =
  s.pack_bin(len(v.string))
  s.write(v.string)

proc unpack_type*[ByteStream](s: ByteStream, v: var Guid) =
  let L = s.unpack_bin()
  v = Guid(s.readStr(L))

var b = Guid("AA")
var s = b.pack
echo s.tohex == "C4024141"
echo s.stringify == "BIN: 4141 "

var bb: Guid
s.unpack(bb)
check bb.string == b.string'><pre><span class="pl-k">import</span> msgpack4nim, strutils

<span class="pl-k">type</span>
  <span class="pl-c1">Guid</span> = <span class="pl-k">distinct</span> <span class="pl-k">string</span>

<span class="pl-k">proc</span> <span class="pl-en">pack_type</span><span class="pl-k">*</span>[ByteStream](s: <span class="pl-c1">ByteStream</span>, v: <span class="pl-c1">Guid</span>) <span class="pl-k">=</span>
  s.<span class="pl-c1">pack_bin</span>(<span class="pl-k">len</span>(v.<span class="pl-k">string</span>))
  s.<span class="pl-c1">write</span>(v.<span class="pl-k">string</span>)

<span class="pl-k">proc</span> <span class="pl-en">unpack_type</span><span class="pl-k">*</span>[ByteStream](s: <span class="pl-c1">ByteStream</span>, v: <span class="pl-k">var</span> <span class="pl-c1">Guid</span>) <span class="pl-k">=</span>
  <span class="pl-k">let</span> L = s.<span class="pl-c1">unpack_bin</span>()
  v = <span class="pl-c1">Guid</span>(s.<span class="pl-c1">readStr</span>(L))

<span class="pl-k">var</span> b = <span class="pl-c1">Guid</span>(<span class="pl-s">"AA"</span>)
<span class="pl-k">var</span> s = b.pack
<span class="pl-k">echo</span> s.tohex == <span class="pl-s">"C4024141"</span>
<span class="pl-k">echo</span> s.stringify == <span class="pl-s">"BIN: 4141 "</span>

<span class="pl-k">var</span> bb: <span class="pl-c1">Guid</span>
s.<span class="pl-c1">unpack</span>(bb)
<span class="pl-c1">check</span> bb.<span class="pl-k">string</span> == b.<span class="pl-k">string</span></pre></div>
<h6 dir="auto">
<a id="user-content-object-and-tuple" class="anchor" aria-hidden="true" href="#object-and-tuple"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>object and tuple</h6>
<p dir="auto">object and tuple by default converted to msgpack array, however
you can tell the compiler to convert it to map by supplying --define:msgpack_obj_to_map</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="nim c --define:msgpack_obj_to_map yourfile.nim"><pre>nim c --define:msgpack_obj_to_map yourfile.nim</pre></div>
<p dir="auto">or --define:msgpack_obj_to_stream to convert object/tuple fields <em>value</em> into stream of msgpack objects</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="nim c --define:msgpack_obj_to_stream yourfile.nim"><pre>nim c --define:msgpack_obj_to_stream yourfile.nim</pre></div>
<p dir="auto">What this means? It means by default, each object/tuple will be converted to one <code>msgpack array</code> contains
field(s) value only without their field(s) name.</p>
<p dir="auto">If you specify that the object/tuple will be converted to <code>msgpack map</code>, then each object/tuple will be
converted to one <code>msgpack map</code> contains key-value pairs. The key will be field name, and the value will be field value.</p>
<p dir="auto">If you specify that the object/tuple will be converted to msgpack stream, then each object/tuple will be converted
into one or more msgpack's type for each object's field and then the resulted stream will be concatenated
to the msgpack stream buffer.</p>
<p dir="auto">Which one should I use?</p>
<p dir="auto">Usually, other msgpack libraries out there convert object/tuple/record/struct or whatever structured data supported by
the language into <code>msgpack array</code>, but always make sure to consult the documentation first.
If both of the serializer and deserializer agreed to one convention, then usually there will be no problem.
No matter which library/language you use, you can exchange msgpack data among them.</p>
<p dir="auto">since version 0.2.4, you can set encoding mode at runtime to choose which encoding you would like to perform</p>
<p dir="auto">note: the runtime encoding mode only available if you use MsgStream, otherwise only compile time flag available</p>
<table>
<thead>
<tr>
<th>mode</th>
<th>msgpack_obj_to_map</th>
<th>msgpack_obj_to_array</th>
<th>msgpack_obj_to_stream</th>
<th>default</th>
</tr>
</thead>
<tbody>
<tr>
<td>MSGPACK_OBJ_TO_DEFAULT</td>
<td>map</td>
<td>array</td>
<td>stream</td>
<td>array</td>
</tr>
<tr>
<td>MSGPACK_OBJ_TO_ARRAY</td>
<td>array</td>
<td>array</td>
<td>array</td>
<td>array</td>
</tr>
<tr>
<td>MSGPACK_OBJ_TO_MAP</td>
<td>map</td>
<td>map</td>
<td>map</td>
<td>map</td>
</tr>
<tr>
<td>MSGPACK_OBJ_TO_STREAM</td>
<td>stream</td>
<td>stream</td>
<td>stream</td>
<td>stream</td>
</tr>
</tbody>
</table>
<h8 dir="auto">
<a id="user-content-ref-types" class="anchor" aria-hidden="true" href="#ref-types"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><strong>ref-types:</strong>
</h8>
<p dir="auto"><em>ref something</em> :</p>
<ul dir="auto">
<li>if ref value is nil, it will be packed into msgpack nil, and when unpacked, you will get nil too</li>
<li>if ref value not nil, it will be dereferenced e.g. pack(val[]) or unpack(val[])</li>
<li>ref subject to some restriction. see <strong>restriction</strong> below</li>
<li>ptr will be treated like ref during pack</li>
<li>unpacking ptr will invoke alloc, so you must dealloc it</li>
</ul>
<p dir="auto"><em>circular reference</em>:
altough detecting circular reference is not too difficult(using set of pointers),
the current implementation does not provide circular reference detection.
If you pack something contains circular reference, you know something bad will happened</p>
<p dir="auto"><strong>Restriction</strong>:
For objects their type is <strong>not</strong> serialized.
This means essentially that it does not work if the object has some other runtime type than its compiletime type:</p>
<div class="highlight highlight-source-nim notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="import streams, msgpack4nim

type
  TA = object of RootObj
  TB = object of TA
    f: int

var
  a: ref TA
  b: ref TB

new(b)
a = b

echo stringify(pack(a))
#produces &quot;[ ]&quot; or &quot;{ }&quot;
#not &quot;[ 0 ]&quot; or '{ &quot;f&quot; : 0 }'"><pre><span class="pl-k">import</span> streams, msgpack4nim

<span class="pl-k">type</span>
  <span class="pl-c1">TA</span> = <span class="pl-k">object</span> <span class="pl-k">of</span> <span class="pl-c1">RootObj</span>
  <span class="pl-c1">TB</span> = <span class="pl-k">object</span> <span class="pl-k">of</span> <span class="pl-c1">TA</span>
    f: <span class="pl-k">int</span>

<span class="pl-k">var</span>
  a: <span class="pl-k">ref</span> <span class="pl-c1">TA</span>
  b: <span class="pl-k">ref</span> <span class="pl-c1">TB</span>

<span class="pl-k">new</span>(b)
a = b

<span class="pl-k">echo</span> <span class="pl-c1">stringify</span>(<span class="pl-c1">pack</span>(a))
<span class="pl-c"><span class="pl-c">#</span><span class="pl-c">produces "[ ]" or "{ }"</span></span>
<span class="pl-c"><span class="pl-c">#</span><span class="pl-c">not "[ 0 ]" or '{ "f" : 0 }'</span></span></pre></div>
<h8 dir="auto">
<a id="user-content-limitation" class="anchor" aria-hidden="true" href="#limitation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><strong>limitation:</strong>
</h8>
<p dir="auto">these types will be ignored:</p>
<ul dir="auto">
<li>procedural type</li>
<li>cstring(it is not safe to assume it always terminated by null)</li>
<li>pointer</li>
</ul>
<p dir="auto">these types cannot be automatically pack/unpacked:</p>
<ul dir="auto">
<li>
<em>void</em> (will cause compile time error)</li>
</ul>
<p dir="auto">however, you can provide your own handler for cstring and pointer</p>
<p dir="auto"><strong>Gotchas:</strong>
because data conversion did not preserve original data types(only partial preservation),
the following code is perfectly valid and will raise no exception</p>
<div class="highlight highlight-source-nim notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import msgpack4nim, streams, tables, sets, strtabs

type
  Horse = object
    legs: int
    foals: seq[string]
    attr: Table[string, string]

  Cat = object
    legs: uint8
    kittens: HashSet[string]
    traits: StringTableRef

proc initHorse(): Horse =
  result.legs = 4
  result.foals = @["jilly", "colt"]
  result.attr = initTable[string, string]()
  result.attr["color"] = "black"
  result.attr["speed"] = "120mph"

var stallion = initHorse()
var tom: Cat

var buf = pack(stallion) #pack a Horse here
unpack(buf, tom)
#abracadabra, it will unpack into a Cat

echo "legs: ", $tom.legs
echo "kittens: ", $tom.kittens
echo "traits: ", $tom.traits'><pre><span class="pl-k">import</span> msgpack4nim, streams, tables, sets, strtabs

<span class="pl-k">type</span>
  <span class="pl-c1">Horse</span> = <span class="pl-k">object</span>
    legs: <span class="pl-k">int</span>
    foals: <span class="pl-k">seq</span>[<span class="pl-k">string</span>]
    attr: <span class="pl-c1">Table</span>[<span class="pl-k">string</span>, <span class="pl-k">string</span>]

  <span class="pl-c1">Cat</span> = <span class="pl-k">object</span>
    legs: <span class="pl-k">uint8</span>
    kittens: <span class="pl-c1">HashSet</span>[<span class="pl-k">string</span>]
    traits: <span class="pl-c1">StringTableRef</span>

<span class="pl-k">proc</span> <span class="pl-en">initHorse</span>()<span class="pl-k">:</span> <span class="pl-c1">Horse</span> <span class="pl-k">=</span>
  result.legs = <span class="pl-c1">4</span>
  result.foals = @[<span class="pl-s">"jilly"</span>, <span class="pl-s">"colt"</span>]
  result.attr = <span class="pl-c1">initTable</span>[<span class="pl-k">string</span>, <span class="pl-k">string</span>]()
  result.attr[<span class="pl-s">"color"</span>] <span class="pl-k">=</span> <span class="pl-s">"black"</span>
  result.attr[<span class="pl-s">"speed"</span>] <span class="pl-k">=</span> <span class="pl-s">"120mph"</span>

<span class="pl-k">var</span> stallion = <span class="pl-c1">initHorse</span>()
<span class="pl-k">var</span> tom: <span class="pl-c1">Cat</span>

<span class="pl-k">var</span> buf = <span class="pl-c1">pack</span>(stallion) <span class="pl-c"><span class="pl-c">#</span><span class="pl-c">pack a Horse here</span></span>
<span class="pl-c1">unpack</span>(buf, tom)
<span class="pl-c"><span class="pl-c">#</span><span class="pl-c">abracadabra, it will unpack into a Cat</span></span>

<span class="pl-k">echo</span> <span class="pl-s">"legs: "</span>, <span class="pl-k">$</span>tom.legs
<span class="pl-k">echo</span> <span class="pl-s">"kittens: "</span>, <span class="pl-k">$</span>tom.kittens
<span class="pl-k">echo</span> <span class="pl-s">"traits: "</span>, <span class="pl-k">$</span>tom.traits</pre></div>
<p dir="auto">another gotcha:</p>
<div class="highlight highlight-source-nim notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='  type
    KAB = object of RootObj
      aaa: int
      bbb: int

    KCD = object of KAB
      ccc: int
      ddd: int

    KEF = object of KCD
      eee: int
      fff: int

  var kk = KEF()
  echo stringify(pack(kk))
  # will produce "{ "eee" : 0, "fff" : 0, "ccc" : 0, "ddd" : 0, "aaa" : 0, "bbb" : 0 }"
  # not "{ "aaa" : 0, "bbb" : 0, "ccc" : 0, "ddd" : 0, "eee" : 0, "fff" : 0 }"'><pre>  <span class="pl-k">type</span>
    <span class="pl-c1">KAB</span> = <span class="pl-k">object</span> <span class="pl-k">of</span> <span class="pl-c1">RootObj</span>
      aaa: <span class="pl-k">int</span>
      bbb: <span class="pl-k">int</span>

    <span class="pl-c1">KCD</span> = <span class="pl-k">object</span> <span class="pl-k">of</span> <span class="pl-c1">KAB</span>
      ccc: <span class="pl-k">int</span>
      ddd: <span class="pl-k">int</span>

    <span class="pl-c1">KEF</span> = <span class="pl-k">object</span> <span class="pl-k">of</span> <span class="pl-c1">KCD</span>
      eee: <span class="pl-k">int</span>
      fff: <span class="pl-k">int</span>

  <span class="pl-k">var</span> kk = <span class="pl-c1">KEF</span>()
  <span class="pl-k">echo</span> <span class="pl-c1">stringify</span>(<span class="pl-c1">pack</span>(kk))
  <span class="pl-c"><span class="pl-c"># </span><span class="pl-c">will produce "{ "eee" : 0, "fff" : 0, "ccc" : 0, "ddd" : 0, "aaa" : 0, "bbb" : 0 }"</span></span>
  <span class="pl-c"><span class="pl-c"># </span><span class="pl-c">not "{ "aaa" : 0, "bbb" : 0, "ccc" : 0, "ddd" : 0, "eee" : 0, "fff" : 0 }"</span></span></pre></div>
<h6 dir="auto">
<a id="user-content-bin-and-ext-format" class="anchor" aria-hidden="true" href="#bin-and-ext-format"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>bin and ext format</h6>
<p dir="auto">this implementation provide function to encode/decode msgpack bin/ext format header,
but for the body, you must write it yourself or read it yourself to/from the MsgStream</p>
<ul dir="auto">
<li>proc pack_bin*[ByteStream](s: ByteStream, len: int)</li>
<li>proc pack_ext*[ByteStream](s: ByteStream, len: int, exttype: int8)</li>
<li>proc unpack_bin*[ByteStream](s: ByteStream): int</li>
<li>proc unpack_ext*[ByteStream](s: ByteStream): tuple[exttype:uint8, len: int]</li>
</ul>
<div class="highlight highlight-source-nim notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import streams, msgpack4nim

const exttype0 = 0

var s = MsgStream.init()
var body = "this is the body"

s.pack_ext(body.len, exttype0)
s.write(body)

#the same goes to bin format
s.pack_bin(body.len)
s.write(body)

var ss = MsgStream.init(s.data)
#unpack_ext return tuple[exttype:uint8, len: int]
let (extype, extlen) = ss.unpack_ext()
var extbody = ss.readStr(extlen)

assert extbody == body

let binlen = ss.unpack_bin()
var binbody = ss.readStr(binlen)

assert binbody == body'><pre><span class="pl-k">import</span> streams, msgpack4nim

<span class="pl-k">const</span> exttype0 = <span class="pl-c1">0</span>

<span class="pl-k">var</span> s = <span class="pl-c1">MsgStream</span>.<span class="pl-c1">init</span>()
<span class="pl-k">var</span> body = <span class="pl-s">"this is the body"</span>

s.<span class="pl-c1">pack_ext</span>(body.<span class="pl-k">len</span>, exttype0)
s.<span class="pl-c1">write</span>(body)

<span class="pl-c"><span class="pl-c">#</span><span class="pl-c">the same goes to bin format</span></span>
s.<span class="pl-c1">pack_bin</span>(body.<span class="pl-k">len</span>)
s.<span class="pl-c1">write</span>(body)

<span class="pl-k">var</span> ss = <span class="pl-c1">MsgStream</span>.<span class="pl-c1">init</span>(s.data)
<span class="pl-c"><span class="pl-c">#</span><span class="pl-c">unpack_ext return tuple[exttype:uint8, len: int]</span></span>
<span class="pl-k">let</span> (extype, extlen) = ss.<span class="pl-c1">unpack_ext</span>()
<span class="pl-k">var</span> extbody = ss.<span class="pl-c1">readStr</span>(extlen)

<span class="pl-k">assert</span> extbody == body

<span class="pl-k">let</span> binlen = ss.<span class="pl-c1">unpack_bin</span>()
<span class="pl-k">var</span> binbody = ss.<span class="pl-c1">readStr</span>(binlen)

<span class="pl-k">assert</span> binbody == body</pre></div>
<h6 dir="auto">
<a id="user-content-stringify" class="anchor" aria-hidden="true" href="#stringify"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>stringify</h6>
<p dir="auto">you can convert msgpack data to readable string using stringify function</p>
<div class="highlight highlight-source-nim notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='  type
    Horse = object
      legs: int
      speed: int
      color: string
      name: string

  var cc = Horse(legs:4, speed:150, color:"black", name:"stallion")
  var zz = pack(cc)
  echo stringify(zz)'><pre>  <span class="pl-k">type</span>
    <span class="pl-c1">Horse</span> = <span class="pl-k">object</span>
      legs: <span class="pl-k">int</span>
      speed: <span class="pl-k">int</span>
      color: <span class="pl-k">string</span>
      name: <span class="pl-k">string</span>

  <span class="pl-k">var</span> cc = <span class="pl-c1">Horse</span>(legs:<span class="pl-c1">4</span>, speed:<span class="pl-c1">150</span>, color:<span class="pl-s">"black"</span>, name:<span class="pl-s">"stallion"</span>)
  <span class="pl-k">var</span> zz = <span class="pl-c1">pack</span>(cc)
  <span class="pl-k">echo</span> <span class="pl-c1">stringify</span>(zz)</pre></div>
<p dir="auto">the result will be:</p>
<div class="highlight highlight-source-json notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='default:
[ 4, 150, "black", "stallion" ]

msgpack_obj_to_map defined:
{ "legs" : 4, "speed" : 150, "color" : "black", "name" : "stallion" }

msgpack_obj_to_stream defined:
4 150 "black" "stallion"'><pre><span class="pl-ii">default:</span>
[ <span class="pl-c1">4</span>, <span class="pl-c1">150</span>, <span class="pl-s"><span class="pl-pds">"</span>black<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>stallion<span class="pl-pds">"</span> </span>]

<span class="pl-ii">msgpack_obj_to_map defined:</span>
{ <span class="pl-ent">"legs" </span>: <span class="pl-c1">4</span>, <span class="pl-ent">"speed" </span>: <span class="pl-c1">150</span>, <span class="pl-ent">"color" </span>: <span class="pl-s"><span class="pl-pds">"</span>black<span class="pl-pds">"</span></span>, <span class="pl-ent">"name" </span>: <span class="pl-s"><span class="pl-pds">"</span>stallion<span class="pl-pds">"</span> </span>}

<span class="pl-ii">msgpack_obj_to_stream defined:</span>
<span class="pl-c1">4</span> <span class="pl-c1">150</span> <span class="pl-s"><span class="pl-pds">"</span>black<span class="pl-pds">"</span> <span class="pl-pds">"</span>stallion<span class="pl-pds">"</span></span></pre></div>
<h6 dir="auto">
<a id="user-content-toany" class="anchor" aria-hidden="true" href="#toany"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>toAny</h6>
<p dir="auto"><strong>toAny</strong> takes a string of msgpack data or a stream, then it will produce <strong>msgAny</strong>
which you can interrogate of it's  type and value during runtime by accessing it's member <strong>kind</strong></p>
<p dir="auto"><strong>toAny</strong> recognize all valid msgpack message and translate it into a group of types:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="msgMap, msgArray, msgString, msgBool,
msgBin, msgExt, msgFloat32, msgFloat64,
msgInt, msgUint, msgNull"><pre class="notranslate"><code>msgMap, msgArray, msgString, msgBool,
msgBin, msgExt, msgFloat32, msgFloat64,
msgInt, msgUint, msgNull
</code></pre></div>
<p dir="auto">for example, <strong>msg</strong> is a <em>msgpack</em> data with content [1, "hello", {"a": "b"}], you can interrogate it like this:</p>
<div class="highlight highlight-source-nim notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='var a = msg.toAny()
assert a.kind == msgArray
assert a.arrayVal[0].kind == msgInt
assert a.arrayVal[0].intVal == 1
assert a.arrayVal[1].kind == msgString
assert a.arrayVal[1].stringVal == "hello"
assert a.arrayVal[2].kind == msgMap
var c = a[2]
assert c[anyString("a")] == anyString("b")'><pre><span class="pl-k">var</span> a = msg.<span class="pl-c1">toAny</span>()
<span class="pl-k">assert</span> a.kind == msgArray
<span class="pl-k">assert</span> a.arrayVal[<span class="pl-c1">0</span>].kind == msgInt
<span class="pl-k">assert</span> a.arrayVal[<span class="pl-c1">0</span>].intVal == <span class="pl-c1">1</span>
<span class="pl-k">assert</span> a.arrayVal[<span class="pl-c1">1</span>].kind == msgString
<span class="pl-k">assert</span> a.arrayVal[<span class="pl-c1">1</span>].stringVal == <span class="pl-s">"hello"</span>
<span class="pl-k">assert</span> a.arrayVal[<span class="pl-c1">2</span>].kind == msgMap
<span class="pl-k">var</span> c = a[<span class="pl-c1">2</span>]
<span class="pl-k">assert</span> c[<span class="pl-c1">anyString</span>(<span class="pl-s">"a"</span>)] <span class="pl-k">==</span> <span class="pl-c1">anyString</span>(<span class="pl-s">"b"</span>)</pre></div>
<p dir="auto">since version 0.2.1, toAny was put into separate module <code>msgpack2any</code>,
it has functionality similar with json, with support of msgpack bin and ext natively</p>
<p dir="auto">msgpack2any also support pretty printing similar with json pretty printing.</p>
<p dir="auto">Primary usage for msgpack2any is to provide higher level API while dynamically querying underlying msgpack data at runtime.
Currently, msgpack2any decode all msgpack stream at once. There are room for improvements such as progressive decoding at
runtime, or selective decoding at runtime. Both of this improvements are not implemented, yet they are important for applications
that need for finer control over decoding step.</p>
<h6 dir="auto">
<a id="user-content-json" class="anchor" aria-hidden="true" href="#json"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>JSON</h6>
<p dir="auto">Start version 0.2.0, msgpack4nim receive additional family member, <code>msgpack2json</code> module.
It consists of <code>toJsonNode</code> and <code>fromJsonNode</code> to interact with stdlib's json module.</p>
<h6 dir="auto">
<a id="user-content-installation-via-nimble" class="anchor" aria-hidden="true" href="#installation-via-nimble"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation via nimble</h6>
<blockquote>
<p dir="auto">nimble install msgpack4nim</p>
</blockquote>
<h6 dir="auto">
<a id="user-content-implementation-specific" class="anchor" aria-hidden="true" href="#implementation-specific"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Implementation specific</h6>
<blockquote>
<p dir="auto">If an object can be represented in multiple possible output formats,
serializers SHOULD use the format which represents the data in the smallest number of bytes.</p>
</blockquote>
<p dir="auto">According to the spec, the serializer should use smallest number of bytes, and this behavior
is implemented in msgpack4nim. Therefore, some valid encoding would never produced by msgpack4nim.</p>
<p dir="auto">For example: although 0xcdff00 and 0xceff000000 encoding is valid according to the spec which is decoded into positive integer 255,
msgpack4nim never produce it, because the internal algorithm will select the smallest number of bytes needed, which is 0xccff.</p>
<p dir="auto">However, if msgpack4nim received encoded streams from other msgpack library contains those longer than needed sequence, as long as
it conforms to the spec, msgpack4nim will happily decoded it and convert it to the destination storage(variable) type.</p>
<p dir="auto">Other msgpack library who consume msgpack4nim stream, will also decode it properly, although they might not produce smallest number
of bytes required.</p>
<p dir="auto">enjoy it, happy nim-ing</p>
</article>
  </div>
        </div>
        
        <div id="qs-mcollina-msgpack5" class="qs"><h4><a href="https://github.com/mcollina/msgpack5" target="_blank">mcollina/msgpack5 <span class="qs-url">https://github.com/mcollina/msgpack5</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack5" class="anchor" aria-hidden="true" href="#msgpack5"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack5<a href="https://github.com/mcollina/msgpack5/actions?query=workflow%3ACI"><img src="https://github.com/mcollina/msgpack5/workflows/CI/badge.svg" alt="CI" style="max-width: 100%;"></a>
</h5>
<p dir="auto">A msgpack v5 implementation for node.js and the browser, with extension point support.</p>
<h6 dir="auto">
<a id="user-content-install" class="anchor" aria-hidden="true" href="#install"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install</h6>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="npm install msgpack5 --save"><pre>npm install msgpack5 --save</pre></div>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="var msgpack = require('msgpack5')() // namespace our extensions
  , a       = new MyType(2, 'a')
  , encode  = msgpack.encode
  , decode  = msgpack.decode

msgpack.register(0x42, MyType, mytipeEncode, mytipeDecode)

console.log(encode({ 'hello': 'world' }).toString('hex'))
// 81a568656c6c6fa5776f726c64
console.log(decode(encode({ 'hello': 'world' })))
// { hello: 'world' }
console.log(encode(a).toString('hex'))
// d5426161
console.log(decode(encode(a)) instanceof MyType)
// true
console.log(decode(encode(a)))
// { value: 'a', size: 2 }

function MyType(size, value) {
  this.value = value
  this.size  = size
}

function mytipeEncode(obj) {
  var buf = new Buffer(obj.size)
  buf.fill(obj.value)
  return buf
}

function mytipeDecode(data) {
  var result = new MyType(data.length, data.toString('utf8', 0, 1))
    , i

  for (i = 0; i &lt; data.length; i++) {
    if (data.readUInt8(0) != data.readUInt8(i)) {
      throw new Error('should all be the same')
    }
  }

  return result
}"><pre><span class="pl-k">var</span> <span class="pl-s1">msgpack</span> <span class="pl-c1">=</span> <span class="pl-en">require</span><span class="pl-kos">(</span><span class="pl-s">'msgpack5'</span><span class="pl-kos">)</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c">// namespace our extensions</span>
  <span class="pl-kos">,</span> <span class="pl-s1">a</span>       <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-v">MyType</span><span class="pl-kos">(</span><span class="pl-c1">2</span><span class="pl-kos">,</span> <span class="pl-s">'a'</span><span class="pl-kos">)</span>
  <span class="pl-kos">,</span> <span class="pl-s1">encode</span>  <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-c1">encode</span>
  <span class="pl-kos">,</span> <span class="pl-s1">decode</span>  <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-c1">decode</span>

<span class="pl-s1">msgpack</span><span class="pl-kos">.</span><span class="pl-en">register</span><span class="pl-kos">(</span><span class="pl-c1">0x42</span><span class="pl-kos">,</span> <span class="pl-v">MyType</span><span class="pl-kos">,</span> <span class="pl-s1">mytipeEncode</span><span class="pl-kos">,</span> <span class="pl-s1">mytipeDecode</span><span class="pl-kos">)</span>

<span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s1">encode</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-s">'hello'</span>: <span class="pl-s">'world'</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">toString</span><span class="pl-kos">(</span><span class="pl-s">'hex'</span><span class="pl-kos">)</span><span class="pl-kos">)</span>
<span class="pl-c">// 81a568656c6c6fa5776f726c64</span>
<span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s1">decode</span><span class="pl-kos">(</span><span class="pl-s1">encode</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-s">'hello'</span>: <span class="pl-s">'world'</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">)</span>
<span class="pl-c">// { hello: 'world' }</span>
<span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s1">encode</span><span class="pl-kos">(</span><span class="pl-s1">a</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">toString</span><span class="pl-kos">(</span><span class="pl-s">'hex'</span><span class="pl-kos">)</span><span class="pl-kos">)</span>
<span class="pl-c">// d5426161</span>
<span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s1">decode</span><span class="pl-kos">(</span><span class="pl-s1">encode</span><span class="pl-kos">(</span><span class="pl-s1">a</span><span class="pl-kos">)</span><span class="pl-kos">)</span> <span class="pl-k">instanceof</span> <span class="pl-v">MyType</span><span class="pl-kos">)</span>
<span class="pl-c">// true</span>
<span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s1">decode</span><span class="pl-kos">(</span><span class="pl-s1">encode</span><span class="pl-kos">(</span><span class="pl-s1">a</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">)</span>
<span class="pl-c">// { value: 'a', size: 2 }</span>

<span class="pl-k">function</span> <span class="pl-v">MyType</span><span class="pl-kos">(</span><span class="pl-s1">size</span><span class="pl-kos">,</span> <span class="pl-s1">value</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
  <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">value</span> <span class="pl-c1">=</span> <span class="pl-s1">value</span>
  <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">size</span>  <span class="pl-c1">=</span> <span class="pl-s1">size</span>
<span class="pl-kos">}</span>

<span class="pl-k">function</span> <span class="pl-en">mytipeEncode</span><span class="pl-kos">(</span><span class="pl-s1">obj</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
  <span class="pl-k">var</span> <span class="pl-s1">buf</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-v">Buffer</span><span class="pl-kos">(</span><span class="pl-s1">obj</span><span class="pl-kos">.</span><span class="pl-c1">size</span><span class="pl-kos">)</span>
  <span class="pl-s1">buf</span><span class="pl-kos">.</span><span class="pl-en">fill</span><span class="pl-kos">(</span><span class="pl-s1">obj</span><span class="pl-kos">.</span><span class="pl-c1">value</span><span class="pl-kos">)</span>
  <span class="pl-k">return</span> <span class="pl-s1">buf</span>
<span class="pl-kos">}</span>

<span class="pl-k">function</span> <span class="pl-en">mytipeDecode</span><span class="pl-kos">(</span><span class="pl-s1">data</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
  <span class="pl-k">var</span> <span class="pl-s1">result</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-v">MyType</span><span class="pl-kos">(</span><span class="pl-s1">data</span><span class="pl-kos">.</span><span class="pl-c1">length</span><span class="pl-kos">,</span> <span class="pl-s1">data</span><span class="pl-kos">.</span><span class="pl-en">toString</span><span class="pl-kos">(</span><span class="pl-s">'utf8'</span><span class="pl-kos">,</span> <span class="pl-c1">0</span><span class="pl-kos">,</span> <span class="pl-c1">1</span><span class="pl-kos">)</span><span class="pl-kos">)</span>
    <span class="pl-kos">,</span> <span class="pl-s1">i</span>

  <span class="pl-k">for</span> <span class="pl-kos">(</span><span class="pl-s1">i</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span><span class="pl-kos">;</span> <span class="pl-s1">i</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">data</span><span class="pl-kos">.</span><span class="pl-c1">length</span><span class="pl-kos">;</span> <span class="pl-s1">i</span><span class="pl-c1">++</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
    <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">data</span><span class="pl-kos">.</span><span class="pl-en">readUInt8</span><span class="pl-kos">(</span><span class="pl-c1">0</span><span class="pl-kos">)</span> <span class="pl-c1">!=</span> <span class="pl-s1">data</span><span class="pl-kos">.</span><span class="pl-en">readUInt8</span><span class="pl-kos">(</span><span class="pl-s1">i</span><span class="pl-kos">)</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
      <span class="pl-k">throw</span> <span class="pl-k">new</span> <span class="pl-v">Error</span><span class="pl-kos">(</span><span class="pl-s">'should all be the same'</span><span class="pl-kos">)</span>
    <span class="pl-kos">}</span>
  <span class="pl-kos">}</span>

  <span class="pl-k">return</span> <span class="pl-s1">result</span>
<span class="pl-kos">}</span></pre></div>
<h6 dir="auto">
<a id="user-content-in-the-browser" class="anchor" aria-hidden="true" href="#in-the-browser"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>In the Browser</h6>
<p dir="auto">This library is compatible with <a href="http://npm.im/browserify" rel="nofollow">Browserify</a>.</p>
<p dir="auto">If you want to use standalone, grab the file in the <code>dist</code> folder of
this repo, and use in your own HTML page, the module will expose a
<code>msgpack5</code> global.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='&lt;script type="text/javascript"
        src="./msgpack5.min.js"&gt;
&lt;/script&gt;'><pre class="notranslate"><code>&lt;script type="text/javascript"
        src="./msgpack5.min.js"&gt;
&lt;/script&gt;
</code></pre></div>
<h7 dir="auto">
<a id="user-content-to-build" class="anchor" aria-hidden="true" href="#to-build"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>To build</h7>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="	npm run build"><pre class="notranslate"><code>	npm run build
</code></pre></div>
<h6 dir="auto">
<a id="user-content-api" class="anchor" aria-hidden="true" href="#api"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>API</h6>
<p dir="auto"><a name="user-content-api"></a></p>
<h6 dir="auto">
<a id="user-content-api-1" class="anchor" aria-hidden="true" href="#api-1"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>API</h6>
<ul dir="auto">
<li><a href="#msgpack"><code><b>msgpack()</b></code></a></li>
<li><a href="#encode"><code>msgpack().<b>encode()</b></code></a></li>
<li><a href="#decode"><code>msgpack().<b>decode()</b></code></a></li>
<li><a href="#registerEncoder"><code>msgpack().<b>registerEncoder()</b></code></a></li>
<li><a href="#registerDecoder"><code>msgpack().<b>registerDecoder()</b></code></a></li>
<li><a href="#register"><code>msgpack().<b>register()</b></code></a></li>
<li><a href="#encoder"><code>msgpack().<b>encoder()</b></code></a></li>
<li><a href="#decoder"><code>msgpack().<b>decoder()</b></code></a></li>
</ul>
<hr>
<p dir="auto"><a name="user-content-msgpack"></a></p>
<h7 dir="auto">
<a id="user-content-msgpackoptionsobj" class="anchor" aria-hidden="true" href="#msgpackoptionsobj"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack(options(obj))</h7>
<p dir="auto">Creates a new instance on which you can register new types for being
encoded.</p>
<p dir="auto">options:</p>
<ul dir="auto">
<li>
<code>forceFloat64</code>, a boolean to that forces all floats to be encoded as 64-bits floats. Defaults to false.</li>
<li>
<code>sortKeys</code>, a boolean to force a determinate keys order</li>
<li>
<code>compatibilityMode</code>, a boolean that enables "compatibility mode" which doesn't use str 8 format. Defaults to false.</li>
<li>
<code>disableTimestampEncoding</code>, a boolean that when set disables the encoding of Dates into the <a href="https://github.com/msgpack/msgpack/blob/master/spec.md#timestamp-extension-type">timestamp extension type</a>. Defaults to false.</li>
<li>
<code>preferMap</code>, a boolean that forces all maps to be decoded to <code>Map</code>s rather than plain objects. This ensures that <code>decode(encode(new Map())) instanceof Map</code> and that iteration order is preserved. Defaults to false.</li>
<li>
<code>protoAction</code>, a string which can be <code>error|ignore|remove</code> that determines what happens when decoding a plain object with a <code>__proto__</code> property which would cause prototype poisoning. <code>error</code> (default) throws an error, <code>remove</code> removes the property, <code>ignore</code> (not recommended) allows the property, thereby causing prototype poisoning on the decoded object.</li>
</ul>
<hr>
<p dir="auto"><a name="user-content-encode"></a></p>
<h7 dir="auto">
<a id="user-content-encodeobject" class="anchor" aria-hidden="true" href="#encodeobject"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>encode(object)</h7>
<p dir="auto">Encodes <code>object</code> in msgpack, returns a <a href="http://npm.im/bl" rel="nofollow">bl</a>.</p>
<hr>
<p dir="auto"><a name="user-content-decode"></a></p>
<h7 dir="auto">
<a id="user-content-decodebuf" class="anchor" aria-hidden="true" href="#decodebuf"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>decode(buf)</h7>
<p dir="auto">Decodes buf from in msgpack. <code>buf</code> can be a <code>Buffer</code> or a <a href="http://npm.im/bl" rel="nofollow">bl</a> instance.</p>
<p dir="auto">In order to support a stream interface, a user must pass in a <a href="http://npm.im/bl" rel="nofollow">bl</a> instance.</p>
<hr>
<p dir="auto"><a name="user-content-registerencoder"></a></p>
<h7 dir="auto">
<a id="user-content-registerencodercheckobj-encodeobj" class="anchor" aria-hidden="true" href="#registerencodercheckobj-encodeobj"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>registerEncoder(check(obj), encode(obj))</h7>
<p dir="auto">Register a new custom object type for being automatically encoded.
The arguments are:</p>
<ul dir="auto">
<li>
<code>check</code>, a function that will be called to check if the passed
object should be encoded with the <code>encode</code> function</li>
<li>
<code>encode</code>, a function that will be called to encode an object in binary
form; this function <strong>must</strong> return a <code>Buffer</code> which include the same type
for <a href="#registerDecoder">registerDecoder</a>.</li>
</ul>
<hr>
<p dir="auto"><a name="user-content-registerdecoder"></a></p>
<h7 dir="auto">
<a id="user-content-registerdecodertype-decodebuf" class="anchor" aria-hidden="true" href="#registerdecodertype-decodebuf"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>registerDecoder(type, decode(buf))</h7>
<p dir="auto">Register a new custom object type for being automatically decoded.
The arguments are:</p>
<ul dir="auto">
<li>
<code>type</code>, is a greater than zero integer identificating the type once serialized</li>
<li>
<code>decode</code>, a function that will be called to decode the object from
the passed <code>Buffer</code>
</li>
</ul>
<hr>
<p dir="auto"><a name="user-content-register"></a></p>
<h7 dir="auto">
<a id="user-content-registertype-constructor-encodeobj-decodebuf" class="anchor" aria-hidden="true" href="#registertype-constructor-encodeobj-decodebuf"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>register(type, constructor, encode(obj), decode(buf))</h7>
<p dir="auto">Register a new custom object type for being automatically encoded and
decoded. The arguments are:</p>
<ul dir="auto">
<li>
<code>type</code>, is a greater than zero integer identificating the type once serialized</li>
<li>
<code>constructor</code>, the function that will be used to match the objects
with <code>instanceof</code>
</li>
<li>
<code>encode</code>, a function that will be called to encode an object in binary
form; this function <strong>must</strong> return a <code>Buffer</code> that can be
deserialized by the <code>decode</code> function</li>
<li>
<code>decode</code>, a function that will be called to decode the object from
the passed <code>Buffer</code>
</li>
</ul>
<p dir="auto">This is just a commodity that calls
<a href="#registerEncoder"><code>registerEncoder</code></a> and
<a href="#registerDecoder"><code>registerDecoder</code></a> internally.</p>
<hr>
<p dir="auto"><a name="user-content-encoder"></a></p>
<h7 dir="auto">
<a id="user-content-encoderoptions" class="anchor" aria-hidden="true" href="#encoderoptions"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>encoder(options)</h7>
<p dir="auto">Builds a stream in object mode that encodes msgpack.</p>
<p dir="auto">Supported options:</p>
<ul dir="auto">
<li>
<code>wrap</code>, objects should be passed to encoder in wrapped object {value: data}. Wrap option should be used if you need to pass null to encoder.</li>
</ul>
<hr>
<p dir="auto"><a name="user-content-decoder"></a></p>
<h7 dir="auto">
<a id="user-content-decoderoptions" class="anchor" aria-hidden="true" href="#decoderoptions"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>decoder(options)</h7>
<p dir="auto">Builds a stream in object mode that decodes msgpack.</p>
<p dir="auto">Supported options:</p>
<ul dir="auto">
<li>
<code>wrap</code>, decoded objects returned in wrapped object {value: data}. Wrap option should be used if stream contains msgpack nil.</li>
</ul>
<h6 dir="auto">
<a id="user-content-levelup-support" class="anchor" aria-hidden="true" href="#levelup-support"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>LevelUp Support</h6>
<p dir="auto"><strong>msgpack5</strong> can be used as a LevelUp
<a href="https://github.com/rvagg/node-levelup#leveluplocation-options-callback"><code>valueEncoding</code></a> straight away:</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="var level = require('level')
  , pack  = msgpack()
  , db    = level('foo', {
      valueEncoding: pack
    })
  , obj   = { my: 'obj' }

db.put('hello', obj, function(err) {
  db.get('hello', function(err, result) {
    console.log(result)
    db.close()
  })
})
"><pre><span class="pl-k">var</span> <span class="pl-s1">level</span> <span class="pl-c1">=</span> <span class="pl-en">require</span><span class="pl-kos">(</span><span class="pl-s">'level'</span><span class="pl-kos">)</span>
  <span class="pl-kos">,</span> <span class="pl-s1">pack</span>  <span class="pl-c1">=</span> <span class="pl-en">msgpack</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
  <span class="pl-kos">,</span> <span class="pl-s1">db</span>    <span class="pl-c1">=</span> <span class="pl-s1">level</span><span class="pl-kos">(</span><span class="pl-s">'foo'</span><span class="pl-kos">,</span> <span class="pl-kos">{</span>
      <span class="pl-c1">valueEncoding</span>: <span class="pl-s1">pack</span>
    <span class="pl-kos">}</span><span class="pl-kos">)</span>
  <span class="pl-kos">,</span> <span class="pl-s1">obj</span>   <span class="pl-c1">=</span> <span class="pl-kos">{</span> <span class="pl-c1">my</span>: <span class="pl-s">'obj'</span> <span class="pl-kos">}</span>

<span class="pl-s1">db</span><span class="pl-kos">.</span><span class="pl-en">put</span><span class="pl-kos">(</span><span class="pl-s">'hello'</span><span class="pl-kos">,</span> <span class="pl-s1">obj</span><span class="pl-kos">,</span> <span class="pl-k">function</span><span class="pl-kos">(</span><span class="pl-s1">err</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
  <span class="pl-s1">db</span><span class="pl-kos">.</span><span class="pl-en">get</span><span class="pl-kos">(</span><span class="pl-s">'hello'</span><span class="pl-kos">,</span> <span class="pl-k">function</span><span class="pl-kos">(</span><span class="pl-s1">err</span><span class="pl-kos">,</span> <span class="pl-s1">result</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
    <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s1">result</span><span class="pl-kos">)</span>
    <span class="pl-s1">db</span><span class="pl-kos">.</span><span class="pl-en">close</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
  <span class="pl-kos">}</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span></pre></div>
<h6 dir="auto">
<a id="user-content-related-projects" class="anchor" aria-hidden="true" href="#related-projects"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Related projects</h6>
<ul dir="auto">
<li>
<a href="http://npmjs.com/package/msgpack5rpc" rel="nofollow">msgpack5rpc</a>: An implementation of the
<a href="https://github.com/msgpack-rpc/msgpack-rpc/blob/master/spec.md">msgpack-rpc spec</a>
on top of this library.</li>
</ul>
<h6 dir="auto">
<a id="user-content-disclaimer" class="anchor" aria-hidden="true" href="#disclaimer"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Disclaimer</h6>
<p dir="auto">This library is built fully on JS and on <a href="http://npm.im/bl" rel="nofollow">bl</a> to
simplify the code. Every improvement that keeps the same API is welcome.</p>
<h6 dir="auto">
<a id="user-content-acknowledgements" class="anchor" aria-hidden="true" href="#acknowledgements"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Acknowledgements</h6>
<p dir="auto">This project was kindly sponsored by <a href="http://nearform.com" rel="nofollow">nearForm</a>.</p>
<p dir="auto">This library was originally built as the data format for
<a href="http://npm.im/jschan" rel="nofollow">JSChan</a>.</p>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<p dir="auto">MIT</p>
</article>
  </div>
        </div>
        
        <div id="qs-sschizas-msgpack-response" class="qs"><h4><a href="https://github.com/sschizas/msgpack-response" target="_blank">sschizas/msgpack-response <span class="qs-url">https://github.com/sschizas/msgpack-response</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack-response" class="anchor" aria-hidden="true" href="#msgpack-response"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack-response</h5>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/sschizas/msgpack-response/workflows/Node.js%20CI/badge.svg?branch=master"><img src="https://github.com/sschizas/msgpack-response/workflows/Node.js%20CI/badge.svg?branch=master" alt="Node.js CI" style="max-width: 100%;"></a>
<a href="https://github.com/sschizas/msgpack-response"><img src="https://camo.githubusercontent.com/17cd1d3e6f6eae5fc1fac1d59e66a2597fc211fa260431e8f7ebb9bbafb17686/68747470733a2f2f64617669642d646d2e6f72672f73736368697a61732f6d73677061636b2d726573706f6e73652e737667" alt="Dependency Status" data-canonical-src="https://david-dm.org/sschizas/msgpack-response.svg" style="max-width: 100%;"></a>
<a href="/sschizas/msgpack-response/blob/master/CODE_OF_CONDUCT.md"><img src="https://camo.githubusercontent.com/7d620efaa3eac1c5b060ece5d6aacfcc8b81a74a04d05cd0398689c01c4463bb/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f436f6e7472696275746f72253230436f76656e616e742d76322e3025323061646f707465642d6666363962342e737667" alt="Contributor Covenant" data-canonical-src="https://img.shields.io/badge/Contributor%20Covenant-v2.0%20adopted-ff69b4.svg" style="max-width: 100%;"></a>
<a href="https://opensource.org/licenses/MIT" rel="nofollow"><img src="https://camo.githubusercontent.com/78f47a09877ba9d28da1887a93e5c3bc2efb309c1e910eb21135becd2998238a/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4d49542d79656c6c6f772e737667" alt="License: MIT" data-canonical-src="https://img.shields.io/badge/License-MIT-yellow.svg" style="max-width: 100%;"></a></p>
<p dir="auto">An implementation of <a href="http://msgpack.org/" rel="nofollow">Message Pack</a> middleware for <a href="https://expressjs.com/" rel="nofollow">ExpressJS</a>.</p>
<p dir="auto"><strong>Features</strong></p>
<ul dir="auto">
<li>Automatic Message Pack detection (from the HTTP headers) and encoding of all JSON messages to Message Pack.</li>
<li>Extension of the current ExpressJS API; Introducing the <code>Response.msgPack(jsObject)</code> method on the standard <a href="https://expressjs.com/en/4x/api.html#res" rel="nofollow">ExpressJS Response</a> object.</li>
</ul>
<h6 dir="auto">
<a id="user-content-getting-started" class="anchor" aria-hidden="true" href="#getting-started"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Getting Started</h6>
<p dir="auto">With auto-detection and transformation enabled, the middleware detects automatically the HTTP header <code>Accept: application/x-msgpack</code> and piggybacks the <code>Response.json()</code> method of the ExpressJS API, to encode the JSON response as Message Pack. This method is useful when you have existing applications that need to use the middleware, without changing the codebase very much.</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="const msgpackResponse = require('msgpack-response');

app.use(msgpackResponse({auto_detect: true}));

app.get('/test_json', (req, res) =&gt; {
	res.status(200).json({'message': 'a true test'});
})"><pre><span class="pl-k">const</span> <span class="pl-s1">msgpackResponse</span> <span class="pl-c1">=</span> <span class="pl-en">require</span><span class="pl-kos">(</span><span class="pl-s">'msgpack-response'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-s1">app</span><span class="pl-kos">.</span><span class="pl-en">use</span><span class="pl-kos">(</span><span class="pl-s1">msgpackResponse</span><span class="pl-kos">(</span><span class="pl-kos">{</span><span class="pl-c1">auto_detect</span>: <span class="pl-c1">true</span><span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-s1">app</span><span class="pl-kos">.</span><span class="pl-en">get</span><span class="pl-kos">(</span><span class="pl-s">'/test_json'</span><span class="pl-kos">,</span> <span class="pl-kos">(</span><span class="pl-s1">req</span><span class="pl-kos">,</span> <span class="pl-s1">res</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
	<span class="pl-s1">res</span><span class="pl-kos">.</span><span class="pl-en">status</span><span class="pl-kos">(</span><span class="pl-c1">200</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">json</span><span class="pl-kos">(</span><span class="pl-kos">{</span><span class="pl-s">'message'</span>: <span class="pl-s">'a true test'</span><span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span></pre></div>
<blockquote>
<p dir="auto">Note: Remember to add the header <code>Accept: application/x-msgpack</code> in the request.</p>
</blockquote>
<p dir="auto">Also, it can have auto-detection and transformation disabled. The middleware extends the <code>Response</code> object of the ExpressJS framework, by adding the <code>msgPack()</code> method to it. Then to return an encoded response, you just use the <code>Response.msgPack()</code> method that accepts the Javascript object as a parameter. For example,</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="const msgpackResponse = require('msgpack-response');

app.use(msgpackResponse({auto_detect: false}));
//or
app.use(msgpackResponse());

app.get('/test_msgpack', (req, res) =&gt; {
	res.status(200).msgPack({'message': 'a true test'});
});"><pre><span class="pl-k">const</span> <span class="pl-s1">msgpackResponse</span> <span class="pl-c1">=</span> <span class="pl-en">require</span><span class="pl-kos">(</span><span class="pl-s">'msgpack-response'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-s1">app</span><span class="pl-kos">.</span><span class="pl-en">use</span><span class="pl-kos">(</span><span class="pl-s1">msgpackResponse</span><span class="pl-kos">(</span><span class="pl-kos">{</span><span class="pl-c1">auto_detect</span>: <span class="pl-c1">false</span><span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-c">//or</span>
<span class="pl-s1">app</span><span class="pl-kos">.</span><span class="pl-en">use</span><span class="pl-kos">(</span><span class="pl-s1">msgpackResponse</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-s1">app</span><span class="pl-kos">.</span><span class="pl-en">get</span><span class="pl-kos">(</span><span class="pl-s">'/test_msgpack'</span><span class="pl-kos">,</span> <span class="pl-kos">(</span><span class="pl-s1">req</span><span class="pl-kos">,</span> <span class="pl-s1">res</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
	<span class="pl-s1">res</span><span class="pl-kos">.</span><span class="pl-en">status</span><span class="pl-kos">(</span><span class="pl-c1">200</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">msgPack</span><span class="pl-kos">(</span><span class="pl-kos">{</span><span class="pl-s">'message'</span>: <span class="pl-s">'a true test'</span><span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<blockquote>
<p dir="auto">Note: Initialize the middleware before the actual routes in the middleware chain to properly extend the <code>Response</code> Object.</p>
</blockquote>
<h6 dir="auto">
<a id="user-content-requirements" class="anchor" aria-hidden="true" href="#requirements"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Requirements</h6>
<p dir="auto">Node.js &gt;= 6.0</p>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<p dir="auto">With <a href="https://www.npmjs.com/" rel="nofollow">npm</a> do:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="npm install msgpack-response -save"><pre>npm install msgpack-response -save</pre></div>
<h6 dir="auto">
<a id="user-content-about" class="anchor" aria-hidden="true" href="#about"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>About</h6>
<p dir="auto">I <g-emoji class="g-emoji" alias="heart" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2764.png"></g-emoji> open source software!</p>
<p dir="auto">Check out my other <a href="https://github.com/sschizas">open source projects</a> or say <g-emoji class="g-emoji" alias="wave" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f44b.png"></g-emoji> on <a href="https://twitter.com/StavrosSchizas" rel="nofollow">twitter</a>.</p>
<h6 dir="auto">
<a id="user-content-contribute" class="anchor" aria-hidden="true" href="#contribute"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Contribute</h6>
<p dir="auto">Contributions are welcome <g-emoji class="g-emoji" alias="metal" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f918.png"></g-emoji>. Please see the <a href="https://github.com/sschizas/msgpack-response/blob/master/CONTRIBUTING.md">Contributing Guide</a> and the <a href="https://github.com/sschizas/msgpack-response/blob/master/CODE_OF_CONDUCT.md">Code of Conduct</a>.</p>
<h6 dir="auto">
<a id="user-content-authors" class="anchor" aria-hidden="true" href="#authors"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Authors</h6>
<ul dir="auto">
<li>
<strong>Stavros Schizas</strong> - <em>Initial work &amp; Maintainer</em>
</li>
<li>
<strong>Vassilios Karakoidas</strong> - <em>Initial work</em> - <a href="http://bkarak.wizhut.com" rel="nofollow">Wizhut</a>
</li>
</ul>
<p dir="auto">See also the list of <a href="https://github.com/sschizas/msgpack-response/graphs/contributors">contributors</a> who participated in this project.</p>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<p dir="auto">msgpack-response is available under the MIT license. See the <a href="/sschizas/msgpack-response/blob/master/LICENSE.md">LICENSE</a> file for more info.</p>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-ocaml" class="qs"><h4><a href="https://github.com/msgpack/msgpack-ocaml" target="_blank">msgpack/msgpack-ocaml <span class="qs-url">https://github.com/msgpack/msgpack-ocaml</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack-for-ocaml" class="anchor" aria-hidden="true" href="#msgpack-for-ocaml"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MsgPack for OCaml</h5>
<h6 dir="auto">
<a id="user-content-bulid" class="anchor" aria-hidden="true" href="#bulid"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>BULID</h6>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ make
$ sudo make install"><pre>$ make
$ sudo make install</pre></div>
<h6 dir="auto">
<a id="user-content-example" class="anchor" aria-hidden="true" href="#example"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>EXAMPLE</h6>
<h7 dir="auto">
<a id="user-content-serializedeserialize-for-msgpack-object" class="anchor" aria-hidden="true" href="#serializedeserialize-for-msgpack-object"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Serialize/Deserialize for Msgpack Object</h7>
<div class="highlight highlight-source-ocaml notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="(* serialize *)
let bytes = 
  Msgpack.Serialize.serialize_string (`FixArray [`PFixnum 1; `PFixnum 2; `PFixnum 3])

(* deserialize *)
let obj =
  Msgpack.Serialize.deserialize_string bytes"><pre><span class="pl-c"><span class="pl-c">(*</span> serialize <span class="pl-c">*)</span></span>
<span class="pl-k">let</span> bytes <span class="pl-k">=</span> 
  <span class="pl-c1">Msgpack.Serialize.</span>serialize_string (<span class="pl-en">`FixArray</span> [<span class="pl-en">`PFixnum</span> <span class="pl-c1">1</span>; <span class="pl-en">`PFixnum</span> <span class="pl-c1">2</span>; <span class="pl-en">`PFixnum</span> <span class="pl-c1">3</span>])

<span class="pl-c"><span class="pl-c">(*</span> deserialize <span class="pl-c">*)</span></span>
<span class="pl-k">let</span> obj <span class="pl-k">=</span>
  <span class="pl-c1">Msgpack.Serialize.</span>deserialize_string bytes</pre></div>
<h7 dir="auto">
<a id="user-content-serializedeserialize-for-ocaml-types-with-meta_conv" class="anchor" aria-hidden="true" href="#serializedeserialize-for-ocaml-types-with-meta_conv"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Serialize/Deserialize for OCaml types (with meta_conv)</h7>
<div class="highlight highlight-source-ocaml notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='open Msgpack_conv

type t = {
  int : int;
  str : string;
} with conv(msgpack)

(* serialize *)
let bytes = 
  Msgpack.Serialize.serialize_string (msgpack_of_t { int = 42; str = "ans" })

(* deserialize *)
let obj =
  t_of_msgpack (Msgpack.Serialize.deserialize_string bytes)'><pre><span class="pl-k">open</span> <span class="pl-c1">Msgpack_conv</span>

<span class="pl-k">type</span> <span class="pl-k">t </span>= {
  <span class="pl-s1">int</span> : <span class="pl-k">int</span><span class="pl-k">;</span>
  <span class="pl-s1">str</span> : <span class="pl-k">string</span><span class="pl-k">;</span>
} <span class="pl-k">with</span> <span class="pl-k">conv</span>(<span class="pl-k">msgpack</span>)

<span class="pl-c"><span class="pl-c">(*</span> serialize <span class="pl-c">*)</span></span>
<span class="pl-k">let</span> bytes <span class="pl-k">=</span> 
  <span class="pl-c1">Msgpack.Serialize.</span>serialize_string (msgpack_of_t { <span class="pl-k">int</span> <span class="pl-k">=</span> <span class="pl-c1">42</span>; str <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>ans<span class="pl-pds">"</span></span> })

<span class="pl-c"><span class="pl-c">(*</span> deserialize <span class="pl-c">*)</span></span>
<span class="pl-k">let</span> obj <span class="pl-k">=</span>
  t_of_msgpack (<span class="pl-c1">Msgpack.Serialize.</span>deserialize_string bytes)</pre></div>
<p dir="auto">See also, <code>examlpe/</code></p>
<h6 dir="auto">
<a id="user-content-development" class="anchor" aria-hidden="true" href="#development"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>DEVELOPMENT</h6>
<p dir="auto">Setup development enviroment with docker:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ docker-compose build
$ docker-compose run app"><pre>$ docker-compose build
$ docker-compose run app</pre></div>
<h6 dir="auto">
<a id="user-content-test" class="anchor" aria-hidden="true" href="#test"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>TEST</h6>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ ocaml setup.ml -configure --enable-tests
$ make test"><pre>$ ocaml setup.ml -configure --enable-tests
$ make <span class="pl-c1">test</span></pre></div>
<h6 dir="auto">
<a id="user-content-proof" class="anchor" aria-hidden="true" href="#proof"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>PROOF</h6>
<p dir="auto">If you want to use msgpack at OCaml, you need not do this section.
This section for user intrested in formal verification.</p>
<p dir="auto">You need Coq 8.4 and omake.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ cd proof
$ make
$ cp *.ml* ../lib/core"><pre>$ <span class="pl-c1">cd</span> proof
$ make
$ cp <span class="pl-k">*</span>.ml<span class="pl-k">*</span> ../lib/core</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-gabriel-MPMessagePack" class="qs"><h4><a href="https://github.com/gabriel/MPMessagePack" target="_blank">gabriel/MPMessagePack <span class="qs-url">https://github.com/gabriel/MPMessagePack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-install" class="anchor" aria-hidden="true" href="#install"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install</h5>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='pod "MPMessagePack"'><pre class="notranslate"><code>pod "MPMessagePack"
</code></pre></div>
<h6 dir="auto">
<a id="user-content-writing" class="anchor" aria-hidden="true" href="#writing"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Writing</h6>
<div class="highlight highlight-source-objc notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='#import &lt;MPMessagePack/MPMessagePack.h&gt;

NSDictionary *dict =
@{
@"n": @(32134123),
@"bool": @(YES),
@"array": @[@(1.1f), @(2.1)],
@"body": [NSData data],
};

NSData *data = [dict mp_messagePack];'><pre>#<span class="pl-k">import</span> <span class="pl-s"><span class="pl-pds">&lt;</span>MPMessagePack/MPMessagePack.h<span class="pl-pds">&gt;</span></span>

<span class="pl-c1">NSDictionary</span> *dict =
@{
<span class="pl-s"><span class="pl-pds">@"</span>n<span class="pl-pds">"</span></span>: @(<span class="pl-c1">32134123</span>),
<span class="pl-s"><span class="pl-pds">@"</span>bool<span class="pl-pds">"</span></span>: @(<span class="pl-c1">YES</span>),
<span class="pl-s"><span class="pl-pds">@"</span>array<span class="pl-pds">"</span></span>: @[@(<span class="pl-c1">1</span>.<span class="pl-c1">1f</span>), @(<span class="pl-c1">2.1</span>)],
<span class="pl-s"><span class="pl-pds">@"</span>body<span class="pl-pds">"</span></span>: [<span class="pl-c1">NSData</span> <span class="pl-c1">data</span>],
};

<span class="pl-c1">NSData</span> *data = [dict <span class="pl-c1">mp_messagePack</span>];</pre></div>
<p dir="auto">Or via <code>MPMessagePackWriter</code>.</p>
<div class="highlight highlight-source-objc notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="NSError *error = nil;
NSData *data = [MPMessagePackWriter writeObject:dict error:&amp;error];"><pre><span class="pl-c1">NSError</span> *error = <span class="pl-c1">nil</span>;
<span class="pl-c1">NSData</span> *data = [MPMessagePackWriter <span class="pl-c1">writeObject:</span>dict <span class="pl-c1">error:</span>&amp;error];</pre></div>
<p dir="auto">If you need to use an ordered dictionary.</p>
<div class="highlight highlight-source-objc notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='MPOrderedDictionary *dict = [[MPOrderedDictionary alloc] init];
[dict addEntriesFromDictionary:@{@"c": @(1), @"b": @(2), @"a": @(3)}];
[dict sortKeysUsingSelector:@selector(localizedCaseInsensitiveCompare:)];
[dict mp_messagePack];'><pre>MPOrderedDictionary *dict = [[MPOrderedDictionary <span class="pl-c1">alloc</span>] <span class="pl-c1">init</span>];
[dict <span class="pl-c1">addEntriesFromDictionary:</span>@{<span class="pl-s"><span class="pl-pds">@"</span>c<span class="pl-pds">"</span></span>: @(<span class="pl-c1">1</span>), <span class="pl-s"><span class="pl-pds">@"</span>b<span class="pl-pds">"</span></span>: @(<span class="pl-c1">2</span>), <span class="pl-s"><span class="pl-pds">@"</span>a<span class="pl-pds">"</span></span>: @(<span class="pl-c1">3</span>)}];
[dict <span class="pl-c1">sortKeysUsingSelector:</span><span class="pl-k">@selector</span>(<span class="pl-c1">localizedCaseInsensitiveCompare:</span>)];
[dict <span class="pl-c1">mp_messagePack</span>];</pre></div>
<h6 dir="auto">
<a id="user-content-reading" class="anchor" aria-hidden="true" href="#reading"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Reading</h6>
<div class="highlight highlight-source-objc notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="id obj = [MPMessagePackReader readData:data error:&amp;error];"><pre><span class="pl-c1">id</span> obj = [MPMessagePackReader <span class="pl-c1">readData:</span>data <span class="pl-c1">error:</span>&amp;error];</pre></div>
<div class="highlight highlight-source-objc notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="MPMessagePackReader *reader = [[MPMessagePackReader alloc] initWithData:data];
id obj1 = [reader read:&amp;error]; // Read an object
id obj2 = [reader read:&amp;error]; // Read another object"><pre>MPMessagePackReader *reader = [[MPMessagePackReader <span class="pl-c1">alloc</span>] <span class="pl-c1">initWithData:</span>data];
<span class="pl-c1">id</span> obj1 = [reader <span class="pl-c1">read</span>:&amp;error]; <span class="pl-c"><span class="pl-c">//</span> Read an object</span>
<span class="pl-c1">id</span> obj2 = [reader <span class="pl-c1">read</span>:&amp;error]; <span class="pl-c"><span class="pl-c">//</span> Read another object</span></pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-forzafootball-msgpack-objc" class="qs"><h4><a href="https://github.com/forzafootball/msgpack-objc" target="_blank">forzafootball/msgpack-objc <span class="qs-url">https://github.com/forzafootball/msgpack-objc</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack-objc" class="anchor" aria-hidden="true" href="#msgpack-objc"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack-objc</h5>
<p dir="auto">An Objective-C wrapper for <a href="https://github.com/msgpack/msgpack-c">msgpack-c</a>. Focuses on ease of use and speed.
If you need configurability, there are other, more advanced libraries, for example <a href="https://github.com/gabriel/MPMessagePack">MPMessagePack</a>.</p>
<p dir="auto">This library will always try to use sane defaults. If any nil value is encountered in the MessagePack-data, the object will
be omitted instead of returning an <code>[NSNull null]</code>. This means that there can be no nil objects in dictionaries, and object-less
keys will be lost in translation.</p>
<h7 dir="auto">
<a id="user-content-example-usage" class="anchor" aria-hidden="true" href="#example-usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example usage:</h7>
<div class="highlight highlight-source-objc notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='#import &lt;msgpack-objc/MessagePack.h&gt;

NSDictionary *dictionary = @{@"name": @"msgpack-objc"};

NSData *messagePackData = [MessagePack packObject:dictionary];
NSDictionary *unpackedDictionary = [MessagePack unpackData:messagePackData];'><pre>#<span class="pl-k">import</span> <span class="pl-s"><span class="pl-pds">&lt;</span>msgpack-objc/MessagePack.h<span class="pl-pds">&gt;</span></span>

<span class="pl-c1">NSDictionary</span> *dictionary = @{<span class="pl-s"><span class="pl-pds">@"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">@"</span>msgpack-objc<span class="pl-pds">"</span></span>};

<span class="pl-c1">NSData</span> *messagePackData = [MessagePack <span class="pl-c1">packObject:</span>dictionary];
<span class="pl-c1">NSDictionary</span> *unpackedDictionary = [MessagePack <span class="pl-c1">unpackData:</span>messagePackData];</pre></div>
<h7 dir="auto">
<a id="user-content-supported-native-types" class="anchor" aria-hidden="true" href="#supported-native-types"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Supported native types:</h7>
<ul dir="auto">
<li><code>NSArray</code></li>
<li><code>NSData</code></li>
<li>
<code>NSDate</code> (using <a href="https://github.com/msgpack/msgpack/blob/master/spec.md#timestamp-extension-type">MessagePack timestamps</a>)</li>
<li><code>NSDictionary</code></li>
<li>
<code>NSNumber</code> (<code>boolean</code>, <code>u64</code>, <code>i64</code>, <code>float32/64</code>)</li>
<li><code>NSString</code></li>
</ul>
<h6 dir="auto">
<a id="user-content-extension-support" class="anchor" aria-hidden="true" href="#extension-support"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Extension support</h6>
<p dir="auto">The library supports <a href="https://github.com/msgpack/msgpack/blob/master/spec.md#timestamp-extension-type">MessagePack timestamps</a>,
and will return an <code>NSDate</code>-object whenever one is encountered. When serializing, any <code>NSDate</code>-objects will also be
serialized as native MessagePack timestamps.</p>
<p dir="auto">You can add native serialization for your own classes by conforming to protocol <code>MessagePackSerializable</code> and register it like this:</p>
<div class="highlight highlight-source-c notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="[MessagePack registerClass:Person.class forExtensionType:14];"><pre>[MessagePack registerClass:Person.class forExtensionType:<span class="pl-c1">14</span>];</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-php" class="qs"><h4><a href="https://github.com/msgpack/msgpack-php" target="_blank">msgpack/msgpack-php <span class="qs-url">https://github.com/msgpack/msgpack-php</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack-for-php" class="anchor" aria-hidden="true" href="#msgpack-for-php"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Msgpack for PHP</h5>
<p dir="auto"><a href="https://github.com/msgpack/msgpack-php/actions?query=workflow%3Aci+branch%3Amaster"><img src="https://github.com/msgpack/msgpack-php/workflows/ci/badge.svg?branch=master" alt="Build Status" style="max-width: 100%;"></a></p>
<p dir="auto">This extension provides an API for communicating with MessagePack serialization.</p>
<p dir="auto">MessagePack is a binary-based efficient object serialization library.
It enables to exchange structured objects between many languages just like JSON.
But unlike JSON, it is very fast and small.</p>
<h6 dir="auto">
<a id="user-content-requirement" class="anchor" aria-hidden="true" href="#requirement"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Requirement</h6>
<ul dir="auto">
<li>PHP 7.0 +</li>
</ul>
<h6 dir="auto">
<a id="user-content-install" class="anchor" aria-hidden="true" href="#install"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install</h6>
<h7 dir="auto">
<a id="user-content-install-from-pecl" class="anchor" aria-hidden="true" href="#install-from-pecl"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install from PECL</h7>
<p dir="auto">Msgpack is an PECL extension, thus you can simply install it by:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="pecl install msgpack"><pre>pecl install msgpack</pre></div>
<h7 dir="auto">
<a id="user-content-compile-msgpack-from-source" class="anchor" aria-hidden="true" href="#compile-msgpack-from-source"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Compile Msgpack from source</h7>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="/path/to/phpize
./configure --with-php-config=/path/to/php-config
make &amp;&amp; make install"><pre>/path/to/phpize
./configure --with-php-config=/path/to/php-config
make <span class="pl-k">&amp;&amp;</span> make install</pre></div>
<h7 dir="auto">
<a id="user-content-example" class="anchor" aria-hidden="true" href="#example"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example</h7>
<div class="highlight highlight-text-html-php notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&lt;?php
$data = array(0 =&gt; 1, 1 =&gt; 2, 2 =&gt; 3);
$msg = msgpack_pack($data);
$data = msgpack_unpack($msg);"><pre><span class="pl-ent">&lt;?php</span>
<span class="pl-s1"><span class="pl-c1">$</span>data</span> = <span class="pl-en">array</span>(<span class="pl-c1">0</span> =&gt; <span class="pl-c1">1</span>, <span class="pl-c1">1</span> =&gt; <span class="pl-c1">2</span>, <span class="pl-c1">2</span> =&gt; <span class="pl-c1">3</span>);
<span class="pl-s1"><span class="pl-c1">$</span>msg</span> = <span class="pl-en">msgpack_pack</span>(<span class="pl-s1"><span class="pl-c1">$</span>data</span>);
<span class="pl-s1"><span class="pl-c1">$</span>data</span> = <span class="pl-en">msgpack_unpack</span>(<span class="pl-s1"><span class="pl-c1">$</span>msg</span>);</pre></div>
<h7 dir="auto">
<a id="user-content-advanced-example" class="anchor" aria-hidden="true" href="#advanced-example"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Advanced Example</h7>
<div class="highlight highlight-text-html-php notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&lt;?php
$data = array(0 =&gt; 1, 1 =&gt; 2, 2 =&gt; 3);
$packer = new \MessagePack(false);
// ^ same as $packer-&gt;setOption(\MessagePack::OPT_PHPONLY, false);
$packed = $packer-&gt;pack($data);

$unpacker = new \MessagePackUnpacker(false);
// ^ same as $unpacker-&gt;setOption(\MessagePack::OPT_PHPONLY, false);
$unpacker-&gt;feed($packed);
$unpacker-&gt;execute();
$unpacked = $unpacker-&gt;data();
$unpacker-&gt;reset();"><pre><span class="pl-ent">&lt;?php</span>
<span class="pl-s1"><span class="pl-c1">$</span>data</span> = <span class="pl-en">array</span>(<span class="pl-c1">0</span> =&gt; <span class="pl-c1">1</span>, <span class="pl-c1">1</span> =&gt; <span class="pl-c1">2</span>, <span class="pl-c1">2</span> =&gt; <span class="pl-c1">3</span>);
<span class="pl-s1"><span class="pl-c1">$</span>packer</span> = <span class="pl-k">new</span> \<span class="pl-v">MessagePack</span>(<span class="pl-c1">false</span>);
<span class="pl-c">// ^ same as $packer-&gt;setOption(\MessagePack::OPT_PHPONLY, false);</span>
<span class="pl-s1"><span class="pl-c1">$</span>packed</span> = <span class="pl-s1"><span class="pl-c1">$</span>packer</span>-&gt;<span class="pl-en">pack</span>(<span class="pl-s1"><span class="pl-c1">$</span>data</span>);

<span class="pl-s1"><span class="pl-c1">$</span>unpacker</span> = <span class="pl-k">new</span> \<span class="pl-v">MessagePackUnpacker</span>(<span class="pl-c1">false</span>);
<span class="pl-c">// ^ same as $unpacker-&gt;setOption(\MessagePack::OPT_PHPONLY, false);</span>
<span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">feed</span>(<span class="pl-s1"><span class="pl-c1">$</span>packed</span>);
<span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">execute</span>();
<span class="pl-s1"><span class="pl-c1">$</span>unpacked</span> = <span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">data</span>();
<span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">reset</span>();</pre></div>
<h7 dir="auto">
<a id="user-content-advanced-streaming-example" class="anchor" aria-hidden="true" href="#advanced-streaming-example"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Advanced Streaming Example</h7>
<div class="highlight highlight-text-html-php notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='&lt;?php
$data1 = array(0 =&gt; 1, 1 =&gt; 2, 2 =&gt; 3);
$data2 = array("a" =&gt; 1, "b" =&gt; 2, "c" =&gt; 3);

$packer = new \MessagePack(false);
$packed1 = $packer-&gt;pack($data1);
$packed2 = $packer-&gt;pack($data2);

$unpacker = new \MessagePackUnpacker(false);
$buffer = "";
$nread = 0;

//Simulating streaming data :)
$buffer .= $packed1;
$buffer .= $packed2;

while(true) {
   if($unpacker-&gt;execute($buffer, $nread)) {
       $msg = $unpacker-&gt;data();
       
       var_dump($msg);
       
       $unpacker-&gt;reset();
       $buffer = substr($buffer, $nread);
       $nread = 0;
       if(!empty($buffer)) {
            continue;
       }
   }
   break;
}
'><pre><span class="pl-ent">&lt;?php</span>
<span class="pl-s1"><span class="pl-c1">$</span>data1</span> = <span class="pl-en">array</span>(<span class="pl-c1">0</span> =&gt; <span class="pl-c1">1</span>, <span class="pl-c1">1</span> =&gt; <span class="pl-c1">2</span>, <span class="pl-c1">2</span> =&gt; <span class="pl-c1">3</span>);
<span class="pl-s1"><span class="pl-c1">$</span>data2</span> = <span class="pl-en">array</span>(<span class="pl-s">"a"</span> =&gt; <span class="pl-c1">1</span>, <span class="pl-s">"b"</span> =&gt; <span class="pl-c1">2</span>, <span class="pl-s">"c"</span> =&gt; <span class="pl-c1">3</span>);

<span class="pl-s1"><span class="pl-c1">$</span>packer</span> = <span class="pl-k">new</span> \<span class="pl-v">MessagePack</span>(<span class="pl-c1">false</span>);
<span class="pl-s1"><span class="pl-c1">$</span>packed1</span> = <span class="pl-s1"><span class="pl-c1">$</span>packer</span>-&gt;<span class="pl-en">pack</span>(<span class="pl-s1"><span class="pl-c1">$</span>data1</span>);
<span class="pl-s1"><span class="pl-c1">$</span>packed2</span> = <span class="pl-s1"><span class="pl-c1">$</span>packer</span>-&gt;<span class="pl-en">pack</span>(<span class="pl-s1"><span class="pl-c1">$</span>data2</span>);

<span class="pl-s1"><span class="pl-c1">$</span>unpacker</span> = <span class="pl-k">new</span> \<span class="pl-v">MessagePackUnpacker</span>(<span class="pl-c1">false</span>);
<span class="pl-s1"><span class="pl-c1">$</span>buffer</span> = <span class="pl-s">""</span>;
<span class="pl-s1"><span class="pl-c1">$</span>nread</span> = <span class="pl-c1">0</span>;

<span class="pl-c">//Simulating streaming data :)</span>
<span class="pl-s1"><span class="pl-c1">$</span>buffer</span> .= <span class="pl-s1"><span class="pl-c1">$</span>packed1</span>;
<span class="pl-s1"><span class="pl-c1">$</span>buffer</span> .= <span class="pl-s1"><span class="pl-c1">$</span>packed2</span>;

<span class="pl-k">while</span>(<span class="pl-c1">true</span>) {
   <span class="pl-k">if</span>(<span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">execute</span>(<span class="pl-s1"><span class="pl-c1">$</span>buffer</span>, <span class="pl-s1"><span class="pl-c1">$</span>nread</span>)) {
       <span class="pl-s1"><span class="pl-c1">$</span>msg</span> = <span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">data</span>();
       
       <span class="pl-en">var_dump</span>(<span class="pl-s1"><span class="pl-c1">$</span>msg</span>);
       
       <span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">reset</span>();
       <span class="pl-s1"><span class="pl-c1">$</span>buffer</span> = <span class="pl-en">substr</span>(<span class="pl-s1"><span class="pl-c1">$</span>buffer</span>, <span class="pl-s1"><span class="pl-c1">$</span>nread</span>);
       <span class="pl-s1"><span class="pl-c1">$</span>nread</span> = <span class="pl-c1">0</span>;
       <span class="pl-k">if</span>(!<span class="pl-en">empty</span>(<span class="pl-s1"><span class="pl-c1">$</span>buffer</span>)) {
            <span class="pl-k">continue</span>;
       }
   }
   <span class="pl-k">break</span>;
}</pre></div>
<h6 dir="auto">
<a id="user-content-resources" class="anchor" aria-hidden="true" href="#resources"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Resources</h6>
<ul dir="auto">
<li><a href="http://msgpack.org/" rel="nofollow">msgpack</a></li>
</ul>
</article>
  </div>
        </div>
        
        <div id="qs-rybakit-msgpack-php" class="qs"><h4><a href="https://github.com/rybakit/msgpack.php" target="_blank">rybakit/msgpack.php <span class="qs-url">https://github.com/rybakit/msgpack.php</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpackphp" class="anchor" aria-hidden="true" href="#msgpackphp"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack.php</h5>
<p dir="auto"><a href="https://github.com/rybakit/msgpack.php/actions?query=workflow%3AQA"><img src="https://github.com/rybakit/msgpack.php/workflows/QA/badge.svg" alt="Quality Assurance" style="max-width: 100%;"></a>
<a href="https://scrutinizer-ci.com/g/rybakit/msgpack.php/?branch=master" rel="nofollow"><img src="https://camo.githubusercontent.com/533410f0b65c27b00fc13704a12aa4dbbeab386bc4ed0cc55605c82d655c8ea2/68747470733a2f2f7363727574696e697a65722d63692e636f6d2f672f727962616b69742f6d73677061636b2e7068702f6261646765732f636f7665726167652e706e673f623d6d6173746572" alt="Code Coverage" data-canonical-src="https://scrutinizer-ci.com/g/rybakit/msgpack.php/badges/coverage.png?b=master" style="max-width: 100%;"></a>
<a href="https://github.com/ziadoz/awesome-php#data-structure-and-storage"><img src="https://camo.githubusercontent.com/e5d3197f63169393ee5695f496402136b412d5e3b1d77dc5aa80805fdd5e7edb/68747470733a2f2f617765736f6d652e72652f6d656e74696f6e65642d62616467652e737667" alt="Mentioned in Awesome PHP" data-canonical-src="https://awesome.re/mentioned-badge.svg" style="max-width: 100%;"></a></p>
<p dir="auto">A pure PHP implementation of the <a href="https://msgpack.org/" rel="nofollow">MessagePack</a> serialization format.</p>
<h6 dir="auto">
<a id="user-content-features" class="anchor" aria-hidden="true" href="#features"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Features</h6>
<ul dir="auto">
<li>Fully compliant with the latest <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">MessagePack specification</a>
</li>
<li>Supports <a href="#unpacking">streaming unpacking</a>
</li>
<li>Supports <a href="#unpacking-options">unsigned 64-bit integers handling</a>
</li>
<li>Supports <a href="#custom-types">object serialization</a>
</li>
<li><a href="https://github.com/rybakit/msgpack.php/actions?query=workflow%3AQA">Fully tested</a></li>
<li><a href="#performance">Relatively fast</a></li>
</ul>
<h6 dir="auto">
<a id="user-content-table-of-contents" class="anchor" aria-hidden="true" href="#table-of-contents"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Table of contents</h6>
<ul dir="auto">
<li><a href="#installation">Installation</a></li>
<li>
<a href="#usage">Usage</a>
<ul dir="auto">
<li>
<a href="#packing">Packing</a>
<ul dir="auto">
<li><a href="#packing-options">Packing options</a></li>
</ul>
</li>
<li>
<a href="#unpacking">Unpacking</a>
<ul dir="auto">
<li><a href="#unpacking-options">Unpacking options</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#custom-types">Custom types</a>
<ul dir="auto">
<li><a href="#type-objects">Type objects</a></li>
<li><a href="#type-transformers">Type transformers</a></li>
<li>
<a href="#extensions">Extensions</a>
<ul dir="auto">
<li><a href="#timestamp">Timestamp</a></li>
<li><a href="#application-specific-extensions">Application-specific extensions</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#exceptions">Exceptions</a></li>
<li>
<a href="#tests">Tests</a>
<ul dir="auto">
<li><a href="#fuzzing">Fuzzing</a></li>
<li><a href="#performance">Performance</a></li>
</ul>
</li>
<li><a href="#license">License</a></li>
</ul>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<p dir="auto">The recommended way to install the library is through <a href="http://getcomposer.org" rel="nofollow">Composer</a>:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="composer require rybakit/msgpack"><pre>composer require rybakit/msgpack</pre></div>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<h7 dir="auto">
<a id="user-content-packing" class="anchor" aria-hidden="true" href="#packing"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Packing</h7>
<p dir="auto">To pack values you can either use an instance of a <code>Packer</code>:</p>
<div class="highlight highlight-text-html-php notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$packer = new Packer();
$packed = $packer-&gt;pack($value);"><pre><span class="pl-s1"><span class="pl-c1">$</span>packer</span> = <span class="pl-k">new</span> <span class="pl-v">Packer</span>();
<span class="pl-s1"><span class="pl-c1">$</span>packed</span> = <span class="pl-s1"><span class="pl-c1">$</span>packer</span>-&gt;<span class="pl-en">pack</span>(<span class="pl-s1"><span class="pl-c1">$</span>value</span>);</pre></div>
<p dir="auto">or call a static method on the <code>MessagePack</code> class:</p>
<div class="highlight highlight-text-html-php notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$packed = MessagePack::pack($value);"><pre><span class="pl-s1"><span class="pl-c1">$</span>packed</span> = <span class="pl-v">MessagePack</span>::<span class="pl-en">pack</span>(<span class="pl-s1"><span class="pl-c1">$</span>value</span>);</pre></div>
<p dir="auto">In the examples above, the method <code>pack</code> automatically packs a value depending on its type. However, not all PHP types
can be uniquely translated to MessagePack types. For example, the MessagePack format defines <code>map</code> and <code>array</code> types,
which are represented by a single <code>array</code> type in PHP. By default, the packer will pack a PHP array as a MessagePack
array if it has sequential numeric keys, starting from <code>0</code> and as a MessagePack map otherwise:</p>
<div class="highlight highlight-text-html-php notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$mpArr1 = $packer-&gt;pack([1, 2]);               // MP array [1, 2]
$mpArr2 = $packer-&gt;pack([0 =&gt; 1, 1 =&gt; 2]);     // MP array [1, 2]
$mpMap1 = $packer-&gt;pack([0 =&gt; 1, 2 =&gt; 3]);     // MP map {0: 1, 2: 3}
$mpMap2 = $packer-&gt;pack([1 =&gt; 2, 2 =&gt; 3]);     // MP map {1: 2, 2: 3}
$mpMap3 = $packer-&gt;pack(['a' =&gt; 1, 'b' =&gt; 2]); // MP map {a: 1, b: 2}"><pre><span class="pl-s1"><span class="pl-c1">$</span>mpArr1</span> = <span class="pl-s1"><span class="pl-c1">$</span>packer</span>-&gt;<span class="pl-en">pack</span>([<span class="pl-c1">1</span>, <span class="pl-c1">2</span>]);               <span class="pl-c">// MP array [1, 2]</span>
<span class="pl-s1"><span class="pl-c1">$</span>mpArr2</span> = <span class="pl-s1"><span class="pl-c1">$</span>packer</span>-&gt;<span class="pl-en">pack</span>([<span class="pl-c1">0</span> =&gt; <span class="pl-c1">1</span>, <span class="pl-c1">1</span> =&gt; <span class="pl-c1">2</span>]);     <span class="pl-c">// MP array [1, 2]</span>
<span class="pl-s1"><span class="pl-c1">$</span>mpMap1</span> = <span class="pl-s1"><span class="pl-c1">$</span>packer</span>-&gt;<span class="pl-en">pack</span>([<span class="pl-c1">0</span> =&gt; <span class="pl-c1">1</span>, <span class="pl-c1">2</span> =&gt; <span class="pl-c1">3</span>]);     <span class="pl-c">// MP map {0: 1, 2: 3}</span>
<span class="pl-s1"><span class="pl-c1">$</span>mpMap2</span> = <span class="pl-s1"><span class="pl-c1">$</span>packer</span>-&gt;<span class="pl-en">pack</span>([<span class="pl-c1">1</span> =&gt; <span class="pl-c1">2</span>, <span class="pl-c1">2</span> =&gt; <span class="pl-c1">3</span>]);     <span class="pl-c">// MP map {1: 2, 2: 3}</span>
<span class="pl-s1"><span class="pl-c1">$</span>mpMap3</span> = <span class="pl-s1"><span class="pl-c1">$</span>packer</span>-&gt;<span class="pl-en">pack</span>([<span class="pl-s">'a'</span> =&gt; <span class="pl-c1">1</span>, <span class="pl-s">'b'</span> =&gt; <span class="pl-c1">2</span>]); <span class="pl-c">// MP map {a: 1, b: 2}</span></pre></div>
<p dir="auto">However, sometimes you need to pack a sequential array as a MessagePack map.
To do this, use the <code>packMap</code> method:</p>
<div class="highlight highlight-text-html-php notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$mpMap = $packer-&gt;packMap([1, 2]); // {0: 1, 1: 2}"><pre><span class="pl-s1"><span class="pl-c1">$</span>mpMap</span> = <span class="pl-s1"><span class="pl-c1">$</span>packer</span>-&gt;<span class="pl-en">packMap</span>([<span class="pl-c1">1</span>, <span class="pl-c1">2</span>]); <span class="pl-c">// {0: 1, 1: 2}</span></pre></div>
<p dir="auto">Here is a list of type-specific packing methods:</p>
<div class="highlight highlight-text-html-php notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$packer-&gt;packNil();           // MP nil
$packer-&gt;packBool(true);      // MP bool
$packer-&gt;packInt(42);         // MP int
$packer-&gt;packFloat(M_PI);     // MP float (32 or 64)
$packer-&gt;packFloat32(M_PI);   // MP float 32
$packer-&gt;packFloat64(M_PI);   // MP float 64
$packer-&gt;packStr('foo');      // MP str
$packer-&gt;packBin(&quot;\x80&quot;);     // MP bin
$packer-&gt;packArray([1, 2]);   // MP array
$packer-&gt;packMap(['a' =&gt; 1]); // MP map
$packer-&gt;packExt(1, &quot;\xaa&quot;);  // MP ext"><pre><span class="pl-s1"><span class="pl-c1">$</span>packer</span>-&gt;<span class="pl-en">packNil</span>();           <span class="pl-c">// MP nil</span>
<span class="pl-s1"><span class="pl-c1">$</span>packer</span>-&gt;<span class="pl-en">packBool</span>(<span class="pl-c1">true</span>);      <span class="pl-c">// MP bool</span>
<span class="pl-s1"><span class="pl-c1">$</span>packer</span>-&gt;<span class="pl-en">packInt</span>(<span class="pl-c1">42</span>);         <span class="pl-c">// MP int</span>
<span class="pl-s1"><span class="pl-c1">$</span>packer</span>-&gt;<span class="pl-en">packFloat</span>(<span class="pl-c1">M_PI</span>);     <span class="pl-c">// MP float (32 or 64)</span>
<span class="pl-s1"><span class="pl-c1">$</span>packer</span>-&gt;<span class="pl-en">packFloat32</span>(<span class="pl-c1">M_PI</span>);   <span class="pl-c">// MP float 32</span>
<span class="pl-s1"><span class="pl-c1">$</span>packer</span>-&gt;<span class="pl-en">packFloat64</span>(<span class="pl-c1">M_PI</span>);   <span class="pl-c">// MP float 64</span>
<span class="pl-s1"><span class="pl-c1">$</span>packer</span>-&gt;<span class="pl-en">packStr</span>(<span class="pl-s">'foo'</span>);      <span class="pl-c">// MP str</span>
<span class="pl-s1"><span class="pl-c1">$</span>packer</span>-&gt;<span class="pl-en">packBin</span>(<span class="pl-s">"\x80"</span>);     <span class="pl-c">// MP bin</span>
<span class="pl-s1"><span class="pl-c1">$</span>packer</span>-&gt;<span class="pl-en">packArray</span>([<span class="pl-c1">1</span>, <span class="pl-c1">2</span>]);   <span class="pl-c">// MP array</span>
<span class="pl-s1"><span class="pl-c1">$</span>packer</span>-&gt;<span class="pl-en">packMap</span>([<span class="pl-s">'a'</span> =&gt; <span class="pl-c1">1</span>]); <span class="pl-c">// MP map</span>
<span class="pl-s1"><span class="pl-c1">$</span>packer</span>-&gt;<span class="pl-en">packExt</span>(<span class="pl-c1">1</span>, <span class="pl-s">"\xaa"</span>);  <span class="pl-c">// MP ext</span></pre></div>
<blockquote>
<p dir="auto"><em>Check the <a href="#custom-types">"Custom types"</a> section below on how to pack custom types.</em></p>
</blockquote>
<h8 dir="auto">
<a id="user-content-packing-options" class="anchor" aria-hidden="true" href="#packing-options"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Packing options</h8>
<p dir="auto">The <code>Packer</code> object supports a number of bitmask-based options for fine-tuning
the packing process (defaults are in bold):</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>FORCE_STR</code></strong></td>
<td>Forces PHP strings to be packed as MessagePack UTF-8 strings</td>
</tr>
<tr>
<td><code>FORCE_BIN</code></td>
<td>Forces PHP strings to be packed as MessagePack binary data</td>
</tr>
<tr>
<td><code>DETECT_STR_BIN</code></td>
<td>Detects MessagePack str/bin type automatically</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td><code>FORCE_ARR</code></td>
<td>Forces PHP arrays to be packed as MessagePack arrays</td>
</tr>
<tr>
<td><code>FORCE_MAP</code></td>
<td>Forces PHP arrays to be packed as MessagePack maps</td>
</tr>
<tr>
<td><strong><code>DETECT_ARR_MAP</code></strong></td>
<td>Detects MessagePack array/map type automatically</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td><code>FORCE_FLOAT32</code></td>
<td>Forces PHP floats to be packed as 32-bits MessagePack floats</td>
</tr>
<tr>
<td><strong><code>FORCE_FLOAT64</code></strong></td>
<td>Forces PHP floats to be packed as 64-bits MessagePack floats</td>
</tr>
</tbody>
</table>
<blockquote>
<p dir="auto"><em>The type detection mode (<code>DETECT_STR_BIN</code>/<code>DETECT_ARR_MAP</code>) adds some overhead
which can be noticed when you pack large (16- and 32-bit) arrays or strings.
However, if you know the value type in advance (for example, you only work with
UTF-8 strings or/and associative arrays), you can eliminate this overhead by
forcing the packer to use the appropriate type, which will save it from running
the auto-detection routine. Another option is to explicitly specify the value
type. The library provides 2 auxiliary classes for this, <code>Map</code> and <code>Bin</code>.
Check the <a href="#custom-types">"Custom types"</a> section below for details.</em></p>
</blockquote>
<p dir="auto">Examples:</p>
<div class="highlight highlight-text-html-php notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="// detect str/bin type and pack PHP 64-bit floats (doubles) to MP 32-bit floats
$packer = new Packer(PackOptions::DETECT_STR_BIN | PackOptions::FORCE_FLOAT32);

// these will throw MessagePack\Exception\InvalidOptionException
$packer = new Packer(PackOptions::FORCE_STR | PackOptions::FORCE_BIN);
$packer = new Packer(PackOptions::FORCE_FLOAT32 | PackOptions::FORCE_FLOAT64);"><pre><span class="pl-c">// detect str/bin type and pack PHP 64-bit floats (doubles) to MP 32-bit floats</span>
<span class="pl-s1"><span class="pl-c1">$</span>packer</span> = <span class="pl-k">new</span> <span class="pl-v">Packer</span>(<span class="pl-v">PackOptions</span>::<span class="pl-c1">DETECT_STR_BIN</span> | <span class="pl-v">PackOptions</span>::<span class="pl-v">FORCE_FLOAT32</span>);

<span class="pl-c">// these will throw MessagePack\Exception\InvalidOptionException</span>
<span class="pl-s1"><span class="pl-c1">$</span>packer</span> = <span class="pl-k">new</span> <span class="pl-v">Packer</span>(<span class="pl-v">PackOptions</span>::<span class="pl-c1">FORCE_STR</span> | <span class="pl-v">PackOptions</span>::<span class="pl-c1">FORCE_BIN</span>);
<span class="pl-s1"><span class="pl-c1">$</span>packer</span> = <span class="pl-k">new</span> <span class="pl-v">Packer</span>(<span class="pl-v">PackOptions</span>::<span class="pl-v">FORCE_FLOAT32</span> | <span class="pl-v">PackOptions</span>::<span class="pl-v">FORCE_FLOAT64</span>);</pre></div>
<h7 dir="auto">
<a id="user-content-unpacking" class="anchor" aria-hidden="true" href="#unpacking"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Unpacking</h7>
<p dir="auto">To unpack data you can either use an instance of a <code>BufferUnpacker</code>:</p>
<div class="highlight highlight-text-html-php notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$unpacker = new BufferUnpacker();

$unpacker-&gt;reset($packed);
$value = $unpacker-&gt;unpack();"><pre><span class="pl-s1"><span class="pl-c1">$</span>unpacker</span> = <span class="pl-k">new</span> <span class="pl-v">BufferUnpacker</span>();

<span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">reset</span>(<span class="pl-s1"><span class="pl-c1">$</span>packed</span>);
<span class="pl-s1"><span class="pl-c1">$</span>value</span> = <span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">unpack</span>();</pre></div>
<p dir="auto">or call a static method on the <code>MessagePack</code> class:</p>
<div class="highlight highlight-text-html-php notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$value = MessagePack::unpack($packed);"><pre><span class="pl-s1"><span class="pl-c1">$</span>value</span> = <span class="pl-v">MessagePack</span>::<span class="pl-en">unpack</span>(<span class="pl-s1"><span class="pl-c1">$</span>packed</span>);</pre></div>
<p dir="auto">If the packed data is received in chunks (e.g. when reading from a stream), use the <code>tryUnpack</code> method, which attempts
to unpack data and returns an array of unpacked messages (if any) instead of throwing an <code>InsufficientDataException</code>:</p>
<div class="highlight highlight-text-html-php notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="while ($chunk = ...) {
    $unpacker-&gt;append($chunk);
    if ($messages = $unpacker-&gt;tryUnpack()) {
        return $messages;
    }
}"><pre><span class="pl-k">while</span> (<span class="pl-s1"><span class="pl-c1">$</span>chunk</span> = <span class="pl-c1">.</span>.<span class="pl-c1">.</span>) {
    <span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">append</span>(<span class="pl-s1"><span class="pl-c1">$</span>chunk</span>);
    <span class="pl-k">if</span> (<span class="pl-s1"><span class="pl-c1">$</span>messages</span> = <span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">tryUnpack</span>()) {
        <span class="pl-k">return</span> <span class="pl-s1"><span class="pl-c1">$</span>messages</span>;
    }
}</pre></div>
<p dir="auto">If you want to unpack from a specific position in a buffer, use <code>seek</code>:</p>
<div class="highlight highlight-text-html-php notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$unpacker-&gt;seek(42); // set position equal to 42 bytes
$unpacker-&gt;seek(-8); // set position to 8 bytes before the end of the buffer"><pre><span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">seek</span>(<span class="pl-c1">42</span>); <span class="pl-c">// set position equal to 42 bytes</span>
<span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">seek</span>(-<span class="pl-c1">8</span>); <span class="pl-c">// set position to 8 bytes before the end of the buffer</span></pre></div>
<p dir="auto">To skip bytes from the current position, use <code>skip</code>:</p>
<div class="highlight highlight-text-html-php notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$unpacker-&gt;skip(10); // set position to 10 bytes ahead of the current position"><pre><span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">skip</span>(<span class="pl-c1">10</span>); <span class="pl-c">// set position to 10 bytes ahead of the current position</span></pre></div>
<p dir="auto">To get the number of remaining (unread) bytes in the buffer:</p>
<div class="highlight highlight-text-html-php notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$unreadBytesCount = $unpacker-&gt;getRemainingCount();"><pre><span class="pl-s1"><span class="pl-c1">$</span>unreadBytesCount</span> = <span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">getRemainingCount</span>();</pre></div>
<p dir="auto">To check whether the buffer has unread data:</p>
<div class="highlight highlight-text-html-php notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$hasUnreadBytes = $unpacker-&gt;hasRemaining();"><pre><span class="pl-s1"><span class="pl-c1">$</span>hasUnreadBytes</span> = <span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">hasRemaining</span>();</pre></div>
<p dir="auto">If needed, you can remove already read data from the buffer by calling:</p>
<div class="highlight highlight-text-html-php notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$releasedBytesCount = $unpacker-&gt;release();"><pre><span class="pl-s1"><span class="pl-c1">$</span>releasedBytesCount</span> = <span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">release</span>();</pre></div>
<p dir="auto">With the <code>read</code> method you can read raw (packed) data:</p>
<div class="highlight highlight-text-html-php notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$packedData = $unpacker-&gt;read(2); // read 2 bytes"><pre><span class="pl-s1"><span class="pl-c1">$</span>packedData</span> = <span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">read</span>(<span class="pl-c1">2</span>); <span class="pl-c">// read 2 bytes</span></pre></div>
<p dir="auto">Besides the above methods <code>BufferUnpacker</code> provides type-specific unpacking methods, namely:</p>
<div class="highlight highlight-text-html-php notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$unpacker-&gt;unpackNil();   // PHP null
$unpacker-&gt;unpackBool();  // PHP bool
$unpacker-&gt;unpackInt();   // PHP int
$unpacker-&gt;unpackFloat(); // PHP float
$unpacker-&gt;unpackStr();   // PHP UTF-8 string
$unpacker-&gt;unpackBin();   // PHP binary string
$unpacker-&gt;unpackArray(); // PHP sequential array
$unpacker-&gt;unpackMap();   // PHP associative array
$unpacker-&gt;unpackExt();   // PHP MessagePack\Type\Ext object"><pre><span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">unpackNil</span>();   <span class="pl-c">// PHP null</span>
<span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">unpackBool</span>();  <span class="pl-c">// PHP bool</span>
<span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">unpackInt</span>();   <span class="pl-c">// PHP int</span>
<span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">unpackFloat</span>(); <span class="pl-c">// PHP float</span>
<span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">unpackStr</span>();   <span class="pl-c">// PHP UTF-8 string</span>
<span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">unpackBin</span>();   <span class="pl-c">// PHP binary string</span>
<span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">unpackArray</span>(); <span class="pl-c">// PHP sequential array</span>
<span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">unpackMap</span>();   <span class="pl-c">// PHP associative array</span>
<span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">unpackExt</span>();   <span class="pl-c">// PHP MessagePack\Type\Ext object</span></pre></div>
<h8 dir="auto">
<a id="user-content-unpacking-options" class="anchor" aria-hidden="true" href="#unpacking-options"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Unpacking options</h8>
<p dir="auto">The <code>BufferUnpacker</code> object supports a number of bitmask-based options for fine-tuning
the unpacking process (defaults are in bold):</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>BIGINT_AS_STR</code></strong></td>
<td>Converts overflowed integers to strings <sup>[1]</sup>
</td>
</tr>
<tr>
<td><code>BIGINT_AS_GMP</code></td>
<td>Converts overflowed integers to <code>GMP</code> objects <sup>[2]</sup>
</td>
</tr>
<tr>
<td><code>BIGINT_AS_DEC</code></td>
<td>Converts overflowed integers to <code>Decimal\Decimal</code> objects <sup>[3]</sup>
</td>
</tr>
</tbody>
</table>
<blockquote>
<p dir="auto"><em>1. The binary MessagePack format has unsigned 64-bit as its largest integer
data type, but PHP does not support such integers, which means that
an overflow can occur during unpacking.</em></p>
<p dir="auto"><em>2. Make sure the <a href="http://php.net/manual/en/book.gmp.php" rel="nofollow">GMP</a> extension
is enabled.</em></p>
<p dir="auto"><em>3. Make sure the <a href="http://php-decimal.io/" rel="nofollow">Decimal</a> extension is enabled.</em></p>
</blockquote>
<p dir="auto">Examples:</p>
<div class="highlight highlight-text-html-php notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='$packedUint64 = "\xcf"."\xff\xff\xff\xff"."\xff\xff\xff\xff";

$unpacker = new BufferUnpacker($packedUint64);
var_dump($unpacker-&gt;unpack()); // string(20) "18446744073709551615"

$unpacker = new BufferUnpacker($packedUint64, UnpackOptions::BIGINT_AS_GMP);
var_dump($unpacker-&gt;unpack()); // object(GMP) {...}

$unpacker = new BufferUnpacker($packedUint64, UnpackOptions::BIGINT_AS_DEC);
var_dump($unpacker-&gt;unpack()); // object(Decimal\Decimal) {...}'><pre><span class="pl-s1"><span class="pl-c1">$</span>packedUint64</span> = <span class="pl-s">"\xcf"</span>.<span class="pl-s">"\xff\xff\xff\xff"</span>.<span class="pl-s">"\xff\xff\xff\xff"</span>;

<span class="pl-s1"><span class="pl-c1">$</span>unpacker</span> = <span class="pl-k">new</span> <span class="pl-v">BufferUnpacker</span>(<span class="pl-s1"><span class="pl-c1">$</span>packedUint64</span>);
<span class="pl-en">var_dump</span>(<span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">unpack</span>()); <span class="pl-c">// string(20) "18446744073709551615"</span>

<span class="pl-s1"><span class="pl-c1">$</span>unpacker</span> = <span class="pl-k">new</span> <span class="pl-v">BufferUnpacker</span>(<span class="pl-s1"><span class="pl-c1">$</span>packedUint64</span>, <span class="pl-v">UnpackOptions</span>::<span class="pl-c1">BIGINT_AS_GMP</span>);
<span class="pl-en">var_dump</span>(<span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">unpack</span>()); <span class="pl-c">// object(GMP) {...}</span>

<span class="pl-s1"><span class="pl-c1">$</span>unpacker</span> = <span class="pl-k">new</span> <span class="pl-v">BufferUnpacker</span>(<span class="pl-s1"><span class="pl-c1">$</span>packedUint64</span>, <span class="pl-v">UnpackOptions</span>::<span class="pl-c1">BIGINT_AS_DEC</span>);
<span class="pl-en">var_dump</span>(<span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">unpack</span>()); <span class="pl-c">// object(Decimal\Decimal) {...}</span></pre></div>
<h7 dir="auto">
<a id="user-content-custom-types" class="anchor" aria-hidden="true" href="#custom-types"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Custom types</h7>
<p dir="auto">In addition to the <a href="https://github.com/msgpack/msgpack/blob/master/spec.md#type-system">basic types</a>, the library
provides functionality to serialize and deserialize arbitrary types. This can be done in several ways, depending
on your use case. Let's take a look at them.</p>
<h8 dir="auto">
<a id="user-content-type-objects" class="anchor" aria-hidden="true" href="#type-objects"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Type objects</h8>
<p dir="auto">If you need to <em>serialize</em> an instance of one of your classes into one of the basic MessagePack types, the best way
to do this is to implement the <a href="/rybakit/msgpack.php/blob/master/src/CanBePacked.php">CanBePacked</a> interface in the class. A good example of such
a class is the <code>Map</code> type class that comes with the library. This type is useful when you want to explicitly specify
that a given PHP array should be packed as a MessagePack map without triggering an automatic type detection routine:</p>
<div class="highlight highlight-text-html-php notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$packer = new Packer();

$packedMap = $packer-&gt;pack(new Map([1, 2, 3]));
$packedArray = $packer-&gt;pack([1, 2, 3]);"><pre><span class="pl-s1"><span class="pl-c1">$</span>packer</span> = <span class="pl-k">new</span> <span class="pl-v">Packer</span>();

<span class="pl-s1"><span class="pl-c1">$</span>packedMap</span> = <span class="pl-s1"><span class="pl-c1">$</span>packer</span>-&gt;<span class="pl-en">pack</span>(<span class="pl-k">new</span> <span class="pl-v">Map</span>([<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>]));
<span class="pl-s1"><span class="pl-c1">$</span>packedArray</span> = <span class="pl-s1"><span class="pl-c1">$</span>packer</span>-&gt;<span class="pl-en">pack</span>([<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>]);</pre></div>
<blockquote>
<p dir="auto"><em>More type examples can be found in the <a href="/rybakit/msgpack.php/blob/master/src/Type">src/Type</a> directory.</em></p>
</blockquote>
<h8 dir="auto">
<a id="user-content-type-transformers" class="anchor" aria-hidden="true" href="#type-transformers"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Type transformers</h8>
<p dir="auto">As with type objects, type transformers are only responsible for <em>serializing</em> values. They should be
used when you need to serialize a value that does not implement the <a href="/rybakit/msgpack.php/blob/master/src/CanBePacked.php">CanBePacked</a>
interface. Examples of such values could be instances of built-in or third-party classes that you don't
own, or non-objects such as resources.</p>
<p dir="auto">A transformer class must implement the <a href="/rybakit/msgpack.php/blob/master/src/CanPack.php">CanPack</a> interface. To use a transformer,
it must first be registered in the packer. Here is an example of how to serialize PHP streams into
the MessagePack <code>bin</code> format type using one of the supplied transformers, <code>StreamTransformer</code>:</p>
<div class="highlight highlight-text-html-php notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$packer = new Packer(null, [new StreamTransformer()]);

$packedBin = $packer-&gt;pack(fopen('/path/to/file', 'r+'));"><pre><span class="pl-s1"><span class="pl-c1">$</span>packer</span> = <span class="pl-k">new</span> <span class="pl-v">Packer</span>(<span class="pl-c1">null</span>, [<span class="pl-k">new</span> <span class="pl-v">StreamTransformer</span>()]);

<span class="pl-s1"><span class="pl-c1">$</span>packedBin</span> = <span class="pl-s1"><span class="pl-c1">$</span>packer</span>-&gt;<span class="pl-en">pack</span>(<span class="pl-en">fopen</span>(<span class="pl-s">'/path/to/file'</span>, <span class="pl-s">'r+'</span>));</pre></div>
<blockquote>
<p dir="auto"><em>More type transformer examples can be found in the <a href="/rybakit/msgpack.php/blob/master/src/TypeTransformer">src/TypeTransformer</a> directory.</em></p>
</blockquote>
<h8 dir="auto">
<a id="user-content-extensions" class="anchor" aria-hidden="true" href="#extensions"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Extensions</h8>
<p dir="auto">In contrast to the cases described above, extensions are intended to handle
<a href="https://github.com/msgpack/msgpack/blob/master/spec.md#extension-types">extension types</a>
and are responsible for both <em>serialization</em> and <em>deserialization</em> of values (types).</p>
<p dir="auto">An extension class must implement the <a href="/rybakit/msgpack.php/blob/master/src/Extension.php">Extension</a> interface. To use an extension,
it must first be registered in the packer and the unpacker.</p>
<p dir="auto">The MessagePack specification divides extension types into two groups: <em>predefined</em> and <em>application-specific</em>.
Currently, there is only one predefined type in the specification, Timestamp.</p>
<h5 dir="auto">
<a id="user-content-timestamp" class="anchor" aria-hidden="true" href="#timestamp"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Timestamp</h5>
<p dir="auto">The Timestamp extension type is a <a href="https://github.com/msgpack/msgpack/blob/master/spec.md#timestamp-extension-type">predefined</a>
type. Support for this type in the library is done through the <code>TimestampExtension</code> class. This class is responsible
for handling <code>Timestamp</code> objects, which represent the number of seconds and optional adjustment in nanoseconds:</p>
<div class="highlight highlight-text-html-php notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$timestampExtension = new TimestampExtension();

$packer = new Packer();
$packer = $packer-&gt;extendWith($timestampExtension);

$unpacker = new BufferUnpacker();
$unpacker = $unpacker-&gt;extendWith($timestampExtension);

$packedTimestamp = $packer-&gt;pack(Timestamp::now());
$timestamp = $unpacker-&gt;reset($packedTimestamp)-&gt;unpack();

$seconds = $timestamp-&gt;getSeconds();
$nanoseconds = $timestamp-&gt;getNanoseconds();"><pre><span class="pl-s1"><span class="pl-c1">$</span>timestampExtension</span> = <span class="pl-k">new</span> <span class="pl-v">TimestampExtension</span>();

<span class="pl-s1"><span class="pl-c1">$</span>packer</span> = <span class="pl-k">new</span> <span class="pl-v">Packer</span>();
<span class="pl-s1"><span class="pl-c1">$</span>packer</span> = <span class="pl-s1"><span class="pl-c1">$</span>packer</span>-&gt;<span class="pl-en">extendWith</span>(<span class="pl-s1"><span class="pl-c1">$</span>timestampExtension</span>);

<span class="pl-s1"><span class="pl-c1">$</span>unpacker</span> = <span class="pl-k">new</span> <span class="pl-v">BufferUnpacker</span>();
<span class="pl-s1"><span class="pl-c1">$</span>unpacker</span> = <span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">extendWith</span>(<span class="pl-s1"><span class="pl-c1">$</span>timestampExtension</span>);

<span class="pl-s1"><span class="pl-c1">$</span>packedTimestamp</span> = <span class="pl-s1"><span class="pl-c1">$</span>packer</span>-&gt;<span class="pl-en">pack</span>(<span class="pl-v">Timestamp</span>::<span class="pl-en">now</span>());
<span class="pl-s1"><span class="pl-c1">$</span>timestamp</span> = <span class="pl-s1"><span class="pl-c1">$</span>unpacker</span>-&gt;<span class="pl-en">reset</span>(<span class="pl-s1"><span class="pl-c1">$</span>packedTimestamp</span>)-&gt;<span class="pl-en">unpack</span>();

<span class="pl-s1"><span class="pl-c1">$</span>seconds</span> = <span class="pl-s1"><span class="pl-c1">$</span>timestamp</span>-&gt;<span class="pl-en">getSeconds</span>();
<span class="pl-s1"><span class="pl-c1">$</span>nanoseconds</span> = <span class="pl-s1"><span class="pl-c1">$</span>timestamp</span>-&gt;<span class="pl-en">getNanoseconds</span>();</pre></div>
<p dir="auto">When using the <code>MessagePack</code> class, the Timestamp extension is already registered:</p>
<div class="highlight highlight-text-html-php notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$packedTimestamp = MessagePack::pack(Timestamp::now());
$timestamp = MessagePack::unpack($packedTimestamp);"><pre><span class="pl-s1"><span class="pl-c1">$</span>packedTimestamp</span> = <span class="pl-v">MessagePack</span>::<span class="pl-en">pack</span>(<span class="pl-v">Timestamp</span>::<span class="pl-en">now</span>());
<span class="pl-s1"><span class="pl-c1">$</span>timestamp</span> = <span class="pl-v">MessagePack</span>::<span class="pl-en">unpack</span>(<span class="pl-s1"><span class="pl-c1">$</span>packedTimestamp</span>);</pre></div>
<h5 dir="auto">
<a id="user-content-application-specific-extensions" class="anchor" aria-hidden="true" href="#application-specific-extensions"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Application-specific extensions</h5>
<p dir="auto">In addition, the format can be extended with your own types. For example, to make the built-in PHP <code>DateTime</code> objects
first-class citizens in your code, you can create a corresponding extension, as shown in the <a href="/rybakit/msgpack.php/blob/master/examples/MessagePack/DateTimeExtension.php">example</a>.
Please note, that custom extensions have to be registered with a unique extension ID (an integer from <code>0</code> to <code>127</code>).</p>
<blockquote>
<p dir="auto"><em>More extension examples can be found in the <a href="/rybakit/msgpack.php/blob/master/examples/MessagePack">examples/MessagePack</a> directory.</em></p>
</blockquote>
<blockquote>
<p dir="auto"><em>To learn more about how extension types can be useful, check out this
<a href="https://dev.to/tarantool/advanced-messagepack-capabilities-4735" rel="nofollow">article</a>.</em></p>
</blockquote>
<h6 dir="auto">
<a id="user-content-exceptions" class="anchor" aria-hidden="true" href="#exceptions"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Exceptions</h6>
<p dir="auto">If an error occurs during packing/unpacking, a <code>PackingFailedException</code> or an <code>UnpackingFailedException</code>
will be thrown, respectively. In addition, an <code>InsufficientDataException</code> can be thrown during unpacking.</p>
<p dir="auto">An <code>InvalidOptionException</code> will be thrown in case an invalid option (or a combination of mutually
exclusive options) is used.</p>
<h6 dir="auto">
<a id="user-content-tests" class="anchor" aria-hidden="true" href="#tests"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Tests</h6>
<p dir="auto">Run tests as follows:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="vendor/bin/phpunit"><pre>vendor/bin/phpunit</pre></div>
<p dir="auto">Also, if you already have Docker installed, you can run the tests in a docker container. First, create a container:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="./dockerfile.sh | docker build -t msgpack -"><pre>./dockerfile.sh <span class="pl-k">|</span> docker build -t msgpack -</pre></div>
<p dir="auto">The command above will create a container named <code>msgpack</code> with PHP 8.1 runtime. You may change the default runtime
by defining the <code>PHP_IMAGE</code> environment variable:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="PHP_IMAGE='php:8.0-cli' ./dockerfile.sh | docker build -t msgpack -"><pre>PHP_IMAGE=<span class="pl-s"><span class="pl-pds">'</span>php:8.0-cli<span class="pl-pds">'</span></span> ./dockerfile.sh <span class="pl-k">|</span> docker build -t msgpack -</pre></div>
<blockquote>
<p dir="auto"><em>See a list of various images <a href="https://hub.docker.com/_/php" rel="nofollow">here</a>.</em></p>
</blockquote>
<p dir="auto">Then run the unit tests:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="docker run --rm -v $PWD:/msgpack -w /msgpack msgpack"><pre>docker run --rm -v <span class="pl-smi">$PWD</span>:/msgpack -w /msgpack msgpack</pre></div>
<h8 dir="auto">
<a id="user-content-fuzzing" class="anchor" aria-hidden="true" href="#fuzzing"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Fuzzing</h8>
<p dir="auto">To ensure that the unpacking works correctly with malformed/semi-malformed data, you can use a testing technique
called <a href="https://en.wikipedia.org/wiki/Fuzzing" rel="nofollow">Fuzzing</a>. The library ships with a help file (target)
for <a href="https://github.com/nikic/PHP-Fuzzer">PHP-Fuzzer</a> and can be used as follows:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="php-fuzzer fuzz tests/fuzz_buffer_unpacker.php"><pre>php-fuzzer fuzz tests/fuzz_buffer_unpacker.php</pre></div>
<h8 dir="auto">
<a id="user-content-performance" class="anchor" aria-hidden="true" href="#performance"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Performance</h8>
<p dir="auto">To check performance, run:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="php -n -dzend_extension=opcache.so \
-dpcre.jit=1 -dopcache.enable=1 -dopcache.enable_cli=1 \
tests/bench.php"><pre>php -n -dzend_extension=opcache.so \
-dpcre.jit=1 -dopcache.enable=1 -dopcache.enable_cli=1 \
tests/bench.php</pre></div>
<details>
<summary><strong>Example output</strong></summary>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Filter: MessagePack\Tests\Perf\Filter\ListFilter
Rounds: 3
Iterations: 100000

=============================================
Test/Target            Packer  BufferUnpacker
---------------------------------------------
nil .................. 0.0030 ........ 0.0139
false ................ 0.0037 ........ 0.0144
true ................. 0.0040 ........ 0.0137
7-bit uint #1 ........ 0.0052 ........ 0.0120
7-bit uint #2 ........ 0.0059 ........ 0.0114
7-bit uint #3 ........ 0.0061 ........ 0.0119
5-bit sint #1 ........ 0.0067 ........ 0.0126
5-bit sint #2 ........ 0.0064 ........ 0.0132
5-bit sint #3 ........ 0.0066 ........ 0.0135
8-bit uint #1 ........ 0.0078 ........ 0.0200
8-bit uint #2 ........ 0.0077 ........ 0.0212
8-bit uint #3 ........ 0.0086 ........ 0.0203
16-bit uint #1 ....... 0.0111 ........ 0.0271
16-bit uint #2 ....... 0.0115 ........ 0.0260
16-bit uint #3 ....... 0.0103 ........ 0.0273
32-bit uint #1 ....... 0.0116 ........ 0.0326
32-bit uint #2 ....... 0.0118 ........ 0.0332
32-bit uint #3 ....... 0.0127 ........ 0.0325
64-bit uint #1 ....... 0.0140 ........ 0.0277
64-bit uint #2 ....... 0.0134 ........ 0.0294
64-bit uint #3 ....... 0.0134 ........ 0.0281
8-bit int #1 ......... 0.0086 ........ 0.0241
8-bit int #2 ......... 0.0089 ........ 0.0225
8-bit int #3 ......... 0.0085 ........ 0.0229
16-bit int #1 ........ 0.0118 ........ 0.0280
16-bit int #2 ........ 0.0121 ........ 0.0270
16-bit int #3 ........ 0.0109 ........ 0.0274
32-bit int #1 ........ 0.0128 ........ 0.0346
32-bit int #2 ........ 0.0118 ........ 0.0339
32-bit int #3 ........ 0.0135 ........ 0.0368
64-bit int #1 ........ 0.0138 ........ 0.0276
64-bit int #2 ........ 0.0132 ........ 0.0286
64-bit int #3 ........ 0.0137 ........ 0.0274
64-bit int #4 ........ 0.0180 ........ 0.0285
64-bit float #1 ...... 0.0134 ........ 0.0284
64-bit float #2 ...... 0.0125 ........ 0.0275
64-bit float #3 ...... 0.0126 ........ 0.0283
fix string #1 ........ 0.0035 ........ 0.0133
fix string #2 ........ 0.0094 ........ 0.0216
fix string #3 ........ 0.0094 ........ 0.0222
fix string #4 ........ 0.0091 ........ 0.0241
8-bit string #1 ...... 0.0122 ........ 0.0301
8-bit string #2 ...... 0.0118 ........ 0.0304
8-bit string #3 ...... 0.0119 ........ 0.0315
16-bit string #1 ..... 0.0150 ........ 0.0388
16-bit string #2 ..... 0.1545 ........ 0.1665
32-bit string ........ 0.1570 ........ 0.1756
wide char string #1 .. 0.0091 ........ 0.0236
wide char string #2 .. 0.0122 ........ 0.0313
8-bit binary #1 ...... 0.0100 ........ 0.0302
8-bit binary #2 ...... 0.0123 ........ 0.0324
8-bit binary #3 ...... 0.0126 ........ 0.0327
16-bit binary ........ 0.0168 ........ 0.0372
32-bit binary ........ 0.1588 ........ 0.1754
fix array #1 ......... 0.0042 ........ 0.0131
fix array #2 ......... 0.0294 ........ 0.0367
fix array #3 ......... 0.0412 ........ 0.0472
16-bit array #1 ...... 0.1378 ........ 0.1596
16-bit array #2 ........... S ............. S
32-bit array .............. S ............. S
complex array ........ 0.1865 ........ 0.2283
fix map #1 ........... 0.0725 ........ 0.1048
fix map #2 ........... 0.0319 ........ 0.0405
fix map #3 ........... 0.0356 ........ 0.0665
fix map #4 ........... 0.0465 ........ 0.0497
16-bit map #1 ........ 0.2540 ........ 0.3028
16-bit map #2 ............. S ............. S
32-bit map ................ S ............. S
complex map .......... 0.2372 ........ 0.2710
fixext 1 ............. 0.0283 ........ 0.0358
fixext 2 ............. 0.0291 ........ 0.0371
fixext 4 ............. 0.0302 ........ 0.0355
fixext 8 ............. 0.0288 ........ 0.0384
fixext 16 ............ 0.0293 ........ 0.0359
8-bit ext ............ 0.0302 ........ 0.0439
16-bit ext ........... 0.0334 ........ 0.0499
32-bit ext ........... 0.1845 ........ 0.1888
32-bit timestamp #1 .. 0.0337 ........ 0.0547
32-bit timestamp #2 .. 0.0335 ........ 0.0560
64-bit timestamp #1 .. 0.0371 ........ 0.0575
64-bit timestamp #2 .. 0.0374 ........ 0.0542
64-bit timestamp #3 .. 0.0356 ........ 0.0533
96-bit timestamp #1 .. 0.0362 ........ 0.0699
96-bit timestamp #2 .. 0.0381 ........ 0.0701
96-bit timestamp #3 .. 0.0367 ........ 0.0687
=============================================
Total                  2.7618          4.0820
Skipped                     4               4
Failed                      0               0
Ignored                     0               0"><pre class="notranslate"><code>Filter: MessagePack\Tests\Perf\Filter\ListFilter
Rounds: 3
Iterations: 100000

=============================================
Test/Target            Packer  BufferUnpacker
---------------------------------------------
nil .................. 0.0030 ........ 0.0139
false ................ 0.0037 ........ 0.0144
true ................. 0.0040 ........ 0.0137
7-bit uint #1 ........ 0.0052 ........ 0.0120
7-bit uint #2 ........ 0.0059 ........ 0.0114
7-bit uint #3 ........ 0.0061 ........ 0.0119
5-bit sint #1 ........ 0.0067 ........ 0.0126
5-bit sint #2 ........ 0.0064 ........ 0.0132
5-bit sint #3 ........ 0.0066 ........ 0.0135
8-bit uint #1 ........ 0.0078 ........ 0.0200
8-bit uint #2 ........ 0.0077 ........ 0.0212
8-bit uint #3 ........ 0.0086 ........ 0.0203
16-bit uint #1 ....... 0.0111 ........ 0.0271
16-bit uint #2 ....... 0.0115 ........ 0.0260
16-bit uint #3 ....... 0.0103 ........ 0.0273
32-bit uint #1 ....... 0.0116 ........ 0.0326
32-bit uint #2 ....... 0.0118 ........ 0.0332
32-bit uint #3 ....... 0.0127 ........ 0.0325
64-bit uint #1 ....... 0.0140 ........ 0.0277
64-bit uint #2 ....... 0.0134 ........ 0.0294
64-bit uint #3 ....... 0.0134 ........ 0.0281
8-bit int #1 ......... 0.0086 ........ 0.0241
8-bit int #2 ......... 0.0089 ........ 0.0225
8-bit int #3 ......... 0.0085 ........ 0.0229
16-bit int #1 ........ 0.0118 ........ 0.0280
16-bit int #2 ........ 0.0121 ........ 0.0270
16-bit int #3 ........ 0.0109 ........ 0.0274
32-bit int #1 ........ 0.0128 ........ 0.0346
32-bit int #2 ........ 0.0118 ........ 0.0339
32-bit int #3 ........ 0.0135 ........ 0.0368
64-bit int #1 ........ 0.0138 ........ 0.0276
64-bit int #2 ........ 0.0132 ........ 0.0286
64-bit int #3 ........ 0.0137 ........ 0.0274
64-bit int #4 ........ 0.0180 ........ 0.0285
64-bit float #1 ...... 0.0134 ........ 0.0284
64-bit float #2 ...... 0.0125 ........ 0.0275
64-bit float #3 ...... 0.0126 ........ 0.0283
fix string #1 ........ 0.0035 ........ 0.0133
fix string #2 ........ 0.0094 ........ 0.0216
fix string #3 ........ 0.0094 ........ 0.0222
fix string #4 ........ 0.0091 ........ 0.0241
8-bit string #1 ...... 0.0122 ........ 0.0301
8-bit string #2 ...... 0.0118 ........ 0.0304
8-bit string #3 ...... 0.0119 ........ 0.0315
16-bit string #1 ..... 0.0150 ........ 0.0388
16-bit string #2 ..... 0.1545 ........ 0.1665
32-bit string ........ 0.1570 ........ 0.1756
wide char string #1 .. 0.0091 ........ 0.0236
wide char string #2 .. 0.0122 ........ 0.0313
8-bit binary #1 ...... 0.0100 ........ 0.0302
8-bit binary #2 ...... 0.0123 ........ 0.0324
8-bit binary #3 ...... 0.0126 ........ 0.0327
16-bit binary ........ 0.0168 ........ 0.0372
32-bit binary ........ 0.1588 ........ 0.1754
fix array #1 ......... 0.0042 ........ 0.0131
fix array #2 ......... 0.0294 ........ 0.0367
fix array #3 ......... 0.0412 ........ 0.0472
16-bit array #1 ...... 0.1378 ........ 0.1596
16-bit array #2 ........... S ............. S
32-bit array .............. S ............. S
complex array ........ 0.1865 ........ 0.2283
fix map #1 ........... 0.0725 ........ 0.1048
fix map #2 ........... 0.0319 ........ 0.0405
fix map #3 ........... 0.0356 ........ 0.0665
fix map #4 ........... 0.0465 ........ 0.0497
16-bit map #1 ........ 0.2540 ........ 0.3028
16-bit map #2 ............. S ............. S
32-bit map ................ S ............. S
complex map .......... 0.2372 ........ 0.2710
fixext 1 ............. 0.0283 ........ 0.0358
fixext 2 ............. 0.0291 ........ 0.0371
fixext 4 ............. 0.0302 ........ 0.0355
fixext 8 ............. 0.0288 ........ 0.0384
fixext 16 ............ 0.0293 ........ 0.0359
8-bit ext ............ 0.0302 ........ 0.0439
16-bit ext ........... 0.0334 ........ 0.0499
32-bit ext ........... 0.1845 ........ 0.1888
32-bit timestamp #1 .. 0.0337 ........ 0.0547
32-bit timestamp #2 .. 0.0335 ........ 0.0560
64-bit timestamp #1 .. 0.0371 ........ 0.0575
64-bit timestamp #2 .. 0.0374 ........ 0.0542
64-bit timestamp #3 .. 0.0356 ........ 0.0533
96-bit timestamp #1 .. 0.0362 ........ 0.0699
96-bit timestamp #2 .. 0.0381 ........ 0.0701
96-bit timestamp #3 .. 0.0367 ........ 0.0687
=============================================
Total                  2.7618          4.0820
Skipped                     4               4
Failed                      0               0
Ignored                     0               0
</code></pre></div>
</details>
<p dir="auto"><em>With JIT:</em></p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="php -n -dzend_extension=opcache.so \
-dpcre.jit=1 -dopcache.jit_buffer_size=64M -dopcache.jit=tracing -dopcache.enable=1 -dopcache.enable_cli=1 \
tests/bench.php"><pre>php -n -dzend_extension=opcache.so \
-dpcre.jit=1 -dopcache.jit_buffer_size=64M -dopcache.jit=tracing -dopcache.enable=1 -dopcache.enable_cli=1 \
tests/bench.php</pre></div>
<details>
<summary><strong>Example output</strong></summary>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Filter: MessagePack\Tests\Perf\Filter\ListFilter
Rounds: 3
Iterations: 100000

=============================================
Test/Target            Packer  BufferUnpacker
---------------------------------------------
nil .................. 0.0005 ........ 0.0054
false ................ 0.0004 ........ 0.0059
true ................. 0.0004 ........ 0.0059
7-bit uint #1 ........ 0.0010 ........ 0.0047
7-bit uint #2 ........ 0.0010 ........ 0.0046
7-bit uint #3 ........ 0.0010 ........ 0.0046
5-bit sint #1 ........ 0.0025 ........ 0.0046
5-bit sint #2 ........ 0.0023 ........ 0.0046
5-bit sint #3 ........ 0.0024 ........ 0.0045
8-bit uint #1 ........ 0.0043 ........ 0.0081
8-bit uint #2 ........ 0.0043 ........ 0.0079
8-bit uint #3 ........ 0.0041 ........ 0.0080
16-bit uint #1 ....... 0.0064 ........ 0.0095
16-bit uint #2 ....... 0.0064 ........ 0.0091
16-bit uint #3 ....... 0.0064 ........ 0.0094
32-bit uint #1 ....... 0.0085 ........ 0.0114
32-bit uint #2 ....... 0.0077 ........ 0.0122
32-bit uint #3 ....... 0.0077 ........ 0.0120
64-bit uint #1 ....... 0.0085 ........ 0.0159
64-bit uint #2 ....... 0.0086 ........ 0.0157
64-bit uint #3 ....... 0.0086 ........ 0.0158
8-bit int #1 ......... 0.0042 ........ 0.0080
8-bit int #2 ......... 0.0042 ........ 0.0080
8-bit int #3 ......... 0.0042 ........ 0.0081
16-bit int #1 ........ 0.0065 ........ 0.0095
16-bit int #2 ........ 0.0065 ........ 0.0090
16-bit int #3 ........ 0.0056 ........ 0.0085
32-bit int #1 ........ 0.0067 ........ 0.0107
32-bit int #2 ........ 0.0066 ........ 0.0106
32-bit int #3 ........ 0.0063 ........ 0.0104
64-bit int #1 ........ 0.0072 ........ 0.0162
64-bit int #2 ........ 0.0073 ........ 0.0174
64-bit int #3 ........ 0.0072 ........ 0.0164
64-bit int #4 ........ 0.0077 ........ 0.0161
64-bit float #1 ...... 0.0053 ........ 0.0135
64-bit float #2 ...... 0.0053 ........ 0.0135
64-bit float #3 ...... 0.0052 ........ 0.0135
fix string #1 ....... -0.0002 ........ 0.0044
fix string #2 ........ 0.0035 ........ 0.0067
fix string #3 ........ 0.0035 ........ 0.0077
fix string #4 ........ 0.0033 ........ 0.0078
8-bit string #1 ...... 0.0059 ........ 0.0110
8-bit string #2 ...... 0.0063 ........ 0.0121
8-bit string #3 ...... 0.0064 ........ 0.0124
16-bit string #1 ..... 0.0099 ........ 0.0146
16-bit string #2 ..... 0.1522 ........ 0.1474
32-bit string ........ 0.1511 ........ 0.1483
wide char string #1 .. 0.0039 ........ 0.0084
wide char string #2 .. 0.0073 ........ 0.0123
8-bit binary #1 ...... 0.0040 ........ 0.0112
8-bit binary #2 ...... 0.0075 ........ 0.0123
8-bit binary #3 ...... 0.0077 ........ 0.0129
16-bit binary ........ 0.0096 ........ 0.0145
32-bit binary ........ 0.1535 ........ 0.1479
fix array #1 ......... 0.0008 ........ 0.0061
fix array #2 ......... 0.0121 ........ 0.0165
fix array #3 ......... 0.0193 ........ 0.0222
16-bit array #1 ...... 0.0607 ........ 0.0479
16-bit array #2 ........... S ............. S
32-bit array .............. S ............. S
complex array ........ 0.0749 ........ 0.0824
fix map #1 ........... 0.0329 ........ 0.0431
fix map #2 ........... 0.0161 ........ 0.0189
fix map #3 ........... 0.0205 ........ 0.0262
fix map #4 ........... 0.0252 ........ 0.0205
16-bit map #1 ........ 0.1016 ........ 0.0927
16-bit map #2 ............. S ............. S
32-bit map ................ S ............. S
complex map .......... 0.1096 ........ 0.1030
fixext 1 ............. 0.0157 ........ 0.0161
fixext 2 ............. 0.0175 ........ 0.0183
fixext 4 ............. 0.0156 ........ 0.0185
fixext 8 ............. 0.0163 ........ 0.0184
fixext 16 ............ 0.0164 ........ 0.0182
8-bit ext ............ 0.0158 ........ 0.0207
16-bit ext ........... 0.0203 ........ 0.0219
32-bit ext ........... 0.1614 ........ 0.1539
32-bit timestamp #1 .. 0.0195 ........ 0.0249
32-bit timestamp #2 .. 0.0188 ........ 0.0260
64-bit timestamp #1 .. 0.0207 ........ 0.0281
64-bit timestamp #2 .. 0.0212 ........ 0.0291
64-bit timestamp #3 .. 0.0207 ........ 0.0295
96-bit timestamp #1 .. 0.0222 ........ 0.0358
96-bit timestamp #2 .. 0.0228 ........ 0.0353
96-bit timestamp #3 .. 0.0210 ........ 0.0319
=============================================
Total                  1.6432          1.9674
Skipped                     4               4
Failed                      0               0
Ignored                     0               0"><pre class="notranslate"><code>Filter: MessagePack\Tests\Perf\Filter\ListFilter
Rounds: 3
Iterations: 100000

=============================================
Test/Target            Packer  BufferUnpacker
---------------------------------------------
nil .................. 0.0005 ........ 0.0054
false ................ 0.0004 ........ 0.0059
true ................. 0.0004 ........ 0.0059
7-bit uint #1 ........ 0.0010 ........ 0.0047
7-bit uint #2 ........ 0.0010 ........ 0.0046
7-bit uint #3 ........ 0.0010 ........ 0.0046
5-bit sint #1 ........ 0.0025 ........ 0.0046
5-bit sint #2 ........ 0.0023 ........ 0.0046
5-bit sint #3 ........ 0.0024 ........ 0.0045
8-bit uint #1 ........ 0.0043 ........ 0.0081
8-bit uint #2 ........ 0.0043 ........ 0.0079
8-bit uint #3 ........ 0.0041 ........ 0.0080
16-bit uint #1 ....... 0.0064 ........ 0.0095
16-bit uint #2 ....... 0.0064 ........ 0.0091
16-bit uint #3 ....... 0.0064 ........ 0.0094
32-bit uint #1 ....... 0.0085 ........ 0.0114
32-bit uint #2 ....... 0.0077 ........ 0.0122
32-bit uint #3 ....... 0.0077 ........ 0.0120
64-bit uint #1 ....... 0.0085 ........ 0.0159
64-bit uint #2 ....... 0.0086 ........ 0.0157
64-bit uint #3 ....... 0.0086 ........ 0.0158
8-bit int #1 ......... 0.0042 ........ 0.0080
8-bit int #2 ......... 0.0042 ........ 0.0080
8-bit int #3 ......... 0.0042 ........ 0.0081
16-bit int #1 ........ 0.0065 ........ 0.0095
16-bit int #2 ........ 0.0065 ........ 0.0090
16-bit int #3 ........ 0.0056 ........ 0.0085
32-bit int #1 ........ 0.0067 ........ 0.0107
32-bit int #2 ........ 0.0066 ........ 0.0106
32-bit int #3 ........ 0.0063 ........ 0.0104
64-bit int #1 ........ 0.0072 ........ 0.0162
64-bit int #2 ........ 0.0073 ........ 0.0174
64-bit int #3 ........ 0.0072 ........ 0.0164
64-bit int #4 ........ 0.0077 ........ 0.0161
64-bit float #1 ...... 0.0053 ........ 0.0135
64-bit float #2 ...... 0.0053 ........ 0.0135
64-bit float #3 ...... 0.0052 ........ 0.0135
fix string #1 ....... -0.0002 ........ 0.0044
fix string #2 ........ 0.0035 ........ 0.0067
fix string #3 ........ 0.0035 ........ 0.0077
fix string #4 ........ 0.0033 ........ 0.0078
8-bit string #1 ...... 0.0059 ........ 0.0110
8-bit string #2 ...... 0.0063 ........ 0.0121
8-bit string #3 ...... 0.0064 ........ 0.0124
16-bit string #1 ..... 0.0099 ........ 0.0146
16-bit string #2 ..... 0.1522 ........ 0.1474
32-bit string ........ 0.1511 ........ 0.1483
wide char string #1 .. 0.0039 ........ 0.0084
wide char string #2 .. 0.0073 ........ 0.0123
8-bit binary #1 ...... 0.0040 ........ 0.0112
8-bit binary #2 ...... 0.0075 ........ 0.0123
8-bit binary #3 ...... 0.0077 ........ 0.0129
16-bit binary ........ 0.0096 ........ 0.0145
32-bit binary ........ 0.1535 ........ 0.1479
fix array #1 ......... 0.0008 ........ 0.0061
fix array #2 ......... 0.0121 ........ 0.0165
fix array #3 ......... 0.0193 ........ 0.0222
16-bit array #1 ...... 0.0607 ........ 0.0479
16-bit array #2 ........... S ............. S
32-bit array .............. S ............. S
complex array ........ 0.0749 ........ 0.0824
fix map #1 ........... 0.0329 ........ 0.0431
fix map #2 ........... 0.0161 ........ 0.0189
fix map #3 ........... 0.0205 ........ 0.0262
fix map #4 ........... 0.0252 ........ 0.0205
16-bit map #1 ........ 0.1016 ........ 0.0927
16-bit map #2 ............. S ............. S
32-bit map ................ S ............. S
complex map .......... 0.1096 ........ 0.1030
fixext 1 ............. 0.0157 ........ 0.0161
fixext 2 ............. 0.0175 ........ 0.0183
fixext 4 ............. 0.0156 ........ 0.0185
fixext 8 ............. 0.0163 ........ 0.0184
fixext 16 ............ 0.0164 ........ 0.0182
8-bit ext ............ 0.0158 ........ 0.0207
16-bit ext ........... 0.0203 ........ 0.0219
32-bit ext ........... 0.1614 ........ 0.1539
32-bit timestamp #1 .. 0.0195 ........ 0.0249
32-bit timestamp #2 .. 0.0188 ........ 0.0260
64-bit timestamp #1 .. 0.0207 ........ 0.0281
64-bit timestamp #2 .. 0.0212 ........ 0.0291
64-bit timestamp #3 .. 0.0207 ........ 0.0295
96-bit timestamp #1 .. 0.0222 ........ 0.0358
96-bit timestamp #2 .. 0.0228 ........ 0.0353
96-bit timestamp #3 .. 0.0210 ........ 0.0319
=============================================
Total                  1.6432          1.9674
Skipped                     4               4
Failed                      0               0
Ignored                     0               0
</code></pre></div>
</details>
<p dir="auto">You may change default benchmark settings by defining the following environment
variables:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>MP_BENCH_TARGETS</td>
<td>
<code>pure_p,pure_u</code>, <em>see a <a href="/rybakit/msgpack.php/blob/master/tests/bench.php#L83">list</a> of available targets</em>
</td>
</tr>
<tr>
<td>MP_BENCH_ITERATIONS</td>
<td><code>100_000</code></td>
</tr>
<tr>
<td>MP_BENCH_DURATION</td>
<td><em>not set</em></td>
</tr>
<tr>
<td>MP_BENCH_ROUNDS</td>
<td><code>3</code></td>
</tr>
<tr>
<td>MP_BENCH_TESTS</td>
<td>
<code>-@slow</code>, <em>see a <a href="/rybakit/msgpack.php/blob/master/tests/DataProvider.php">list</a> of available tests</em>
</td>
</tr>
</tbody>
</table>
<p dir="auto">For example:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="export MP_BENCH_TARGETS=pure_p
export MP_BENCH_ITERATIONS=1000000
export MP_BENCH_ROUNDS=5
# a comma separated list of test names
export MP_BENCH_TESTS='complex array, complex map'
# or a group name
# export MP_BENCH_TESTS='-@slow' // @pecl_comp
# or a regexp
# export MP_BENCH_TESTS='/complex (array|map)/'"><pre><span class="pl-k">export</span> MP_BENCH_TARGETS=pure_p
<span class="pl-k">export</span> MP_BENCH_ITERATIONS=1000000
<span class="pl-k">export</span> MP_BENCH_ROUNDS=5
<span class="pl-c"><span class="pl-c">#</span> a comma separated list of test names</span>
<span class="pl-k">export</span> MP_BENCH_TESTS=<span class="pl-s"><span class="pl-pds">'</span>complex array, complex map<span class="pl-pds">'</span></span>
<span class="pl-c"><span class="pl-c">#</span> or a group name</span>
<span class="pl-c"><span class="pl-c">#</span> export MP_BENCH_TESTS='-@slow' // @pecl_comp</span>
<span class="pl-c"><span class="pl-c">#</span> or a regexp</span>
<span class="pl-c"><span class="pl-c">#</span> export MP_BENCH_TESTS='/complex (array|map)/'</span></pre></div>
<p dir="auto">Another example, benchmarking both the library and the <a href="https://pecl.php.net/package/msgpack" rel="nofollow">PECL extension</a>:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="MP_BENCH_TARGETS=pure_p,pure_u,pecl_p,pecl_u \
php -n -dextension=msgpack.so -dzend_extension=opcache.so \
-dpcre.jit=1 -dopcache.enable=1 -dopcache.enable_cli=1 \
tests/bench.php"><pre>MP_BENCH_TARGETS=pure_p,pure_u,pecl_p,pecl_u \
php -n -dextension=msgpack.so -dzend_extension=opcache.so \
-dpcre.jit=1 -dopcache.enable=1 -dopcache.enable_cli=1 \
tests/bench.php</pre></div>
<details>
<summary><strong>Example output</strong></summary>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Filter: MessagePack\Tests\Perf\Filter\ListFilter
Rounds: 3
Iterations: 100000

===========================================================================
Test/Target            Packer  BufferUnpacker  msgpack_pack  msgpack_unpack
---------------------------------------------------------------------------
nil .................. 0.0031 ........ 0.0141 ...... 0.0055 ........ 0.0064
false ................ 0.0039 ........ 0.0154 ...... 0.0056 ........ 0.0053
true ................. 0.0038 ........ 0.0139 ...... 0.0056 ........ 0.0044
7-bit uint #1 ........ 0.0061 ........ 0.0110 ...... 0.0059 ........ 0.0046
7-bit uint #2 ........ 0.0065 ........ 0.0119 ...... 0.0042 ........ 0.0029
7-bit uint #3 ........ 0.0054 ........ 0.0117 ...... 0.0045 ........ 0.0025
5-bit sint #1 ........ 0.0047 ........ 0.0103 ...... 0.0038 ........ 0.0022
5-bit sint #2 ........ 0.0048 ........ 0.0117 ...... 0.0038 ........ 0.0022
5-bit sint #3 ........ 0.0046 ........ 0.0102 ...... 0.0038 ........ 0.0023
8-bit uint #1 ........ 0.0063 ........ 0.0174 ...... 0.0039 ........ 0.0031
8-bit uint #2 ........ 0.0063 ........ 0.0167 ...... 0.0040 ........ 0.0029
8-bit uint #3 ........ 0.0063 ........ 0.0168 ...... 0.0039 ........ 0.0030
16-bit uint #1 ....... 0.0092 ........ 0.0222 ...... 0.0049 ........ 0.0030
16-bit uint #2 ....... 0.0096 ........ 0.0227 ...... 0.0042 ........ 0.0046
16-bit uint #3 ....... 0.0123 ........ 0.0274 ...... 0.0059 ........ 0.0051
32-bit uint #1 ....... 0.0136 ........ 0.0331 ...... 0.0060 ........ 0.0048
32-bit uint #2 ....... 0.0130 ........ 0.0336 ...... 0.0070 ........ 0.0048
32-bit uint #3 ....... 0.0127 ........ 0.0329 ...... 0.0051 ........ 0.0048
64-bit uint #1 ....... 0.0126 ........ 0.0268 ...... 0.0055 ........ 0.0049
64-bit uint #2 ....... 0.0135 ........ 0.0281 ...... 0.0052 ........ 0.0046
64-bit uint #3 ....... 0.0131 ........ 0.0274 ...... 0.0069 ........ 0.0044
8-bit int #1 ......... 0.0077 ........ 0.0236 ...... 0.0058 ........ 0.0044
8-bit int #2 ......... 0.0087 ........ 0.0244 ...... 0.0058 ........ 0.0048
8-bit int #3 ......... 0.0084 ........ 0.0241 ...... 0.0055 ........ 0.0049
16-bit int #1 ........ 0.0112 ........ 0.0271 ...... 0.0048 ........ 0.0045
16-bit int #2 ........ 0.0124 ........ 0.0292 ...... 0.0057 ........ 0.0049
16-bit int #3 ........ 0.0118 ........ 0.0270 ...... 0.0058 ........ 0.0050
32-bit int #1 ........ 0.0137 ........ 0.0366 ...... 0.0058 ........ 0.0051
32-bit int #2 ........ 0.0133 ........ 0.0366 ...... 0.0056 ........ 0.0049
32-bit int #3 ........ 0.0129 ........ 0.0350 ...... 0.0052 ........ 0.0048
64-bit int #1 ........ 0.0145 ........ 0.0254 ...... 0.0034 ........ 0.0025
64-bit int #2 ........ 0.0097 ........ 0.0214 ...... 0.0034 ........ 0.0025
64-bit int #3 ........ 0.0096 ........ 0.0287 ...... 0.0059 ........ 0.0050
64-bit int #4 ........ 0.0143 ........ 0.0277 ...... 0.0059 ........ 0.0046
64-bit float #1 ...... 0.0134 ........ 0.0281 ...... 0.0057 ........ 0.0052
64-bit float #2 ...... 0.0141 ........ 0.0281 ...... 0.0057 ........ 0.0050
64-bit float #3 ...... 0.0144 ........ 0.0282 ...... 0.0057 ........ 0.0050
fix string #1 ........ 0.0036 ........ 0.0143 ...... 0.0066 ........ 0.0053
fix string #2 ........ 0.0107 ........ 0.0222 ...... 0.0065 ........ 0.0068
fix string #3 ........ 0.0116 ........ 0.0245 ...... 0.0063 ........ 0.0069
fix string #4 ........ 0.0105 ........ 0.0253 ...... 0.0083 ........ 0.0077
8-bit string #1 ...... 0.0126 ........ 0.0318 ...... 0.0075 ........ 0.0088
8-bit string #2 ...... 0.0121 ........ 0.0295 ...... 0.0076 ........ 0.0086
8-bit string #3 ...... 0.0125 ........ 0.0293 ...... 0.0130 ........ 0.0093
16-bit string #1 ..... 0.0159 ........ 0.0368 ...... 0.0117 ........ 0.0086
16-bit string #2 ..... 0.1547 ........ 0.1686 ...... 0.1516 ........ 0.1373
32-bit string ........ 0.1558 ........ 0.1729 ...... 0.1511 ........ 0.1396
wide char string #1 .. 0.0098 ........ 0.0237 ...... 0.0066 ........ 0.0065
wide char string #2 .. 0.0128 ........ 0.0291 ...... 0.0061 ........ 0.0082
8-bit binary #1 ........... I ............. I ........... F ............. I
8-bit binary #2 ........... I ............. I ........... F ............. I
8-bit binary #3 ........... I ............. I ........... F ............. I
16-bit binary ............. I ............. I ........... F ............. I
32-bit binary ............. I ............. I ........... F ............. I
fix array #1 ......... 0.0040 ........ 0.0129 ...... 0.0120 ........ 0.0058
fix array #2 ......... 0.0279 ........ 0.0390 ...... 0.0143 ........ 0.0165
fix array #3 ......... 0.0415 ........ 0.0463 ...... 0.0162 ........ 0.0187
16-bit array #1 ...... 0.1349 ........ 0.1628 ...... 0.0334 ........ 0.0341
16-bit array #2 ........... S ............. S ........... S ............. S
32-bit array .............. S ............. S ........... S ............. S
complex array ............. I ............. I ........... F ............. F
fix map #1 ................ I ............. I ........... F ............. I
fix map #2 ........... 0.0345 ........ 0.0391 ...... 0.0143 ........ 0.0168
fix map #3 ................ I ............. I ........... F ............. I
fix map #4 ........... 0.0459 ........ 0.0473 ...... 0.0151 ........ 0.0163
16-bit map #1 ........ 0.2518 ........ 0.2962 ...... 0.0400 ........ 0.0490
16-bit map #2 ............. S ............. S ........... S ............. S
32-bit map ................ S ............. S ........... S ............. S
complex map .......... 0.2380 ........ 0.2682 ...... 0.0545 ........ 0.0579
fixext 1 .................. I ............. I ........... F ............. F
fixext 2 .................. I ............. I ........... F ............. F
fixext 4 .................. I ............. I ........... F ............. F
fixext 8 .................. I ............. I ........... F ............. F
fixext 16 ................. I ............. I ........... F ............. F
8-bit ext ................. I ............. I ........... F ............. F
16-bit ext ................ I ............. I ........... F ............. F
32-bit ext ................ I ............. I ........... F ............. F
32-bit timestamp #1 ....... I ............. I ........... F ............. F
32-bit timestamp #2 ....... I ............. I ........... F ............. F
64-bit timestamp #1 ....... I ............. I ........... F ............. F
64-bit timestamp #2 ....... I ............. I ........... F ............. F
64-bit timestamp #3 ....... I ............. I ........... F ............. F
96-bit timestamp #1 ....... I ............. I ........... F ............. F
96-bit timestamp #2 ....... I ............. I ........... F ............. F
96-bit timestamp #3 ....... I ............. I ........... F ............. F
===========================================================================
Total                  1.5625          2.3866        0.7735          0.7243
Skipped                     4               4             4               4
Failed                      0               0            24              17
Ignored                    24              24             0               7"><pre class="notranslate"><code>Filter: MessagePack\Tests\Perf\Filter\ListFilter
Rounds: 3
Iterations: 100000

===========================================================================
Test/Target            Packer  BufferUnpacker  msgpack_pack  msgpack_unpack
---------------------------------------------------------------------------
nil .................. 0.0031 ........ 0.0141 ...... 0.0055 ........ 0.0064
false ................ 0.0039 ........ 0.0154 ...... 0.0056 ........ 0.0053
true ................. 0.0038 ........ 0.0139 ...... 0.0056 ........ 0.0044
7-bit uint #1 ........ 0.0061 ........ 0.0110 ...... 0.0059 ........ 0.0046
7-bit uint #2 ........ 0.0065 ........ 0.0119 ...... 0.0042 ........ 0.0029
7-bit uint #3 ........ 0.0054 ........ 0.0117 ...... 0.0045 ........ 0.0025
5-bit sint #1 ........ 0.0047 ........ 0.0103 ...... 0.0038 ........ 0.0022
5-bit sint #2 ........ 0.0048 ........ 0.0117 ...... 0.0038 ........ 0.0022
5-bit sint #3 ........ 0.0046 ........ 0.0102 ...... 0.0038 ........ 0.0023
8-bit uint #1 ........ 0.0063 ........ 0.0174 ...... 0.0039 ........ 0.0031
8-bit uint #2 ........ 0.0063 ........ 0.0167 ...... 0.0040 ........ 0.0029
8-bit uint #3 ........ 0.0063 ........ 0.0168 ...... 0.0039 ........ 0.0030
16-bit uint #1 ....... 0.0092 ........ 0.0222 ...... 0.0049 ........ 0.0030
16-bit uint #2 ....... 0.0096 ........ 0.0227 ...... 0.0042 ........ 0.0046
16-bit uint #3 ....... 0.0123 ........ 0.0274 ...... 0.0059 ........ 0.0051
32-bit uint #1 ....... 0.0136 ........ 0.0331 ...... 0.0060 ........ 0.0048
32-bit uint #2 ....... 0.0130 ........ 0.0336 ...... 0.0070 ........ 0.0048
32-bit uint #3 ....... 0.0127 ........ 0.0329 ...... 0.0051 ........ 0.0048
64-bit uint #1 ....... 0.0126 ........ 0.0268 ...... 0.0055 ........ 0.0049
64-bit uint #2 ....... 0.0135 ........ 0.0281 ...... 0.0052 ........ 0.0046
64-bit uint #3 ....... 0.0131 ........ 0.0274 ...... 0.0069 ........ 0.0044
8-bit int #1 ......... 0.0077 ........ 0.0236 ...... 0.0058 ........ 0.0044
8-bit int #2 ......... 0.0087 ........ 0.0244 ...... 0.0058 ........ 0.0048
8-bit int #3 ......... 0.0084 ........ 0.0241 ...... 0.0055 ........ 0.0049
16-bit int #1 ........ 0.0112 ........ 0.0271 ...... 0.0048 ........ 0.0045
16-bit int #2 ........ 0.0124 ........ 0.0292 ...... 0.0057 ........ 0.0049
16-bit int #3 ........ 0.0118 ........ 0.0270 ...... 0.0058 ........ 0.0050
32-bit int #1 ........ 0.0137 ........ 0.0366 ...... 0.0058 ........ 0.0051
32-bit int #2 ........ 0.0133 ........ 0.0366 ...... 0.0056 ........ 0.0049
32-bit int #3 ........ 0.0129 ........ 0.0350 ...... 0.0052 ........ 0.0048
64-bit int #1 ........ 0.0145 ........ 0.0254 ...... 0.0034 ........ 0.0025
64-bit int #2 ........ 0.0097 ........ 0.0214 ...... 0.0034 ........ 0.0025
64-bit int #3 ........ 0.0096 ........ 0.0287 ...... 0.0059 ........ 0.0050
64-bit int #4 ........ 0.0143 ........ 0.0277 ...... 0.0059 ........ 0.0046
64-bit float #1 ...... 0.0134 ........ 0.0281 ...... 0.0057 ........ 0.0052
64-bit float #2 ...... 0.0141 ........ 0.0281 ...... 0.0057 ........ 0.0050
64-bit float #3 ...... 0.0144 ........ 0.0282 ...... 0.0057 ........ 0.0050
fix string #1 ........ 0.0036 ........ 0.0143 ...... 0.0066 ........ 0.0053
fix string #2 ........ 0.0107 ........ 0.0222 ...... 0.0065 ........ 0.0068
fix string #3 ........ 0.0116 ........ 0.0245 ...... 0.0063 ........ 0.0069
fix string #4 ........ 0.0105 ........ 0.0253 ...... 0.0083 ........ 0.0077
8-bit string #1 ...... 0.0126 ........ 0.0318 ...... 0.0075 ........ 0.0088
8-bit string #2 ...... 0.0121 ........ 0.0295 ...... 0.0076 ........ 0.0086
8-bit string #3 ...... 0.0125 ........ 0.0293 ...... 0.0130 ........ 0.0093
16-bit string #1 ..... 0.0159 ........ 0.0368 ...... 0.0117 ........ 0.0086
16-bit string #2 ..... 0.1547 ........ 0.1686 ...... 0.1516 ........ 0.1373
32-bit string ........ 0.1558 ........ 0.1729 ...... 0.1511 ........ 0.1396
wide char string #1 .. 0.0098 ........ 0.0237 ...... 0.0066 ........ 0.0065
wide char string #2 .. 0.0128 ........ 0.0291 ...... 0.0061 ........ 0.0082
8-bit binary #1 ........... I ............. I ........... F ............. I
8-bit binary #2 ........... I ............. I ........... F ............. I
8-bit binary #3 ........... I ............. I ........... F ............. I
16-bit binary ............. I ............. I ........... F ............. I
32-bit binary ............. I ............. I ........... F ............. I
fix array #1 ......... 0.0040 ........ 0.0129 ...... 0.0120 ........ 0.0058
fix array #2 ......... 0.0279 ........ 0.0390 ...... 0.0143 ........ 0.0165
fix array #3 ......... 0.0415 ........ 0.0463 ...... 0.0162 ........ 0.0187
16-bit array #1 ...... 0.1349 ........ 0.1628 ...... 0.0334 ........ 0.0341
16-bit array #2 ........... S ............. S ........... S ............. S
32-bit array .............. S ............. S ........... S ............. S
complex array ............. I ............. I ........... F ............. F
fix map #1 ................ I ............. I ........... F ............. I
fix map #2 ........... 0.0345 ........ 0.0391 ...... 0.0143 ........ 0.0168
fix map #3 ................ I ............. I ........... F ............. I
fix map #4 ........... 0.0459 ........ 0.0473 ...... 0.0151 ........ 0.0163
16-bit map #1 ........ 0.2518 ........ 0.2962 ...... 0.0400 ........ 0.0490
16-bit map #2 ............. S ............. S ........... S ............. S
32-bit map ................ S ............. S ........... S ............. S
complex map .......... 0.2380 ........ 0.2682 ...... 0.0545 ........ 0.0579
fixext 1 .................. I ............. I ........... F ............. F
fixext 2 .................. I ............. I ........... F ............. F
fixext 4 .................. I ............. I ........... F ............. F
fixext 8 .................. I ............. I ........... F ............. F
fixext 16 ................. I ............. I ........... F ............. F
8-bit ext ................. I ............. I ........... F ............. F
16-bit ext ................ I ............. I ........... F ............. F
32-bit ext ................ I ............. I ........... F ............. F
32-bit timestamp #1 ....... I ............. I ........... F ............. F
32-bit timestamp #2 ....... I ............. I ........... F ............. F
64-bit timestamp #1 ....... I ............. I ........... F ............. F
64-bit timestamp #2 ....... I ............. I ........... F ............. F
64-bit timestamp #3 ....... I ............. I ........... F ............. F
96-bit timestamp #1 ....... I ............. I ........... F ............. F
96-bit timestamp #2 ....... I ............. I ........... F ............. F
96-bit timestamp #3 ....... I ............. I ........... F ............. F
===========================================================================
Total                  1.5625          2.3866        0.7735          0.7243
Skipped                     4               4             4               4
Failed                      0               0            24              17
Ignored                    24              24             0               7
</code></pre></div>
</details>
<p dir="auto"><em>With JIT:</em></p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="MP_BENCH_TARGETS=pure_p,pure_u,pecl_p,pecl_u \
php -n -dextension=msgpack.so -dzend_extension=opcache.so \
-dpcre.jit=1 -dopcache.jit_buffer_size=64M -dopcache.jit=tracing -dopcache.enable=1 -dopcache.enable_cli=1 \
tests/bench.php"><pre>MP_BENCH_TARGETS=pure_p,pure_u,pecl_p,pecl_u \
php -n -dextension=msgpack.so -dzend_extension=opcache.so \
-dpcre.jit=1 -dopcache.jit_buffer_size=64M -dopcache.jit=tracing -dopcache.enable=1 -dopcache.enable_cli=1 \
tests/bench.php</pre></div>
<details>
<summary><strong>Example output</strong></summary>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Filter: MessagePack\Tests\Perf\Filter\ListFilter
Rounds: 3
Iterations: 100000

===========================================================================
Test/Target            Packer  BufferUnpacker  msgpack_pack  msgpack_unpack
---------------------------------------------------------------------------
nil .................. 0.0001 ........ 0.0052 ...... 0.0053 ........ 0.0042
false ................ 0.0007 ........ 0.0060 ...... 0.0057 ........ 0.0043
true ................. 0.0008 ........ 0.0060 ...... 0.0056 ........ 0.0041
7-bit uint #1 ........ 0.0031 ........ 0.0046 ...... 0.0062 ........ 0.0041
7-bit uint #2 ........ 0.0021 ........ 0.0043 ...... 0.0062 ........ 0.0041
7-bit uint #3 ........ 0.0022 ........ 0.0044 ...... 0.0061 ........ 0.0040
5-bit sint #1 ........ 0.0030 ........ 0.0048 ...... 0.0062 ........ 0.0040
5-bit sint #2 ........ 0.0032 ........ 0.0046 ...... 0.0062 ........ 0.0040
5-bit sint #3 ........ 0.0031 ........ 0.0046 ...... 0.0062 ........ 0.0040
8-bit uint #1 ........ 0.0054 ........ 0.0079 ...... 0.0062 ........ 0.0050
8-bit uint #2 ........ 0.0051 ........ 0.0079 ...... 0.0064 ........ 0.0044
8-bit uint #3 ........ 0.0051 ........ 0.0082 ...... 0.0062 ........ 0.0044
16-bit uint #1 ....... 0.0077 ........ 0.0094 ...... 0.0065 ........ 0.0045
16-bit uint #2 ....... 0.0077 ........ 0.0094 ...... 0.0063 ........ 0.0045
16-bit uint #3 ....... 0.0077 ........ 0.0095 ...... 0.0064 ........ 0.0047
32-bit uint #1 ....... 0.0088 ........ 0.0119 ...... 0.0063 ........ 0.0043
32-bit uint #2 ....... 0.0089 ........ 0.0117 ...... 0.0062 ........ 0.0039
32-bit uint #3 ....... 0.0089 ........ 0.0118 ...... 0.0063 ........ 0.0044
64-bit uint #1 ....... 0.0097 ........ 0.0155 ...... 0.0063 ........ 0.0045
64-bit uint #2 ....... 0.0095 ........ 0.0153 ...... 0.0061 ........ 0.0045
64-bit uint #3 ....... 0.0096 ........ 0.0156 ...... 0.0063 ........ 0.0047
8-bit int #1 ......... 0.0053 ........ 0.0083 ...... 0.0062 ........ 0.0044
8-bit int #2 ......... 0.0052 ........ 0.0080 ...... 0.0062 ........ 0.0044
8-bit int #3 ......... 0.0052 ........ 0.0080 ...... 0.0062 ........ 0.0043
16-bit int #1 ........ 0.0089 ........ 0.0097 ...... 0.0069 ........ 0.0046
16-bit int #2 ........ 0.0075 ........ 0.0093 ...... 0.0063 ........ 0.0043
16-bit int #3 ........ 0.0075 ........ 0.0094 ...... 0.0062 ........ 0.0046
32-bit int #1 ........ 0.0086 ........ 0.0122 ...... 0.0063 ........ 0.0044
32-bit int #2 ........ 0.0087 ........ 0.0120 ...... 0.0066 ........ 0.0046
32-bit int #3 ........ 0.0086 ........ 0.0121 ...... 0.0060 ........ 0.0044
64-bit int #1 ........ 0.0096 ........ 0.0149 ...... 0.0060 ........ 0.0045
64-bit int #2 ........ 0.0096 ........ 0.0157 ...... 0.0062 ........ 0.0044
64-bit int #3 ........ 0.0096 ........ 0.0160 ...... 0.0063 ........ 0.0046
64-bit int #4 ........ 0.0097 ........ 0.0157 ...... 0.0061 ........ 0.0044
64-bit float #1 ...... 0.0079 ........ 0.0153 ...... 0.0056 ........ 0.0044
64-bit float #2 ...... 0.0079 ........ 0.0152 ...... 0.0057 ........ 0.0045
64-bit float #3 ...... 0.0079 ........ 0.0155 ...... 0.0057 ........ 0.0044
fix string #1 ........ 0.0010 ........ 0.0045 ...... 0.0071 ........ 0.0044
fix string #2 ........ 0.0048 ........ 0.0075 ...... 0.0070 ........ 0.0060
fix string #3 ........ 0.0048 ........ 0.0086 ...... 0.0068 ........ 0.0060
fix string #4 ........ 0.0050 ........ 0.0088 ...... 0.0070 ........ 0.0059
8-bit string #1 ...... 0.0081 ........ 0.0129 ...... 0.0069 ........ 0.0062
8-bit string #2 ...... 0.0086 ........ 0.0128 ...... 0.0069 ........ 0.0065
8-bit string #3 ...... 0.0086 ........ 0.0126 ...... 0.0115 ........ 0.0065
16-bit string #1 ..... 0.0105 ........ 0.0137 ...... 0.0128 ........ 0.0068
16-bit string #2 ..... 0.1510 ........ 0.1486 ...... 0.1526 ........ 0.1391
32-bit string ........ 0.1517 ........ 0.1475 ...... 0.1504 ........ 0.1370
wide char string #1 .. 0.0044 ........ 0.0085 ...... 0.0067 ........ 0.0057
wide char string #2 .. 0.0081 ........ 0.0125 ...... 0.0069 ........ 0.0063
8-bit binary #1 ........... I ............. I ........... F ............. I
8-bit binary #2 ........... I ............. I ........... F ............. I
8-bit binary #3 ........... I ............. I ........... F ............. I
16-bit binary ............. I ............. I ........... F ............. I
32-bit binary ............. I ............. I ........... F ............. I
fix array #1 ......... 0.0014 ........ 0.0059 ...... 0.0132 ........ 0.0055
fix array #2 ......... 0.0146 ........ 0.0156 ...... 0.0155 ........ 0.0148
fix array #3 ......... 0.0211 ........ 0.0229 ...... 0.0179 ........ 0.0180
16-bit array #1 ...... 0.0673 ........ 0.0498 ...... 0.0343 ........ 0.0388
16-bit array #2 ........... S ............. S ........... S ............. S
32-bit array .............. S ............. S ........... S ............. S
complex array ............. I ............. I ........... F ............. F
fix map #1 ................ I ............. I ........... F ............. I
fix map #2 ........... 0.0148 ........ 0.0180 ...... 0.0156 ........ 0.0179
fix map #3 ................ I ............. I ........... F ............. I
fix map #4 ........... 0.0252 ........ 0.0201 ...... 0.0214 ........ 0.0167
16-bit map #1 ........ 0.1027 ........ 0.0836 ...... 0.0388 ........ 0.0510
16-bit map #2 ............. S ............. S ........... S ............. S
32-bit map ................ S ............. S ........... S ............. S
complex map .......... 0.1104 ........ 0.1010 ...... 0.0556 ........ 0.0602
fixext 1 .................. I ............. I ........... F ............. F
fixext 2 .................. I ............. I ........... F ............. F
fixext 4 .................. I ............. I ........... F ............. F
fixext 8 .................. I ............. I ........... F ............. F
fixext 16 ................. I ............. I ........... F ............. F
8-bit ext ................. I ............. I ........... F ............. F
16-bit ext ................ I ............. I ........... F ............. F
32-bit ext ................ I ............. I ........... F ............. F
32-bit timestamp #1 ....... I ............. I ........... F ............. F
32-bit timestamp #2 ....... I ............. I ........... F ............. F
64-bit timestamp #1 ....... I ............. I ........... F ............. F
64-bit timestamp #2 ....... I ............. I ........... F ............. F
64-bit timestamp #3 ....... I ............. I ........... F ............. F
96-bit timestamp #1 ....... I ............. I ........... F ............. F
96-bit timestamp #2 ....... I ............. I ........... F ............. F
96-bit timestamp #3 ....... I ............. I ........... F ............. F
===========================================================================
Total                  0.9642          1.0909        0.8224          0.7213
Skipped                     4               4             4               4
Failed                      0               0            24              17
Ignored                    24              24             0               7"><pre class="notranslate"><code>Filter: MessagePack\Tests\Perf\Filter\ListFilter
Rounds: 3
Iterations: 100000

===========================================================================
Test/Target            Packer  BufferUnpacker  msgpack_pack  msgpack_unpack
---------------------------------------------------------------------------
nil .................. 0.0001 ........ 0.0052 ...... 0.0053 ........ 0.0042
false ................ 0.0007 ........ 0.0060 ...... 0.0057 ........ 0.0043
true ................. 0.0008 ........ 0.0060 ...... 0.0056 ........ 0.0041
7-bit uint #1 ........ 0.0031 ........ 0.0046 ...... 0.0062 ........ 0.0041
7-bit uint #2 ........ 0.0021 ........ 0.0043 ...... 0.0062 ........ 0.0041
7-bit uint #3 ........ 0.0022 ........ 0.0044 ...... 0.0061 ........ 0.0040
5-bit sint #1 ........ 0.0030 ........ 0.0048 ...... 0.0062 ........ 0.0040
5-bit sint #2 ........ 0.0032 ........ 0.0046 ...... 0.0062 ........ 0.0040
5-bit sint #3 ........ 0.0031 ........ 0.0046 ...... 0.0062 ........ 0.0040
8-bit uint #1 ........ 0.0054 ........ 0.0079 ...... 0.0062 ........ 0.0050
8-bit uint #2 ........ 0.0051 ........ 0.0079 ...... 0.0064 ........ 0.0044
8-bit uint #3 ........ 0.0051 ........ 0.0082 ...... 0.0062 ........ 0.0044
16-bit uint #1 ....... 0.0077 ........ 0.0094 ...... 0.0065 ........ 0.0045
16-bit uint #2 ....... 0.0077 ........ 0.0094 ...... 0.0063 ........ 0.0045
16-bit uint #3 ....... 0.0077 ........ 0.0095 ...... 0.0064 ........ 0.0047
32-bit uint #1 ....... 0.0088 ........ 0.0119 ...... 0.0063 ........ 0.0043
32-bit uint #2 ....... 0.0089 ........ 0.0117 ...... 0.0062 ........ 0.0039
32-bit uint #3 ....... 0.0089 ........ 0.0118 ...... 0.0063 ........ 0.0044
64-bit uint #1 ....... 0.0097 ........ 0.0155 ...... 0.0063 ........ 0.0045
64-bit uint #2 ....... 0.0095 ........ 0.0153 ...... 0.0061 ........ 0.0045
64-bit uint #3 ....... 0.0096 ........ 0.0156 ...... 0.0063 ........ 0.0047
8-bit int #1 ......... 0.0053 ........ 0.0083 ...... 0.0062 ........ 0.0044
8-bit int #2 ......... 0.0052 ........ 0.0080 ...... 0.0062 ........ 0.0044
8-bit int #3 ......... 0.0052 ........ 0.0080 ...... 0.0062 ........ 0.0043
16-bit int #1 ........ 0.0089 ........ 0.0097 ...... 0.0069 ........ 0.0046
16-bit int #2 ........ 0.0075 ........ 0.0093 ...... 0.0063 ........ 0.0043
16-bit int #3 ........ 0.0075 ........ 0.0094 ...... 0.0062 ........ 0.0046
32-bit int #1 ........ 0.0086 ........ 0.0122 ...... 0.0063 ........ 0.0044
32-bit int #2 ........ 0.0087 ........ 0.0120 ...... 0.0066 ........ 0.0046
32-bit int #3 ........ 0.0086 ........ 0.0121 ...... 0.0060 ........ 0.0044
64-bit int #1 ........ 0.0096 ........ 0.0149 ...... 0.0060 ........ 0.0045
64-bit int #2 ........ 0.0096 ........ 0.0157 ...... 0.0062 ........ 0.0044
64-bit int #3 ........ 0.0096 ........ 0.0160 ...... 0.0063 ........ 0.0046
64-bit int #4 ........ 0.0097 ........ 0.0157 ...... 0.0061 ........ 0.0044
64-bit float #1 ...... 0.0079 ........ 0.0153 ...... 0.0056 ........ 0.0044
64-bit float #2 ...... 0.0079 ........ 0.0152 ...... 0.0057 ........ 0.0045
64-bit float #3 ...... 0.0079 ........ 0.0155 ...... 0.0057 ........ 0.0044
fix string #1 ........ 0.0010 ........ 0.0045 ...... 0.0071 ........ 0.0044
fix string #2 ........ 0.0048 ........ 0.0075 ...... 0.0070 ........ 0.0060
fix string #3 ........ 0.0048 ........ 0.0086 ...... 0.0068 ........ 0.0060
fix string #4 ........ 0.0050 ........ 0.0088 ...... 0.0070 ........ 0.0059
8-bit string #1 ...... 0.0081 ........ 0.0129 ...... 0.0069 ........ 0.0062
8-bit string #2 ...... 0.0086 ........ 0.0128 ...... 0.0069 ........ 0.0065
8-bit string #3 ...... 0.0086 ........ 0.0126 ...... 0.0115 ........ 0.0065
16-bit string #1 ..... 0.0105 ........ 0.0137 ...... 0.0128 ........ 0.0068
16-bit string #2 ..... 0.1510 ........ 0.1486 ...... 0.1526 ........ 0.1391
32-bit string ........ 0.1517 ........ 0.1475 ...... 0.1504 ........ 0.1370
wide char string #1 .. 0.0044 ........ 0.0085 ...... 0.0067 ........ 0.0057
wide char string #2 .. 0.0081 ........ 0.0125 ...... 0.0069 ........ 0.0063
8-bit binary #1 ........... I ............. I ........... F ............. I
8-bit binary #2 ........... I ............. I ........... F ............. I
8-bit binary #3 ........... I ............. I ........... F ............. I
16-bit binary ............. I ............. I ........... F ............. I
32-bit binary ............. I ............. I ........... F ............. I
fix array #1 ......... 0.0014 ........ 0.0059 ...... 0.0132 ........ 0.0055
fix array #2 ......... 0.0146 ........ 0.0156 ...... 0.0155 ........ 0.0148
fix array #3 ......... 0.0211 ........ 0.0229 ...... 0.0179 ........ 0.0180
16-bit array #1 ...... 0.0673 ........ 0.0498 ...... 0.0343 ........ 0.0388
16-bit array #2 ........... S ............. S ........... S ............. S
32-bit array .............. S ............. S ........... S ............. S
complex array ............. I ............. I ........... F ............. F
fix map #1 ................ I ............. I ........... F ............. I
fix map #2 ........... 0.0148 ........ 0.0180 ...... 0.0156 ........ 0.0179
fix map #3 ................ I ............. I ........... F ............. I
fix map #4 ........... 0.0252 ........ 0.0201 ...... 0.0214 ........ 0.0167
16-bit map #1 ........ 0.1027 ........ 0.0836 ...... 0.0388 ........ 0.0510
16-bit map #2 ............. S ............. S ........... S ............. S
32-bit map ................ S ............. S ........... S ............. S
complex map .......... 0.1104 ........ 0.1010 ...... 0.0556 ........ 0.0602
fixext 1 .................. I ............. I ........... F ............. F
fixext 2 .................. I ............. I ........... F ............. F
fixext 4 .................. I ............. I ........... F ............. F
fixext 8 .................. I ............. I ........... F ............. F
fixext 16 ................. I ............. I ........... F ............. F
8-bit ext ................. I ............. I ........... F ............. F
16-bit ext ................ I ............. I ........... F ............. F
32-bit ext ................ I ............. I ........... F ............. F
32-bit timestamp #1 ....... I ............. I ........... F ............. F
32-bit timestamp #2 ....... I ............. I ........... F ............. F
64-bit timestamp #1 ....... I ............. I ........... F ............. F
64-bit timestamp #2 ....... I ............. I ........... F ............. F
64-bit timestamp #3 ....... I ............. I ........... F ............. F
96-bit timestamp #1 ....... I ............. I ........... F ............. F
96-bit timestamp #2 ....... I ............. I ........... F ............. F
96-bit timestamp #3 ....... I ............. I ........... F ............. F
===========================================================================
Total                  0.9642          1.0909        0.8224          0.7213
Skipped                     4               4             4               4
Failed                      0               0            24              17
Ignored                    24              24             0               7
</code></pre></div>
</details>
<blockquote>
<p dir="auto"><em>Note that the msgpack extension (v2.1.2) doesn't support <strong>ext</strong>, <strong>bin</strong> and UTF-8 <strong>str</strong> types.</em></p>
</blockquote>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<p dir="auto">The library is released under the MIT License. See the bundled <a href="/rybakit/msgpack.php/blob/master/LICENSE">LICENSE</a> file for details.</p>
</article>
  </div>
        </div>
        
        <div id="qs-CodeSmith32-msgpack-php-micro" class="qs"><h4><a href="https://github.com/CodeSmith32/msgpack-php-micro" target="_blank">CodeSmith32/msgpack-php-micro <span class="qs-url">https://github.com/CodeSmith32/msgpack-php-micro</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack-php-micro" class="anchor" aria-hidden="true" href="#msgpack-php-micro"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack-php-micro</h5>
<p dir="auto">msgpack - A super-lightweight PHP implementation of the <a href="http://msgpack.org/" rel="nofollow">msgpack</a> data encoding format.</p>
<p dir="auto">This is a very simple, small PHP implementation of msgpack, for ease of embedding.</p>
<p dir="auto">Notice: This implementation is still fairly new, and may have bugs. If you find any bugs, please report them immediately, and I will try to get them fixed as soon as possible.</p>
<p dir="auto"><strong>Usage:</strong></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="require_once('msgpack.php');

$data = array(
  'hello' =&gt; 'world',
  'array' =&gt; array(1, 2, 3, 4),
  5 =&gt; 78.662,
  'dt' =&gt; new DateTime(), // DateTime encoded in Timestamp extension format
);

$encoded = MsgPack::encode($data);

$decoded = MsgPack::decode($encoded);

var_dump($decoded);"><pre class="notranslate"><code>require_once('msgpack.php');

$data = array(
  'hello' =&gt; 'world',
  'array' =&gt; array(1, 2, 3, 4),
  5 =&gt; 78.662,
  'dt' =&gt; new DateTime(), // DateTime encoded in Timestamp extension format
);

$encoded = MsgPack::encode($data);

$decoded = MsgPack::decode($encoded);

var_dump($decoded);
</code></pre></div>
<p dir="auto">Fully supports custom type extensions:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="require_once('msgpack.php');

class Vertex {
	public $x;
	public $y;
	public $z;

	public function __construct($x=0, $y=0, $z=0) {
		$this-&gt;x = floatval($x);
		$this-&gt;y = floatval($y);
		$this-&gt;z = floatval($z);
	}
}

MsgPack::extend(array(
	'type' =&gt; 1,

	'varType' =&gt; 'object',

	'encode' =&gt; function($obj) {
		// returning FALSE skips; see reference for details
		if(!($obj instanceof Vertex)) return FALSE;

		return pack('GGG',$obj-&gt;x, $obj-&gt;y, $obj-&gt;z);
	},

	'decode' =&gt; function($data) {
		$xyz = unpack('Gx/Gy/Gz',$data);
		return new Vertex($xyz['x'], $xyz['y'], $xyz['z']);
	},
));"><pre class="notranslate"><code>require_once('msgpack.php');

class Vertex {
	public $x;
	public $y;
	public $z;

	public function __construct($x=0, $y=0, $z=0) {
		$this-&gt;x = floatval($x);
		$this-&gt;y = floatval($y);
		$this-&gt;z = floatval($z);
	}
}

MsgPack::extend(array(
	'type' =&gt; 1,

	'varType' =&gt; 'object',

	'encode' =&gt; function($obj) {
		// returning FALSE skips; see reference for details
		if(!($obj instanceof Vertex)) return FALSE;

		return pack('GGG',$obj-&gt;x, $obj-&gt;y, $obj-&gt;z);
	},

	'decode' =&gt; function($data) {
		$xyz = unpack('Gx/Gy/Gz',$data);
		return new Vertex($xyz['x'], $xyz['y'], $xyz['z']);
	},
));
</code></pre></div>
<p dir="auto">Visit <a href="https://github.com/CodeSmith32/msgpack-php-micro">github.com/CodeSmith32/msgpack-php-micro</a> for the usage reference.</p>
</article>
  </div>
        </div>
        
        <div id="qs-ymofen-msgpack-delphi" class="qs"><h4><a href="https://github.com/ymofen/msgpack-delphi" target="_blank">ymofen/msgpack-delphi <span class="qs-url">https://github.com/ymofen/msgpack-delphi</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack-for-delphi" class="anchor" aria-hidden="true" href="#msgpack-for-delphi"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Msgpack for Delphi</h5>
<p dir="auto">It's like JSON but small and fast.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="unit Owner: D10.Mofen, qdac.swish
contact:
       qq:185511468, 
    email:185511468@qq.com
welcome to report bug"><pre class="notranslate"><code>unit Owner: D10.Mofen, qdac.swish
contact:
       qq:185511468, 
    email:185511468@qq.com
welcome to report bug
</code></pre></div>
<h6 dir="auto">
<a id="user-content-works-with" class="anchor" aria-hidden="true" href="#works-with"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Works with</h6>
<ul dir="auto">
<li>Delphi 7 (tested)</li>
<li>Delphi 2007 (tested)</li>
<li>XE5, XE6, XE7, FMX (tested)</li>
</ul>
<h6 dir="auto">
<a id="user-content-changes" class="anchor" aria-hidden="true" href="#changes"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>changes:</h6>
<ul dir="auto">
<li>
<p dir="auto">first release
2014-08-15 13:05:13</p>
</li>
<li>
<p dir="auto">add array support
2014-08-19 12:18:47</p>
</li>
<li>
<p dir="auto">add andriod support
2014-09-08 00:45:27</p>
</li>
</ul>
<ul dir="auto">
<li>fixed int32, int64 parse bug&lt; integer, int64 parse zero&gt;
2014-11-09 22:35:27</li>
</ul>
<ul dir="auto">
<li>add EncodeToFile/DecodeFromFile
2014-11-13 12:30:58</li>
</ul>
<ul dir="auto">
<li>
<p dir="auto">fix  asVariant = null (thanks for cyw(26890954))
2014-11-14 09:05:52</p>
</li>
<li>
<p dir="auto">fix AsInteger = -1 bug (thanks for cyw(26890954))
2014-11-14 12:15:52</p>
</li>
<li>
<p dir="auto">fix AsInteger = -127 bug
check int64/integer/cardinal/word/shortint/smallint/byte assign, encode,decode, read
2014-11-14 12:30:38</p>
</li>
<li>
<p dir="auto">fix AsFloat = 2.507182 bug
thanks fo []-  1939331207
2014-11-21 12:37:04</p>
</li>
<li>
<p dir="auto">add AddArrayChild func
2015-03-25 17:47:28</p>
</li>
<li>
<p dir="auto">add remove/removeFromParent/Delete function
2015-08-29 22:37:48</p>
</li>
</ul>
<h7 dir="auto">
<a id="user-content-code-example" class="anchor" aria-hidden="true" href="#code-example"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Code Example</h7>
<div class="highlight highlight-source-pascal notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="
var
  lvMsg, lvMsg2:TSimpleMsgPack;
  lvBytes:TBytes;
  s:string;
begin
  lvMsg := TSimpleMsgPack.Create;
  lvMsg.S['key.obj'] := ',ascii';
  if dlgOpen.Execute then
  begin
    lvMsg.S['key.image.name'] := ExtractFileName(dlgOpen.FileName);
    
    // file binary data
    lvMsg.ForcePathObject('key.image.data').LoadBinaryFromFile(dlgOpen.FileName);
  end;
  
  //
  lvBytes := lvMsg.EncodeToBytes;

  lvMsg2 := TSimpleMsgPack.Create;
  lvMsg2.DecodeFromBytes(lvBytes);
  //
  Memo1.Lines.Add(lvMsg2.S['key.obj']);
  if lvMsg2.S['key.image.name'] &lt;&gt; '' then
  begin
    s := ExtractFilePath(ParamStr(0)) + lvMsg2.S['key.image.name'];
    Memo1.Lines.Add('file saved');
    Memo1.Lines.Add(s);
    lvMsg2.ForcePathObject('key.image.data').SaveBinaryToFile(s);    
  end;
  "><pre><span class="pl-k">var</span>
  lvMsg, lvMsg2:TSimpleMsgPack;
  lvBytes:TBytes;
  s:string;
<span class="pl-k">begin</span>
  lvMsg := TSimpleMsgPack.Create;
  lvMsg.S[<span class="pl-s"><span class="pl-pds">'</span>key.obj<span class="pl-pds">'</span></span>] := <span class="pl-s"><span class="pl-pds">'</span>,ascii<span class="pl-pds">'</span></span>;
  <span class="pl-k">if</span> dlgOpen.Execute <span class="pl-k">then</span>
  <span class="pl-k">begin</span>
    lvMsg.S[<span class="pl-s"><span class="pl-pds">'</span>key.image.name<span class="pl-pds">'</span></span>] := ExtractFileName(dlgOpen.FileName);
    
    <span class="pl-c"><span class="pl-c">//</span> file binary data</span>
    lvMsg.ForcePathObject(<span class="pl-s"><span class="pl-pds">'</span>key.image.data<span class="pl-pds">'</span></span>).LoadBinaryFromFile(dlgOpen.FileName);
  <span class="pl-k">end</span>;
  
  <span class="pl-c"><span class="pl-c">//</span></span>
  lvBytes := lvMsg.EncodeToBytes;

  lvMsg2 := TSimpleMsgPack.Create;
  lvMsg2.DecodeFromBytes(lvBytes);
  <span class="pl-c"><span class="pl-c">//</span></span>
  Memo1.Lines.Add(lvMsg2.S[<span class="pl-s"><span class="pl-pds">'</span>key.obj<span class="pl-pds">'</span></span>]);
  <span class="pl-k">if</span> lvMsg2.S[<span class="pl-s"><span class="pl-pds">'</span>key.image.name<span class="pl-pds">'</span></span>] &lt;&gt; <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span> <span class="pl-k">then</span>
  <span class="pl-k">begin</span>
    s := ExtractFilePath(ParamStr(<span class="pl-c1">0</span>)) + lvMsg2.S[<span class="pl-s"><span class="pl-pds">'</span>key.image.name<span class="pl-pds">'</span></span>];
    Memo1.Lines.Add(<span class="pl-s"><span class="pl-pds">'</span>file saved<span class="pl-pds">'</span></span>);
    Memo1.Lines.Add(s);
    lvMsg2.ForcePathObject(<span class="pl-s"><span class="pl-pds">'</span>key.image.data<span class="pl-pds">'</span></span>).SaveBinaryToFile(s);    
  <span class="pl-k">end</span>;
  </pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-perl" class="qs"><h4><a href="https://github.com/msgpack/msgpack-perl" target="_blank">msgpack/msgpack-perl <span class="qs-url">https://github.com/msgpack/msgpack-perl</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><p dir="auto"><a href="https://travis-ci.org/msgpack/msgpack-perl" rel="nofollow"><img src="https://camo.githubusercontent.com/69fc08bbcce5f87b7180200dbafba6201aa743b30ff395ba2a4a564e1a1c6c6c/68747470733a2f2f7472617669732d63692e6f72672f6d73677061636b2f6d73677061636b2d7065726c2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/msgpack/msgpack-perl.svg?branch=master" style="max-width: 100%;"></a></p>
<h5 dir="auto">
<a id="user-content-name" class="anchor" aria-hidden="true" href="#name"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>NAME</h5>
<p dir="auto">Data::MessagePack - MessagePack serializing/deserializing</p>
<h5 dir="auto">
<a id="user-content-synopsis" class="anchor" aria-hidden="true" href="#synopsis"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>SYNOPSIS</h5>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="use Data::MessagePack;

my $mp = Data::MessagePack-&gt;new();
$mp-&gt;canonical-&gt;utf8-&gt;prefer_integer if $needed;

my $packed   = $mp-&gt;pack($dat);
my $unpacked = $mp-&gt;unpack($dat);"><pre class="notranslate"><code>use Data::MessagePack;

my $mp = Data::MessagePack-&gt;new();
$mp-&gt;canonical-&gt;utf8-&gt;prefer_integer if $needed;

my $packed   = $mp-&gt;pack($dat);
my $unpacked = $mp-&gt;unpack($dat);
</code></pre></div>
<h5 dir="auto">
<a id="user-content-description" class="anchor" aria-hidden="true" href="#description"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>DESCRIPTION</h5>
<p dir="auto">This module converts Perl data structures to MessagePack and vice versa.</p>
<h5 dir="auto">
<a id="user-content-about-messagepack-format" class="anchor" aria-hidden="true" href="#about-messagepack-format"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>ABOUT MESSAGEPACK FORMAT</h5>
<p dir="auto">MessagePack is a binary-based efficient object serialization format.
It enables to exchange structured objects between many languages like
JSON.  But unlike JSON, it is very fast and small.</p>
<h6 dir="auto">
<a id="user-content-advantages" class="anchor" aria-hidden="true" href="#advantages"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>ADVANTAGES</h6>
<ul dir="auto">
<li>
<p dir="auto">PORTABLE</p>
<p dir="auto">The MessagePack format does not depend on language nor byte order.</p>
</li>
<li>
<p dir="auto">SMALL IN SIZE</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  say length(JSON::XS::encode_json({a=&gt;1, b=&gt;2}));   # =&gt; 13
  say length(Storable::nfreeze({a=&gt;1, b=&gt;2}));       # =&gt; 21
  say length(Data::MessagePack-&gt;pack({a=&gt;1, b=&gt;2})); # =&gt; 7"><pre class="notranslate"><code>  say length(JSON::XS::encode_json({a=&gt;1, b=&gt;2}));   # =&gt; 13
  say length(Storable::nfreeze({a=&gt;1, b=&gt;2}));       # =&gt; 21
  say length(Data::MessagePack-&gt;pack({a=&gt;1, b=&gt;2})); # =&gt; 7
</code></pre></div>
<p dir="auto">The MessagePack format saves memory than JSON and Storable format.</p>
</li>
<li>
<p dir="auto">STREAMING DESERIALIZER</p>
<p dir="auto">MessagePack supports streaming deserializer. It is useful for
networking such as RPC.  See <a href="https://metacpan.org/pod/Data%3A%3AMessagePack%3A%3AUnpacker" rel="nofollow">Data::MessagePack::Unpacker</a> for
details.</p>
</li>
</ul>
<p dir="auto">If you want to get more information about the MessagePack format,
please visit to <a href="http://msgpack.org/" rel="nofollow">http://msgpack.org/</a>.</p>
<h5 dir="auto">
<a id="user-content-methods" class="anchor" aria-hidden="true" href="#methods"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>METHODS</h5>
<ul dir="auto">
<li>
<p dir="auto"><code>my $packed = Data::MessagePack-&gt;pack($data[, $max_depth]);</code></p>
<p dir="auto">Pack the $data to messagepack format string.</p>
<p dir="auto">This method throws an exception when the perl structure is nested more
than $max_depth levels(default: 512) in order to detect circular
references.</p>
<p dir="auto">Data::MessagePack-&gt;pack() throws an exception when encountering a
blessed perl object, because MessagePack is a language-independent
format.</p>
</li>
<li>
<p dir="auto"><code>my $unpacked = Data::MessagePack-&gt;unpack($msgpackstr);</code></p>
<p dir="auto">unpack the $msgpackstr to a MessagePack format string.</p>
</li>
<li>
<p dir="auto"><code>my $mp = Data::MesssagePack-&gt;new()</code></p>
<p dir="auto">Creates a new MessagePack instance.</p>
</li>
<li>
<p dir="auto"><code>$mp = $mp-&gt;prefer_integer([ $enable ])</code></p>
</li>
<li>
<p dir="auto"><code>$enabled = $mp-&gt;get_prefer_integer()</code></p>
<p dir="auto">If <em>$enable</em> is true (or missing), then the <code>pack</code> method tries a
string as an integer if the string looks like an integer.</p>
</li>
<li>
<p dir="auto"><code>$mp = $mp-&gt;canonical([ $enable ])</code></p>
</li>
<li>
<p dir="auto"><code>$enabled = $mp-&gt;get_canonical()</code></p>
<p dir="auto">If <em>$enable</em> is true (or missing), then the <code>pack</code> method will output
packed data by sorting their keys. This is adding a comparatively high
overhead.</p>
</li>
<li>
<p dir="auto"><code>$mp = $mp-&gt;utf8([ $enable ])</code></p>
</li>
<li>
<p dir="auto"><code>$enabled = $mp-&gt;get_utf8()</code></p>
<p dir="auto">If <em>$enable</em> is true (or missing), then the <code>pack</code> method will
apply <code>utf8::encode()</code> to all the string values.</p>
<p dir="auto">In other words, this property tell <code>$mp</code> to deal with <strong>text strings</strong>.
See <a href="https://metacpan.org/pod/perlunifaq" rel="nofollow">perlunifaq</a> for the meaning of <strong>text string</strong>.</p>
</li>
<li>
<p dir="auto"><code>$packed = $mp-&gt;pack($data)</code></p>
</li>
<li>
<p dir="auto"><code>$packed = $mp-&gt;encode($data)</code></p>
<p dir="auto">Same as <code>Data::MessagePack-&gt;pack()</code>, but properties are respected.</p>
</li>
<li>
<p dir="auto"><code>$data = $mp-&gt;unpack($data)</code></p>
</li>
<li>
<p dir="auto"><code>$data = $mp-&gt;decode($data)</code></p>
<p dir="auto">Same as <code>Data::MessagePack-&gt;unpack()</code>, but properties are respected.</p>
</li>
</ul>
<h5 dir="auto">
<a id="user-content-configuration-variables-deprecated" class="anchor" aria-hidden="true" href="#configuration-variables-deprecated"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Configuration Variables (DEPRECATED)</h5>
<ul dir="auto">
<li>
<p dir="auto">$Data::MessagePack::PreferInteger</p>
<p dir="auto">Packs a string as an integer, when it looks like an integer.</p>
<p dir="auto">This variable is <strong>deprecated</strong>.
Use <code>$msgpack-&gt;prefer_integer</code> property instead.</p>
</li>
</ul>
<h5 dir="auto">
<a id="user-content-speed" class="anchor" aria-hidden="true" href="#speed"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>SPEED</h5>
<p dir="auto">This is a result of <code>benchmark/serialize.pl</code> and <code>benchmark/deserialize.pl</code>
on my SC440(Linux 2.6.32-23-server #37-Ubuntu SMP).
(You should benchmark them with <strong>your</strong> data if the speed matters, of course.)</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="-- serialize
JSON::XS: 2.3
Data::MessagePack: 0.24
Storable: 2.21
Benchmark: running json, mp, storable for at least 1 CPU seconds...
      json:  1 wallclock secs ( 1.00 usr +  0.01 sys =  1.01 CPU) @ 141939.60/s (n=143359)
        mp:  1 wallclock secs ( 1.06 usr +  0.00 sys =  1.06 CPU) @ 355500.94/s (n=376831)
  storable:  1 wallclock secs ( 1.12 usr +  0.00 sys =  1.12 CPU) @ 38399.11/s (n=43007)
             Rate storable     json       mp
storable  38399/s       --     -73%     -89%
json     141940/s     270%       --     -60%
mp       355501/s     826%     150%       --

-- deserialize
JSON::XS: 2.3
Data::MessagePack: 0.24
Storable: 2.21
Benchmark: running json, mp, storable for at least 1 CPU seconds...
      json:  0 wallclock secs ( 1.05 usr +  0.00 sys =  1.05 CPU) @ 179442.86/s (n=188415)
        mp:  0 wallclock secs ( 1.01 usr +  0.00 sys =  1.01 CPU) @ 212909.90/s (n=215039)
  storable:  2 wallclock secs ( 1.14 usr +  0.00 sys =  1.14 CPU) @ 114974.56/s (n=131071)
             Rate storable     json       mp
storable 114975/s       --     -36%     -46%
json     179443/s      56%       --     -16%
mp       212910/s      85%      19%       --"><pre class="notranslate"><code>-- serialize
JSON::XS: 2.3
Data::MessagePack: 0.24
Storable: 2.21
Benchmark: running json, mp, storable for at least 1 CPU seconds...
      json:  1 wallclock secs ( 1.00 usr +  0.01 sys =  1.01 CPU) @ 141939.60/s (n=143359)
        mp:  1 wallclock secs ( 1.06 usr +  0.00 sys =  1.06 CPU) @ 355500.94/s (n=376831)
  storable:  1 wallclock secs ( 1.12 usr +  0.00 sys =  1.12 CPU) @ 38399.11/s (n=43007)
             Rate storable     json       mp
storable  38399/s       --     -73%     -89%
json     141940/s     270%       --     -60%
mp       355501/s     826%     150%       --

-- deserialize
JSON::XS: 2.3
Data::MessagePack: 0.24
Storable: 2.21
Benchmark: running json, mp, storable for at least 1 CPU seconds...
      json:  0 wallclock secs ( 1.05 usr +  0.00 sys =  1.05 CPU) @ 179442.86/s (n=188415)
        mp:  0 wallclock secs ( 1.01 usr +  0.00 sys =  1.01 CPU) @ 212909.90/s (n=215039)
  storable:  2 wallclock secs ( 1.14 usr +  0.00 sys =  1.14 CPU) @ 114974.56/s (n=131071)
             Rate storable     json       mp
storable 114975/s       --     -36%     -46%
json     179443/s      56%       --     -16%
mp       212910/s      85%      19%       --
</code></pre></div>
<h5 dir="auto">
<a id="user-content-caveat" class="anchor" aria-hidden="true" href="#caveat"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>CAVEAT</h5>
<h6 dir="auto">
<a id="user-content-unpacking-64-bit-integers" class="anchor" aria-hidden="true" href="#unpacking-64-bit-integers"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Unpacking 64 bit integers</h6>
<p dir="auto">This module can unpack 64 bit integers even if your perl does not support them
(i.e. where <code>perl -V:ivsize</code> is 4), but you cannot calculate these values
unless you use <code>Math::BigInt</code>.</p>
<h5 dir="auto">
<a id="user-content-todo" class="anchor" aria-hidden="true" href="#todo"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>TODO</h5>
<ul dir="auto">
<li>
<p dir="auto">Error handling</p>
<p dir="auto">MessagePack cannot deal with complex scalars such as object references,
filehandles, and code references. We should report the errors more kindly.</p>
</li>
<li>
<p dir="auto">Streaming deserializer</p>
<p dir="auto">The current implementation of the streaming deserializer does not have internal
buffers while some other bindings (such as Ruby binding) does. This limitation
will astonish those who try to unpack byte streams with an arbitrary buffer size
(e.g. <code>while(read($socket, $buffer, $arbitrary_buffer_size)) { ... }</code>).
We should implement the internal buffer for the unpacker.</p>
</li>
</ul>
<h5 dir="auto">
<a id="user-content-faq" class="anchor" aria-hidden="true" href="#faq"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>FAQ</h5>
<ul dir="auto">
<li>
<p dir="auto">Why does Data::MessagePack have pure perl implementations?</p>
<p dir="auto">msgpack C library uses C99 feature, VC++6 does not support C99. So pure perl version is needed for VC++ users.</p>
</li>
</ul>
<h5 dir="auto">
<a id="user-content-authors" class="anchor" aria-hidden="true" href="#authors"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>AUTHORS</h5>
<p dir="auto">Tokuhiro Matsuno</p>
<p dir="auto">Makamaka Hannyaharamitu</p>
<p dir="auto">gfx</p>
<h5 dir="auto">
<a id="user-content-thanks-to" class="anchor" aria-hidden="true" href="#thanks-to"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>THANKS TO</h5>
<p dir="auto">Jun Kuriyama</p>
<p dir="auto">Dan Kogai</p>
<p dir="auto">FURUHASHI Sadayuki</p>
<p dir="auto">hanekomu</p>
<p dir="auto">Kazuho Oku</p>
<p dir="auto">syohex</p>
<h5 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>LICENSE</h5>
<p dir="auto">This library is free software; you can redistribute it and/or modify
it under the same terms as Perl itself.</p>
<h5 dir="auto">
<a id="user-content-see-also" class="anchor" aria-hidden="true" href="#see-also"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>SEE ALSO</h5>
<p dir="auto"><a href="http://msgpack.org/" rel="nofollow">http://msgpack.org/</a> is the official web site for the  MessagePack format.</p>
<p dir="auto"><a href="https://metacpan.org/pod/Data%3A%3AMessagePack%3A%3AUnpacker" rel="nofollow">Data::MessagePack::Unpacker</a></p>
<p dir="auto"><a href="https://metacpan.org/pod/AnyEvent%3A%3AMPRPC" rel="nofollow">AnyEvent::MPRPC</a></p>
</article>
  </div>
        </div>
        
        <div id="qs-pierre-vigier-Perl6-Data-MessagePack" class="qs"><h4><a href="https://github.com/pierre-vigier/Perl6-Data-MessagePack" target="_blank">pierre-vigier/Perl6-Data-MessagePack <span class="qs-url">https://github.com/pierre-vigier/Perl6-Data-MessagePack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-perl6-data-messagepack" class="anchor" aria-hidden="true" href="#perl6-data-messagepack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Perl6-Data-MessagePack</h5>
<p dir="auto"><a href="https://travis-ci.org/pierre-vigier/Perl6-Data-MessagePack" rel="nofollow"><img src="https://camo.githubusercontent.com/1af1b484bb26fe86dd37cc251099773228a744c831d55629b3b4224252f8f72a/68747470733a2f2f7472617669732d63692e6f72672f7069657272652d7669676965722f5065726c362d446174612d4d6573736167655061636b2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/pierre-vigier/Perl6-Data-MessagePack.svg?branch=master" style="max-width: 100%;"></a></p>
<h5 dir="auto">
<a id="user-content-name" class="anchor" aria-hidden="true" href="#name"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>NAME</h5>
<p dir="auto">Data::MessagePack - Perl 6 implementation of MessagePack</p>
<h5 dir="auto">
<a id="user-content-synopsis" class="anchor" aria-hidden="true" href="#synopsis"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>SYNOPSIS</h5>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="use Data::MessagePack;

my $data-structure = {
    key =&gt; 'value',
    k2 =&gt; [ 1, 2, 3 ]
};

my $packed = Data::MessagePack::pack( $data-structure );

my $unpacked = Data::MessagePack::unpack( $packed );"><pre class="notranslate"><code>use Data::MessagePack;

my $data-structure = {
    key =&gt; 'value',
    k2 =&gt; [ 1, 2, 3 ]
};

my $packed = Data::MessagePack::pack( $data-structure );

my $unpacked = Data::MessagePack::unpack( $packed );
</code></pre></div>
<p dir="auto">Or for streaming:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='use Data::MessagePack::StreamingUnpacker;

my $supplier = Some Supplier; #Could be from IO::Socket::Async for instance

my $unpacker = Data::MessagePack::StreamingUnpacker.new(
    source =&gt; $supplier.Supply
);

$unpacker.tap( -&gt; $value {
    say "Got new value";
    say $value.perl;
}, done =&gt; { say "Source supply is done"; } );'><pre class="notranslate"><code>use Data::MessagePack::StreamingUnpacker;

my $supplier = Some Supplier; #Could be from IO::Socket::Async for instance

my $unpacker = Data::MessagePack::StreamingUnpacker.new(
    source =&gt; $supplier.Supply
);

$unpacker.tap( -&gt; $value {
    say "Got new value";
    say $value.perl;
}, done =&gt; { say "Source supply is done"; } );
</code></pre></div>
<h5 dir="auto">
<a id="user-content-description" class="anchor" aria-hidden="true" href="#description"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>DESCRIPTION</h5>
<p dir="auto">The present module proposes an implemetation of the MessagePack specification as described on <a href="http://msgpack.org/" rel="nofollow">http://msgpack.org/</a>. The implementation is now in Pure Perl which could come as a performance penalty opposed to some other packer implemented in C.</p>
<h5 dir="auto">
<a id="user-content-why-that-module" class="anchor" aria-hidden="true" href="#why-that-module"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>WHY THAT MODULE</h5>
<p dir="auto">There are already some part of MessagePack implemented in Perl6, with for instance MessagePack available here: <a href="https://github.com/uasi/messagepack-pm6">https://github.com/uasi/messagepack-pm6</a>, however that module only implements the unpacking part of the specification. Futhermore, that module uses the unpack functionality which is tagged as experimental as of today</p>
<h5 dir="auto">
<a id="user-content-functions" class="anchor" aria-hidden="true" href="#functions"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>FUNCTIONS</h5>
<h6 dir="auto">
<a id="user-content-function-pack" class="anchor" aria-hidden="true" href="#function-pack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>function pack</h6>
<p dir="auto">That function takes a data structure as parameter, and returns a Blob with the packed version of the data structure.</p>
<h6 dir="auto">
<a id="user-content-function-unpack" class="anchor" aria-hidden="true" href="#function-unpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>function unpack</h6>
<p dir="auto">That function takes a MessagePack packed message as parameter, and returns the deserialized data structure.</p>
<h5 dir="auto">
<a id="user-content-author" class="anchor" aria-hidden="true" href="#author"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Author</h5>
<p dir="auto">Pierre VIGIER</p>
<h5 dir="auto">
<a id="user-content-contributors" class="anchor" aria-hidden="true" href="#contributors"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Contributors</h5>
<p dir="auto">Timo Paulssen</p>
<h5 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h5>
<p dir="auto">Artistic License 2.0</p>
</article>
  </div>
        </div>
        
        <div id="qs-seantallen-org-msgpack" class="qs"><h4><a href="https://github.com/seantallen-org/msgpack" target="_blank">seantallen-org/msgpack <span class="qs-url">https://github.com/seantallen-org/msgpack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack" class="anchor" aria-hidden="true" href="#msgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack</h5>
<p dir="auto">A pure Pony implementation of the <a href="http://msgpack.org/" rel="nofollow">MessagePack serialization format</a>.</p>
<h6 dir="auto">
<a id="user-content-status" class="anchor" aria-hidden="true" href="#status"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Status</h6>
<p dir="auto">msgpack is currently beta software. It implements a low-level API for encoding and decoding data. Still to do:</p>
<ul dir="auto">
<li>High-level API for a better programming experience</li>
</ul>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<ul dir="auto">
<li>Install <a href="https://github.com/ponylang/corral">corral</a>
</li>
<li><code>corral add github.com/seantallen-org/msgpack.git --version 0.2.5</code></li>
<li>
<code>corral fetch</code> to fetch your dependencies</li>
<li>
<code>use "msgpack"</code> to include this package</li>
<li>
<code>corral run -- ponyc</code> to compile your application</li>
</ul>
<h6 dir="auto">
<a id="user-content-api-documentation" class="anchor" aria-hidden="true" href="#api-documentation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>API Documentation</h6>
<p dir="auto"><a href="https://seantallen-org.github.io/msgpack/" rel="nofollow">https://seantallen-org.github.io/msgpack/</a></p>
</article>
  </div>
        </div>
        
        <div id="qs-patriksimek-msgpack-postgres" class="qs"><h4><a href="https://github.com/patriksimek/msgpack-postgres" target="_blank">patriksimek/msgpack-postgres <span class="qs-url">https://github.com/patriksimek/msgpack-postgres</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack-postgres-" class="anchor" aria-hidden="true" href="#msgpack-postgres-"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack-postgres <a href="https://travis-ci.org/patriksimek/msgpack-postgres" rel="nofollow"><img src="https://camo.githubusercontent.com/3225e324b046ff254856a123a297e3ffc238cb057872b515c004c4e95d03a824/68747470733a2f2f696d672e736869656c64732e696f2f7472617669732f70617472696b73696d656b2f6d73677061636b2d706f7374677265732f6d61737465722e7376673f7374796c653d666c61742d737175617265266c6162656c3d756e6974" alt="Travis CI" data-canonical-src="https://img.shields.io/travis/patriksimek/msgpack-postgres/master.svg?style=flat-square&amp;label=unit" style="max-width: 100%;"></a>
</h5>
<p dir="auto">MessagePack implementation for PostgreSQL written in PL/pgSQL.</p>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<p dir="auto">Execute <code>src/encode.sql</code> or/and <code>src/decode.sql</code> on your database server.</p>
<h6 dir="auto">
<a id="user-content-quick-example" class="anchor" aria-hidden="true" href="#quick-example"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Quick Example</h6>
<div class="highlight highlight-source-sql notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="select msgpack_encode('{&quot;hello&quot;: &quot;world&quot;}'::jsonb);
-- returns 0x81a568656c6c6fa5776f726c64

select msgpack_decode(decode('81a568656c6c6fa5776f726c64', 'hex'));
-- returns '{&quot;hello&quot;: &quot;world&quot;}'"><pre><span class="pl-k">select</span> msgpack_encode(<span class="pl-s"><span class="pl-pds">'</span>{"hello": "world"}<span class="pl-pds">'</span></span>::jsonb);
<span class="pl-c"><span class="pl-c">--</span> returns 0x81a568656c6c6fa5776f726c64</span>

<span class="pl-k">select</span> msgpack_decode(decode(<span class="pl-s"><span class="pl-pds">'</span>81a568656c6c6fa5776f726c64<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>hex<span class="pl-pds">'</span></span>));
<span class="pl-c"><span class="pl-c">--</span> returns '{"hello": "world"}'</span></pre></div>
<h6 dir="auto">
<a id="user-content-documentation" class="anchor" aria-hidden="true" href="#documentation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Documentation</h6>
<p dir="auto"><code>msgpack_encode(jsonb)</code></p>
<p dir="auto">Encodes <code>jsonb</code> object into <code>bytea</code> string.</p>
<p dir="auto"><code>msgpack_decode(bytea)</code></p>
<p dir="auto">Decodes <code>jsonb</code> object from <code>bytea</code> string.</p>
<h6 dir="auto">
<a id="user-content-sponsors" class="anchor" aria-hidden="true" href="#sponsors"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Sponsors</h6>
<p dir="auto">Development is sponsored by <a href="https://www.integromat.com/en/integrations/postgres" rel="nofollow">Integromat</a>.</p>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<p dir="auto">Copyright (c) 2017 Patrik Simek</p>
<p dir="auto">The MIT License</p>
<p dir="auto">Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p dir="auto">The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p dir="auto">THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-python" class="qs"><h4><a href="https://msgpack.org/" target="_blank">msgpack/msgpack-python <span class="qs-url">https://msgpack.org/</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack-for-python" class="anchor" aria-hidden="true" href="#messagepack-for-python"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack for Python</h5>
<p dir="auto"><a href="https://travis-ci.org/msgpack/msgpack-python" rel="nofollow"><img src="https://camo.githubusercontent.com/687b53f713fe541ff56eec0cce566807e79032d1913433591cc85ae2f4703ad7/68747470733a2f2f7472617669732d63692e6f72672f6d73677061636b2f6d73677061636b2d707974686f6e2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/msgpack/msgpack-python.svg?branch=master" style="max-width: 100%;"></a>
<a href="https://msgpack-python.readthedocs.io/en/latest/?badge=latest" rel="nofollow"><img src="https://camo.githubusercontent.com/2dc56636ae724471c101f86044d7c3c84bf82de7e46c40919fe90c87c7abbf20/68747470733a2f2f72656164746865646f63732e6f72672f70726f6a656374732f6d73677061636b2d707974686f6e2f62616467652f3f76657273696f6e3d6c6174657374" alt="Documentation Status" data-canonical-src="https://readthedocs.org/projects/msgpack-python/badge/?version=latest" style="max-width: 100%;"></a></p>
<h6 dir="auto">
<a id="user-content-whats-this" class="anchor" aria-hidden="true" href="#whats-this"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>What's this</h6>
<p dir="auto"><a href="https://msgpack.org/" rel="nofollow">MessagePack</a> is an efficient binary serialization format.
It lets you exchange data among multiple languages like JSON.
But it's faster and smaller.
This package provides CPython bindings for reading and writing MessagePack data.</p>
<h6 dir="auto">
<a id="user-content-very-important-notes-for-existing-users" class="anchor" aria-hidden="true" href="#very-important-notes-for-existing-users"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Very important notes for existing users</h6>
<h7 dir="auto">
<a id="user-content-pypi-package-name" class="anchor" aria-hidden="true" href="#pypi-package-name"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>PyPI package name</h7>
<p dir="auto">Package name on PyPI was changed from <code>msgpack-python</code> to <code>msgpack</code> from 0.5.</p>
<p dir="auto">When upgrading from msgpack-0.4 or earlier, do <code>pip uninstall msgpack-python</code> before
<code>pip install -U msgpack</code>.</p>
<h7 dir="auto">
<a id="user-content-compatibility-with-the-old-format" class="anchor" aria-hidden="true" href="#compatibility-with-the-old-format"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Compatibility with the old format</h7>
<p dir="auto">You can use <code>use_bin_type=False</code> option to pack <code>bytes</code>
object into raw type in the old msgpack spec, instead of bin type in new msgpack spec.</p>
<p dir="auto">You can unpack old msgpack format using <code>raw=True</code> option.
It unpacks str (raw) type in msgpack into Python bytes.</p>
<p dir="auto">See note below for detail.</p>
<h7 dir="auto">
<a id="user-content-major-breaking-changes-in-msgpack-10" class="anchor" aria-hidden="true" href="#major-breaking-changes-in-msgpack-10"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Major breaking changes in msgpack 1.0</h7>
<ul dir="auto">
<li>
<p dir="auto">Python 2</p>
<ul dir="auto">
<li>The extension module does not support Python 2 anymore.
The pure Python implementation (<code>msgpack.fallback</code>) is used for Python 2.</li>
</ul>
</li>
<li>
<p dir="auto">Packer</p>
<ul dir="auto">
<li>
<code>use_bin_type=True</code> by default.  bytes are encoded in bin type in msgpack.
<strong>If you are still using Python 2, you must use unicode for all string types.</strong>
You can use <code>use_bin_type=False</code> to encode into old msgpack format.</li>
<li>
<code>encoding</code> option is removed.  UTF-8 is used always.</li>
</ul>
</li>
<li>
<p dir="auto">Unpacker</p>
<ul dir="auto">
<li>
<code>raw=False</code> by default.  It assumes str types are valid UTF-8 string
and decode them to Python str (unicode) object.</li>
<li>
<code>encoding</code> option is removed.  You can use <code>raw=True</code> to support old format.</li>
<li>Default value of <code>max_buffer_size</code> is changed from 0 to 100 MiB.</li>
<li>Default value of <code>strict_map_key</code> is changed to True to avoid hashdos.
You need to pass <code>strict_map_key=False</code> if you have data which contain map keys
which type is not bytes or str.</li>
</ul>
</li>
</ul>
<h6 dir="auto">
<a id="user-content-install" class="anchor" aria-hidden="true" href="#install"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install</h6>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ pip install msgpack"><pre class="notranslate"><code>$ pip install msgpack
</code></pre></div>
<h7 dir="auto">
<a id="user-content-pure-python-implementation" class="anchor" aria-hidden="true" href="#pure-python-implementation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Pure Python implementation</h7>
<p dir="auto">The extension module in msgpack (<code>msgpack._cmsgpack</code>) does not support
Python 2 and PyPy.</p>
<p dir="auto">But msgpack provides a pure Python implementation (<code>msgpack.fallback</code>)
for PyPy and Python 2.</p>
<h7 dir="auto">
<a id="user-content-windows" class="anchor" aria-hidden="true" href="#windows"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Windows</h7>
<p dir="auto">When you can't use a binary distribution, you need to install Visual Studio
or Windows SDK on Windows.
Without extension, using pure Python implementation on CPython runs slowly.</p>
<h6 dir="auto">
<a id="user-content-how-to-use" class="anchor" aria-hidden="true" href="#how-to-use"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How to use</h6>
<p dir="auto">NOTE: In examples below, I use <code>raw=False</code> and <code>use_bin_type=True</code> for users
using msgpack &lt; 1.0. These options are default from msgpack 1.0 so you can omit them.</p>
<h7 dir="auto">
<a id="user-content-one-shot-pack--unpack" class="anchor" aria-hidden="true" href="#one-shot-pack--unpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>One-shot pack &amp; unpack</h7>
<p dir="auto">Use <code>packb</code> for packing and <code>unpackb</code> for unpacking.
msgpack provides <code>dumps</code> and <code>loads</code> as an alias for compatibility with
<code>json</code> and <code>pickle</code>.</p>
<p dir="auto"><code>pack</code> and <code>dump</code> packs to a file-like object.
<code>unpack</code> and <code>load</code> unpacks from a file-like object.</p>
<div class="highlight highlight-text-python-console notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import msgpack
&gt;&gt;&gt; msgpack.packb([1, 2, 3], use_bin_type=True)
'\x93\x01\x02\x03'
&gt;&gt;&gt; msgpack.unpackb(_, raw=False)
[1, 2, 3]"><pre>&gt;&gt;&gt; <span class="pl-k">import</span> msgpack
&gt;&gt;&gt; msgpack.packb([<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>], <span class="pl-v">use_bin_type</span><span class="pl-k">=</span><span class="pl-c1">True</span>)
'\x93\x01\x02\x03'
&gt;&gt;&gt; msgpack.unpackb(_, <span class="pl-v">raw</span><span class="pl-k">=</span><span class="pl-c1">False</span>)
[1, 2, 3]</pre></div>
<p dir="auto"><code>unpack</code> unpacks msgpack's array to Python's list, but can also unpack to tuple:</p>
<div class="highlight highlight-text-python-console notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; msgpack.unpackb(b'\x93\x01\x02\x03', use_list=False, raw=False)
(1, 2, 3)"><pre>&gt;&gt;&gt; msgpack.unpackb(<span class="pl-s"><span class="pl-k">b</span><span class="pl-pds">'</span><span class="pl-cce">\x93\x01\x02\x03</span><span class="pl-pds">'</span></span>, <span class="pl-v">use_list</span><span class="pl-k">=</span><span class="pl-c1">False</span>, <span class="pl-v">raw</span><span class="pl-k">=</span><span class="pl-c1">False</span>)
(1, 2, 3)</pre></div>
<p dir="auto">You should always specify the <code>use_list</code> keyword argument for backward compatibility.
See performance issues relating to <code>use_list option</code>_ below.</p>
<p dir="auto">Read the docstring for other options.</p>
<h7 dir="auto">
<a id="user-content-streaming-unpacking" class="anchor" aria-hidden="true" href="#streaming-unpacking"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Streaming unpacking</h7>
<p dir="auto"><code>Unpacker</code> is a "streaming unpacker". It unpacks multiple objects from one
stream (or from bytes provided through its <code>feed</code> method).</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="import msgpack
from io import BytesIO

buf = BytesIO()
for i in range(100):
   buf.write(msgpack.packb(i, use_bin_type=True))

buf.seek(0)

unpacker = msgpack.Unpacker(buf, raw=False)
for unpacked in unpacker:
    print(unpacked)"><pre><span class="pl-k">import</span> <span class="pl-s1">msgpack</span>
<span class="pl-k">from</span> <span class="pl-s1">io</span> <span class="pl-k">import</span> <span class="pl-v">BytesIO</span>

<span class="pl-s1">buf</span> <span class="pl-c1">=</span> <span class="pl-v">BytesIO</span>()
<span class="pl-k">for</span> <span class="pl-s1">i</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-c1">100</span>):
   <span class="pl-s1">buf</span>.<span class="pl-en">write</span>(<span class="pl-s1">msgpack</span>.<span class="pl-en">packb</span>(<span class="pl-s1">i</span>, <span class="pl-s1">use_bin_type</span><span class="pl-c1">=</span><span class="pl-c1">True</span>))

<span class="pl-s1">buf</span>.<span class="pl-en">seek</span>(<span class="pl-c1">0</span>)

<span class="pl-s1">unpacker</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span>.<span class="pl-v">Unpacker</span>(<span class="pl-s1">buf</span>, <span class="pl-s1">raw</span><span class="pl-c1">=</span><span class="pl-c1">False</span>)
<span class="pl-k">for</span> <span class="pl-s1">unpacked</span> <span class="pl-c1">in</span> <span class="pl-s1">unpacker</span>:
    <span class="pl-en">print</span>(<span class="pl-s1">unpacked</span>)</pre></div>
<h7 dir="auto">
<a id="user-content-packingunpacking-of-custom-data-type" class="anchor" aria-hidden="true" href="#packingunpacking-of-custom-data-type"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Packing/unpacking of custom data type</h7>
<p dir="auto">It is also possible to pack/unpack custom data types. Here is an example for
<code>datetime.datetime</code>.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="import datetime
import msgpack

useful_dict = {
    &quot;id&quot;: 1,
    &quot;created&quot;: datetime.datetime.now(),
}

def decode_datetime(obj):
    if '__datetime__' in obj:
        obj = datetime.datetime.strptime(obj[&quot;as_str&quot;], &quot;%Y%m%dT%H:%M:%S.%f&quot;)
    return obj

def encode_datetime(obj):
    if isinstance(obj, datetime.datetime):
        return {'__datetime__': True, 'as_str': obj.strftime(&quot;%Y%m%dT%H:%M:%S.%f&quot;)}
    return obj


packed_dict = msgpack.packb(useful_dict, default=encode_datetime, use_bin_type=True)
this_dict_again = msgpack.unpackb(packed_dict, object_hook=decode_datetime, raw=False)"><pre><span class="pl-k">import</span> <span class="pl-s1">datetime</span>
<span class="pl-k">import</span> <span class="pl-s1">msgpack</span>

<span class="pl-s1">useful_dict</span> <span class="pl-c1">=</span> {
    <span class="pl-s">"id"</span>: <span class="pl-c1">1</span>,
    <span class="pl-s">"created"</span>: <span class="pl-s1">datetime</span>.<span class="pl-s1">datetime</span>.<span class="pl-en">now</span>(),
}

<span class="pl-k">def</span> <span class="pl-en">decode_datetime</span>(<span class="pl-s1">obj</span>):
    <span class="pl-k">if</span> <span class="pl-s">'__datetime__'</span> <span class="pl-c1">in</span> <span class="pl-s1">obj</span>:
        <span class="pl-s1">obj</span> <span class="pl-c1">=</span> <span class="pl-s1">datetime</span>.<span class="pl-s1">datetime</span>.<span class="pl-en">strptime</span>(<span class="pl-s1">obj</span>[<span class="pl-s">"as_str"</span>], <span class="pl-s">"%Y%m%dT%H:%M:%S.%f"</span>)
    <span class="pl-k">return</span> <span class="pl-s1">obj</span>

<span class="pl-k">def</span> <span class="pl-en">encode_datetime</span>(<span class="pl-s1">obj</span>):
    <span class="pl-k">if</span> <span class="pl-en">isinstance</span>(<span class="pl-s1">obj</span>, <span class="pl-s1">datetime</span>.<span class="pl-s1">datetime</span>):
        <span class="pl-k">return</span> {<span class="pl-s">'__datetime__'</span>: <span class="pl-c1">True</span>, <span class="pl-s">'as_str'</span>: <span class="pl-s1">obj</span>.<span class="pl-en">strftime</span>(<span class="pl-s">"%Y%m%dT%H:%M:%S.%f"</span>)}
    <span class="pl-k">return</span> <span class="pl-s1">obj</span>


<span class="pl-s1">packed_dict</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span>.<span class="pl-en">packb</span>(<span class="pl-s1">useful_dict</span>, <span class="pl-s1">default</span><span class="pl-c1">=</span><span class="pl-s1">encode_datetime</span>, <span class="pl-s1">use_bin_type</span><span class="pl-c1">=</span><span class="pl-c1">True</span>)
<span class="pl-s1">this_dict_again</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span>.<span class="pl-en">unpackb</span>(<span class="pl-s1">packed_dict</span>, <span class="pl-s1">object_hook</span><span class="pl-c1">=</span><span class="pl-s1">decode_datetime</span>, <span class="pl-s1">raw</span><span class="pl-c1">=</span><span class="pl-c1">False</span>)</pre></div>
<p dir="auto"><code>Unpacker</code>'s <code>object_hook</code> callback receives a dict; the
<code>object_pairs_hook</code> callback may instead be used to receive a list of
key-value pairs.</p>
<h7 dir="auto">
<a id="user-content-extended-types" class="anchor" aria-hidden="true" href="#extended-types"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Extended types</h7>
<p dir="auto">It is also possible to pack/unpack custom data types using the <strong>ext</strong> type.</p>
<div class="highlight highlight-text-python-console notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import msgpack
&gt;&gt;&gt; import array
&gt;&gt;&gt; def default(obj):
...     if isinstance(obj, array.array) and obj.typecode == 'd':
...         return msgpack.ExtType(42, obj.tostring())
...     raise TypeError(&quot;Unknown type: %r&quot; % (obj,))
...
&gt;&gt;&gt; def ext_hook(code, data):
...     if code == 42:
...         a = array.array('d')
...         a.fromstring(data)
...         return a
...     return ExtType(code, data)
...
&gt;&gt;&gt; data = array.array('d', [1.2, 3.4])
&gt;&gt;&gt; packed = msgpack.packb(data, default=default, use_bin_type=True)
&gt;&gt;&gt; unpacked = msgpack.unpackb(packed, ext_hook=ext_hook, raw=False)
&gt;&gt;&gt; data == unpacked
True"><pre>&gt;&gt;&gt; <span class="pl-k">import</span> msgpack
&gt;&gt;&gt; <span class="pl-k">import</span> array
&gt;&gt;&gt; <span class="pl-k">def</span> <span class="pl-en">default</span>(<span class="pl-smi">obj</span>):
...     <span class="pl-k">if</span> <span class="pl-c1">isinstance</span>(obj, array.array) <span class="pl-k">and</span> obj.typecode <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">'</span>d<span class="pl-pds">'</span></span>:
...         <span class="pl-k">return</span> msgpack.ExtType(<span class="pl-c1">42</span>, obj.tostring())
...     <span class="pl-k">raise</span> <span class="pl-c1">TypeError</span>(<span class="pl-s"><span class="pl-pds">"</span>Unknown type: <span class="pl-c1">%r</span><span class="pl-pds">"</span></span> <span class="pl-k">%</span> (obj,))
...
&gt;&gt;&gt; <span class="pl-k">def</span> <span class="pl-en">ext_hook</span>(<span class="pl-smi">code</span>, <span class="pl-smi">data</span>):
...     <span class="pl-k">if</span> code <span class="pl-k">==</span> <span class="pl-c1">42</span>:
...         a <span class="pl-k">=</span> array.array(<span class="pl-s"><span class="pl-pds">'</span>d<span class="pl-pds">'</span></span>)
...         a.fromstring(data)
...         <span class="pl-k">return</span> a
...     <span class="pl-k">return</span> ExtType(code, data)
...
&gt;&gt;&gt; data <span class="pl-k">=</span> array.array(<span class="pl-s"><span class="pl-pds">'</span>d<span class="pl-pds">'</span></span>, [<span class="pl-c1">1.2</span>, <span class="pl-c1">3.4</span>])
&gt;&gt;&gt; packed <span class="pl-k">=</span> msgpack.packb(data, <span class="pl-v">default</span><span class="pl-k">=</span>default, <span class="pl-v">use_bin_type</span><span class="pl-k">=</span><span class="pl-c1">True</span>)
&gt;&gt;&gt; unpacked <span class="pl-k">=</span> msgpack.unpackb(packed, <span class="pl-v">ext_hook</span><span class="pl-k">=</span>ext_hook, <span class="pl-v">raw</span><span class="pl-k">=</span><span class="pl-c1">False</span>)
&gt;&gt;&gt; data <span class="pl-k">==</span> unpacked
True</pre></div>
<h7 dir="auto">
<a id="user-content-advanced-unpacking-control" class="anchor" aria-hidden="true" href="#advanced-unpacking-control"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Advanced unpacking control</h7>
<p dir="auto">As an alternative to iteration, <code>Unpacker</code> objects provide <code>unpack</code>,
<code>skip</code>, <code>read_array_header</code> and <code>read_map_header</code> methods. The former two
read an entire message from the stream, respectively de-serialising and returning
the result, or ignoring it. The latter two methods return the number of elements
in the upcoming container, so that each element in an array, or key-value pair
in a map, can be unpacked or skipped individually.</p>
<h6 dir="auto">
<a id="user-content-notes" class="anchor" aria-hidden="true" href="#notes"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Notes</h6>
<h7 dir="auto">
<a id="user-content-string-and-binary-type" class="anchor" aria-hidden="true" href="#string-and-binary-type"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>string and binary type</h7>
<p dir="auto">Early versions of msgpack didn't distinguish string and binary types.
The type for representing both string and binary types was named <strong>raw</strong>.</p>
<p dir="auto">You can pack into and unpack from this old spec using <code>use_bin_type=False</code>
and <code>raw=True</code> options.</p>
<div class="highlight highlight-text-python-console notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import msgpack
&gt;&gt;&gt; msgpack.unpackb(msgpack.packb([b'spam', u'eggs'], use_bin_type=False), raw=True)
[b'spam', b'eggs']
&gt;&gt;&gt; msgpack.unpackb(msgpack.packb([b'spam', u'eggs'], use_bin_type=True), raw=False)
[b'spam', 'eggs']"><pre>&gt;&gt;&gt; <span class="pl-k">import</span> msgpack
&gt;&gt;&gt; msgpack.unpackb(msgpack.packb([<span class="pl-s"><span class="pl-k">b</span><span class="pl-pds">'</span>spam<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">'</span>eggs<span class="pl-pds">'</span></span>], <span class="pl-v">use_bin_type</span><span class="pl-k">=</span><span class="pl-c1">False</span>), <span class="pl-v">raw</span><span class="pl-k">=</span><span class="pl-c1">True</span>)
[b'spam', b'eggs']
&gt;&gt;&gt; msgpack.unpackb(msgpack.packb([<span class="pl-s"><span class="pl-k">b</span><span class="pl-pds">'</span>spam<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">'</span>eggs<span class="pl-pds">'</span></span>], <span class="pl-v">use_bin_type</span><span class="pl-k">=</span><span class="pl-c1">True</span>), <span class="pl-v">raw</span><span class="pl-k">=</span><span class="pl-c1">False</span>)
[b'spam', 'eggs']</pre></div>
<h7 dir="auto">
<a id="user-content-ext-type" class="anchor" aria-hidden="true" href="#ext-type"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>ext type</h7>
<p dir="auto">To use the <strong>ext</strong> type, pass <code>msgpack.ExtType</code> object to packer.</p>
<div class="highlight highlight-text-python-console notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import msgpack
&gt;&gt;&gt; packed = msgpack.packb(msgpack.ExtType(42, b'xyzzy'))
&gt;&gt;&gt; msgpack.unpackb(packed)
ExtType(code=42, data='xyzzy')"><pre>&gt;&gt;&gt; <span class="pl-k">import</span> msgpack
&gt;&gt;&gt; packed <span class="pl-k">=</span> msgpack.packb(msgpack.ExtType(<span class="pl-c1">42</span>, <span class="pl-s"><span class="pl-k">b</span><span class="pl-pds">'</span>xyzzy<span class="pl-pds">'</span></span>))
&gt;&gt;&gt; msgpack.unpackb(packed)
ExtType(code=42, data='xyzzy')</pre></div>
<p dir="auto">You can use it with <code>default</code> and <code>ext_hook</code>. See below.</p>
<h7 dir="auto">
<a id="user-content-security" class="anchor" aria-hidden="true" href="#security"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Security</h7>
<p dir="auto">To unpacking data received from unreliable source, msgpack provides
two security options.</p>
<p dir="auto"><code>max_buffer_size</code> (default: <code>100*1024*1024</code>) limits the internal buffer size.
It is used to limit the preallocated list size too.</p>
<p dir="auto"><code>strict_map_key</code> (default: <code>True</code>) limits the type of map keys to bytes and str.
While msgpack spec doesn't limit the types of the map keys,
there is a risk of the hashdos.
If you need to support other types for map keys, use <code>strict_map_key=False</code>.</p>
<h7 dir="auto">
<a id="user-content-performance-tips" class="anchor" aria-hidden="true" href="#performance-tips"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Performance tips</h7>
<p dir="auto">CPython's GC starts when growing allocated object.
This means unpacking may cause useless GC.
You can use <code>gc.disable()</code> when unpacking large message.</p>
<p dir="auto">List is the default sequence type of Python.
But tuple is lighter than list.
You can use <code>use_list=False</code> while unpacking when performance is important.</p>
</article>
  </div>
        </div>
        
        <div id="qs-vsergeev-u-msgpack-python" class="qs"><h4><a href="https://github.com/vsergeev/u-msgpack-python" target="_blank">vsergeev/u-msgpack-python <span class="qs-url">https://github.com/vsergeev/u-msgpack-python</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-u-msgpack-python---" class="anchor" aria-hidden="true" href="#u-msgpack-python---"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>u-msgpack-python <a href="https://travis-ci.org/vsergeev/u-msgpack-python" rel="nofollow"><img src="https://camo.githubusercontent.com/834ea06f8f8557d4c016ea6185ee5503e992798b2eed481f0fca8e7fd3ff7ad6/68747470733a2f2f7472617669732d63692e6f72672f76736572676565762f752d6d73677061636b2d707974686f6e2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/vsergeev/u-msgpack-python.svg?branch=master" style="max-width: 100%;"></a> <a href="https://github.com/vsergeev/u-msgpack-python"><img src="https://camo.githubusercontent.com/6b1b8a71292b73f56ef5b0307100c84231d761349b36678b7271ba614ec51c41/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f72656c656173652f76736572676565762f752d6d73677061636b2d707974686f6e2e7376673f6d61784167653d37323030" alt="GitHub release" data-canonical-src="https://img.shields.io/github/release/vsergeev/u-msgpack-python.svg?maxAge=7200" style="max-width: 100%;"></a> <a href="https://github.com/vsergeev/u-msgpack-python/blob/master/LICENSE"><img src="https://camo.githubusercontent.com/83d3746e5881c1867665223424263d8e604df233d0a11aae0813e0414d433943/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4d49542d626c75652e737667" alt="License" data-canonical-src="https://img.shields.io/badge/license-MIT-blue.svg" style="max-width: 100%;"></a>
</h5>
<p dir="auto">u-msgpack-python is a lightweight <a href="http://msgpack.org/" rel="nofollow">MessagePack</a> serializer and deserializer module written in pure Python, compatible with both Python 2 and 3, as well CPython and PyPy implementations of Python. u-msgpack-python is fully compliant with the latest <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">MessagePack specification</a>.</p>
<p dir="auto">u-msgpack-python is currently distributed on PyPI: <a href="https://pypi.python.org/pypi/u-msgpack-python" rel="nofollow">https://pypi.python.org/pypi/u-msgpack-python</a> and as a single file: <a href="https://raw.github.com/vsergeev/u-msgpack-python/master/umsgpack.py">umsgpack.py</a></p>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<p dir="auto">With pip:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ pip install u-msgpack-python"><pre lang="text" class="notranslate"><code>$ pip install u-msgpack-python
</code></pre></div>
<p dir="auto">With easy_install:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ easy_install u-msgpack-python"><pre lang="text" class="notranslate"><code>$ easy_install u-msgpack-python
</code></pre></div>
<p dir="auto">or simply drop <a href="https://raw.github.com/vsergeev/u-msgpack-python/master/umsgpack.py">umsgpack.py</a> into your project!</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ wget https://raw.github.com/vsergeev/u-msgpack-python/master/umsgpack.py"><pre lang="text" class="notranslate"><code>$ wget https://raw.github.com/vsergeev/u-msgpack-python/master/umsgpack.py
</code></pre></div>
<h6 dir="auto">
<a id="user-content-examples" class="anchor" aria-hidden="true" href="#examples"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Examples</h6>
<p dir="auto">Basic Example:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import umsgpack
&gt;&gt;&gt; umsgpack.packb({u&quot;compact&quot;: True, u&quot;schema&quot;: 0})
b'\x82\xa7compact\xc3\xa6schema\x00'
&gt;&gt;&gt; umsgpack.unpackb(_)
{u'compact': True, u'schema': 0}
&gt;&gt;&gt; "><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">umsgpack</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">umsgpack</span>.<span class="pl-en">packb</span>({<span class="pl-s">u"compact"</span>: <span class="pl-c1">True</span>, <span class="pl-s">u"schema"</span>: <span class="pl-c1">0</span>})
<span class="pl-s">b'<span class="pl-cce">\x82</span><span class="pl-cce">\xa7</span>compact<span class="pl-cce">\xc3</span><span class="pl-cce">\xa6</span>schema<span class="pl-cce">\x00</span>'</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">umsgpack</span>.<span class="pl-en">unpackb</span>(<span class="pl-s1">_</span>)
{<span class="pl-s">u'compact'</span>: <span class="pl-c1">True</span>, <span class="pl-s">u'schema'</span>: <span class="pl-c1">0</span>}
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> </pre></div>
<p dir="auto">A more complicated example:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; umsgpack.packb(
...     [1, True, False, 0xffffffff, {u&quot;foo&quot;: b&quot;\x80\x01\x02&quot;,
...      u&quot;bar&quot;: [1,2,3, {u&quot;a&quot;: [1,2,3,{}]}]}, -1, 2.12345] )
b'\x97\x01\xc3\xc2\xce\xff\xff\xff\xff\x82\xa3foo\xc4\x03\x80\x01\
\x02\xa3bar\x94\x01\x02\x03\x81\xa1a\x94\x01\x02\x03\x80\xff\xcb\
@\x00\xfc\xd3Z\x85\x87\x94'
&gt;&gt;&gt; umsgpack.unpackb(_)
[1, True, False, 4294967295, {u'foo': b'\x80\x01\x02', \
 u'bar': [1, 2, 3, {u'a': [1, 2, 3, {}]}]}, -1, 2.12345]
&gt;&gt;&gt; "><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">umsgpack</span>.<span class="pl-en">packb</span>(
...     [<span class="pl-c1">1</span>, <span class="pl-c1">True</span>, <span class="pl-c1">False</span>, <span class="pl-c1">0xffffffff</span>, {<span class="pl-s">u"foo"</span>: <span class="pl-s">b"<span class="pl-cce">\x80</span><span class="pl-cce">\x01</span><span class="pl-cce">\x02</span>"</span>,
...      <span class="pl-s">u"bar"</span>: [<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>, {<span class="pl-s">u"a"</span>: [<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>,{}]}]}, <span class="pl-c1">-</span><span class="pl-c1">1</span>, <span class="pl-c1">2.12345</span>] )
<span class="pl-s">b'<span class="pl-cce">\x97</span><span class="pl-cce">\x01</span><span class="pl-cce">\xc3</span><span class="pl-cce">\xc2</span><span class="pl-cce">\xce</span><span class="pl-cce">\xff</span><span class="pl-cce">\xff</span><span class="pl-cce">\xff</span><span class="pl-cce">\xff</span><span class="pl-cce">\x82</span><span class="pl-cce">\xa3</span>foo<span class="pl-cce">\xc4</span><span class="pl-cce">\x03</span><span class="pl-cce">\x80</span><span class="pl-cce">\x01</span><span class="pl-cce">\</span></span>
<span class="pl-s"><span class="pl-cce">\x02</span><span class="pl-cce">\xa3</span>bar<span class="pl-cce">\x94</span><span class="pl-cce">\x01</span><span class="pl-cce">\x02</span><span class="pl-cce">\x03</span><span class="pl-cce">\x81</span><span class="pl-cce">\xa1</span>a<span class="pl-cce">\x94</span><span class="pl-cce">\x01</span><span class="pl-cce">\x02</span><span class="pl-cce">\x03</span><span class="pl-cce">\x80</span><span class="pl-cce">\xff</span><span class="pl-cce">\xcb</span><span class="pl-cce">\</span></span>
<span class="pl-s"><span class="pl-cce"></span>@<span class="pl-cce">\x00</span><span class="pl-cce">\xfc</span><span class="pl-cce">\xd3</span>Z<span class="pl-cce">\x85</span><span class="pl-cce">\x87</span><span class="pl-cce">\x94</span>'</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">umsgpack</span>.<span class="pl-en">unpackb</span>(<span class="pl-s1">_</span>)
[<span class="pl-c1">1</span>, <span class="pl-c1">True</span>, <span class="pl-c1">False</span>, <span class="pl-c1">4294967295</span>, {<span class="pl-s">u'foo'</span>: <span class="pl-s">b'<span class="pl-cce">\x80</span><span class="pl-cce">\x01</span><span class="pl-cce">\x02</span>'</span>, \
 <span class="pl-s">u'bar'</span>: [<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>, {<span class="pl-s">u'a'</span>: [<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>, {}]}]}, <span class="pl-c1">-</span><span class="pl-c1">1</span>, <span class="pl-c1">2.12345</span>]
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> </pre></div>
<p dir="auto">Streaming serialization with file-like objects:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; f = open('test.bin', 'wb')
&gt;&gt;&gt; umsgpack.pack({u&quot;compact&quot;: True, u&quot;schema&quot;: 0}, f)
&gt;&gt;&gt; umsgpack.pack([1,2,3], f)
&gt;&gt;&gt; f.close()
&gt;&gt;&gt; 
&gt;&gt;&gt; f = open('test.bin', 'rb')
&gt;&gt;&gt; umsgpack.unpack(f)
{u'compact': True, u'schema': 0}
&gt;&gt;&gt; umsgpack.unpack(f)
[1, 2, 3]
&gt;&gt;&gt; f.close()
&gt;&gt;&gt; "><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">f</span> <span class="pl-c1">=</span> <span class="pl-en">open</span>(<span class="pl-s">'test.bin'</span>, <span class="pl-s">'wb'</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">umsgpack</span>.<span class="pl-en">pack</span>({<span class="pl-s">u"compact"</span>: <span class="pl-c1">True</span>, <span class="pl-s">u"schema"</span>: <span class="pl-c1">0</span>}, <span class="pl-s1">f</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">umsgpack</span>.<span class="pl-en">pack</span>([<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>], <span class="pl-s1">f</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">f</span>.<span class="pl-en">close</span>()
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> 
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">f</span> <span class="pl-c1">=</span> <span class="pl-en">open</span>(<span class="pl-s">'test.bin'</span>, <span class="pl-s">'rb'</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">umsgpack</span>.<span class="pl-en">unpack</span>(<span class="pl-s1">f</span>)
{<span class="pl-s">u'compact'</span>: <span class="pl-c1">True</span>, <span class="pl-s">u'schema'</span>: <span class="pl-c1">0</span>}
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">umsgpack</span>.<span class="pl-en">unpack</span>(<span class="pl-s1">f</span>)
[<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>]
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">f</span>.<span class="pl-en">close</span>()
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> </pre></div>
<p dir="auto">Serializing and deserializing a raw Ext type:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; # Create an Ext object with type 5 and data b&quot;\x01\x02\x03&quot;
... foo = umsgpack.Ext(5, b&quot;\x01\x02\x03&quot;)
&gt;&gt;&gt; umsgpack.packb({u&quot;stuff&quot;: foo, u&quot;awesome&quot;: True})
b'\x82\xa5stuff\xc7\x03\x05\x01\x02\x03\xa7awesome\xc3'
&gt;&gt;&gt; 
&gt;&gt;&gt; bar = umsgpack.unpackb(_)
&gt;&gt;&gt; print(bar['stuff'])
Ext Object (Type: 5, Data: 0x01 0x02 0x03)
&gt;&gt;&gt; bar['stuff'].type
5
&gt;&gt;&gt; bar['stuff'].data
b'\x01\x02\x03'
&gt;&gt;&gt; "><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-c"># Create an Ext object with type 5 and data b"\x01\x02\x03"</span>
... <span class="pl-s1">foo</span> <span class="pl-c1">=</span> <span class="pl-s1">umsgpack</span>.<span class="pl-v">Ext</span>(<span class="pl-c1">5</span>, <span class="pl-s">b"<span class="pl-cce">\x01</span><span class="pl-cce">\x02</span><span class="pl-cce">\x03</span>"</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">umsgpack</span>.<span class="pl-en">packb</span>({<span class="pl-s">u"stuff"</span>: <span class="pl-s1">foo</span>, <span class="pl-s">u"awesome"</span>: <span class="pl-c1">True</span>})
<span class="pl-s">b'<span class="pl-cce">\x82</span><span class="pl-cce">\xa5</span>stuff<span class="pl-cce">\xc7</span><span class="pl-cce">\x03</span><span class="pl-cce">\x05</span><span class="pl-cce">\x01</span><span class="pl-cce">\x02</span><span class="pl-cce">\x03</span><span class="pl-cce">\xa7</span>awesome<span class="pl-cce">\xc3</span>'</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> 
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">bar</span> <span class="pl-c1">=</span> <span class="pl-s1">umsgpack</span>.<span class="pl-en">unpackb</span>(<span class="pl-s1">_</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-en">print</span>(<span class="pl-s1">bar</span>[<span class="pl-s">'stuff'</span>])
<span class="pl-v">Ext</span> <span class="pl-v">Object</span> (<span class="pl-v">Type</span>: <span class="pl-c1">5</span>, <span class="pl-v">Data</span>: <span class="pl-c1">0x01</span> <span class="pl-c1">0x02</span> <span class="pl-c1">0x03</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">bar</span>[<span class="pl-s">'stuff'</span>].<span class="pl-s1">type</span>
<span class="pl-c1">5</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">bar</span>[<span class="pl-s">'stuff'</span>].<span class="pl-s1">data</span>
<span class="pl-s">b'<span class="pl-cce">\x01</span><span class="pl-cce">\x02</span><span class="pl-cce">\x03</span>'</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> </pre></div>
<p dir="auto">Serializing and deserializing application-defined types with <code>ext_serializable()</code>:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; @umsgpack.ext_serializable(0x50)
... class Point(collections.namedtuple('Point', ['x', 'y'])):
...     def packb(self):
...         return struct.pack(&quot;&gt;ii&quot;, self.x, self.y)
...     @staticmethod
...     def unpackb(data):
...         return Point(*struct.unpack(&quot;&gt;ii&quot;, data))
... 
&gt;&gt;&gt; umsgpack.packb(Point(1, 2))
b'\xd7P\x00\x00\x00\x01\x00\x00\x00\x02'
&gt;&gt;&gt; umsgpack.unpackb(_)
Point(x=1, y=2)
&gt;&gt;&gt; "><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-en">@<span class="pl-s1">umsgpack</span>.<span class="pl-en">ext_serializable</span>(<span class="pl-c1">0x50</span>)</span>
... <span class="pl-k">class</span> <span class="pl-v">Point</span>(<span class="pl-s1">collections</span>.<span class="pl-en">namedtuple</span>(<span class="pl-s">'Point'</span>, [<span class="pl-s">'x'</span>, <span class="pl-s">'y'</span>])):
...     <span class="pl-k">def</span> <span class="pl-en">packb</span>(<span class="pl-s1">self</span>):
...         <span class="pl-k">return</span> <span class="pl-s1">struct</span>.<span class="pl-en">pack</span>(<span class="pl-s">"&gt;ii"</span>, <span class="pl-s1">self</span>.<span class="pl-s1">x</span>, <span class="pl-s1">self</span>.<span class="pl-s1">y</span>)
...     @<span class="pl-s1">staticmethod</span>
...     <span class="pl-k">def</span> <span class="pl-en">unpackb</span>(<span class="pl-s1">data</span>):
...         <span class="pl-k">return</span> <span class="pl-v">Point</span>(<span class="pl-c1">*</span><span class="pl-s1">struct</span>.<span class="pl-en">unpack</span>(<span class="pl-s">"&gt;ii"</span>, <span class="pl-s1">data</span>))
... 
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">umsgpack</span>.<span class="pl-en">packb</span>(<span class="pl-v">Point</span>(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>))
<span class="pl-s">b'<span class="pl-cce">\xd7</span>P<span class="pl-cce">\x00</span><span class="pl-cce">\x00</span><span class="pl-cce">\x00</span><span class="pl-cce">\x01</span><span class="pl-cce">\x00</span><span class="pl-cce">\x00</span><span class="pl-cce">\x00</span><span class="pl-cce">\x02</span>'</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">umsgpack</span>.<span class="pl-en">unpackb</span>(<span class="pl-s1">_</span>)
<span class="pl-v">Point</span>(<span class="pl-s1">x</span><span class="pl-c1">=</span><span class="pl-c1">1</span>, <span class="pl-s1">y</span><span class="pl-c1">=</span><span class="pl-c1">2</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> </pre></div>
<p dir="auto">Serializing and deserializing application-defined types with Ext handlers:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; umsgpack.packb([complex(1,2), decimal.Decimal(&quot;0.31&quot;)],
...  ext_handlers = {
...   complex: lambda obj:
...     umsgpack.Ext(0x30, struct.pack(&quot;ff&quot;, obj.real, obj.imag)),
...   decimal.Decimal: lambda obj:
...     umsgpack.Ext(0x40, str(obj).encode()),
... })
b'\x92\xd70\x00\x00\x80?\x00\x00\x00@\xd6@0.31'
&gt;&gt;&gt; umsgpack.unpackb(_,
...  ext_handlers = {
...   0x30: lambda ext:
...     complex(*struct.unpack(&quot;ff&quot;, ext.data)),
...   0x40: lambda ext:
...     decimal.Decimal(ext.data.decode()),
... })
[(1+2j), Decimal('0.31')]
&gt;&gt;&gt; "><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">umsgpack</span>.<span class="pl-en">packb</span>([<span class="pl-en">complex</span>(<span class="pl-c1">1</span>,<span class="pl-c1">2</span>), <span class="pl-s1">decimal</span>.<span class="pl-v">Decimal</span>(<span class="pl-s">"0.31"</span>)],
...  <span class="pl-s1">ext_handlers</span> <span class="pl-c1">=</span> {
...   <span class="pl-s1">complex</span>: <span class="pl-k">lambda</span> <span class="pl-s1">obj</span>:
...     <span class="pl-s1">umsgpack</span>.<span class="pl-v">Ext</span>(<span class="pl-c1">0x30</span>, <span class="pl-s1">struct</span>.<span class="pl-en">pack</span>(<span class="pl-s">"ff"</span>, <span class="pl-s1">obj</span>.<span class="pl-s1">real</span>, <span class="pl-s1">obj</span>.<span class="pl-s1">imag</span>)),
...   <span class="pl-s1">decimal</span>.<span class="pl-v">Decimal</span>: <span class="pl-k">lambda</span> <span class="pl-s1">obj</span>:
...     <span class="pl-s1">umsgpack</span>.<span class="pl-v">Ext</span>(<span class="pl-c1">0x40</span>, <span class="pl-en">str</span>(<span class="pl-s1">obj</span>).<span class="pl-en">encode</span>()),
... })
<span class="pl-s">b'<span class="pl-cce">\x92</span><span class="pl-cce">\xd7</span>0<span class="pl-cce">\x00</span><span class="pl-cce">\x00</span><span class="pl-cce">\x80</span>?<span class="pl-cce">\x00</span><span class="pl-cce">\x00</span><span class="pl-cce">\x00</span>@<span class="pl-cce">\xd6</span>@0.31'</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">umsgpack</span>.<span class="pl-en">unpackb</span>(<span class="pl-s1">_</span>,
...  <span class="pl-s1">ext_handlers</span> <span class="pl-c1">=</span> {
...   <span class="pl-c1">0x30</span>: <span class="pl-k">lambda</span> <span class="pl-s1">ext</span>:
...     <span class="pl-en">complex</span>(<span class="pl-c1">*</span><span class="pl-s1">struct</span>.<span class="pl-en">unpack</span>(<span class="pl-s">"ff"</span>, <span class="pl-s1">ext</span>.<span class="pl-s1">data</span>)),
...   <span class="pl-c1">0x40</span>: <span class="pl-k">lambda</span> <span class="pl-s1">ext</span>:
...     <span class="pl-s1">decimal</span>.<span class="pl-v">Decimal</span>(<span class="pl-s1">ext</span>.<span class="pl-s1">data</span>.<span class="pl-en">decode</span>()),
... })
[(<span class="pl-c1">1</span><span class="pl-c1">+</span><span class="pl-c1">2j</span>), <span class="pl-v">Decimal</span>(<span class="pl-s">'0.31'</span>)]
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> </pre></div>
<p dir="auto">Python standard library style names <code>dump</code>, <code>dumps</code>, <code>load</code>, <code>loads</code> are also
available:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; umsgpack.dumps({u&quot;compact&quot;: True, u&quot;schema&quot;: 0})
b'\x82\xa7compact\xc3\xa6schema\x00'
&gt;&gt;&gt; umsgpack.loads(_)
{u'compact': True, u'schema': 0}
&gt;&gt;&gt; 
&gt;&gt;&gt; f = open('test.bin', 'wb')
&gt;&gt;&gt; umsgpack.dump({u&quot;compact&quot;: True, u&quot;schema&quot;: 0}, f)
&gt;&gt;&gt; f.close()
&gt;&gt;&gt; 
&gt;&gt;&gt; f = open('test.bin', 'rb')
&gt;&gt;&gt; umsgpack.load(f)
{u'compact': True, u'schema': 0}
&gt;&gt;&gt; "><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">umsgpack</span>.<span class="pl-en">dumps</span>({<span class="pl-s">u"compact"</span>: <span class="pl-c1">True</span>, <span class="pl-s">u"schema"</span>: <span class="pl-c1">0</span>})
<span class="pl-s">b'<span class="pl-cce">\x82</span><span class="pl-cce">\xa7</span>compact<span class="pl-cce">\xc3</span><span class="pl-cce">\xa6</span>schema<span class="pl-cce">\x00</span>'</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">umsgpack</span>.<span class="pl-en">loads</span>(<span class="pl-s1">_</span>)
{<span class="pl-s">u'compact'</span>: <span class="pl-c1">True</span>, <span class="pl-s">u'schema'</span>: <span class="pl-c1">0</span>}
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> 
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">f</span> <span class="pl-c1">=</span> <span class="pl-en">open</span>(<span class="pl-s">'test.bin'</span>, <span class="pl-s">'wb'</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">umsgpack</span>.<span class="pl-en">dump</span>({<span class="pl-s">u"compact"</span>: <span class="pl-c1">True</span>, <span class="pl-s">u"schema"</span>: <span class="pl-c1">0</span>}, <span class="pl-s1">f</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">f</span>.<span class="pl-en">close</span>()
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> 
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">f</span> <span class="pl-c1">=</span> <span class="pl-en">open</span>(<span class="pl-s">'test.bin'</span>, <span class="pl-s">'rb'</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">umsgpack</span>.<span class="pl-en">load</span>(<span class="pl-s1">f</span>)
{<span class="pl-s">u'compact'</span>: <span class="pl-c1">True</span>, <span class="pl-s">u'schema'</span>: <span class="pl-c1">0</span>}
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> </pre></div>
<h6 dir="auto">
<a id="user-content-more-information" class="anchor" aria-hidden="true" href="#more-information"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>More Information</h6>
<p dir="auto">See the <a href="https://github.com/vsergeev/u-msgpack-python">project page</a> for more information on options, exceptions, behavior, and testing.</p>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<p dir="auto">u-msgpack-python is MIT licensed. See the included <code>LICENSE</code> file for more details.</p>
</article>
  </div>
        </div>
        
        <div id="qs-polyglotted-msgpack-python" class="qs"><h4><a href="https://github.com/polyglotted/msgpack-python" target="_blank">polyglotted/msgpack-python <span class="qs-url">https://github.com/polyglotted/msgpack-python</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h7 dir="auto">
<a id="user-content-msgpack" class="anchor" aria-hidden="true" href="#msgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack</h7>
</article>
  </div>
        </div>
        
        <div id="qs-lekma-mood-msgpack" class="qs"><h4><a href="https://github.com/lekma/mood.msgpack" target="_blank">lekma/mood.msgpack <span class="qs-url">https://github.com/lekma/mood.msgpack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-moodmsgpack" class="anchor" aria-hidden="true" href="#moodmsgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>mood.msgpack</h5>
<p dir="auto">Python MessagePack implementation</p>
<p dir="auto"><a href="https://msgpack.org/" rel="nofollow">MessagePack</a> is an efficient binary serialization
format. It lets you exchange data among multiple languages like JSON. But it's
faster and smaller. Small integers are encoded into a single byte, and typical
short strings require only one extra byte in addition to the strings themselves.</p>
<p dir="auto"><strong>Note:</strong> This implementation is designed as a
<a href="https://docs.python.org/3.8/library/pickle.html" rel="nofollow">pickle</a> substitute.
It does not expose MessagePack's extensions mechanism but uses it internally to
pack/unpack non-standard types.</p>
<p dir="auto">The following documentation is largely adapted from Python's <a href="https://docs.python.org/3.8/library/pickle.html" rel="nofollow">pickle module
documentation</a>.</p>
<p dir="auto"><strong>See also:</strong> <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">MessagePack specification</a></p>
<hr>
<a name="user-content-what-can-be-packed-and-unpacked"></a>
<h6 dir="auto">
<a id="user-content-what-can-be-packed-and-unpacked" class="anchor" aria-hidden="true" href="#what-can-be-packed-and-unpacked"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>What can be packed and unpacked?</h6>
<p dir="auto">The following standard types can be packed/unpacked:</p>
<ul dir="auto">
<li>
<code>None</code>, <code>True</code> and <code>False</code>
</li>
<li>integers, floating point numbers</li>
<li>strings, bytes</li>
<li>tuples and dictionaries containing only packable objects</li>
</ul>
<p dir="auto">Additionally, the following Python types are supported by default:</p>
<ul dir="auto">
<li>complex numbers</li>
<li>bytearrays</li>
<li>lists, sets and frozensets containing only packable objects</li>
<li>classes (these <strong>must</strong> be <a href="#registered">registered</a> in order to be unpacked)</li>
<li>instances of classes whose <code>__reduce__</code> method conforms to the interface
defined in <a href="#packing-class-instances">Packing Class Instances</a>
</li>
</ul>
<p dir="auto">The following MessagePack extension types are also supported:</p>
<ul dir="auto">
<li>
<a href="#timestamp">Timestamp</a> (<a href="https://github.com/msgpack/msgpack/blob/master/spec.md#timestamp-extension-type">specification</a>)</li>
</ul>
<a name="user-content-module-interface"></a>
<h6 dir="auto">
<a id="user-content-module-interface" class="anchor" aria-hidden="true" href="#module-interface"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Module Interface</h6>
<dl id="user-content-registered">
<dt>register(object)</dt>
<dd>Add <em>object</em> to the <em>registry</em>. <em>object</em> must be a class or a singleton
(instance whose <code>__reduce__</code> method returns a string).</dd>
<dt>pack(object)</dt>
<dd>Return the packed representation of <em>object</em> as a bytearray object.</dd>
<dt>unpack(message)</dt>
<dd>Read a packed object hierarchy from a <a href="https://docs.python.org/3.8/glossary.html#term-bytes-like-object" rel="nofollow">bytes-like</a>
<em>message</em> and return the reconstituted object hierarchy specified therein.</dd>
</dl>
<a name="user-content-packing-class-instances"></a>
<h6 dir="auto">
<a id="user-content-packing-class-instances" class="anchor" aria-hidden="true" href="#packing-class-instances"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Packing Class Instances</h6>
<p dir="auto"><strong>Note:</strong> This being chiefly based on <a href="https://docs.python.org/3.8/library/pickle.html#object.__reduce__" rel="nofollow">pickle's object.__reduce__() interface</a>,
most built-in objects and most objects defined in the <a href="https://docs.python.org/3.8/library/index.html" rel="nofollow">Python standard library</a> already conform to it.</p>
<dl id="user-content-reduce">
<dt>object.__reduce__()</dt>
<dd>
<p dir="auto">The interface is currently defined as follows: the <code>__reduce__</code> method
takes no argument and shall return either a unique string or preferably a
tuple.</p>
<p dir="auto">If a string is returned, the string should be interpreted as the name of a
global variable. This behaviour is typically useful for singletons (and is
the case for built-in functions).</p>
<p dir="auto">When a tuple is returned, it must be between two and five items long.
Optional items can either be omitted, or <code>None</code> can be provided as their
value. The semantics of each item are in order:</p>
<ul dir="auto">
<li>A callable object that will be invoked to create the initial version of
the object (it <strong>must</strong> be <a href="#registered">registered</a> in order to be unpacked).</li>
<li>A tuple of arguments for the callable object. An empty tuple must be given
if the callable does not accept any argument.</li>
<li>Optionally, the object's state, which will be passed to the object's
<code>__setstate__</code> method. If the object has no such method then, the value
must be a dictionary and it will be merged to the object's <code>__dict__</code>
attribute.</li>
<li>Optionally, a sequence/iterator yielding successive items. These items
will be appended to the object using <code>object.extend(items)</code>. This is
primarily used for list subclasses, but may be used by other classes as
long as they have an <code>extend</code> method with the appropriate signature. If
the object has no such method then, an in-place concatenation will be
attempted (equivalent to <code>object += items</code>).</li>
<li>Optionally, a dict/mapping or a sequence/iterator yielding successive
key-value pairs.  These pairs will be stored in the object using
<code>object.update(pairs)</code>. This is primarily used for dictionary subclasses,
but may be used by other classes as long as they have an <code>update</code> method
with the appropriate signature. If the object has no such method then, an
attempt will be made to store these pairs using <code>object[key] = value</code>.</li>
</ul>
<p dir="auto">A simple example:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; from mood.msgpack import pack, unpack, register
&gt;&gt;&gt; class Kiki(object):
...     def __init__(self, a, b):
...         self.a = a
...         self.b = b
...     def __repr__(self):
...         return &quot;&lt;Kiki object: a={0.a}, b={0.b}&gt;&quot;.format(self)
...     def __reduce__(self):
...         return (Kiki, (self.a, self.b))
...
&gt;&gt;&gt; k = Kiki(1, 2)
&gt;&gt;&gt; k
&lt;Kiki object: a=1, b=2&gt;
&gt;&gt;&gt; b = pack(k)
&gt;&gt;&gt; b
bytearray(b'\xc7\x15\x7f\x92\xc7\x0e\x06\xa8__main__\xa4Kiki\x92\x01\x02')
&gt;&gt;&gt; unpack(b)
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
TypeError: cannot unpack &lt;class '__main__.Kiki'&gt;
&gt;&gt;&gt; register(Kiki)
&gt;&gt;&gt; unpack(b)
&lt;Kiki object: a=1, b=2&gt;
&gt;&gt;&gt;"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">from</span> <span class="pl-s1">mood</span>.<span class="pl-s1">msgpack</span> <span class="pl-k">import</span> <span class="pl-s1">pack</span>, <span class="pl-s1">unpack</span>, <span class="pl-s1">register</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">class</span> <span class="pl-v">Kiki</span>(<span class="pl-s1">object</span>):
...     <span class="pl-k">def</span> <span class="pl-en">__init__</span>(<span class="pl-s1">self</span>, <span class="pl-s1">a</span>, <span class="pl-s1">b</span>):
...         <span class="pl-s1">self</span>.<span class="pl-s1">a</span> <span class="pl-c1">=</span> <span class="pl-s1">a</span>
...         <span class="pl-s1">self</span>.<span class="pl-s1">b</span> <span class="pl-c1">=</span> <span class="pl-s1">b</span>
...     <span class="pl-k">def</span> <span class="pl-en">__repr__</span>(<span class="pl-s1">self</span>):
...         <span class="pl-k">return</span> <span class="pl-s">"&lt;Kiki object: a={0.a}, b={0.b}&gt;"</span>.<span class="pl-en">format</span>(<span class="pl-s1">self</span>)
...     <span class="pl-k">def</span> <span class="pl-en">__reduce__</span>(<span class="pl-s1">self</span>):
...         <span class="pl-k">return</span> (<span class="pl-v">Kiki</span>, (<span class="pl-s1">self</span>.<span class="pl-s1">a</span>, <span class="pl-s1">self</span>.<span class="pl-s1">b</span>))
...
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">k</span> <span class="pl-c1">=</span> <span class="pl-v">Kiki</span>(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">k</span>
<span class="pl-c1">&lt;</span><span class="pl-v">Kiki</span> <span class="pl-s1">object</span>: <span class="pl-s1">a</span><span class="pl-c1">=</span><span class="pl-c1">1</span>, <span class="pl-s1">b</span><span class="pl-c1">=</span><span class="pl-c1">2</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">b</span> <span class="pl-c1">=</span> <span class="pl-en">pack</span>(<span class="pl-s1">k</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">b</span>
<span class="pl-en">bytearray</span>(<span class="pl-s">b'<span class="pl-cce">\xc7</span><span class="pl-cce">\x15</span><span class="pl-cce">\x7f</span><span class="pl-cce">\x92</span><span class="pl-cce">\xc7</span><span class="pl-cce">\x0e</span><span class="pl-cce">\x06</span><span class="pl-cce">\xa8</span>__main__<span class="pl-cce">\xa4</span>Kiki<span class="pl-cce">\x92</span><span class="pl-cce">\x01</span><span class="pl-cce">\x02</span>'</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-en">unpack</span>(<span class="pl-s1">b</span>)
<span class="pl-v">Traceback</span> (<span class="pl-s1">most</span> <span class="pl-s1">recent</span> <span class="pl-s1">call</span> <span class="pl-s1">last</span>):
  <span class="pl-v">File</span> <span class="pl-s">"&lt;stdin&gt;"</span>, <span class="pl-s1">line</span> <span class="pl-c1">1</span>, <span class="pl-s1">in</span> <span class="pl-c1">&lt;</span><span class="pl-s1">module</span><span class="pl-c1">&gt;</span>
<span class="pl-v">TypeError</span>: <span class="pl-s1">cannot</span> <span class="pl-s1">unpack</span> <span class="pl-c1">&lt;</span><span class="pl-s1">class</span> <span class="pl-s">'__main__.Kiki'</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-en">register</span>(<span class="pl-v">Kiki</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-en">unpack</span>(<span class="pl-s1">b</span>)
<span class="pl-c1">&lt;</span><span class="pl-v">Kiki</span> <span class="pl-s1">object</span>: <span class="pl-s1">a</span><span class="pl-c1">=</span><span class="pl-c1">1</span>, <span class="pl-s1">b</span><span class="pl-c1">=</span><span class="pl-c1">2</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span></pre></div>
</dd>
</dl>
<a name="user-content-timestamp-datetime"></a>
<h6 dir="auto">
<a id="user-content-timestamp-datetime-" class="anchor" aria-hidden="true" href="#timestamp-datetime-"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Timestamp, datetime, ...</h6>
<p dir="auto">Packing/unpacking objects from the <a href="https://docs.python.org/3.8/library/datetime.html#module-datetime" rel="nofollow">datetime</a> module is
straightforward.</p>
<p dir="auto">In the packing process:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import datetime
&gt;&gt;&gt; from mood import msgpack
&gt;&gt;&gt; d = datetime.datetime.now()
&gt;&gt;&gt; d
datetime.datetime(2020, 7, 31, 9, 41, 4, 139362)
&gt;&gt;&gt; msgpack.pack(d)
bytearray(b'\xc7#\x7f\x92\xc7\x12\x06\xa8datetime\xa8datetime\x91\xc4\n\x07\xe4\x07\x1f\t)\x04\x02 b')
&gt;&gt;&gt;"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">datetime</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">from</span> <span class="pl-s1">mood</span> <span class="pl-k">import</span> <span class="pl-s1">msgpack</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">d</span> <span class="pl-c1">=</span> <span class="pl-s1">datetime</span>.<span class="pl-s1">datetime</span>.<span class="pl-en">now</span>()
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">d</span>
<span class="pl-s1">datetime</span>.<span class="pl-en">datetime</span>(<span class="pl-c1">2020</span>, <span class="pl-c1">7</span>, <span class="pl-c1">31</span>, <span class="pl-c1">9</span>, <span class="pl-c1">41</span>, <span class="pl-c1">4</span>, <span class="pl-c1">139362</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">msgpack</span>.<span class="pl-en">pack</span>(<span class="pl-s1">d</span>)
<span class="pl-en">bytearray</span>(<span class="pl-s">b'<span class="pl-cce">\xc7</span>#<span class="pl-cce">\x7f</span><span class="pl-cce">\x92</span><span class="pl-cce">\xc7</span><span class="pl-cce">\x12</span><span class="pl-cce">\x06</span><span class="pl-cce">\xa8</span>datetime<span class="pl-cce">\xa8</span>datetime<span class="pl-cce">\x91</span><span class="pl-cce">\xc4</span><span class="pl-cce">\n</span><span class="pl-cce">\x07</span><span class="pl-cce">\xe4</span><span class="pl-cce">\x07</span><span class="pl-cce">\x1f</span><span class="pl-cce">\t</span>)<span class="pl-cce">\x04</span><span class="pl-cce">\x02</span> b'</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span></pre></div>
<p dir="auto">In the unpacking process:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import datetime
&gt;&gt;&gt; from mood import msgpack
&gt;&gt;&gt; msgpack.register(datetime.datetime)
&gt;&gt;&gt; msgpack.unpack(bytearray(b'\xc7#\x7f\x92\xc7\x12\x06\xa8datetime\xa8datetime\x91\xc4\n\x07\xe4\x07\x1f\t)\x04\x02 b'))
datetime.datetime(2020, 7, 31, 9, 41, 4, 139362)
&gt;&gt;&gt;"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">datetime</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">from</span> <span class="pl-s1">mood</span> <span class="pl-k">import</span> <span class="pl-s1">msgpack</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">msgpack</span>.<span class="pl-en">register</span>(<span class="pl-s1">datetime</span>.<span class="pl-s1">datetime</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">msgpack</span>.<span class="pl-en">unpack</span>(<span class="pl-en">bytearray</span>(<span class="pl-s">b'<span class="pl-cce">\xc7</span>#<span class="pl-cce">\x7f</span><span class="pl-cce">\x92</span><span class="pl-cce">\xc7</span><span class="pl-cce">\x12</span><span class="pl-cce">\x06</span><span class="pl-cce">\xa8</span>datetime<span class="pl-cce">\xa8</span>datetime<span class="pl-cce">\x91</span><span class="pl-cce">\xc4</span><span class="pl-cce">\n</span><span class="pl-cce">\x07</span><span class="pl-cce">\xe4</span><span class="pl-cce">\x07</span><span class="pl-cce">\x1f</span><span class="pl-cce">\t</span>)<span class="pl-cce">\x04</span><span class="pl-cce">\x02</span> b'</span>))
<span class="pl-s1">datetime</span>.<span class="pl-en">datetime</span>(<span class="pl-c1">2020</span>, <span class="pl-c1">7</span>, <span class="pl-c1">31</span>, <span class="pl-c1">9</span>, <span class="pl-c1">41</span>, <span class="pl-c1">4</span>, <span class="pl-c1">139362</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span></pre></div>
<p dir="auto">Packing/unpacking <a href="#timestamp">Timestamp</a> objects is also straightforward:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import time
&gt;&gt;&gt; from mood import msgpack
&gt;&gt;&gt; t = msgpack.Timestamp.fromtimestamp(time.time())
&gt;&gt;&gt; t
mood.msgpack.Timestamp(seconds=1596180901, nanoseconds=502492666)
&gt;&gt;&gt; msgpack.pack(t)
bytearray(b'\xd7\xffw\xcd\xb7\xe8_#\xc9\xa5')
&gt;&gt;&gt;"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">time</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">from</span> <span class="pl-s1">mood</span> <span class="pl-k">import</span> <span class="pl-s1">msgpack</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">t</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span>.<span class="pl-v">Timestamp</span>.<span class="pl-en">fromtimestamp</span>(<span class="pl-s1">time</span>.<span class="pl-en">time</span>())
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">t</span>
<span class="pl-s1">mood</span>.<span class="pl-s1">msgpack</span>.<span class="pl-v">Timestamp</span>(<span class="pl-s1">seconds</span><span class="pl-c1">=</span><span class="pl-c1">1596180901</span>, <span class="pl-s1">nanoseconds</span><span class="pl-c1">=</span><span class="pl-c1">502492666</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">msgpack</span>.<span class="pl-en">pack</span>(<span class="pl-s1">t</span>)
<span class="pl-en">bytearray</span>(<span class="pl-s">b'<span class="pl-cce">\xd7</span><span class="pl-cce">\xff</span>w<span class="pl-cce">\xcd</span><span class="pl-cce">\xb7</span><span class="pl-cce">\xe8</span>_#<span class="pl-cce">\xc9</span><span class="pl-cce">\xa5</span>'</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span></pre></div>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; from mood import msgpack
&gt;&gt;&gt; msgpack.unpack(bytearray(b'\xd7\xffw\xcd\xb7\xe8_#\xc9\xa5'))
mood.msgpack.Timestamp(seconds=1596180901, nanoseconds=502492666)
&gt;&gt;&gt;"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">from</span> <span class="pl-s1">mood</span> <span class="pl-k">import</span> <span class="pl-s1">msgpack</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">msgpack</span>.<span class="pl-en">unpack</span>(<span class="pl-en">bytearray</span>(<span class="pl-s">b'<span class="pl-cce">\xd7</span><span class="pl-cce">\xff</span>w<span class="pl-cce">\xcd</span><span class="pl-cce">\xb7</span><span class="pl-cce">\xe8</span>_#<span class="pl-cce">\xc9</span><span class="pl-cce">\xa5</span>'</span>))
<span class="pl-s1">mood</span>.<span class="pl-s1">msgpack</span>.<span class="pl-v">Timestamp</span>(<span class="pl-s1">seconds</span><span class="pl-c1">=</span><span class="pl-c1">1596180901</span>, <span class="pl-s1">nanoseconds</span><span class="pl-c1">=</span><span class="pl-c1">502492666</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span></pre></div>
<p dir="auto">Converting between <a href="#timestamp">Timestamp</a> and <a href="https://docs.python.org/3.8/library/datetime.html#datetime.datetime" rel="nofollow">datetime.datetime</a> objects:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import datetime
&gt;&gt;&gt; from mood import msgpack
&gt;&gt;&gt; d1 = datetime.datetime.now()
&gt;&gt;&gt; d1
datetime.datetime(2020, 7, 31, 9, 31, 18, 40406)
&gt;&gt;&gt; t = msgpack.Timestamp.fromtimestamp(d1.timestamp())
&gt;&gt;&gt; t
mood.msgpack.Timestamp(seconds=1596180678, nanoseconds=040405989)
&gt;&gt;&gt; d2 = datetime.datetime.fromtimestamp(t.timestamp())
&gt;&gt;&gt; d2
datetime.datetime(2020, 7, 31, 9, 31, 18, 40406)
&gt;&gt;&gt; d2 == d1
True
&gt;&gt;&gt;"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">datetime</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">from</span> <span class="pl-s1">mood</span> <span class="pl-k">import</span> <span class="pl-s1">msgpack</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">d1</span> <span class="pl-c1">=</span> <span class="pl-s1">datetime</span>.<span class="pl-s1">datetime</span>.<span class="pl-en">now</span>()
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">d1</span>
<span class="pl-s1">datetime</span>.<span class="pl-en">datetime</span>(<span class="pl-c1">2020</span>, <span class="pl-c1">7</span>, <span class="pl-c1">31</span>, <span class="pl-c1">9</span>, <span class="pl-c1">31</span>, <span class="pl-c1">18</span>, <span class="pl-c1">40406</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">t</span> <span class="pl-c1">=</span> <span class="pl-s1">msgpack</span>.<span class="pl-v">Timestamp</span>.<span class="pl-en">fromtimestamp</span>(<span class="pl-s1">d1</span>.<span class="pl-en">timestamp</span>())
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">t</span>
<span class="pl-s1">mood</span>.<span class="pl-s1">msgpack</span>.<span class="pl-v">Timestamp</span>(<span class="pl-s1">seconds</span><span class="pl-c1">=</span><span class="pl-c1">1596180678</span>, <span class="pl-s1">nanoseconds</span><span class="pl-c1">=</span><span class="pl-c1">040405989</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">d2</span> <span class="pl-c1">=</span> <span class="pl-s1">datetime</span>.<span class="pl-s1">datetime</span>.<span class="pl-en">fromtimestamp</span>(<span class="pl-s1">t</span>.<span class="pl-en">timestamp</span>())
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">d2</span>
<span class="pl-s1">datetime</span>.<span class="pl-en">datetime</span>(<span class="pl-c1">2020</span>, <span class="pl-c1">7</span>, <span class="pl-c1">31</span>, <span class="pl-c1">9</span>, <span class="pl-c1">31</span>, <span class="pl-c1">18</span>, <span class="pl-c1">40406</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">d2</span> <span class="pl-c1">==</span> <span class="pl-s1">d1</span>
<span class="pl-c1">True</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span></pre></div>
<p dir="auto"><strong>Note:</strong> <a href="#timestamp">Timestamp</a> objects do not carry timezone information and naive
<a href="https://docs.python.org/3.8/library/datetime.html#datetime.datetime" rel="nofollow">datetime.datetime</a>
instances are assumed to represent local time.</p>
<dl id="user-content-timestamp">
<dt>Timestamp(seconds[, nanoseconds=0])</dt>
<dd>
<ul dir="auto">
<li>
<dl>
<dt>seconds (int)</dt>
<dd>Number of seconds that have elapsed since 1970-01-01 00:00:00 UTC.</dd>
</dl>
</li>
<li>
<dl>
<dt>nanoseconds (int: 0)</dt>
<dd>Nanoseconds precision in <code>range(0, 1000000000)</code>.</dd>
</dl>
</li>
</ul>
<p dir="auto"><strong>Note:</strong> nanoseconds are always added to seconds, so negative timestamps
like -1.2 should be instantiated as Timestamp(-2, 800000000).</p>
<dl>
<dt>fromtimestamp(timestamp) (<em>classmethod</em>)</dt>
<dd>
<p dir="auto">Return a new <a href="#timestamp">Timestamp</a> instance corresponding to the <em>timestamp</em>
(int/float) argument. Example:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; from mood import msgpack
&gt;&gt;&gt; msgpack.Timestamp.fromtimestamp(-1.2)
mood.msgpack.Timestamp(seconds=-2, nanoseconds=800000000)
&gt;&gt;&gt;"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">from</span> <span class="pl-s1">mood</span> <span class="pl-k">import</span> <span class="pl-s1">msgpack</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">msgpack</span>.<span class="pl-v">Timestamp</span>.<span class="pl-en">fromtimestamp</span>(<span class="pl-c1">-</span><span class="pl-c1">1.2</span>)
<span class="pl-s1">mood</span>.<span class="pl-s1">msgpack</span>.<span class="pl-v">Timestamp</span>(<span class="pl-s1">seconds</span><span class="pl-c1">=</span><span class="pl-c1">-</span><span class="pl-c1">2</span>, <span class="pl-s1">nanoseconds</span><span class="pl-c1">=</span><span class="pl-c1">800000000</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span></pre></div>
</dd>
<dt>timestamp()</dt>
<dd>Return the floating point timestamp corresponding to this <a href="#timestamp">Timestamp</a>
instance. The result of <code>self.seconds + (self.nanoseconds / 1000000000)</code>.</dd>
<dt>seconds (<em>read only</em>)</dt>
<dd>
<em>seconds</em> argument passed to the constructor.</dd>
<dt>nanoseconds (<em>read only</em>)</dt>
<dd>
<em>nanoseconds</em> argument passed to the constructor.</dd>
</dl>
</dd>
</dl>

</article>
  </div>
        </div>
        
        <div id="qs-aviramha-ormsgpack" class="qs"><h4><a href="https://github.com/aviramha/ormsgpack" target="_blank">aviramha/ormsgpack <span class="qs-url">https://github.com/aviramha/ormsgpack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-ormsgpack" class="anchor" aria-hidden="true" href="#ormsgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>ormsgpack</h5>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/d8e2958b3c53c98eb2b76eca4640a03f30613cd30e477b7f8c0a2cc28cf1577b/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f6f726d73677061636b"><img src="https://camo.githubusercontent.com/d8e2958b3c53c98eb2b76eca4640a03f30613cd30e477b7f8c0a2cc28cf1577b/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f6f726d73677061636b" alt="PyPI" data-canonical-src="https://img.shields.io/pypi/v/ormsgpack" style="max-width: 100%;"></a>
<a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/163b36c7cfa2ddd5aa44db5a15fffad8a964b477e06653adef00858395739e6b/68747470733a2f2f696d672e736869656c64732e696f2f707970692f646d2f6f726d73677061636b"><img src="https://camo.githubusercontent.com/163b36c7cfa2ddd5aa44db5a15fffad8a964b477e06653adef00858395739e6b/68747470733a2f2f696d672e736869656c64732e696f2f707970692f646d2f6f726d73677061636b" alt="PyPI - Downloads" data-canonical-src="https://img.shields.io/pypi/dm/ormsgpack" style="max-width: 100%;"></a></p>
<p dir="auto">ormsgpack is a fast msgpack library for Python. It is a fork/reboot of <a href="https://github.com/ijl/orjson">orjson</a>
It serializes faster than <a href="https://github.com/msgpack/msgpack-python">msgpack-python</a> and deserializes a bit slower (right now).
It supports serialization of:
<a href="https://github.com/aviramha/ormsgpack#dataclass">dataclass</a>,
<a href="https://github.com/aviramha/ormsgpack#datetime">datetime</a>,
<a href="https://github.com/aviramha/ormsgpack#numpy">numpy</a>,
<a href="https://github.com/avirmaha/ormsgpack#OPT_SERIALIZE_PYDANTIC">pydantic</a> and
<a href="https://github.com/aviramha/ormsgpack#uuid">UUID</a> instances natively.</p>
<p dir="auto">Its features and drawbacks compared to other Python msgpack libraries:</p>
<ul dir="auto">
<li>serializes <code>dataclass</code> instances natively.</li>
<li>serializes <code>datetime</code>, <code>date</code>, and <code>time</code> instances to RFC 3339 format,
e.g., "1970-01-01T00:00:00+00:00"</li>
<li>serializes <code>numpy.ndarray</code> instances natively and faster.</li>
<li>serializes <code>pydantic.BaseModel</code> instances natively (disregards the configuration ATM).</li>
<li>serializes arbitrary types using a <code>default</code> hook</li>
</ul>
<p dir="auto">ormsgpack supports CPython 3.6, 3.7, 3.8, 3.9, and 3.10. ormsgpack does not support PyPy. Releases follow semantic
versioning and serializing a new object type without an opt-in flag is
considered a breaking change.</p>
<p dir="auto">ormsgpack is licensed under both the Apache 2.0 and MIT licenses. The
repository and issue tracker is
<a href="https://github.com/aviramha/ormsgpack">github.com/aviramha/ormsgpack</a>, and patches may be
submitted there. There is a
<a href="https://github.com/aviramha/ormsgpack/blob/master/CHANGELOG.md">CHANGELOG</a>
available in the repository.</p>
<ol dir="auto">
<li>
<a href="https://github.com/aviramha/ormsgpack#usage">Usage</a>
<ol dir="auto">
<li><a href="https://github.com/aviramha/ormsgpack#install">Install</a></li>
<li><a href="https://github.com/aviramha/ormsgpack#quickstart">Quickstart</a></li>
<li>
<a href="https://github.com/aviramha/ormsgpack#serialize">Serialize</a>
<ol dir="auto">
<li><a href="https://github.com/aviramha/ormsgpack#default">default</a></li>
<li><a href="https://github.com/aviramha/ormsgpack#option">option</a></li>
</ol>
</li>
<li><a href="https://github.com/aviramha/ormsgpack#deserialize">Deserialize</a></li>
</ol>
</li>
<li>
<a href="https://github.com/aviramha/ormsgpack#types">Types</a>
<ol dir="auto">
<li><a href="https://github.com/aviramha/ormsgpack#dataclass">dataclass</a></li>
<li><a href="https://github.com/aviramha/ormsgpack#datetime">datetime</a></li>
<li><a href="https://github.com/aviramha/ormsgpack#enum">enum</a></li>
<li><a href="https://github.com/aviramha/ormsgpack#float">float</a></li>
<li><a href="https://github.com/aviramha/ormsgpack#int">int</a></li>
<li><a href="https://github.com/aviramha/ormsgpack#numpy">numpy</a></li>
<li><a href="https://github.com/aviramha/ormsgpack#uuid">uuid</a></li>
<li><a href="https://github.com/aviramha/ormsgpack#pydantic">pydantic</a></li>
</ol>
</li>
<li><a href="https://github.com/aviramha/ormsgpack#latency">Latency</a></li>
<li><a href="https://github.com/aviramha/ormsgpack#questions">Questions</a></li>
<li><a href="https://github.com/aviramha/ormsgpack#packaging">Packaging</a></li>
<li><a href="https://github.com/aviramha/ormsgpack#license">License</a></li>
</ol>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<h7 dir="auto">
<a id="user-content-install" class="anchor" aria-hidden="true" href="#install"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install</h7>
<p dir="auto">To install a wheel from PyPI:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='pip install --upgrade "pip&gt;=19.3" # manylinux2014 support
pip install --upgrade ormsgpack'><pre>pip install --upgrade <span class="pl-s"><span class="pl-pds">"</span>pip&gt;=19.3<span class="pl-pds">"</span></span> <span class="pl-c"><span class="pl-c">#</span> manylinux2014 support</span>
pip install --upgrade ormsgpack</pre></div>
<p dir="auto">Notice that Linux environments with a <code>pip</code> version shipped in 2018 or earlier
must first upgrade <code>pip</code> to support <code>manylinux2014</code> wheels.</p>
<p dir="auto">To build a wheel, see <a href="https://github.com/aviramha/ormsgpack#packaging">packaging</a>.</p>
<h7 dir="auto">
<a id="user-content-quickstart" class="anchor" aria-hidden="true" href="#quickstart"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Quickstart</h7>
<p dir="auto">This is an example of serializing, with options specified, and deserializing:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import ormsgpack, datetime, numpy
&gt;&gt;&gt; data = {
    &quot;type&quot;: &quot;job&quot;,
    &quot;created_at&quot;: datetime.datetime(1970, 1, 1),
    &quot;status&quot;: &quot;&quot;,
    &quot;payload&quot;: numpy.array([[1, 2], [3, 4]]),
}
&gt;&gt;&gt; ormsgpack.packb(data, option=ormsgpack.OPT_NAIVE_UTC | ormsgpack.OPT_SERIALIZE_NUMPY)
b'\x84\xa4type\xa3job\xaacreated_at\xb91970-01-01T00:00:00+00:00\xa6status\xa4\xf0\x9f\x86\x97\xa7payload\x92\x92\x01\x02\x92\x03\x04'
&gt;&gt;&gt; ormsgpack.unpackb(_)
{'type': 'job', 'created_at': '1970-01-01T00:00:00+00:00', 'status': '', 'payload': [[1, 2], [3, 4]]}"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">ormsgpack</span>, <span class="pl-s1">datetime</span>, <span class="pl-s1">numpy</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">data</span> <span class="pl-c1">=</span> {
    <span class="pl-s">"type"</span>: <span class="pl-s">"job"</span>,
    <span class="pl-s">"created_at"</span>: <span class="pl-s1">datetime</span>.<span class="pl-en">datetime</span>(<span class="pl-c1">1970</span>, <span class="pl-c1">1</span>, <span class="pl-c1">1</span>),
    <span class="pl-s">"status"</span>: <span class="pl-s">""</span>,
    <span class="pl-s">"payload"</span>: <span class="pl-s1">numpy</span>.<span class="pl-en">array</span>([[<span class="pl-c1">1</span>, <span class="pl-c1">2</span>], [<span class="pl-c1">3</span>, <span class="pl-c1">4</span>]]),
}
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(<span class="pl-s1">data</span>, <span class="pl-s1">option</span><span class="pl-c1">=</span><span class="pl-s1">ormsgpack</span>.<span class="pl-v">OPT_NAIVE_UTC</span> <span class="pl-c1">|</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-v">OPT_SERIALIZE_NUMPY</span>)
<span class="pl-s">b'<span class="pl-cce">\x84</span><span class="pl-cce">\xa4</span>type<span class="pl-cce">\xa3</span>job<span class="pl-cce">\xaa</span>created_at<span class="pl-cce">\xb9</span>1970-01-01T00:00:00+00:00<span class="pl-cce">\xa6</span>status<span class="pl-cce">\xa4</span><span class="pl-cce">\xf0</span><span class="pl-cce">\x9f</span><span class="pl-cce">\x86</span><span class="pl-cce">\x97</span><span class="pl-cce">\xa7</span>payload<span class="pl-cce">\x92</span><span class="pl-cce">\x92</span><span class="pl-cce">\x01</span><span class="pl-cce">\x02</span><span class="pl-cce">\x92</span><span class="pl-cce">\x03</span><span class="pl-cce">\x04</span>'</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">unpackb</span>(<span class="pl-s1">_</span>)
{<span class="pl-s">'type'</span>: <span class="pl-s">'job'</span>, <span class="pl-s">'created_at'</span>: <span class="pl-s">'1970-01-01T00:00:00+00:00'</span>, <span class="pl-s">'status'</span>: <span class="pl-s">''</span>, <span class="pl-s">'payload'</span>: [[<span class="pl-c1">1</span>, <span class="pl-c1">2</span>], [<span class="pl-c1">3</span>, <span class="pl-c1">4</span>]]}</pre></div>
<h7 dir="auto">
<a id="user-content-serialize" class="anchor" aria-hidden="true" href="#serialize"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Serialize</h7>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="def packb(
    __obj: Any,
    default: Optional[Callable[[Any], Any]] = ...,
    option: Optional[int] = ...,
) -&gt; bytes: ..."><pre><span class="pl-k">def</span> <span class="pl-en">packb</span>(
    <span class="pl-s1">__obj</span>: <span class="pl-v">Any</span>,
    <span class="pl-s1">default</span>: <span class="pl-v">Optional</span>[<span class="pl-v">Callable</span>[[<span class="pl-v">Any</span>], <span class="pl-v">Any</span>]] <span class="pl-c1">=</span> ...,
    <span class="pl-s1">option</span>: <span class="pl-v">Optional</span>[<span class="pl-s1">int</span>] <span class="pl-c1">=</span> ...,
) <span class="pl-c1">-&gt;</span> <span class="pl-s1">bytes</span>: ...</pre></div>
<p dir="auto"><code>packb()</code> serializes Python objects to msgpack.</p>
<p dir="auto">It natively serializes
<code>bytes</code>, <code>str</code>, <code>dict</code>, <code>list</code>, <code>tuple</code>, <code>int</code>, <code>float</code>, <code>bool</code>,
<code>dataclasses.dataclass</code>, <code>typing.TypedDict</code>, <code>datetime.datetime</code>,
<code>datetime.date</code>, <code>datetime.time</code>, <code>uuid.UUID</code>, <code>numpy.ndarray</code>, and
<code>None</code> instances. It supports arbitrary types through <code>default</code>. It
serializes subclasses of <code>str</code>, <code>int</code>, <code>dict</code>, <code>list</code>,
<code>dataclasses.dataclass</code>, and <code>enum.Enum</code>. It does not serialize subclasses
of <code>tuple</code> to avoid serializing <code>namedtuple</code> objects as arrays. To avoid
serializing subclasses, specify the option <code>ormsgpack.OPT_PASSTHROUGH_SUBCLASS</code>.</p>
<p dir="auto">The output is a <code>bytes</code> object containing UTF-8.</p>
<p dir="auto">The global interpreter lock (GIL) is held for the duration of the call.</p>
<p dir="auto">It raises <code>MsgpackEncodeError</code> on an unsupported type. This exception message
describes the invalid object with the error message
<code>Type is not JSON serializable: ...</code>. To fix this, specify
<a href="https://github.com/aviramha/ormsgpack#default">default</a>.</p>
<p dir="auto">It raises <code>MsgpackEncodeError</code> on a <code>str</code> that contains invalid UTF-8.</p>
<p dir="auto">It raises <code>MsgpackEncodeError</code> if a <code>dict</code> has a key of a type other than <code>str</code> or <code>bytes</code>,
unless <code>OPT_NON_STR_KEYS</code> is specified.</p>
<p dir="auto">It raises <code>MsgpackEncodeError</code> if the output of <code>default</code> recurses to handling by
<code>default</code> more than 254 levels deep.</p>
<p dir="auto">It raises <code>MsgpackEncodeError</code> on circular references.</p>
<p dir="auto">It raises <code>MsgpackEncodeError</code>  if a <code>tzinfo</code> on a datetime object is
unsupported.</p>
<p dir="auto"><code>MsgpackEncodeError</code> is a subclass of <code>TypeError</code>. This is for compatibility
with the standard library.</p>
<h8 dir="auto">
<a id="user-content-default" class="anchor" aria-hidden="true" href="#default"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>default</h8>
<p dir="auto">To serialize a subclass or arbitrary types, specify <code>default</code> as a
callable that returns a supported type. <code>default</code> may be a function,
lambda, or callable class instance. To specify that a type was not
handled by <code>default</code>, raise an exception such as <code>TypeError</code>.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import ormsgpack, decimal
&gt;&gt;&gt;
def default(obj):
    if isinstance(obj, decimal.Decimal):
        return str(obj)
    raise TypeError

&gt;&gt;&gt; ormsgpack.packb(decimal.Decimal(&quot;0.0842389659712649442845&quot;))
MsgpackEncodeError: Type is not JSON serializable: decimal.Decimal
&gt;&gt;&gt; ormsgpack.packb(decimal.Decimal(&quot;0.0842389659712649442845&quot;), default=default)
b'\xb80.0842389659712649442845'
&gt;&gt;&gt; ormsgpack.packb({1, 2}, default=default)
ormsgpack.MsgpackEncodeError: Type is not msgpack serializable: set"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">ormsgpack</span>, <span class="pl-s1">decimal</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span>
<span class="pl-k">def</span> <span class="pl-en">default</span>(<span class="pl-s1">obj</span>):
    <span class="pl-k">if</span> <span class="pl-en">isinstance</span>(<span class="pl-s1">obj</span>, <span class="pl-s1">decimal</span>.<span class="pl-v">Decimal</span>):
        <span class="pl-k">return</span> <span class="pl-en">str</span>(<span class="pl-s1">obj</span>)
    <span class="pl-k">raise</span> <span class="pl-v">TypeError</span>

<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(<span class="pl-s1">decimal</span>.<span class="pl-v">Decimal</span>(<span class="pl-s">"0.0842389659712649442845"</span>))
<span class="pl-v">MsgpackEncodeError</span>: <span class="pl-v">Type</span> <span class="pl-c1">is</span> <span class="pl-c1">not</span> <span class="pl-v">JSON</span> <span class="pl-s1">serializable</span>: <span class="pl-s1">decimal</span>.<span class="pl-v">Decimal</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(<span class="pl-s1">decimal</span>.<span class="pl-v">Decimal</span>(<span class="pl-s">"0.0842389659712649442845"</span>), <span class="pl-s1">default</span><span class="pl-c1">=</span><span class="pl-s1">default</span>)
<span class="pl-s">b'<span class="pl-cce">\xb8</span>0.0842389659712649442845'</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>({<span class="pl-c1">1</span>, <span class="pl-c1">2</span>}, <span class="pl-s1">default</span><span class="pl-c1">=</span><span class="pl-s1">default</span>)
<span class="pl-s1">ormsgpack</span>.<span class="pl-v">MsgpackEncodeError</span>: <span class="pl-v">Type</span> <span class="pl-c1">is</span> <span class="pl-c1">not</span> <span class="pl-s1">msgpack</span> <span class="pl-s1">serializable</span>: <span class="pl-s1">set</span></pre></div>
<p dir="auto">The <code>default</code> callable may return an object that itself
must be handled by <code>default</code> up to 254 times before an exception
is raised.</p>
<p dir="auto">It is important that <code>default</code> raise an exception if a type cannot be handled.
Python otherwise implicitly returns <code>None</code>, which appears to the caller
like a legitimate value and is serialized:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import ormsgpack, json, rapidjson
&gt;&gt;&gt;
def default(obj):
    if isinstance(obj, decimal.Decimal):
        return str(obj)

&gt;&gt;&gt; ormsgpack.unpackb(ormsgpack.packb({&quot;set&quot;:{1, 2}}, default=default))
{'set': None}"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">ormsgpack</span>, <span class="pl-s1">json</span>, <span class="pl-s1">rapidjson</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span>
<span class="pl-k">def</span> <span class="pl-en">default</span>(<span class="pl-s1">obj</span>):
    <span class="pl-k">if</span> <span class="pl-en">isinstance</span>(<span class="pl-s1">obj</span>, <span class="pl-s1">decimal</span>.<span class="pl-v">Decimal</span>):
        <span class="pl-k">return</span> <span class="pl-en">str</span>(<span class="pl-s1">obj</span>)

<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">unpackb</span>(<span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>({<span class="pl-s">"set"</span>:{<span class="pl-c1">1</span>, <span class="pl-c1">2</span>}}, <span class="pl-s1">default</span><span class="pl-c1">=</span><span class="pl-s1">default</span>))
{<span class="pl-s">'set'</span>: <span class="pl-c1">None</span>}</pre></div>
<h8 dir="auto">
<a id="user-content-option" class="anchor" aria-hidden="true" href="#option"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>option</h8>
<p dir="auto">To modify how data is serialized, specify <code>option</code>. Each <code>option</code> is an integer
constant in <code>ormspgack</code>. To specify multiple options, mask them together, e.g.,
<code>option=ormspgack.OPT_NON_STR_KEYS | ormspgack.OPT_NAIVE_UTC</code>.</p>
<h5 dir="auto">
<a id="user-content-opt_naive_utc" class="anchor" aria-hidden="true" href="#opt_naive_utc"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>OPT_NAIVE_UTC</h5>
<p dir="auto">Serialize <code>datetime.datetime</code> objects without a <code>tzinfo</code> as UTC. This
has no effect on <code>datetime.datetime</code> objects that have <code>tzinfo</code> set.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='&gt;&gt;&gt; import ormsgpack, datetime
&gt;&gt;&gt; ormsgpack.unpackb(ormsgpack.packb(
        datetime.datetime(1970, 1, 1, 0, 0, 0),
    ))
"1970-01-01T00:00:00"
&gt;&gt;&gt; ormsgpack.unpackb(ormsgpack.packb(
        datetime.datetime(1970, 1, 1, 0, 0, 0),
        option=ormsgpack.OPT_NAIVE_UTC,
    ))
"1970-01-01T00:00:00+00:00"'><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">ormsgpack</span>, <span class="pl-s1">datetime</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">unpackb</span>(<span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(
        <span class="pl-s1">datetime</span>.<span class="pl-en">datetime</span>(<span class="pl-c1">1970</span>, <span class="pl-c1">1</span>, <span class="pl-c1">1</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>),
    ))
<span class="pl-s">"1970-01-01T00:00:00"</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">unpackb</span>(<span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(
        <span class="pl-s1">datetime</span>.<span class="pl-en">datetime</span>(<span class="pl-c1">1970</span>, <span class="pl-c1">1</span>, <span class="pl-c1">1</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>),
        <span class="pl-s1">option</span><span class="pl-c1">=</span><span class="pl-s1">ormsgpack</span>.<span class="pl-v">OPT_NAIVE_UTC</span>,
    ))
<span class="pl-s">"1970-01-01T00:00:00+00:00"</span></pre></div>
<h5 dir="auto">
<a id="user-content-opt_non_str_keys" class="anchor" aria-hidden="true" href="#opt_non_str_keys"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>OPT_NON_STR_KEYS</h5>
<p dir="auto">Serialize <code>dict</code> keys of type other than <code>str</code>. This allows <code>dict</code> keys
to be one of <code>str</code>, <code>int</code>, <code>float</code>, <code>bool</code>, <code>None</code>, <code>datetime.datetime</code>,
<code>datetime.date</code>, <code>datetime.time</code>, <code>enum.Enum</code>, and <code>uuid.UUID</code>. For comparison,
the standard library serializes <code>str</code>, <code>int</code>, <code>float</code>, <code>bool</code> or <code>None</code> by
default.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='&gt;&gt;&gt; import ormsgpack, datetime, uuid
&gt;&gt;&gt; ormsgpack.packb(
        {uuid.UUID("7202d115-7ff3-4c81-a7c1-2a1f067b1ece"): [1, 2, 3]},
        option=ormsgpack.OPT_NON_STR_KEYS,
    )
&gt;&gt;&gt; ormsgpack.packb(
        {datetime.datetime(1970, 1, 1, 0, 0, 0): [1, 2, 3]},
        option=ormsgpack.OPT_NON_STR_KEYS | ormsgpack.OPT_NAIVE_UTC,
    )'><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">ormsgpack</span>, <span class="pl-s1">datetime</span>, <span class="pl-s1">uuid</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(
        {<span class="pl-s1">uuid</span>.<span class="pl-v">UUID</span>(<span class="pl-s">"7202d115-7ff3-4c81-a7c1-2a1f067b1ece"</span>): [<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>]},
        <span class="pl-s1">option</span><span class="pl-c1">=</span><span class="pl-s1">ormsgpack</span>.<span class="pl-v">OPT_NON_STR_KEYS</span>,
    )
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(
        {<span class="pl-s1">datetime</span>.<span class="pl-en">datetime</span>(<span class="pl-c1">1970</span>, <span class="pl-c1">1</span>, <span class="pl-c1">1</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>): [<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>]},
        <span class="pl-s1">option</span><span class="pl-c1">=</span><span class="pl-s1">ormsgpack</span>.<span class="pl-v">OPT_NON_STR_KEYS</span> <span class="pl-c1">|</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-v">OPT_NAIVE_UTC</span>,
    )</pre></div>
<p dir="auto">These types are generally serialized how they would be as
values, e.g., <code>datetime.datetime</code> is still an RFC 3339 string and respects
options affecting it.</p>
<p dir="auto">This option has the risk of creating duplicate keys. This is because non-<code>str</code>
objects may serialize to the same <code>str</code> as an existing key, e.g.,
<code>{"1970-01-01T00:00:00+00:00": true, datetime.datetime(1970, 1, 1, 0, 0, 0): false}</code>.
The last key to be inserted to the <code>dict</code> will be serialized last and a msgpack deserializer will presumably take the last
occurrence of a key (in the above, <code>false</code>). The first value will be lost.</p>
<h5 dir="auto">
<a id="user-content-opt_omit_microseconds" class="anchor" aria-hidden="true" href="#opt_omit_microseconds"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>OPT_OMIT_MICROSECONDS</h5>
<p dir="auto">Do not serialize the <code>microsecond</code> field on <code>datetime.datetime</code> and
<code>datetime.time</code> instances.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import ormsgpack, datetime
&gt;&gt;&gt; ormsgpack.packb(
        datetime.datetime(1970, 1, 1, 0, 0, 0, 1),
    )
&gt;&gt;&gt; ormsgpack.packb(
        datetime.datetime(1970, 1, 1, 0, 0, 0, 1),
        option=ormsgpack.OPT_OMIT_MICROSECONDS,
    )"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">ormsgpack</span>, <span class="pl-s1">datetime</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(
        <span class="pl-s1">datetime</span>.<span class="pl-en">datetime</span>(<span class="pl-c1">1970</span>, <span class="pl-c1">1</span>, <span class="pl-c1">1</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">1</span>),
    )
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(
        <span class="pl-s1">datetime</span>.<span class="pl-en">datetime</span>(<span class="pl-c1">1970</span>, <span class="pl-c1">1</span>, <span class="pl-c1">1</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">1</span>),
        <span class="pl-s1">option</span><span class="pl-c1">=</span><span class="pl-s1">ormsgpack</span>.<span class="pl-v">OPT_OMIT_MICROSECONDS</span>,
    )</pre></div>
<h5 dir="auto">
<a id="user-content-opt_passthrough_big_int" class="anchor" aria-hidden="true" href="#opt_passthrough_big_int"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>OPT_PASSTHROUGH_BIG_INT</h5>
<p dir="auto">Enables passthrough of big (Python) ints. By setting this option, one can set a <code>default</code> function for ints larger than 63 bits, smaller ints are still serialized efficiently.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import ormsgpack
&gt;&gt;&gt; ormsgpack.packb(
        2**65,
    )
TypeError: Integer exceeds 64-bit range
&gt;&gt;&gt; ormsgpack.unpackb(
        ormsgpack.packb(
            2**65,
            option=ormsgpack.OPT_PASSTHROUGH_BIG_INT,
            default=lambda _: {&quot;type&quot;: &quot;bigint&quot;, &quot;value&quot;: str(_) }
        )
    )
{'type': 'bigint', 'value': '36893488147419103232'}"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">ormsgpack</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(
        <span class="pl-c1">2</span><span class="pl-c1">**</span><span class="pl-c1">65</span>,
    )
<span class="pl-v">TypeError</span>: <span class="pl-v">Integer</span> <span class="pl-s1">exceeds</span> <span class="pl-c1">64</span><span class="pl-c1">-</span><span class="pl-s1">bit</span> <span class="pl-s1">range</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">unpackb</span>(
        <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(
            <span class="pl-c1">2</span><span class="pl-c1">**</span><span class="pl-c1">65</span>,
            <span class="pl-s1">option</span><span class="pl-c1">=</span><span class="pl-s1">ormsgpack</span>.<span class="pl-v">OPT_PASSTHROUGH_BIG_INT</span>,
            <span class="pl-s1">default</span><span class="pl-c1">=</span><span class="pl-k">lambda</span> <span class="pl-s1">_</span>: {<span class="pl-s">"type"</span>: <span class="pl-s">"bigint"</span>, <span class="pl-s">"value"</span>: <span class="pl-en">str</span>(<span class="pl-s1">_</span>) }
        )
    )
{<span class="pl-s">'type'</span>: <span class="pl-s">'bigint'</span>, <span class="pl-s">'value'</span>: <span class="pl-s">'36893488147419103232'</span>}</pre></div>
<h5 dir="auto">
<a id="user-content-opt_passthrough_dataclass" class="anchor" aria-hidden="true" href="#opt_passthrough_dataclass"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>OPT_PASSTHROUGH_DATACLASS</h5>
<p dir="auto">Passthrough <code>dataclasses.dataclass</code> instances to <code>default</code>. This allows
customizing their output but is much slower.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import ormsgpack, dataclasses
&gt;&gt;&gt;
@dataclasses.dataclass
class User:
    id: str
    name: str
    password: str

def default(obj):
    if isinstance(obj, User):
        return {&quot;id&quot;: obj.id, &quot;name&quot;: obj.name}
    raise TypeError

&gt;&gt;&gt; ormsgpack.packb(User(&quot;3b1&quot;, &quot;asd&quot;, &quot;zxc&quot;))
b'\x83\xa2id\xa33b1\xa4name\xa3asd\xa8password\xa3zxc'
&gt;&gt;&gt; ormsgpack.packb(User(&quot;3b1&quot;, &quot;asd&quot;, &quot;zxc&quot;), option=ormsgpack.OPT_PASSTHROUGH_DATACLASS)
TypeError: Type is not msgpack serializable: User
&gt;&gt;&gt; ormsgpack.packb(
        User(&quot;3b1&quot;, &quot;asd&quot;, &quot;zxc&quot;),
        option=ormsgpack.OPT_PASSTHROUGH_DATACLASS,
        default=default,
    )
b'\x82\xa2id\xa33b1\xa4name\xa3asd'"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">ormsgpack</span>, <span class="pl-s1">dataclasses</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span>
<span class="pl-en">@<span class="pl-s1">dataclasses</span>.<span class="pl-s1">dataclass</span></span>
<span class="pl-k">class</span> <span class="pl-v">User</span>:
    <span class="pl-s1">id</span>: <span class="pl-s1">str</span>
    <span class="pl-s1">name</span>: <span class="pl-s1">str</span>
    <span class="pl-s1">password</span>: <span class="pl-s1">str</span>

<span class="pl-k">def</span> <span class="pl-en">default</span>(<span class="pl-s1">obj</span>):
    <span class="pl-k">if</span> <span class="pl-en">isinstance</span>(<span class="pl-s1">obj</span>, <span class="pl-v">User</span>):
        <span class="pl-k">return</span> {<span class="pl-s">"id"</span>: <span class="pl-s1">obj</span>.<span class="pl-s1">id</span>, <span class="pl-s">"name"</span>: <span class="pl-s1">obj</span>.<span class="pl-s1">name</span>}
    <span class="pl-k">raise</span> <span class="pl-v">TypeError</span>

<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(<span class="pl-v">User</span>(<span class="pl-s">"3b1"</span>, <span class="pl-s">"asd"</span>, <span class="pl-s">"zxc"</span>))
<span class="pl-s">b'<span class="pl-cce">\x83</span><span class="pl-cce">\xa2</span>id<span class="pl-cce">\xa3</span>3b1<span class="pl-cce">\xa4</span>name<span class="pl-cce">\xa3</span>asd<span class="pl-cce">\xa8</span>password<span class="pl-cce">\xa3</span>zxc'</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(<span class="pl-v">User</span>(<span class="pl-s">"3b1"</span>, <span class="pl-s">"asd"</span>, <span class="pl-s">"zxc"</span>), <span class="pl-s1">option</span><span class="pl-c1">=</span><span class="pl-s1">ormsgpack</span>.<span class="pl-v">OPT_PASSTHROUGH_DATACLASS</span>)
<span class="pl-v">TypeError</span>: <span class="pl-v">Type</span> <span class="pl-c1">is</span> <span class="pl-c1">not</span> <span class="pl-s1">msgpack</span> <span class="pl-s1">serializable</span>: <span class="pl-v">User</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(
        <span class="pl-v">User</span>(<span class="pl-s">"3b1"</span>, <span class="pl-s">"asd"</span>, <span class="pl-s">"zxc"</span>),
        <span class="pl-s1">option</span><span class="pl-c1">=</span><span class="pl-s1">ormsgpack</span>.<span class="pl-v">OPT_PASSTHROUGH_DATACLASS</span>,
        <span class="pl-s1">default</span><span class="pl-c1">=</span><span class="pl-s1">default</span>,
    )
<span class="pl-s">b'<span class="pl-cce">\x82</span><span class="pl-cce">\xa2</span>id<span class="pl-cce">\xa3</span>3b1<span class="pl-cce">\xa4</span>name<span class="pl-cce">\xa3</span>asd'</span></pre></div>
<h5 dir="auto">
<a id="user-content-opt_passthrough_datetime" class="anchor" aria-hidden="true" href="#opt_passthrough_datetime"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>OPT_PASSTHROUGH_DATETIME</h5>
<p dir="auto">Passthrough <code>datetime.datetime</code>, <code>datetime.date</code>, and <code>datetime.time</code> instances
to <code>default</code>. This allows serializing datetimes to a custom format, e.g.,
HTTP dates:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import ormsgpack, datetime
&gt;&gt;&gt;
def default(obj):
    if isinstance(obj, datetime.datetime):
        return obj.strftime(&quot;%a, %d %b %Y %H:%M:%S GMT&quot;)
    raise TypeError

&gt;&gt;&gt; ormsgpack.packb({&quot;created_at&quot;: datetime.datetime(1970, 1, 1)})
b'\x81\xaacreated_at\xb31970-01-01T00:00:00'
&gt;&gt;&gt; ormsgpack.packb({&quot;created_at&quot;: datetime.datetime(1970, 1, 1)}, option=ormsgpack.OPT_PASSTHROUGH_DATETIME)
TypeError: Type is not msgpack serializable: datetime.datetime
&gt;&gt;&gt; ormsgpack.packb(
        {&quot;created_at&quot;: datetime.datetime(1970, 1, 1)},
        option=ormsgpack.OPT_PASSTHROUGH_DATETIME,
        default=default,
    )
b'\x81\xaacreated_at\xbdThu, 01 Jan 1970 00:00:00 GMT'"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">ormsgpack</span>, <span class="pl-s1">datetime</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span>
<span class="pl-k">def</span> <span class="pl-en">default</span>(<span class="pl-s1">obj</span>):
    <span class="pl-k">if</span> <span class="pl-en">isinstance</span>(<span class="pl-s1">obj</span>, <span class="pl-s1">datetime</span>.<span class="pl-s1">datetime</span>):
        <span class="pl-k">return</span> <span class="pl-s1">obj</span>.<span class="pl-en">strftime</span>(<span class="pl-s">"%a, %d %b %Y %H:%M:%S GMT"</span>)
    <span class="pl-k">raise</span> <span class="pl-v">TypeError</span>

<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>({<span class="pl-s">"created_at"</span>: <span class="pl-s1">datetime</span>.<span class="pl-en">datetime</span>(<span class="pl-c1">1970</span>, <span class="pl-c1">1</span>, <span class="pl-c1">1</span>)})
<span class="pl-s">b'<span class="pl-cce">\x81</span><span class="pl-cce">\xaa</span>created_at<span class="pl-cce">\xb3</span>1970-01-01T00:00:00'</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>({<span class="pl-s">"created_at"</span>: <span class="pl-s1">datetime</span>.<span class="pl-en">datetime</span>(<span class="pl-c1">1970</span>, <span class="pl-c1">1</span>, <span class="pl-c1">1</span>)}, <span class="pl-s1">option</span><span class="pl-c1">=</span><span class="pl-s1">ormsgpack</span>.<span class="pl-v">OPT_PASSTHROUGH_DATETIME</span>)
<span class="pl-v">TypeError</span>: <span class="pl-v">Type</span> <span class="pl-c1">is</span> <span class="pl-c1">not</span> <span class="pl-s1">msgpack</span> <span class="pl-s1">serializable</span>: <span class="pl-s1">datetime</span>.<span class="pl-s1">datetime</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(
        {<span class="pl-s">"created_at"</span>: <span class="pl-s1">datetime</span>.<span class="pl-en">datetime</span>(<span class="pl-c1">1970</span>, <span class="pl-c1">1</span>, <span class="pl-c1">1</span>)},
        <span class="pl-s1">option</span><span class="pl-c1">=</span><span class="pl-s1">ormsgpack</span>.<span class="pl-v">OPT_PASSTHROUGH_DATETIME</span>,
        <span class="pl-s1">default</span><span class="pl-c1">=</span><span class="pl-s1">default</span>,
    )
<span class="pl-s">b'<span class="pl-cce">\x81</span><span class="pl-cce">\xaa</span>created_at<span class="pl-cce">\xbd</span>Thu, 01 Jan 1970 00:00:00 GMT'</span></pre></div>
<p dir="auto">This does not affect datetimes in <code>dict</code> keys if using OPT_NON_STR_KEYS.</p>
<h5 dir="auto">
<a id="user-content-opt_passthrough_subclass" class="anchor" aria-hidden="true" href="#opt_passthrough_subclass"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>OPT_PASSTHROUGH_SUBCLASS</h5>
<p dir="auto">Passthrough subclasses of builtin types to <code>default</code>.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import ormsgpack
&gt;&gt;&gt;
class Secret(str):
    pass

def default(obj):
    if isinstance(obj, Secret):
        return &quot;******&quot;
    raise TypeError

&gt;&gt;&gt; ormsgpack.packb(Secret(&quot;zxc&quot;))
b'\xa3zxc'
&gt;&gt;&gt; ormsgpack.packb(Secret(&quot;zxc&quot;), option=ormsgpack.OPT_PASSTHROUGH_SUBCLASS)
TypeError: Type is not msgpack serializable: Secret
&gt;&gt;&gt; ormsgpack.packb(Secret(&quot;zxc&quot;), option=ormsgpack.OPT_PASSTHROUGH_SUBCLASS, default=default)
b'\xa6******'"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">ormsgpack</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span>
<span class="pl-k">class</span> <span class="pl-v">Secret</span>(<span class="pl-s1">str</span>):
    <span class="pl-k">pass</span>

<span class="pl-k">def</span> <span class="pl-en">default</span>(<span class="pl-s1">obj</span>):
    <span class="pl-k">if</span> <span class="pl-en">isinstance</span>(<span class="pl-s1">obj</span>, <span class="pl-v">Secret</span>):
        <span class="pl-k">return</span> <span class="pl-s">"******"</span>
    <span class="pl-k">raise</span> <span class="pl-v">TypeError</span>

<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(<span class="pl-v">Secret</span>(<span class="pl-s">"zxc"</span>))
<span class="pl-s">b'<span class="pl-cce">\xa3</span>zxc'</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(<span class="pl-v">Secret</span>(<span class="pl-s">"zxc"</span>), <span class="pl-s1">option</span><span class="pl-c1">=</span><span class="pl-s1">ormsgpack</span>.<span class="pl-v">OPT_PASSTHROUGH_SUBCLASS</span>)
<span class="pl-v">TypeError</span>: <span class="pl-v">Type</span> <span class="pl-c1">is</span> <span class="pl-c1">not</span> <span class="pl-s1">msgpack</span> <span class="pl-s1">serializable</span>: <span class="pl-v">Secret</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(<span class="pl-v">Secret</span>(<span class="pl-s">"zxc"</span>), <span class="pl-s1">option</span><span class="pl-c1">=</span><span class="pl-s1">ormsgpack</span>.<span class="pl-v">OPT_PASSTHROUGH_SUBCLASS</span>, <span class="pl-s1">default</span><span class="pl-c1">=</span><span class="pl-s1">default</span>)
<span class="pl-s">b'<span class="pl-cce">\xa6</span>******'</span></pre></div>
<p dir="auto">This does not affect serializing subclasses as <code>dict</code> keys if using
OPT_NON_STR_KEYS.</p>
<h5 dir="auto">
<a id="user-content-opt_passthrough_tuple" class="anchor" aria-hidden="true" href="#opt_passthrough_tuple"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>OPT_PASSTHROUGH_TUPLE</h5>
<p dir="auto">Passthrough tuples to <code>default</code>.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import ormsgpack
&gt;&gt;&gt; ormsgpack.unpackb(
        ormsgpack.packb(
            (9193, &quot;test&quot;, 42),
        )
    )
[9193, 'test', 42]
&gt;&gt;&gt; ormsgpack.unpackb(
        ormsgpack.packb(
            (9193, &quot;test&quot;, 42),
            option=ormsgpack.OPT_PASSTHROUGH_TUPLE,
            default=lambda _: {&quot;type&quot;: &quot;tuple&quot;, &quot;value&quot;: list(_)}
        )
    )
{'type': 'tuple', 'value': [9193, 'test', 42]}"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">ormsgpack</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">unpackb</span>(
        <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(
            (<span class="pl-c1">9193</span>, <span class="pl-s">"test"</span>, <span class="pl-c1">42</span>),
        )
    )
[<span class="pl-c1">9193</span>, <span class="pl-s">'test'</span>, <span class="pl-c1">42</span>]
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">unpackb</span>(
        <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(
            (<span class="pl-c1">9193</span>, <span class="pl-s">"test"</span>, <span class="pl-c1">42</span>),
            <span class="pl-s1">option</span><span class="pl-c1">=</span><span class="pl-s1">ormsgpack</span>.<span class="pl-v">OPT_PASSTHROUGH_TUPLE</span>,
            <span class="pl-s1">default</span><span class="pl-c1">=</span><span class="pl-k">lambda</span> <span class="pl-s1">_</span>: {<span class="pl-s">"type"</span>: <span class="pl-s">"tuple"</span>, <span class="pl-s">"value"</span>: <span class="pl-en">list</span>(<span class="pl-s1">_</span>)}
        )
    )
{<span class="pl-s">'type'</span>: <span class="pl-s">'tuple'</span>, <span class="pl-s">'value'</span>: [<span class="pl-c1">9193</span>, <span class="pl-s">'test'</span>, <span class="pl-c1">42</span>]}</pre></div>
<h5 dir="auto">
<a id="user-content-opt_serialize_numpy" class="anchor" aria-hidden="true" href="#opt_serialize_numpy"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>OPT_SERIALIZE_NUMPY</h5>
<p dir="auto">Serialize <code>numpy.ndarray</code> instances. For more, see
<a href="https://github.com/aviramha/ormsgpack#numpy">numpy</a>.</p>
<h5 dir="auto">
<a id="user-content-opt_serialize_pydantic" class="anchor" aria-hidden="true" href="#opt_serialize_pydantic"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>OPT_SERIALIZE_PYDANTIC</h5>
<p dir="auto">Serialize <code>pydantic.BaseModel</code> instances. Right now it ignores the config (str transformations), support might be added
later.</p>
<h5 dir="auto">
<a id="user-content-opt_utc_z" class="anchor" aria-hidden="true" href="#opt_utc_z"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>OPT_UTC_Z</h5>
<p dir="auto">Serialize a UTC timezone on <code>datetime.datetime</code> instances as <code>Z</code> instead
of <code>+00:00</code>.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import ormsgpack, datetime
&gt;&gt;&gt; ormsgpack.packb(
        datetime.datetime(1970, 1, 1, 0, 0, 0, tzinfo=datetime.timezone.utc),
    )
b'&quot;1970-01-01T00:00:00+00:00&quot;'
&gt;&gt;&gt; ormsgpack.packb(
        datetime.datetime(1970, 1, 1, 0, 0, 0, tzinfo=datetime.timezone.utc),
        option=ormsgpack.OPT_UTC_Z
    )
b'&quot;1970-01-01T00:00:00Z&quot;'"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">ormsgpack</span>, <span class="pl-s1">datetime</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(
        <span class="pl-s1">datetime</span>.<span class="pl-en">datetime</span>(<span class="pl-c1">1970</span>, <span class="pl-c1">1</span>, <span class="pl-c1">1</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-s1">tzinfo</span><span class="pl-c1">=</span><span class="pl-s1">datetime</span>.<span class="pl-s1">timezone</span>.<span class="pl-s1">utc</span>),
    )
<span class="pl-s">b'"1970-01-01T00:00:00+00:00"'</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(
        <span class="pl-s1">datetime</span>.<span class="pl-en">datetime</span>(<span class="pl-c1">1970</span>, <span class="pl-c1">1</span>, <span class="pl-c1">1</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-s1">tzinfo</span><span class="pl-c1">=</span><span class="pl-s1">datetime</span>.<span class="pl-s1">timezone</span>.<span class="pl-s1">utc</span>),
        <span class="pl-s1">option</span><span class="pl-c1">=</span><span class="pl-s1">ormsgpack</span>.<span class="pl-v">OPT_UTC_Z</span>
    )
<span class="pl-s">b'"1970-01-01T00:00:00Z"'</span></pre></div>
<h7 dir="auto">
<a id="user-content-deserialize" class="anchor" aria-hidden="true" href="#deserialize"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Deserialize</h7>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="def unpackb(__obj: Union[bytes, bytearray, memoryview], / , option=None) -&gt; Any: ..."><pre><span class="pl-k">def</span> <span class="pl-en">unpackb</span>(<span class="pl-s1">__obj</span>: <span class="pl-v">Union</span>[<span class="pl-s1">bytes</span>, <span class="pl-s1">bytearray</span>, <span class="pl-s1">memoryview</span>], <span class="pl-c1">/</span> , <span class="pl-s1">option</span><span class="pl-c1">=</span><span class="pl-c1">None</span>) <span class="pl-c1">-&gt;</span> <span class="pl-v">Any</span>: ...</pre></div>
<p dir="auto"><code>unpackb()</code> deserializes msgpack to Python objects. It deserializes to <code>dict</code>,
<code>list</code>, <code>int</code>, <code>float</code>, <code>str</code>, <code>bool</code>, <code>bytes</code> and <code>None</code> objects.</p>
<p dir="auto"><code>bytes</code>, <code>bytearray</code>, <code>memoryview</code> input are accepted.</p>
<p dir="auto">ormsgpack maintains a cache of map keys for the duration of the process. This
causes a net reduction in memory usage by avoiding duplicate strings. The
keys must be at most 64 bytes to be cached and 512 entries are stored.</p>
<p dir="auto">The global interpreter lock (GIL) is held for the duration of the call.</p>
<p dir="auto">It raises <code>MsgpackDecodeError</code> if given an invalid type or invalid
msgpack.</p>
<p dir="auto"><code>MsgpackDecodeError</code> is a subclass of <code>ValueError</code>.</p>
<h8 dir="auto">
<a id="user-content-option-1" class="anchor" aria-hidden="true" href="#option-1"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>option</h8>
<p dir="auto"><code>unpackb()</code> supports the <code>OPT_NON_STR_KEYS</code> option, that is similar to original msgpack's <code>strict_map_keys=False</code>.
Be aware that this option is considered unsafe and disabled by default in msgpack due to possibility of HashDoS.</p>
<h6 dir="auto">
<a id="user-content-types" class="anchor" aria-hidden="true" href="#types"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Types</h6>
<h7 dir="auto">
<a id="user-content-dataclass" class="anchor" aria-hidden="true" href="#dataclass"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>dataclass</h7>
<p dir="auto">ormsgpack serializes instances of <code>dataclasses.dataclass</code> natively. It serializes
instances 40-50x as fast as other libraries and avoids a severe slowdown seen
in other libraries compared to serializing <code>dict</code>.</p>
<p dir="auto">It is supported to pass all variants of dataclasses, including dataclasses
using <code>__slots__</code>, frozen dataclasses, those with optional or default
attributes, and subclasses. There is a performance benefit to not
using <code>__slots__</code>.</p>
<p dir="auto">Dataclasses are serialized as maps, with every attribute serialized and in
the order given on class definition:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import dataclasses, ormsgpack, typing

@dataclasses.dataclass
class Member:
    id: int
    active: bool = dataclasses.field(default=False)

@dataclasses.dataclass
class Object:
    id: int
    name: str
    members: typing.List[Member]

&gt;&gt;&gt; ormsgpack.packb(Object(1, &quot;a&quot;, [Member(1, True), Member(2)]))
b'\x83\xa2id\x01\xa4name\xa1a\xa7members\x92\x82\xa2id\x01\xa6active\xc3\x82\xa2id\x02\xa6active\xc2'"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">dataclasses</span>, <span class="pl-s1">ormsgpack</span>, <span class="pl-s1">typing</span>

<span class="pl-en">@<span class="pl-s1">dataclasses</span>.<span class="pl-s1">dataclass</span></span>
<span class="pl-k">class</span> <span class="pl-v">Member</span>:
    <span class="pl-s1">id</span>: <span class="pl-s1">int</span>
    <span class="pl-s1">active</span>: <span class="pl-s1">bool</span> <span class="pl-c1">=</span> <span class="pl-s1">dataclasses</span>.<span class="pl-en">field</span>(<span class="pl-s1">default</span><span class="pl-c1">=</span><span class="pl-c1">False</span>)

<span class="pl-en">@<span class="pl-s1">dataclasses</span>.<span class="pl-s1">dataclass</span></span>
<span class="pl-k">class</span> <span class="pl-v">Object</span>:
    <span class="pl-s1">id</span>: <span class="pl-s1">int</span>
    <span class="pl-s1">name</span>: <span class="pl-s1">str</span>
    <span class="pl-s1">members</span>: <span class="pl-s1">typing</span>.<span class="pl-v">List</span>[<span class="pl-v">Member</span>]

<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(<span class="pl-v">Object</span>(<span class="pl-c1">1</span>, <span class="pl-s">"a"</span>, [<span class="pl-v">Member</span>(<span class="pl-c1">1</span>, <span class="pl-c1">True</span>), <span class="pl-v">Member</span>(<span class="pl-c1">2</span>)]))
<span class="pl-s">b'<span class="pl-cce">\x83</span><span class="pl-cce">\xa2</span>id<span class="pl-cce">\x01</span><span class="pl-cce">\xa4</span>name<span class="pl-cce">\xa1</span>a<span class="pl-cce">\xa7</span>members<span class="pl-cce">\x92</span><span class="pl-cce">\x82</span><span class="pl-cce">\xa2</span>id<span class="pl-cce">\x01</span><span class="pl-cce">\xa6</span>active<span class="pl-cce">\xc3</span><span class="pl-cce">\x82</span><span class="pl-cce">\xa2</span>id<span class="pl-cce">\x02</span><span class="pl-cce">\xa6</span>active<span class="pl-cce">\xc2</span>'</span></pre></div>
<p dir="auto">Users may wish to control how dataclass instances are serialized, e.g.,
to not serialize an attribute or to change the name of an
attribute when serialized. ormsgpack may implement support using the
metadata mapping on <code>field</code> attributes,
e.g., <code>field(metadata={"json_serialize": False})</code>, if use cases are clear.</p>
<h8 dir="auto">
<a id="user-content-performance" class="anchor" aria-hidden="true" href="#performance"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Performance</h8>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/aviramha/ormsgpack/blob/master/doc/dataclass.svg"><img src="/aviramha/ormsgpack/raw/master/doc/dataclass.svg" alt="alt text" title="dataclass" style="max-width: 100%;"></a></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="--------------------------------------------------------------------------------- benchmark 'dataclass': 2 tests --------------------------------------------------------------------------------
Name (time in ms)                 Min                 Max                Mean            StdDev              Median               IQR            Outliers       OPS            Rounds  Iterations
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_dataclass_ormsgpack       3.4248 (1.0)        7.7949 (1.0)        3.6266 (1.0)      0.3293 (1.0)        3.5815 (1.0)      0.0310 (1.0)          4;34  275.7434 (1.0)         240           1
test_dataclass_msgpack       140.2774 (40.96)    143.6087 (18.42)    141.3847 (38.99)    1.0038 (3.05)     141.1823 (39.42)    0.7304 (23.60)         2;1    7.0729 (0.03)          8           1
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"><pre class="notranslate"><code>--------------------------------------------------------------------------------- benchmark 'dataclass': 2 tests --------------------------------------------------------------------------------
Name (time in ms)                 Min                 Max                Mean            StdDev              Median               IQR            Outliers       OPS            Rounds  Iterations
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_dataclass_ormsgpack       3.4248 (1.0)        7.7949 (1.0)        3.6266 (1.0)      0.3293 (1.0)        3.5815 (1.0)      0.0310 (1.0)          4;34  275.7434 (1.0)         240           1
test_dataclass_msgpack       140.2774 (40.96)    143.6087 (18.42)    141.3847 (38.99)    1.0038 (3.05)     141.1823 (39.42)    0.7304 (23.60)         2;1    7.0729 (0.03)          8           1
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
</code></pre></div>
<h7 dir="auto">
<a id="user-content-datetime" class="anchor" aria-hidden="true" href="#datetime"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>datetime</h7>
<p dir="auto">ormsgpack serializes <code>datetime.datetime</code> objects to
<a href="https://tools.ietf.org/html/rfc3339" rel="nofollow">RFC 3339</a> format,
e.g., "1970-01-01T00:00:00+00:00". This is a subset of ISO 8601 and
compatible with <code>isoformat()</code> in the standard library.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import ormsgpack, datetime, zoneinfo
&gt;&gt;&gt; ormsgpack.packb(
    datetime.datetime(2018, 12, 1, 2, 3, 4, 9, tzinfo=zoneinfo.ZoneInfo('Australia/Adelaide'))
)
&gt;&gt;&gt; ormsgpack.unpackb(_)
&quot;2018-12-01T02:03:04.000009+10:30&quot;
&gt;&gt;&gt; ormsgpack.packb(
    datetime.datetime.fromtimestamp(4123518902).replace(tzinfo=datetime.timezone.utc)
)
&gt;&gt;&gt; ormsgpack.unpackb(_)
&quot;2100-09-01T21:55:02+00:00&quot;
&gt;&gt;&gt; ormsgpack.packb(
    datetime.datetime.fromtimestamp(4123518902)
)
&gt;&gt;&gt; ormsgpack.unpackb(_)
&quot;2100-09-01T21:55:02&quot;"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">ormsgpack</span>, <span class="pl-s1">datetime</span>, <span class="pl-s1">zoneinfo</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(
    <span class="pl-s1">datetime</span>.<span class="pl-en">datetime</span>(<span class="pl-c1">2018</span>, <span class="pl-c1">12</span>, <span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>, <span class="pl-c1">4</span>, <span class="pl-c1">9</span>, <span class="pl-s1">tzinfo</span><span class="pl-c1">=</span><span class="pl-s1">zoneinfo</span>.<span class="pl-v">ZoneInfo</span>(<span class="pl-s">'Australia/Adelaide'</span>))
)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">unpackb</span>(<span class="pl-s1">_</span>)
<span class="pl-s">"2018-12-01T02:03:04.000009+10:30"</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(
    <span class="pl-s1">datetime</span>.<span class="pl-s1">datetime</span>.<span class="pl-en">fromtimestamp</span>(<span class="pl-c1">4123518902</span>).<span class="pl-en">replace</span>(<span class="pl-s1">tzinfo</span><span class="pl-c1">=</span><span class="pl-s1">datetime</span>.<span class="pl-s1">timezone</span>.<span class="pl-s1">utc</span>)
)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">unpackb</span>(<span class="pl-s1">_</span>)
<span class="pl-s">"2100-09-01T21:55:02+00:00"</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(
    <span class="pl-s1">datetime</span>.<span class="pl-s1">datetime</span>.<span class="pl-en">fromtimestamp</span>(<span class="pl-c1">4123518902</span>)
)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">unpackb</span>(<span class="pl-s1">_</span>)
<span class="pl-s">"2100-09-01T21:55:02"</span></pre></div>
<p dir="auto"><code>datetime.datetime</code> supports instances with a <code>tzinfo</code> that is <code>None</code>,
<code>datetime.timezone.utc</code>, a timezone instance from the python3.9+ <code>zoneinfo</code>
module, or a timezone instance from the third-party <code>pendulum</code>, <code>pytz</code>, or
<code>dateutil</code>/<code>arrow</code> libraries.</p>
<p dir="auto"><code>datetime.time</code> objects must not have a <code>tzinfo</code>.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='&gt;&gt;&gt; import ormsgpack, datetime
&gt;&gt;&gt; ormsgpack.packb(datetime.time(12, 0, 15, 290))
&gt;&gt;&gt; ormsgpack.unpackb(_)
"12:00:15.000290"'><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">ormsgpack</span>, <span class="pl-s1">datetime</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(<span class="pl-s1">datetime</span>.<span class="pl-en">time</span>(<span class="pl-c1">12</span>, <span class="pl-c1">0</span>, <span class="pl-c1">15</span>, <span class="pl-c1">290</span>))
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">unpackb</span>(<span class="pl-s1">_</span>)
<span class="pl-s">"12:00:15.000290"</span></pre></div>
<p dir="auto"><code>datetime.date</code> objects will always serialize.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='&gt;&gt;&gt; import ormsgpack, datetime
&gt;&gt;&gt; ormsgpack.packb(datetime.date(1900, 1, 2))
&gt;&gt;&gt; ormsgpack.unpackb(_)
"1900-01-02"'><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">ormsgpack</span>, <span class="pl-s1">datetime</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(<span class="pl-s1">datetime</span>.<span class="pl-en">date</span>(<span class="pl-c1">1900</span>, <span class="pl-c1">1</span>, <span class="pl-c1">2</span>))
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">unpackb</span>(<span class="pl-s1">_</span>)
<span class="pl-s">"1900-01-02"</span></pre></div>
<p dir="auto">Errors with <code>tzinfo</code> result in <code>MsgpackEncodeError</code> being raised.</p>
<p dir="auto">It is faster to have ormsgpack serialize datetime objects than to do so
before calling <code>packb()</code>. If using an unsupported type such as
<code>pendulum.datetime</code>, use <code>default</code>.</p>
<p dir="auto">To disable serialization of <code>datetime</code> objects specify the option
<code>ormsgpack.OPT_PASSTHROUGH_DATETIME</code>.</p>
<p dir="auto">To use "Z" suffix instead of "+00:00" to indicate UTC ("Zulu") time, use the option
<code>ormsgpack.OPT_UTC_Z</code>.</p>
<p dir="auto">To assume datetimes without timezone are UTC, se the option <code>ormsgpack.OPT_NAIVE_UTC</code>.</p>
<h7 dir="auto">
<a id="user-content-enum" class="anchor" aria-hidden="true" href="#enum"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>enum</h7>
<p dir="auto">ormsgpack serializes enums natively. Options apply to their values.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='&gt;&gt;&gt; import enum, datetime, ormsgpack
&gt;&gt;&gt;
class DatetimeEnum(enum.Enum):
    EPOCH = datetime.datetime(1970, 1, 1, 0, 0, 0)
&gt;&gt;&gt; ormsgpack.packb(DatetimeEnum.EPOCH)
&gt;&gt;&gt; ormsgpack.unpackb(_)
"1970-01-01T00:00:00"
&gt;&gt;&gt; ormsgpack.packb(DatetimeEnum.EPOCH, option=ormsgpack.OPT_NAIVE_UTC)
&gt;&gt;&gt; ormsgpack.unpackb(_)
"1970-01-01T00:00:00+00:00"'><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">enum</span>, <span class="pl-s1">datetime</span>, <span class="pl-s1">ormsgpack</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span>
<span class="pl-k">class</span> <span class="pl-v">DatetimeEnum</span>(<span class="pl-s1">enum</span>.<span class="pl-v">Enum</span>):
    <span class="pl-v">EPOCH</span> <span class="pl-c1">=</span> <span class="pl-s1">datetime</span>.<span class="pl-en">datetime</span>(<span class="pl-c1">1970</span>, <span class="pl-c1">1</span>, <span class="pl-c1">1</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(<span class="pl-v">DatetimeEnum</span>.<span class="pl-v">EPOCH</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">unpackb</span>(<span class="pl-s1">_</span>)
<span class="pl-s">"1970-01-01T00:00:00"</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(<span class="pl-v">DatetimeEnum</span>.<span class="pl-v">EPOCH</span>, <span class="pl-s1">option</span><span class="pl-c1">=</span><span class="pl-s1">ormsgpack</span>.<span class="pl-v">OPT_NAIVE_UTC</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">unpackb</span>(<span class="pl-s1">_</span>)
<span class="pl-s">"1970-01-01T00:00:00+00:00"</span></pre></div>
<p dir="auto">Enums with members that are not supported types can be serialized using
<code>default</code>:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import enum, ormsgpack
&gt;&gt;&gt;
class Custom:
    def __init__(self, val):
        self.val = val

def default(obj):
    if isinstance(obj, Custom):
        return obj.val
    raise TypeError

class CustomEnum(enum.Enum):
    ONE = Custom(1)

&gt;&gt;&gt; ormsgpack.packb(CustomEnum.ONE, default=default)
&gt;&gt;&gt; ormsgpack.unpackb(_)
1"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">enum</span>, <span class="pl-s1">ormsgpack</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span>
<span class="pl-k">class</span> <span class="pl-v">Custom</span>:
    <span class="pl-k">def</span> <span class="pl-en">__init__</span>(<span class="pl-s1">self</span>, <span class="pl-s1">val</span>):
        <span class="pl-s1">self</span>.<span class="pl-s1">val</span> <span class="pl-c1">=</span> <span class="pl-s1">val</span>

<span class="pl-k">def</span> <span class="pl-en">default</span>(<span class="pl-s1">obj</span>):
    <span class="pl-k">if</span> <span class="pl-en">isinstance</span>(<span class="pl-s1">obj</span>, <span class="pl-v">Custom</span>):
        <span class="pl-k">return</span> <span class="pl-s1">obj</span>.<span class="pl-s1">val</span>
    <span class="pl-k">raise</span> <span class="pl-v">TypeError</span>

<span class="pl-k">class</span> <span class="pl-v">CustomEnum</span>(<span class="pl-s1">enum</span>.<span class="pl-v">Enum</span>):
    <span class="pl-v">ONE</span> <span class="pl-c1">=</span> <span class="pl-v">Custom</span>(<span class="pl-c1">1</span>)

<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(<span class="pl-v">CustomEnum</span>.<span class="pl-v">ONE</span>, <span class="pl-s1">default</span><span class="pl-c1">=</span><span class="pl-s1">default</span>)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">unpackb</span>(<span class="pl-s1">_</span>)
<span class="pl-c1">1</span></pre></div>
<h7 dir="auto">
<a id="user-content-float" class="anchor" aria-hidden="true" href="#float"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>float</h7>
<p dir="auto">ormsgpack serializes and deserializes double precision floats with no loss of
precision and consistent rounding.</p>
<h7 dir="auto">
<a id="user-content-int" class="anchor" aria-hidden="true" href="#int"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>int</h7>
<p dir="auto">ormsgpack serializes and deserializes 64-bit integers by default. The range
supported is a signed 64-bit integer's minimum (-9223372036854775807) to
an unsigned 64-bit integer's maximum (18446744073709551615).</p>
<h7 dir="auto">
<a id="user-content-numpy" class="anchor" aria-hidden="true" href="#numpy"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>numpy</h7>
<p dir="auto">ormsgpack natively serializes <code>numpy.ndarray</code> and individual <code>numpy.float64</code>,
<code>numpy.float32</code>, <code>numpy.int64</code>, <code>numpy.int32</code>, <code>numpy.int8</code>, <code>numpy.uint64</code>,
<code>numpy.uint32</code>, and <code>numpy.uint8</code> instances. Arrays may have a
<code>dtype</code> of <code>numpy.bool</code>, <code>numpy.float32</code>, <code>numpy.float64</code>, <code>numpy.int32</code>,
<code>numpy.int64</code>, <code>numpy.uint32</code>, <code>numpy.uint64</code>, <code>numpy.uintp</code>, or <code>numpy.intp</code>.
ormsgpack is faster than all compared libraries at serializing
numpy instances. Serializing numpy data requires specifying
<code>option=ormsgpack.OPT_SERIALIZE_NUMPY</code>.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import ormsgpack, numpy
&gt;&gt;&gt; ormsgpack.packb(
        numpy.array([[1, 2, 3], [4, 5, 6]]),
        option=ormsgpack.OPT_SERIALIZE_NUMPY,
)
&gt;&gt;&gt; ormsgpack.unpackb(_)
[[1,2,3],[4,5,6]]"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">ormsgpack</span>, <span class="pl-s1">numpy</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(
        <span class="pl-s1">numpy</span>.<span class="pl-en">array</span>([[<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>], [<span class="pl-c1">4</span>, <span class="pl-c1">5</span>, <span class="pl-c1">6</span>]]),
        <span class="pl-s1">option</span><span class="pl-c1">=</span><span class="pl-s1">ormsgpack</span>.<span class="pl-v">OPT_SERIALIZE_NUMPY</span>,
)
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">unpackb</span>(<span class="pl-s1">_</span>)
[[<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>],[<span class="pl-c1">4</span>,<span class="pl-c1">5</span>,<span class="pl-c1">6</span>]]</pre></div>
<p dir="auto">The array must be a contiguous C array (<code>C_CONTIGUOUS</code>) and one of the
supported datatypes.</p>
<p dir="auto">If an array is not a contiguous C array or contains an supported datatype,
ormsgpack falls through to <code>default</code>. In <code>default</code>, <code>obj.tolist()</code> can be
specified. If an array is malformed, which is not expected,
<code>ormsgpack.MsgpackEncodeError</code> is raised.</p>
<h8 dir="auto">
<a id="user-content-performance-1" class="anchor" aria-hidden="true" href="#performance-1"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Performance</h8>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/aviramha/ormsgpack/blob/master/doc/numpy_float64.svg"><img src="/aviramha/ormsgpack/raw/master/doc/numpy_float64.svg" alt="alt text" title="numpy" style="max-width: 100%;"></a>
<a target="_blank" rel="noopener noreferrer" href="/aviramha/ormsgpack/blob/master/doc/numpy_int8.svg"><img src="/aviramha/ormsgpack/raw/master/doc/numpy_int8.svg" alt="alt text" title="numpy int8" style="max-width: 100%;"></a>
<a target="_blank" rel="noopener noreferrer" href="/aviramha/ormsgpack/blob/master/doc/numpy_int32.svg"><img src="/aviramha/ormsgpack/raw/master/doc/numpy_int32.svg" alt="alt text" title="numpy int32" style="max-width: 100%;"></a>
<a target="_blank" rel="noopener noreferrer" href="/aviramha/ormsgpack/blob/master/doc/numpy_npbool.svg"><img src="/aviramha/ormsgpack/raw/master/doc/numpy_npbool.svg" alt="alt text" title="numpy npbool" style="max-width: 100%;"></a>
<a target="_blank" rel="noopener noreferrer" href="/aviramha/ormsgpack/blob/master/doc/numpy_uint8.svg"><img src="/aviramha/ormsgpack/raw/master/doc/numpy_uint8.svg" alt="alt text" title="numpy uint8" style="max-width: 100%;"></a></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="---------------------------------------------------------------------------------- benchmark 'numpy float64': 2 tests ---------------------------------------------------------------------------------
Name (time in ms)                      Min                 Max                Mean             StdDev              Median                IQR            Outliers      OPS            Rounds  Iterations
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_numpy_ormsgpack[float64]      77.9625 (1.0)       85.2507 (1.0)       79.0326 (1.0)       1.9043 (1.0)       78.5505 (1.0)       0.7408 (1.0)           1;1  12.6530 (1.0)          13           1
test_numpy_msgpack[float64]       511.5176 (6.56)     606.9395 (7.12)     559.0017 (7.07)     44.0661 (23.14)    572.5499 (7.29)     81.2972 (109.75)        3;0   1.7889 (0.14)          5           1
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------- benchmark 'numpy int32': 2 tests -------------------------------------------------------------------------------------
Name (time in ms)                      Min                   Max                  Mean             StdDev                Median                IQR            Outliers     OPS            Rounds  Iterations
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_numpy_ormsgpack[int32]       197.8751 (1.0)        210.3111 (1.0)        201.1033 (1.0)       5.1886 (1.0)        198.8518 (1.0)       3.8297 (1.0)           1;1  4.9726 (1.0)           5           1
test_numpy_msgpack[int32]       1,363.8515 (6.89)     1,505.4747 (7.16)     1,428.2127 (7.10)     53.4176 (10.30)    1,425.3516 (7.17)     72.8064 (19.01)         2;0  0.7002 (0.14)          5           1
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


-------------------------------------------------------------------------------- benchmark 'numpy int8': 2 tests ---------------------------------------------------------------------------------
Name (time in ms)                   Min                 Max                Mean            StdDev              Median                IQR            Outliers     OPS            Rounds  Iterations
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_numpy_ormsgpack[int8]     107.8013 (1.0)      113.7336 (1.0)      109.0364 (1.0)      1.7805 (1.0)      108.3574 (1.0)       0.4066 (1.0)           1;2  9.1712 (1.0)          10           1
test_numpy_msgpack[int8]       685.4149 (6.36)     703.2958 (6.18)     693.2396 (6.36)     7.9572 (4.47)     691.5435 (6.38)     14.4142 (35.45)         1;0  1.4425 (0.16)          5           1
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------- benchmark 'numpy npbool': 2 tests --------------------------------------------------------------------------------------
Name (time in ms)                       Min                   Max                  Mean             StdDev                Median                IQR            Outliers      OPS            Rounds  Iterations
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_numpy_ormsgpack[npbool]        87.9005 (1.0)         89.5460 (1.0)         88.7928 (1.0)       0.5098 (1.0)         88.8508 (1.0)       0.6609 (1.0)           4;0  11.2622 (1.0)          12           1
test_numpy_msgpack[npbool]       1,095.0599 (12.46)    1,176.3442 (13.14)    1,120.5916 (12.62)    32.9993 (64.73)    1,110.4216 (12.50)    38.4189 (58.13)         1;0   0.8924 (0.08)          5           1
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


--------------------------------------------------------------------------------- benchmark 'numpy uint8': 2 tests ---------------------------------------------------------------------------------
Name (time in ms)                    Min                 Max                Mean             StdDev              Median                IQR            Outliers     OPS            Rounds  Iterations
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_numpy_ormsgpack[uint8]     133.1743 (1.0)      134.7246 (1.0)      134.2793 (1.0)       0.4946 (1.0)      134.3120 (1.0)       0.4492 (1.0)           1;1  7.4472 (1.0)           8           1
test_numpy_msgpack[uint8]       727.1393 (5.46)     824.8247 (6.12)     775.7032 (5.78)     34.9887 (70.73)    775.9595 (5.78)     36.2824 (80.78)         2;0  1.2892 (0.17)          5           1
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"><pre class="notranslate"><code>---------------------------------------------------------------------------------- benchmark 'numpy float64': 2 tests ---------------------------------------------------------------------------------
Name (time in ms)                      Min                 Max                Mean             StdDev              Median                IQR            Outliers      OPS            Rounds  Iterations
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_numpy_ormsgpack[float64]      77.9625 (1.0)       85.2507 (1.0)       79.0326 (1.0)       1.9043 (1.0)       78.5505 (1.0)       0.7408 (1.0)           1;1  12.6530 (1.0)          13           1
test_numpy_msgpack[float64]       511.5176 (6.56)     606.9395 (7.12)     559.0017 (7.07)     44.0661 (23.14)    572.5499 (7.29)     81.2972 (109.75)        3;0   1.7889 (0.14)          5           1
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------- benchmark 'numpy int32': 2 tests -------------------------------------------------------------------------------------
Name (time in ms)                      Min                   Max                  Mean             StdDev                Median                IQR            Outliers     OPS            Rounds  Iterations
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_numpy_ormsgpack[int32]       197.8751 (1.0)        210.3111 (1.0)        201.1033 (1.0)       5.1886 (1.0)        198.8518 (1.0)       3.8297 (1.0)           1;1  4.9726 (1.0)           5           1
test_numpy_msgpack[int32]       1,363.8515 (6.89)     1,505.4747 (7.16)     1,428.2127 (7.10)     53.4176 (10.30)    1,425.3516 (7.17)     72.8064 (19.01)         2;0  0.7002 (0.14)          5           1
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


-------------------------------------------------------------------------------- benchmark 'numpy int8': 2 tests ---------------------------------------------------------------------------------
Name (time in ms)                   Min                 Max                Mean            StdDev              Median                IQR            Outliers     OPS            Rounds  Iterations
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_numpy_ormsgpack[int8]     107.8013 (1.0)      113.7336 (1.0)      109.0364 (1.0)      1.7805 (1.0)      108.3574 (1.0)       0.4066 (1.0)           1;2  9.1712 (1.0)          10           1
test_numpy_msgpack[int8]       685.4149 (6.36)     703.2958 (6.18)     693.2396 (6.36)     7.9572 (4.47)     691.5435 (6.38)     14.4142 (35.45)         1;0  1.4425 (0.16)          5           1
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------- benchmark 'numpy npbool': 2 tests --------------------------------------------------------------------------------------
Name (time in ms)                       Min                   Max                  Mean             StdDev                Median                IQR            Outliers      OPS            Rounds  Iterations
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_numpy_ormsgpack[npbool]        87.9005 (1.0)         89.5460 (1.0)         88.7928 (1.0)       0.5098 (1.0)         88.8508 (1.0)       0.6609 (1.0)           4;0  11.2622 (1.0)          12           1
test_numpy_msgpack[npbool]       1,095.0599 (12.46)    1,176.3442 (13.14)    1,120.5916 (12.62)    32.9993 (64.73)    1,110.4216 (12.50)    38.4189 (58.13)         1;0   0.8924 (0.08)          5           1
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


--------------------------------------------------------------------------------- benchmark 'numpy uint8': 2 tests ---------------------------------------------------------------------------------
Name (time in ms)                    Min                 Max                Mean             StdDev              Median                IQR            Outliers     OPS            Rounds  Iterations
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_numpy_ormsgpack[uint8]     133.1743 (1.0)      134.7246 (1.0)      134.2793 (1.0)       0.4946 (1.0)      134.3120 (1.0)       0.4492 (1.0)           1;1  7.4472 (1.0)           8           1
test_numpy_msgpack[uint8]       727.1393 (5.46)     824.8247 (6.12)     775.7032 (5.78)     34.9887 (70.73)    775.9595 (5.78)     36.2824 (80.78)         2;0  1.2892 (0.17)          5           1
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
</code></pre></div>
<h7 dir="auto">
<a id="user-content-uuid" class="anchor" aria-hidden="true" href="#uuid"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>uuid</h7>
<p dir="auto">ormsgpack serializes <code>uuid.UUID</code> instances to
<a href="https://tools.ietf.org/html/rfc4122" rel="nofollow">RFC 4122</a> format, e.g.,
"f81d4fae-7dec-11d0-a765-00a0c91e6bf6".</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; import ormsgpack, uuid
&gt;&gt;&gt; ormsgpack.packb(uuid.UUID('f81d4fae-7dec-11d0-a765-00a0c91e6bf6'))
&gt;&gt;&gt; ormsgpack.unpackb(_)
&quot;f81d4fae-7dec-11d0-a765-00a0c91e6bf6&quot;
&gt;&gt;&gt; ormsgpack.packb(uuid.uuid5(uuid.NAMESPACE_DNS, &quot;python.org&quot;))
&gt;&gt;&gt; ormsgpack.unpackb(_)
&quot;886313e1-3b8a-5372-9b90-0c9aee199e5d&quot;"><pre><span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-k">import</span> <span class="pl-s1">ormsgpack</span>, <span class="pl-s1">uuid</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(<span class="pl-s1">uuid</span>.<span class="pl-v">UUID</span>(<span class="pl-s">'f81d4fae-7dec-11d0-a765-00a0c91e6bf6'</span>))
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">unpackb</span>(<span class="pl-s1">_</span>)
<span class="pl-s">"f81d4fae-7dec-11d0-a765-00a0c91e6bf6"</span>
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">packb</span>(<span class="pl-s1">uuid</span>.<span class="pl-en">uuid5</span>(<span class="pl-s1">uuid</span>.<span class="pl-v">NAMESPACE_DNS</span>, <span class="pl-s">"python.org"</span>))
<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">ormsgpack</span>.<span class="pl-en">unpackb</span>(<span class="pl-s1">_</span>)
<span class="pl-s">"886313e1-3b8a-5372-9b90-0c9aee199e5d"</span></pre></div>
<h7 dir="auto">
<a id="user-content-pydantic" class="anchor" aria-hidden="true" href="#pydantic"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Pydantic</h7>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/aviramha/ormsgpack/blob/master/doc/pydantic.svg"><img src="/aviramha/ormsgpack/raw/master/doc/pydantic.svg" alt="alt text" title="pydantic" style="max-width: 100%;"></a>
ormsgpack serializes <code>pydantic.BaseModel</code> instances natively. Currently it ignores <code>pydantic.BaseModel.Config</code>.</p>
<h8 dir="auto">
<a id="user-content-performance-2" class="anchor" aria-hidden="true" href="#performance-2"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Performance</h8>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="-------------------------------------------------------------------------------- benchmark 'pydantic': 2 tests ---------------------------------------------------------------------------------
Name (time in ms)                Min                 Max                Mean            StdDev              Median               IQR            Outliers       OPS            Rounds  Iterations
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_pydantic_ormsgpack       4.3918 (1.0)       12.6521 (1.0)        4.8550 (1.0)      1.1455 (3.98)       4.6101 (1.0)      0.0662 (1.0)         11;24  205.9727 (1.0)         204           1
test_pydantic_msgpack       124.5500 (28.36)    125.5427 (9.92)     125.0582 (25.76)    0.2877 (1.0)      125.0855 (27.13)    0.2543 (3.84)          2;0    7.9963 (0.04)          8           1
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"><pre class="notranslate"><code>-------------------------------------------------------------------------------- benchmark 'pydantic': 2 tests ---------------------------------------------------------------------------------
Name (time in ms)                Min                 Max                Mean            StdDev              Median               IQR            Outliers       OPS            Rounds  Iterations
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_pydantic_ormsgpack       4.3918 (1.0)       12.6521 (1.0)        4.8550 (1.0)      1.1455 (3.98)       4.6101 (1.0)      0.0662 (1.0)         11;24  205.9727 (1.0)         204           1
test_pydantic_msgpack       124.5500 (28.36)    125.5427 (9.92)     125.0582 (25.76)    0.2877 (1.0)      125.0855 (27.13)    0.2543 (3.84)          2;0    7.9963 (0.04)          8           1
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
</code></pre></div>
<h6 dir="auto">
<a id="user-content-latency" class="anchor" aria-hidden="true" href="#latency"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Latency</h6>
<h7 dir="auto">
<a id="user-content-graphs" class="anchor" aria-hidden="true" href="#graphs"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Graphs</h7>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/aviramha/ormsgpack/blob/master/doc/twitter_packb.svg"><img src="/aviramha/ormsgpack/raw/master/doc/twitter_packb.svg" alt="alt text" title="twitter.json serialization" style="max-width: 100%;"></a>
<a target="_blank" rel="noopener noreferrer" href="/aviramha/ormsgpack/blob/master/doc/twitter_unpackb.svg"><img src="/aviramha/ormsgpack/raw/master/doc/twitter_unpackb.svg" alt="alt text" title="twitter.json deserialization" style="max-width: 100%;"></a>
<a target="_blank" rel="noopener noreferrer" href="/aviramha/ormsgpack/blob/master/doc/github_packb.svg"><img src="/aviramha/ormsgpack/raw/master/doc/github_packb.svg" alt="alt text" title="github.json serialization" style="max-width: 100%;"></a>
<a target="_blank" rel="noopener noreferrer" href="/aviramha/ormsgpack/blob/master/doc/github_unpackb.svg"><img src="/aviramha/ormsgpack/raw/master/doc/github_unpackb.svg" alt="alt text" title="github.json deserialization" style="max-width: 100%;"></a>
<a target="_blank" rel="noopener noreferrer" href="/aviramha/ormsgpack/blob/master/doc/citm_catalog_packb.svg"><img src="/aviramha/ormsgpack/raw/master/doc/citm_catalog_packb.svg" alt="alt text" title="citm_catalog.json serialization" style="max-width: 100%;"></a>
<a target="_blank" rel="noopener noreferrer" href="/aviramha/ormsgpack/blob/master/doc/citm_catalog_unpackb.svg"><img src="/aviramha/ormsgpack/raw/master/doc/citm_catalog_unpackb.svg" alt="alt text" title="citm_catalog.json deserialization" style="max-width: 100%;"></a>
<a target="_blank" rel="noopener noreferrer" href="/aviramha/ormsgpack/blob/master/doc/canada_packb.svg"><img src="/aviramha/ormsgpack/raw/master/doc/canada_packb.svg" alt="alt text" title="canada.json serialization" style="max-width: 100%;"></a>
<a target="_blank" rel="noopener noreferrer" href="/aviramha/ormsgpack/blob/master/doc/canada_unpackb.svg"><img src="/aviramha/ormsgpack/raw/master/doc/canada_unpackb.svg" alt="alt text" title="canada.json deserialization" style="max-width: 100%;"></a></p>
<h7 dir="auto">
<a id="user-content-data" class="anchor" aria-hidden="true" href="#data"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Data</h7>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="----------------------------------------------------------------------------- benchmark 'canada packb': 2 tests ------------------------------------------------------------------------------
Name (time in ms)                   Min                Max              Mean            StdDev            Median               IQR            Outliers       OPS            Rounds  Iterations
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_ormsgpack_packb[canada]     3.5302 (1.0)       3.8939 (1.0)      3.7319 (1.0)      0.0563 (1.0)      3.7395 (1.0)      0.0484 (1.0)         56;22  267.9571 (1.0)         241           1
test_msgpack_packb[canada]       8.8642 (2.51)     14.0432 (3.61)     9.3660 (2.51)     0.5649 (10.03)    9.2983 (2.49)     0.0982 (2.03)         3;11  106.7691 (0.40)        106           1
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------- benchmark 'canada unpackb': 2 tests --------------------------------------------------------------------------------
Name (time in ms)                      Min                Max               Mean             StdDev             Median                IQR            Outliers      OPS            Rounds  Iterations
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_msgpack_unpackb[canada]       10.1176 (1.0)      62.0466 (1.18)     33.4806 (1.0)      18.8279 (1.0)      46.6582 (1.0)      38.5921 (1.02)         30;0  29.8680 (1.0)          67           1
test_ormsgpack_unpackb[canada]     11.3992 (1.13)     52.6587 (1.0)      34.1842 (1.02)     18.9461 (1.01)     47.6456 (1.02)     37.8024 (1.0)           8;0  29.2533 (0.98)         20           1
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


----------------------------------------------------------------------------- benchmark 'citm_catalog packb': 2 tests -----------------------------------------------------------------------------
Name (time in ms)                         Min               Max              Mean            StdDev            Median               IQR            Outliers       OPS            Rounds  Iterations
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_ormsgpack_packb[citm_catalog]     1.8024 (1.0)      2.1259 (1.0)      1.9487 (1.0)      0.0346 (1.0)      1.9525 (1.0)      0.0219 (1.0)         79;60  513.1650 (1.0)         454           1
test_msgpack_packb[citm_catalog]       3.4195 (1.90)     3.8128 (1.79)     3.6928 (1.90)     0.0535 (1.55)     3.7009 (1.90)     0.0250 (1.14)        47;49  270.7958 (0.53)        257           1
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------ benchmark 'citm_catalog unpackb': 2 tests ------------------------------------------------------------------------------
Name (time in ms)                           Min                Max               Mean             StdDev            Median               IQR            Outliers      OPS            Rounds  Iterations
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_ormsgpack_unpackb[citm_catalog]     5.6986 (1.0)      46.1843 (1.0)      14.2491 (1.0)      15.9791 (1.0)      6.1051 (1.0)      0.3074 (1.0)           5;5  70.1798 (1.0)          23           1
test_msgpack_unpackb[citm_catalog]       7.2600 (1.27)     56.6642 (1.23)     16.4095 (1.15)     16.3257 (1.02)     7.7364 (1.27)     0.4944 (1.61)        28;29  60.9404 (0.87)        125           1
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


----------------------------------------------------------------------------------- benchmark 'github packb': 2 tests -----------------------------------------------------------------------------------
Name (time in us)                     Min                 Max                Mean            StdDev              Median               IQR            Outliers  OPS (Kops/s)            Rounds  Iterations
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_ormsgpack_packb[github]      73.0000 (1.0)      215.9000 (1.0)       80.4826 (1.0)      4.8889 (1.0)       80.3000 (1.0)      1.1000 (1.83)     866;1118       12.4250 (1.0)        6196           1
test_msgpack_packb[github]       103.8000 (1.42)     220.8000 (1.02)     112.8049 (1.40)     4.9686 (1.02)     113.0000 (1.41)     0.6000 (1.0)     1306;1560        8.8649 (0.71)       7028           1
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


----------------------------------------------------------------------------------- benchmark 'github unpackb': 2 tests -----------------------------------------------------------------------------------
Name (time in us)                       Min                 Max                Mean            StdDev              Median               IQR            Outliers  OPS (Kops/s)            Rounds  Iterations
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_ormsgpack_unpackb[github]     201.3000 (1.0)      318.5000 (1.0)      219.0861 (1.0)      6.7340 (1.0)      219.1000 (1.0)      1.2000 (1.0)       483;721        4.5644 (1.0)        3488           1
test_msgpack_unpackb[github]       289.8000 (1.44)     436.0000 (1.37)     314.9631 (1.44)     9.4130 (1.40)     315.1000 (1.44)     2.3000 (1.92)      341;557        3.1750 (0.70)       2477           1
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

--------------------------------------------------------------------------------------- benchmark 'twitter packb': 2 tests ---------------------------------------------------------------------------------------
Name (time in us)                        Min                   Max                  Mean             StdDev                Median                IQR            Outliers         OPS            Rounds  Iterations
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_ormsgpack_packb[twitter]       820.7000 (1.0)      2,945.2000 (2.03)       889.3791 (1.0)      78.4139 (2.43)       884.2000 (1.0)      12.5250 (1.0)          4;76  1,124.3799 (1.0)         809           1
test_msgpack_packb[twitter]       1,209.3000 (1.47)     1,451.2000 (1.0)      1,301.3615 (1.46)     32.2147 (1.0)      1,306.7000 (1.48)     14.1000 (1.13)      118;138    768.4260 (0.68)        592           1
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------ benchmark 'twitter unpackb': 2 tests -----------------------------------------------------------------------------
Name (time in ms)                      Min                Max              Mean            StdDev            Median               IQR            Outliers       OPS            Rounds  Iterations
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_ormsgpack_unpackb[twitter]     2.7097 (1.0)      41.1530 (1.0)      3.2721 (1.0)      3.5860 (1.03)     2.8868 (1.0)      0.0614 (1.32)         4;38  305.6098 (1.0)         314           1
test_msgpack_unpackb[twitter]       3.8079 (1.41)     42.0617 (1.02)     4.4459 (1.36)     3.4893 (1.0)      4.1097 (1.42)     0.0465 (1.0)          2;54  224.9267 (0.74)        228           1
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"><pre class="notranslate"><code>----------------------------------------------------------------------------- benchmark 'canada packb': 2 tests ------------------------------------------------------------------------------
Name (time in ms)                   Min                Max              Mean            StdDev            Median               IQR            Outliers       OPS            Rounds  Iterations
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_ormsgpack_packb[canada]     3.5302 (1.0)       3.8939 (1.0)      3.7319 (1.0)      0.0563 (1.0)      3.7395 (1.0)      0.0484 (1.0)         56;22  267.9571 (1.0)         241           1
test_msgpack_packb[canada]       8.8642 (2.51)     14.0432 (3.61)     9.3660 (2.51)     0.5649 (10.03)    9.2983 (2.49)     0.0982 (2.03)         3;11  106.7691 (0.40)        106           1
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------- benchmark 'canada unpackb': 2 tests --------------------------------------------------------------------------------
Name (time in ms)                      Min                Max               Mean             StdDev             Median                IQR            Outliers      OPS            Rounds  Iterations
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_msgpack_unpackb[canada]       10.1176 (1.0)      62.0466 (1.18)     33.4806 (1.0)      18.8279 (1.0)      46.6582 (1.0)      38.5921 (1.02)         30;0  29.8680 (1.0)          67           1
test_ormsgpack_unpackb[canada]     11.3992 (1.13)     52.6587 (1.0)      34.1842 (1.02)     18.9461 (1.01)     47.6456 (1.02)     37.8024 (1.0)           8;0  29.2533 (0.98)         20           1
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


----------------------------------------------------------------------------- benchmark 'citm_catalog packb': 2 tests -----------------------------------------------------------------------------
Name (time in ms)                         Min               Max              Mean            StdDev            Median               IQR            Outliers       OPS            Rounds  Iterations
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_ormsgpack_packb[citm_catalog]     1.8024 (1.0)      2.1259 (1.0)      1.9487 (1.0)      0.0346 (1.0)      1.9525 (1.0)      0.0219 (1.0)         79;60  513.1650 (1.0)         454           1
test_msgpack_packb[citm_catalog]       3.4195 (1.90)     3.8128 (1.79)     3.6928 (1.90)     0.0535 (1.55)     3.7009 (1.90)     0.0250 (1.14)        47;49  270.7958 (0.53)        257           1
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------ benchmark 'citm_catalog unpackb': 2 tests ------------------------------------------------------------------------------
Name (time in ms)                           Min                Max               Mean             StdDev            Median               IQR            Outliers      OPS            Rounds  Iterations
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_ormsgpack_unpackb[citm_catalog]     5.6986 (1.0)      46.1843 (1.0)      14.2491 (1.0)      15.9791 (1.0)      6.1051 (1.0)      0.3074 (1.0)           5;5  70.1798 (1.0)          23           1
test_msgpack_unpackb[citm_catalog]       7.2600 (1.27)     56.6642 (1.23)     16.4095 (1.15)     16.3257 (1.02)     7.7364 (1.27)     0.4944 (1.61)        28;29  60.9404 (0.87)        125           1
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


----------------------------------------------------------------------------------- benchmark 'github packb': 2 tests -----------------------------------------------------------------------------------
Name (time in us)                     Min                 Max                Mean            StdDev              Median               IQR            Outliers  OPS (Kops/s)            Rounds  Iterations
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_ormsgpack_packb[github]      73.0000 (1.0)      215.9000 (1.0)       80.4826 (1.0)      4.8889 (1.0)       80.3000 (1.0)      1.1000 (1.83)     866;1118       12.4250 (1.0)        6196           1
test_msgpack_packb[github]       103.8000 (1.42)     220.8000 (1.02)     112.8049 (1.40)     4.9686 (1.02)     113.0000 (1.41)     0.6000 (1.0)     1306;1560        8.8649 (0.71)       7028           1
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


----------------------------------------------------------------------------------- benchmark 'github unpackb': 2 tests -----------------------------------------------------------------------------------
Name (time in us)                       Min                 Max                Mean            StdDev              Median               IQR            Outliers  OPS (Kops/s)            Rounds  Iterations
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_ormsgpack_unpackb[github]     201.3000 (1.0)      318.5000 (1.0)      219.0861 (1.0)      6.7340 (1.0)      219.1000 (1.0)      1.2000 (1.0)       483;721        4.5644 (1.0)        3488           1
test_msgpack_unpackb[github]       289.8000 (1.44)     436.0000 (1.37)     314.9631 (1.44)     9.4130 (1.40)     315.1000 (1.44)     2.3000 (1.92)      341;557        3.1750 (0.70)       2477           1
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

--------------------------------------------------------------------------------------- benchmark 'twitter packb': 2 tests ---------------------------------------------------------------------------------------
Name (time in us)                        Min                   Max                  Mean             StdDev                Median                IQR            Outliers         OPS            Rounds  Iterations
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_ormsgpack_packb[twitter]       820.7000 (1.0)      2,945.2000 (2.03)       889.3791 (1.0)      78.4139 (2.43)       884.2000 (1.0)      12.5250 (1.0)          4;76  1,124.3799 (1.0)         809           1
test_msgpack_packb[twitter]       1,209.3000 (1.47)     1,451.2000 (1.0)      1,301.3615 (1.46)     32.2147 (1.0)      1,306.7000 (1.48)     14.1000 (1.13)      118;138    768.4260 (0.68)        592           1
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------ benchmark 'twitter unpackb': 2 tests -----------------------------------------------------------------------------
Name (time in ms)                      Min                Max              Mean            StdDev            Median               IQR            Outliers       OPS            Rounds  Iterations
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_ormsgpack_unpackb[twitter]     2.7097 (1.0)      41.1530 (1.0)      3.2721 (1.0)      3.5860 (1.03)     2.8868 (1.0)      0.0614 (1.32)         4;38  305.6098 (1.0)         314           1
test_msgpack_unpackb[twitter]       3.8079 (1.41)     42.0617 (1.02)     4.4459 (1.36)     3.4893 (1.0)      4.1097 (1.42)     0.0465 (1.0)          2;54  224.9267 (0.74)        228           1
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
</code></pre></div>
<h7 dir="auto">
<a id="user-content-reproducing" class="anchor" aria-hidden="true" href="#reproducing"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Reproducing</h7>
<p dir="auto">The above was measured using Python 3.7.9 on Azure Linux VM (x86_64) with ormsgpack 0.2.1 and msgpack 1.0.2.</p>
<p dir="auto">The latency results can be reproduced using <code>./scripts/benchmark.sh</code> and graphs using
<code>pytest --benchmark-histogram benchmarks/bench_*</code>.</p>
<h6 dir="auto">
<a id="user-content-questions" class="anchor" aria-hidden="true" href="#questions"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Questions</h6>
<h7 dir="auto">
<a id="user-content-why-cant-i-install-it-from-pypi" class="anchor" aria-hidden="true" href="#why-cant-i-install-it-from-pypi"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Why can't I install it from PyPI?</h7>
<p dir="auto">Probably <code>pip</code> needs to be upgraded to version 20.3 or later to support
the latest manylinux_x_y or universal2 wheel formats.</p>
<h7 dir="auto">
<a id="user-content-will-it-deserialize-to-dataclasses-uuids-decimals-etc-or-support-object_hook" class="anchor" aria-hidden="true" href="#will-it-deserialize-to-dataclasses-uuids-decimals-etc-or-support-object_hook"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Will it deserialize to dataclasses, UUIDs, decimals, etc or support object_hook?</h7>
<p dir="auto">No. This requires a schema specifying what types are expected and how to
handle errors etc. This is addressed by data validation libraries a
level above this.</p>
<h7 dir="auto">
<a id="user-content-will-it-support-pypy" class="anchor" aria-hidden="true" href="#will-it-support-pypy"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Will it support PyPy?</h7>
<p dir="auto">If someone implements it well.</p>
<h6 dir="auto">
<a id="user-content-packaging" class="anchor" aria-hidden="true" href="#packaging"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Packaging</h6>
<p dir="auto">To package ormsgpack requires <a href="https://www.rust-lang.org/" rel="nofollow">Rust</a> on the
nightly channel and the <a href="https://github.com/PyO3/maturin">maturin</a>
build tool. maturin can be installed from PyPI or packaged as
well. This is the simplest and recommended way of installing
from source, assuming <code>rustup</code> is available from a
package manager:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="rustup default nightly
pip wheel --no-binary=ormsgpack ormsgpack"><pre>rustup default nightly
pip wheel --no-binary=ormsgpack ormsgpack</pre></div>
<p dir="auto">This is an example of building a wheel using the repository as source,
<code>rustup</code> installed from upstream, and a pinned version of Rust:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='pip install maturin
curl https://sh.rustup.rs -sSf | sh -s -- --default-toolchain nightly-2021-05-25 --profile minimal -y
export RUSTFLAGS="-C target-cpu=k8"
maturin build --no-sdist --release --strip --manylinux off
ls -1 target/wheels'><pre>pip install maturin
curl https://sh.rustup.rs -sSf <span class="pl-k">|</span> sh -s -- --default-toolchain nightly-2021-05-25 --profile minimal -y
<span class="pl-k">export</span> RUSTFLAGS=<span class="pl-s"><span class="pl-pds">"</span>-C target-cpu=k8<span class="pl-pds">"</span></span>
maturin build --no-sdist --release --strip --manylinux off
ls -1 target/wheels</pre></div>
<p dir="auto">Problems with the Rust nightly channel may require pinning a version.
<code>nightly-2021-05-25</code> is known to be ok.</p>
<p dir="auto">ormsgpack is tested for amd64 and aarch64 on Linux, macOS, and Windows. It
may not work on 32-bit targets. It has recommended <code>RUSTFLAGS</code>
specified in <code>.cargo/config</code> so it is recommended to either not set
<code>RUSTFLAGS</code> or include these options.</p>
<p dir="auto">There are no runtime dependencies other than libc.</p>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<p dir="auto">orjson was written by ijl &lt;<a href="mailto:ijl@mailbox.org">ijl@mailbox.org</a>&gt;, copyright 2018 - 2021, licensed
under both the Apache 2 and MIT licenses.</p>
<p dir="auto">ormsgpack was forked from orjson and is maintained by Aviram Hassan &lt;<a href="mailto:aviramyhassan@gmail.com">aviramyhassan@gmail.com</a>&gt;, licensed
same as orjson.</p>
</article>
  </div>
        </div>
        
        <div id="qs-jakm-txmsgpackrpc" class="qs"><h4><a href="https://github.com/jakm/txmsgpackrpc" target="_blank">jakm/txmsgpackrpc <span class="qs-url">https://github.com/jakm/txmsgpackrpc</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-txmsgpackrpc" class="anchor" aria-hidden="true" href="#txmsgpackrpc"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>txmsgpackrpc</h5>
<a href="https://travis-ci.org/jakm/txmsgpackrpc" rel="nofollow"><img alt="https://travis-ci.org/jakm/txmsgpackrpc.svg?branch=master" src="https://camo.githubusercontent.com/ee1bf73002afef91a9470d263097f9855efd61ae0343c17a753f6e8ede48a0ad/68747470733a2f2f7472617669732d63692e6f72672f6a616b6d2f74786d73677061636b7270632e7376673f6272616e63683d6d6173746572" data-canonical-src="https://travis-ci.org/jakm/txmsgpackrpc.svg?branch=master" style="max-width: 100%;"></a>
<p dir="auto">For the latest source code, see <a href="http://github.com/jakm/txmsgpackrpc">http://github.com/jakm/txmsgpackrpc</a></p>
<p dir="auto"><code>txmsgpackrpc</code> is a library for writing asynchronous
<a href="https://github.com/msgpack-rpc/msgpack-rpc/blob/master/spec.md">msgpack-rpc</a>
servers and clients in Python, using <a href="http://twistedmatrix.com" rel="nofollow">Twisted
framework</a>. Library is based on
<a href="https://github.com/donalm/txMsgpack">txMsgpack</a>, but some
improvements and fixes were made.</p>
<a name="user-content-features"></a>
<h6 dir="auto">
<a id="user-content-features" class="anchor" aria-hidden="true" href="#features"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Features</h6>
<ul dir="auto">
<li>user friendly API</li>
<li>modular object model</li>
<li>working timeouts and reconnecting</li>
<li>connection pool support</li>
<li>TCP, SSL, UDP and UNIX sockets</li>
</ul>
<a name="user-content-python-3-note"></a>
<h6 dir="auto">
<a id="user-content-python-3-note" class="anchor" aria-hidden="true" href="#python-3-note"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Python 3 note</h6>
<p dir="auto">To use UNIX sockets with Python 3 please use Twisted framework 15.3.0 and above.</p>
<a name="user-content-dependencies"></a>
<h6 dir="auto">
<a id="user-content-dependencies" class="anchor" aria-hidden="true" href="#dependencies"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Dependencies</h6>
<ul dir="auto">
<li>msgpack-python <a href="https://pypi.python.org/pypi/msgpack-python/" rel="nofollow">https://pypi.python.org/pypi/msgpack-python/</a>
</li>
<li>Twisted <a href="http://twistedmatrix.com/trac/" rel="nofollow">http://twistedmatrix.com/trac/</a>
</li>
</ul>
<a name="user-content-installation"></a>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="% pip install txmsgpackrpc"><pre>% pip install txmsgpackrpc</pre></div>
<p dir="auto">Debian packages are available on project's <a href="https://github.com/jakm/txmsgpackrpc/releases/latest">Releases
page</a>.</p>
<a name="user-content-tcp-example"></a>
<h6 dir="auto">
<a id="user-content-tcp-example" class="anchor" aria-hidden="true" href="#tcp-example"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>TCP example</h6>
<p dir="auto">Computation of PI using Chudnovsky algorithm in subprocess. For details,
see <a href="http://www.craig-wood.com/nick/articles/pi-chudnovsky/" rel="nofollow">http://www.craig-wood.com/nick/articles/pi-chudnovsky/</a>.</p>
<a name="user-content-results"></a>
<h7 dir="auto">
<a id="user-content-results" class="anchor" aria-hidden="true" href="#results"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Results</h7>
<pre>Computation of PI with 5 places finished in 0.022390 seconds

Computation of PI with 100 places finished in 0.037856 seconds

Computation of PI with 1000 places finished in 0.038070 seconds

Computation of PI with 10000 places finished in 0.073907 seconds

Computation of PI with 100000 places finished in 6.741683 seconds

Computation of PI with 5 places finished in 0.001142 seconds

Computation of PI with 100 places finished in 0.001182 seconds

Computation of PI with 1000 places finished in 0.001206 seconds

Computation of PI with 10000 places finished in 0.001230 seconds

Computation of PI with 100000 places finished in 0.001255 seconds

Computation of PI with 1000000 places finished in 432.574457 seconds

Computation of PI with 1000000 places finished in 402.551226 seconds

DONE
</pre>
<a name="user-content-server"></a>
<h7 dir="auto">
<a id="user-content-server" class="anchor" aria-hidden="true" href="#server"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Server</h7>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="from __future__ import print_function

from collections import defaultdict
from twisted.internet import defer, reactor, utils
from twisted.python import failure
from txmsgpackrpc.server import MsgpackRPCServer


pi_chudovsky_bs = '''
&quot;&quot;&quot;
Python3 program to calculate Pi using python long integers, binary
splitting and the Chudnovsky algorithm

See: http://www.craig-wood.com/nick/articles/pi-chudnovsky/ for more
info

Nick Craig-Wood &lt;nick@craig-wood.com&gt;
&quot;&quot;&quot;

import math
from time import time

def sqrt(n, one):
    &quot;&quot;&quot;
    Return the square root of n as a fixed point number with the one
    passed in.  It uses a second order Newton-Raphson convgence.  This
    doubles the number of significant figures on each iteration.
    &quot;&quot;&quot;
    # Use floating point arithmetic to make an initial guess
    floating_point_precision = 10**16
    n_float = float((n * floating_point_precision) // one) / floating_point_precision
    x = (int(floating_point_precision * math.sqrt(n_float)) * one) // floating_point_precision
    n_one = n * one
    while 1:
        x_old = x
        x = (x + n_one // x) // 2
        if x == x_old:
            break
    return x

def pi_chudnovsky_bs(digits):
    &quot;&quot;&quot;
    Compute int(pi * 10**digits)

    This is done using Chudnovsky's series with binary splitting
    &quot;&quot;&quot;
    C = 640320
    C3_OVER_24 = C**3 // 24
    def bs(a, b):
        &quot;&quot;&quot;
        Computes the terms for binary splitting the Chudnovsky infinite series

        a(a) = +/- (13591409 + 545140134*a)
        p(a) = (6*a-5)*(2*a-1)*(6*a-1)
        b(a) = 1
        q(a) = a*a*a*C3_OVER_24

        returns P(a,b), Q(a,b) and T(a,b)
        &quot;&quot;&quot;
        if b - a == 1:
            # Directly compute P(a,a+1), Q(a,a+1) and T(a,a+1)
            if a == 0:
                Pab = Qab = 1
            else:
                Pab = (6*a-5)*(2*a-1)*(6*a-1)
                Qab = a*a*a*C3_OVER_24
            Tab = Pab * (13591409 + 545140134*a) # a(a) * p(a)
            if a &amp; 1:
                Tab = -Tab
        else:
            # Recursively compute P(a,b), Q(a,b) and T(a,b)
            # m is the midpoint of a and b
            m = (a + b) // 2
            # Recursively calculate P(a,m), Q(a,m) and T(a,m)
            Pam, Qam, Tam = bs(a, m)
            # Recursively calculate P(m,b), Q(m,b) and T(m,b)
            Pmb, Qmb, Tmb = bs(m, b)
            # Now combine
            Pab = Pam * Pmb
            Qab = Qam * Qmb
            Tab = Qmb * Tam + Pam * Tmb
        return Pab, Qab, Tab
    # how many terms to compute
    DIGITS_PER_TERM = math.log10(C3_OVER_24/6/2/6)
    N = int(digits/DIGITS_PER_TERM + 1)
    # Calclate P(0,N) and Q(0,N)
    P, Q, T = bs(0, N)
    one = 10**digits
    sqrtC = sqrt(10005*one, one)
    return (Q*426880*sqrtC) // T

if __name__ == &quot;__main__&quot;:
    import sys
    digits = int(sys.argv[1])
    pi = pi_chudnovsky_bs(digits)
    print(pi)
'''


def set_timeout(deferred, timeout=30):
    def callback(value):
        if not watchdog.called:
            watchdog.cancel()
        return value

    deferred.addBoth(callback)

    watchdog = reactor.callLater(timeout, defer.timeout, deferred)


class ComputePI(MsgpackRPCServer):

    def __init__(self):
        self.waiting = defaultdict(list)
        self.results = {}

    def remote_PI(self, digits, timeout=None):
        if digits in self.results:
            return defer.succeed(self.results[digits])

        d = defer.Deferred()

        if digits not in self.waiting:
            subprocessDeferred = self.computePI(digits, timeout)

            def callWaiting(res):
                waiting = self.waiting[digits]
                del self.waiting[digits]

                if isinstance(res, failure.Failure):
                    func = lambda d: d.errback(res)
                else:
                    func = lambda d: d.callback(res)

                for d in waiting:
                    func(d)

            subprocessDeferred.addBoth(callWaiting)

        self.waiting[digits].append(d)

        return d

    def computePI(self, digits, timeout):
        d = utils.getProcessOutputAndValue('/usr/bin/python', args=('-c', pi_chudovsky_bs, str(digits)))

        def callback((out, err, code)):
            if code == 0:
                pi = int(out)
                self.results[digits] = pi
                return pi
            else:
                return failure.Failure(RuntimeError('Computation failed: ' + err))

        if timeout is not None:
            set_timeout(d, timeout)

        d.addCallback(callback)

        return d


def main():
    server = ComputePI()
    reactor.listenTCP(8000, server.getStreamFactory())

if __name__ == '__main__':
    reactor.callWhenRunning(main)
    reactor.run()"><pre><span class="pl-k">from</span> __future__ <span class="pl-k">import</span> <span class="pl-s1">print_function</span>

<span class="pl-k">from</span> <span class="pl-s1">collections</span> <span class="pl-k">import</span> <span class="pl-s1">defaultdict</span>
<span class="pl-k">from</span> <span class="pl-s1">twisted</span>.<span class="pl-s1">internet</span> <span class="pl-k">import</span> <span class="pl-s1">defer</span>, <span class="pl-s1">reactor</span>, <span class="pl-s1">utils</span>
<span class="pl-k">from</span> <span class="pl-s1">twisted</span>.<span class="pl-s1">python</span> <span class="pl-k">import</span> <span class="pl-s1">failure</span>
<span class="pl-k">from</span> <span class="pl-s1">txmsgpackrpc</span>.<span class="pl-s1">server</span> <span class="pl-k">import</span> <span class="pl-v">MsgpackRPCServer</span>


<span class="pl-s1">pi_chudovsky_bs</span> <span class="pl-c1">=</span> <span class="pl-s">'''</span>
<span class="pl-s">"""</span>
<span class="pl-s">Python3 program to calculate Pi using python long integers, binary</span>
<span class="pl-s">splitting and the Chudnovsky algorithm</span>
<span class="pl-s"></span>
<span class="pl-s">See: http://www.craig-wood.com/nick/articles/pi-chudnovsky/ for more</span>
<span class="pl-s">info</span>
<span class="pl-s"></span>
<span class="pl-s">Nick Craig-Wood &lt;nick@craig-wood.com&gt;</span>
<span class="pl-s">"""</span>
<span class="pl-s"></span>
<span class="pl-s">import math</span>
<span class="pl-s">from time import time</span>
<span class="pl-s"></span>
<span class="pl-s">def sqrt(n, one):</span>
<span class="pl-s">    """</span>
<span class="pl-s">    Return the square root of n as a fixed point number with the one</span>
<span class="pl-s">    passed in.  It uses a second order Newton-Raphson convgence.  This</span>
<span class="pl-s">    doubles the number of significant figures on each iteration.</span>
<span class="pl-s">    """</span>
<span class="pl-s">    # Use floating point arithmetic to make an initial guess</span>
<span class="pl-s">    floating_point_precision = 10**16</span>
<span class="pl-s">    n_float = float((n * floating_point_precision) // one) / floating_point_precision</span>
<span class="pl-s">    x = (int(floating_point_precision * math.sqrt(n_float)) * one) // floating_point_precision</span>
<span class="pl-s">    n_one = n * one</span>
<span class="pl-s">    while 1:</span>
<span class="pl-s">        x_old = x</span>
<span class="pl-s">        x = (x + n_one // x) // 2</span>
<span class="pl-s">        if x == x_old:</span>
<span class="pl-s">            break</span>
<span class="pl-s">    return x</span>
<span class="pl-s"></span>
<span class="pl-s">def pi_chudnovsky_bs(digits):</span>
<span class="pl-s">    """</span>
<span class="pl-s">    Compute int(pi * 10**digits)</span>
<span class="pl-s"></span>
<span class="pl-s">    This is done using Chudnovsky's series with binary splitting</span>
<span class="pl-s">    """</span>
<span class="pl-s">    C = 640320</span>
<span class="pl-s">    C3_OVER_24 = C**3 // 24</span>
<span class="pl-s">    def bs(a, b):</span>
<span class="pl-s">        """</span>
<span class="pl-s">        Computes the terms for binary splitting the Chudnovsky infinite series</span>
<span class="pl-s"></span>
<span class="pl-s">        a(a) = +/- (13591409 + 545140134*a)</span>
<span class="pl-s">        p(a) = (6*a-5)*(2*a-1)*(6*a-1)</span>
<span class="pl-s">        b(a) = 1</span>
<span class="pl-s">        q(a) = a*a*a*C3_OVER_24</span>
<span class="pl-s"></span>
<span class="pl-s">        returns P(a,b), Q(a,b) and T(a,b)</span>
<span class="pl-s">        """</span>
<span class="pl-s">        if b - a == 1:</span>
<span class="pl-s">            # Directly compute P(a,a+1), Q(a,a+1) and T(a,a+1)</span>
<span class="pl-s">            if a == 0:</span>
<span class="pl-s">                Pab = Qab = 1</span>
<span class="pl-s">            else:</span>
<span class="pl-s">                Pab = (6*a-5)*(2*a-1)*(6*a-1)</span>
<span class="pl-s">                Qab = a*a*a*C3_OVER_24</span>
<span class="pl-s">            Tab = Pab * (13591409 + 545140134*a) # a(a) * p(a)</span>
<span class="pl-s">            if a &amp; 1:</span>
<span class="pl-s">                Tab = -Tab</span>
<span class="pl-s">        else:</span>
<span class="pl-s">            # Recursively compute P(a,b), Q(a,b) and T(a,b)</span>
<span class="pl-s">            # m is the midpoint of a and b</span>
<span class="pl-s">            m = (a + b) // 2</span>
<span class="pl-s">            # Recursively calculate P(a,m), Q(a,m) and T(a,m)</span>
<span class="pl-s">            Pam, Qam, Tam = bs(a, m)</span>
<span class="pl-s">            # Recursively calculate P(m,b), Q(m,b) and T(m,b)</span>
<span class="pl-s">            Pmb, Qmb, Tmb = bs(m, b)</span>
<span class="pl-s">            # Now combine</span>
<span class="pl-s">            Pab = Pam * Pmb</span>
<span class="pl-s">            Qab = Qam * Qmb</span>
<span class="pl-s">            Tab = Qmb * Tam + Pam * Tmb</span>
<span class="pl-s">        return Pab, Qab, Tab</span>
<span class="pl-s">    # how many terms to compute</span>
<span class="pl-s">    DIGITS_PER_TERM = math.log10(C3_OVER_24/6/2/6)</span>
<span class="pl-s">    N = int(digits/DIGITS_PER_TERM + 1)</span>
<span class="pl-s">    # Calclate P(0,N) and Q(0,N)</span>
<span class="pl-s">    P, Q, T = bs(0, N)</span>
<span class="pl-s">    one = 10**digits</span>
<span class="pl-s">    sqrtC = sqrt(10005*one, one)</span>
<span class="pl-s">    return (Q*426880*sqrtC) // T</span>
<span class="pl-s"></span>
<span class="pl-s">if __name__ == "__main__":</span>
<span class="pl-s">    import sys</span>
<span class="pl-s">    digits = int(sys.argv[1])</span>
<span class="pl-s">    pi = pi_chudnovsky_bs(digits)</span>
<span class="pl-s">    print(pi)</span>
<span class="pl-s">'''</span>


<span class="pl-k">def</span> <span class="pl-en">set_timeout</span>(<span class="pl-s1">deferred</span>, <span class="pl-s1">timeout</span><span class="pl-c1">=</span><span class="pl-c1">30</span>):
    <span class="pl-k">def</span> <span class="pl-en">callback</span>(<span class="pl-s1">value</span>):
        <span class="pl-k">if</span> <span class="pl-c1">not</span> <span class="pl-s1">watchdog</span>.<span class="pl-s1">called</span>:
            <span class="pl-s1">watchdog</span>.<span class="pl-en">cancel</span>()
        <span class="pl-k">return</span> <span class="pl-s1">value</span>

    <span class="pl-s1">deferred</span>.<span class="pl-en">addBoth</span>(<span class="pl-s1">callback</span>)

    <span class="pl-s1">watchdog</span> <span class="pl-c1">=</span> <span class="pl-s1">reactor</span>.<span class="pl-en">callLater</span>(<span class="pl-s1">timeout</span>, <span class="pl-s1">defer</span>.<span class="pl-s1">timeout</span>, <span class="pl-s1">deferred</span>)


<span class="pl-k">class</span> <span class="pl-v">ComputePI</span>(<span class="pl-v">MsgpackRPCServer</span>):

    <span class="pl-k">def</span> <span class="pl-en">__init__</span>(<span class="pl-s1">self</span>):
        <span class="pl-s1">self</span>.<span class="pl-s1">waiting</span> <span class="pl-c1">=</span> <span class="pl-en">defaultdict</span>(<span class="pl-s1">list</span>)
        <span class="pl-s1">self</span>.<span class="pl-s1">results</span> <span class="pl-c1">=</span> {}

    <span class="pl-k">def</span> <span class="pl-en">remote_PI</span>(<span class="pl-s1">self</span>, <span class="pl-s1">digits</span>, <span class="pl-s1">timeout</span><span class="pl-c1">=</span><span class="pl-c1">None</span>):
        <span class="pl-k">if</span> <span class="pl-s1">digits</span> <span class="pl-c1">in</span> <span class="pl-s1">self</span>.<span class="pl-s1">results</span>:
            <span class="pl-k">return</span> <span class="pl-s1">defer</span>.<span class="pl-en">succeed</span>(<span class="pl-s1">self</span>.<span class="pl-s1">results</span>[<span class="pl-s1">digits</span>])

        <span class="pl-s1">d</span> <span class="pl-c1">=</span> <span class="pl-s1">defer</span>.<span class="pl-v">Deferred</span>()

        <span class="pl-k">if</span> <span class="pl-s1">digits</span> <span class="pl-c1">not</span> <span class="pl-c1">in</span> <span class="pl-s1">self</span>.<span class="pl-s1">waiting</span>:
            <span class="pl-s1">subprocessDeferred</span> <span class="pl-c1">=</span> <span class="pl-s1">self</span>.<span class="pl-en">computePI</span>(<span class="pl-s1">digits</span>, <span class="pl-s1">timeout</span>)

            <span class="pl-k">def</span> <span class="pl-en">callWaiting</span>(<span class="pl-s1">res</span>):
                <span class="pl-s1">waiting</span> <span class="pl-c1">=</span> <span class="pl-s1">self</span>.<span class="pl-s1">waiting</span>[<span class="pl-s1">digits</span>]
                <span class="pl-k">del</span> <span class="pl-s1">self</span>.<span class="pl-s1">waiting</span>[<span class="pl-s1">digits</span>]

                <span class="pl-k">if</span> <span class="pl-en">isinstance</span>(<span class="pl-s1">res</span>, <span class="pl-s1">failure</span>.<span class="pl-v">Failure</span>):
                    <span class="pl-s1">func</span> <span class="pl-c1">=</span> <span class="pl-k">lambda</span> <span class="pl-s1">d</span>: <span class="pl-s1">d</span>.<span class="pl-en">errback</span>(<span class="pl-s1">res</span>)
                <span class="pl-k">else</span>:
                    <span class="pl-s1">func</span> <span class="pl-c1">=</span> <span class="pl-k">lambda</span> <span class="pl-s1">d</span>: <span class="pl-s1">d</span>.<span class="pl-en">callback</span>(<span class="pl-s1">res</span>)

                <span class="pl-k">for</span> <span class="pl-s1">d</span> <span class="pl-c1">in</span> <span class="pl-s1">waiting</span>:
                    <span class="pl-en">func</span>(<span class="pl-s1">d</span>)

            <span class="pl-s1">subprocessDeferred</span>.<span class="pl-en">addBoth</span>(<span class="pl-s1">callWaiting</span>)

        <span class="pl-s1">self</span>.<span class="pl-s1">waiting</span>[<span class="pl-s1">digits</span>].<span class="pl-en">append</span>(<span class="pl-s1">d</span>)

        <span class="pl-k">return</span> <span class="pl-s1">d</span>

    <span class="pl-k">def</span> <span class="pl-en">computePI</span>(<span class="pl-s1">self</span>, <span class="pl-s1">digits</span>, <span class="pl-s1">timeout</span>):
        <span class="pl-s1">d</span> <span class="pl-c1">=</span> <span class="pl-s1">utils</span>.<span class="pl-en">getProcessOutputAndValue</span>(<span class="pl-s">'/usr/bin/python'</span>, <span class="pl-s1">args</span><span class="pl-c1">=</span>(<span class="pl-s">'-c'</span>, <span class="pl-s1">pi_chudovsky_bs</span>, <span class="pl-en">str</span>(<span class="pl-s1">digits</span>)))

        <span class="pl-k">def</span> <span class="pl-en">callback</span>((<span class="pl-s1">out</span>, <span class="pl-s1">err</span>, <span class="pl-s1">code</span>)):
            <span class="pl-k">if</span> <span class="pl-s1">code</span> <span class="pl-c1">==</span> <span class="pl-c1">0</span>:
                <span class="pl-s1">pi</span> <span class="pl-c1">=</span> <span class="pl-en">int</span>(<span class="pl-s1">out</span>)
                <span class="pl-s1">self</span>.<span class="pl-s1">results</span>[<span class="pl-s1">digits</span>] <span class="pl-c1">=</span> <span class="pl-s1">pi</span>
                <span class="pl-k">return</span> <span class="pl-s1">pi</span>
            <span class="pl-k">else</span>:
                <span class="pl-k">return</span> <span class="pl-s1">failure</span>.<span class="pl-v">Failure</span>(<span class="pl-v">RuntimeError</span>(<span class="pl-s">'Computation failed: '</span> <span class="pl-c1">+</span> <span class="pl-s1">err</span>))

        <span class="pl-k">if</span> <span class="pl-s1">timeout</span> <span class="pl-c1">is</span> <span class="pl-c1">not</span> <span class="pl-c1">None</span>:
            <span class="pl-en">set_timeout</span>(<span class="pl-s1">d</span>, <span class="pl-s1">timeout</span>)

        <span class="pl-s1">d</span>.<span class="pl-en">addCallback</span>(<span class="pl-s1">callback</span>)

        <span class="pl-k">return</span> <span class="pl-s1">d</span>


<span class="pl-k">def</span> <span class="pl-en">main</span>():
    <span class="pl-s1">server</span> <span class="pl-c1">=</span> <span class="pl-v">ComputePI</span>()
    <span class="pl-s1">reactor</span>.<span class="pl-en">listenTCP</span>(<span class="pl-c1">8000</span>, <span class="pl-s1">server</span>.<span class="pl-en">getStreamFactory</span>())

<span class="pl-k">if</span> <span class="pl-s1">__name__</span> <span class="pl-c1">==</span> <span class="pl-s">'__main__'</span>:
    <span class="pl-s1">reactor</span>.<span class="pl-en">callWhenRunning</span>(<span class="pl-s1">main</span>)
    <span class="pl-s1">reactor</span>.<span class="pl-en">run</span>()</pre></div>
<a name="user-content-client"></a>
<h7 dir="auto">
<a id="user-content-client" class="anchor" aria-hidden="true" href="#client"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Client</h7>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="from __future__ import print_function

import sys
import time
from twisted.internet import defer, reactor, task
from twisted.python import failure

@defer.inlineCallbacks
def main():
    try:

        from txmsgpackrpc.client import connect

        c = yield connect('localhost', 8000, waitTimeout=900)

        def callback(res, digits, start_time):
            if isinstance(res, failure.Failure):
                print('Computation of PI with %d places failed: %s' %
                      (digits, res.getErrorMessage()), end='\n\n')
            else:
                print('Computation of PI with %d places finished in %f seconds' %
                      (digits, time.time() - start_time), end='\n\n')
            sys.stdout.flush()

        defers = []
        for _ in range(2):
            for digits in (5, 100, 1000, 10000, 100000, 1000000):
                d = c.createRequest('PI', digits, 600)
                d.addBoth(callback, digits, time.time())
                defers.append(d)
            # wait for 30 seconds
            yield task.deferLater(reactor, 30, lambda: None)

        yield defer.DeferredList(defers)

        print('DONE')

    except Exception:
        import traceback
        traceback.print_exc()
    finally:
        reactor.stop()

if __name__ == '__main__':
    reactor.callWhenRunning(main)
    reactor.run()"><pre><span class="pl-k">from</span> __future__ <span class="pl-k">import</span> <span class="pl-s1">print_function</span>

<span class="pl-k">import</span> <span class="pl-s1">sys</span>
<span class="pl-k">import</span> <span class="pl-s1">time</span>
<span class="pl-k">from</span> <span class="pl-s1">twisted</span>.<span class="pl-s1">internet</span> <span class="pl-k">import</span> <span class="pl-s1">defer</span>, <span class="pl-s1">reactor</span>, <span class="pl-s1">task</span>
<span class="pl-k">from</span> <span class="pl-s1">twisted</span>.<span class="pl-s1">python</span> <span class="pl-k">import</span> <span class="pl-s1">failure</span>

<span class="pl-en">@<span class="pl-s1">defer</span>.<span class="pl-s1">inlineCallbacks</span></span>
<span class="pl-k">def</span> <span class="pl-en">main</span>():
    <span class="pl-k">try</span>:

        <span class="pl-k">from</span> <span class="pl-s1">txmsgpackrpc</span>.<span class="pl-s1">client</span> <span class="pl-k">import</span> <span class="pl-s1">connect</span>

        <span class="pl-s1">c</span> <span class="pl-c1">=</span> <span class="pl-k">yield</span> <span class="pl-en">connect</span>(<span class="pl-s">'localhost'</span>, <span class="pl-c1">8000</span>, <span class="pl-s1">waitTimeout</span><span class="pl-c1">=</span><span class="pl-c1">900</span>)

        <span class="pl-k">def</span> <span class="pl-en">callback</span>(<span class="pl-s1">res</span>, <span class="pl-s1">digits</span>, <span class="pl-s1">start_time</span>):
            <span class="pl-k">if</span> <span class="pl-en">isinstance</span>(<span class="pl-s1">res</span>, <span class="pl-s1">failure</span>.<span class="pl-v">Failure</span>):
                <span class="pl-en">print</span>(<span class="pl-s">'Computation of PI with %d places failed: %s'</span> <span class="pl-c1">%</span>
                      (<span class="pl-s1">digits</span>, <span class="pl-s1">res</span>.<span class="pl-en">getErrorMessage</span>()), <span class="pl-s1">end</span><span class="pl-c1">=</span><span class="pl-s">'<span class="pl-cce">\n</span><span class="pl-cce">\n</span>'</span>)
            <span class="pl-k">else</span>:
                <span class="pl-en">print</span>(<span class="pl-s">'Computation of PI with %d places finished in %f seconds'</span> <span class="pl-c1">%</span>
                      (<span class="pl-s1">digits</span>, <span class="pl-s1">time</span>.<span class="pl-en">time</span>() <span class="pl-c1">-</span> <span class="pl-s1">start_time</span>), <span class="pl-s1">end</span><span class="pl-c1">=</span><span class="pl-s">'<span class="pl-cce">\n</span><span class="pl-cce">\n</span>'</span>)
            <span class="pl-s1">sys</span>.<span class="pl-s1">stdout</span>.<span class="pl-en">flush</span>()

        <span class="pl-s1">defers</span> <span class="pl-c1">=</span> []
        <span class="pl-k">for</span> <span class="pl-s1">_</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-c1">2</span>):
            <span class="pl-k">for</span> <span class="pl-s1">digits</span> <span class="pl-c1">in</span> (<span class="pl-c1">5</span>, <span class="pl-c1">100</span>, <span class="pl-c1">1000</span>, <span class="pl-c1">10000</span>, <span class="pl-c1">100000</span>, <span class="pl-c1">1000000</span>):
                <span class="pl-s1">d</span> <span class="pl-c1">=</span> <span class="pl-s1">c</span>.<span class="pl-en">createRequest</span>(<span class="pl-s">'PI'</span>, <span class="pl-s1">digits</span>, <span class="pl-c1">600</span>)
                <span class="pl-s1">d</span>.<span class="pl-en">addBoth</span>(<span class="pl-s1">callback</span>, <span class="pl-s1">digits</span>, <span class="pl-s1">time</span>.<span class="pl-en">time</span>())
                <span class="pl-s1">defers</span>.<span class="pl-en">append</span>(<span class="pl-s1">d</span>)
            <span class="pl-c"># wait for 30 seconds</span>
            <span class="pl-k">yield</span> <span class="pl-s1">task</span>.<span class="pl-en">deferLater</span>(<span class="pl-s1">reactor</span>, <span class="pl-c1">30</span>, <span class="pl-k">lambda</span>: <span class="pl-c1">None</span>)

        <span class="pl-k">yield</span> <span class="pl-s1">defer</span>.<span class="pl-v">DeferredList</span>(<span class="pl-s1">defers</span>)

        <span class="pl-en">print</span>(<span class="pl-s">'DONE'</span>)

    <span class="pl-k">except</span> <span class="pl-v">Exception</span>:
        <span class="pl-k">import</span> <span class="pl-s1">traceback</span>
        <span class="pl-s1">traceback</span>.<span class="pl-en">print_exc</span>()
    <span class="pl-k">finally</span>:
        <span class="pl-s1">reactor</span>.<span class="pl-en">stop</span>()

<span class="pl-k">if</span> <span class="pl-s1">__name__</span> <span class="pl-c1">==</span> <span class="pl-s">'__main__'</span>:
    <span class="pl-s1">reactor</span>.<span class="pl-en">callWhenRunning</span>(<span class="pl-s1">main</span>)
    <span class="pl-s1">reactor</span>.<span class="pl-en">run</span>()</pre></div>
<a name="user-content-multicast-udp-example"></a>
<h6 dir="auto">
<a id="user-content-multicast-udp-example" class="anchor" aria-hidden="true" href="#multicast-udp-example"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Multicast UDP example</h6>
<p dir="auto">Example servers join to group 224.0.0.5 and listen on port 8000. Their only
method <code>echo</code> returns its parameter.</p>
<p dir="auto">Client joins group to 224.0.0.5, sends multicast request to group on port 8000
and waits for 5 seconds for responses. If some responses are received,
protocol callbacks with tuple of results and individual parts are checked for
errors. If no responses are received, protocol errbacks with TimeoutError.</p>
<p dir="auto">Because there is no common way to determine number of peers in group,
MsgpackMulticastDatagramProtocol always wait for responses until waitTimeout
expires.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ # setup multicast routing
$ ip route add 224.0.0.0/4 dev eth0
$ echo 1 &gt; /proc/sys/net/ipv4/ip_forward
$
$ # start servers listening on port 8000
$ python examples/tx_rpc_server_udp_multicast.py &amp;
[1] 3584
$ python examples/tx_rpc_server_udp_multicast.py &amp;
[2] 3585
$ python examples/tx_rpc_server_udp_multicast.py &amp;
[3] 3586
$ python examples/tx_rpc_server_udp_multicast.py &amp;
[4] 3587
$ python examples/tx_rpc_server_udp_multicast.py &amp;
[5] 3588
$
$ # execute client
$ python examples/tx_rpc_client_udp_multicast.py
Received results from 5 peers
$"><pre>$ <span class="pl-c"><span class="pl-c">#</span> setup multicast routing</span>
$ ip route add 224.0.0.0/4 dev eth0
$ <span class="pl-c1">echo</span> 1 <span class="pl-k">&gt;</span> /proc/sys/net/ipv4/ip_forward
$
$ <span class="pl-c"><span class="pl-c">#</span> start servers listening on port 8000</span>
$ python examples/tx_rpc_server_udp_multicast.py <span class="pl-k">&amp;</span>
[1] 3584
$ python examples/tx_rpc_server_udp_multicast.py <span class="pl-k">&amp;</span>
[2] 3585
$ python examples/tx_rpc_server_udp_multicast.py <span class="pl-k">&amp;</span>
[3] 3586
$ python examples/tx_rpc_server_udp_multicast.py <span class="pl-k">&amp;</span>
[4] 3587
$ python examples/tx_rpc_server_udp_multicast.py <span class="pl-k">&amp;</span>
[5] 3588
$
$ <span class="pl-c"><span class="pl-c">#</span> execute client</span>
$ python examples/tx_rpc_client_udp_multicast.py
Received results from 5 peers
$</pre></div>
<a name="user-content-id1"></a>
<h7 dir="auto">
<a id="user-content-server-1" class="anchor" aria-hidden="true" href="#server-1"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Server</h7>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="from twisted.internet import defer, reactor, task
from txmsgpackrpc.server import MsgpackRPCServer


class EchoRPC(MsgpackRPCServer):

    @defer.inlineCallbacks
    def remote_echo(self, value, delay=None, msgid=None):
        if delay is not None:
            yield task.deferLater(reactor, delay, lambda: None)
        defer.returnValue(value)


def main():
    server = EchoRPC()
    reactor.listenMulticast(8000, server.getMulticastProtocol('228.0.0.5', ttl=5),
                            listenMultiple=True)

if __name__ == '__main__':
    reactor.callWhenRunning(main)
    reactor.run()"><pre><span class="pl-k">from</span> <span class="pl-s1">twisted</span>.<span class="pl-s1">internet</span> <span class="pl-k">import</span> <span class="pl-s1">defer</span>, <span class="pl-s1">reactor</span>, <span class="pl-s1">task</span>
<span class="pl-k">from</span> <span class="pl-s1">txmsgpackrpc</span>.<span class="pl-s1">server</span> <span class="pl-k">import</span> <span class="pl-v">MsgpackRPCServer</span>


<span class="pl-k">class</span> <span class="pl-v">EchoRPC</span>(<span class="pl-v">MsgpackRPCServer</span>):

    <span class="pl-en">@<span class="pl-s1">defer</span>.<span class="pl-s1">inlineCallbacks</span></span>
    <span class="pl-k">def</span> <span class="pl-en">remote_echo</span>(<span class="pl-s1">self</span>, <span class="pl-s1">value</span>, <span class="pl-s1">delay</span><span class="pl-c1">=</span><span class="pl-c1">None</span>, <span class="pl-s1">msgid</span><span class="pl-c1">=</span><span class="pl-c1">None</span>):
        <span class="pl-k">if</span> <span class="pl-s1">delay</span> <span class="pl-c1">is</span> <span class="pl-c1">not</span> <span class="pl-c1">None</span>:
            <span class="pl-k">yield</span> <span class="pl-s1">task</span>.<span class="pl-en">deferLater</span>(<span class="pl-s1">reactor</span>, <span class="pl-s1">delay</span>, <span class="pl-k">lambda</span>: <span class="pl-c1">None</span>)
        <span class="pl-s1">defer</span>.<span class="pl-en">returnValue</span>(<span class="pl-s1">value</span>)


<span class="pl-k">def</span> <span class="pl-en">main</span>():
    <span class="pl-s1">server</span> <span class="pl-c1">=</span> <span class="pl-v">EchoRPC</span>()
    <span class="pl-s1">reactor</span>.<span class="pl-en">listenMulticast</span>(<span class="pl-c1">8000</span>, <span class="pl-s1">server</span>.<span class="pl-en">getMulticastProtocol</span>(<span class="pl-s">'228.0.0.5'</span>, <span class="pl-s1">ttl</span><span class="pl-c1">=</span><span class="pl-c1">5</span>),
                            <span class="pl-s1">listenMultiple</span><span class="pl-c1">=</span><span class="pl-c1">True</span>)

<span class="pl-k">if</span> <span class="pl-s1">__name__</span> <span class="pl-c1">==</span> <span class="pl-s">'__main__'</span>:
    <span class="pl-s1">reactor</span>.<span class="pl-en">callWhenRunning</span>(<span class="pl-s1">main</span>)
    <span class="pl-s1">reactor</span>.<span class="pl-en">run</span>()</pre></div>
<a name="user-content-id2"></a>
<h7 dir="auto">
<a id="user-content-client-1" class="anchor" aria-hidden="true" href="#client-1"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Client</h7>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="from __future__ import print_function

from twisted.internet import defer, reactor

@defer.inlineCallbacks
def main():
    try:

        from txmsgpackrpc.client import connect_multicast

        c = yield connect_multicast('228.0.0.5', 8000, ttl=5, waitTimeout=5)

        data = {
                    'firstName': 'John',
                    'lastName': 'Smith',
                    'isAlive': True,
                    'age': 25,
                    'height_cm': 167.6,
                    'address': {
                      'streetAddress': &quot;21 2nd Street&quot;,
                      &quot;city&quot;: 'New York',
                      &quot;state&quot;: 'NY',
                      'postalCode': '10021-3100'
                    },
                    'phoneNumbers': [
                      {
                        'type': 'home',
                        'number': '212 555-1234'
                      },
                      {
                        'type': 'office',
                        'number': '646 555-4567'
                      }
                    ],
                    'children': [],
                    'spouse': None
                  }

        results = yield c.createRequest('echo', data)

        assert isinstance(results, tuple)

        print('Received results from %d peers' % len(results))

        for i, result in enumerate(results):
            if result != data:
                print('Result %d mismatch' % i)
                print(result)

    except Exception:
        import traceback
        traceback.print_exc()
    finally:
        reactor.stop()

if __name__ == '__main__':
    reactor.callWhenRunning(main)
    reactor.run()"><pre><span class="pl-k">from</span> __future__ <span class="pl-k">import</span> <span class="pl-s1">print_function</span>

<span class="pl-k">from</span> <span class="pl-s1">twisted</span>.<span class="pl-s1">internet</span> <span class="pl-k">import</span> <span class="pl-s1">defer</span>, <span class="pl-s1">reactor</span>

<span class="pl-en">@<span class="pl-s1">defer</span>.<span class="pl-s1">inlineCallbacks</span></span>
<span class="pl-k">def</span> <span class="pl-en">main</span>():
    <span class="pl-k">try</span>:

        <span class="pl-k">from</span> <span class="pl-s1">txmsgpackrpc</span>.<span class="pl-s1">client</span> <span class="pl-k">import</span> <span class="pl-s1">connect_multicast</span>

        <span class="pl-s1">c</span> <span class="pl-c1">=</span> <span class="pl-k">yield</span> <span class="pl-en">connect_multicast</span>(<span class="pl-s">'228.0.0.5'</span>, <span class="pl-c1">8000</span>, <span class="pl-s1">ttl</span><span class="pl-c1">=</span><span class="pl-c1">5</span>, <span class="pl-s1">waitTimeout</span><span class="pl-c1">=</span><span class="pl-c1">5</span>)

        <span class="pl-s1">data</span> <span class="pl-c1">=</span> {
                    <span class="pl-s">'firstName'</span>: <span class="pl-s">'John'</span>,
                    <span class="pl-s">'lastName'</span>: <span class="pl-s">'Smith'</span>,
                    <span class="pl-s">'isAlive'</span>: <span class="pl-c1">True</span>,
                    <span class="pl-s">'age'</span>: <span class="pl-c1">25</span>,
                    <span class="pl-s">'height_cm'</span>: <span class="pl-c1">167.6</span>,
                    <span class="pl-s">'address'</span>: {
                      <span class="pl-s">'streetAddress'</span>: <span class="pl-s">"21 2nd Street"</span>,
                      <span class="pl-s">"city"</span>: <span class="pl-s">'New York'</span>,
                      <span class="pl-s">"state"</span>: <span class="pl-s">'NY'</span>,
                      <span class="pl-s">'postalCode'</span>: <span class="pl-s">'10021-3100'</span>
                    },
                    <span class="pl-s">'phoneNumbers'</span>: [
                      {
                        <span class="pl-s">'type'</span>: <span class="pl-s">'home'</span>,
                        <span class="pl-s">'number'</span>: <span class="pl-s">'212 555-1234'</span>
                      },
                      {
                        <span class="pl-s">'type'</span>: <span class="pl-s">'office'</span>,
                        <span class="pl-s">'number'</span>: <span class="pl-s">'646 555-4567'</span>
                      }
                    ],
                    <span class="pl-s">'children'</span>: [],
                    <span class="pl-s">'spouse'</span>: <span class="pl-c1">None</span>
                  }

        <span class="pl-s1">results</span> <span class="pl-c1">=</span> <span class="pl-k">yield</span> <span class="pl-s1">c</span>.<span class="pl-en">createRequest</span>(<span class="pl-s">'echo'</span>, <span class="pl-s1">data</span>)

        <span class="pl-k">assert</span> <span class="pl-en">isinstance</span>(<span class="pl-s1">results</span>, <span class="pl-s1">tuple</span>)

        <span class="pl-en">print</span>(<span class="pl-s">'Received results from %d peers'</span> <span class="pl-c1">%</span> <span class="pl-en">len</span>(<span class="pl-s1">results</span>))

        <span class="pl-k">for</span> <span class="pl-s1">i</span>, <span class="pl-s1">result</span> <span class="pl-c1">in</span> <span class="pl-en">enumerate</span>(<span class="pl-s1">results</span>):
            <span class="pl-k">if</span> <span class="pl-s1">result</span> <span class="pl-c1">!=</span> <span class="pl-s1">data</span>:
                <span class="pl-en">print</span>(<span class="pl-s">'Result %d mismatch'</span> <span class="pl-c1">%</span> <span class="pl-s1">i</span>)
                <span class="pl-en">print</span>(<span class="pl-s1">result</span>)

    <span class="pl-k">except</span> <span class="pl-v">Exception</span>:
        <span class="pl-k">import</span> <span class="pl-s1">traceback</span>
        <span class="pl-s1">traceback</span>.<span class="pl-en">print_exc</span>()
    <span class="pl-k">finally</span>:
        <span class="pl-s1">reactor</span>.<span class="pl-en">stop</span>()

<span class="pl-k">if</span> <span class="pl-s1">__name__</span> <span class="pl-c1">==</span> <span class="pl-s">'__main__'</span>:
    <span class="pl-s1">reactor</span>.<span class="pl-en">callWhenRunning</span>(<span class="pl-s1">main</span>)
    <span class="pl-s1">reactor</span>.<span class="pl-en">run</span>()</pre></div>

</article>
  </div>
        </div>
        
        <div id="qs-romixlab-qmsgpack" class="qs"><h4><a href="https://github.com/romixlab/qmsgpack" target="_blank">romixlab/qmsgpack <span class="qs-url">https://github.com/romixlab/qmsgpack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack-for-qt" class="anchor" aria-hidden="true" href="#messagepack-for-qt"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack for Qt</h5>
<p dir="auto">Full documentation is here <a href="http://msgpack.marsworks.ru/" rel="nofollow">mp.marsw.ru</a></p>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<p dir="auto">Clone repository:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="git clone https://github.com/romixlab/qmsgpack.git
cd qmsgpack
mkdir build
cd build
cmake ..
make install"><pre>git clone https://github.com/romixlab/qmsgpack.git
<span class="pl-c1">cd</span> qmsgpack
mkdir build
<span class="pl-c1">cd</span> build
cmake ..
make install</pre></div>
<h6 dir="auto">
<a id="user-content-sample-usage" class="anchor" aria-hidden="true" href="#sample-usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Sample usage</h6>
<p dir="auto">Packing</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="QVariantList list;
list &lt;&lt; 1 &lt;&lt; 2 &lt;&lt; 3;
QByteArray array = MsgPack::pack(list);"><pre>QVariantList list;
list &lt;&lt; <span class="pl-c1">1</span> &lt;&lt; <span class="pl-c1">2</span> &lt;&lt; <span class="pl-c1">3</span>;
QByteArray array = MsgPack::pack(list);</pre></div>
<p dir="auto">Unpacking:</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="QVariantList unpacked = MsgPack::unpack(array).toList();"><pre>QVariantList unpacked = MsgPack::unpack(array).toList();</pre></div>
<p dir="auto">Streaming API:</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='// packing
MsgPackStream stream(&amp;ba, QIODevice::WriteOnly);
stream &lt;&lt; 1 &lt;&lt; 2.3 &lt;&lt; "some string";

// unpacking
MsgPackStream stream(ba);
int a;
double b;
QSting s;
stream &gt;&gt; a &gt;&gt; b &gt;&gt; s;'><pre><span class="pl-c"><span class="pl-c">//</span> packing</span>
MsgPackStream <span class="pl-en">stream</span>(&amp;ba, QIODevice::WriteOnly);
stream &lt;&lt; <span class="pl-c1">1</span> &lt;&lt; <span class="pl-c1">2.3</span> &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>some string<span class="pl-pds">"</span></span>;

<span class="pl-c"><span class="pl-c">//</span> unpacking</span>
MsgPackStream <span class="pl-en">stream</span>(ba);
<span class="pl-k">int</span> a;
<span class="pl-k">double</span> b;
QSting s;
stream &gt;&gt; a &gt;&gt; b &gt;&gt; s;</pre></div>
<h6 dir="auto">
<a id="user-content-qt-types-and-user-types" class="anchor" aria-hidden="true" href="#qt-types-and-user-types"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Qt types and User types</h6>
<p dir="auto">There is packers and unpackers for QColor, QTime, QDate, QDateTime, QPoint, QSize, QRect. Also you can create your own packer/unpacker methods for Qt or your own types. See <a href="http://msgpack.marsworks.ru/" rel="nofollow">docs</a> for details.</p>
</article>
  </div>
        </div>
        
        <div id="qs-eddelbuettel-rcppmsgpack" class="qs"><h4><a href="https://github.com/eddelbuettel/rcppmsgpack" target="_blank">eddelbuettel/rcppmsgpack <span class="qs-url">https://github.com/eddelbuettel/rcppmsgpack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-rcppmsgpack" class="anchor" aria-hidden="true" href="#rcppmsgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>RcppMsgPack</h5>
<p dir="auto">Convert to and from msgpack objects in R using the official msgpack-c API through Rcpp.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://raw.githubusercontent.com/traversc/msgpack2R/master/vignettes/msgpack_flowchart.png"><img src="https://raw.githubusercontent.com/traversc/msgpack2R/master/vignettes/msgpack_flowchart.png" alt="flowchart" title="Conversion flowchart" style="max-width: 100%;"></a>
<em>A flowchart describing the conversion of R objects into msgpack objects and back.</em></p>
<p dir="auto">Msgpack EXT types are converted to raw vectors with EXT attributes containing the extension type.  The extension type must be an integer from 0 to 127.</p>
<p dir="auto">Maps are converted to data.frames with additional class "map".  Map objects in R contain key and value list columns and can be simplified to named lists or named vectors.  The helper function <code>msgpack_map</code> creates map objects that can be serialized into msgpack.</p>
<p dir="auto">For more information on msgpack types, see <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">here</a>.</p>
<h7 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation:</h7>
<ol dir="auto">
<li><code>install.packages("RcppMsgPack")</code></li>
</ol>
<h7 dir="auto">
<a id="user-content-example" class="anchor" aria-hidden="true" href="#example"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example:</h7>
<p dir="auto">See <code>tests/tests.r</code> for more examples.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="library(RcppMsgPack)
library(microbenchmark)

x &lt;- as.list(1:1e6)
microbenchmark(xpk &lt;- msgpack_pack(x), times=3)
microbenchmark(xu &lt;- msgpack_unpack(xpk), times=3)"><pre class="notranslate"><code>library(RcppMsgPack)
library(microbenchmark)

x &lt;- as.list(1:1e6)
microbenchmark(xpk &lt;- msgpack_pack(x), times=3)
microbenchmark(xu &lt;- msgpack_unpack(xpk), times=3)
</code></pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-crowding-msgpack-r" class="qs"><h4><a href="https://github.com/crowding/msgpack-r" target="_blank">crowding/msgpack-r <span class="qs-url">https://github.com/crowding/msgpack-r</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack-for-r" class="anchor" aria-hidden="true" href="#msgpack-for-r"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack for R</h5>
<p dir="auto">Peter Meilstrup</p>
<p dir="auto"><a href="https://cran.r-project.org/package=msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/2097a9fb56b20510c2482192a3f16a111a254482be3f4acc3b2f77ea7a4b8a0f/687474703a2f2f7777772e722d706b672e6f72672f6261646765732f76657273696f6e2f6d73677061636b" alt="CRAN version badge" data-canonical-src="http://www.r-pkg.org/badges/version/msgpack" style="max-width: 100%;"></a>
<a href="https://travis-ci.org/crowding/msgpack-r" rel="nofollow"><img src="https://camo.githubusercontent.com/1629b5d571f07a99d2cdcf93cc8fe3e8effe89f4e7cc9f703b7913e0083f353e/687474703a2f2f7472617669732d63692e6f72672f63726f7764696e672f6d73677061636b2d722e7376673f6272616e63683d6d6173746572" alt="Travis build status" data-canonical-src="http://travis-ci.org/crowding/msgpack-r.svg?branch=master" style="max-width: 100%;"></a>
<a href="https://codecov.io/gh/crowding/msgpack-r" rel="nofollow"><img src="https://camo.githubusercontent.com/2afe044d875fd77e0fc082d6a53395f062f39a23986447999ce4a4007fcc0003/68747470733a2f2f636f6465636f762e696f2f67682f63726f7764696e672f6d73677061636b2d722f6272616e63682f6d61737465722f67726170682f62616467652e737667" alt="Code coverage" data-canonical-src="https://codecov.io/gh/crowding/msgpack-r/branch/master/graph/badge.svg" style="max-width: 100%;"></a></p>
<p dir="auto">This is a high speed <a href="https://msgpack.org" rel="nofollow">msgpack</a> encoder and decoder
for R, based on the <a href="https://github.com/clwi/CWPack">CWPack</a> C
implementation.</p>
<p dir="auto"><code>msgpack</code> is a binary data format with data structures similar to <code>JSON</code>
and a compact binary encoding. It can be a drop-in replacement for
<code>JSON</code> in most applications. It is designed to be fast to parse and
compact to transmit and store.</p>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<p dir="auto">From CRAN:</p>
<div class="highlight highlight-source-r notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='install.packages("msgpack")'><pre>install.packages(<span class="pl-s"><span class="pl-pds">"</span>msgpack<span class="pl-pds">"</span></span>)</pre></div>
<p dir="auto">From Github:</p>
<div class="highlight highlight-source-r notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='library(devtools)
install_github("crowding/msgpack-r")'><pre>library(<span class="pl-smi">devtools</span>)
install_github(<span class="pl-s"><span class="pl-pds">"</span>crowding/msgpack-r<span class="pl-pds">"</span></span>)</pre></div>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<div class="highlight highlight-source-r notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='library(msgpack)
x &lt;- packMsg( list(compact=TRUE, schema=0) )
x
##  [1] 82 a7 63 6f 6d 70 61 63 74 c3 a6 73 63 68 65 6d 61 00
dput(unpackMsg( x ))
## structure(list(compact = TRUE, schema = 0L), .Names = c("compact", 
## "schema"))'><pre>library(<span class="pl-smi">msgpack</span>)
<span class="pl-smi">x</span> <span class="pl-k">&lt;-</span> packMsg( <span class="pl-k">list</span>(<span class="pl-v">compact</span><span class="pl-k">=</span><span class="pl-c1">TRUE</span>, <span class="pl-v">schema</span><span class="pl-k">=</span><span class="pl-c1">0</span>) )
<span class="pl-smi">x</span>
<span class="pl-c"><span class="pl-c">#</span>#  [1] 82 a7 63 6f 6d 70 61 63 74 c3 a6 73 63 68 65 6d 61 00</span>
dput(unpackMsg( <span class="pl-smi">x</span> ))
<span class="pl-c"><span class="pl-c">#</span># structure(list(compact = TRUE, schema = 0L), .Names = c("compact", </span>
<span class="pl-c"><span class="pl-c">#</span># "schema"))</span></pre></div>
<h7 dir="auto">
<a id="user-content-connections--streaming" class="anchor" aria-hidden="true" href="#connections--streaming"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Connections / Streaming</h7>
<p dir="auto">Write messages one or several at a time:</p>
<div class="highlight highlight-source-r notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='conOut &lt;- rawConnection(raw(0), open = "w") # or socketConnection, etc
writeMsg("one", conOut)
writeMsgs(list(2, c(buckle=TRUE), c(owner="my", type="shoe")), conOut)'><pre><span class="pl-smi">conOut</span> <span class="pl-k">&lt;-</span> rawConnection(raw(<span class="pl-c1">0</span>), <span class="pl-v">open</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>w<span class="pl-pds">"</span></span>) <span class="pl-c"><span class="pl-c">#</span> or socketConnection, etc</span>
writeMsg(<span class="pl-s"><span class="pl-pds">"</span>one<span class="pl-pds">"</span></span>, <span class="pl-smi">conOut</span>)
writeMsgs(<span class="pl-k">list</span>(<span class="pl-c1">2</span>, c(<span class="pl-v">buckle</span><span class="pl-k">=</span><span class="pl-c1">TRUE</span>), c(<span class="pl-v">owner</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>my<span class="pl-pds">"</span></span>, <span class="pl-v">type</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>shoe<span class="pl-pds">"</span></span>)), <span class="pl-smi">conOut</span>)</pre></div>
<p dir="auto">Use a <code>msgConnection</code> object to read messages one or several at a
time:</p>
<div class="highlight highlight-source-r notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='conIn &lt;- msgConnection(rawConnection(rawConnectionValue(conOut), open = "r"))
dput(readMsgs(conIn, 2))
## list("one", 2L)
dput(readMsg(conIn))
## structure(TRUE, .Names = "buckle")
dput(readMsgs(conIn))
## list(structure(c("my", "shoe"), .Names = c("owner", "type")))'><pre><span class="pl-smi">conIn</span> <span class="pl-k">&lt;-</span> msgConnection(rawConnection(rawConnectionValue(<span class="pl-smi">conOut</span>), <span class="pl-v">open</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>r<span class="pl-pds">"</span></span>))
dput(readMsgs(<span class="pl-smi">conIn</span>, <span class="pl-c1">2</span>))
<span class="pl-c"><span class="pl-c">#</span># list("one", 2L)</span>
dput(readMsg(<span class="pl-smi">conIn</span>))
<span class="pl-c"><span class="pl-c">#</span># structure(TRUE, .Names = "buckle")</span>
dput(readMsgs(<span class="pl-smi">conIn</span>))
<span class="pl-c"><span class="pl-c">#</span># list(structure(c("my", "shoe"), .Names = c("owner", "type")))</span></pre></div>
<h7 dir="auto">
<a id="user-content-performance" class="anchor" aria-hidden="true" href="#performance"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Performance</h7>
<p dir="auto">Msgpack is fast and compact. See the <a href="/crowding/msgpack-r/blob/master/inst/doc/comparison.html">benchmarking
vignette</a>.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/crowding/msgpack-r/blob/master/gh/space.svg"><img src="/crowding/msgpack-r/raw/master/gh/space.svg" alt="Plot of time taken to transmit dataset, vs size of dataset, for each encoder under four conditions." style="max-width: 100%;"></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/crowding/msgpack-r/blob/master/gh/time.svg"><img src="/crowding/msgpack-r/raw/master/gh/time.svg" alt="Comparison of space used by each encoder to encode a test dataset." style="max-width: 100%;"></a></p>
</article>
  </div>
        </div>
        
        <div id="qs-HiPhish-msgpack-racket" class="qs"><h4><a href="https://gitlab.com/HiPhish/MsgPack.rkt" target="_blank">HiPhish/msgpack-racket <span class="qs-url">https://gitlab.com/HiPhish/MsgPack.rkt</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack-in-racket" class="anchor" aria-hidden="true" href="#messagepack-in-racket"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack in Racket</h5>
<p dir="auto">This is a <a href="http://racket-lang.org/" rel="nofollow">Racket</a> implementation of <a href="http://msgpack.org/" rel="nofollow">MessagePack</a>, a binary data serialisation
format. It allows you to serialise (pack) and de-serialise (unpack) Racket
object to and from binary data.</p>
<a name="user-content-installation"></a>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<p dir="auto">The easiest way to install this library is from the <a href="https://pkgs.racket-lang.org/" rel="nofollow">Racket Package Catalog</a>.
Run the following code from your shell:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="raco pkg install msgpack"><pre>raco pkg install msgpack</pre></div>
<p dir="auto">If you wish to install the package from this repository use the included
makefile:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="make install   # Install the package
make remove    # Uninstall the package"><pre>make install   <span class="pl-c"><span class="pl-c">#</span> Install the package</span>
make remove    <span class="pl-c"><span class="pl-c">#</span> Uninstall the package</span></pre></div>
<a name="user-content-using-messagepack"></a>
<h6 dir="auto">
<a id="user-content-using-messagepack" class="anchor" aria-hidden="true" href="#using-messagepack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Using MessagePack</h6>
<div class="highlight highlight-source-racket notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content=";;; Import the library first
(require msgpack)

;;; Some object to pack
(define hodgepodge (vector 1 2 (void) '#(3 #t) &quot;foo&quot;))

;;; Packing data
(define packed (call-with-output-bytes ( (out) (pack hodgepodge out))))
;;; &gt; #&quot;\225\1\2\300\222\3\303\243foo&quot;

;;; Unpacking data
(define unpacked (call-with-input-bytes packed ( (in) (unpack in))))
;;; &gt; '#(1 2 #&lt;void&gt; #(3 #t) &quot;foo&quot;)"><pre><span class="pl-c">;;; Import the library first</span>
(<span class="pl-en">require</span> msgpack)

<span class="pl-c">;;; Some object to pack</span>
(<span class="pl-en">define</span> hodgepodge (vector <span class="pl-c1">1</span> <span class="pl-c1">2</span> (void) '#(<span class="pl-c1">3</span> <span class="pl-c1">#t</span>) <span class="pl-c1">"<span class="pl-c1">foo</span>"</span>))

<span class="pl-c">;;; Packing data</span>
(<span class="pl-en">define</span> packed (call-with-output-bytes (<span class="pl-en"></span> (out) (pack hodgepodge out))))
<span class="pl-c">;;; &gt; #"\225\1\2\300\222\3\303\243foo"</span>

<span class="pl-c">;;; Unpacking data</span>
(<span class="pl-en">define</span> unpacked (call-with-input-bytes packed (<span class="pl-en"></span> (in) (unpack in))))
<span class="pl-c">;;; &gt; '#(1 2 #&lt;void&gt; #(3 #t) "foo")</span></pre></div>
<p dir="auto">The <code>pack</code> function takes a Racket object and a binary output port as arguments
and writes the serialised data to the port.  The <code>unpack</code> function takes a
binary input port and returns one de-serialised object, consuming the necessary
amount of bytes from the port in the process. For more details please refer to
the <a href="https://docs.racket-lang.org/msgpack/index.html" rel="nofollow">documentation</a>.</p>
<p dir="auto">In the above example code we set the output and input ports to be byte strings
so we could work with the packed and unpacked data directly inside the Racket
instance.</p>
<a name="user-content-status"></a>
<h6 dir="auto">
<a id="user-content-status" class="anchor" aria-hidden="true" href="#status"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Status</h6>
<p dir="auto">The library is fully functional, covered by test cases, and the API should be
reasonably mature, but I am not yet willing to completely rule out changes. See
also below for parts of the library that could not be tested at the moment due
to technical reasons.</p>
<a name="user-content-caveats"></a>
<h6 dir="auto">
<a id="user-content-caveats" class="anchor" aria-hidden="true" href="#caveats"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Caveats</h6>
<p dir="auto">The following cases cannot be tested for the time being:</p>
<ul dir="auto">
<li>The <code>bin32</code> type, storing a byte string that is <tt>2^32</tt> bytes long
requires 4GiB, my machine simply runs out of memory.</li>
<li>The same goes for the <code>str32</code> type</li>
<li>The same goes for the <code>array32</code> type</li>
<li>The same goes for the <code>map32</code> type</li>
<li>The same goes for the <code>ext32</code> type</li>
<li>Strings are only tested using ASCII characters, if anyone can generate
UTF-8 strings with a given length in <em>bytes</em> please help out.</li>
</ul>
<a name="user-content-license"></a>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<p dir="auto">Released under the GPLv3+ license, see the <a href="/HiPhish/msgpack-racket/blob/master/COPYING.txt">COPYING</a> file for details.</p>

</article>
  </div>
        </div>
        
        <div id="qs-owenthereal-msgpack_rails" class="qs"><h4><a href="https://github.com/jingweno/msgpack_rails" target="_blank">owenthereal/msgpack_rails <span class="qs-url">https://github.com/jingweno/msgpack_rails</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack-for-rails-" class="anchor" aria-hidden="true" href="#messagepack-for-rails-"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack for Rails <a href="https://travis-ci.org/jingweno/msgpack_rails" rel="nofollow"><img src="https://camo.githubusercontent.com/8716975943a07867cda5e726d120eb8875aa96a17071f25276cba7148c6cf9eb/68747470733a2f2f7472617669732d63692e6f72672f6a696e6777656e6f2f6d73677061636b5f7261696c732e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/jingweno/msgpack_rails.png?branch=master" style="max-width: 100%;"></a>
</h5>
<p dir="auto">The Rails way to serialize/deserialize objects with <a href="http://msgpack.org" rel="nofollow">Message Pack</a>.
It implements the <a href="http://rubygems.org/gems/activesupport" rel="nofollow">ActiveSupport</a> <a href="https://github.com/jingweno/msgpack_rails/blob/master/lib/msgpack_rails/activesupport/message_pack/encoding.rb">encoder</a> &amp; <a href="https://github.com/jingweno/msgpack_rails/blob/master/lib/msgpack_rails/activesupport/message_pack/decoding.rb">decoder</a> and the <a href="http://rubygems.org/gems/activemodel" rel="nofollow">ActiveModel</a> <a href="https://github.com/jingweno/msgpack_rails/blob/master/lib/msgpack_rails/activemodel/serializers/message_pack.rb">serializer</a> for Message Pack.</p>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<p dir="auto">Add this line to your application's Gemfile:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="gem 'msgpack_rails'"><pre class="notranslate"><code>gem 'msgpack_rails'
</code></pre></div>
<p dir="auto">And then execute:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ bundle"><pre class="notranslate"><code>$ bundle
</code></pre></div>
<p dir="auto">Or install it yourself as:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ gem install msgpack_rails"><pre class="notranslate"><code>$ gem install msgpack_rails
</code></pre></div>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<p dir="auto"><code>msgpack_rails</code> converts data type using <code>as_json</code> before feeding it into <a href="http://rubygems.org/gems/msgpack" rel="nofollow">msgpack</a>.
Here are a few examples:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='$ ActiveSupport::MessagePack.encode(:a =&gt; :b)
=&gt; "\x81\xA1a\xA1b"

$ ActiveSupport::MessagePack.encode(Time.now)
=&gt; "\xB92013-09-11T10:40:39-07:00"

$ Time.now.as_msgpack
=&gt; "2013-09-11T10:48:13-07:00"

$ Time.now.to_msgpack
=&gt; "\xB92013-09-11T10:40:39-07:00"

$ ActiveSupport::MessagePack.decode Time.now.to_msgpack
=&gt; "2013-09-11T11:23:07-07:00"

# After setting ActiveSupport.parse_msgpack_times to true
$ ActiveSupport::MessagePack.decode Time.now.to_msgpack
=&gt; Wed, 11 Sep 2013 11:25:18 -0700'><pre class="notranslate"><code>$ ActiveSupport::MessagePack.encode(:a =&gt; :b)
=&gt; "\x81\xA1a\xA1b"

$ ActiveSupport::MessagePack.encode(Time.now)
=&gt; "\xB92013-09-11T10:40:39-07:00"

$ Time.now.as_msgpack
=&gt; "2013-09-11T10:48:13-07:00"

$ Time.now.to_msgpack
=&gt; "\xB92013-09-11T10:40:39-07:00"

$ ActiveSupport::MessagePack.decode Time.now.to_msgpack
=&gt; "2013-09-11T11:23:07-07:00"

# After setting ActiveSupport.parse_msgpack_times to true
$ ActiveSupport::MessagePack.decode Time.now.to_msgpack
=&gt; Wed, 11 Sep 2013 11:25:18 -0700
</code></pre></div>
<p dir="auto">You can also use it as part of <code>ActiveModel</code>, similar to <code>to_json</code>:</p>
<div class="highlight highlight-source-ruby notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="class Contact
  include ActiveModel::Serializers::MessagePack

  ...
end

@contact = Contact.new
@contact.name = 'Owen Ou'
@contact.age = 28
@contact.created_at = Time.utc(2006, 8, 1)
@contact.awesome = true
@contact.preferences = { 'shows' =&gt; 'anime' }

@contact.to_msgpack                # =&gt; msgpack output
@contact.to_msgpack(:root =&gt; true) # =&gt; include root in msgpack output"><pre><span class="pl-k">class</span> <span class="pl-v">Contact</span>
  <span class="pl-en">include</span> <span class="pl-v">ActiveModel</span>::<span class="pl-v">Serializers</span>::<span class="pl-v">MessagePack</span>

  ...
<span class="pl-k">end</span>

<span class="pl-c1">@contact</span> <span class="pl-c1">=</span> <span class="pl-v">Contact</span><span class="pl-kos">.</span><span class="pl-en">new</span>
<span class="pl-c1">@contact</span><span class="pl-kos">.</span><span class="pl-en">name</span> <span class="pl-c1">=</span> <span class="pl-s">'Owen Ou'</span>
<span class="pl-c1">@contact</span><span class="pl-kos">.</span><span class="pl-en">age</span> <span class="pl-c1">=</span> <span class="pl-c1">28</span>
<span class="pl-c1">@contact</span><span class="pl-kos">.</span><span class="pl-en">created_at</span> <span class="pl-c1">=</span> <span class="pl-v">Time</span><span class="pl-kos">.</span><span class="pl-en">utc</span><span class="pl-kos">(</span><span class="pl-c1">2006</span><span class="pl-kos">,</span> <span class="pl-c1">8</span><span class="pl-kos">,</span> <span class="pl-c1">1</span><span class="pl-kos">)</span>
<span class="pl-c1">@contact</span><span class="pl-kos">.</span><span class="pl-en">awesome</span> <span class="pl-c1">=</span> <span class="pl-c1">true</span>
<span class="pl-c1">@contact</span><span class="pl-kos">.</span><span class="pl-en">preferences</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span> <span class="pl-s">'shows'</span> <span class="pl-c1">=&gt;</span> <span class="pl-s">'anime'</span> <span class="pl-kos">}</span>

<span class="pl-c1">@contact</span><span class="pl-kos">.</span><span class="pl-en">to_msgpack</span>                <span class="pl-c"># =&gt; msgpack output</span>
<span class="pl-c1">@contact</span><span class="pl-kos">.</span><span class="pl-en">to_msgpack</span><span class="pl-kos">(</span><span class="pl-pds">:root</span> <span class="pl-c1">=&gt;</span> <span class="pl-c1">true</span><span class="pl-kos">)</span> <span class="pl-c"># =&gt; include root in msgpack output</span></pre></div>
<h6 dir="auto">
<a id="user-content-contributing" class="anchor" aria-hidden="true" href="#contributing"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Contributing</h6>
<ol dir="auto">
<li>Fork it</li>
<li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li>
<li>Commit your changes (<code>git commit -am 'Add some feature'</code>)</li>
<li>Push to the branch (<code>git push origin my-new-feature</code>)</li>
<li>Create new Pull Request</li>
</ol>
</article>
  </div>
        </div>
        
        <div id="qs-komamitsu-retrofit-converter-msgpack" class="qs"><h4><a href="https://github.com/komamitsu/retrofit-converter-msgpack" target="_blank">komamitsu/retrofit-converter-msgpack <span class="qs-url">https://github.com/komamitsu/retrofit-converter-msgpack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-retrofit-converter-messagepack" class="anchor" aria-hidden="true" href="#retrofit-converter-messagepack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Retrofit-Converter-MessagePack</h5>
<p dir="auto"><a href="https://travis-ci.org/komamitsu/retrofit-converter-msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/269cc564f92abceef0fe3d67370202ff10268794e67da6c916d7b98470ab74bc/68747470733a2f2f7472617669732d63692e6f72672f6b6f6d616d697473752f726574726f6669742d636f6e7665727465722d6d73677061636b2e7376673f6272616e63683d6d6173746572" data-canonical-src="https://travis-ci.org/komamitsu/retrofit-converter-msgpack.svg?branch=master" style="max-width: 100%;"></a>
<a href="https://maven-badges.herokuapp.com/maven-central/org.komamitsu/retrofit-converter-msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/5a389969a3fac0010d99818ab4dc6a041e40845fc6ba39a2e236a3a576effa09/68747470733a2f2f6d6176656e2d6261646765732e6865726f6b756170702e636f6d2f6d6176656e2d63656e7472616c2f6f72672e6b6f6d616d697473752f726574726f6669742d636f6e7665727465722d6d73677061636b2f62616467652e737667" alt="Maven Central" data-canonical-src="https://maven-badges.herokuapp.com/maven-central/org.komamitsu/retrofit-converter-msgpack/badge.svg" style="max-width: 100%;"></a>
<a href="https://coveralls.io/github/komamitsu/retrofit-converter-msgpack?branch=master" rel="nofollow"><img src="https://camo.githubusercontent.com/05c9c701a4f3d23f7856795614a3ddb4468879714d8f8f59fe7bf023bfc43ed0/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6b6f6d616d697473752f726574726f6669742d636f6e7665727465722d6d73677061636b2f62616467652e7376673f6272616e63683d6d617374657226736572766963653d676974687562" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/komamitsu/retrofit-converter-msgpack/badge.svg?branch=master&amp;service=github" style="max-width: 100%;"></a></p>
<p dir="auto">Retrofit Converter for MessagePack</p>
<h6 dir="auto">
<a id="user-content-install" class="anchor" aria-hidden="true" href="#install"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install</h6>
<h7 dir="auto">
<a id="user-content-gradle" class="anchor" aria-hidden="true" href="#gradle"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Gradle</h7>
<div class="highlight highlight-source-groovy notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="dependencies {
    implementation 'org.komamitsu:retrofit-converter-msgpack:x.x.x'
}"><pre>dependencies {
    implementation <span class="pl-s"><span class="pl-pds">'</span>org.komamitsu:retrofit-converter-msgpack:x.x.x<span class="pl-pds">'</span></span>
}</pre></div>
<h7 dir="auto">
<a id="user-content-maven" class="anchor" aria-hidden="true" href="#maven"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Maven</h7>
<div class="highlight highlight-text-xml notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&lt;dependency&gt;
    &lt;groupId&gt;org.komamitsu&lt;/groupId&gt;
    &lt;artifactId&gt;retrofit-converter-msgpack&lt;/artifactId&gt;
    &lt;version&gt;x.x.x&lt;/version&gt;
&lt;/dependency&gt;"><pre>&lt;<span class="pl-ent">dependency</span>&gt;
    &lt;<span class="pl-ent">groupId</span>&gt;org.komamitsu&lt;/<span class="pl-ent">groupId</span>&gt;
    &lt;<span class="pl-ent">artifactId</span>&gt;retrofit-converter-msgpack&lt;/<span class="pl-ent">artifactId</span>&gt;
    &lt;<span class="pl-ent">version</span>&gt;x.x.x&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre></div>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<p dir="auto">To use, supply an instance of this converter when building your Retrofit instance.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='Retrofit retrofit = new Retrofit.Builder()
    .baseUrl("https://api.example.com")
    .addConverterFactory(MessagePackConverterFactory.create())
    .build();'><pre class="notranslate"><code>Retrofit retrofit = new Retrofit.Builder()
    .baseUrl("https://api.example.com")
    .addConverterFactory(MessagePackConverterFactory.create())
    .build();
</code></pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-ruby" class="qs"><h4><a href="https://github.com/msgpack/msgpack-ruby" target="_blank">msgpack/msgpack-ruby <span class="qs-url">https://github.com/msgpack/msgpack-ruby</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack-for-ruby" class="anchor" aria-hidden="true" href="#messagepack-for-ruby"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack for Ruby</h5>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="require 'msgpack'
msg = [1,2,3].to_msgpack  #=&gt; &quot;\x93\x01\x02\x03&quot;
MessagePack.unpack(msg)   #=&gt; [1,2,3]"><pre class="notranslate"><code>require 'msgpack'
msg = [1,2,3].to_msgpack  #=&gt; "\x93\x01\x02\x03"
MessagePack.unpack(msg)   #=&gt; [1,2,3]
</code></pre></div>
<h6 dir="auto">
<a id="user-content-install" class="anchor" aria-hidden="true" href="#install"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install</h6>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="gem install msgpack"><pre class="notranslate"><code>gem install msgpack
</code></pre></div>
<h6 dir="auto">
<a id="user-content-use-cases" class="anchor" aria-hidden="true" href="#use-cases"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Use cases</h6>
<ul dir="auto">
<li>Create REST API returing MessagePack using Rails + <a href="https://github.com/nesquena/rabl">RABL</a>
</li>
<li>Store objects efficiently in memcached or Redis</li>
<li>Upload data in efficient format from mobile devices. See also MessagePack for <a href="https://github.com/msgpack/msgpack-objectivec">Objective-C</a> and <a href="https://github.com/msgpack/msgpack-java">Java</a>
</li>
</ul>
<h6 dir="auto">
<a id="user-content-links" class="anchor" aria-hidden="true" href="#links"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Links</h6>
<ul dir="auto">
<li><a href="https://github.com/msgpack/msgpack-ruby">Github</a></li>
<li><a href="http://ruby.msgpack.org/" rel="nofollow">API document</a></li>
</ul>
<h6 dir="auto">
<a id="user-content-streaming-api" class="anchor" aria-hidden="true" href="#streaming-api"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Streaming API</h6>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="# serialize a 2-element array [e1, e2]
pk = MessagePack::Packer.new(io)
pk.write_array_header(2).write(e1).write(e2).flush"><pre class="notranslate"><code># serialize a 2-element array [e1, e2]
pk = MessagePack::Packer.new(io)
pk.write_array_header(2).write(e1).write(e2).flush
</code></pre></div>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="# deserialize objects from an IO
u = MessagePack::Unpacker.new(io)
u.each { |obj| ... }"><pre class="notranslate"><code># deserialize objects from an IO
u = MessagePack::Unpacker.new(io)
u.each { |obj| ... }
</code></pre></div>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="# event-driven deserialization
def on_read(data)
  @u ||= MessagePack::Unpacker.new
  @u.feed_each(data) { |obj| ... }
end"><pre class="notranslate"><code># event-driven deserialization
def on_read(data)
  @u ||= MessagePack::Unpacker.new
  @u.feed_each(data) { |obj| ... }
end
</code></pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-mneumann-MessagePack" class="qs"><h4><a href="https://github.com/mneumann/MessagePack" target="_blank">mneumann/MessagePack <span class="qs-url">https://github.com/mneumann/MessagePack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack" class="anchor" aria-hidden="true" href="#messagepack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack</h5>
<p dir="auto">An alternative msgpack.org implementation for Ruby and C++</p>
</article>
  </div>
        </div>
        
        <div id="qs-3Hren-msgpack-rust" class="qs"><h4><a href="https://github.com/3Hren/msgpack-rust" target="_blank">3Hren/msgpack-rust <span class="qs-url">https://github.com/3Hren/msgpack-rust</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-rmp---rust-messagepack" class="anchor" aria-hidden="true" href="#rmp---rust-messagepack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>RMP - Rust MessagePack</h5>
<p dir="auto">RMP is a pure Rust <a href="http://msgpack.org" rel="nofollow">MessagePack</a> implementation.</p>
<p dir="auto"><a href="https://travis-ci.org/3Hren/msgpack-rust" rel="nofollow"><img src="https://camo.githubusercontent.com/2ffa8cc83a0ba3e8207205532b46b7cc373b499c8bc938251f07f8fd15ed60c2/68747470733a2f2f7472617669732d63692e6f72672f334872656e2f6d73677061636b2d727573742e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/3Hren/msgpack-rust.svg?branch=master" style="max-width: 100%;"></a>
<a href="https://coveralls.io/github/3Hren/msgpack-rust?branch=master" rel="nofollow"><img src="https://camo.githubusercontent.com/c262a2972542fc723c76e2095cfd330f2f743e2f6c3ef626cc797f3377fcf6f4/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f334872656e2f6d73677061636b2d727573742f62616467652e7376673f6272616e63683d6d617374657226736572766963653d676974687562" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/3Hren/msgpack-rust/badge.svg?branch=master&amp;service=github" style="max-width: 100%;"></a></p>
<p dir="auto">This repository consists of three separate crates: the RMP core and two implementations to ease serializing and
deserializing Rust structs.</p>
<table>
<thead>
<tr>
<th>crates.rs</th>
<th>API Documentation</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://lib.rs/crates/rmp" rel="nofollow"><img src="https://camo.githubusercontent.com/ae8375ab831116987f0e186314323e29caf0ce9a9e32615c91648388e347b737/68747470733a2f2f696d672e736869656c64732e696f2f6372617465732f762f726d702e737667" alt="rmp" data-canonical-src="https://img.shields.io/crates/v/rmp.svg" style="max-width: 100%;"></a></td>
<td><a href="https://docs.rs/rmp" rel="nofollow">RMP</a></td>
</tr>
<tr>
<td><a href="https://lib.rs/crates/rmp-serde" rel="nofollow"><img src="https://camo.githubusercontent.com/5b20951fc120d519e5e426c743075dc570a1fb96d58354ad9c41ddb81edc391f/68747470733a2f2f696d672e736869656c64732e696f2f6372617465732f762f726d702d73657264652e737667" alt="rmps" data-canonical-src="https://img.shields.io/crates/v/rmp-serde.svg" style="max-width: 100%;"></a></td>
<td><a href="https://docs.rs/rmp-serde" rel="nofollow">RMP Serde</a></td>
</tr>
<tr>
<td><a href="https://lib.rs/crates/rmpv" rel="nofollow"><img src="https://camo.githubusercontent.com/f40661e8dcde7d8dcd10ceb682aad5bc67f394e88d75762c56d376cb274521f3/68747470733a2f2f696d672e736869656c64732e696f2f6372617465732f762f726d70762e737667" alt="rmpv" data-canonical-src="https://img.shields.io/crates/v/rmpv.svg" style="max-width: 100%;"></a></td>
<td><a href="https://docs.rs/rmpv" rel="nofollow">RMP Value</a></td>
</tr>
</tbody>
</table>
<h6 dir="auto">
<a id="user-content-features" class="anchor" aria-hidden="true" href="#features"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Features</h6>
<ul dir="auto">
<li>
<p dir="auto"><strong>Convenient API</strong></p>
<p dir="auto">RMP is designed to be lightweight and straightforward. There are low-level API, which gives you
full control on data encoding/decoding process and makes no heap allocations. On the other hand
there are high-level API, which provides you convenient interface using Rust standard library and
compiler reflection, allowing to encode/decode structures using <code>derive</code> attribute.</p>
</li>
<li>
<p dir="auto"><strong>Zero-copy value decoding</strong></p>
<p dir="auto">RMP allows to decode bytes from a buffer in a zero-copy manner easily and blazingly fast, while Rust
static checks guarantees that the data will be valid as long as the buffer lives.</p>
</li>
<li>
<p dir="auto"><strong>Clear error handling</strong></p>
<p dir="auto">RMP's error system guarantees that you never receive an error enum with unreachable variant.</p>
</li>
<li>
<p dir="auto"><strong>Robust and tested</strong></p>
<p dir="auto">This project is developed using TDD and CI, so any found bugs will be fixed without breaking
existing functionality.</p>
</li>
</ul>
<h6 dir="auto">
<a id="user-content-requirements" class="anchor" aria-hidden="true" href="#requirements"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Requirements</h6>
<ul dir="auto">
<li>Rust 1.53.0 or later</li>
</ul>
</article>
  </div>
        </div>
        
        <div id="qs-dankogai-swift-sion" class="qs"><h4><a href="https://github.com/dankogai/swift-sion" target="_blank">dankogai/swift-sion <span class="qs-url">https://github.com/dankogai/swift-sion</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-sion-supports-messagepack-natively" class="anchor" aria-hidden="true" href="#sion-supports-messagepack-natively"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>SION supports MessagePack natively</h5>
<h6 dir="auto">
<a id="user-content-synopsis" class="anchor" aria-hidden="true" href="#synopsis"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Synopsis</h6>
<div class="highlight highlight-source-swift notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import SION
import Foundation
let data    = Data([    // ["compact":true,"schema":0]
    0x82,0xa7,0x63,0x6f,0x6d,0x70,0x61,0x63,
    0x74,0xc3,0xa6,0x73,0x63,0x68,0x65,0x6d,
    0x61,0x00
])
let sion    = SION(msgPack: data)  // deselialize
let msgPack = sion.msgPack         // serialize
data == msgPack                    // true'><pre><span class="pl-k">import</span> <span class="pl-en">SION</span>
<span class="pl-k">import</span> <span class="pl-en">Foundation</span>
<span class="pl-k">let</span> data    <span class="pl-k">=</span> <span class="pl-c1">Data</span>([    <span class="pl-c"><span class="pl-c">//</span> ["compact":true,"schema":0]</span>
<span class="pl-c"></span>    <span class="pl-c1">0x82</span>,<span class="pl-c1">0xa7</span>,<span class="pl-c1">0x63</span>,<span class="pl-c1">0x6f</span>,<span class="pl-c1">0x6d</span>,<span class="pl-c1">0x70</span>,<span class="pl-c1">0x61</span>,<span class="pl-c1">0x63</span>,
    <span class="pl-c1">0x74</span>,<span class="pl-c1">0xc3</span>,<span class="pl-c1">0xa6</span>,<span class="pl-c1">0x73</span>,<span class="pl-c1">0x63</span>,<span class="pl-c1">0x68</span>,<span class="pl-c1">0x65</span>,<span class="pl-c1">0x6d</span>,
    <span class="pl-c1">0x61</span>,<span class="pl-c1">0x00</span>
])
<span class="pl-k">let</span> sion    <span class="pl-k">=</span> <span class="pl-c1">SION</span>(<span class="pl-c1">msgPack</span>: data)  <span class="pl-c"><span class="pl-c">//</span> deselialize</span>
<span class="pl-c"></span><span class="pl-k">let</span> msgPack <span class="pl-k">=</span> sion.<span class="pl-smi">msgPack</span>         <span class="pl-c"><span class="pl-c">//</span> serialize</span>
<span class="pl-c"></span>data <span class="pl-k">==</span> msgPack                    <span class="pl-c"><span class="pl-c">//</span> true</span></pre></div>
<p dir="auto">for details of the module, visit:</p>
<ul dir="auto">
<li><a href="https://github.com/dankogai/swift-sion">https://github.com/dankogai/swift-sion</a></li>
</ul>
<p dir="auto">for details of the SION serialization format, visit:</p>
<ul dir="auto">
<li><a href="https://dankogai.github.io/SION" rel="nofollow">https://dankogai.github.io/SION</a></li>
</ul>
</article>
  </div>
        </div>
        
        <div id="qs-tkob-mlmsgpack" class="qs"><h4><a href="https://github.com/tkob/mlmsgpack" target="_blank">tkob/mlmsgpack <span class="qs-url">https://github.com/tkob/mlmsgpack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-ml-messagepack" class="anchor" aria-hidden="true" href="#ml-messagepack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>ML-MessagePack</h5>
<p dir="auto">MessagePack implementation for Standard ML (SML)</p>
<h6 dir="auto">
<a id="user-content-features" class="anchor" aria-hidden="true" href="#features"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Features</h6>
<ul dir="auto">
<li>Portable: Depends only on the required components of the SML Basis Library specification.</li>
<li>Composable: Composable combinators for encoding and decoding.</li>
</ul>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<h8 dir="auto">
<a id="user-content-mlton-and-mlkit" class="anchor" aria-hidden="true" href="#mlton-and-mlkit"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MLton and MLKit</h8>
<p dir="auto">Include mlmsgpack.mlb in your MLB file.</p>
<h8 dir="auto">
<a id="user-content-polyml" class="anchor" aria-hidden="true" href="#polyml"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Poly/ML</h8>
<p dir="auto">From the interactive shell, use .sml files in the following order.</p>
<ul dir="auto">
<li>mlmsgpack-aux.sml</li>
<li>realprinter-default.sml</li>
<li>mlmsgpack.sml</li>
</ul>
<h8 dir="auto">
<a id="user-content-smlnj" class="anchor" aria-hidden="true" href="#smlnj"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>SML/NJ</h8>
<p dir="auto">Use mlmsgpack.cm.</p>
<h8 dir="auto">
<a id="user-content-moscow-ml" class="anchor" aria-hidden="true" href="#moscow-ml"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Moscow ML</h8>
<p dir="auto">From the interactive shell, use .sml files in the following order.</p>
<ul dir="auto">
<li>large.sml</li>
<li>mlmsgpack-aux.sml</li>
<li>realprinter-fail.sml</li>
<li>mlmsgpack.sml</li>
</ul>
<p dir="auto">Makefile.mosml is also provided.</p>
<h8 dir="auto">
<a id="user-content-hamlet" class="anchor" aria-hidden="true" href="#hamlet"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>HaMLet</h8>
<p dir="auto">From the interactive shell, use .sml files in the following order.</p>
<ul dir="auto">
<li>mlmsgpack-aux.sml</li>
<li>realprinter-fail.sml</li>
<li>mlmsgpack.sml</li>
</ul>
<h8 dir="auto">
<a id="user-content-alice-ml" class="anchor" aria-hidden="true" href="#alice-ml"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Alice ML</h8>
<p dir="auto">Makefile.alice is provided.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="make -f Makefile.alice
alicerun mlmsgpack-test"><pre class="notranslate"><code>make -f Makefile.alice
alicerun mlmsgpack-test
</code></pre></div>
<h8 dir="auto">
<a id="user-content-sml" class="anchor" aria-hidden="true" href="#sml"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>SML#</h8>
<p dir="auto">For separate compilation, .smi files are provided. Require mlmsgpack.smi from your .smi file.</p>
<p dir="auto">From the interactive shell, use .sml files in the following order.</p>
<ul dir="auto">
<li>mlmsgpack-aux.sml</li>
<li>realprinter-default.sml</li>
<li>mlmsgpack.sml</li>
</ul>
<h6 dir="auto">
<a id="user-content-tutorial" class="anchor" aria-hidden="true" href="#tutorial"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Tutorial</h6>
<p dir="auto">See TUTORIAL.md.</p>
<h6 dir="auto">
<a id="user-content-known-problems" class="anchor" aria-hidden="true" href="#known-problems"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Known Problems</h6>
<p dir="auto">Our recommendation is MLton, MLKit, Poly/ML and SML#(&gt;=2.0.0) as all tests passed on them.
SML/NJ and Moscow ML are fine if you don't use real values.</p>
<h8 dir="auto">
<a id="user-content-smlnj-1" class="anchor" aria-hidden="true" href="#smlnj-1"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>SML/NJ</h8>
<p dir="auto">Packing real values fail or produces imprecise results in some cases.</p>
<h8 dir="auto">
<a id="user-content-moscow-ml-1" class="anchor" aria-hidden="true" href="#moscow-ml-1"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Moscow ML</h8>
<p dir="auto">Packing real values is not supported, since some components of the SML Basis Library are not provided.</p>
<h8 dir="auto">
<a id="user-content-hamlet-1" class="anchor" aria-hidden="true" href="#hamlet-1"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>HaMLet</h8>
<p dir="auto">Packing real values is not supported, since some components of the SML Basis Library are not provided.
Some functions are very slow, although they work properly. (We tested HaMLet compiled with MLton.)</p>
<h8 dir="auto">
<a id="user-content-alice-ml-1" class="anchor" aria-hidden="true" href="#alice-ml-1"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Alice ML</h8>
<p dir="auto">Packing real values is not supported, since some components of the SML Basis Library are not provided.
Also, some unit tests fail.</p>
<h8 dir="auto">
<a id="user-content-sml-1" class="anchor" aria-hidden="true" href="#sml-1"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>SML#</h8>
<p dir="auto">Most functions do not work properly because of bugs of SML# prior to version 2.0.0.</p>
<h6 dir="auto">
<a id="user-content-see-also" class="anchor" aria-hidden="true" href="#see-also"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>See Also</h6>
<p dir="auto">There already exists another MessagePack implemenatation for SML,
called MsgPack-SML, which is targeted for MLton.</p>
<p dir="auto"><a href="https://msgpacksml.codeplex.com/" rel="nofollow">https://msgpacksml.codeplex.com/</a></p>
<p dir="auto">ML-MessagePack is written from scratch and not a fork of MsgPack-SML.</p>
<p dir="auto">For information on MessagePack, see:</p>
<p dir="auto"><a href="http://msgpack.org/" rel="nofollow">http://msgpack.org/</a></p>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-scala" class="qs"><h4><a href="https://github.com/msgpack/msgpack-scala" target="_blank">msgpack/msgpack-scala <span class="qs-url">https://github.com/msgpack/msgpack-scala</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack-for-scala" class="anchor" aria-hidden="true" href="#messagepack-for-scala"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack for Scala</h5>
<p dir="auto"><a href="https://travis-ci.org/msgpack/msgpack-scala" rel="nofollow"><img src="https://camo.githubusercontent.com/20a542686670e299bdd46c8640626e29c72c06332d8cc6abb3e43d9ad3e7f982/68747470733a2f2f7472617669732d63692e6f72672f6d73677061636b2f6d73677061636b2d7363616c612e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/msgpack/msgpack-scala.svg?branch=master" style="max-width: 100%;"></a></p>
<ul dir="auto">
<li>Message Pack specification: <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">https://github.com/msgpack/msgpack/blob/master/spec.md</a>
</li>
</ul>
<h6 dir="auto">
<a id="user-content-quick-start" class="anchor" aria-hidden="true" href="#quick-start"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Quick Start</h6>
<p dir="auto"><a href="https://maven-badges.herokuapp.com/maven-central/org.msgpack/msgpack-scala_2.12/" rel="nofollow"><img src="https://camo.githubusercontent.com/792dddff6dac94afaa9025c6fbf51e61c7ed4b1fb7bde1f7461b21bdcc6e2803/68747470733a2f2f6d6176656e2d6261646765732e6865726f6b756170702e636f6d2f6d6176656e2d63656e7472616c2f6f72672e6d73677061636b2f6d73677061636b2d7363616c615f322e31322f62616467652e737667" alt="Maven Central" data-canonical-src="https://maven-badges.herokuapp.com/maven-central/org.msgpack/msgpack-scala_2.12/badge.svg" style="max-width: 100%;"></a></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='libraryDependencies += "org.msgpack" %% "msgpack-scala" % "(version)"'><pre class="notranslate"><code>libraryDependencies += "org.msgpack" %% "msgpack-scala" % "(version)"
</code></pre></div>
<p dir="auto">General usage is the same with msgpack-java. See this <a href="https://github.com/msgpack/msgpack-java/blob/develop/msgpack-core/src/test/java/org/msgpack/core/example/MessagePackExample.java">example code (Java)</a>.</p>
<h6 dir="auto">
<a id="user-content-for-messagepack-developers" class="anchor" aria-hidden="true" href="#for-messagepack-developers"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>For MessagePack Developers</h6>
<h7 dir="auto">
<a id="user-content-basic-sbt-commands" class="anchor" aria-hidden="true" href="#basic-sbt-commands"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Basic sbt commands</h7>
<p dir="auto">Enter the sbt console:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ ./sbt"><pre class="notranslate"><code>$ ./sbt
</code></pre></div>
<p dir="auto">Here is a list of sbt commands for daily development:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='&gt; ~compile                                 # Compile source codes
&gt; ~test:compile                            # Compile both source and test codes
&gt; ~test                                    # Run tests upon source code change
&gt; ~test-only *MessagePackTest              # Run tests in the specified class
&gt; ~test-only *MessagePackTest -- -n prim   # Run the test tagged as "prim"
&gt; project msgpack-scala                    # Focus on a specific project
&gt; package                                  # Create a jar file in the target folder of each project
&gt; scalafmt                                 # Reformat source codes
&gt; ; coverage; test; coverageReport; coverageAggregate;  # Code coverage'><pre class="notranslate"><code>&gt; ~compile                                 # Compile source codes
&gt; ~test:compile                            # Compile both source and test codes
&gt; ~test                                    # Run tests upon source code change
&gt; ~test-only *MessagePackTest              # Run tests in the specified class
&gt; ~test-only *MessagePackTest -- -n prim   # Run the test tagged as "prim"
&gt; project msgpack-scala                    # Focus on a specific project
&gt; package                                  # Create a jar file in the target folder of each project
&gt; scalafmt                                 # Reformat source codes
&gt; ; coverage; test; coverageReport; coverageAggregate;  # Code coverage
</code></pre></div>
<h7 dir="auto">
<a id="user-content-publishing" class="anchor" aria-hidden="true" href="#publishing"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Publishing</h7>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&gt; publishLocal            # Install to local .ivy2 repository
&gt; publish                 # Publishing a snapshot version to the Sonatype repository

&gt; release                 # Run the release procedure (set a new version, run tests, upload artifacts, then deploy to Sonatype)"><pre class="notranslate"><code>&gt; publishLocal            # Install to local .ivy2 repository
&gt; publish                 # Publishing a snapshot version to the Sonatype repository

&gt; release                 # Run the release procedure (set a new version, run tests, upload artifacts, then deploy to Sonatype)
</code></pre></div>
<p dir="auto">For publishing to Maven central, msgpack-scala uses <a href="https://github.com/xerial/sbt-sonatype">sbt-sonatype</a> plugin. Set Sonatype account information (user name and password) in the global sbt settings. To protect your password, never include this file in your project.</p>
<p dir="auto"><em><strong>$HOME/.sbt/(sbt-version)/sonatype.sbt</strong></em></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='credentials += Credentials("Sonatype Nexus Repository Manager",
        "oss.sonatype.org",
        "(Sonatype user name)",
        "(Sonatype password)")'><pre class="notranslate"><code>credentials += Credentials("Sonatype Nexus Repository Manager",
        "oss.sonatype.org",
        "(Sonatype user name)",
        "(Sonatype password)")
</code></pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack4z-msgpack4z-core" class="qs"><h4><a href="https://github.com/msgpack4z/msgpack4z-core" target="_blank">msgpack4z/msgpack4z-core <span class="qs-url">https://github.com/msgpack4z/msgpack4z-core</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack4z-core" class="anchor" aria-hidden="true" href="#msgpack4z-core"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack4z-core</h5>
<p dir="auto"><a href="https://maven-badges.herokuapp.com/maven-central/com.github.xuwei-k/msgpack4z-core_2.11" rel="nofollow"><img src="https://camo.githubusercontent.com/caf17422a9e0840ef59b500c04d7e5428d82e4019c1af0b0702955dc047150ad/68747470733a2f2f6d6176656e2d6261646765732e6865726f6b756170702e636f6d2f6d6176656e2d63656e7472616c2f636f6d2e6769746875622e78757765692d6b2f6d73677061636b347a2d636f72655f322e31312f62616467652e737667" alt="Maven Central" data-canonical-src="https://maven-badges.herokuapp.com/maven-central/com.github.xuwei-k/msgpack4z-core_2.11/badge.svg" style="max-width: 100%;"></a>
<a href="https://javadoc.io/doc/com.github.xuwei-k/msgpack4z-core_3/latest/api/msgpack4z.html" rel="nofollow"><img src="https://camo.githubusercontent.com/c28b6c9aa21bd0c7bf45598f35d198aee2a70c58282b1799f759f4581a94cde0/68747470733a2f2f6a617661646f632e696f2f6261646765322f636f6d2e6769746875622e78757765692d6b2f6d73677061636b347a2d636f72655f332f6a617661646f632e737667" alt="scaladoc" data-canonical-src="https://javadoc.io/badge2/com.github.xuwei-k/msgpack4z-core_3/javadoc.svg" style="max-width: 100%;"></a>
<a href="https://www.scala-js.org" rel="nofollow"><img src="https://camo.githubusercontent.com/9a76965287cd1e4666077890d1fec48f96cad65fecde6e3bc29a3a84ccf867fc/68747470733a2f2f7777772e7363616c612d6a732e6f72672f6173736574732f6261646765732f7363616c616a732d312e302e302e737667" alt="Scala.js" data-canonical-src="https://www.scala-js.org/assets/badges/scalajs-1.0.0.svg" style="max-width: 100%;"></a></p>
<ul dir="auto">
<li><a href="https://msgpack.org/" rel="nofollow">https://msgpack.org/</a></li>
<li><a href="https://github.com/msgpack/msgpack/blob/master/spec.md">https://github.com/msgpack/msgpack/blob/master/spec.md</a></li>
</ul>
<h7 dir="auto">
<a id="user-content-example" class="anchor" aria-hidden="true" href="#example"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>example</h7>
<ul dir="auto">
<li><a href="https://github.com/msgpack4z/msgpack4z-core/blob/master/src/test/scala/msgpack4z/CaseClassExample.scala">https://github.com/msgpack4z/msgpack4z-core/blob/master/src/test/scala/msgpack4z/CaseClassExample.scala</a></li>
<li><a href="https://github.com/xuwei-k/msgpack-json/blob/640878e88171/src/main/scala/App.scala">https://github.com/xuwei-k/msgpack-json/blob/640878e88171/src/main/scala/App.scala</a></li>
</ul>
<h7 dir="auto">
<a id="user-content-latest-stable-version" class="anchor" aria-hidden="true" href="#latest-stable-version"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>latest stable version</h7>
<div class="highlight highlight-source-scala notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='libraryDependencies += "com.github.xuwei-k" %% "msgpack4z-core" % "0.6.0"'><pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.github.xuwei-k<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>msgpack4z-core<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.6.0<span class="pl-pds">"</span></span></pre></div>
<h7 dir="auto">
<a id="user-content-dependency-graph" class="anchor" aria-hidden="true" href="#dependency-graph"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>dependency graph</h7>
<p dir="auto"><a href="https://msgpack4z.github.io/graph.svg" rel="nofollow"><img src="https://camo.githubusercontent.com/3a9f3e0f79cc25788dc05b6f549ed4ef28afbe124c85d654251849b798bbcee7/68747470733a2f2f6d73677061636b347a2e6769746875622e696f2f67726170682e737667" alt="graph" data-canonical-src="https://msgpack4z.github.io/graph.svg" style="max-width: 100%;"></a></p>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack4z-msgpack4z-circe" class="qs"><h4><a href="https://github.com/msgpack4z/msgpack4z-circe" target="_blank">msgpack4z/msgpack4z-circe <span class="qs-url">https://github.com/msgpack4z/msgpack4z-circe</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack4z-circe" class="anchor" aria-hidden="true" href="#msgpack4z-circe"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack4z-circe</h5>
<p dir="auto"><a href="https://maven-badges.herokuapp.com/maven-central/com.github.xuwei-k/msgpack4z-circe_2.12" rel="nofollow"><img src="https://camo.githubusercontent.com/4dc54e847435ac92be320166d8033d407d53b7b536e5f0497b42d3a73b95431d/68747470733a2f2f6d6176656e2d6261646765732e6865726f6b756170702e636f6d2f6d6176656e2d63656e7472616c2f636f6d2e6769746875622e78757765692d6b2f6d73677061636b347a2d63697263655f322e31322f62616467652e737667" alt="Maven Central" data-canonical-src="https://maven-badges.herokuapp.com/maven-central/com.github.xuwei-k/msgpack4z-circe_2.12/badge.svg" style="max-width: 100%;"></a>
<a href="https://javadoc.io/doc/com.github.xuwei-k/msgpack4z-circe_3/latest/api/msgpack4z.html" rel="nofollow"><img src="https://camo.githubusercontent.com/1eb3d594429103dfa0f43411e2b6e7fc0058d2c4ab0d4b78829eb753a7a97bef/68747470733a2f2f6a617661646f632e696f2f6261646765322f636f6d2e6769746875622e78757765692d6b2f6d73677061636b347a2d63697263655f332f6a617661646f632e737667" alt="scaladoc" data-canonical-src="https://javadoc.io/badge2/com.github.xuwei-k/msgpack4z-circe_3/javadoc.svg" style="max-width: 100%;"></a>
<a href="https://www.scala-js.org" rel="nofollow"><img src="https://camo.githubusercontent.com/9a76965287cd1e4666077890d1fec48f96cad65fecde6e3bc29a3a84ccf867fc/68747470733a2f2f7777772e7363616c612d6a732e6f72672f6173736574732f6261646765732f7363616c616a732d312e302e302e737667" alt="Scala.js" data-canonical-src="https://www.scala-js.org/assets/badges/scalajs-1.0.0.svg" style="max-width: 100%;"></a></p>
<ul dir="auto">
<li><a href="https://msgpack.org/" rel="nofollow">https://msgpack.org/</a></li>
<li><a href="https://github.com/msgpack/msgpack/blob/master/spec.md">https://github.com/msgpack/msgpack/blob/master/spec.md</a></li>
</ul>
<h7 dir="auto">
<a id="user-content-latest-stable-version" class="anchor" aria-hidden="true" href="#latest-stable-version"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>latest stable version</h7>
<div class="highlight highlight-source-scala notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='libraryDependencies += "com.github.xuwei-k" %% "msgpack4z-circe" % "0.13.0"'><pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.github.xuwei-k<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>msgpack4z-circe<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.13.0<span class="pl-pds">"</span></span></pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-jakm-msgpack-cli" class="qs"><h4><a href="https://github.com/jakm/msgpack-cli" target="_blank">jakm/msgpack-cli <span class="qs-url">https://github.com/jakm/msgpack-cli</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack-cli" class="anchor" aria-hidden="true" href="#msgpack-cli"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack-cli</h5>
<p dir="auto"><a href="https://travis-ci.org/jakm/msgpack-cli" rel="nofollow"><img src="https://camo.githubusercontent.com/99a13afc9a4bd00379930b95cd453253c12515d8ba65f773300e2b3138bdeaff/68747470733a2f2f7472617669732d63692e6f72672f6a616b6d2f6d73677061636b2d636c692e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/jakm/msgpack-cli.svg?branch=master" style="max-width: 100%;"></a></p>
<p dir="auto">msgpack-cli is command line tool that converts data from JSON to <a href="http://msgpack.org" rel="nofollow">Msgpack</a> and vice versa. Also allows calling RPC methods via <a href="https://github.com/msgpack-rpc/msgpack-rpc/blob/master/spec.md">msgpack-rpc</a>.</p>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="% go get github.com/jakm/msgpack-cli"><pre>% go get github.com/jakm/msgpack-cli</pre></div>
<p dir="auto">Debian packages and Windows binaries are available on project's
<a href="https://github.com/jakm/msgpack-cli/releases/latest">Releases page</a>.</p>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="msgpack-cli

Usage:
    msgpack-cli encode &lt;input-file&gt; [--out=&lt;output-file&gt;] [--disable-int64-conv]
    msgpack-cli decode &lt;input-file&gt; [--out=&lt;output-file&gt;] [--pp]
    msgpack-cli rpc &lt;host&gt; &lt;port&gt; &lt;method&gt; [&lt;params&gt;|--file=&lt;input-file&gt;] [--pp]
        [--timeout=&lt;timeout&gt;][--disable-int64-conv]
    msgpack-cli -h | --help
    msgpack-cli --version

Commands:
    encode                Encode data from input file to STDOUT
    decode                Decode data from input file to STDOUT
    rpc                   Call RPC method and write result to STDOUT

Options:
    -h --help             Show this help message and exit
    --version             Show version
    --out=&lt;output-file&gt;   Write output data to file instead of STDOUT
    --file=&lt;input-file&gt;   File where parameters or RPC method are read from
    --pp                  Pretty-print - indent output JSON data
    --timeout=&lt;timeout&gt;   Timeout of RPC call [default: 30]
    --disable-int64-conv  Disable the default behaviour such that JSON numbers
                          are converted to float64 or int64 numbers by their
                          meaning, all result numbers will have float64 type


Arguments:
    &lt;input-file&gt;          File where data are read from
    &lt;host&gt;                Server hostname
    &lt;port&gt;                Server port
    &lt;method&gt;              Name of RPC method
    &lt;params&gt;              Parameters of RPC method in JSON format"><pre class="notranslate"><code>msgpack-cli

Usage:
    msgpack-cli encode &lt;input-file&gt; [--out=&lt;output-file&gt;] [--disable-int64-conv]
    msgpack-cli decode &lt;input-file&gt; [--out=&lt;output-file&gt;] [--pp]
    msgpack-cli rpc &lt;host&gt; &lt;port&gt; &lt;method&gt; [&lt;params&gt;|--file=&lt;input-file&gt;] [--pp]
        [--timeout=&lt;timeout&gt;][--disable-int64-conv]
    msgpack-cli -h | --help
    msgpack-cli --version

Commands:
    encode                Encode data from input file to STDOUT
    decode                Decode data from input file to STDOUT
    rpc                   Call RPC method and write result to STDOUT

Options:
    -h --help             Show this help message and exit
    --version             Show version
    --out=&lt;output-file&gt;   Write output data to file instead of STDOUT
    --file=&lt;input-file&gt;   File where parameters or RPC method are read from
    --pp                  Pretty-print - indent output JSON data
    --timeout=&lt;timeout&gt;   Timeout of RPC call [default: 30]
    --disable-int64-conv  Disable the default behaviour such that JSON numbers
                          are converted to float64 or int64 numbers by their
                          meaning, all result numbers will have float64 type


Arguments:
    &lt;input-file&gt;          File where data are read from
    &lt;host&gt;                Server hostname
    &lt;port&gt;                Server port
    &lt;method&gt;              Name of RPC method
    &lt;params&gt;              Parameters of RPC method in JSON format
</code></pre></div>
<h6 dir="auto">
<a id="user-content-examples" class="anchor" aria-hidden="true" href="#examples"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Examples</h6>
<p dir="auto">Encoding/decoding:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ cat test.json
{
  &quot;firstName&quot;: &quot;John&quot;,
  &quot;lastName&quot;: &quot;Smith&quot;,
  &quot;isAlive&quot;: true,
  &quot;age&quot;: 25,
  &quot;height_cm&quot;: 167.6,
  &quot;address&quot;: {
    &quot;streetAddress&quot;: &quot;21 2nd Street&quot;,
    &quot;city&quot;: &quot;New York&quot;,
    &quot;state&quot;: &quot;NY&quot;,
    &quot;postalCode&quot;: &quot;10021-3100&quot;
  },
  &quot;phoneNumbers&quot;: [
    {
      &quot;type&quot;: &quot;home&quot;,
      &quot;number&quot;: &quot;212 555-1234&quot;
    },
    {
      &quot;type&quot;: &quot;office&quot;,
      &quot;number&quot;: &quot;646 555-4567&quot;
    }
  ],
  &quot;children&quot;: [],
  &quot;spouse&quot;: null
}
$
$ msgpack-cli encode test.json --out test.bin
$
$ ls -l test.* | awk '{print $9, $5}'
test.bin 242
test.json 429
$
$ msgpack-cli decode test.bin --pp  # pretty-print
{
  &quot;address&quot;: {
    &quot;city&quot;: &quot;New York&quot;,
    &quot;postalCode&quot;: &quot;10021-3100&quot;,
    &quot;state&quot;: &quot;NY&quot;,
    &quot;streetAddress&quot;: &quot;21 2nd Street&quot;
  },
  &quot;age&quot;: 25,
  &quot;children&quot;: [],
  &quot;firstName&quot;: &quot;John&quot;,
  &quot;height_cm&quot;: 167.6,
  &quot;isAlive&quot;: true,
  &quot;lastName&quot;: &quot;Smith&quot;,
  &quot;phoneNumbers&quot;: [
    {
      &quot;number&quot;: &quot;212 555-1234&quot;,
      &quot;type&quot;: &quot;home&quot;
    },
    {
      &quot;number&quot;: &quot;646 555-4567&quot;,
      &quot;type&quot;: &quot;office&quot;
    }
  ],
  &quot;spouse&quot;: null
}"><pre class="notranslate"><code>$ cat test.json
{
  "firstName": "John",
  "lastName": "Smith",
  "isAlive": true,
  "age": 25,
  "height_cm": 167.6,
  "address": {
    "streetAddress": "21 2nd Street",
    "city": "New York",
    "state": "NY",
    "postalCode": "10021-3100"
  },
  "phoneNumbers": [
    {
      "type": "home",
      "number": "212 555-1234"
    },
    {
      "type": "office",
      "number": "646 555-4567"
    }
  ],
  "children": [],
  "spouse": null
}
$
$ msgpack-cli encode test.json --out test.bin
$
$ ls -l test.* | awk '{print $9, $5}'
test.bin 242
test.json 429
$
$ msgpack-cli decode test.bin --pp  # pretty-print
{
  "address": {
    "city": "New York",
    "postalCode": "10021-3100",
    "state": "NY",
    "streetAddress": "21 2nd Street"
  },
  "age": 25,
  "children": [],
  "firstName": "John",
  "height_cm": 167.6,
  "isAlive": true,
  "lastName": "Smith",
  "phoneNumbers": [
    {
      "number": "212 555-1234",
      "type": "home"
    },
    {
      "number": "646 555-4567",
      "type": "office"
    }
  ],
  "spouse": null
}
</code></pre></div>
<p dir="auto">RPC calling:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ # zero params
$ msgpack-cli rpc localhost 8000 echo
[]
$
$ # single param
$ msgpack-cli rpc localhost 8000 echo 3.14159
[3.14159]
$
$ # multiple params (as json array)
$ msgpack-cli rpc localhost 8000 echo '[&quot;abc&quot;, &quot;def&quot;, &quot;ghi&quot;, {&quot;A&quot;: 65, &quot;B&quot;: 66, &quot;C&quot;: 67}]'
[&quot;abc&quot;,&quot;def&quot;,&quot;ghi&quot;,{&quot;A&quot;:65,&quot;B&quot;:66,&quot;C&quot;:67}]"><pre class="notranslate"><code>$ # zero params
$ msgpack-cli rpc localhost 8000 echo
[]
$
$ # single param
$ msgpack-cli rpc localhost 8000 echo 3.14159
[3.14159]
$
$ # multiple params (as json array)
$ msgpack-cli rpc localhost 8000 echo '["abc", "def", "ghi", {"A": 65, "B": 66, "C": 67}]'
["abc","def","ghi",{"A":65,"B":66,"C":67}]
</code></pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-smalltalk" class="qs"><h4><a href="https://github.com/msgpack/msgpack-smalltalk" target="_blank">msgpack/msgpack-smalltalk <span class="qs-url">https://github.com/msgpack/msgpack-smalltalk</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack-smalltalk" class="anchor" aria-hidden="true" href="#msgpack-smalltalk"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack-smalltalk</h5>
<p dir="auto">MessagePack serialization library for various Smalltalk dialects.</p>
<ul dir="auto">
<li>Squeak</li>
<li>Pharo</li>
<li>VisualWorks</li>
<li>VA Smalltalk</li>
<li>Dolphin Smalltalk</li>
<li>GNU Smalltalk (Beta)</li>
<li><a href="https://github.com/mumez/Cuis-Smalltalk-MessagePack">Cuis</a></li>
</ul>
<p dir="auto">Sources are put as <a href="https://github.com/CampSmalltalk/Cypress/blob/master/README.md">Cypress</a> for the neutral accesses from various Smalltalk dialects.</p>
<h6 dir="auto">
<a id="user-content-how-to-use" class="anchor" aria-hidden="true" href="#how-to-use"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How to use</h6>
<h7 dir="auto">
<a id="user-content-serialization" class="anchor" aria-hidden="true" href="#serialization"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Serialization</h7>
<div class="highlight highlight-source-smalltalk notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="MpMessagePack pack: &lt;your object&gt;"><pre><span class="pl-c1">MpMessagePack</span> <span class="pl-c1">pack:</span> <span class="pl-k">&lt;</span>your object<span class="pl-k">&gt;</span></pre></div>
<p dir="auto">or:</p>
<div class="highlight highlight-source-smalltalk notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&lt;your object&gt; messagePacked"><pre><span class="pl-k">&lt;</span>your object<span class="pl-k">&gt;</span> messagePacked</pre></div>
<h7 dir="auto">
<a id="user-content-deserialization" class="anchor" aria-hidden="true" href="#deserialization"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Deserialization</h7>
<div class="highlight highlight-source-smalltalk notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="MpMessagePack unpack: msgpackBytes"><pre><span class="pl-c1">MpMessagePack</span> <span class="pl-c1">unpack:</span> msgpackBytes</pre></div>
<p dir="auto">or:</p>
<div class="highlight highlight-source-smalltalk notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Object fromMessagePack: msgBytes"><pre><span class="pl-c1">Object</span> <span class="pl-c1">fromMessagePack:</span> msgBytes</pre></div>
<h7 dir="auto">
<a id="user-content-samples" class="anchor" aria-hidden="true" href="#samples"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Samples</h7>
<div class="highlight highlight-source-smalltalk notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="map := Dictionary new.
map at: 'someArray' asByteArray put: #(1 2.2 #[3 4 5]).
packed := map messagePacked.
(Object fromMessagePack: packed) inspect."><pre>map <span class="pl-k">:=</span> <span class="pl-c1">Dictionary</span> <span class="pl-k">new</span>.
map <span class="pl-c1">at:</span> <span class="pl-s"><span class="pl-pds">'</span>someArray<span class="pl-pds">'</span></span> asByteArray <span class="pl-c1">put:</span> <span class="pl-c1">#(1 2.2 #[3 4 5])</span>.
packed <span class="pl-k">:=</span> map messagePacked.
(<span class="pl-c1">Object</span> <span class="pl-c1">fromMessagePack:</span> packed) inspect.</pre></div>
<div class="highlight highlight-source-smalltalk notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="writeStream := WriteStream on: ByteArray new.
encoder := MpEncoder on: writeStream.
encoder nextPut: 1.
encoder nextPut: #(2 3).
dic := Dictionary new.
dic at: 4 put: 5.
encoder nextPut: dic.
encoder nextPut: 'four' asByteArray.
bytes := encoder contents.
readStream := ReadStream on: bytes.
decoder := MpDecoder on: readStream.
[decoder atEnd] whileFalse: [
        Transcript cr; show: decoder next printString
]"><pre>writeStream <span class="pl-k">:=</span> <span class="pl-c1">WriteStream</span> <span class="pl-c1">on:</span> <span class="pl-c1">ByteArray</span> <span class="pl-k">new</span>.
encoder <span class="pl-k">:=</span> <span class="pl-c1">MpEncoder</span> <span class="pl-c1">on:</span> writeStream.
encoder <span class="pl-c1">nextPut:</span> <span class="pl-c1">1</span>.
encoder <span class="pl-c1">nextPut:</span> <span class="pl-c1">#(2 3)</span>.
dic <span class="pl-k">:=</span> <span class="pl-c1">Dictionary</span> <span class="pl-k">new</span>.
dic <span class="pl-c1">at:</span> <span class="pl-c1">4</span> <span class="pl-c1">put:</span> <span class="pl-c1">5</span>.
encoder <span class="pl-c1">nextPut:</span> dic.
encoder <span class="pl-c1">nextPut:</span> <span class="pl-s"><span class="pl-pds">'</span>four<span class="pl-pds">'</span></span> asByteArray.
bytes <span class="pl-k">:=</span> encoder contents.
readStream <span class="pl-k">:=</span> <span class="pl-c1">ReadStream</span> <span class="pl-c1">on:</span> bytes.
decoder <span class="pl-k">:=</span> <span class="pl-c1">MpDecoder</span> <span class="pl-c1">on:</span> readStream.
[decoder atEnd] <span class="pl-k">whileFalse:</span> [
        <span class="pl-c1">Transcript</span> cr; <span class="pl-c1">show:</span> decoder next printString
]</pre></div>
<h7 dir="auto">
<a id="user-content-how-to-install" class="anchor" aria-hidden="true" href="#how-to-install"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How to install</h7>
<p dir="auto">Please read <a href="https://github.com/msgpack/msgpack-smalltalk/blob/master/doc/HowToInstall.md">HowToInstall.md</a>.</p>
<h7 dir="auto">
<a id="user-content-loading-the-latest-development-version" class="anchor" aria-hidden="true" href="#loading-the-latest-development-version"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Loading the latest development version</h7>
<h8 dir="auto">
<a id="user-content-squeak" class="anchor" aria-hidden="true" href="#squeak"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Squeak</h8>
<div class="highlight highlight-source-smalltalk notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Installer squeaksource
    project: 'MessagePack';
    install: 'ConfigurationOfMessagePack'. 
(Smalltalk at: #ConfigurationOfMessagePack) project development load"><pre><span class="pl-c1">Installer</span> squeaksource
    <span class="pl-c1">project:</span> <span class="pl-s"><span class="pl-pds">'</span>MessagePack<span class="pl-pds">'</span></span>;
    <span class="pl-c1">install:</span> <span class="pl-s"><span class="pl-pds">'</span>ConfigurationOfMessagePack<span class="pl-pds">'</span></span>. 
(<span class="pl-k">Smalltalk</span> <span class="pl-c1">at:</span> <span class="pl-c1">#ConfigurationOfMessagePack</span>) project development load</pre></div>
<h8 dir="auto">
<a id="user-content-pharo" class="anchor" aria-hidden="true" href="#pharo"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Pharo</h8>
<div class="highlight highlight-source-smalltalk notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Metacello new
  repository: 'github://msgpack/msgpack-smalltalk/repository';
  baseline: 'MessagePack';
  load."><pre><span class="pl-c1">Metacello</span> <span class="pl-k">new</span>
  <span class="pl-c1">repository:</span> <span class="pl-s"><span class="pl-pds">'</span>github://msgpack/msgpack-smalltalk/repository<span class="pl-pds">'</span></span>;
  <span class="pl-c1">baseline:</span> <span class="pl-s"><span class="pl-pds">'</span>MessagePack<span class="pl-pds">'</span></span>;
  load.</pre></div>
<p dir="auto">You might need <code>MpTypeMapper initializeAll </code> on new encoder/decoder-related updates.</p>
</article>
  </div>
        </div>
        
        <div id="qs-briandw-SwiftPack" class="qs"><h4><a href="https://github.com/briandw/SwiftPack" target="_blank">briandw/SwiftPack <span class="qs-url">https://github.com/briandw/SwiftPack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-swiftpack" class="anchor" aria-hidden="true" href="#swiftpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>SwiftPack</h5>
<p dir="auto">SwiftPack is MessagePack packer and unpacker written almost entirely in Swift.</p>
<h5 dir="auto">
<a id="user-content-issues" class="anchor" aria-hidden="true" href="#issues"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Issues</h5>
<ul dir="auto">
<li>There are few Objective-C dependencies, mostly NSData. I hope to remove these dependencies as Swift matures.</li>
<li>Maps currently only support String types for keys.</li>
</ul>
<h5 dir="auto">
<a id="user-content-copyright-and-license" class="anchor" aria-hidden="true" href="#copyright-and-license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Copyright and License</h5>
<p dir="auto">Copyright (c) 2014 Brian Williams</p>
<p dir="auto">This software is licensed under the terms of the MIT license.</p>
</article>
  </div>
        </div>
        
        <div id="qs-a2-MessagePack-swift" class="qs"><h4><a href="https://github.com/a2/MessagePack.swift" target="_blank">a2/MessagePack.swift <span class="qs-url">https://github.com/a2/MessagePack.swift</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepackswift" class="anchor" aria-hidden="true" href="#messagepackswift"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack.swift</h5>
<p dir="auto"><a href="http://cocoapods.org/pods/MessagePack.swift" rel="nofollow"><img src="https://camo.githubusercontent.com/518ad14a87e94fdd7011ed95ab3d8a6f84deb05c094f36b36175c9ec415e80f0/68747470733a2f2f696d672e736869656c64732e696f2f636f636f61706f64732f762f4d6573736167655061636b2e73776966742e7376673f7374796c653d666c6174" alt="Version" data-canonical-src="https://img.shields.io/cocoapods/v/MessagePack.swift.svg?style=flat" style="max-width: 100%;"></a>
<a href="http://cocoapods.org/pods/MessagePack.swift" rel="nofollow"><img src="https://camo.githubusercontent.com/1f08238ceaeb6ad6b379da2c3840eec1f5a06f932115ff67e69604feec292b2f/68747470733a2f2f696d672e736869656c64732e696f2f636f636f61706f64732f6c2f4d6573736167655061636b2e73776966742e7376673f7374796c653d666c6174" alt="License" data-canonical-src="https://img.shields.io/cocoapods/l/MessagePack.swift.svg?style=flat" style="max-width: 100%;"></a>
<a href="http://cocoapods.org/pods/MessagePack.swift" rel="nofollow"><img src="https://camo.githubusercontent.com/094fa6bb9d8eea7480a9e8a37b832a81ffbe842c4126c138fb23ded1c425ad8f/68747470733a2f2f696d672e736869656c64732e696f2f636f636f61706f64732f702f4d6573736167655061636b2e73776966742e7376673f7374796c653d666c6174" alt="Platform" data-canonical-src="https://img.shields.io/cocoapods/p/MessagePack.swift.svg?style=flat" style="max-width: 100%;"></a></p>
<p dir="auto">A fast, zero-dependency MessagePack implementation written in Swift 4. Supports Apple platforms and Linux.</p>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<h7 dir="auto">
<a id="user-content-cocoapods" class="anchor" aria-hidden="true" href="#cocoapods"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>CocoaPods</h7>
<p dir="auto">To use CocoaPods, add the following to your Podfile:</p>
<div class="highlight highlight-source-ruby notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="pod 'MessagePack.swift', '~&gt; 4.0'"><pre><span class="pl-en">pod</span> <span class="pl-s">'MessagePack.swift'</span><span class="pl-kos">,</span> <span class="pl-s">'~&gt; 4.0'</span></pre></div>
<h7 dir="auto">
<a id="user-content-carthage" class="anchor" aria-hidden="true" href="#carthage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Carthage</h7>
<p dir="auto">To use Carthage, add the following to your Cartfile:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='github "a2/MessagePack.swift" ~&gt; 4.0'><pre lang="ogdl" class="notranslate"><code>github "a2/MessagePack.swift" ~&gt; 4.0
</code></pre></div>
<h7 dir="auto">
<a id="user-content-spm-swift-package-manager" class="anchor" aria-hidden="true" href="#spm-swift-package-manager"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>SPM (Swift Package Manager)</h7>
<p dir="auto">You can easily integrate MessagePack.swift in your app with SPM. Just add MessagePack.swift as a dependency:</p>
<div class="highlight highlight-source-swift notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import PackageDescription

let package = Package(
    name: "MyAwesomeApp",
    dependencies: [
        .Package(url: "https://github.com/a2/MessagePack.swift.git", majorVersion: 4),
    ]
)'><pre><span class="pl-k">import</span> <span class="pl-en">PackageDescription</span>

<span class="pl-k">let</span> package <span class="pl-k">=</span> <span class="pl-c1">Package</span>(
    <span class="pl-c1">name</span>: <span class="pl-s"><span class="pl-pds">"</span>MyAwesomeApp<span class="pl-pds">"</span></span>,
    <span class="pl-c1">dependencies</span>: [
        .<span class="pl-c1">Package</span>(<span class="pl-c1">url</span>: <span class="pl-s"><span class="pl-pds">"</span>https://github.com/a2/MessagePack.swift.git<span class="pl-pds">"</span></span>, <span class="pl-c1">majorVersion</span>: <span class="pl-c1">4</span>),
    ]
)</pre></div>
<h6 dir="auto">
<a id="user-content-version" class="anchor" aria-hidden="true" href="#version"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Version</h6>
<ul dir="auto">
<li>Versions 4.x support Swift 5.2.</li>
<li>Versions 3.x support Swift 4.</li>
<li>Support for Swift 3 was dropped after <a href="https://github.com/a2/MessagePack.swift/releases/tag/2.1.1">2.1.1</a>.</li>
<li>Support for Swift 2 was dropped after <a href="https://github.com/a2/MessagePack.swift/releases/tag/1.2.0">1.2.0</a>.</li>
</ul>
<h6 dir="auto">
<a id="user-content-authors" class="anchor" aria-hidden="true" href="#authors"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Authors</h6>
<p dir="auto">Alexsander Akers, <a href="mailto:me@a2.io">me@a2.io</a></p>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<p dir="auto">MessagePack.swift is available under the MIT license. See the LICENSE file for more info.</p>
</article>
  </div>
        </div>
        
        <div id="qs-michael-yuji-YSMessagePack" class="qs"><h4><a href="https://github.com/michael-yuji/YSMessagePack" target="_blank">michael-yuji/YSMessagePack <span class="qs-url">https://github.com/michael-yuji/YSMessagePack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-ysmessagepack--for-swift-3" class="anchor" aria-hidden="true" href="#ysmessagepack--for-swift-3"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>YSMessagePack- for swift 3</h5>
<p dir="auto">YSMessagePack is a messagePack packer/unpacker written in swift (swift 3 ready). It is designed to be easy to use. YSMessagePack include following features:</p>
<ul dir="auto">
<li>Pack custom structs and classes / unpack objects by groups and apply handler to each group (easier to re-construct your struct$)</li>
<li>Asynchronous unpacking</li>
<li>Pack and unpack multiple message-packed data regardless of types with only one line of code</li>
<li>Specify how many items to unpack</li>
<li>Get remaining bytes that were not message-packed ; start packing from some index -- so you can mix messagepack with other protocol!!!</li>
<li>Helper methods to cast NSData to desired types</li>
<li>Operator +^ and +^= to join NSData</li>
</ul>
<h6 dir="auto">
<a id="user-content-version" class="anchor" aria-hidden="true" href="#version"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Version</h6>
<p dir="auto">1.6.2 (Dropped swift 2 support, swift 3 support only from now on)</p>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<ul dir="auto">
<li>Simply add files under <code>YSMessagePack/Classes</code> to your project,</li>
<li>use cocoapod, add "pod <code>'YSMessagePack', '~&gt; 1.6.2'</code> to your podfile</li>
</ul>
<h5 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h5>
<h7 dir="auto">
<a id="user-content-pack" class="anchor" aria-hidden="true" href="#pack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Pack:</h7>
<div class="highlight highlight-source-swift notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='
let exampleInt: Int = 1
let exampleStr: String = "Hello World"
let exampleArray: [Int] = [1, 2, 3, 4, 5, 6]
let bool: Bool = true

// To pack items, just put all of them in a single array
// and call the `pack(items:)` function

//this will be the packed data
let msgPackedBytes: NSData = pack(items: [true, foo, exampleInt, exampleStr, exampleArray]) 

// Now your payload is ready to send!!!
'><pre><span class="pl-k">let</span> exampleInt: <span class="pl-c1">Int</span> <span class="pl-k">=</span> <span class="pl-c1">1</span>
<span class="pl-k">let</span> exampleStr: <span class="pl-c1">String</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Hello World<span class="pl-pds">"</span></span>
<span class="pl-k">let</span> exampleArray: [<span class="pl-c1">Int</span>] <span class="pl-k">=</span> [<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>, <span class="pl-c1">4</span>, <span class="pl-c1">5</span>, <span class="pl-c1">6</span>]
<span class="pl-k">let</span> bool: <span class="pl-c1">Bool</span> <span class="pl-k">=</span> <span class="pl-c1">true</span>

<span class="pl-c"><span class="pl-c">//</span> To pack items, just put all of them in a single array</span>
<span class="pl-c"><span class="pl-c">//</span> and call the `pack(items:)` function</span>
<span class="pl-c"></span>
<span class="pl-c"><span class="pl-c">//</span>this will be the packed data</span>
<span class="pl-c"></span><span class="pl-k">let</span> msgPackedBytes: NSData <span class="pl-k">=</span> <span class="pl-c1">pack</span>(<span class="pl-c1">items</span>: [<span class="pl-c1">true</span>, foo, exampleInt, exampleStr, exampleArray]) 

<span class="pl-c"><span class="pl-c">//</span> Now your payload is ready to send!!!</span>
<span class="pl-c"></span></pre></div>
<p dir="auto">But what if we have some custom data structure to send?</p>
<div class="highlight highlight-source-swift notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='
//To make your struct / class packable
struct MyStruct: Packable {  //Confirm to this protocol
    var name: String
    var index: Int
    func packFormat() -&gt; [Packable] { //protocol function
        return [name, index] //pack order
    }
    
    func msgtype() -&gt; MsgPackTypes {
        return .Custom
    }
}

let exampleInt: Int = 1
let exampleStr: String = "Hello World"
let exampleArray: [Int] = [1, 2, 3, 4, 5]
let bool: Bool = true

let foo = MyStruct(name: "foo", index: 626)

let msgPackedBytes = pack(items: [bool, foo, exampleInt, exampleStr, exampleArray])
'><pre><span class="pl-c"><span class="pl-c">//</span>To make your struct / class packable</span>
<span class="pl-c"></span><span class="pl-k">struct</span> <span class="pl-en">MyStruct</span>: <span class="pl-e">Packable </span>{  <span class="pl-c"><span class="pl-c">//</span>Confirm to this protocol</span>
<span class="pl-c"></span>    <span class="pl-k">var</span> name: <span class="pl-c1">String</span>
    <span class="pl-k">var</span> index: <span class="pl-c1">Int</span>
    <span class="pl-k">func</span> <span class="pl-en">packFormat</span>() <span class="pl-k">-&gt;</span> [Packable] { <span class="pl-c"><span class="pl-c">//</span>protocol function</span>
<span class="pl-c"></span>        <span class="pl-k">return</span> [name, index] <span class="pl-c"><span class="pl-c">//</span>pack order</span>
<span class="pl-c"></span>    }
    
    <span class="pl-k">func</span> <span class="pl-en">msgtype</span>() <span class="pl-k">-&gt;</span> MsgPackTypes {
        <span class="pl-k">return</span> .<span class="pl-smi">Custom</span>
    }
}

<span class="pl-k">let</span> exampleInt: <span class="pl-c1">Int</span> <span class="pl-k">=</span> <span class="pl-c1">1</span>
<span class="pl-k">let</span> exampleStr: <span class="pl-c1">String</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Hello World<span class="pl-pds">"</span></span>
<span class="pl-k">let</span> exampleArray: [<span class="pl-c1">Int</span>] <span class="pl-k">=</span> [<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>, <span class="pl-c1">4</span>, <span class="pl-c1">5</span>]
<span class="pl-k">let</span> bool: <span class="pl-c1">Bool</span> <span class="pl-k">=</span> <span class="pl-c1">true</span>

<span class="pl-k">let</span> foo <span class="pl-k">=</span> <span class="pl-c1">MyStruct</span>(<span class="pl-c1">name</span>: <span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span>, <span class="pl-c1">index</span>: <span class="pl-c1">626</span>)

<span class="pl-k">let</span> msgPackedBytes <span class="pl-k">=</span> <span class="pl-c1">pack</span>(<span class="pl-c1">items</span>: [bool, foo, exampleInt, exampleStr, exampleArray])
</pre></div>
<p dir="auto"><strong>Or you can pack them individually and add them to a byte array manually (Which is also less expensive)</strong></p>
<div class="highlight highlight-source-swift notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="let exampleInt: Int = 1
let exampleStr: String = &quot;Hello World&quot;
let exampleArray: [Int] = [1, 2, 3, 4, 5, 6]

//Now pack them individually
let packedInt = exampleInt.packed()

//if you didn't specific encoding, the default encoding will be ASCII
#if swift(&gt;=3)
let packedStr = exampleStr.packed(withEncoding: NSASCIIStringEncoding) 
#else
let packedStr = exampleStr.packed(withEncoding: .ascii)
#endif
let packedArray = exampleArray.packed()
//You can use this operator +^ the join the data on rhs to the end of data on lhs
let msgPackedBytes: NSData = packedInt +^ packedStr +^ packedArray"><pre><span class="pl-k">let</span> exampleInt: <span class="pl-c1">Int</span> <span class="pl-k">=</span> <span class="pl-c1">1</span>
<span class="pl-k">let</span> exampleStr: <span class="pl-c1">String</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Hello World<span class="pl-pds">"</span></span>
<span class="pl-k">let</span> exampleArray: [<span class="pl-c1">Int</span>] <span class="pl-k">=</span> [<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>, <span class="pl-c1">4</span>, <span class="pl-c1">5</span>, <span class="pl-c1">6</span>]

<span class="pl-c"><span class="pl-c">//</span>Now pack them individually</span>
<span class="pl-c"></span><span class="pl-k">let</span> packedInt <span class="pl-k">=</span> exampleInt.<span class="pl-c1">packed</span>()

<span class="pl-c"><span class="pl-c">//</span>if you didn't specific encoding, the default encoding will be ASCII</span>
<span class="pl-c"></span>#<span class="pl-k">if</span> <span class="pl-k">swift</span>(<span class="pl-k">&gt;=</span><span class="pl-c1">3</span>)
<span class="pl-k">let</span> packedStr <span class="pl-k">=</span> exampleStr.<span class="pl-c1">packed</span>(<span class="pl-c1">withEncoding</span>: NSASCIIStringEncoding) 
#<span class="pl-k">else</span>
<span class="pl-k">let</span> packedStr <span class="pl-k">=</span> exampleStr.<span class="pl-c1">packed</span>(<span class="pl-c1">withEncoding</span>: .<span class="pl-smi">ascii</span>)
#<span class="pl-k">endif</span>
<span class="pl-k">let</span> packedArray <span class="pl-k">=</span> exampleArray.<span class="pl-c1">packed</span>()
<span class="pl-c"><span class="pl-c">//</span>You can use this operator +^ the join the data on rhs to the end of data on lhs</span>
<span class="pl-c"></span><span class="pl-k">let</span> msgPackedBytes: NSData <span class="pl-k">=</span> packedInt <span class="pl-k">+^</span> packedStr <span class="pl-k">+^</span> packedArray</pre></div>
<h6 dir="auto">
<a id="user-content-unpack" class="anchor" aria-hidden="true" href="#unpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Unpack</h6>
<p dir="auto">YSMessagePack offer a number of different ways and options to unpack include unpack asynchronously, see the example project for detail.</p>
<p dir="auto">To unpack a messagepacked bytearray is pretty easy:</p>
<div class="highlight highlight-source-swift notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='do {
    //The unpack method will return an array of NSData which each element is an unpacked object
    let unpackedItems = try msgPackedBytes.itemsUnpacked()
    //instead of casting the NSData to the type you want, you can call these `.castTo..` methods to do the job for you
    let int: Int = unpackedItems[2].castToInt()

    //Same as packing, you can also specify the encoding you want to use, default is ASCII
    let str: String = unpackedItem[3].castToString() 
    let array: NSArray = unpackedItems[4].castToArray() 
} catch let error as NSError{
    NSLog("Error occurs during unpacking: %@", error)
}

//Remember how to pack your struct? Here is a better way to unpack a stream of bytes formatted in specific format
 let testObj1 = MyStruct(name: "TestObject1", index: 1)
 let testObj2 = MyStruct(name: "TestObject2", index: 2)
 let testObj3 = MyStruct(name: "TestObject3", index: 3)
 
 let packed = packCustomObjects(testObj1, testObj2, testObj3) //This is an other method that can pack your own struct easier
 
 let nobjsInOneGroup = 2
 
 try! packed.unpackByGroupsWith(nobjsInOneGroup) {
     (unpackedData, isLast) -&gt; Bool
     
     //you can also involve additional args like number of groups to unpack
     guard let name = unpackedData[0].castToString() else {return false} //abort unpacking hen something wrong
     let index = unpackedData[1]
     let testObj = MyStruct(name: name, index: index) // assembly      
     return true //proceed unpacking, or return false to abort
 } 
'><pre><span class="pl-k">do</span> {
    <span class="pl-c"><span class="pl-c">//</span>The unpack method will return an array of NSData which each element is an unpacked object</span>
<span class="pl-c"></span>    <span class="pl-k">let</span> unpackedItems <span class="pl-k">=</span> <span class="pl-k">try</span> msgPackedBytes.<span class="pl-c1">itemsUnpacked</span>()
    <span class="pl-c"><span class="pl-c">//</span>instead of casting the NSData to the type you want, you can call these `.castTo..` methods to do the job for you</span>
<span class="pl-c"></span>    <span class="pl-k">let</span> int: <span class="pl-c1">Int</span> <span class="pl-k">=</span> unpackedItems[<span class="pl-c1">2</span>].<span class="pl-c1">castToInt</span>()

    <span class="pl-c"><span class="pl-c">//</span>Same as packing, you can also specify the encoding you want to use, default is ASCII</span>
<span class="pl-c"></span>    <span class="pl-k">let</span> str: <span class="pl-c1">String</span> <span class="pl-k">=</span> unpackedItem[<span class="pl-c1">3</span>].<span class="pl-c1">castToString</span>() 
    <span class="pl-k">let</span> array: NSArray <span class="pl-k">=</span> unpackedItems[<span class="pl-c1">4</span>].<span class="pl-c1">castToArray</span>() 
} <span class="pl-k">catch</span> <span class="pl-k">let</span> error <span class="pl-k">as</span> NSError{
    <span class="pl-c1">NSLog</span>(<span class="pl-s"><span class="pl-pds">"</span>Error occurs during unpacking: %@<span class="pl-pds">"</span></span>, error)
}

<span class="pl-c"><span class="pl-c">//</span>Remember how to pack your struct? Here is a better way to unpack a stream of bytes formatted in specific format</span>
<span class="pl-c"></span> <span class="pl-k">let</span> testObj1 <span class="pl-k">=</span> <span class="pl-c1">MyStruct</span>(<span class="pl-c1">name</span>: <span class="pl-s"><span class="pl-pds">"</span>TestObject1<span class="pl-pds">"</span></span>, <span class="pl-c1">index</span>: <span class="pl-c1">1</span>)
 <span class="pl-k">let</span> testObj2 <span class="pl-k">=</span> <span class="pl-c1">MyStruct</span>(<span class="pl-c1">name</span>: <span class="pl-s"><span class="pl-pds">"</span>TestObject2<span class="pl-pds">"</span></span>, <span class="pl-c1">index</span>: <span class="pl-c1">2</span>)
 <span class="pl-k">let</span> testObj3 <span class="pl-k">=</span> <span class="pl-c1">MyStruct</span>(<span class="pl-c1">name</span>: <span class="pl-s"><span class="pl-pds">"</span>TestObject3<span class="pl-pds">"</span></span>, <span class="pl-c1">index</span>: <span class="pl-c1">3</span>)
 
 <span class="pl-k">let</span> packed <span class="pl-k">=</span> <span class="pl-c1">packCustomObjects</span>(testObj1, testObj2, testObj3) <span class="pl-c"><span class="pl-c">//</span>This is an other method that can pack your own struct easier</span>
<span class="pl-c"></span> 
 <span class="pl-k">let</span> nobjsInOneGroup <span class="pl-k">=</span> <span class="pl-c1">2</span>
 
 <span class="pl-k">try</span><span class="pl-k">!</span> packed.<span class="pl-c1">unpackByGroupsWith</span>(nobjsInOneGroup) {
     (unpackedData, isLast) <span class="pl-k">-&gt;</span> <span class="pl-c1">Bool</span>
     
     <span class="pl-c"><span class="pl-c">//</span>you can also involve additional args like number of groups to unpack</span>
<span class="pl-c"></span>     <span class="pl-k">guard</span> <span class="pl-k">let</span> name <span class="pl-k">=</span> unpackedData[<span class="pl-c1">0</span>].<span class="pl-c1">castToString</span>() <span class="pl-k">else</span> {<span class="pl-k">return</span> <span class="pl-c1">false</span>} <span class="pl-c"><span class="pl-c">//</span>abort unpacking hen something wrong</span>
<span class="pl-c"></span>     <span class="pl-k">let</span> index <span class="pl-k">=</span> unpackedData[<span class="pl-c1">1</span>]
     <span class="pl-k">let</span> testObj <span class="pl-k">=</span> <span class="pl-c1">MyStruct</span>(<span class="pl-c1">name</span>: name, <span class="pl-c1">index</span>: index) <span class="pl-c"><span class="pl-c">//</span> assembly      </span>
<span class="pl-c"></span>     <span class="pl-k">return</span> <span class="pl-c1">true</span> <span class="pl-c"><span class="pl-c">//</span>proceed unpacking, or return false to abort</span>
<span class="pl-c"></span> } 
</pre></div>
<p dir="auto"><strong>If you don't want to unpack every single thing included in the message-pack byte array, you can also specify an amount to unpack, if you want to keep the remaining bytes, you can put <code>true</code> in the <code>returnRemainingBytes</code> argument, the remaining bytes will stored in the end of the <code>NSData</code> array.</strong></p>
<div class="highlight highlight-source-swift notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='do {
    //Unpack only 2 objects, and we are not interested in remaining bytes
    let unpackedItems = try msgPackedBytes.itemsUnpacked(specific_amount: 2, returnRemainingBytes: false)
    print(unpackedItems.count) //will print 2
} catch let error as NSError{
    NSLog("Error occurs during unpacking: %@", error)
}'><pre><span class="pl-k">do</span> {
    <span class="pl-c"><span class="pl-c">//</span>Unpack only 2 objects, and we are not interested in remaining bytes</span>
<span class="pl-c"></span>    <span class="pl-k">let</span> unpackedItems <span class="pl-k">=</span> <span class="pl-k">try</span> msgPackedBytes.<span class="pl-c1">itemsUnpacked</span>(<span class="pl-c1">specific_amount</span>: <span class="pl-c1">2</span>, <span class="pl-c1">returnRemainingBytes</span>: <span class="pl-c1">false</span>)
    <span class="pl-c1">print</span>(unpackedItems.<span class="pl-c1">count</span>) <span class="pl-c"><span class="pl-c">//</span>will print 2</span>
<span class="pl-c"></span>} <span class="pl-k">catch</span> <span class="pl-k">let</span> error <span class="pl-k">as</span> NSError{
    <span class="pl-c1">NSLog</span>(<span class="pl-s"><span class="pl-pds">"</span>Error occurs during unpacking: %@<span class="pl-pds">"</span></span>, error)
}</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-couchdeveloper-messagepack" class="qs"><h4><a href="https://github.com/couchdeveloper/messagepack" target="_blank">couchdeveloper/messagepack <span class="qs-url">https://github.com/couchdeveloper/messagepack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack" class="anchor" aria-hidden="true" href="#messagepack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack</h5>
<p dir="auto"><strong>MessagePack</strong> is an efficient binary serialization format. It lets you exchange data among multiple languages like JSON. But it's faster and smaller. Small integers are encoded into a single byte, and typical short strings require only one extra byte in addition to the strings themselves.</p>
<h6 dir="auto">
<a id="user-content-packageswift" class="anchor" aria-hidden="true" href="#packageswift"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Package.swift</h6>
<div class="highlight highlight-source-swift notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='.Package(url: "https://github.com/tris-foundation/messagepack.git", majorVersion: 0)'><pre>.<span class="pl-c1">Package</span>(<span class="pl-c1">url</span>: <span class="pl-s"><span class="pl-pds">"</span>https://github.com/tris-foundation/messagepack.git<span class="pl-pds">"</span></span>, <span class="pl-c1">majorVersion</span>: <span class="pl-c1">0</span>)</pre></div>
<h6 dir="auto">
<a id="user-content-memo" class="anchor" aria-hidden="true" href="#memo"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Memo</h6>
<div class="highlight highlight-source-swift notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="public enum MessagePack {
    case `nil`
    case int(Int)
    case uint(UInt)
    case bool(Bool)
    case float(Float)
    case double(Double)
    case string(String)
    case binary([UInt8])
    case array([MessagePack])
    case map([MessagePack : MessagePack])
    case extended(Extended)

    public struct Extended {
        public let type: Int8
        public let data: [UInt8]
        public init(type: Int8, data: [UInt8]) {
            self.type = type
            self.data = data
        }
    }
}"><pre><span class="pl-k">public</span> <span class="pl-k">enum</span> <span class="pl-en">MessagePack</span> {
    <span class="pl-k">case</span> <span class="pl-c1">`nil`</span>
    <span class="pl-k">case</span> <span class="pl-c1">int</span>(<span class="pl-c1">Int</span>)
    <span class="pl-k">case</span> <span class="pl-c1">uint</span>(<span class="pl-c1">UInt</span>)
    <span class="pl-k">case</span> <span class="pl-c1">bool</span>(<span class="pl-c1">Bool</span>)
    <span class="pl-k">case</span> <span class="pl-c1">float</span>(<span class="pl-c1">Float</span>)
    <span class="pl-k">case</span> <span class="pl-c1">double</span>(<span class="pl-c1">Double</span>)
    <span class="pl-k">case</span> <span class="pl-c1">string</span>(<span class="pl-c1">String</span>)
    <span class="pl-k">case</span> <span class="pl-c1">binary</span>([<span class="pl-c1">UInt8</span>])
    <span class="pl-k">case</span> <span class="pl-c1">array</span>([MessagePack])
    <span class="pl-k">case</span> <span class="pl-c1">map</span>([MessagePack : MessagePack])
    <span class="pl-k">case</span> <span class="pl-c1">extended</span>(Extended)

    <span class="pl-k">public</span> <span class="pl-k">struct</span> <span class="pl-en">Extended</span> {
        <span class="pl-k">public</span> <span class="pl-k">let</span> type: <span class="pl-c1">Int8</span>
        <span class="pl-k">public</span> <span class="pl-k">let</span> data: [<span class="pl-c1">UInt8</span>]
        <span class="pl-k">public</span> <span class="pl-k">init</span>(<span class="pl-smi"><span class="pl-en">type</span></span>: <span class="pl-c1">Int8</span>, <span class="pl-smi"><span class="pl-en">data</span></span>: [<span class="pl-c1">UInt8</span>]) {
            <span class="pl-c1">self</span>.<span class="pl-smi">type</span> <span class="pl-k">=</span> type
            <span class="pl-c1">self</span>.<span class="pl-smi">data</span> <span class="pl-k">=</span> data
        }
    }
}</pre></div>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<p dir="auto">You can find this code and more in <a href="https://github.com/tris-foundation/examples">examples</a>.</p>
<h7 dir="auto">
<a id="user-content-convenience-api" class="anchor" aria-hidden="true" href="#convenience-api"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Convenience API</h7>
<div class="highlight highlight-source-swift notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='let hey = MessagePack("hey there!")
let bytes = MessagePack.encode(hey)
let original = String(try MessagePack.decode(bytes: bytes))'><pre><span class="pl-k">let</span> hey <span class="pl-k">=</span> <span class="pl-c1">MessagePack</span>(<span class="pl-s"><span class="pl-pds">"</span>hey there!<span class="pl-pds">"</span></span>)
<span class="pl-k">let</span> bytes <span class="pl-k">=</span> MessagePack.<span class="pl-c1">encode</span>(hey)
<span class="pl-k">let</span> original <span class="pl-k">=</span> <span class="pl-c1">String</span>(<span class="pl-k">try</span> MessagePack.<span class="pl-c1">decode</span>(<span class="pl-c1">bytes</span>: bytes))</pre></div>
<h7 dir="auto">
<a id="user-content-performance-optimized" class="anchor" aria-hidden="true" href="#performance-optimized"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Performance optimized</h7>
<div class="highlight highlight-source-swift notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='var encoder = Encoder()
encoder.encode(.string("one"))
encoder.encode(.int(2))
encoder.encode(.double(3.0))
let encoded = encoder.bytes
// be careful, we use raw pointer here
var decoder = Decoder(bytes: encoded, count: encoded.count)
// throws on invalid data
let value = try decoder.decode()
// reuse decoder
decoder.rewind()
// you can avoid extra MessagePack object 
// if you sure about the structure
// throws on wrong type
let string = try decoder.decode(String.self)
let int = try decoder.decode(UInt8.self)
let double = try decoder.decode(Double.self)
print("decoded manually: \(string), \(int), \(double)")'><pre><span class="pl-k">var</span> encoder <span class="pl-k">=</span> <span class="pl-c1">Encoder</span>()
encoder.<span class="pl-c1">encode</span>(.<span class="pl-c1">string</span>(<span class="pl-s"><span class="pl-pds">"</span>one<span class="pl-pds">"</span></span>))
encoder.<span class="pl-c1">encode</span>(.<span class="pl-c1">int</span>(<span class="pl-c1">2</span>))
encoder.<span class="pl-c1">encode</span>(.<span class="pl-c1">double</span>(<span class="pl-c1">3.0</span>))
<span class="pl-k">let</span> encoded <span class="pl-k">=</span> encoder.<span class="pl-smi">bytes</span>
<span class="pl-c"><span class="pl-c">//</span> be careful, we use raw pointer here</span>
<span class="pl-c"></span><span class="pl-k">var</span> decoder <span class="pl-k">=</span> <span class="pl-c1">Decoder</span>(<span class="pl-c1">bytes</span>: encoded, <span class="pl-c1">count</span>: encoded.<span class="pl-c1">count</span>)
<span class="pl-c"><span class="pl-c">//</span> throws on invalid data</span>
<span class="pl-c"></span><span class="pl-k">let</span> value <span class="pl-k">=</span> <span class="pl-k">try</span> decoder.<span class="pl-c1">decode</span>()
<span class="pl-c"><span class="pl-c">//</span> reuse decoder</span>
<span class="pl-c"></span>decoder.<span class="pl-c1">rewind</span>()
<span class="pl-c"><span class="pl-c">//</span> you can avoid extra MessagePack object </span>
<span class="pl-c"><span class="pl-c">//</span> if you sure about the structure</span>
<span class="pl-c"><span class="pl-c">//</span> throws on wrong type</span>
<span class="pl-c"></span><span class="pl-k">let</span> string <span class="pl-k">=</span> <span class="pl-k">try</span> decoder.<span class="pl-c1">decode</span>(<span class="pl-c1">String</span>.<span class="pl-k">self</span>)
<span class="pl-k">let</span> int <span class="pl-k">=</span> <span class="pl-k">try</span> decoder.<span class="pl-c1">decode</span>(<span class="pl-c1">UInt8</span>.<span class="pl-k">self</span>)
<span class="pl-k">let</span> double <span class="pl-k">=</span> <span class="pl-k">try</span> decoder.<span class="pl-c1">decode</span>(<span class="pl-c1">Double</span>.<span class="pl-k">self</span>)
<span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>decoded manually: <span class="pl-pse">\(</span><span class="pl-s1">string</span><span class="pl-pse"><span class="pl-s1">)</span></span>, <span class="pl-pse">\(</span><span class="pl-s1">int</span><span class="pl-pse"><span class="pl-s1">)</span></span>, <span class="pl-pse">\(</span><span class="pl-s1">double</span><span class="pl-pse"><span class="pl-s1">)</span></span><span class="pl-pds">"</span></span>)</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-hirotakan-MessagePacker" class="qs"><h4><a href="https://github.com/hirotakan/MessagePacker" target="_blank">hirotakan/MessagePacker <span class="qs-url">https://github.com/hirotakan/MessagePacker</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepacker" class="anchor" aria-hidden="true" href="#messagepacker"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePacker</h5>
<p dir="auto"><a href="https://travis-ci.org/hirotakan/MessagePacker" rel="nofollow"><img src="https://camo.githubusercontent.com/e4f41de177dbeb83e312eb4b32ab6167f8a0478c0d27bba71b9db1db060ea08f/68747470733a2f2f7472617669732d63692e6f72672f6869726f74616b616e2f4d6573736167655061636b65722e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/hirotakan/MessagePacker.svg?branch=master" style="max-width: 100%;"></a>
<a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/4a5cbe46b631808dd14851f51d643db7d6a1fe3632430de0883773f86f8a7b08/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f53776966742d352e302d6f72616e67652e737667"><img src="https://camo.githubusercontent.com/4a5cbe46b631808dd14851f51d643db7d6a1fe3632430de0883773f86f8a7b08/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f53776966742d352e302d6f72616e67652e737667" alt="Swift 5.0" data-canonical-src="https://img.shields.io/badge/Swift-5.0-orange.svg" style="max-width: 100%;"></a>
<a href="http://doge.mit-license.org" rel="nofollow"><img src="https://camo.githubusercontent.com/9d534025a00df1a537f447fa32ef08260206a183cbd6694f91d98c8063f78852/68747470733a2f2f696d672e736869656c64732e696f2f3a6c6963656e73652d6d69742d626c75652e737667" alt="License" data-canonical-src="https://img.shields.io/:license-mit-blue.svg" style="max-width: 100%;"></a>
<a href="https://github.com/Carthage/Carthage"><img src="https://camo.githubusercontent.com/c8961b92aa4c1cece705532f044860ab81846426578305a5e8d83c0f357de8c2/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f43617274686167652d636f6d70617469626c652d3442433531442e7376673f7374796c653d666c6174" alt="Carthage compatible" data-canonical-src="https://img.shields.io/badge/Carthage-compatible-4BC51D.svg?style=flat" style="max-width: 100%;"></a>
<a href="http://cocoadocs.org/docsets/MessagePacker" rel="nofollow"><img src="https://camo.githubusercontent.com/61df2be39f4cd8ee615a3fe1897e281c29fa6542487ce5ad3ac9ca4b9002c6a9/68747470733a2f2f696d672e736869656c64732e696f2f636f636f61706f64732f762f4d6573736167655061636b65722e737667" alt="Cocoapods" data-canonical-src="https://img.shields.io/cocoapods/v/MessagePacker.svg" style="max-width: 100%;"></a>
<a href="https://github.com/apple/swift-package-manager"><img src="https://camo.githubusercontent.com/1e698b6bea94a8873206501556f1e2461699a58855930dd214b41c8fa6df7bd4/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f5377696674504d2d636f6d70617469626c652d627269676874677265656e2e737667" alt="SwiftPM" data-canonical-src="https://img.shields.io/badge/SwiftPM-compatible-brightgreen.svg" style="max-width: 100%;"></a>
<a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/472d32a404054370a61a8f5187a21a09e5b02923cda6291f32bcf2b4f1e12ffa/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f706c6174666f726d732d694f532532302537432532306d61634f5325323025374325323074764f5325323025374325323077617463684f532d6c69676874677265792e737667"><img src="https://camo.githubusercontent.com/472d32a404054370a61a8f5187a21a09e5b02923cda6291f32bcf2b4f1e12ffa/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f706c6174666f726d732d694f532532302537432532306d61634f5325323025374325323074764f5325323025374325323077617463684f532d6c69676874677265792e737667" alt="Platforms" data-canonical-src="https://img.shields.io/badge/platforms-iOS%20%7C%20macOS%20%7C%20tvOS%20%7C%20watchOS-lightgrey.svg" style="max-width: 100%;"></a></p>
<p dir="auto"><strong>MessagePacker</strong> is a <a href="http://msgpack.org/" rel="nofollow">MessagePack</a> encoder &amp; decoder for Swift and supports <a href="https://developer.apple.com/documentation/swift/codable" rel="nofollow">Codable</a>.</p>
<ul dir="auto">
<li>Message Pack specification: <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">https://github.com/msgpack/msgpack/blob/master/spec.md</a>
</li>
</ul>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<div class="highlight highlight-source-swift notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import MessagePacker

struct Coordinate: Codable {
    var latitude: Double
    var longitude: Double
}

struct Landmark: Codable {
    var name: String
    var foundingYear: Int
    var location: Coordinate
}

let input = Landmark(
    name: "Mojave Desert",
    foundingYear: 0,
    location: Coordinate(
        latitude: 35.0110079,
        longitude: -115.4821313
    )
)

let data = try! MessagePackEncoder().encode(input)
let landmark = try! MessagePackDecoder().decode(Landmark.self, from: data)

print([UInt8](data))
print(landmark)

// [131, 164, 110, 97, 109, 101, 173, 77, 111, 106,
//  97, 118, 101, 32, 68, 101, 115, 101, 114, 116,
//  172, 102, 111, 117, 110, 100, 105, 110, 103, 89,
//  101, 97, 114, 0, 168, 108, 111, 99, 97, 116,
//  105, 111, 110, 130, 168, 108, 97, 116, 105, 116,
//  117, 100, 101, 203, 64, 65, 129, 104, 180, 245,
//  63, 179, 169, 108, 111, 110, 103, 105, 116, 117,
//  100, 101, 203, 192, 92, 222, 219, 61, 61, 120, 49]

// Landmark(
//     name: "Mojave Desert",
//     foundingYear: 0,
//     location: MessagePackerTests.Coordinate(
//         latitude: 35.0110079,
//         longitude: -115.4821313
//     )
// )
'><pre><span class="pl-k">import</span> <span class="pl-en">MessagePacker</span>

<span class="pl-k">struct</span> <span class="pl-en">Coordinate</span>: <span class="pl-e">Codable </span>{
    <span class="pl-k">var</span> latitude: <span class="pl-c1">Double</span>
    <span class="pl-k">var</span> longitude: <span class="pl-c1">Double</span>
}

<span class="pl-k">struct</span> <span class="pl-en">Landmark</span>: <span class="pl-e">Codable </span>{
    <span class="pl-k">var</span> name: <span class="pl-c1">String</span>
    <span class="pl-k">var</span> foundingYear: <span class="pl-c1">Int</span>
    <span class="pl-k">var</span> location: Coordinate
}

<span class="pl-k">let</span> input <span class="pl-k">=</span> <span class="pl-c1">Landmark</span>(
    <span class="pl-c1">name</span>: <span class="pl-s"><span class="pl-pds">"</span>Mojave Desert<span class="pl-pds">"</span></span>,
    <span class="pl-c1">foundingYear</span>: <span class="pl-c1">0</span>,
    <span class="pl-c1">location</span>: <span class="pl-c1">Coordinate</span>(
        <span class="pl-c1">latitude</span>: <span class="pl-c1">35.0110079</span>,
        <span class="pl-c1">longitude</span>: <span class="pl-c1">-115.4821313</span>
    )
)

<span class="pl-k">let</span> data <span class="pl-k">=</span> <span class="pl-k">try</span><span class="pl-k">!</span> <span class="pl-c1">MessagePackEncoder</span>().<span class="pl-c1">encode</span>(input)
<span class="pl-k">let</span> landmark <span class="pl-k">=</span> <span class="pl-k">try</span><span class="pl-k">!</span> <span class="pl-c1">MessagePackDecoder</span>().<span class="pl-c1">decode</span>(Landmark.<span class="pl-k">self</span>, <span class="pl-c1">from</span>: data)

<span class="pl-c1">print</span>([<span class="pl-c1">UInt8</span>](data))
<span class="pl-c1">print</span>(landmark)

<span class="pl-c"><span class="pl-c">//</span> [131, 164, 110, 97, 109, 101, 173, 77, 111, 106,</span>
<span class="pl-c"><span class="pl-c">//</span>  97, 118, 101, 32, 68, 101, 115, 101, 114, 116,</span>
<span class="pl-c"><span class="pl-c">//</span>  172, 102, 111, 117, 110, 100, 105, 110, 103, 89,</span>
<span class="pl-c"><span class="pl-c">//</span>  101, 97, 114, 0, 168, 108, 111, 99, 97, 116,</span>
<span class="pl-c"><span class="pl-c">//</span>  105, 111, 110, 130, 168, 108, 97, 116, 105, 116,</span>
<span class="pl-c"><span class="pl-c">//</span>  117, 100, 101, 203, 64, 65, 129, 104, 180, 245,</span>
<span class="pl-c"><span class="pl-c">//</span>  63, 179, 169, 108, 111, 110, 103, 105, 116, 117,</span>
<span class="pl-c"><span class="pl-c">//</span>  100, 101, 203, 192, 92, 222, 219, 61, 61, 120, 49]</span>
<span class="pl-c"></span>
<span class="pl-c"><span class="pl-c">//</span> Landmark(</span>
<span class="pl-c"><span class="pl-c">//</span>     name: "Mojave Desert",</span>
<span class="pl-c"><span class="pl-c">//</span>     foundingYear: 0,</span>
<span class="pl-c"><span class="pl-c">//</span>     location: MessagePackerTests.Coordinate(</span>
<span class="pl-c"><span class="pl-c">//</span>         latitude: 35.0110079,</span>
<span class="pl-c"><span class="pl-c">//</span>         longitude: -115.4821313</span>
<span class="pl-c"><span class="pl-c">//</span>     )</span>
<span class="pl-c"><span class="pl-c">//</span> )</span>
<span class="pl-c"></span></pre></div>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<h7 dir="auto">
<a id="user-content-carthage" class="anchor" aria-hidden="true" href="#carthage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Carthage</h7>
<p dir="auto">Add the following to your Cartfile:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='github "hirotakan/MessagePacker"'><pre lang="terminal" class="notranslate"><code>github "hirotakan/MessagePacker"
</code></pre></div>
<h7 dir="auto">
<a id="user-content-cocoapods" class="anchor" aria-hidden="true" href="#cocoapods"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>CocoaPods</h7>
<p dir="auto">Add the following to your Podfile:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="pod 'MessagePacker'"><pre lang="terminal" class="notranslate"><code>pod 'MessagePacker'
</code></pre></div>
<h7 dir="auto">
<a id="user-content-swiftpm" class="anchor" aria-hidden="true" href="#swiftpm"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>SwiftPM</h7>
<p dir="auto">Add MessagePacker as a dependency:</p>
<div class="highlight highlight-source-swift notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import PackageDescription

let package = Package(
    name: "YourApp",
    dependencies: [
        .Package(url: "https://github.com/hirotakan/MessagePacker.git", majorVersion: 0),
    ]
)'><pre><span class="pl-k">import</span> <span class="pl-en">PackageDescription</span>

<span class="pl-k">let</span> package <span class="pl-k">=</span> <span class="pl-c1">Package</span>(
    <span class="pl-c1">name</span>: <span class="pl-s"><span class="pl-pds">"</span>YourApp<span class="pl-pds">"</span></span>,
    <span class="pl-c1">dependencies</span>: [
        .<span class="pl-c1">Package</span>(<span class="pl-c1">url</span>: <span class="pl-s"><span class="pl-pds">"</span>https://github.com/hirotakan/MessagePacker.git<span class="pl-pds">"</span></span>, <span class="pl-c1">majorVersion</span>: <span class="pl-c1">0</span>),
    ]
)</pre></div>
<h6 dir="auto">
<a id="user-content-requirements" class="anchor" aria-hidden="true" href="#requirements"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Requirements</h6>
<ul dir="auto">
<li>Swift 5.0 or later</li>
<li>iOS 8.0 or later</li>
<li>macOS 10.10 or later</li>
<li>tvOS 9.0 or later</li>
<li>watchOS 2.0 or later</li>
</ul>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<p dir="auto">MessagePacker is released under the MIT license. See <a href="https://github.com/hirotakan/MessagePacker/blob/master/LICENSE">LICENSE</a> for details.</p>
</article>
  </div>
        </div>
        
        <div id="qs-swiftstack-messagepack" class="qs"><h4><a href="https://github.com/swiftstack/messagepack" target="_blank">swiftstack/messagepack <span class="qs-url">https://github.com/swiftstack/messagepack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-messagepack" class="anchor" aria-hidden="true" href="#messagepack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MessagePack</h5>
<p dir="auto"><strong>MessagePack</strong> is an efficient binary serialization format. It lets you exchange data among multiple languages like JSON. But it's faster and smaller. Small integers are encoded into a single byte, and typical short strings require only one extra byte in addition to the strings themselves.</p>
<h6 dir="auto">
<a id="user-content-packageswift" class="anchor" aria-hidden="true" href="#packageswift"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Package.swift</h6>
<div class="highlight highlight-source-swift notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='.package(url: "https://github.com/swiftstack/messagepack.git", .branch("dev"))'><pre>.<span class="pl-c1">package</span>(<span class="pl-c1">url</span>: <span class="pl-s"><span class="pl-pds">"</span>https://github.com/swiftstack/messagepack.git<span class="pl-pds">"</span></span>, .<span class="pl-c1">branch</span>(<span class="pl-s"><span class="pl-pds">"</span>dev<span class="pl-pds">"</span></span>))</pre></div>
<h6 dir="auto">
<a id="user-content-memo" class="anchor" aria-hidden="true" href="#memo"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Memo</h6>
<div class="highlight highlight-source-swift notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="public enum MessagePack {
    case `nil`
    case int(Int)
    case uint(UInt)
    case bool(Bool)
    case float(Float)
    case double(Double)
    case string(String)
    case binary([UInt8])
    case array([MessagePack])
    case map([MessagePack : MessagePack])
    case extended(Extended)

    public struct Extended {
        public let type: Int8
        public let data: [UInt8]
        public init(type: Int8, data: [UInt8]) {
            self.type = type
            self.data = data
        }
    }
}"><pre><span class="pl-k">public</span> <span class="pl-k">enum</span> <span class="pl-en">MessagePack</span> {
    <span class="pl-k">case</span> <span class="pl-c1">`nil`</span>
    <span class="pl-k">case</span> <span class="pl-c1">int</span>(<span class="pl-c1">Int</span>)
    <span class="pl-k">case</span> <span class="pl-c1">uint</span>(<span class="pl-c1">UInt</span>)
    <span class="pl-k">case</span> <span class="pl-c1">bool</span>(<span class="pl-c1">Bool</span>)
    <span class="pl-k">case</span> <span class="pl-c1">float</span>(<span class="pl-c1">Float</span>)
    <span class="pl-k">case</span> <span class="pl-c1">double</span>(<span class="pl-c1">Double</span>)
    <span class="pl-k">case</span> <span class="pl-c1">string</span>(<span class="pl-c1">String</span>)
    <span class="pl-k">case</span> <span class="pl-c1">binary</span>([<span class="pl-c1">UInt8</span>])
    <span class="pl-k">case</span> <span class="pl-c1">array</span>([MessagePack])
    <span class="pl-k">case</span> <span class="pl-c1">map</span>([MessagePack : MessagePack])
    <span class="pl-k">case</span> <span class="pl-c1">extended</span>(Extended)

    <span class="pl-k">public</span> <span class="pl-k">struct</span> <span class="pl-en">Extended</span> {
        <span class="pl-k">public</span> <span class="pl-k">let</span> type: <span class="pl-c1">Int8</span>
        <span class="pl-k">public</span> <span class="pl-k">let</span> data: [<span class="pl-c1">UInt8</span>]
        <span class="pl-k">public</span> <span class="pl-k">init</span>(<span class="pl-smi"><span class="pl-en">type</span></span>: <span class="pl-c1">Int8</span>, <span class="pl-smi"><span class="pl-en">data</span></span>: [<span class="pl-c1">UInt8</span>]) {
            <span class="pl-c1">self</span>.<span class="pl-smi">type</span> <span class="pl-k">=</span> type
            <span class="pl-c1">self</span>.<span class="pl-smi">data</span> <span class="pl-k">=</span> data
        }
    }
}</pre></div>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<p dir="auto">You can find this code and more in <a href="https://github.com/swiftstack/examples">examples</a>.</p>
<h7 dir="auto">
<a id="user-content-basic-api" class="anchor" aria-hidden="true" href="#basic-api"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Basic API</h7>
<div class="highlight highlight-source-swift notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='let hey = MessagePack("hey there!")
let bytes = try MessagePack.encode(hey)
let original = String(try MessagePack.decode(bytes: bytes))'><pre><span class="pl-k">let</span> hey <span class="pl-k">=</span> <span class="pl-c1">MessagePack</span>(<span class="pl-s"><span class="pl-pds">"</span>hey there!<span class="pl-pds">"</span></span>)
<span class="pl-k">let</span> bytes <span class="pl-k">=</span> <span class="pl-k">try</span> MessagePack.<span class="pl-c1">encode</span>(hey)
<span class="pl-k">let</span> original <span class="pl-k">=</span> <span class="pl-c1">String</span>(<span class="pl-k">try</span> MessagePack.<span class="pl-c1">decode</span>(<span class="pl-c1">bytes</span>: bytes))</pre></div>
<h7 dir="auto">
<a id="user-content-stream-api" class="anchor" aria-hidden="true" href="#stream-api"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Stream API</h7>
<div class="highlight highlight-source-swift notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='let hey = MessagePack("hey there!")
let stream = BufferedStream(stream: NetworkStream(socket: client))
try MessagePack.encode(hey, to: stream)
try stream.flush()
let original = String(try MessagePack.decode(from: stream))'><pre><span class="pl-k">let</span> hey <span class="pl-k">=</span> <span class="pl-c1">MessagePack</span>(<span class="pl-s"><span class="pl-pds">"</span>hey there!<span class="pl-pds">"</span></span>)
<span class="pl-k">let</span> stream <span class="pl-k">=</span> <span class="pl-c1">BufferedStream</span>(<span class="pl-c1">stream</span>: <span class="pl-c1">NetworkStream</span>(<span class="pl-c1">socket</span>: client))
<span class="pl-k">try</span> MessagePack.<span class="pl-c1">encode</span>(hey, <span class="pl-c1">to</span>: stream)
<span class="pl-k">try</span> stream.<span class="pl-c1">flush</span>()
<span class="pl-k">let</span> original <span class="pl-k">=</span> <span class="pl-c1">String</span>(<span class="pl-k">try</span> MessagePack.<span class="pl-c1">decode</span>(<span class="pl-c1">from</span>: stream))</pre></div>
<h7 dir="auto">
<a id="user-content-performance-optimized" class="anchor" aria-hidden="true" href="#performance-optimized"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Performance optimized</h7>
<div class="highlight highlight-source-swift notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='let output = OutputByteStream()
var encoder = MessagePackWriter(output)
try encoder.encode("one")
try encoder.encode(2)
try encoder.encode(3.0)
let encoded = output.bytes

var decoder = MessagePackReader(InputByteStream(encoded))
let string = try decoder.decode(String.self)
let int = try decoder.decode(UInt8.self)
let double = try decoder.decode(Double.self)
print("decoded manually: \(string), \(int), \(double)")'><pre><span class="pl-k">let</span> output <span class="pl-k">=</span> <span class="pl-c1">OutputByteStream</span>()
<span class="pl-k">var</span> encoder <span class="pl-k">=</span> <span class="pl-c1">MessagePackWriter</span>(output)
<span class="pl-k">try</span> encoder.<span class="pl-c1">encode</span>(<span class="pl-s"><span class="pl-pds">"</span>one<span class="pl-pds">"</span></span>)
<span class="pl-k">try</span> encoder.<span class="pl-c1">encode</span>(<span class="pl-c1">2</span>)
<span class="pl-k">try</span> encoder.<span class="pl-c1">encode</span>(<span class="pl-c1">3.0</span>)
<span class="pl-k">let</span> encoded <span class="pl-k">=</span> output.<span class="pl-smi">bytes</span>

<span class="pl-k">var</span> decoder <span class="pl-k">=</span> <span class="pl-c1">MessagePackReader</span>(<span class="pl-c1">InputByteStream</span>(encoded))
<span class="pl-k">let</span> string <span class="pl-k">=</span> <span class="pl-k">try</span> decoder.<span class="pl-c1">decode</span>(<span class="pl-c1">String</span>.<span class="pl-k">self</span>)
<span class="pl-k">let</span> int <span class="pl-k">=</span> <span class="pl-k">try</span> decoder.<span class="pl-c1">decode</span>(<span class="pl-c1">UInt8</span>.<span class="pl-k">self</span>)
<span class="pl-k">let</span> double <span class="pl-k">=</span> <span class="pl-k">try</span> decoder.<span class="pl-c1">decode</span>(<span class="pl-c1">Double</span>.<span class="pl-k">self</span>)
<span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>decoded manually: <span class="pl-pse">\(</span><span class="pl-s1">string</span><span class="pl-pse"><span class="pl-s1">)</span></span>, <span class="pl-pse">\(</span><span class="pl-s1">int</span><span class="pl-pse"><span class="pl-s1">)</span></span>, <span class="pl-pse">\(</span><span class="pl-s1">double</span><span class="pl-pse"><span class="pl-s1">)</span></span><span class="pl-pds">"</span></span>)</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-cherrywoods-swift-msgpack-serialization" class="qs"><h4><a href="https://github.com/cherrywoods/swift-msgpack-serialization" target="_blank">cherrywoods/swift-msgpack-serialization <span class="qs-url">https://github.com/cherrywoods/swift-msgpack-serialization</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-swift-msgpack-serialization" class="anchor" aria-hidden="true" href="#swift-msgpack-serialization"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>swift-msgpack-serialization</h5>
<p dir="auto"><a href="https://github.com/Carthage/Carthage"><img src="https://camo.githubusercontent.com/c8961b92aa4c1cece705532f044860ab81846426578305a5e8d83c0f357de8c2/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f43617274686167652d636f6d70617469626c652d3442433531442e7376673f7374796c653d666c6174" alt="Carthage compatible" data-canonical-src="https://img.shields.io/badge/Carthage-compatible-4BC51D.svg?style=flat" style="max-width: 100%;"></a></p>
<p dir="auto">Another swift serialization library for msgpack with support for the Codable environement.</p>
<p dir="auto">This framework is designed to be (optionaly) compatibel to the msgpack-java library.
See <a href="https://github.com/cherrywoods/swift-msgpack-serialization/blob/master/Compatibility.md">Compatibility.md</a> for more detailed information about this.</p>
<p dir="auto">Please make sure, that the swift model classes and java model classes you use are compatibel to each other, e.g. enums are named equaly (including case).</p>
<p dir="auto">This framework also supplies the possibiliy to encode keys of other types than String (generalContainer function of MsgpackEncoder).</p>
<p dir="auto">swift-msgpack-serialization works with <a href="https://github.com/a2/MessagePack.swift">MessagePack.swift</a>. This means, that you can encode your classes, structs and enums, that conform to Codable to MessagePackValue from MessagePack.swift, do something with this MessagePackValue and then encode it to msgpack using MessagePack.swift. You may of course also decode to MessagePackValue first and then decode a particular MessagePackValue to your own type.</p>
<h6 dir="auto">
<a id="user-content-instalation" class="anchor" aria-hidden="true" href="#instalation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Instalation</h6>
<p dir="auto">Currently, only carthage is supported.</p>
<h6 dir="auto">
<a id="user-content-compatibilty-restrictions" class="anchor" aria-hidden="true" href="#compatibilty-restrictions"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Compatibilty restrictions</h6>
<p dir="auto">Make sure you never call .encode(to:) directly! Instead use the encode method on a keyed, unkeyed or singleValue container or cast the encoder passed to you to MsgpackEncoder and call encodeIntermediate(_) on this encoder. If you do not use this, this framework won't be able to do it's work properly.</p>
</article>
  </div>
        </div>
        
        <div id="qs-samclaus-msgpack-ts" class="qs"><h4><a href="https://msgpack.org/" target="_blank">samclaus/msgpack-ts <span class="qs-url">https://msgpack.org/</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack-ts" class="anchor" aria-hidden="true" href="#msgpack-ts"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack-ts</h5>
<p dir="auto">Fast MessagePack implementation in TypeScript. Designed as a faster, smaller
alternative to <code>msgpack-lite</code>. Both the <code>Encoder</code> and <code>Decoder</code> are quite
configurable, but performance was prioritized with as little branching as
possible.</p>
<p dir="auto"><strong>TODO</strong></p>
<ul dir="auto">
<li>Add Closure-compiled browser distribution</li>
<li>Add thorough tests</li>
<li>Add benchmarks</li>
</ul>
<p dir="auto"><strong>You can optimize further</strong></p>
<p dir="auto">If your MessagePack traffic contains many or large binary buffers, you may
want to fork this repo and alter the <code>takeBinary(length)</code> method of the
<code>Decoder</code> to use <code>this.buffer.subarray</code> in place of <code>this.buffer.slice</code>,
because <code>Uint8Array.slice()</code> creates a copy of the bytes. This library
assumes that your messages will not consist primarily of binary objects
and thus it is undesirable to return subviews of the same buffer being
decoded because they will hold references to the entire buffer that was
decoded, likely keeping it in memory when it is not needed.</p>
<h6 dir="auto">
<a id="user-content-quick-start" class="anchor" aria-hidden="true" href="#quick-start"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Quick Start</h6>
<p dir="auto">For more information, read the <a href="#documentation">docs</a>.</p>
<p dir="auto">Install the library via NPM: <code>npm i --save-dev msgpack-ts</code>.</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='import { encode, decode, Decoder } from "msgpack-ts";

/**
 * Both x and y will be in range [0, 255].
 */
class Coordinate
{
    static encode(coord: Coordinate): Uint8Array
    {
        return new Uint8Array([coord.x, coord.y]);
    }

    static decode(data: Uint8Array): Coordinate
    {
        return new Coordinate(data[0], data[1]);
    }

    static backwardsDecode(data: Uint8Array): Coordinate
    {
        return new Coordinate(data[1], data[0]);
    }

    constructor(
        readonly x: number,
        readonly y: number
    ) {}
}

function main()
{
    const message: SomeInterface = {
        type: "add-user",
        data: {
            firstName: "Jane",
            lastName: "Doe",
            age: 27,
            female: true,
            location: new Coordinate(10, 192),
            username: "janedoe92",
            passwordHash: new Uint8Array(32)
        }
    };

    encode.encoder.registerExt(Coordinate, 0, Coordinate.encode);
    decode.decoder.registerExt(0, Coordinate.decode);

    // encode() uses the encode.encoder instance
    const encoded = encode(message);

    // decode() uses the decode.decoder instance
    const decoded = decode&lt;SomeInterface&gt;(encoded);

    // Create separate instances if you need multiple configurations
    const myDecoder = new Decoder();
    myDecoder.nilValue = undefined;
    myDecoder.allowInvalidUTF8 = true;
    myDecoder.allowUnknownExts = true;
    myDecoder.registerExt(0, Coordinate.backwardsDecode);

    // Both Encoder and Decoder support cloning instances
    const slightlyDifferent = myDecoder.clone();
    slighlyDifferent.nilValue = null;
}'><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">encode</span><span class="pl-kos">,</span> <span class="pl-s1">decode</span><span class="pl-kos">,</span> <span class="pl-smi">Decoder</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"msgpack-ts"</span><span class="pl-kos">;</span>

<span class="pl-c">/**</span>
<span class="pl-c"> * Both x and y will be in range [0, 255].</span>
<span class="pl-c"> */</span>
<span class="pl-k">class</span> <span class="pl-smi">Coordinate</span>
<span class="pl-kos">{</span>
    <span class="pl-k">static</span> <span class="pl-c1">encode</span><span class="pl-kos">(</span><span class="pl-s1">coord</span>: <span class="pl-smi">Coordinate</span><span class="pl-kos">)</span>: <span class="pl-smi">Uint8Array</span><span class="pl-kos"></span>
    <span class="pl-kos">{</span>
        <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-smi">Uint8Array</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-s1">coord</span><span class="pl-kos">.</span><span class="pl-c1">x</span><span class="pl-kos">,</span> <span class="pl-s1">coord</span><span class="pl-kos">.</span><span class="pl-c1">y</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span>

    <span class="pl-en">static</span> <span class="pl-s1">decode</span><span class="pl-kos">(</span><span class="pl-s1">data</span>: <span class="pl-smi">Uint8Array</span><span class="pl-kos">)</span>: <span class="pl-smi">Coordinate</span>
    <span class="pl-kos">{</span>
        <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-smi">Coordinate</span><span class="pl-kos">(</span><span class="pl-s1">data</span><span class="pl-kos">[</span><span class="pl-c1">0</span><span class="pl-kos">]</span><span class="pl-kos">,</span> <span class="pl-s1">data</span><span class="pl-kos">[</span><span class="pl-c1">1</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span>

    <span class="pl-s1">static</span><span class="pl-kos"></span> <span class="pl-en">backwardsDecode</span><span class="pl-kos">(</span><span class="pl-s1">data</span>: <span class="pl-smi">Uint8Array</span><span class="pl-kos">)</span>: <span class="pl-smi">Coordinate</span>
    <span class="pl-kos">{</span>
        <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-smi">Coordinate</span><span class="pl-kos">(</span><span class="pl-s1">data</span><span class="pl-kos">[</span><span class="pl-c1">1</span><span class="pl-kos">]</span><span class="pl-kos">,</span> <span class="pl-s1">data</span><span class="pl-kos">[</span><span class="pl-c1">0</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span>

    <span class="pl-en">constructor</span><span class="pl-kos">(</span>
        <span class="pl-s1">readonly</span> <span class="pl-s1">x</span>: number<span class="pl-kos">,</span>
        <span class="pl-s1">readonly</span> <span class="pl-s1">y</span>: number
    <span class="pl-kos">)</span><span class="pl-kos"></span> <span class="pl-kos">{</span><span class="pl-kos">}</span>
<span class="pl-kos">}</span>

<span class="pl-k">function</span> <span class="pl-en">main</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">{</span>
    <span class="pl-k">const</span> <span class="pl-s1">message</span>: <span class="pl-smi">SomeInterface</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
        <span class="pl-c1">type</span>: <span class="pl-s">"add-user"</span><span class="pl-kos">,</span>
        <span class="pl-c1">data</span>: <span class="pl-kos">{</span>
            <span class="pl-c1">firstName</span>: <span class="pl-s">"Jane"</span><span class="pl-kos">,</span>
            <span class="pl-c1">lastName</span>: <span class="pl-s">"Doe"</span><span class="pl-kos">,</span>
            <span class="pl-c1">age</span>: <span class="pl-c1">27</span><span class="pl-kos">,</span>
            <span class="pl-c1">female</span>: <span class="pl-c1">true</span><span class="pl-kos">,</span>
            <span class="pl-c1">location</span>: <span class="pl-k">new</span> <span class="pl-smi">Coordinate</span><span class="pl-kos">(</span><span class="pl-c1">10</span><span class="pl-kos">,</span> <span class="pl-c1">192</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
            <span class="pl-c1">username</span>: <span class="pl-s">"janedoe92"</span><span class="pl-kos">,</span>
            <span class="pl-c1">passwordHash</span>: <span class="pl-k">new</span> <span class="pl-smi">Uint8Array</span><span class="pl-kos">(</span><span class="pl-c1">32</span><span class="pl-kos">)</span>
        <span class="pl-kos">}</span>
    <span class="pl-kos">}</span><span class="pl-kos">;</span>

    <span class="pl-s1">encode</span><span class="pl-kos">.</span><span class="pl-c1">encoder</span><span class="pl-kos">.</span><span class="pl-en">registerExt</span><span class="pl-kos">(</span><span class="pl-smi">Coordinate</span><span class="pl-kos">,</span> <span class="pl-c1">0</span><span class="pl-kos">,</span> <span class="pl-smi">Coordinate</span><span class="pl-kos">.</span><span class="pl-c1">encode</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-s1">decode</span><span class="pl-kos">.</span><span class="pl-c1">decoder</span><span class="pl-kos">.</span><span class="pl-en">registerExt</span><span class="pl-kos">(</span><span class="pl-c1">0</span><span class="pl-kos">,</span> <span class="pl-smi">Coordinate</span><span class="pl-kos">.</span><span class="pl-c1">decode</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

    <span class="pl-c">// encode() uses the encode.encoder instance</span>
    <span class="pl-k">const</span> <span class="pl-s1">encoded</span> <span class="pl-c1">=</span> <span class="pl-en">encode</span><span class="pl-kos">(</span><span class="pl-s1">message</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

    <span class="pl-c">// decode() uses the decode.decoder instance</span>
    <span class="pl-k">const</span> <span class="pl-s1">decoded</span> <span class="pl-c1">=</span> <span class="pl-en">decode</span><span class="pl-kos">&lt;</span><span class="pl-smi">SomeInterface</span><span class="pl-kos">&gt;</span><span class="pl-kos">(</span><span class="pl-s1">encoded</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

    <span class="pl-c">// Create separate instances if you need multiple configurations</span>
    <span class="pl-k">const</span> <span class="pl-s1">myDecoder</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-smi">Decoder</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-s1">myDecoder</span><span class="pl-kos">.</span><span class="pl-c1">nilValue</span> <span class="pl-c1">=</span> <span class="pl-c1">undefined</span><span class="pl-kos">;</span>
    <span class="pl-s1">myDecoder</span><span class="pl-kos">.</span><span class="pl-c1">allowInvalidUTF8</span> <span class="pl-c1">=</span> <span class="pl-c1">true</span><span class="pl-kos">;</span>
    <span class="pl-s1">myDecoder</span><span class="pl-kos">.</span><span class="pl-c1">allowUnknownExts</span> <span class="pl-c1">=</span> <span class="pl-c1">true</span><span class="pl-kos">;</span>
    <span class="pl-s1">myDecoder</span><span class="pl-kos">.</span><span class="pl-en">registerExt</span><span class="pl-kos">(</span><span class="pl-c1">0</span><span class="pl-kos">,</span> <span class="pl-smi">Coordinate</span><span class="pl-kos">.</span><span class="pl-c1">backwardsDecode</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

    <span class="pl-c">// Both Encoder and Decoder support cloning instances</span>
    <span class="pl-k">const</span> <span class="pl-s1">slightlyDifferent</span> <span class="pl-c1">=</span> <span class="pl-s1">myDecoder</span><span class="pl-kos">.</span><span class="pl-en">clone</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-s1">slighlyDifferent</span><span class="pl-kos">.</span><span class="pl-c1">nilValue</span> <span class="pl-c1">=</span> <span class="pl-c1">null</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span></pre></div>
<h6 dir="auto">
<a id="user-content-documentation" class="anchor" aria-hidden="true" href="#documentation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Documentation</h6>
<h7 dir="auto">
<a id="user-content-class-encoder" class="anchor" aria-hidden="true" href="#class-encoder"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>class Encoder</code>
</h7>
<p dir="auto"><strong>static</strong></p>
<ul dir="auto">
<li>
<p dir="auto"><code>Encoder.global: Encoder</code></p>
<p dir="auto">A global <code>Encoder</code> instance, purely for convenience.</p>
</li>
<li>
<p dir="auto"><code>Encoder.encode(data: any, initBuffSize?: number): Uint8Array</code></p>
<p dir="auto">Convenience function to call <code>Encoder.global.encode()</code>.</p>
</li>
</ul>
<p dir="auto"><strong>constructor</strong></p>
<ul dir="auto">
<li>
<p dir="auto"><code>new Encoder(reserve = 128)</code></p>
<p dir="auto">Create a new <code>Encoder</code> instance. You may pass the number of bytes to
allocate immediately as an encoding buffer, or it will default to <code>128</code>.</p>
</li>
</ul>
<p dir="auto"><strong>instance</strong></p>
<ul dir="auto">
<li>
<p dir="auto"><code>Encoder.encode(data: any, reserve?: number): Uint8Array</code></p>
<p dir="auto">Encode a JavaScript object or primitive to MessagePack format. You may provide a second argument
to ensure that a certain number of bytes is allocated for the encoding buffer before encoding
begins.</p>
</li>
<li>
<p dir="auto"><code>Encoder.registerExt&lt;T&gt;(ctor: new (...args: any[]) =&gt; T, type: number, encoderFn: (data: T) =&gt; Uint8Array)</code></p>
<p dir="auto">Register an encoder for an object class. <code>type</code> MUST be in the range <code>[-128, 127]</code> or a <code>RangeError</code>
will be thrown. Negative types are reserved by the MessagePack spec and SHOULD not be used, unless
this library does not provide an extension added to the spec or the implementation is found to be
inadequate.</p>
<p dir="auto"><strong>Standard Extensions Registered By Default</strong></p>
<ul dir="auto">
<li>
<p dir="auto"><code>-1 (Timestamp)</code></p>
<p dir="auto">JavaScript <code>Date</code> objects will be encoded using the standard <code>Timestamp</code> extension type, unless
overriden.</p>
</li>
</ul>
</li>
<li>
<p dir="auto"><code>Encoder.resize(newSize: number)</code></p>
<p dir="auto">Release the current encoding buffer and allocate a new one of <code>newSize</code> bytes.</p>
</li>
<li>
<p dir="auto"><code>Encoder.clone(): Encoder</code></p>
<p dir="auto">Creates an independent clone of the <code>Encoder</code> with the same
configuration values and registered extensions.</p>
</li>
</ul>
<h7 dir="auto">
<a id="user-content-class-decoder" class="anchor" aria-hidden="true" href="#class-decoder"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>class Decoder</code>
</h7>
<p dir="auto"><strong>static</strong></p>
<ul dir="auto">
<li>
<p dir="auto"><code>Decoder.global: Decoder</code></p>
<p dir="auto">A global <code>Decoder</code> instance, purely for convenience.</p>
</li>
<li>
<p dir="auto"><code>Decoder.decode&lt;T = any&gt;(data: ArrayBuffer | Uint8Array): T</code></p>
<p dir="auto">Convenience function to call <code>Decoder.global.decode()</code>.</p>
</li>
</ul>
<p dir="auto"><strong>constructor</strong></p>
<ul dir="auto">
<li>
<p dir="auto"><code>new Decoder()</code></p>
<p dir="auto">Creates a new <code>Decoder</code> instance.</p>
</li>
</ul>
<p dir="auto"><strong>instance</strong></p>
<ul dir="auto">
<li>
<p dir="auto"><code>Decoder.nilValue: null | undefined = null</code></p>
<p dir="auto">Value the MessagePack <code>nil</code> constant should be interpreted as.</p>
</li>
<li>
<p dir="auto"><code>Decoder.allowInvalidUTF8 = false</code></p>
<p dir="auto">If false, an error will be thrown if a MessagePack <code>str</code> type is
encountered and the data is not valid UTF-8. If true, the <code>str</code>
data will be passed through opaquely as a <code>Uint8Array</code>.</p>
</li>
<li>
<p dir="auto"><code>Decoder.allowUnknownExts = false</code></p>
<p dir="auto">If false, a <code>RangeError</code> will be thrown whenever an unrecognized extension type is encountered. If
true, the extension data will be passed through opaquely as a
<a href="#interface-decoderunknownextseq"><code>Decoder.UnknownExt</code></a>.</p>
</li>
<li>
<p dir="auto"><code>Decoder.mapBehavior = Decoder.MapBehavior.PreferJSON</code></p>
<p dir="auto">Determines how MessagePack <code>map</code> values are decoded. See
<a href="#enum-decodermapbehavior"><code>Decoder.MapBehavior</code></a> for options.</p>
</li>
<li>
<p dir="auto"><code>Decoder.decode&lt;T = any&gt;(data: ArrayBuffer | Uint8Array): T</code></p>
<p dir="auto">Decode MessagePack data into a JS object or primitive.</p>
</li>
<li>
<p dir="auto"><code>Decoder.clone(): Decoder</code></p>
<p dir="auto">Creates an independent clone of the <code>Decoder</code> with the same
configuration values and registered extensions.</p>
</li>
</ul>
<h7 dir="auto">
<a id="user-content-interface-decoderunknownextseq" class="anchor" aria-hidden="true" href="#interface-decoderunknownextseq"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>interface Decoder.UnknownExtSeq</code>
</h7>
<p dir="auto">Opaque tuple of an extension type identifier and the raw data associated with it.</p>
<ul dir="auto">
<li>
<p dir="auto"><code>type: number</code></p>
<p dir="auto">The extension type which did not have a registered decoder.</p>
</li>
<li>
<p dir="auto"><code>data: Uint8Array</code></p>
<p dir="auto">The opaque data.</p>
</li>
</ul>
<h7 dir="auto">
<a id="user-content-enum-decodermapbehavior" class="anchor" aria-hidden="true" href="#enum-decodermapbehavior"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>enum Decoder.MapBehavior</code>
</h7>
<p dir="auto">Determines <code>Decoder</code> behavior when a MessagePack <code>map</code> is encountered.</p>
<ul dir="auto">
<li>
<p dir="auto"><code>PreferJSON = 0</code></p>
<p dir="auto">Maps will be decoded as native JS objects, unless a key is decoded
whose JS type evaluates to <code>object</code>, in which case all decoded keys
will be abandoned and the map will be decoded from scratch into an
ES6 Map which supports arbitrary key types.</p>
</li>
<li>
<p dir="auto"><code>AlwaysJSON = 1</code></p>
<p dir="auto">Maps will be always be decoded as native JS objects. This means all
decoded keys will be coerced to strings, which is almost certainly
undesirable if decoding maps with objects or arrays as keys.</p>
</li>
<li>
<p dir="auto"><code>AlwaysES6Map = 2</code></p>
<p dir="auto">Maps will always be decoded as ES6 Map objects.</p>
</li>
</ul>
</article>
  </div>
        </div>
        
        <div id="qs-ludocode-msgpack-tools" class="qs"><h4><a href="https://github.com/ludocode/msgpack-tools" target="_blank">ludocode/msgpack-tools <span class="qs-url">https://github.com/ludocode/msgpack-tools</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h6 dir="auto">
<a id="user-content-introduction" class="anchor" aria-hidden="true" href="#introduction"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Introduction</h6>
<p dir="auto"><strong>msgpack-tools</strong> contains simple command-line utilities for converting from <a href="http://msgpack.org/" rel="nofollow">MessagePack</a> to <a href="http://json.org/" rel="nofollow">JSON</a> and vice-versa. They support options for lax parsing, lossy conversions, pretty-printing, and base64 encoding.</p>
<ul dir="auto">
<li>
<code>msgpack2json</code> -- Convert MessagePack to JSON</li>
<li>
<code>json2msgpack</code> -- Convert JSON to MessagePack</li>
</ul>
<p dir="auto">They can be used for dumping MessagePack from a file or web API to a human-readable format, or for converting hand-written or generated JSON to MessagePack. The lax parsing mode supports comments and trailing commas in JSON, making it possible to hand-write your app or game data in JSON and convert it at build-time to MessagePack.</p>
<h6 dir="auto">
<a id="user-content-build-status" class="anchor" aria-hidden="true" href="#build-status"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Build Status</h6>

<table>
<thead>
<tr>
<th align="center">Branch</th>
<th align="center"><a href="https://travis-ci.org/" rel="nofollow">Travis-CI</a></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><em>master</em></td>
<td align="center"><a href="https://travis-ci.org/ludocode/msgpack-tools/branches" rel="nofollow"><img src="https://camo.githubusercontent.com/f5c8b6fa1db80eb9f5ccda05b00f4fdfc59834722905d08f6593145623f6e9df/68747470733a2f2f7472617669732d63692e6f72672f6c75646f636f64652f6d73677061636b2d746f6f6c732e7376673f6272616e63683d6d6173746572" alt="Build Status" align="top" data-canonical-src="https://travis-ci.org/ludocode/msgpack-tools.svg?branch=master" style="max-width: 100%;"></a></td>
</tr>
<tr>
<td align="center"><em>develop</em></td>
<td align="center"><a href="https://travis-ci.org/ludocode/msgpack-tools/branches" rel="nofollow"><img src="https://camo.githubusercontent.com/b1cc7b573c1fa69e757cb59c81982be5b9dbf05b03b773695e818798603446df/68747470733a2f2f7472617669732d63692e6f72672f6c75646f636f64652f6d73677061636b2d746f6f6c732e7376673f6272616e63683d646576656c6f70" alt="Build Status" align="top" data-canonical-src="https://travis-ci.org/ludocode/msgpack-tools.svg?branch=develop" style="max-width: 100%;"></a></td>
</tr>
</tbody>
</table>
<h6 dir="auto">
<a id="user-content-examples" class="anchor" aria-hidden="true" href="#examples"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Examples</h6>
<p dir="auto">To view a MessagePack file in a human-readable format for debugging purposes:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="msgpack2json -di file.mp"><pre>msgpack2json -di file.mp</pre></div>
<p dir="auto">To convert a hand-written JSON file to a MessagePack file, ignoring comments and trailing commas, and allowing embedded base64 with a <code>base64:</code> prefix:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="json2msgpack -bli file.json -o file.mp"><pre>json2msgpack -bli file.json -o file.mp</pre></div>
<p dir="auto">To fetch MessagePack from a web API and view it in a human-readable format:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="curl 'http://example/api/url' | msgpack2json -d"><pre>curl <span class="pl-s"><span class="pl-pds">'</span>http://example/api/url<span class="pl-pds">'</span></span> <span class="pl-k">|</span> msgpack2json -d</pre></div>
<p dir="auto">To view the MessagePack-equivalent encoding of a JSON string:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ echo '{&quot;compact&quot;: true, &quot;schema&quot;: 0}' | json2msgpack | hexdump -C
00000000  82 a7 63 6f 6d 70 61 63  74 c3 a6 73 63 68 65 6d  |..compact..schem|
00000010  61 00                                             |a.|
00000012"><pre>$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>{"compact": true, "schema": 0}<span class="pl-pds">'</span></span> <span class="pl-k">|</span> json2msgpack <span class="pl-k">|</span> hexdump -C
00000000  82 a7 63 6f 6d 70 61 63  74 c3 a6 73 63 68 65 6d  <span class="pl-k">|</span>..compact..schem<span class="pl-k">|</span>
00000010  61 00                                             <span class="pl-k">|</span>a.<span class="pl-k">|</span>
00000012</pre></div>
<p dir="auto">To test a <a href="https://github.com/msgpack-rpc/msgpack-rpc">MessagePack-RPC</a> server via netcat:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ echo '[0,0,&quot;sum&quot;,[1,2]]' | json2msgpack | nc -q1 localhost 18800 | msgpack2json -d
[
    1,
    0,
    null,
    3
]"><pre>$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>[0,0,"sum",[1,2]]<span class="pl-pds">'</span></span> <span class="pl-k">|</span> json2msgpack <span class="pl-k">|</span> nc -q1 localhost 18800 <span class="pl-k">|</span> msgpack2json -d
[
    1,
    0,
    null,
    3
]</pre></div>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<ul dir="auto">
<li>
<p dir="auto"><strong>Arch Linux</strong>: <a href="https://aur.archlinux.org/packages/msgpack-tools/" rel="nofollow">msgpack-tools in the AUR</a>, e.g. <code>yaourt -S msgpack-tools</code></p>
</li>
<li>
<p dir="auto"><strong>Mac OS X</strong> (<a href="http://brew.sh/" rel="nofollow">Homebrew</a>): <code>brew install https://ludocode.github.io/msgpack-tools.rb</code></p>
</li>
<li>
<p dir="auto"><strong>Debian (Ubuntu, etc.)</strong>: <code>.deb</code> package for x86_64 in the <a href="https://github.com/ludocode/msgpack-tools/releases/latest">latest release</a>; install with <code>dpkg</code></p>
</li>
</ul>
<p dir="auto">For other platforms, msgpack-tools must be built from source. Download the msgpack-tools tarball from the <a href="https://github.com/ludocode/msgpack-tools/releases/latest">latest release page</a> (not the "source code" archive generated by GitHub, but the actual release package.)</p>
<p dir="auto">msgpack-tools uses CMake. A <code>configure</code> wrapper is provided that calls CMake, so you can simply run the usual:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="./configure &amp;&amp; make &amp;&amp; sudo make install"><pre class="notranslate"><code>./configure &amp;&amp; make &amp;&amp; sudo make install
</code></pre></div>
<p dir="auto">If you are building from the repository, you will need <a href="https://github.com/sunaku/md2man">md2man</a> to generate the man pages.</p>
<h6 dir="auto">
<a id="user-content-differences-between-messagepack-and-json" class="anchor" aria-hidden="true" href="#differences-between-messagepack-and-json"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Differences between MessagePack and JSON</h6>
<p dir="auto">MessagePack is intended to be very close to JSON in supported features, so they can usually be transparently converted from one to the other. There are some differences, however, which can complicate conversions.</p>
<p dir="auto">These are the differences in what objects are representable in each format:</p>
<ul dir="auto">
<li>
<p dir="auto">JSON keys must be strings. MessagePack keys can be any type, including maps and arrays.</p>
</li>
<li>
<p dir="auto">JSON supports "bignums", i.e. integers of any size. MessagePack integers must fit within a 64-bit signed or unsigned integer.</p>
</li>
<li>
<p dir="auto">JSON real numbers are specified in decimal scientific notation and can have arbitrary precision. MessagePack real numbers are in IEEE 754 standard 32-bit or 64-bit binary.</p>
</li>
<li>
<p dir="auto">MessagePack supports binary and extension type objects. JSON does not support binary data. Binary data is often encoded into a base64 string to be embedded into a JSON document.</p>
</li>
<li>
<p dir="auto">A JSON document can be encoded in UTF-8, UTF-16 or UTF-32, and the entire document must be in the same encoding. MessagePack strings are required to be UTF-8, although this is not enforced by many encoding/decoding libraries.</p>
</li>
</ul>
<p dir="auto">By default, <code>msgpack2json</code> and <code>json2msgpack</code> convert in strict mode. If an object in the source format is not representable in the destination format, the converter aborts with an error. A lax mode is available which performs a "lossy" conversion, and base64 conversion modes are available to support binary data in JSON.</p>
</article>
  </div>
        </div>
        
        <div id="qs-tihannalouise-https-github-com-msgpack-msgpack-java" class="qs"><h4><a href="https://github.com/tihannalouise/https-github.com-msgpack-msgpack-java" target="_blank">tihannalouise/https-github.com-msgpack-msgpack-java <span class="qs-url">https://github.com/tihannalouise/https-github.com-msgpack-msgpack-java</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-https-githubcom-msgpack-msgpack-java" class="anchor" aria-hidden="true" href="#https-githubcom-msgpack-msgpack-java"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>https-github.com-msgpack-msgpack-java</h5>
<p dir="auto">msgpack.org[expert-carnival]</p>
</article>
  </div>
        </div>
        
        <div id="qs-esensar-kotlinx-serialization-msgpack" class="qs"><h4><a href="https://www.ensarsarajcic.com/kotlinx-serialization-msgpack/" target="_blank">esensar/kotlinx-serialization-msgpack <span class="qs-url">https://www.ensarsarajcic.com/kotlinx-serialization-msgpack/</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-kotlinx-serialization-msgpack" class="anchor" aria-hidden="true" href="#kotlinx-serialization-msgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>kotlinx-serialization-msgpack</h5>
<p dir="auto"><a href="https://github.com/esensar/kotlinx-serialization-msgpack/actions"><img src="https://github.com/esensar/kotlinx-serialization-msgpack/workflows/Tests/badge.svg" alt="Tests" style="max-width: 100%;"></a>
<a href="https://javadoc.io/doc/com.ensarsarajcic.kotlinx/serialization-msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/1fb73d7cd3771630aa416447fe82fb16b9593f5580750be438dabb0bf873a277/68747470733a2f2f6a617661646f632e696f2f6261646765322f636f6d2e656e736172736172616a6369632e6b6f746c696e782f73657269616c697a6174696f6e2d6d73677061636b2f6a617661646f632e737667" alt="javadoc" data-canonical-src="https://javadoc.io/badge2/com.ensarsarajcic.kotlinx/serialization-msgpack/javadoc.svg" style="max-width: 100%;"></a>
<a href="https://maven-badges.herokuapp.com/maven-central/com.ensarsarajcic.kotlinx/serialization-msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/b7a2b8776b919115064551d6d02af8a005151d362d3f292f3b27e2062b99e95a/68747470733a2f2f6d6176656e2d6261646765732e6865726f6b756170702e636f6d2f6d6176656e2d63656e7472616c2f636f6d2e656e736172736172616a6369632e6b6f746c696e782f73657269616c697a6174696f6e2d6d73677061636b2f62616467652e737667" alt="Maven Central" data-canonical-src="https://maven-badges.herokuapp.com/maven-central/com.ensarsarajcic.kotlinx/serialization-msgpack/badge.svg" style="max-width: 100%;"></a>
<a href="https://s01.oss.sonatype.org/content/repositories/snapshots/com/ensarsarajcic/kotlinx/serialization-msgpack/" rel="nofollow"><img src="https://camo.githubusercontent.com/5a55adb3a40c524b61ea0e3ac276f12dab793da8479f4851276bb15a982a14c9/68747470733a2f2f696d672e736869656c64732e696f2f6e657875732f732f636f6d2e656e736172736172616a6369632e6b6f746c696e782f73657269616c697a6174696f6e2d6d73677061636b3f7365727665723d68747470732533412532462532467330312e6f73732e736f6e61747970652e6f7267" alt="Sonatype Nexus (Snapshots)" data-canonical-src="https://img.shields.io/nexus/s/com.ensarsarajcic.kotlinx/serialization-msgpack?server=https%3A%2F%2Fs01.oss.sonatype.org" style="max-width: 100%;"></a></p>
<p dir="auto"><strong>Project is under active development! Important features may be missing and bugs are present!</strong></p>
<p dir="auto">Check out <a href="https://github.com/esensar/kotlinx-serialization-msgpack/milestones">milestones</a> for progress.</p>
<h6 dir="auto">
<a id="user-content-about" class="anchor" aria-hidden="true" href="#about"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>About</h6>
<p dir="auto">This library provides <a href="https://github.com/Kotlin/kotlinx.serialization">MsgPack</a> support for <a href="https://github.com/Kotlin/kotlinx.serialization">kotlinx.serialization</a>. It supports all of kotlin targets (JVM, JS, Native).</p>
<h6 dir="auto">
<a id="user-content-integration" class="anchor" aria-hidden="true" href="#integration"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Integration</h6>
<h7 dir="auto">
<a id="user-content-maven-central" class="anchor" aria-hidden="true" href="#maven-central"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Maven central</h7>
<p dir="auto"><strong>Gradle:</strong></p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='implementation("com.ensarsarajcic.kotlinx:serialization-msgpack:${kotlinxSerializationMsgPackVersion}")'><pre>implementation(<span class="pl-s"><span class="pl-pds">"</span>com.ensarsarajcic.kotlinx:serialization-msgpack:<span class="pl-e">${kotlinxSerializationMsgPackVersion}</span><span class="pl-pds">"</span></span>)</pre></div>
<p dir="auto">To also use timestamp support with <a href="https://github.com/Kotlin/kotlinx-datetime">kotlinx-datetime</a>, use <code>serialization-msgpack-timestamp-extension</code>:</p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='implementation("com.ensarsarajcic.kotlinx:serialization-msgpack-timestamp-extension:${kotlinxSerializationMsgPackVersion}")'><pre>implementation(<span class="pl-s"><span class="pl-pds">"</span>com.ensarsarajcic.kotlinx:serialization-msgpack-timestamp-extension:<span class="pl-e">${kotlinxSerializationMsgPackVersion}</span><span class="pl-pds">"</span></span>)</pre></div>
<p dir="auto"><strong>NOTE</strong>:
Timestamp support is available in core library as well, the additional library just adds a specific serializer that can be used with <a href="https://github.com/Kotlin/kotlinx-datetime">kotlinx-datetime</a> types. These are <code>MsgPackTimestamp32DatetimeSerializer</code>, <code>MsgPackTimestamp64DatetimeSerializer</code> and <code>MsgPackTimestamp96DatetimeSerializer</code>.</p>
<p dir="auto">For experimental kotlin unsigned types support, use <code>serialization-msgpack-unsigned-support</code>:</p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='implementation("com.ensarsarajcic.kotlinx:serialization-msgpack-unsigned-support:${kotlinxSerializationMsgPackVersion}")'><pre>implementation(<span class="pl-s"><span class="pl-pds">"</span>com.ensarsarajcic.kotlinx:serialization-msgpack-unsigned-support:<span class="pl-e">${kotlinxSerializationMsgPackVersion}</span><span class="pl-pds">"</span></span>)</pre></div>
<h7 dir="auto">
<a id="user-content-snapshot-builds" class="anchor" aria-hidden="true" href="#snapshot-builds"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Snapshot builds</h7>
<p dir="auto"><strong>Gradle:</strong></p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='repositories {
    maven {
        url = uri("https://oss.sonatype.org/content/repositories/snapshots")
    }
}
implementation("com.ensarsarajcic.kotlinx:serialization-msgpack:${kotlinxSerializationMsgPackSnapshotVersion}")'><pre>repositories {
    maven {
        url <span class="pl-k">=</span> uri(<span class="pl-s"><span class="pl-pds">"</span>https://oss.sonatype.org/content/repositories/snapshots<span class="pl-pds">"</span></span>)
    }
}
implementation(<span class="pl-s"><span class="pl-pds">"</span>com.ensarsarajcic.kotlinx:serialization-msgpack:<span class="pl-e">${kotlinxSerializationMsgPackSnapshotVersion}</span><span class="pl-pds">"</span></span>)</pre></div>
<p dir="auto">To also use timestamp support with <a href="https://github.com/Kotlin/kotlinx-datetime">kotlinx-datetime</a>, use <code>serialization-msgpack-timestamp-extension</code>:</p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='implementation("com.ensarsarajcic.kotlinx:serialization-msgpack-timestamp-extension:${kotlinxSerializationMsgPackSnapshotVersion}")'><pre>implementation(<span class="pl-s"><span class="pl-pds">"</span>com.ensarsarajcic.kotlinx:serialization-msgpack-timestamp-extension:<span class="pl-e">${kotlinxSerializationMsgPackSnapshotVersion}</span><span class="pl-pds">"</span></span>)</pre></div>
<p dir="auto">For experimental kotlin unsigned types support, use <code>serialization-msgpack-unsigned-support</code>:</p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='implementation("com.ensarsarajcic.kotlinx:serialization-msgpack-unsigned-support:${kotlinxSerializationMsgPackSnapshotVersion}")'><pre>implementation(<span class="pl-s"><span class="pl-pds">"</span>com.ensarsarajcic.kotlinx:serialization-msgpack-unsigned-support:<span class="pl-e">${kotlinxSerializationMsgPackSnapshotVersion}</span><span class="pl-pds">"</span></span>)</pre></div>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<p dir="auto">Library should be used in same way as any other kotlinx.serialization library. Created models are annotated with <code>@Serializable</code> annotation and their <code>serializer()</code> can be passed to <code>MsgPack</code>.</p>
<p dir="auto"><strong>Example:</strong></p>
<div class="highlight highlight-source-kotlin notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="@Serializable
data class SampleClass(
    val testString: String,
    val testInt: Int,
    val testBoolean: Boolean
)

fun encode() {
    println(
        MsgPack.encodeToByteArray(
            SampleClass.serializer(),
            SampleClass(&quot;def&quot;, 123, true)
        ).joinToString(separator = &quot;&quot;) { it.toInt().and(0xff).toString(16).padStart(2, '0') }
    ) // Outputs: 83aa74657374537472696e67a3646566a774657374496e747bab74657374426f6f6c65616ec3
}

fun decode() {
    println(
        MsgPack.decodeFromByteArray(
            SampleClass.serializer(),
            &quot;83aa74657374537472696e67a3646566a774657374496e747bab74657374426f6f6c65616ec3&quot;.let { bytesString -&gt;
                ByteArray(bytesString.length / 2) { bytesString.substring(it * 2, it * 2 + 2).toInt(16).toByte() }
            }
        )
    ) // Outputs: SampleClass(testString=def, testInt=123, testBoolean=true)
}"><pre>@Serializable
<span class="pl-k">data class</span> <span class="pl-en">SampleClass</span>(
    <span class="pl-k">val</span> <span class="pl-smi">testString</span><span class="pl-k">:</span> <span class="pl-c1">String</span>,
    <span class="pl-k">val</span> <span class="pl-smi">testInt</span><span class="pl-k">:</span> <span class="pl-c1">Int</span>,
    <span class="pl-k">val</span> <span class="pl-smi">testBoolean</span><span class="pl-k">:</span> <span class="pl-c1">Boolean</span>
)

<span class="pl-k">fun</span> <span class="pl-en">encode</span>() {
    <span class="pl-c1">println</span>(
        <span class="pl-en">MsgPack</span>.encodeToByteArray(
            <span class="pl-en">SampleClass</span>.serializer(),
            <span class="pl-en">SampleClass</span>(<span class="pl-s"><span class="pl-pds">"</span>def<span class="pl-pds">"</span></span>, <span class="pl-c1">123</span>, <span class="pl-c1">true</span>)
        ).joinToString(separator <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>) { it.toInt().<span class="pl-k">and</span>(<span class="pl-c1">0xff</span>).toString(<span class="pl-c1">16</span>).padStart(<span class="pl-c1">2</span>, <span class="pl-s"><span class="pl-pds">'</span>0<span class="pl-pds">'</span></span>) }
    ) <span class="pl-c"><span class="pl-c">//</span> Outputs: 83aa74657374537472696e67a3646566a774657374496e747bab74657374426f6f6c65616ec3</span>
}

<span class="pl-k">fun</span> <span class="pl-en">decode</span>() {
    <span class="pl-c1">println</span>(
        <span class="pl-en">MsgPack</span>.decodeFromByteArray(
            <span class="pl-en">SampleClass</span>.serializer(),
            <span class="pl-s"><span class="pl-pds">"</span>83aa74657374537472696e67a3646566a774657374496e747bab74657374426f6f6c65616ec3<span class="pl-pds">"</span></span>.<span class="pl-c1">let</span> { bytesString <span class="pl-k">-&gt;</span>
                <span class="pl-c1">ByteArray</span>(bytesString.length <span class="pl-k">/</span> <span class="pl-c1">2</span>) { bytesString.substring(it <span class="pl-k">*</span> <span class="pl-c1">2</span>, it <span class="pl-k">*</span> <span class="pl-c1">2</span> <span class="pl-k">+</span> <span class="pl-c1">2</span>).toInt(<span class="pl-c1">16</span>).toByte() }
            }
        )
    ) <span class="pl-c"><span class="pl-c">//</span> Outputs: SampleClass(testString=def, testInt=123, testBoolean=true)</span>
}</pre></div>
<h6 dir="auto">
<a id="user-content-contributing" class="anchor" aria-hidden="true" href="#contributing"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Contributing</h6>
<p dir="auto">Check out <a href="/esensar/kotlinx-serialization-msgpack/blob/main/CONTRIBUTING.md">contributing guidelines</a>.</p>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<p dir="auto"><a href="/esensar/kotlinx-serialization-msgpack/blob/main/LICENSE">MIT</a></p>
</article>
  </div>
        </div>
        
        <div id="qs-suzukaze-mruby-msgpack" class="qs"><h4><a href="MessagePack for mruby" target="_blank">suzukaze/mruby-msgpack <span class="qs-url">MessagePack for mruby</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-mruby-msgpack---" class="anchor" aria-hidden="true" href="#mruby-msgpack---"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>mruby-msgpack   <a href="https://travis-ci.org/suzukaze/mruby-msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/35cb77c2bbea6ba5eca4363e38761dd84c733cc860030466b67f491faf333155/68747470733a2f2f7472617669732d63692e6f72672f73757a756b617a652f6d727562792d6d73677061636b2e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/suzukaze/mruby-msgpack.png?branch=master" style="max-width: 100%;"></a>
</h5>
<h6 dir="auto">
<a id="user-content-welcome-to-messagepack-for-mruby" class="anchor" aria-hidden="true" href="#welcome-to-messagepack-for-mruby"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Welcome to MessagePack for mruby</h6>
<p dir="auto">MessagePack for mruby is MessagePack implimented in mruby language.</p>
<div class="highlight highlight-source-ruby notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='msg = [1, 2, 3].to_msgpack  #=&gt; "\x93\x01\x02\x03"
MessagePack.unpack(msg)     #=&gt; [1, 2, 3]'><pre><span class="pl-s1">msg</span> <span class="pl-c1">=</span> <span class="pl-kos">[</span><span class="pl-c1">1</span><span class="pl-kos">,</span> <span class="pl-c1">2</span><span class="pl-kos">,</span> <span class="pl-c1">3</span><span class="pl-kos">]</span><span class="pl-kos">.</span><span class="pl-en">to_msgpack</span>  <span class="pl-c">#=&gt; "\x93\x01\x02\x03"</span>
<span class="pl-v">MessagePack</span><span class="pl-kos">.</span><span class="pl-en">unpack</span><span class="pl-kos">(</span><span class="pl-s1">msg</span><span class="pl-kos">)</span>     <span class="pl-c">#=&gt; [1, 2, 3]</span></pre></div>
<p dir="auto">This is early vesion. Please check the methods that work in test folder.</p>
<h6 dir="auto">
<a id="user-content-platform" class="anchor" aria-hidden="true" href="#platform"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Platform</h6>
<p dir="auto">I test MessagePack for mruby in mac OSX 10.8.4. In the future it will work in Windows and Linux OS.</p>
<h6 dir="auto">
<a id="user-content-getting-started" class="anchor" aria-hidden="true" href="#getting-started"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Getting Started</h6>
<ol dir="auto">
<li>
<p dir="auto">Download MessagePack for mruby at the command prompt:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content=" git clone https://github.com/suzukaze/mruby-msgpack.git"><pre class="notranslate"><code> git clone https://github.com/suzukaze/mruby-msgpack.git
</code></pre></div>
</li>
<li>
<p dir="auto">Add config.gem line to <code>build_config.rb</code></p>
</li>
</ol>
<div class="highlight highlight-source-ruby notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="MRuby::Build.new do |conf|

  # ...(snip)...
  conf.gem :git =&gt; 'https://github.com/suzukaze/mruby-msgpack.git'
end"><pre><span class="pl-v">MRuby</span>::<span class="pl-v">Build</span><span class="pl-kos">.</span><span class="pl-en">new</span> <span class="pl-k">do</span> |<span class="pl-s1">conf</span>|

  <span class="pl-c"># ...(snip)...</span>
  <span class="pl-s1">conf</span><span class="pl-kos">.</span><span class="pl-en">gem</span> <span class="pl-pds">:git</span> <span class="pl-c1">=&gt;</span> <span class="pl-s">'https://github.com/suzukaze/mruby-msgpack.git'</span>
<span class="pl-k">end</span></pre></div>
<ol start="3" dir="auto">
<li>
<p dir="auto">Test at the command prompt:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content=" rake test"><pre class="notranslate"><code> rake test
</code></pre></div>
</li>
<li>
<p dir="auto">Build at the command prompt:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content=" rake"><pre class="notranslate"><code> rake
</code></pre></div>
</li>
</ol>
<h6 dir="auto">
<a id="user-content-msgpack-ruby-commit" class="anchor" aria-hidden="true" href="#msgpack-ruby-commit"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack-ruby commit</h6>
<p dir="auto">mruby-msgpack is based on <a href="https://github.com/msgpack/msgpack-ruby">msgpack-ruby</a>(<code>a7c2dc34ef69c9132167e38009baa8420c460c9b</code>)</p>
<h6 dir="auto">
<a id="user-content-contributing" class="anchor" aria-hidden="true" href="#contributing"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Contributing</h6>
<p dir="auto">I encourage you to contribute to MessagePack for mruby!</p>
<h6 dir="auto">
<a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h6>
<p dir="auto">Author : Jun Hiroe</p>
<p dir="auto">Copyrigh : Copyright (c) 2013 Jun Hiroe</p>
<p dir="auto">License : MIT License</p>
</article>
  </div>
        </div>
        
        <div id="qs-Asmod4n-mruby-simplemsgpack" class="qs"><h4><a href="https://github.com/Asmod4n/mruby-simplemsgpack" target="_blank">Asmod4n/mruby-simplemsgpack <span class="qs-url">https://github.com/Asmod4n/mruby-simplemsgpack</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><p dir="auto"><a href="https://travis-ci.com/Asmod4n/mruby-simplemsgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/e8dc946655f2ec50651c08a095e25e1d2ea4b515d75c5285994c3bcb5b2105a8/68747470733a2f2f7472617669732d63692e636f6d2f41736d6f64346e2f6d727562792d73696d706c656d73677061636b2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.com/Asmod4n/mruby-simplemsgpack.svg?branch=master" style="max-width: 100%;"></a></p>
<h5 dir="auto">
<a id="user-content-mruby-simplemsgpack" class="anchor" aria-hidden="true" href="#mruby-simplemsgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>mruby-simplemsgpack</h5>
<h5 dir="auto">
<a id="user-content-breaking-changes" class="anchor" aria-hidden="true" href="#breaking-changes"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Breaking changes</h5>
<p dir="auto">Starting with Release 2.0 only mruby-3 is supported, if you are on an older version check out a commit from before 2021.</p>
<h5 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h5>
<p dir="auto">First get a working copy of <a href="https://github.com/mruby/mruby">mruby</a> then add</p>
<div class="highlight highlight-source-ruby notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  conf.gem mgem: 'mruby-simplemsgpack'"><pre>  <span class="pl-en">conf</span><span class="pl-kos">.</span><span class="pl-en">gem</span> <span class="pl-pds">mgem</span>: <span class="pl-s">'mruby-simplemsgpack'</span></pre></div>
<p dir="auto">to the build_conf.rb of the mruby directory</p>
<p dir="auto">mruby-simplemsgpack searches for msgpack-c on your system, if it can find it it links against it, otherwise it builds against msgpack-c from source.
You need at least msgpack-c 1 and depending on your system also pkg-config.</p>
<p dir="auto">For building from source you need to have cmake installed on your system, take a look at <a href="https://github.com/msgpack/msgpack-c/blob/c_master/QUICKSTART-C.md#install-with-source-code">https://github.com/msgpack/msgpack-c/blob/c_master/QUICKSTART-C.md#install-with-source-code</a> for more information.</p>
<h6 dir="auto">
<a id="user-content-example" class="anchor" aria-hidden="true" href="#example"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example</h6>
<p dir="auto">Objects can be packed with <code>Object#to_msgpack</code> or <code>MessagePack.pack</code>:</p>
<div class="highlight highlight-source-ruby notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="packed_hash = { a: 'hash', with: [1, 'embedded', 'array'] }.to_msgpack
packed_string = MessagePack.pack('bye')

packed_hash   # =&gt; &quot;\x82\xA1a\xA4hash\xA4with\x93\x01\xA8embedded\xA5array&quot;
packed_string # =&gt; &quot;\xA3bye&quot;"><pre><span class="pl-s1">packed_hash</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span> <span class="pl-pds">a</span>: <span class="pl-s">'hash'</span><span class="pl-kos">,</span> <span class="pl-pds">with</span>: <span class="pl-kos">[</span><span class="pl-c1">1</span><span class="pl-kos">,</span> <span class="pl-s">'embedded'</span><span class="pl-kos">,</span> <span class="pl-s">'array'</span><span class="pl-kos">]</span> <span class="pl-kos">}</span><span class="pl-kos">.</span><span class="pl-en">to_msgpack</span>
<span class="pl-s1">packed_string</span> <span class="pl-c1">=</span> <span class="pl-v">MessagePack</span><span class="pl-kos">.</span><span class="pl-en">pack</span><span class="pl-kos">(</span><span class="pl-s">'bye'</span><span class="pl-kos">)</span>

<span class="pl-s1">packed_hash</span>   <span class="pl-c"># =&gt; "\x82\xA1a\xA4hash\xA4with\x93\x01\xA8embedded\xA5array"</span>
<span class="pl-s1">packed_string</span> <span class="pl-c"># =&gt; "\xA3bye"</span></pre></div>
<p dir="auto">They are unpacked with <code>MessagePack.unpack</code>:</p>
<div class="highlight highlight-source-ruby notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="MessagePack.unpack(packed_hash)   # =&gt; { a: 'hash', with: [1, 'embedded', 'array'] }
MessagePack.unpack(packed_string) # =&gt; 'bye'"><pre><span class="pl-v">MessagePack</span><span class="pl-kos">.</span><span class="pl-en">unpack</span><span class="pl-kos">(</span><span class="pl-en">packed_hash</span><span class="pl-kos">)</span>   <span class="pl-c"># =&gt; { a: 'hash', with: [1, 'embedded', 'array'] }</span>
<span class="pl-v">MessagePack</span><span class="pl-kos">.</span><span class="pl-en">unpack</span><span class="pl-kos">(</span><span class="pl-en">packed_string</span><span class="pl-kos">)</span> <span class="pl-c"># =&gt; 'bye'</span></pre></div>
<p dir="auto">A string with multiple packed values can be unpacked by handing a block to
<code>MessagePack.unpack</code>:</p>
<div class="highlight highlight-source-ruby notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="packed = packed_string + packed_hash
unpacked = []
MessagePack.unpack(packed) do |result|
  unpacked &lt;&lt; result
end
unpacked # =&gt; ['bye', { a: 'hash', with: [1, 'embedded', 'array'] }]"><pre><span class="pl-s1">packed</span> <span class="pl-c1">=</span> <span class="pl-en">packed_string</span> + <span class="pl-en">packed_hash</span>
<span class="pl-s1">unpacked</span> <span class="pl-c1">=</span> <span class="pl-kos">[</span><span class="pl-kos">]</span>
<span class="pl-v">MessagePack</span><span class="pl-kos">.</span><span class="pl-en">unpack</span><span class="pl-kos">(</span><span class="pl-s1">packed</span><span class="pl-kos">)</span> <span class="pl-k">do</span> |<span class="pl-s1">result</span>|
  <span class="pl-s1">unpacked</span> &lt;&lt; <span class="pl-s1">result</span>
<span class="pl-k">end</span>
<span class="pl-s1">unpacked</span> <span class="pl-c"># =&gt; ['bye', { a: 'hash', with: [1, 'embedded', 'array'] }]</span></pre></div>
<p dir="auto">When using <code>MessagePack.unpack</code> with a block and passing it a incomplete packed Message
it returns the position of the first offending byte, if it was able to unpack the whole Message it returns self.
This is helpful if the given data contains an incomplete
last object and we want to continue unpacking after we have more data.</p>
<div class="highlight highlight-source-ruby notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="packed = packed_string + packed_hash.slice(0, packed_hash.length/2)
unpacked = []
offending_byte = MessagePack.unpack(packed) do |result|
  unpacked &lt;&lt; result
end
offending_byte # =&gt; 19 (length of packed)
unpacked # =&gt; ['bye']"><pre><span class="pl-s1">packed</span> <span class="pl-c1">=</span> <span class="pl-en">packed_string</span> + <span class="pl-en">packed_hash</span><span class="pl-kos">.</span><span class="pl-en">slice</span><span class="pl-kos">(</span><span class="pl-c1">0</span><span class="pl-kos">,</span> <span class="pl-en">packed_hash</span><span class="pl-kos">.</span><span class="pl-en">length</span>/<span class="pl-c1">2</span><span class="pl-kos">)</span>
<span class="pl-s1">unpacked</span> <span class="pl-c1">=</span> <span class="pl-kos">[</span><span class="pl-kos">]</span>
<span class="pl-s1">offending_byte</span> <span class="pl-c1">=</span> <span class="pl-v">MessagePack</span><span class="pl-kos">.</span><span class="pl-en">unpack</span><span class="pl-kos">(</span><span class="pl-s1">packed</span><span class="pl-kos">)</span> <span class="pl-k">do</span> |<span class="pl-s1">result</span>|
  <span class="pl-s1">unpacked</span> &lt;&lt; <span class="pl-s1">result</span>
<span class="pl-k">end</span>
<span class="pl-s1">offending_byte</span> <span class="pl-c"># =&gt; 19 (length of packed)</span>
<span class="pl-s1">unpacked</span> <span class="pl-c"># =&gt; ['bye']</span></pre></div>
<h6 dir="auto">
<a id="user-content-extension-types" class="anchor" aria-hidden="true" href="#extension-types"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Extension Types</h6>
<p dir="auto">To customize how objects are packed, define an <a href="https://github.com/msgpack/msgpack/blob/master/spec.md#types-extension-type">extension type</a>.</p>
<p dir="auto">By default, MessagePack packs symbols as strings and does not convert them
back when unpacking them. Symbols can be preserved by registering an extension
type for them:</p>
<div class="highlight highlight-source-ruby notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="sym_ext_type = 0
MessagePack.register_pack_type(sym_ext_type, Symbol) { |symbol| symbol.to_s }
MessagePack.register_unpack_type(sym_ext_type) { |data| data.to_sym }

MessagePack.unpack(:symbol.to_msgpack) # =&gt; :symbol"><pre><span class="pl-s1">sym_ext_type</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>
<span class="pl-v">MessagePack</span><span class="pl-kos">.</span><span class="pl-en">register_pack_type</span><span class="pl-kos">(</span><span class="pl-s1">sym_ext_type</span><span class="pl-kos">,</span> <span class="pl-v">Symbol</span><span class="pl-kos">)</span> <span class="pl-kos">{</span> |<span class="pl-s1">symbol</span>| <span class="pl-s1">symbol</span><span class="pl-kos">.</span><span class="pl-en">to_s</span> <span class="pl-kos">}</span>
<span class="pl-v">MessagePack</span><span class="pl-kos">.</span><span class="pl-en">register_unpack_type</span><span class="pl-kos">(</span><span class="pl-s1">sym_ext_type</span><span class="pl-kos">)</span> <span class="pl-kos">{</span> |<span class="pl-s1">data</span>| <span class="pl-s1">data</span><span class="pl-kos">.</span><span class="pl-en">to_sym</span> <span class="pl-kos">}</span>

<span class="pl-v">MessagePack</span><span class="pl-kos">.</span><span class="pl-en">unpack</span><span class="pl-kos">(</span><span class="pl-pds">:symbol</span><span class="pl-kos">.</span><span class="pl-en">to_msgpack</span><span class="pl-kos">)</span> <span class="pl-c"># =&gt; :symbol</span></pre></div>
<p dir="auto">Other objects like classes can also be preserved:</p>
<div class="highlight highlight-source-ruby notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="cls_ext_type = 1
MessagePack.register_pack_type(cls_ext_type, Class) { |cls| cls.to_s }
MessagePack.register_unpack_type(cls_ext_type) { |data| data.constantize }
MessagePack.unpack(Object.to_msgpack) # =&gt; Object"><pre><span class="pl-s1">cls_ext_type</span> <span class="pl-c1">=</span> <span class="pl-c1">1</span>
<span class="pl-v">MessagePack</span><span class="pl-kos">.</span><span class="pl-en">register_pack_type</span><span class="pl-kos">(</span><span class="pl-s1">cls_ext_type</span><span class="pl-kos">,</span> <span class="pl-v">Class</span><span class="pl-kos">)</span> <span class="pl-kos">{</span> |<span class="pl-s1">cls</span>| <span class="pl-s1">cls</span><span class="pl-kos">.</span><span class="pl-en">to_s</span> <span class="pl-kos">}</span>
<span class="pl-v">MessagePack</span><span class="pl-kos">.</span><span class="pl-en">register_unpack_type</span><span class="pl-kos">(</span><span class="pl-s1">cls_ext_type</span><span class="pl-kos">)</span> <span class="pl-kos">{</span> |<span class="pl-s1">data</span>| <span class="pl-s1">data</span><span class="pl-kos">.</span><span class="pl-en">constantize</span> <span class="pl-kos">}</span>
<span class="pl-v">MessagePack</span><span class="pl-kos">.</span><span class="pl-en">unpack</span><span class="pl-kos">(</span><span class="pl-v">Object</span><span class="pl-kos">.</span><span class="pl-en">to_msgpack</span><span class="pl-kos">)</span> <span class="pl-c"># =&gt; Object</span></pre></div>
<p dir="auto">For nil, true, false, Integer, Float, String, Array and Hash a registered
ext type is ignored. They are always packed according to the <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">MessagePack
specification</a>.</p>
<h6 dir="auto">
<a id="user-content-proc-blocks-or-lambas" class="anchor" aria-hidden="true" href="#proc-blocks-or-lambas"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Proc, blocks or lambas</h6>
<p dir="auto">If you want to pack and unpack mruby blocks take a look at the <a href="https://github.com/Asmod4n/mruby-proc-irep-ext">mruby-proc-irep-ext</a> gem, it can be registered like the other extension types</p>
<h6 dir="auto">
<a id="user-content-overriding-to_msgpack" class="anchor" aria-hidden="true" href="#overriding-to_msgpack"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Overriding <code>to_msgpack</code>
</h6>
<p dir="auto">It's not supported to override <code>to_msgpack</code>, <code>MessagePack.pack</code> ignores it, same when that object is included in a Hash or Array.
This gem treats objects like ruby does, if you want to change the way your custom Class gets handled you can add <code>to_hash</code>, <code>to_ary</code>, <code>to_int</code> or <code>to_str</code> methods so it will be packed like a Hash, Array, Integer or String (in that order) then.</p>
<h6 dir="auto">
<a id="user-content-acknowledgements" class="anchor" aria-hidden="true" href="#acknowledgements"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Acknowledgements</h6>
<p dir="auto">This is using code from <a href="https://github.com/msgpack/msgpack-c">https://github.com/msgpack/msgpack-c</a></p>
<p dir="auto">Copyright (C) 2008-2015 FURUHASHI Sadayuki</p>
<p dir="auto">Distributed under the Boost Software License, Version 1.0.
(See accompanying file LICENSE_1_0.txt or copy at
<a href="http://www.boost.org/LICENSE_1_0.txt" rel="nofollow">http://www.boost.org/LICENSE_1_0.txt</a>)</p>
</article>
  </div>
        </div>
        
        <div id="qs-tagomoris-msgpack-inspect" class="qs"><h4><a href="https://github.com/tagomoris/msgpack-inspect" target="_blank">tagomoris/msgpack-inspect <span class="qs-url">https://github.com/tagomoris/msgpack-inspect</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack-inspect" class="anchor" aria-hidden="true" href="#msgpack-inspect"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack-inspect</h5>
<p dir="auto">This is a command line tool to inspect/show a data serialized by <a href="http://msgpack.org/" rel="nofollow">MessagePack</a>.</p>
<h6 dir="auto">
<a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h6>
<p dir="auto">Executable binary files are available from <a href="https://github.com/tagomoris/msgpack-inspect/releases">releases</a>. Download a file for your platform, and use it.</p>
<p dir="auto">Otherwise, you can install rubygem version on your CRuby runtime:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ gem install msgpack-inspect"><pre class="notranslate"><code>$ gem install msgpack-inspect
</code></pre></div>
<h6 dir="auto">
<a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h6>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Usage: msgpack-inspect [options] FILE

Options:

    -f, --format FORMAT              output format of inspection result (yaml/json/jsonl) [default: yaml]
    -r, --require LIB                ruby file path to require (to load ext type definitions)
    -v, --version                    Show version of this software
    -h, --help                       Show this message"><pre class="notranslate"><code>Usage: msgpack-inspect [options] FILE

Options:

    -f, --format FORMAT              output format of inspection result (yaml/json/jsonl) [default: yaml]
    -r, --require LIB                ruby file path to require (to load ext type definitions)
    -v, --version                    Show version of this software
    -h, --help                       Show this message
</code></pre></div>
<p dir="auto"><code>-r</code> option is available oly with rubygem version, and unavailable with mruby binary release.</p>
<p dir="auto">FILE is a file which msgpack binary stored. Specify <code>-</code> to inspect data from STDIN.
This command shows the all data contained in specified format (YAML in default).</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='---
- format: "false"
  header: "0xc2"
  data: "0xc2"
  value: false
- format: "true"
  header: "0xc3"
  data: "0xc3"
  value: true'><pre class="notranslate"><code>---
- format: "false"
  header: "0xc2"
  data: "0xc2"
  value: false
- format: "true"
  header: "0xc3"
  data: "0xc3"
  value: true
</code></pre></div>
<h6 dir="auto">
<a id="user-content-example" class="anchor" aria-hidden="true" href="#example"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example</h6>
<p dir="auto">This is an example to inspect a data from STDIN.
The data corresponds to <code>{"compact":true,"schema":0}</code> in JSON.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='$ printf "\x82\xa7compact\xc3\xa6schema\x00" | msgpack-inspect -
---
- format: "fixmap"
  header: "0x82"
  length: 2
  children:
    - key:
        format: "fixstr"
        header: "0xa7"
        length: 7
        data: "0x636f6d70616374"
        value: "compact"
      value:
        format: "true"
        header: "0xc3"
        data: "0xc3"
        value: true
    - key:
        format: "fixstr"
        header: "0xa6"
        length: 6
        data: "0x736368656d61"
        value: "schema"
      value:
        format: "fixint"
        header: "0x00"
        data: "0x00"
        value: 0'><pre class="notranslate"><code>$ printf "\x82\xa7compact\xc3\xa6schema\x00" | msgpack-inspect -
---
- format: "fixmap"
  header: "0x82"
  length: 2
  children:
    - key:
        format: "fixstr"
        header: "0xa7"
        length: 7
        data: "0x636f6d70616374"
        value: "compact"
      value:
        format: "true"
        header: "0xc3"
        data: "0xc3"
        value: true
    - key:
        format: "fixstr"
        header: "0xa6"
        length: 6
        data: "0x736368656d61"
        value: "schema"
      value:
        format: "fixint"
        header: "0x00"
        data: "0x00"
        value: 0
</code></pre></div>
<p dir="auto">TODO: show more example</p>
<h6 dir="auto">
<a id="user-content-contributing" class="anchor" aria-hidden="true" href="#contributing"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Contributing</h6>
<p dir="auto">Bug reports and pull requests are welcome on GitHub at [<a href="https://github.com/tagomoris/msgpack-inspect">https://github.com/tagomoris/msgpack-inspect</a>].</p>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack4z-msgpack4z-argonaut" class="qs"><h4><a href="https://msgpack4z.github.io/graph.svg" target="_blank">msgpack4z/msgpack4z-argonaut <span class="qs-url">https://msgpack4z.github.io/graph.svg</span></a></h4>
<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h5 dir="auto">
<a id="user-content-msgpack4z-argonaut" class="anchor" aria-hidden="true" href="#msgpack4z-argonaut"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>msgpack4z-argonaut</h5>
<p dir="auto"><a href="https://maven-badges.herokuapp.com/maven-central/com.github.xuwei-k/msgpack4z-argonaut_2.12" rel="nofollow"><img src="https://camo.githubusercontent.com/43f391f831e6dbcbe6c9a11f9cbbf7e2e72e58a53f7ee0b17e42fcabc66255a1/68747470733a2f2f6d6176656e2d6261646765732e6865726f6b756170702e636f6d2f6d6176656e2d63656e7472616c2f636f6d2e6769746875622e78757765692d6b2f6d73677061636b347a2d6172676f6e6175745f322e31322f62616467652e737667" alt="Maven Central" data-canonical-src="https://maven-badges.herokuapp.com/maven-central/com.github.xuwei-k/msgpack4z-argonaut_2.12/badge.svg" style="max-width: 100%;"></a>
<a href="https://javadoc.io/doc/com.github.xuwei-k/msgpack4z-argonaut_3/latest/api/msgpack4z.html" rel="nofollow"><img src="https://camo.githubusercontent.com/42e56ac36d1af5c89de6182fd951fe504b0c91c974fda7394cfe0412a1cfdc32/68747470733a2f2f6a617661646f632e696f2f6261646765322f636f6d2e6769746875622e78757765692d6b2f6d73677061636b347a2d6172676f6e6175745f332f6a617661646f632e737667" alt="scaladoc" data-canonical-src="https://javadoc.io/badge2/com.github.xuwei-k/msgpack4z-argonaut_3/javadoc.svg" style="max-width: 100%;"></a></p>
<ul dir="auto">
<li><a href="https://msgpack.org/" rel="nofollow">https://msgpack.org/</a></li>
<li><a href="https://github.com/msgpack/msgpack/blob/master/spec.md">https://github.com/msgpack/msgpack/blob/master/spec.md</a></li>
</ul>
<h7 dir="auto">
<a id="user-content-latest-stable-version" class="anchor" aria-hidden="true" href="#latest-stable-version"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>latest stable version</h7>
<div class="highlight highlight-source-scala notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content='libraryDependencies += "com.github.xuwei-k" %% "msgpack4z-argonaut" % "0.8.0"'><pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.github.xuwei-k<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>msgpack4z-argonaut<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.8.0<span class="pl-pds">"</span></span></pre></div>
</article>
  </div>
        </div>
        
      </div>
    </section>

    <section id="related">
      <h3>Related projects</h3>

      <div class="paragraphs">
        <h4><a href="https://github.com/dotcloud/zerorpc-python">ZeroRPC</a> by DotCloud</h4>
        <p>zerorpc is a flexible RPC implementation based on zeromq and messagepack. Service APIs exposed with zerorpc are called "zeroservices".</p>

        <h4><a href="https://github.com/pfi/pficommon">pficommon</a> by Preferred Infrastructure, Inc.</h4>
        <p>General purpose C++ library for Preferred Infrastructure, Inc. It includes MessagePack-RPC implementation for C++</p>
      </div>
    </section>

    <div id="json-to-msgpack">
      <h3>JSON <span class="bytes" id="json-bytes"></span></h3>
      <textarea type="text" id="json-text">{"compact":true,"schema":0}</textarea>
      <h3>MessagePack (hex) <span class="bytes" id="msgpack-bytes"></span> <span class="bytes" id="msgpack-percent"></span></h3>
      <textarea readonly id="msgpack-text"></textarea>
    </div>
  </main>

  <footer>
    <div>
      <div id="thanks">
        <p>MessagePack &trade; Copyright &copy; 2008-2021 Sadayuki Furuhashi</p>
      </div>
    </div>
  </footer>
</body>
